!function(e,r){"use strict";function t(r,t){t.requestId&&r.setRequestHeader("x-ms-client-session-id",t.requestId),r.setRequestHeader("Accept","*/*"),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.authorizationToken&&r.setRequestHeader("DataLabAccessToken",t.authorizationToken);var o=e("[name=__RequestVerificationToken]").val();o&&r.setRequestHeader("__RequestVerificationToken",o)}function o(r){return r=r||{},e.ajax({url:r.url,type:"GET",dataType:r.dataType||"json",reportUploadProgress:!1,beforeSend:t,requestId:r.requestId||null,authorizationToken:u}).then(function(){return u||(u=arguments[2].getResponseHeader("DataLabAccessToken")),arguments[0]},function(e,t){r.onError&&"function"==typeof r.onError&&r.onError(e,t)})}function n(r){var t={url:"/main/getuserinfo",onError:r||e.noop};return o(t)}function s(r,t,n){var s={url:"/home/ViewWorkspacePartialRefresh/"+encodeURIComponent(r),onError:n||e.noop,authorizationToken:t};return o(s)}function a(){e("#fxshell-tabspinner").hide(),e("#view-workspace-refresh-error").show(),e("#view-workspace-refresh-retry").click(function(){return location.reload(!0),!1})}function i(e,r){404===e.status&&e.responseJSON&&e.responseJSON.errorPage?document.write(e.responseJSON.errorPage):a(e,r)}var u="",c=null;0!==e("#workspaceModelData").length&&(c=JSON.parse(e("#workspaceModelData").text())),n(a).done(function(t){s(c.ActiveWorkspaceId,t.UserViewModel.AuthorizationToken,i).done(function(o){{var n;o.UserWorkspace.User}o.UserInfo=t,o.AuthorizationToken=u,r.getRefreshedWorkspaceModel=function(){return o},n=document.createElement("script"),n.type="text/javascript",n.text=o.DebugJsEnabled?'require(["jquery", "lodash", "d3", "uxfxscript"], function() { require(["/scripts/main.js"]); });':'require(["/scripts/gen/r/studio.js"]);',e("#post-model-refresh-script").append(n)})})}(jQuery,this);