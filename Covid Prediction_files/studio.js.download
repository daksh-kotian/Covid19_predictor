/*! jsObservable: http://github.com/BorisMoore/jsviews */

/*
     * Subcomponent of JsViews
     * Data change events for data-linking
     *
     * Copyright 2012, Boris Moore and Brad Olenick
     * Released under the MIT License.
     */

/*! JsRender v1.0pre: http://github.com/BorisMoore/jsrender */

/*
    * Optimized version of jQuery Templates, for rendering to string.
    * Does not require jQuery, or HTML DOM
    * Integrates with JsViews (http://github.com/BorisMoore/jsviews)
    * Copyright 2012, Boris Moore
    * Released under the MIT License.
    */

/*! JsViews v1.0pre: http://github.com/BorisMoore/jsviews */

/*
    * Interactive data-driven views using templates and data-linking.
    * Requires jQuery, and jsrender.js (next-generation jQuery Templates, optimized for pure string-based rendering)
    *    See JsRender at http://github.com/BorisMoore/jsrender
    *
    * Copyright 2012, Boris Moore
    * Released under the MIT License.
    */

// Copyright (c) Microsoft Corporation.  All rights reserved.

/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

function handleInitOrUpdate(e,t){var n=t(),r=$(e);r.is(":data(fxs-fxsCopyButton)")&&r.fxsCopyButton("destroy"),r.fxsCopyButton({text:n()})}define("utils",["jquery"],function(e){function t(t,n){n.requestId&&t.setRequestHeader("x-ms-client-session-id",n.requestId),t.setRequestHeader("Accept","*/*"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.authorizationToken&&t.setRequestHeader("DataLabAccessToken",n.authorizationToken);var r=e("[name=__RequestVerificationToken]").val();r&&t.setRequestHeader("__RequestVerificationToken",r)}function n(n){return n=n||{},e.ajax({url:n.url,type:n.method||"GET",data:n.data,dataType:n.dataType||"json",reportUploadProgress:!1,beforeSend:t,requestId:n.requestId||null,authorizationToken:n.authorizationToken||null})}function r(e){if(window.getRefreshedWorkspaceModel){var t=window.getRefreshedWorkspaceModel();e.SecurityToken=t.SecurityToken,e.UserWorkspace=t.UserWorkspace,e.HasNoExperiments=t.HasNoExperiments,e.MultiGeoRegionsList=t.MultiGeoRegionsList,e.MaximumModuleCount=t.MaximumModuleCount,e.RestrictedModules=t.RestrictedModules,e.ModuleRunTimeLimit=t.ModuleRunTimeLimit,e.StorageLimit=t.StorageLimit,e.MaxDatasetUploadSize=t.MaxDatasetUploadSize,e.TrialTimeLeft=t.TrialTimeLeft,e.TrialTimeLimit=t.TrialTimeLimit,e.UserWorkspaceType=t.UserWorkspaceType,e.integrationPoints=t.FeatureSwitches,e.ChatbotToken=t.ChatbotToken}}return{sendRequest:n,refreshWorkspaceModel:r}}),define("scripts/environment",["jquery","utils"],function(e,t){var n=null;e("#workspaceModelData").length!==0&&(n=JSON.parse(e("#workspaceModelData").text())),t.refreshWorkspaceModel(n);var r=null;e("#featureSwitches").length!==0&&(r=JSON.parse(e("#featureSwitches").text()));var i=null;e("#clientConfiguration").length!==0&&(i=JSON.parse(e("#clientConfiguration").text()));var s=null;e("#sessionId").length!==0&&(s=JSON.parse(e("#sessionId").text()));var o=null;e("#developmentMode").length!==0&&(o=JSON.parse(e("#developmentMode").text()));var u=Resources.getResources("Microsoft.MetaAnalytics.Web.ClientResources");window.getRefreshedWorkspaceModel&&(r=window.getRefreshedWorkspaceModel().FeatureSwitches,s=window.getRefreshedWorkspaceModel().SessionId),e.extend(!0,window,{environment:{branding:u.productNameLong,signOutLink:"authentication/signout",privacyNoticeUrl:u.menuPrivacyNotice,legalNoticeUrl:u.menuLegal,developmentMode:o,pageRequestId:s,clientConfiguration:i,integrationPoints:r,doMeasurePerformance:n.DoMeasurePerformance,hasNoExperiments:n.HasNoExperiments,workspaceType:n.UserWorkspaceType,workspaceOwnershipLevel:n.UserWorkspace.User.Role,subscriptionId:n.UserWorkspace.Workspace.SubscriptionId,workspaceTypeInt:n.UserWorkspace.Workspace.Type,globalWorkspaceId:n.GlobalWorkspaceId,webServicesUxLocation:n.WebServicesUXLocation,galleryBaseUrl:n.GalleryBaseUrl,possibleGalleryBaseUrls:n.PossibleGalleryBaseUrls,catalogSearchBaseUri:n.CatalogSearchBaseUri,catalogQueryBaseUri:n.CatalogQueryBaseUri,activityServiceUrl:n.ActivityServiceUrl,galleryStockImagesUrl:n.GalleryStockImagesUrl,msftAuthorId:n.MSFTAuthorId,notebookSamplesCollectionId:n.NotebookSamplesCollectionId,referenceHelpBaseURL:n.ReferenceDocsBaseUrl,esServiceBaseUrl:n.ESServiceBaseUrl,runtimeServiceBaseUrl:n.RuntimeServiceBaseUrl,notificationServiceBaseUrl:n.NotificationServiceBaseUrl,communityDatasetStorageLimit:n.DatasetStorageLimitForPublishToCommunity,copyToWorkspaceDatasetStorageLimit:n.DatasetStorageLimitForCopyToWorkspace,multiGeoRegion:n.MultiGeoRegion,multiGeoRegionsList:n.MultiGeoRegionsList,dataLabLogQueueLength:n.DataLabLogQueueLength,dataLabLogLevel:n.DataLabLogLevel,azureMLDomainSuffix:n.AzureMLDomainSuffix,dataAccessServiceAddress:n.DataAccessServiceAddress,customModuleSupportedLanguages:n.CustomModuleSupportedLanguages,maxNotebookUploadSizeInBytes:n.MaxNotebookUploadSizeInBytes,workspacesArmEnabledWhitelist:n.WorkspacesArmEnabledWhitelist,catalogListModulesFilter:n.CatalogListModulesFilter,competitionEnabledRegionWhitelist:n.CompetitionEnabledRegionWhitelist,adalLoginUri:n.AdalLoginUri,adalClientId:n.AdalClientId,armResourceId:n.ArmResourceId,armBaseAddress:n.ArmBaseAddress,azurePortalUrl:n.AzurePortalUrl,graphResourceId:n.GraphResourceId,workspaceAdministratorRoleId:n.WorkspaceAdministratorRoleId,workspaceUserRoleId:n.WorkspaceUserRoleId,canPublishOnBehalfOfCompany:n.CanPublishOnBehalfOfCompany,chatbotToken:n.ChatbotToken,chatbotPath:n.ChatbotPath}})}),define("generated/DataLabClient/Constants",["require","exports"],function(e,t){(function(e){e[e.Module=0]="Module",e[e.Dataset=1]="Dataset",e[e.TrainedModel=2]="TrainedModel",e[e.WebServicePort=3]="WebServicePort",e[e.Transform=4]="Transform",e[e.Annotation=5]="Annotation",e[e.None=6]="None"})(t.GraphNodeType||(t.GraphNodeType={}));var n=t.GraphNodeType;t.PasswordPlaceholder="xxxxxxxx";var r;(function(e){e.Python2="Python 2",e.Python3="Python 3",e.R="R"})(r=t.NotebookLanguage||(t.NotebookLanguage={}));var i;(function(e){e.Rerun="Rerun"})(i=t.DirtyType||(t.DirtyType={})),function(e){e[e.Blank=0]="Blank",e[e.Example=1]="Example",e[e.Dataset=2]="Dataset",e[e.ModuleRunResults=3]="ModuleRunResults"}(t.NotebookType||(t.NotebookType={}));var s=t.NotebookType,o;(function(e){e.BlankNotebookTemplate="BlankNotebook.ipynb",e.ExampleNotebookTemplate="ExampleNotebook.ipynb",e.DatasetNotebookTemplate="DatasetNotebook.ipynb",e.ModuleRunResultsNotebookTemplate="ModuleRunResultsNotebook.ipynb"})(o=t.NotebookCreationTemplate||(t.NotebookCreationTemplate={}));var u;(function(e){e.Experiment="experiment",e.Notebook="notebook",e.Module="module"})(u=t.GalleryEntityTypes||(t.GalleryEntityTypes={})),t.PythonNotebookSuffix=".ipynb";var a;(function(e){e.Dataset="Saved Datasets",e.TrainedModel="Trained Models",e.Transform="Transforms",e.Uncategorized="Miscellaneous",e.TrainModule="Machine Learning\\Train",e.ScoreModule="Machine Learning\\Score",e.WebService="Web Service",e.Deprecated="Deprecated",e.Transformation="Data Transformation\\Manipulation"})(a=t.ResourceCategory||(t.ResourceCategory={}));var f;(function(e){e.Dataset="Dataset",e.Module="Module",e.TrainedModel="Trained Model",e.Transform="Transform"})(f=t.CategoryType||(t.CategoryType={})),function(e){e[e.Error=0]="Error"}(t.DisplayEndpointType||(t.DisplayEndpointType={}));var l=t.DisplayEndpointType,c;(function(e){e.ReceiveEmails="StudioUxReceiveEmails",e.ShowTourAtStart="StudioUxShowTourAtStart",e.MiniMapCollapsed="StudioUXMiniMapCollapsed",e.WelcomeDialogViewed="WelcomeDialogViewed",e.UserPreferenceKeys=[e.ReceiveEmails,e.ShowTourAtStart,e.MiniMapCollapsed,e.WelcomeDialogViewed],e.CacheRefreshInterval=6e5})(c=t.UserPreference||(t.UserPreference={})),t.MaximumCharsForErrorToolTip=100,t.DatasetName="dataset",t.CustomModulePackageName="zipFile",t.TrainedModelName="Trained model",t.TransformModuleName="Transformation module",t.NotebookName="notebook",t.RunnerType="Runner",t.UxUserType="UxUser";var h;(function(e){e.ScoreGenericModuleFamilyId="401b4f92e7244d5abe81d5b0ff9bdb33",e.ScoreMatchBoxModuleFamilyId="555445229a1044bd884f9a91a9cec2cd",e.TransformFamilyId="602aed7baab34e2abaf78cee080b06ff",e.SplitModuleFamilyId="70530644c97a4ab685f788bf30a8be5f",e.ProjectColumnFamilyId="1ec722fab6234e26a44ea50c6d726223",e.ApplyTransformationFamilyId="805e592d0f1f48eb97c9688ed0c1dc70",e.AssignToClusterFamilyId="eed3ee76e8aa46e6907c9ca767f5c114",e.AssignDataToClusterFamilyId="20a0683a07f94a08a89b44b3bbaae382"})(h=t.WellKnownResource||(t.WellKnownResource={}));var p;(function(e){e.ITransformDotNet="ITransformDotNet"})(p=t.WellKnownDataTypeId||(t.WellKnownDataTypeId={}));var d;(function(e){e.OnPremisesSqlDatabase="OnPremisesSqlDatabase"})(d=t.WellKnownModeParameterValue||(t.WellKnownModeParameterValue={})),t.WelcomeSkipOptionId="welcomeSkipOption";var v;(function(e){e.SessionIdHeaderEntry="x-ms-client-session-id",e.RequestIdHeaderEntry="x-ms-client-request-id",e.ScenarioIdHeaderEntry="x-ms-client-scenario-id",e.WorkspaceIdHeaderEntry="x-ms-client-workspace-id",e.UserIdHeaderEntry="x-ms-client-user-id",e.SessionIdCookieName="Studio-Ux-User-Session-Id",e.SubscriptionIdHeaderEntry="x-ms-client-subscription-id",e.UserTypeHeader="x-ms-client-user-type"})(v=t.LoggingHeaders||(t.LoggingHeaders={})),t.DataLabAccessTokenHeaderName="DataLabAccessToken",t.EmptyGuid="00000000-0000-0000-0000-000000000000",function(e){e[e.None=0]="None",e[e.initialHomePageLoad=1]="initialHomePageLoad",e[e.initialStudioPageLoad=2]="initialStudioPageLoad",e[e.prefetchAssets=3]="prefetchAssets",e[e.listExperiments=4]="listExperiments",e[e.openExperiment=5]="openExperiment",e[e.submitExperiment=6]="submitExperiment",e[e.runExperiment=7]="runExperiment",e[e.openPlusNewMenu=8]="openPlusNewMenu",e[e.openCommunityExperiment=9]="openCommunityExperiment",e[e.submitCompetitionEntry=10]="submitCompetitionEntry",e[e.createScoringExperiment=11]="createScoringExperiment",e[e.updateScoringExperiment=12]="updateScoringExperiment",e[e.saveExperiment=13]="saveExperiment",e[e.uploadResource=14]="uploadResource",e[e.openItemFromGallery=15]="openItemFromGallery",e[e.createNotebook=16]="createNotebook",e[e.unpackNotebookFromGallery=17]="unpackNotebookFromGallery",e[e.openNotebookFromGallery=18]="openNotebookFromGallery",e[e.publishCustomModule=19]="publishCustomModule",e[e.publishExperiment=20]="publishExperiment"}(t.IfxScenarioId||(t.IfxScenarioId={}));var m=t.IfxScenarioId;(function(e){e[e.start=0]="start",e[e.stop=1]="stop"})(t.IfxScenarioOpCode||(t.IfxScenarioOpCode={}));var g=t.IfxScenarioOpCode;(function(e){e[e.None=0]="None",e[e.Upgrade_Yes=1]="Upgrade_Yes",e[e.Upgrade_No=2]="Upgrade_No",e[e.ShellUICommands=3]="ShellUICommands",e[e.Run=4]="Run",e[e.PublishWebService=5]="PublishWebService",e[e.PublishDataflow=6]="PublishDataflow",e[e.RepublishWebService=7]="RepublishWebService",e[e.Save=8]="Save",e[e.SaveAs=9]="SaveAs",e[e.Discard_PressedYes=10]="Discard_PressedYes",e[e.Discard_PressedNo=11]="Discard_PressedNo",e[e.Cancel=12]="Cancel",e[e.Refresh=13]="Refresh",e[e.RemoveCredentials=14]="RemoveCredentials",e[e.Settings=15]="Settings",e[e.Palette=16]="Palette",e[e.Search=17]="Search",e[e.Download=18]="Download",e[e.Visualize=19]="Visualize",e[e.SendFeedback=20]="SendFeedback",e[e.Feedback=21]="Feedback",e[e.OpenHelp=22]="OpenHelp",e[e.VisualizationParameter=23]="VisualizationParameter",e[e.Visualization=24]="Visualization",e[e.HistogramMode=25]="HistogramMode",e[e.BoxchartMode=26]="BoxchartMode",e[e.ColumnPicker=27]="ColumnPicker",e[e.AddRule=28]="AddRule",e[e.RemoveRule=29]="RemoveRule",e[e.CloseColumnPicker=30]="CloseColumnPicker",e[e.EnableAllowDuplicates=31]="EnableAllowDuplicates",e[e.DisableAllowDuplicates=32]="DisableAllowDuplicates",e[e.PreviewExperiment=33]="PreviewExperiment",e[e.PreviewWebServiceGroup=34]="PreviewWebServiceGroup",e[e.ThumbnailSize=35]="ThumbnailSize",e[e.AddModuleByDragging=36]="AddModuleByDragging",e[e.AddModuleByDoubleClick=37]="AddModuleByDoubleClick",e[e.ExperimentEditor=38]="ExperimentEditor",e[e.Help=39]="Help",e[e.HelpSearched=40]="HelpSearched",e[e.HelpSearchResultClicked=41]="HelpSearchResultClicked",e[e.HelpSemanticSynonymClicked=42]="HelpSemanticSynonymClicked",e[e.WebServiceParameter=43]="WebServiceParameter",e[e.CreateNewParameter=44]="CreateNewParameter",e[e.LinkExistingParameter=45]="LinkExistingParameter",e[e.UnlinkParameter=46]="UnlinkParameter",e[e.RenameParameter=47]="RenameParameter",e[e.ProvideDefaultValue=48]="ProvideDefaultValue",e[e.RemoveDefaultValue=49]="RemoveDefaultValue",e[e.RemoveParameter=50]="RemoveParameter",e[e.ExperimentParameterInUse=51]="ExperimentParameterInUse",e[e.WebServicePort=52]="WebServicePort",e[e.DragNewPort=53]="DragNewPort",e[e.PublishToCommunity=54]="PublishToCommunity",e[e.UploadDataset=55]="UploadDataset",e[e.TrialFeature=56]="TrialFeature",e[e.DisabledWebServicePublish=57]="DisabledWebServicePublish",e[e.DisabledModule=58]="DisabledModule",e[e.DisabledDatasetUpload=59]="DisabledDatasetUpload",e[e.ExceededModuleCountLimit=60]="ExceededModuleCountLimit",e[e.TrialDialogSignIn=61]="TrialDialogSignIn",e[e.TrialDialogClose=62]="TrialDialogClose",e[e.ExceededModuleRuntimeLimit=63]="ExceededModuleRuntimeLimit",e[e.ExceededStorageLimit=64]="ExceededStorageLimit",e[e.ParallelRunDisabled=65]="ParallelRunDisabled",e[e.DisabledFeature=66]="DisabledFeature",e[e.TrialDialogSignUp=67]="TrialDialogSignUp",e[e.PrepareWebService=68]="PrepareWebService",e[e.SwitchExperimentDataFlow=69]="SwitchExperimentDataFlow",e[e.SwitchWebServiceDataFlow=70]="SwitchWebServiceDataFlow",e[e.PrepareWebServiceFailed=71]="PrepareWebServiceFailed",e[e.ScoringExperiment=72]="ScoringExperiment",e[e.CreateScoringExperiment=73]="CreateScoringExperiment",e[e.CreateScoringExperimentFailed=74]="CreateScoringExperimentFailed",e[e.UpdateScoringExperiment=75]="UpdateScoringExperiment",e[e.UpdateScoringExperimentFailed=76]="UpdateScoringExperimentFailed",e[e.SwitchExperiment=77]="SwitchExperiment",e[e.DeleteScoringExperiment=78]="DeleteScoringExperiment",e[e.BubbleTutorial=79]="BubbleTutorial",e[e.UserDismiss=80]="UserDismiss",e[e.CopyExperimentAcrossWorkspace=81]="CopyExperimentAcrossWorkspace",e[e.PlusNewExperiment=82]="PlusNewExperiment",e[e.GuidedTour=83]="GuidedTour",e[e.GuidedExperiment=84]="GuidedExperiment",e[e.GuidedExperimentStep1=85]="GuidedExperimentStep1",e[e.GuidedExperimentStep2=86]="GuidedExperimentStep2",e[e.GuidedExperimentStep3=87]="GuidedExperimentStep3",e[e.GuidedExperimentStep4=88]="GuidedExperimentStep4",e[e.GuidedExperimentStep5=89]="GuidedExperimentStep5",e[e.GuidedExperimentStep6=90]="GuidedExperimentStep6",e[e.GuidedExperimentStep7=91]="GuidedExperimentStep7",e[e.GuidedExperimentOpenFromDrawer=92]="GuidedExperimentOpenFromDrawer",e[e.GuidedExperimentOpenFromGuidedTour=93]="GuidedExperimentOpenFromGuidedTour",e[e.GuidedTourStep1=94]="GuidedTourStep1",e[e.GuidedTourStep2=95]="GuidedTourStep2",e[e.GuidedTourStep3=96]="GuidedTourStep3",e[e.GuidedTourStep4=97]="GuidedTourStep4",e[e.GuidedTourStep5=98]="GuidedTourStep5",e[e.GuidedTourStep6=99]="GuidedTourStep6",e[e.GuidedTourStep7=100]="GuidedTourStep7",e[e.GuidedTourOpenFromNavigationBar=101]="GuidedTourOpenFromNavigationBar",e[e.GuidedTourOpenFromIntroVideo=102]="GuidedTourOpenFromIntroVideo",e[e.DisabledModuleUpload=103]="DisabledModuleUpload",e[e.DisabledPublishToCommunity=104]="DisabledPublishToCommunity",e[e.CopyExperimentFromGallery=105]="CopyExperimentFromGallery",e[e.GuidedTourStep8=106]="GuidedTourStep8",e[e.CommandBarShowLineage=107]="CommandBarShowLineage",e[e.CommandBarSave=108]="CommandBarSave",e[e.CommandBarSaveAs=109]="CommandBarSaveAs",e[e.CommandBarDiscard=110]="CommandBarDiscard",e[e.CommandBarPublish=111]="CommandBarPublish",e[e.CommandBarSubmit=112]="CommandBarSubmit",e[e.CommandBarCancel=113]="CommandBarCancel",e[e.CommandBarPublishWebService=114]="CommandBarPublishWebService",e[e.CommandBarPublishToCommunity=115]="CommandBarPublishToCommunity",e[e.CommandBarCreateScoringGraph=116]="CommandBarCreateScoringGraph",e[e.CommandBarRefresh=117]="CommandBarRefresh",e[e.CommandBarPrepareWebService=118]="CommandBarPrepareWebService",e[e.PlusNewNotebookMenu=119]="PlusNewNotebookMenu",e[e.PlusNewBlankNotebookOpen=120]="PlusNewBlankNotebookOpen",e[e.PlusNewExampleNotebookOpen=121]="PlusNewExampleNotebookOpen",e[e.CommandBarCopyExperimentAcrossWorkspace=122]="CommandBarCopyExperimentAcrossWorkspace",e[e.NotebookList=123]="NotebookList",e[e.NotebookListRenameNotebook=124]="NotebookListRenameNotebook",e[e.NotebookListDeleteNotebook=125]="NotebookListDeleteNotebook",e[e.NotebookCreation=126]="NotebookCreation",e[e.NotebookFromContextMenu=127]="NotebookFromContextMenu",e[e.NotebookStartOpening=128]="NotebookStartOpening",e[e.NotebookCompleteOpening=129]="NotebookCompleteOpening",e[e.NotebookFailOpening=130]="NotebookFailOpening",e[e.NotebookStartCreate=131]="NotebookStartCreate",e[e.NotebookCompleteCreate=132]="NotebookCompleteCreate",e[e.NotebookFailCreate=133]="NotebookFailCreate",e[e.MultiGeo=134]="MultiGeo",e[e.MultiGeoListWorkspaces=135]="MultiGeoListWorkspaces",e[e.TabNavigation=136]="TabNavigation",e[e.ExperimentsTab=137]="ExperimentsTab",e[e.WebServicesTab=138]="WebServicesTab",e[e.NotebooksTab=139]="NotebooksTab",e[e.ModulesTab=140]="ModulesTab",e[e.DatasetsTab=141]="DatasetsTab",e[e.TrainedModelsTab=142]="TrainedModelsTab",e[e.SettingsTab=143]="SettingsTab",e[e.HomeTab=144]="HomeTab",e[e.DataflowsTab=145]="DataflowsTab",e[e.CompetitionUnpack=146]="CompetitionUnpack",e[e.CompetitionSubmitEntry=147]="CompetitionSubmitEntry",e[e.Monaco=148]="Monaco",e[e.MonacoPopout=149]="MonacoPopout",e[e.MonacoExpand=150]="MonacoExpand",e[e.UsePreviousResults=151]="UsePreviousResults",e[e.DownloadCustomModuleExampleR=152]="DownloadCustomModuleExampleR",e[e.DownloadCustomModuleExamplePy=153]="DownloadCustomModuleExamplePy",e[e.AnimatedExperiment=154]="AnimatedExperiment",e[e.AnimatedExperimentExperimentOnBubble=155]="AnimatedExperimentExperimentOnBubble",e[e.AnimatedExperimentExperimentBubbleBackPressed=156]="AnimatedExperimentExperimentBubbleBackPressed",e[e.AnimatedExperimentExperimentOpenFromDrawer=157]="AnimatedExperimentExperimentOpenFromDrawer",e[e.AnimatedExperimentOpenFromNavigationBar=158]="AnimatedExperimentOpenFromNavigationBar",e[e.AnimatedExperimentOpenFromIntro=159]="AnimatedExperimentOpenFromIntro",e[e.AnimatedExperimentDontShowAgain=160]="AnimatedExperimentDontShowAgain",e[e.AnimatedExperimentNotNow=161]="AnimatedExperimentNotNow",e[e.MiniMap=162]="MiniMap",e[e.MiniMapDragged=163]="MiniMapDragged",e[e.MiniMapCollapsed=164]="MiniMapCollapsed",e[e.MiniMapExpanded=165]="MiniMapExpanded",e[e.MiniMapResized=166]="MiniMapResized",e[e.GalleryNotebook=167]="GalleryNotebook",e[e.GalleryNotebookPublishSubmit=168]="GalleryNotebookPublishSubmit",e[e.NotebookListPublishNotebook=169]="NotebookListPublishNotebook",e[e.PlusNewGalleryNotebookOpen=170]="PlusNewGalleryNotebookOpen",e[e.ProjectGroup=171]="ProjectGroup",e[e.ProjectsTab=172]="ProjectsTab",e[e.ProjectConfiguration=173]="ProjectConfiguration",e[e.ProjectsAddAssetOpen=174]="ProjectsAddAssetOpen",e[e.ProjectsAddAssetSuccess=175]="ProjectsAddAssetSuccess",e[e.ProjectsAddAssetFail=176]="ProjectsAddAssetFail",e[e.ProjectsAddAssetAndCreateNewSuccess=177]="ProjectsAddAssetAndCreateNewSuccess",e[e.ProjectsAddAssetAndCreateNewFail=178]="ProjectsAddAssetAndCreateNewFail",e[e.ProjectsError=179]="ProjectsError",e[e.ProjectsFailedToAddAsset=180]="ProjectsFailedToAddAsset",e[e.ProjectFailedToCreateNew=181]="ProjectFailedToCreateNew",e[e.ProjectAddDialogError=182]="ProjectAddDialogError",e[e.AnimatedExperimentExperimentBubbleNextPressed=183]="AnimatedExperimentExperimentBubbleNextPressed",e[e.AnimatedExperimentExperimentBubbleClosed=184]="AnimatedExperimentExperimentBubbleClosed",e[e.ProjectConfigurationDialogLaunched=185]="ProjectConfigurationDialogLaunched",e[e.ProjectConfigurationAssetTypeFilter=186]="ProjectConfigurationAssetTypeFilter",e[e.ProjectConfigurationAddAsset=187]="ProjectConfigurationAddAsset",e[e.ProjectConfigurationDeleteAsset=188]="ProjectConfigurationDeleteAsset",e[e.ProjectMenuNewEmptyProject=189]="ProjectMenuNewEmptyProject",e[e.ProjectDeleteConfirm=190]="ProjectDeleteConfirm",e[e.ProjectDeleteCancel=191]="ProjectDeleteCancel",e[e.AnimatedExperimentWebService=192]="AnimatedExperimentWebService",e[e.ColumnPickerByName=193]="ColumnPickerByName",e[e.Annotations=194]="Annotations",e[e.CanvasAnnotationAdd=195]="CanvasAnnotationAdd",e[e.CanvasAnnotationCollapse=196]="CanvasAnnotationCollapse",e[e.CanvasAnnotationExpand=197]="CanvasAnnotationExpand",e[e.CommandBarRunSelected=198]="CommandBarRunSelected",e[e.RenameTrainedModel=199]="RenameTrainedModel",e[e.RenameModule=200]="RenameModule",e[e.RenameDataset=201]="RenameDataset",e[e.UploadNotebook=202]="UploadNotebook",e[e.UserSettingsOpen=203]="UserSettingsOpen",e[e.UserSettingsAccept=204]="UserSettingsAccept",e[e.UserSettingsCancel=205]="UserSettingsCancel",e[e.ContextMenuRunSelected=206]="ContextMenuRunSelected",e[e.DisabledOnPremSql=207]="DisabledOnPremSql",e[e.WelcomeBannerAccept=208]="WelcomeBannerAccept",e[e.CopyExperimentFromGalleryDialogOpened=209]="CopyExperimentFromGalleryDialogOpened",e[e.CopyExperimentDialogOpened=210]="CopyExperimentDialogOpened",e[e.PaginationFetchRequest=211]="PaginationFetchRequest",e[e.PaginationFetchTotals=212]="PaginationFetchTotals",e[e.RuntimeScriptVersion=213]="RuntimeScriptVersion",e[e.RuntimeScriptVersionChanged=214]="RuntimeScriptVersionChanged",e[e.RuntimeScriptVersionChangeConfirmed=215]="RuntimeScriptVersionChangeConfirmed",e[e.RuntimeScriptVersionChangeCancelled=216]="RuntimeScriptVersionChangeCancelled",e[e.RuntimeScriptVersionLockedDueToCustomModule=217]="RuntimeScriptVersionLockedDueToCustomModule",e[e.RuntimeScriptVersionUnsynced=218]="RuntimeScriptVersionUnsynced",e[e.PublishToArm=219]="PublishToArm",e[e.PublishToGalleryUploadBegin=220]="PublishToGalleryUploadBegin",e[e.PublishToGalleryUploadComplete=221]="PublishToGalleryUploadComplete",e[e.PublishedTwitterLink=222]="PublishedTwitterLink",e[e.PublishedGalleryLink=223]="PublishedGalleryLink",e[e.PublishedEmailLink=224]="PublishedEmailLink",e[e.PlusNewMenu=225]="PlusNewMenu",e[e.OpenBlankExperiment=226]="OpenBlankExperiment",e[e.OpenGalleryFromNew=227]="OpenGalleryFromNew",e[e.AddNodeByDragging=228]="AddNodeByDragging",e[e.AddNodeByDoubleClick=229]="AddNodeByDoubleClick",e[e.V2ExperimentList=230]="V2ExperimentList",e[e.PlusNewGalleryCustomModuleOpen=231]="PlusNewGalleryCustomModuleOpen",e[e.PublishCustomModuleDialogOpened=232]="PublishCustomModuleDialogOpened",e[e.CreatedBlankExperiment=233]="CreatedBlankExperiment",e[e.DataIngestion=234]="DataIngestion",e[e.DataIngestionLaunched=235]="DataIngestionLaunched",e[e.DataIngestionCancelled=236]="DataIngestionCancelled",e[e.DataIngestionFinished=237]="DataIngestionFinished",e[e.DataIngestionTestConnection=238]="DataIngestionTestConnection",e[e.DataIngestionTestConnectionResult=239]="DataIngestionTestConnectionResult",e[e.ExceededConcurrentRunLimit=240]="ExceededConcurrentRunLimit",e[e.DataIngestionPageChange=241]="DataIngestionPageChange",e[e.DataIngestionLaunchedWhileConfigured=242]="DataIngestionLaunchedWhileConfigured"})(t.FeatureId||(t.FeatureId={}));var y=t.FeatureId;t.WorkspaceNameRegex=/^[0-9a-zA-Z][0-9a-zA-Z-]*[a-zA-Z0-9]$/,t.ExperimentSubmissionFailedRegExp=/([\s\S]*)(Request ID:.*$)/,t.ExperimentIdRegExp=new RegExp("^([a-f|0-9]{32})[.]([f|s]-id)[.]([a-f|0-9]{32})[.]?(.*)$","i"),t.NotebookParentModulePortFormatString="experimentModulePort:{0}:{1}:{2}",t.NotebookParentDatasetFormatString="dataset:{0}",t.GalleryUriTagRegExp=new RegExp("^galleryUri:(.*)$","i"),t.GalleryUriTagFormatString="galleryUri:{0}";var b;(function(e){e.GetErrorIdRegExp=/^Error (\d{4}): (.*)/,e.SkipErrorHeadingRegExp=/(^\s*Error:\s*)/,e.SkipWhitespaceAndModuleOutputStrRegExp=/(^\s+|\[ModuleOutput\]|\s+$)/g,e.StartMessageEndRegExp=/Record Starts at (.*):([\s\S]*)Record Ends at (.*)\./,e.ModuleOutputFirstLineRegExp=/\[ModuleOutput\](.*)/})(b=t.ModuleError||(t.ModuleError={})),t.GuidedExperimentDescription="Experiment Tutorial",t.NetworkErrorFlag="Service call failed due to a network error. ",t.PollInterval=500,t.MaxPollCount=1200,t.CountryList=["Afghanistan","Åland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bonaire","Bosnia and Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo","Congo (DRC)","Cook Islands","Costa Rica","Croatia","Cuba","Curaçao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji Islands","Finland","France","French Guiana","French Polynesia","French Southern and Antarctic Lands","Gabon","Gambia, The","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Heard Island and McDonald Islands","Holy See (Vatican City)","Honduras","Hong Kong SAR","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Jan Mayen","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Korea","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao SAR","Macedonia, Former Yugoslav Republic of","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","North Korea","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Authority","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn Islands","Poland","Portugal","Puerto Rico","Qatar","Republic of Côte d'Ivoire","Reunion","Romania","Russia","Rwanda","Saba","Saint Helena, Ascension and Tristan da Cunha","Samoa","San Marino","São Tomé and Príncipe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Eustatius","Sint Maarten","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia and the South Sandwich Islands","Spain","Sri Lanka","St. Barthélemy","St. Kitts and Nevis","St. Lucia","St. Martin","St. Pierre and Miquelon","St. Vincent and the Grenadines","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Virgin Islands, British","Virgin Islands, U.S.","Wallis and Futuna","Yemen","Zambia","Zimbabwe"],t.maxScriptSize=27e3,t.SystemError="System Error",t.UserError="User Error"}),define("generated/DataLabClient/LocalizedResources",[],function(){return{appServicesCategoryDescription:"Create highly-available, scalable applications and services using a rich Platform as a Service (PaaS) environment. Supports multi-tier scenarios, automated deployments, and elastic scale.",dataCategoryDescription:"Easily deploy and run Windows Server and Linux virtual machines. Migrate applications and infrastructure without changing existing code.",drawerMainMenuAppServices:"Application Services",drawerMainMenuCompute:"Compute",drawerMainMenuData:"Data",drawerMainMenuNetwork:"Network",networkCategoryDescription:"Take advantage of a fully compatible, enterprise-ready Hadoop service. This PaaS offering provides easy management and integrates with Active Directory Domain Services and Microsoft System Center.",websitesCategoryDescription:"Get started for free and scale-up as your traffic grows. Build with ASP.NET, PHP, or Node.js, and deploy in seconds with FTP, Git or TFS.",avatarBar_languagePickerLabel:"Language",avatarBar_feedbackLabel:"Feedback",avatarBar_legalLabel:"Legal",avatarBar_privacyLabel:"Windows Azure Privacy Statement",avatarBar_signOutLabel:"Sign Out",avatarBar_menuLabel:"Menu",invitationEmailTemplate:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN\\" \\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head><title>Microsoft ML Studio Invitation</title></head><body><p>Hello from Microsoft Machine Learning Studio (classic).</p><p>{0} has invited you to the workspace called “{1}” on ML Studio. The role you will have on this workspace is {3}. ML Studio allows multiple users to collaborate with each other on data experiments.</p><p>To accept the invitation, click on the link below and sign in using the email to which this invitation was sent. This email must be a Microsoft Account email to use this invitation.</p><p><center><h2><a href="{2}">Accept the Invitation</a></h2></center></p><p>If you have problems accepting this invitation, please contact the owner of the workspace who sent you this invitation so they can work with Microsoft to resolve any issues.</p><p>If you do not want to accept this invitation, please ignore this email.</p><p>Thank you for using Microsoft ML Studio.<br/>The ML Studio team.</p><p>________________________________________<br/>Do not reply to this message as this email address is not monitored.<br/>Your privacy is important to us and you can read our latest <a href="http://www.windowsazure.com/en-us/support/legal/privacy-statement/">Windows Azure Privacy Statement online</a>.</p><p>Microsoft Corporation<br/>One Microsoft Way<br/>Redmond, WA 98052</p></body></html>',invitationEmailSubjectTemplate:'Invitation from Microsoft Machine Learning Studio (classic) to workspace "{0}"',datasetCategoryDescription:"Find and upload datasets to use in {0} experiments",moduleCategoryDescription:"Create a custom module to use in {0} experiments",newExperimentMenuDescription:"Create a new experiment",onlineSearchMenuDescription:"Search for public datasets",uploadDatasetMenuDescription:"Upload a dataset from a local file",Error_BrowserUnsupported_Message:"Your browser is not supported",Error_BrowserUnsupported_Summary:"This web site requires some features that are only present in newer browsers such as Internet Explorer 10 or later.",uploadDatasetDialogDataToUpload:"Select the data to upload:",uploadDatasetDialogDescription:"Provide an optional description:",uploadDatasetDialogEnterName:"Enter a name for the new dataset:",uploadDatasetDialogExistingDataset:"Existing dataset:",uploadDatasetDialogNewVersionOfDataset:"This is the new version of an existing dataset",uploadTrainedModelDialogNewVersionOfTrainedModel:"This is the new version of an existing trained model",uploadTrainedModelDialogEnterName:"Enter a name for the new trained model:",uploadTrainedModelDialogExistingTrainedModel:"Existing trained model:",uploadTrainedModelDialogDescription:"Provide an optional description:",uploadTransformDialogNewVersionOfTransform:"This is the new version of an existing transform",uploadTransformDialogEnterName:"Enter a name for the new transform:",uploadTransformDialogExistingTransform:"Existing transform:",uploadTransformDialogDescription:"Provide an optional description:",uploadDatasetDialogSelectType:"Select a type for the new dataset:",enterAddresses:"Enter a work or school account, or a  Microsoft Account (e.g. someone@example.com):",inviteUsers:"Invite Users to Workspace",removeUser:"Remove user {0}?",removeUsers:"Remove {0} users?",publishWebServiceDialogHelpText:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute.",publishWebServiceErrorWithTooManyColumns:"Reduce the total number of input and output columns to less than 1000 and try publishing again.",publishWebServiceDialogTitle:"Publish Web service",webServiceGroupDisplayName:"Web service",webServiceGroupsTabTitle:"Web services",webServiceGroupViewCommandTitle:"Dashboard",publishWebServiceCommandTitle:"Deploy Web Service",webServiceGroupCreationTimeLabel:"Created on",webServiceGroupNameLabel:"Name",trainingWebServiceLabel:"Training web service",scoringWebServiceLabel:"Predictive web service",webServiceUrlTitle:"URL",webServiceFileTypeTitle:"File Web service",webServiceProductionEnvironmentTitle:"Production environment",webServiceRRTypeTitle:"Request Response Web service",webServiceStagingEnvironmentTitle:"Default Endpoint",webServiceTypeTitle:"Type",confirmPublishWithoutPorts:"The web service input or output or both have not been selected. Please make sure you have selected the appropriate input and output for the web service. Select 'YES, PUBLISH' to go ahead an publish your web service as is. Select 'NO, CANCEL' to go back and select the input and/or output.",cannotPublishDirtyExperiment:"The experiment must be run so that your edits can be validated.",cannotPublishInvalidPublishPorts:"The ports selected for input and output are not valid.",scoreDialogEnterDataToPredict:"Enter data to predict",scoreDialogNoDataNeeded:"This web service does not require any input",scoreDialogEnterWebServiceParameters:"Enter Web Service Parameters",scoreDialogTitle:"Test {0} Service",webServiceTestCommandTitle:"Test Service",webServiceTestFailureTitle:"Unable to finish '{0}' test. {1}",webServiceTestProgressTitle:"Testing '{0}'",webServiceTestResultStepTitle:"Result: {0}",webServiceTestSuccessTitle:"'{0}' test finished successfully",webServiceTestSuccessAndResultSummary:"'{0}' test returned {1}...",webServiceGroupDefaultDescription:"No description provided for this web service.",webServiceGroupConfigurationTabTitle:"Configuration",webServiceGroupTestsTabTitle:"Tests",allowDuplicatesInSelectionLabel:"Allow duplicates and preserve column order in selection",errorParsingVisualizationFile:"Error producing the visualization of the output.",launchSelectionToolToMakeSelection:"Launch the selector tool to make a selection",selectToolRulesDisplayLabel:"Selected columns:",publishWebServiceOverwritingConfirmationDetails:"This operation cannot be reversed.",publishWebServiceOverwritingConfirmationTitle:"OVERWRITING SERVICE '{0}', ARE YOU SURE?",webServiceGroupDashboardDescriptionLabel:"Description",webServiceGroupDashboardGeneralLabel:"General",webServiceGroupDashboardParentExperimentLable:"Published experiment",webServiceGroupDashboardParentExperimentViewSnapshot:"View snapshot",webServiceGroupDashboardParentExperimentViewLatest:"View latest",webServiceGroupDashboardWsLastUpdatedHeader:"LAST UPDATED",webServiceGroupDashboardWsRRSType:"REQUEST/RESPONSE",webServiceGroupDashboardWsUpdateTrainedModelType:"UPDATE RESOURCES",webServiceGroupDashboardWsTestButtonText:"Test",webServiceGroupDashboardWsTestHeader:"TEST",webServiceGroupDashboardWsTestMultiInputWarning:"Test dialog is not supported for multiple input web services",webServiceGroupDashboardWsTypeHeader:"TYPE",webServiceGroupDashboardWsUrlHeader:"URL",webServiceGroupDashboardTryBelize:"New Web Services Experience",modelPackageConfigColumnSchemaTemplate:"{0} ({1})",modelPackageConfigDescription:"Description",modelPackageConfigDiscard:"Discard",modelPackageConfigDisplayName:"Display Name",modelPackageConfigErrorName:"There was problem with saving your webservice's display name/description. Please try again later.",modelPackageConfigErrorSchema:"There was problem with saving your webservice's schema. Please try again later.",modelPackageConfigErrorDiagnosticsMode:"There was problem with saving your webservice's logging mode. Please try again later.",modelPackageConfigFriendlyName:"Description",modelPackageConfigGeneral:"General",modelPackageConfigInputSchema:"Input Schema",modelPackageConfigOutputSchema:"Output Schema",modelPackageConfigReadyForProd:"Ready for production?",modelPackageConfigReadyForProdNo:"No",modelPackageConfigReadyForProdYes:"Yes",modelPackageConfigSave:"Save",modelPackageConfigSettings:"settings",publishWebServiceErrorConfirmationTitle:"An error occurred when publishing the web service.",feedbackPlaceholder:"Enter feedback here",feedbackHoverText:"Give feedback",sendFeedback:"Send feedback",feedbackIsThereSomethingWeCanDoBetter:"Is there something we can do better?",feedbackWhatDidYouLike:"What did you like?",feedbackSendAFrown:"Send a frown",feedbackSendASmile:"Send a smile",feedbackMinimizePopup:"Minimize",feedbackSubmitFeedback:"Submit feedback",errorDialogFeedbackWantToGiveFeedback:"Want to give us some feedback?",errorDialogPleaseTryRefreshing:"Please try refreshing the page.",errorDialogActivityID:"Activity Id: ",errorDialogTitle:" has encountered a problem",errorDialogFeedbackTextBoxPlaceholder:"You can add optional feedback details here",recentWorkLastEditedLabel:"Last Edited",recentWorkLastPublishedLabel:"Last Published",recentWorkLastRunLabel:"Last Run",recentWorkNoRows:"No experiments found",experimentGridHeaderCreator:"Author",experimentGridHeaderName:"Name",experimentGridHeaderStartTime:"Start Time",experimentGridHeaderStatus:"Status",recentWorkLastPublishedHeaderCreationTime:"Created On",recentWorkLastPublishedHeaderName:"Name",recentWorkThumbnailLabel:"Preview",welcomeTextSegment1Body:"Take a quick tour of the {0} features.",welcomeTextSegment1Title:"Getting Started",welcomeTextSegment2Body:"Get, upload, and save data to your workspace.",welcomeTextSegment2Title:"Getting and Saving Data",welcomeTextSegment3Body:"Clean, transform, and normalize your data.",welcomeTextSegment3Title:"Preprocessing Data",welcomeTextSegment4Body:"Learn the steps required for building, scoring and evaluating a predictive model.",welcomeTextSegment4Title:"Predictive Modeling",welcomeTextSegmentMore:"(read more...)",welcomeSkipMessage:"Do not show this page again at start up",resourceAuthor:"Author",resourceCreatedOn:"Created on",resourceFormat:"Format",trainingExperimentLink:"Training experiment",listExperimentsPivotDisplayName:"All",experimentGridHeaderSaveTime:"Modification Time",recentWorkPivotDisplayName:"Recent Work",modelCannotSaveExp:"Cannot save a submitted experiment.",welcomePivotDisplayName:"Welcome",rocAccuracy:"Accuracy",rocCumulativeAuc:"AUC",rocF1Score:"F1 Score",rocFalseNegative:"False Negative",rocFalsePositive:"False Positive",rocPrecision:"Precision",rocRecall:"Recall",rocThreshold:"Threshold",rocTrueNegative:"True Negative",rocTruePositive:"True Positive",NotAuthorizedToInstrument:"<not authorized>",parseResourceIdAndValidate:"The given resource ID disagrees with its expected family ID.",modelCannotDiscardQueued:"Cannot discard a submitted experiment.",modelCannotQueueSave:"Cannot queue save, since a discard operation is underway.",modelCannotSaveDraftAlreadyUpdated:"Your changes cannot be saved because this experiment draft has been updated in another session. Please re-open to see the latest version.",cannotRefresh:"Cannot refresh, store has not been initialized",cannotRemoveAllOwners:"Cannot remove all Owners from a Workspace",cannotDownloadThisTypeOfData:"Cannot download this type of data.",welcomeCreatingAnExperiment:"Creating an experiment",welcomeFindingFeatures:"Finding the right features",welcomePublishModel:"Publishing the prediction service",welcomeScoringAndVisualizing:"Scoring and visualizing results",welcomeUsingSampleExperiments:"Using Sample Experiments",welcomeGettingStarted:"Quick Start",moduleErrorErrorMessageLabel:"Error message:",moduleErrorHelpLink:"Get general help for Error ",moduleErrorRecordEndLabel:"Record end time:",moduleErrorRecordStartLabel:"Record start time:",moduleErrorTitle:" Error",moduleErrorDialogButtonLabel:"View error log",moduleErrorNoErrorMessage:"No error message",recentWorkFilterBy:"Show experiments by ",recentWorkSizeBig:"Big",recentWorkSizeNormal:"Normal",recentWorkThumbnailSize:"Size",clickToPan:"Click to enable pan mode. Center click and drag, or, space and drag, to pan at any time.",createdOn:"Created on",description:"Description:",duplicateName:"An experiment parameter with the given name already exists",email:"Email",emptyExperiment:"Cannot save experiment draft with no modules.",emptyName:"Cannot save experiment draft with empty name.",endTime:"End time",format:"Format",graphNodeIDMismatch:"Updated GraphNode ID does not match previous ID.",incorrectEmailPleaseCorrect:"One or more of the addresses that you entered are incorrect; please fix the error(s) and try again.",modelCannotQueueDiscard:"Cannot queue discard, since a discard operation is underway.",modelCannotQueueSubmit:"Cannot queue submit, since a discard operation is underway.",modelExperimentCannotRun:"Your experiment cannot be run because it has been updated in another session. Please re-open this experiment to see the latest version.",modelExperimentName:"Experiment name must contain at least one non-whitespace character.",name:"Name",nonEmptyExtension:"The given file extension must be non-empty (after removing a leading dot, if present).",nullExperimentID:"Null experimentId",ownerActions:"An owner can add, remove and list users with access to the workspace, in addition to what a user can do.",pressEnterColumnName:"Press enter to enter column name",replaceExistingNode:"Replacing an existing node since it uses a resource which has been updated.",role:"Role",sessionExpired:"Your session has expired. Please refresh the page to continue, You may be prompted to enter your credentials, depending on your browser settings.",size:"Size",startTime:"Start time",status:"Status",statusCode:"Status code",statusDetails:"Status details",submittedBy:"Submitted by",unknownNode:"Unknown node type",unsavedChangesWarning:"You have unsaved changes in this experiment, which will be lost if you leave this page.",userActions:"A workspace user can list, clone and create experiments and datasets in the workspace.",userAndInvitationNull:"Both User and Invitation are null",viewDataset:"View dataset",viewErrorLog:"View error log",viewOutputLog:"View output log",authTokens:"Authorization Tokens",dataflows:"Dataflows",dataImportStatus:"Data Import Status",datasets:"Datasets",datasetUploadFailed:"Dataset upload failed.",disposableNotAssignedOwner:"One or more disposables weren't assigned an owner. Please view 'attachedContext property' on this error object. Each disposable may have a stack trace indicating where it was (browser willing...)",exceptionOccurred:"Exception occurred",expectedModuleView:"Expected a ModuleView to handle command",experiment:"Experiment",experiments:"Experiments",fromLocalFile:"From Local File",goToWebService:"Go to web service",loadClientBeforeExtension:"DataLab client must be loaded before the DataLab extension",modules:"Modules",nodeCannotConnectOutsideExperiment:"Can't connect graph node outside of an experiment.",nodeCannotDisconnectOutsideExperiment:"Can't disconnect graph node outside of an experiment.",nodeCannotReplaceAlreadyInExperiment:"Can't replace a graph node with a node that is already in an experiment.",nodeCannotReplaceOutsideExperiment:"Can't replace a graph node that is outside of an experiment.",onlineSearch:"Online Search",priorRun:"Prior Run",resources:"Resources",settings:"Settings",users:"Users",valueRequired:"Value required.",viewDataflow:"View Dataflow",viewExperiment:"View Experiment",viewExperimentLineage:"View Experiment Lineage",workspaceCannotBeEmpty:"Workspace name cannot be empty.",componentCount:"A resource ID should have three components separated by a period (workspace.family.instance). The given ID had {0} component(s).",duplicateDataset:"Dataset with id {0} already in experiment.",duplicatePortName:"Duplicate port name: {0}",duplicateTrainedModel:"TrainedModel with id {0} already in experiment.",duplicateTransform:"Transform with id {0} already in experiment.",duplicateType:"Duplicate DataType ID: {0}",floatGreaterThanMax:'The value {0} is greater than maximum of {1}."',floatLessThanMin:"The value {0} is less than minimum of {1}.",floatNotGreater:"The value {0} is not a valid number greater than {1}.",floatNotLess:"The value {0} is not a valid number less than {1}.",nameIsAbstract:"'name' is abstract",noSuchDataType:"No such DataType: {0}",unconnectedInputPort:"Input port {0} is unconnected.",unknownPortDescriptor:"Unknown port descriptor type.",unknownPortType:"Unknown port type",unknownResourceType:"Unknown resource type",valueDoesNotMatch:"The value {0} does not match one of the following: {1}.",confirmDeleteSelectedExperiment:"Are you sure you want to delete the selected experiment?",confirmDeleteSelectedNotebook:"Are you sure you want to delete the selected notebook?",copy:"Copy",copyToClipboardNotSupported:"Copy to Clipboard is not supported by this browser.",creator:"Creator",cut:"Cut",dataflow:"Dataflow",datatype:"Data Type",deleteItem:"Delete",download:"Download",editComment:"Edit Comment",enableClipboard:"Universal Connect was refused, cannot copy to clipboard. Go to about:config and set signed.applets.codebase_principal_support to true to enable clipboard support.",errorLog:"Error log",experimentSubmissionFailedWithRequestId:"Experiment submission failed. {0}. {1}",experimentSubmissionFailedNoRequestId:"Experiment submission failed. {0}",location:"Location",navigatingAway:"Navigating away will cancel any existing uploads.",outputLog:"Output log",paste:"Paste",publishFailed:"Publish as a Dataflow failed:  {0} error",refresh:"Refresh",runHistory:"Run History",saveAsDataset:"Save as Dataset",saveAsTrainedModel:"Save as Trained Model",saveAsTransform:"Save as Transform",setPublish:"Set as Publish Input",subscription:"Subscription",type:"Type",unsetPublish:"Unset as Publish Input",upgradeModulesOrDatasets:"This experiment contains modules or datasets which have newer versions available. Would you like to upgrade them?",autoUpgradeModulesAndDatasets:"This experiment contains modules and/or datasets which have newer versions. Please wait while your experiment is upgraded.",uploadingCompleted:"Upload of the dataset '{0}' has completed.",uploadingNewDataset:"Uploading a new dataset '{0}' ...",version:"Version",viewLog:"View Log",viewPriorRun:"View Prior Run",visualize:"Visualize",columnPickerAllColumns:"All columns",columnPickerColumnIndices:"Column indices",columnPickerColumnNames:"Column names",columnPickerHighlightMeansError:"Column names highlighted in red are either already selected or are not found in the data.",columnPickerColumnTypes:"Column types",columnPickerExcludeColumnIndices:"Exclude column indices",columnPickerExcludeColumnNames:"Exclude column names",columnPickerExcludeColumnTypes:"Exclude column types",columnPickerFirstRuleNoExlude:"First rule cannot exclude a selection. Create a selection to which to apply the exclusion first.",columnPickerIndicesMustBeGreaterThan:"Indices must be greater than 0",columnPickerInputMustBeAListOfPositiveIndicesOrRanges:"Input must be a list of positive indices or ranges",columnPickerInputMultipleNamesList:"Input a list of column names.",columnPickerInvalidNames:"Column names highlighted in red are either already selected or are not found in the data.",columnPickerInvalidRange:"Invalid range",columnPickerSelectionRules:"Only selection by name and index are allowed when selecting with duplicates and preserving order of selection.",connectorCannotConnectPorts:"Cannot connect {0} to {1}.",credential:"Credential",featureLogScale:"{0} log scale",featureType:"Feature Type",fileEmpty:"The selected file is empty",fileTooLarge:"The selected file is too large. The maximum allowed size is {0}",frequencyLogScale:"frequency log scale",owner:"Owner",remove:"Remove",selectUploadFile:"Select a file to upload",ssimDatasetUploading:"Dataset is being uploaded",ssimPendingDataset:"Pending dataset upload",ssimUnexpectedError:"Unexpected error has occured",ssimUpdatingCache:"{0}, updating dataset cache...",ssimUploadFailed:"Dataset upload failed. {0}, check dataset imports tab for details",ssimUploadSuccess:"Upload finished successfully",user:"Users",sharing:"Sharing",viewModelDataTooLarge:"The data you are trying to view is too large (more than 20MB) to view in the web browser. To download it, right-click the view link in the properties panel and select 'save link or target as...'",viewModelDraftSaved:"Draft saved at {0}",viewModelDraftSaveFailed:"Draft save failed, retrying...",viewModelRefreshRetry:"Refresh status failed... Retrying.",viewModelSaving:"Saving...",valueNotValidFloat:"The value is not a valid floating point number.",valueNotValidInteger:"The value is not a valid integer.",webServiceApiHelpLabel:"API help page",multipleColumnSelectHeading:"Select columns",singleColumnSelectHeading:"Select a single column",onlyOneRuleAllowedError:"Unexpected rule addition: only one rule allowed.",signoutErrorMessage:"An error occured while signing out",webServiceGroupDashboardWsBatchType:"BATCH EXECUTION",webServiceApiNotAvailable:"API not available",multiclassActualClass:"Actual Class",multiclassFrequency:"Frequency",multiclassPredictedClass:"Predicted Class",recentWorkListExperimentsFailure:"Failed to load experiment list",experimentEditorWatermarkText:"To create your experiment, drag and drop<br>datasets and modules here",experimentGridHeaderModificationTime:"Last edited",experimentGridHeaderEndTime:"End Time",homeExtensionDisplayName:"Studio Home",welcomeGoText:"Go!",welcomeTextSegment5Body:"Publish and stage your predictive model as an Azure-based service.",welcomeInfo1Link1CaptionReleaseNotes:"Release Notes",welcomeInfo1Link2CaptionUpdates:"New features and highlights",welcomeInfo1Link3CaptionRssUpdates:"Updates by RSS feed",welcomeInfo1Text:"Get the latest information on important changes",welcomeInfo1Title:"What's New",welcomeInfo2Link2CaptionGettingData:"Getting data",welcomeInfo2Link3CaptionSharingWorkspaces:"Sharing workspaces",welcomeInfo2MoreCaption:"See all",welcomeInfo2Text:"Use the ML Studio (classic) to build and publish your experiments",welcomeInfo2Title:"Documentation",welcomeInfo3Link1CaptionFeedback:"Provide feedback",welcomeInfo3Text:"Contribute to the community",welcomeInfo3Title:"Contribute",welcomeInfo4Link1CaptionExperiments:"Read about sample experiments",welcomeInfo4Link2CaptionDatasets:"Read about sample datasets",welcomeInfo4Text:"View dataset and experiment samples",welcomeInfo4Title:"Samples",welcomeInfo5Link1CaptionAlphabeticalList:"List of modules",welcomeInfo5MoreCaptionModuleCategoryList:"Browse all topics...",welcomeInfo5Text:"Complete reference of all modules you can insert into your experiment and predictive workflow",welcomeInfo5Title:"Module Reference",welcomeInfo6Link1CaptionForum:"Forum (ask a question)",welcomeInfo6MoreCaption:"View all...",welcomeInfo6Text:"Ask a question or check out video tutorials, blogs, and whitepapers from our experts",welcomeInfo6Title:"Additional Resources",elapsedTime:"Elapsed time",drawerTitle:"Properties",liftPlotName:"lift",liftPlotXAxis:"Positive Rate",liftPlotYAxis:"Number of True Positives",prPlotName:"precision/recall",prPlotXAxis:"Recall",prPlotYAxis:"Precision",rocPlotName:"roc",rocPlotXAxis:"False Positive Rate",rocPlotYAxis:"True Positive Rate",recentWorkPreview:"Preview",rOutputGraphicsDevice:"Graphics Device",rOutputStandardError:"Standard Error",rOutputStandardOutput:"Standard Output",binaryClassificationScoredDataset:"Scored dataset",binaryClassificationScoredDatasetDefault:"Dataset",binaryClassificationScoredDatasetToCompare:"Scored dataset to compare",learnerSettings:"Settings",feedbackCharactersLeft:"{0} character(s) left",copyForNewExperimentName:" - Copy",experimentNameError:"Experiment name must contain at least one non-whitespace character",experimentSaveAsDialogEnterHere:"Enter experiment name here...",experimentSaveAsDialogExperimentName:"Experiment name",experimentSaveAsDialogHeading:"Save As",experimentStateFailed:"Failed",experimentStateFailedHover:"The experiment run failed",experimentStateFinishedRunning:"Finished running",experimentStateInDraft:"In draft",experimentStateInDraftHoverErrors:"Your experiment has errors",experimentStateLocked:"Locked",experimentStateLockedHover:"Your experiment is locked. Click 'SAVE AS' at the bottom to create a new experiment draft.",experimentStateQueued:"Queued",experimentStateQueuedHover:"Your experiment has been submitted and is in the queue to be run.",experimentStateRunning:"Running",experimentStateRunningHover:"Your experiment is running",experimentStateFinishedRunningPartialRun:"Finished running selected items",experimentStateFailedPartialRun:"Run selected failed",cannotDeleteWebServiceGroupError:'Cannot delete web service "{0}" because one or more additional endpoints were created for it. These endpoints must be deleted before you can delete the web service.',confirmDeleteWebServiceGroup:'Are you sure to delete the web service "{0}"?',webServiceGroupPrimaryApiKeyLabel:"API key",datasetsModulesTrainedModelsLabel:"Datasets, Modules, Trained Models, and Transforms",sampleExperimentsPivotDisplayName:"Samples",confirmDeleteSelectedExperiments:"Are you sure you want to delete the {0} selected experiments?",confirmDeleteSelectedNotebooks:"Are you sure you want to delete the {0} selected notebooks?",createWebServiceGraphDescriptionLabel:"Description",createWebServiceGraphNameLabel:"Name",createWebServiceGraphTrainedModelCopyText:"This trained model will be copied over to your web service graph.",publishWebServiceWithTrainedModelWarning:"Click on the appropriate trained model nodes output port menu to begin web service creation.",createWebServiceGraphTransformCopyText:"This transform will be copied over to your web service graph.",publishWebServiceWithTransformWarning:"Click on the appropriate transform nodes output port menu to begin web service creation.",learnerFeatureWeights:"Feature Weights",palletteSearchBoxPlaceholder:"Search experiment items",experimentEditorContextMenuCopy:"Copy",experimentEditorContextMenuCut:"Cut",experimentEditorContextMenuDelete:"Delete",experimentEditorContextMenuDownload:"Download",experimentEditorContextMenuEditComment:"Edit Comment",experimentEditorContextMenuErrorLog:"Error Log",experimentEditorContextMenuHelp:"Help",experimentEditorContextMenuOutputLog:"Output Log",experimentEditorContextMenuPaste:"Paste",experimentEditorContextMenuAddComment:"Add Comment",experimentEditorContextMenuRefresh:"Refresh",experimentEditorContextMenuSaveAsDataset:"Save as Dataset",experimentEditorContextMenuSaveAsTrainedModel:"Save as Trained Model",experimentEditorContextMenuSaveAsTransform:"Save as Transform",experimentEditorContextMenuSetAsPublishInput:"Set as Publish Input",experimentEditorContextMenuSetAsPublishOutput:"Set as Publish Output",experimentEditorContextMenuUnsetAsPublishInput:"Unset as Publish Input",experimentEditorContextMenuUnsetAsPublishOutput:"Unset as Publish Output",experimentEditorContextMenuViewLog:"View Log",experimentEditorContextMenuViewPriorRun:"View Prior Run",experimentEditorContextMenuVisualize:"Visualize",quickHelpMore:"(more help...)",uploadingFailed:"Dataset upload failed. {0}",uploadDatasetFromLocalFile:"From Local File",learnerFeatureWeightsName:"Feature",learnerFeatureWeightsValue:"Weight",learnerSettingsName:"Setting",learnerSettingsValue:"Value",rulesStartingChoiceLabel:"Begin With",experimentEditorContextMenuCreateWebService:"Create Web Service",workspaceBarWorkspaces:"Workspaces",workspaceBarUsefulActions:"Useful actions:",workspaceBarRenameWorkspace:"Rename Workspace",workspaceBarManageWorkspaceUsers:"Manage Workspace Users",commandsViewRunHistory:"Run History",commandsSave:"Save",commandsSaveAs:"Save as",commandsDiscardChanges:"Discard changes",commandsPublishAsDataflow:"Publish as Dataflow",publishExperimentErrorTitle:"An error occurred when publishing the experiment.",commandsPublishExperimentToCommunity:"Publish to Gallery",commandsPublishExperimentToARM:"Deploy Web Service [New] Preview",commandsRun:"Run",commandsCancel:"Stop",commandsRefresh:"Refresh",PropertyEditorEditAndEllipsis:"Edit...",PropertyEditorNoParameter:"No parameters",PropertyPanelStartTime:"Start time",PropertyPanelEndTime:"End time",PropertyPanelStatusCode:"Status code",PropertyPanelStatusDetails:"Status details",PropertyPanelViewOutputLog:"View output log",WebServiceParameters:"Web Service Parameters",ExperimentProperties:"Experiment Properties",WebServiceOutputSchema:"output schema",ModelPackageViewStagingEnvironment:"Staging environment",HomeLoading:"Loading ",HomeEllipsis:"....",HomeLoadingAndEllipsis:"Loading...",PreviewDataIsNotAvailable:"Preview data is not available, sorry",AccountNotAuthorizedViaMicrosoftConnect:"Account not authorized via Microsoft Connect",WorkspaceNotFound:"Workspace Not Found",LinkToHome:"Link to home",SelectAColumnAndEllipsis:"Select a column...",ColumnPickerColumnsThatAre:"that are",SaveOutputAsANewDataset:"Save output as a new dataset",SaveTrainedModel:"Save trained model",SaveTransform:"Save transform",uploadDatasetUploadANewDataset:"Upload a new dataset",ChooseDatasetToDeprecateAndEllipsis:"Select dataset to deprecate...",ChooseTrainedModelToDeprecateAndEllipsis:"Select trained model to deprecate...",ChooseTransformToDeprecateAndEllipsis:"Select transform to deprecate...",ChooseADatasetTypeAndEllipsis:"Select a dataset type...",VisualizationNotAvailableBeyondTheFirst100Columns:"Not available beyond the first 100 columns.",VisualizationToViewSelectAColumnInTheTable:"To view, select a column in the table.",VisualizationCompareTo:"compare to",VisualizationScales:"scales",VisualizationCategories:"categories",VisualizationCumulativeDistribution:"cumulative distribution",VisualizationProbabilityDensity:"probability density",VisualizationRows:"rows",VisualizationColumns:"columns",VisualizationViewAs:"view as",ContextMenuTitle:"Context Menu",ChooseAndEllipsis:"Choose...",RightClickToActivateContextMenuOnEachOfTheRectangles:"Right-click to activate the context menu on each of the rectangles",ExperimentDefaultTitle:"Experiment created on {0}",ErrorExperimentNameMustContainAtLeastOneNonWhitespaceCharacter:"Experiment name must contain at least one non-whitespace character",welcomePageTitle:"welcome to machine learning studio preview",welcomeInfo2Link2aCaptionCreatingAndRunningExperiments:"Creating and running experiments",welcomeInfo2Link4CaptionPublishingExperiments:"Publishing Web Service (API)",welcomeInfo4Link3CaptionModels:"Visit the Model Gallery",welcomeInfo6Link3CaptionMLSupportSite:"Azure Support",welcomeInfo6Link4CaptionMLCenter:"Machine Learning Center",welcomeInfo6Link5CaptionWAManagementPortal:"Azure Management Portal",gettingStartedVideo1Link:"//go.microsoft.com/fwlink/?LinkID=403695&clcid=0x409",gettingStartedVideoThumbnail:"gettingStartedVideoThumb.png",gettingStartedVideo2Link:"//go.microsoft.com/fwlink/?LinkID=403712&clcid=0x409",gettingStartedVideo3Link:"//go.microsoft.com/fwlink/?LinkID=403710&clcid=0x409",gettingStartedVideo4Link:"//go.microsoft.com/fwlink/?LinkID=403705&clcid=0x409",gettingStartedVideo5Link:"//go.microsoft.com/fwlink/?LinkID=403704&clcid=0x409",welcomeInfo1Link1HrefReleaseNotes:"//go.microsoft.com/fwlink/?LinkID=403536&clcid=0x409",welcomeInfo1Link2HrefUpdates:"//go.microsoft.com/fwlink/?LinkID=403650&clcid=0x40",welcomeInfo1Link3HrefRssUpdates:"//go.microsoft.com/fwlink/?LinkID=403651&clcid=0x409",welcomeInfo3Link1CaptionHrefFeedback:"//go.microsoft.com/fwlink/?LinkID=403535&clcid=0x409",welcomeInfo4Link3CaptionHrefModels:"//go.microsoft.com/fwlink/?LinkID=403642&clcid=0x409",welcomeInfo6Link1CaptionHrefForum:"//go.microsoft.com/fwlink/?LinkID=403669&clcid=0x409",welcomeInfo6Link3CaptionHrefMLSupportSite:"//go.microsoft.com/fwlink/?LinkID=403722&clcid=0x409",welcomeInfo6Link4CaptionHrefMLCenter:"//go.microsoft.com/fwlink/?LinkID=403343",welcomeInfo6Link5CaptionHrefWAManagementPortal:"//go.microsoft.com/fwlink/?LinkID=403644&clcid=0x409",workspaceNotFoundModelWorkspaceNotFound:"Workspace Not Found",workspaceNotFoundModelSignOut:"Sign Out",workspaceNotFoundModelAboutMicrosoftAzureML:"About Microsoft Azure ML",workspaceNotFoundModelMachineLearningCenter:"Machine Learning Center",workspaceNotFoundModelContactMicrosoftSupport:"Contact Microsoft Support",workspaceNotFoundModelSignOutLink:"/authentication/signout",workspaceNotFoundModelAboutAzureMLLink:"//go.microsoft.com/fwlink/?LinkID=403763",workspaceNotFoundModelMLCenterLink:"//go.microsoft.com/fwlink/?LinkID=403343",workspaceNotFoundModelContactSupportLink:"//go.microsoft.com/fwlink/?LinkID=403794",HelpIDAlphabeticalModuleList:"DFDCB393-0285-4A60-A2BD-7C79F80E4D20",HelpWhatIsDatalab:"e76c990c-bb44-4dea-b834-39d4c4e864ec",welcomeInfo3Link2CaptionFeedback:"Ask a Question (forum)",welcomeInfo3Link2CaptionHrefFeedback:"//go.microsoft.com/fwlink/?LinkID=403669&clcid=0x409",welcomeInfo4Link4CaptionOpenSamplesPivot:"Go to sample experiments page",workspaceUserInviteInvitedText:"Invited",publishWebServiceModuleVersionIsOld:"One or more modules in your experiment need to be upgraded before the experiment can be published. See the help topic ‘Publishing the Experiment’ for more information.",publishWebServiceUnsupportedModule:"Publishing is not supported for experiments containing the {0} module. Please remove this module from your experiment and publish again.",webServiceNotReady:"The service is being configured and is not yet ready to test. Please wait a few seconds and then try again.",webServiceDeployedToProduction:"Deployed to Production",webServiceDeployToProductionAction:"Deploy to Production",webServiceMarkAsReadyForProductionAction:"Mark as Ready for Production",webServiceNotInProduction:"Not in Production",webServiceOlderVersionInProduction:"Older version in Production",webServiceProductionStatusTitle:"Production status",webServiceUpdateInProductionAction:"Update in Production",webServiceViewProductionWebServiceAction:"View Production Web Service",workspaceUserInviteActiveText:"Active",DraftState_SaveFailedRetrying:"Draft save failed, retrying...",DraftState_Saving:"Saving...",DraftState_SavedAt:"Draft saved at {0}",RefreshStatus_Failed:"Refresh status failed.",RefreshStatus_FailedRetrying:"Refresh status failed ... Retrying.",discardDraftAreYouSureQuestion:"You are about to discard the changes made since the last run. This cannot be undone. Are you sure?",workspaceNameCannotBeEmpty:"Workspace name cannot be empty.",workspaceNameInvalidErrorMessage:"The field can contain only letters, numbers, and hyphens.",workspacePageWorkspaceDescription:"Workspace Description",workspacePageWorkspaceName:"Workspace Name",sharingPageWorkspacePermissions:"Workspace Permissions",sharingPageWorkspacePermissionsLink:"See and remove Workspace Permissions in the Azure Portal",menuLegal:"//go.microsoft.com/fwlink/?LinkID=404260",menuPrivacyNotice:"//go.microsoft.com/fwlink/?LinkID=131004",invitationCouldNotSendInvitationTo:"Could not send invitation to {0}",invitationCouldNotSendInvitationToBecause:"Could not send invitation to {0}. {1}",invitationCouldNotSendInvitationUserNotFoundInAD:"User not found in Active Directory.",invitationSuccessful:"Invitation successful.",productName:"ML Studio (classic)",productNameMedium:"ML Studio (classic)",productNameLong:"Microsoft Machine Learning Studio (classic)",workspaceUnableToRegenAuthToken:"{0} was unable to regenerate the authorization token, as workspace settings have been changed by another session. Please refresh the page and try again.",workspaceUnableToSaveYourChangesPleaseRefresh:"{0} was unable to save your changes, as workspace settings have been changed by another session. Please refresh the page and try again.",workspaceRegenerateAuthTokenConfirmation:"Are you sure you want to regenerate the {0} authorization token for workspace '{1}'?",promotionSavingIntermediateOutput:"Saving intermediate output.",validationTheValueDoesNotMatchTheFollowing:"The value {0} does not match one of the following: {1}.",validationValueIsGreaterThanMaximumOf:"The value {0} is greater than maximum of {1}.",validationValueIsLessThanMinimumOf:"The value {0} is less than minimum of {1}.",validationValueIsNotAValidFloatingPointNumber:"The value is not a valid floating point number.",validationValueIsNotAValidInteger:"The value is not a valid integer.",validationValueIsNotAValidNumberGreaterThan:"The value {0} is not a valid number greater than {1}.",validationValueIsNotAValidNumberLessThan:"The value {0} is not a valid number less than {1}.",validationValueRequired:"Value required.",moduleErrorDialogCouldNotLoad:"Could not load module error message from server.",helpSearchDidYouMean:"Did you mean... ",helpSearchHelpContentFor:"Help content for ",helpSearchNoResults:"No results for ",helpSearchPlaceholder:"Search Help Content",helpStudioHelpName:"{0} Help",fxshell_logviewer_errors:"Errors",fxs_fxsDrawerTaskbar_newButton:"New",fxs_fxsSubscriptionPicker_selectAll:"Select All",fxs_fxsCustomerSupport_supportPlanFormatString:"{0}: {1}",fxs_fxsCustomerSupport_chooseSupportType:"Choose an option",fxs_fxsNotification_warning:"Warning",fxshell_logviewer_title:"Diagnostic Log",fxshell_logviewer_clearLog:"Clear Log",fxs_fxsSupportGrid_dateColumn:"Date Created",fxshell_logviewer_regExFilter:"RegEx Filter:",fxshell_logviewer_warnings:"Warnings",fxshell_feedback_design:"Do you like the design?",fxs_fxsDrawerProgress_activeMultiple:"{0} operations are currently running",fxs_fxsDrawer_close:"Close",fxs_fxsCustomerSupport_technical:"Technical",Impl_UI_Notifications_DataLoad_portalDataLoadWarnings:"Warnings encountered loading management data.",fxshell_avatarbar_legalLabel:"Legal",fxshell_logviewer_information:"Information",fxs_fxsSupportGrid_noIncidents:"No incidents found.",notifications_buttons_cancel:"Cancel",fxs_fxsWizard_complete:"Complete",fxs_fxsWizard_previous:"Previous",fxs_fxsCustomerSupport_premierLinkText:"Microsoft Premier customer support",notifications_buttons_yes:"Yes",fxs_fxsProgressBox_error:"Error",fxs_fxsCustomerSupport_errorRdfeMintMissmatch:"There was an error validating account owner of subscription.",fxshell_feedback_comments:"Comments",fxs_fxsDrawerProgress_warningShortMultiple:"{0} have warnings",fxs_fxsCustomerSupport_supportPlanLoadFailure:"Failed to retrieve your support plan.",fxshell_previewbadge_feedbackLinkText:"What do you think? Give us your feedback.",fxshell_navigation_backImgAlt:"Back",fxs_fxsCustomerSupport_manageButton:"Manage Tickets",fxs_fxsDrawerTray_progress_active:"Active Progress",fxs_fxsDialog_close:"Close",fxs_fxsProgressBox_backToOperations:"Back to progress operations",fxshell_previewbadge_termsLinkText:"Read the terms of use for features that are in preview.",fx_fxCopyButton_label:"Copy to clipboard",fxs_fxsCustomerSupport_supportPlan:"Support Plan",fxs_fxsCustomerSupport_supportType:"Support Type",fxs_fxsCustomerSupport_supportPlanFree:"Free - billing support",fxs_fxsCustomerSupport_supportPlanNone:"None",fxshell_navigation_error:"Error...",fxs_fxsProgressBox_backToSteps:"Back to progress steps",fxs_fxsCustomerSupport_purchasePlanMessageFormat:"Your current plan does not include technical support. Consider {0}.",fx_fxGrid_loading:"Loading...",fxshell_toastbox_open:"open",fxshell_previewbadge_onPremContentHeader:"Preview Site",fxs_fxsDrawerProgress_join:"{0}, {1}",notifications_buttons_scale:"Scale",notifications_buttons_retry:"Retry",fxs_fxsCustomerSupport_billing:"Billing",notifications_buttons_pause:"Pause",notifications_buttons_close:"Close",fxs_fxsWizard_close:"Close",fxshell_feedback_yes:"Yes",fxshell_feedback_quickly:"Did the UI load quickly?",fxs_fxsProgressBox_details:"Details",fxs_fxsNotification_back:"All notifications",fx_fxTreeView_collapsed:"Collapsed",fxs_fxsDrawerProgress_errorSingle:"1 operation has failed",notifications_buttons_details:"Details",fx_fxGrid_filter:"Filter",fxs_fxsCustomerSupport_region:"Country/Region",fxs_fxsDrawerProgress_successShortSingle:"1 has completed",notifications_buttons_complete:"Complete",fxshell_avatarbar_privacyLabel:"Privacy & Cookies",fxs_fxsDrawerHelp_close:"Close",fx_fxGrid_collapsed:"Collapsed",fxs_fxsSupportGrid_loading:"Loading",fxs_fxsSubscriptionPicker_subscriptionFilter:"Subscriptions",fxs_fxsDrawerHelp_title:"Help",fxs_fxsCustomerSupport_iconAlternate:"Contact Microsoft support",fx_fxGrid_descending:"Descending",fxshell_navigation_warning:"Warning...",fxs_fxsCustomerSupport_title:"Contact Microsoft Support",fxshell_previewbadge_contentPara:"Welcome to the Windows Azure Management Portal.",fxshell_previewbadge_onPremContentPara:"Welcome to the Management Portal Preview. You may encounter certain limitations and restrictions in this preview portal.",fxs_fxsDrawerTaskbar_help:"Help",fxs_fxsCustomerSupport_errorRetrievingPlan:"We were unable to retrieve your support level. Create tickets using a temporary level of: {0}.",fxs_fxsSubscriptionPicker_apply:"Apply",fxs_fxsSupportGrid_idColumn:"Request ID",fxs_fxsCustomerSupport_subscription:"Subscription",fxs_fxsCustomerSupport_viewIncidentsTitle:"View Existing Tickets",fxshell_feedback_satisfied:"How satisfied are you with the speed of deployments? [1-5]",fxs_fxsDrawerTray_information:"Information",fxs_fxsDrawerProgress_collapse:"Collapse",fx_fxTreeView_expanded:"Expanded",fx_fxBalloonIcon_title:"Balloon Header",fxs_fxsProgressBox_actions:"Actions",fx_fxDialog_close:"Close",fxs_fxsDrawerProgress_warningShortSingle:"1 has a warning",fxshell_avatarbar_getSupportLabel:"Get support",Impl_UI_Notifications_DataLoad_viewDataLoadWarnings:"Warnings encountered loading management data for the current view.",fxs_fxsDrawerTray_progress_error:"Error Progress",fxs_fxsSupportGrid_title:"Support requests",notifications_buttons_escalate:"Escalate",fxs_fxsNotification_error:"Error",fxs_fxsSubscriptionPicker_usefulActions:"Useful actions:",fx_fxBalloonIcon_content:"This is a balloon.",Shell_Net_versionMismatchError:"A newer version of the site is available. Click OK to load it. You may need to reopen your browser if you still see this error.",fxs_fxsDrawerProgress_activeSingle:"1 operation is currently running",fxs_fxsCustomerSupport_msdnLinkText:"MSDN technical support",fxs_fxsCopyButton_alt:"Copy to clipboard",fxshell_avatarbar_expansionArrowAlt:"Expand",fxs_fxsDrawerProgress_warningSingle:"1 operation has a warning",notifications_buttons_save:"Save",notifications_buttons_stop:"Stop",notifications_buttons_next:"Next",notifications_buttons_copy:"Copy",notifications_buttons_back:"Back",Shell_Net_loggedOut:"Your session has timed out. Click OK to log in again.",fxs_fxsDrawerTray_progress_completed:"Completed Progress",fxshell_logviewer_copyLogToClipboard:"Copy Log To Clipboard",fxshell_dialogalertbox_expand:"expand",fxs_fxsDrawerProgress_dismiss:"Dismiss completed",fxs_fxsDrawerProgress_warningMultiple:"{0} operations have warnings",fxs_fxsDrawerProgress_errorShortSingle:"1 has failed",notifications_buttons_ok:"OK",notifications_buttons_no:"No",fxshell_logviewer_verbose:"Verbose",fx_fxValidation_pending:"Pending",fxs_fxsSubscriptionPicker_noResults:"No matching subscriptions were found.",fxs_fxsDrawerProgress_successSingle:"1 operation has completed",fxshell_feedback_poor:"Poor",fxs_fxsSubscriptionPicker_filter:"Filter by subscriptions:",fxshell_dialogalertbox_collapse:"collapse",fxs_fxsDrawerTray_error:"Error",fxs_fxsDrawerProgress_errorShortMultiple:"{0} have failed",fxs_fxsNotification_details:"Details",fx_fxGrid_expanded:"Expanded",fxshell_toastbox_close:"close",fxs_fxsSupportGrid_statusColumn:"Support",fx_fxGrid_ascending:"Ascending",fx_fxDialog_ok:"Ok",fxshell_previewbadge_contentHeader:"Management Portal",fxs_fxsPicker_ok:"OK",fxs_fxsDrawerProgress_successMultiple:"{0} operations have completed",fxs_fxsSubscriptionPicker_selectAllSearchResults:"Select All Search Results",fxs_fxsCopyButton_copySuccess:"Copied",fxs_fxsProgressBox_active:"In progress.",fxshell_feedback_rightinfo:"Did you have the right information to complete your task?",fxs_fxsCustomerSupport_otherOptionsTitle:"Other support options",fxs_fxsCustomerSupport_language:"Language",fxshell_previewbadge_productionPortalLinkText:"Previous portal",fxs_fxsCustomerSupport_purchasePlanLinkText:"upgrading your support plan",fx_fxPager_previous:"Previous page",fx_fxGrid_summary:"A grid with rows of some unspecified type",fxs_fxsWizard_next:"Next",fx_fxPager_next:"Next page",fx_fxPager_page:"Page number",fxshell_avatarbar_accountLabel:"View my bill",fxs_fxsSupportGrid_incidentLinkTitle:"View incident details",fxs_fxsProgressBox_warning:"Warning",fxs_fxsDrawerProgress_successShortMultiple:"{0} have completed",fxshell_feedback_responsive:"Is the UI responsive?",fxshell_feedback_no:"No",fxs_fxsProgressBox_success:"Completed",fx_fxBalloonIcon_help:"Help",fxs_fxsCustomerSupport_createButton:"Create Ticket",fxs_fxsDrawerProgress_errorMultiple:"{0} operations have failed",fxs_fxsDrawerTray_warning:"Warning",fxs_fxsMenu_preview:"Preview",Shell_Net_anotherSession:"You session has ended. A login from another browser was detected.",fxs_fxsHeaderBar_expanderExpandImageAlt:"Show Menu",fxs_fxsDialog_complete:"Complete",fxs_fxsProgressBox_back:"Back to operations.",fxs_fxsNotification_information:"Information",fxshell_feedback_title:"We value your feedback",fx_fxUpload_label:"Browse your computer...",fx_fxUpload_alt:"Upload File",fxs_fxsSupportGrid_titleColumn:"Title",fxs_fxsDrawerMenu_close:"Close",Shell_Data_Loader_extensionDataLoadWarnings:"Warnings encountered loading management data for this resource type.",fxs_fxsDrawerMenu_title:"New",fxs_fxsCustomerSupport_validating:"Validating the support level of subscription.",fxs_fxsCustomerSupport_createIncidentTitle:"Create Support Ticket",fxshell_avatarbar_feedbackTooltip:"We value your feedback.",fxshell_previewbadge_previewButtonText:"Preview",Impl_UI_Notifications_DataLoad_viewDataLoadError:"Failed to load management data for the current view.",fxs_fxsHeaderBar_expanderCollapseImageAlt:"Hide Menu",fxshell_logviewer_performance:"Performance",fxs_fxsDrawer_help:"Help",fxshell_feedback_excellent:"Excellent",fx_fxUsageBars_xofyunits:"{0} of {1}",fx_fxGrid_expandError:"Errors encountered. [{0}|Click here] to retry.",credentialsNone:"No credentials are currently stored. Credentials entered in experiments will be automatically stored and shown in this page.",webServiceLearnMore:"Learn more",webServiceDiagnosticsMode:"Enable Logging",webServiceDiagnosticsLearnMoreUrl:"//go.microsoft.com/fwlink/?LinkID=517831",webServiceDiagnosticsModeNone:"No",webServiceDiagnosticsModeAll:"Yes",webServiceTestEnabledNo:"No",webServiceTestEnabledYes:"Yes",webServiceTestEnabled:"Enable Anonymous Test?",choiceParameterPleaseSelectValue:"Please select a value",workspaceNotFoundGoToYourWorkspace:"Go to your workspace",workspaceNotFoundGoToYourWorkspaceLink:"//go.microsoft.com/fwlink/?linkid=402635&amp;clcid=0x409",visualizationHeader:"Visualizations",visualizationStatisticsHeader:"Statistics",statsAndGraphsTitle:"Statistics and Visualizations",WebServiceApiParameterSchema:"Web service parameter",parameterIsLinkedToWebServiceParameter:'Parameter is linked to "{0}"',deleteWebServiceParameter:"Delete parameter",doneEditingWebServiceParameterName:"Done editing name",editWebServiceParameterName:"Edit name",provideWebServiceParameterDefaultValue:"Provide default value",removeWebServiceParameterDefaultValue:"Remove default value",setAsWebServiceParameter:"Set as web service parameter",setToWebServiceParameter:"Set to {0}",unsetWebServiceParameter:"Unset parameter",experimentParameterDeletedNotification:"Alert: Experiment parameter feature is disabled as we repurpose it to a new feature. The graph will keep working and there is no action you need to take.",anonymousWorkspaceExpirationNotice:"You will have 24 hours to sample what Microsoft Azure Machine Learning has to offer.  If you love it, sign up for a FREE account.",azureTermsOfServiceLink:"//go.microsoft.com/fwlink/?LinkID=517834",azureTermsOfServiceLinkName:"Microsoft Azure Website Terms of Use",disclaimer:'Use of Microsoft Azure services without a subscription is subject to the <a href="{0}">{1}</a>. By using these services, you agree to be bound by these terms.',login:"Login",microsoftAzureMachineLearning:"Microsoft Machine Learning Studio (classic)",signIn:"Sign In",signOut:"Sign Out",signUp:"Sign Up",signUpText:"Sign up for a FREE account!",startYourFreeAccount:"Start your free account",tryAnonymousWorkspace:"Test Drive",videos:"Videos",welcome:"Welcome to Machine Learning Studio (classic)",allExperimentsNoRows:"No experiments found",allExperimentsPivotDisplayName:"My Experiments",HomeCreateANewExperiment:"Create a new experiment",validationDuplicateWebServicePortNameFailed:"Web service port name {0} has already been defined.",multipleWebServicePortNotSupported:"Multiple web service input ports are not supported.",azurePrivacyLabel:"Privacy & Cookies",charactersLeft:"character(s) left",feedbackAndFeatureRequest:"Provide feedback and request features",feedbackInputPlaceholder:"Please provide any feedback you may have.",forumLinkText:"Machine Learning Forums",home:"Home",search:"Search",searchPlaceHolder:"Search help content",studio:"Studio",submit:"Submit",mainVideoUrl:"//channel9.msdn.com/Blogs/Windows-Azure/A-quick-tour-of-Azure-Machine-Learning",homeWelcomeAgreement:'By using this free version, you agree to be bound by the <a href="{0}" target="_blank">{1}</a>.',homeWelcomeDescription:"It's free and easy to try Machine Learning right now—just sign in with a Microsoft account and start experimenting. No credit card or Azure subscription needed.",homeWelcomeLearnMore:"Pricing & FAQ",homeWelcomeLearnMoreLink:"//go.microsoft.com/fwlink/?LinkID=517831",homeWelcomeMyExperiments:"my experiments",homeWelcomeSignIn:"Get started now",homeWelcomeSubtitle:"Want a taste?",welcomeBack:"Welcome back {0}!",welcomeTextSegment5Title:"Publish a Predictive Model",pressEnterTag:"Press the enter key to create a tag",publishExperimentToCommunityDescriptionPlaceholder:"Enter a detailed description of your experiment",publishExperimentToCommunitySummaryPlaceholder:"Enter a few lines summarizing the goal of the experiment",publishExperimentToCommunityVisibilityPrivate:"PRIVATE",publishExperimentToCommunityVisibilityPublic:"PUBLIC",publishExperimentToCommunityWizardTitle:"Publish to Gallery",republishExperimentToCommunityWizardTitle:"Republish to Gallery",publishExperimentToCommunityDescriptionLabel:"Detailed Description",publishExperimentToCommunitySummaryLabel:"Summary",publishExperimentToCommunityErrorTitle:"An error occurred when publishing the experiment.",publishExperimentToCommunityPublishedExperimentHeader:"Your experiment has been published",publishExperimentToCommunityPublishedExperimentVisitGalleryLabel:"Visit the Gallery to view comments, edit details, and share your experiment.",publishExperimentToCommunityPublishedExperimentLinkLabel:"Link To Published Experiment",publishExperimentToCommunityPublishedExperimentGotoLink:"View in Gallery",publishExperimentToCommunityTagsLabel:"Tag Your Content",machineLearning:"Machine Learning",microsoftAzure:"Microsoft Azure",whatCanWeImprove:"Is there something we can do better?",whatDidYouLike:"What did you like?",workspacePageLearnMore:"Learn More",workspacePageWorkspaceType:"Workspace Type",workspacePageWorkspaceTypeFree:"Free",workspacePageWorkspaceTypeProduction:"Standard",introDescription:"Here is an overview video to get you started.",introTitle:"Welcome!",infoErrorCode:"Error code: {0}",infoErrorHttpStatusCode:"Http status code: {0}",infoErrorRequestId:"Request id: {0}",infoErrorTimestamp:"Timestamp: {0}",unexpectedError:"Unexpected error happened.",webServiceEndpointCount:"Number of additional endpoints created for this web service: {0}",webServiceEndpointsSectionTitle:"Additional endpoints",webServiceManageEndpointsLink:"Manage endpoints in Azure management portal",publishExperimentToCommunitySharePromotionText:"Check out my machine learning experiment on {0}",publishExperimentToCommunitySharePromotionTitle:"Check out my experiment",publishExperimentToCommunityTwitterButtonTitle:"Share your experiment with your Twitter followers",share:"Share",newDatasetMenuHeader:"Upload a new dataset from a local file",newModuleMenuHeader:"Upload a new custom module from a local file",newExperimentMenuMicrosoftSamplesHeader:"Microsoft Samples",newExperimentMenuSearchPlaceholder:"Search experiment templates",newExperimentMenuBlankExperiment:"Blank Experiment",newExperimentMenuTemplateCopyName:"Copy of - {0}",parameterRangeCountMustBeInteger:"Number of points must be a positive integer",parameterRangeErrorMustBeGreaterThan:"Values must be greater than {0}",parameterRangeErrorMustBeLessThan:"Values must be less than {0}",parameterRangeErrorTooManyPoints:"Number of points cannot exceed the full range of integers ({0})",parameterRangeInputMustBeDoubles:"Input must be a list of doubles",parameterRangeInputMustBeIntegersOrRanges:"Input must be a list of integers or ranges of integers",parameterRangeInvalidRange:"The entered range is invalid",ParameterRangeLabel:"Parameter Range :",MultiselectLabelNoneSelected:"Make a selection",MultiselectLabelManySelected:"{0} items selected",rangeBuilderCount:"Number of points :",rangeBuilderLogarithmicScaleCheckbox:"Log Scale",useRangeBuilderLabel:"Use Range Builder",usePreviousResultsLabel:"Use cached results",usePreviousResultsLabelTooltip:"Module only executes if valid cache does not exist, otherwise use cached data from prior execution.",webServiceEndpointCountColumnTitle:"Endpoints",uploadModuleFromZip:"From zip package",uploadModuleMenuDescription:"Upload a custom module zip package",uploadModuleDialogDataToUpload:"Select a zip file to upload:",uploadModuleDialogDescription:"Module description",uploadModuleDialogEnterName:"Module name",microsoftAccountUrl:"//www.microsoft.com/en-us/account/default.aspx",trialDialogDisabledFeatureDescription:"You need the Free or Standard tier of Azure Machine Learning to use this feature. To start using the Free tier, which has no time limit and lets you save your work, just sign in with your {0}.",uploadModuleDialogExistingModule:"Existing module",trialDialogDisabledFeatureTitle:"Feature not available",uploadModuleDialogNewVersionOfModule:"This is a new version of an existing module",trialDialogExpiredTrialDescription:"Hope you enjoyed your {0}-hour Guest Access. Want more? The Free version of Azure Machine Learning has no time limit and lets you save your work. To use it, just sign in with a {1}.",trialDialogExpiredTrialTitle:"Time’s up",trialDialogExpiringTrialDescription:"Hey, just a reminder that when your trial ends in less than {0} hours you'll lose your work. But the free version of Azure Machine Learning has no time limit and lets you save experiments. To switch, just sign in with a {1}.",trialDialogExpiringTrialTitle:"Keep going?",trialDialogSeeFeaturesUrl:"//go.microsoft.com/fwlink/?LinkID=517831",trialDialogSeeFeatures:"See which features come in each version",trialDialogLearnMore:"Learn more",trialDialogLearnMoreUrl:"//go.microsoft.com/fwlink/?LinkID=517831",trialDialogReturnToTrial:"Return to trial",uploadModuleUploadANewModule:"Upload a new module",viewAllVideos:"VIEW ALL VIDEOS",trialDialogSignIn:"Sign in",workspacePageGetMoreStorage:"Want more storage? Get the standard version {0}",trialDialogSignInNow:"Sign in now",trialDialogEndTrial:"End trial",workspacePageStorageLearnMore:"learn more",workspacePageWorkspaceTypeAnonymous:"Guest",workspacePageWorkspaceStorage:"Workspace storage",workspacePageAvailable:"Available",workspacePageGB:"GB",workspacePageGigabytes:"gigabytes",workspacePageStorageLearnMoreUrl:"//go.microsoft.com/fwlink/?LinkID=517831",workspacePageUsed:"Used",homeWelcomeDescriptionAnonymous:"No {0}? No credit card? No problem! Choose anonymous Guest Access, or sign in with your work or school account, or a Microsoft account.",homeWelcomeOrSignIn:"Or, sign in with a Microsoft account",trialTimerTimeRemaining:"time remaining",confirmCreateScoringGraphTitle:"Create new predictive experiment",confirmCreateScoringGraphDetails:"We observe that you have training modules in the graph. Do you want to convert this experiment to scoring experiment? Please click details button for more information.",selectTrainingModuleConfirmationDetails:"There are more than one training module in the experiment. You must select only one training module to continue creating predictive experiment.",selectTrainingModuleConfirmationTitle:"Select one training module",createScoreGraphCommandTitle:"Predictive Web Service [Recommended]",bubbleBackButtonText:"BACK",bubbleNextButtonText:"NEXT",createScoreTutorialAddInputOutputNodesContent:"You will find new input and output nodes in the modules pane.",createScoreTutorialAddInputOutputNodesTitle:"ADDING INPUT & OUTPUT NODES",createScoreTutorialInputOutputNodesContent:"You now have the ability to add, change or remove inputs and outputs in your experiment",createScoreTutorialInputOutputNodesTitle:"INPUT & OUTPUT NODES",createScoreTutorialTrainedModelContent:"We created and saved this trained model from your original experiment so we don't have to retrain the model when the web service runs.",createScoreTutorialTrainedModelTitle:"TRAINED MODEL",fileInvalidType:"Invalid file type.",uploadingNewCustomModulePackage:"Uploading module zip package '{0}'...",customModuleZipPackageFailed:"Failed to register modules in zip package {0}",customModuleZipPackageCompleted:"Successfully built module(s) in package {0}. Added module(s): {1}",autocompleteTruncatedWarningLabelPlural:"{0} results not shown",columnPickerInputNameList:"Input a single column name.",autocompleteTruncatedWarningLabelSingular:"{0} result not shown",trialDialogDisabledDatasetUploadDescription:"Looks like you are trying to upload a dataset. This feature is only available in the Free or Standard tier of Azure Machine Learning. To enable it, please sign in with a {0}.",trialDialogOops:"Oops, looks like you hit a limit…",trialDialogDisabledModuleDescription:"Looks like you are trying to use a module that is only available in the Free or Standard tier of Azure Machine Learning. To enable it, please sign in with a {0}.",trialDialogDisabledModuleTitle:"We've hit a little snag",trialDialogExceededModuleCountLimitDescription:"With a Guest workspace, you cannot run an experiment with more than {0} modules. To remove this restriction, please sign up for an {1}, and then create a new {2}.",trialDialogExceededModuleCountLimitTitle:"Oops, looks like you hit a limit...",trialDialogExceededModuleRuntimeLimitTitle:"We've hit a little snag",trialDialogExceededStorageLimitDescription:"With a Free workspace, you cannot use more than {0} GB of storage. To remove this restriction, please sign up for an {1}.",trialDialogExceededStorageLimitTitle:"We've hit a little snag",trialDialogParallelRunDisabledDescription:"Looks like you are trying to run two or more experiments simultaneously. This feature is disabled in the Trial version of Azure Machine Learning. To enable it, please sign in with a {0}.",trialDialogParallelRunDisabledTitle:"We've hit a little snag",trialDialogHowToGetIt:"How to get it",trialDialogNoSizeLimits:"Did you know the paid version has no size limits? {0}",trialDialogNoTimeLimits:"Did you know the paid version has no time limits? {0}",trialDialogExceededModuleRuntimeLimitDescription:"Looks like you are trying to run a module for more than {0} minutes. This feature is disabled in the Trial version of Azure Machine Learning. To enable it, please sign in with a {1}.",trialDialogWhatVersion:"What version do I need?",microsoftAccount:"Microsoft account",clusterLabel:"Cluster",clusterPrincipalComponent:"Principal Component",gallery:"Gallery",publishExperimentToCommunityValidationError_CustomModule_Message:"Publishing experiment with custom modules to Gallery is not supported.",publishExperimentToCommunityValidationError_CustomModule_Title:"This experiment cannot be published because '{0}' is a custom module.",workspace:"workspace",azureSubscription:"Azure subscription",trialDialogExceededModuleCountLimitDescriptionForFree:"With a Free workspace, you cannot run an experiment with more than {0} modules. To remove this restriction, please sign up for an {1}, and then create a new {2}.",trialDialogExceededModuleRuntimeLimitDescriptionForFree:"With a Free account, you cannot have any module that takes more than {0} minutes to run. To remove this restriction, please sign up for an {1}, and then create a new {2}.",trialDialogParallelRunDisabledDescriptionForFree:"With a Free account, you cannot run two or more experiments simultaneously. To remove this restriction, please sign up for an {0}, and then create a new {1}.",trialDialogShowMeHow:"Show me how",trialDialogNotNow:"Not now",experimentDetailedDescription:"Description",experimentSummary:"Summary",experimentDetailedDescriptionPlaceholder:"Enter the detailed description for your experiment.",experimentSummaryPlaceholder:"Enter a few sentences describing your experiment (up to 140 characters).",originalExperimentDocumentation:"Original Experiment Documentation",apiCodeDialogTitle:"Use this code to access your data",apiCodeDialogTitlePreviewTag:"(Preview)",apiCodeDialogLanguageLabel:"Language",apiCodeDialogLongCodeLabel:"Code Snippet",apiCodeDialogShortCodeLabel:"This dataset",apiCodeDialogTokenUnavailable:"You will need to get the workspace owner to reinvite you to this workspace as an Owner.",apiCodeDialogTokenWarning:"Note: this code includes your workspace access token, which provides full access to your workspace. It should be treated like a password.",apiCodeDialogUseSecondaryTokenLabel:"Use Secondary Token",newExperimentMenuViewMoreInGalleryWithCount:"VIEW MORE IN GALLERY ({0})",newExperimentMenuViewMoreInGallery:"VIEW MORE IN GALLERY",accessPermissionInstructions:'Please specify the user\'s <a href="http://windows.microsoft.com/en-us/windows-live/sign-up-create-account-how" target="about:blank">work or school account, or a Microsoft Account</a> (e.g. Windows LiveID). The user will be notified via e-mail and will need to sign-in using that account.',newExperimentMenuOpenInStudio:"OPEN IN STUDIO (classic)",newExperimentMenuViewInGallery:"View in Gallery",newExperimentMenuEmptySearchResult:'Found no results for "{0}" ',newExperimentMenuSearchResultLabel:'Search results for "{0}"',imageUploadProcessingText:"Processing your image, please wait.",twitterButtonTitle:"Tweet this",imageUploadError_FileTooLarge:"Image must be less than {0} megabytes in size.  Please try a smaller image.",imageUploadError_GenericLoading:"Error loading image",setupWebServiceCommandTitle:"Set up web service",updateScoreGraphCommandTitle:"Update Predictive Experiment",createdScoreExperimentStepTitle:"Created predictive experiment",createdTrainedModelStepTitle:"Created trained model from training experiment",createScoreCommandTourContent:"Use this command to create a predictive experiment from the current training experiment.",createScoreCommandTourTitle:"Create Predictive Experiment",createScoreTutorialNewExperimentContent:"We've created a copy of your original experiment and optimized it for scoring.",createScoreTutorialNewExperimentTitle:"New Experiment",createScoringExperimentProgressTitle:"Creating predictive experiment",creatingScoreExperimentStepTitle:"Creating predictive experiment",creatingTrainedModelStepTitle:"Creating trained model from training experiment",foundTrainModuleStepTitle:"Found train module in the training experiment",lookingForTrainModuleStepTitle:"Looking for train module in the training experiment",retreivingScoringExperimentStepTitle:"Retrieving predictive experiment",saveTrainModuleStepTitle:"Saving updated trained model",updateScoreCommandTourContent:"Use this command to update the trained model in the predictive experiment directly.",updateScoreCommandTourTitle:"Update Predictive Experiment Command",updateScoringExperimentProgressTitle:"Updating predictive experiment",updateTrainedModelInScoringExperimentStepTitle:"Updating trained model in predictive experiment",confirmDeleteDataset:"Are you sure you want to permanently delete this dataset?",datasetsNoRows:"No datasets found",samples:"Samples",myDatasets:"My datasets",notebooksListNoRows:"No notebooks found",guidedTourCanvasContent:"This is the body of your experiment. Add and connect modules to create a data science workflow.",guidedTourCanvasTitle:"Experiment Canvas",guidedTourCommandsContent:"You'll find experiment commands such as save, delete, run, and publish. ",guidedTourCommandsTitle:"Commands",guidedTourDrawerContent:"You can start with a blank experiment or use a sample.  We'll choose a blank experiment.",guidedTourDrawerTitle:"Create an experiment",guidedTourMainNavTitle:"Azure ML main navigation",guidedTourMainNavContent:"These icons give you access to your experiments, web services, and account settings.",guidedTourModulesPaneContent:"In this pane, you will find the modules used to build an experiment.",guidedTourModulesPaneTitle:"Modules pane",guidedTourNewButtonContent:"The '+NEW' menu is the starting place for creating experiments and uploading datasets or custom modules.",guidedTourNewButtonTitle:"Let's get started!",guidedTourPropertiesPaneContent:"You'll find information in this pane about your experiment and the modules in it, and get helpful tips.",guidedTourPropertiesPaneTitle:"Properties pane",guidedTourChatWindowContent:"Get immediate help from our Support and Data Science team members.",guidedTourChatWindowTitle:"Live Chat",guidedTourGetStartedNow:"show me the basics",bubbleFinishedButtonText:"FINISH",apiCodeDialogWelcomeMessage:"To programmatically access this dataset, simply copy the code snippet into your favorite development environment. ",apiCodeDialogTopText:"Generate Data Access Code",confirmDeleteTrainedModel:"Are you sure you want to permanently delete this trained model?",trainedModels:"Trained models",trainedModelsNoRows:"No trained models found",storageOverCapacity:"You are over the limit",createScoreTutorialDataFlowContent:"Click here to compare how data flows in the experiment and in the web service",createScoreTutorialDataFlowTitle:"SEE HOW DATA FLOWS",prepareWebServiceCommandTitle:"Retraining Web Service",publishWebServiceCommandTourContent:"Click here to publish the experiment as a web service.",publishWebServiceCommandTourTitle:"PUBLISH WEB SERVICE",runExperimentCommandTourContent:"Click here to run the experiment.",runExperimentCommandTourTitle:"RUN EXPERIMENT",multiclassAverageAccuracy:"Average accuracy",multiclassMacroAveragedPrecision:"Macro-averaged precision",multiclassMacroAveragedRecall:"Macro-averaged recall",multiclassMicroAveragedPrecision:"Micro-averaged precision",multiclassMicroAveragedRecall:"Micro-averaged recall",multiclassOverallAccuracy:"Overall accuracy",learnerWeightMean:"Weight Mean",learnerWeightStandardDeviation:"Weight Standard Deviation",multiclassConfusionMatrixHeader:"Confusion Matrix",multiclassMetricsHeader:"Metrics",publishExperimentToCommunityImageGalleryTab:"Image Gallery",publishExperimentToCommunityWizardImageSelectionSubTitle:"Use a JPG, GIF, or PNG.  A resolution of 960 by 640 pixels works best.",publishExperimentToCommunityWizardImageSelectionTitle:"Image Selection",publishExperimentToCommunityWizardPublishPageTitle:"Publish",publishExperimentToCommunityWizardExperimentDescriptionTitle:"Experiment Description",publishExperimentToCommunityWizardSettingsTitle:"Settings",publishExperimentToCommunityWizardImageSelectionCustomImageTab:"Upload an image",publishExperimentToCommunityWizardImageSelectionStockImagesTab:"Select stock image",publishExperimentToCommunityVisibilityLabel:"Visibility",publishExperimentToCommunityPublicPublishLabel:"Public",publishExperimentToCommunityPublicPublishExplanationLabel:"Anyone can view and copy the experiment. Once public, it cannot be unlisted.",publishExperimentToCommunityUnlistedPublishLabel:"Unlisted",publishExperimentToCommunityUnlistedPublishExplanationLabel:"Only people with the direct link can view and copy the experiment.",publishExperimentToCommunityPauseOnPublishingMessage:"Publishing to Gallery...",runningExperimentMessageTitle:"Running experiment",StorageAccountDeletedErrorMessage:"Please verify storage account {2} exists. Request ID: {0} {1}",StorageKeyOutOfSyncErrorMessage:"Please resync the access keys for storage account {2}. Request ID: {0} {1}",errorGettingVisualizationData:"Error getting visualization data. {0}",guidedExperimentExperimentDescriptionTitle:"tutorial",guidedExperimentExperimentDescriptionContent:"Let’s build a machine learning experiment to predict whether an individual’s income exceeds 50K.",guidedExperimentMachineLearningModulesTitle:"machine learning modules",guidedExperimentRunTitle:"run",guidedExperimentSplitTitle:"split",guidedExperimentThisIsADatasetTitle:"dataset",guidedExperimentTransformationsTitle:"pre-processing",guidedExperimentVisualizeTitle:"visualize",guidedExperimentDatasetContent:"We start with a sample dataset of adult census and income information. We could also use “Reader” to connect to various data sources.",guidedExperimentLearnMore:"Learn More&hellip;",guidedExperimentMachineLearningModulesContent:"We have many learning algorithms to choose from, such as “Two-Class Boosted Decision Tree”. Connect it to “Train Model”, specify “income” as prediction target, and connect to “Score Model” for prediction on the test dataset.",guidedExperimentRunContent:"We can now run the experiment to train the model and make a prediction on the test dataset.",guidedExperimentSplitContent:"Split the dataset into two parts: a training set for training the learning algorithm, and a test set for predicting income level.",guidedExperimentTransformationsContent:"We select modules to clean up and choose relevant columns for predicting income level. Module parameters can be set in the property panel.",guidedExperimentVisualizeContent:"After the run, we can see the prediction results on the test dataset in the “Scored Labels” column and the “Scored Probabilities” column.",webServiceDownloadExcelLabel:"Download Excel Workbook",webServiceDownloadNewExcelLabel:"Excel 2013 or later",webServiceDownloadLegacyExcelLabel:"Excel 2010 or earlier workbook",webServiceDownloadworkbook:"workbook",webServiceDownloadExcelSampleDataConfirmationTitle:"Sample Data",webServiceDownloadExcelSampleDataConfirmationContent:"Sample Data is a feature for your web service users to get started with using your web service.  By downloading this Excel workbook, Sample Data will be enabled, which will make a small sample from your training data set available to only those with the correct API key.  To disable Sample Data, go to the Configuration section of the web service dashboard and click “No” for “Enable Sample Data.”  If you close this dialog box, your current selection for Sample Data will not change.",webServiceSampleDataEnabled:"Enable Sample Data?",webServiceSampleDataEnabledYes:"Yes",webServiceSampleDataEnabledNo:"No",webServiceGroupDashboardWsAppsHeader:"APPS",webServiceGroupDashboardWsDownloadExcelType:"DOWNLOAD EXCEL",experimentListItemsSelectedMessage:"{0} items selected",homePageMyRecentExperiments:"MY RECENT EXPERIMENTS:",homePageMyRecentWorkspaces:"MY RECENT WORKSPACES:",navbarDocumentationHome:"Documentation Home",navbarTour:"Tour",navbarChat:"Chat",quickHelpTitle:"Quick Help",guidedTourNavigateToExperimentContent:"Want to learn how to build an experiment now? ",guidedTourClickHere:"click here",uploadModuleDialogDescriptionText:"You can upload a ZIP file that contains one or more custom modules written in {0} (more supported languages to come.)",uploadModuleDialogExampleR:"Download example R module",uploadModuleDialogLearnMore:"Learn more.",welcomeInfo2Link3CaptionQuickStartForR:"Quick start for R",welcomeInfo2Link3aCaptionQuickStartForPython:"Quick start for Python",binaryClassificationAccuracy:"Accuracy",binaryClassificationF1Score:"F1 Score",binaryClassificationFractionAboveThreshold:"Fraction Above Threshold",binaryClassificationNumberOfNegativeExamples:"Negative Examples",binaryClassificationNumberOfPositiveExamples:"Positive Examples",binaryClassificationScoreBin:"Score Bin",binaryClassificationCumulativeAuc:"Cumulative AUC",binaryClassificationNegativePrecision:"Negative Precision",binaryClassificationNegativeRecall:"Negative Recall",binaryClassificationPrecision:"Precision",binaryClassificationRecall:"Recall",visualizationInfinity:"Infinity",visualizationNaN:"NaN",visualizationStatisticFeatureType:"Feature Type",visualizationStatisticMax:"Max",visualizationStatisticMean:"Mean",visualizationStatisticMedian:"Median",visualizationStatisticMin:"Min",visualizationStatisticMissingValues:"Missing Values",visualizationStatisticStandardDeviation:"Standard Deviation",visualizationStatisticUniqueValues:"Unique Values",publishExperimentToCommunityConsentLabel:"Once published, everyone can view and copy this experiment from the gallery.",publishExperimentToCommunityConsentCredentialsLabel:"Credentials contained in the modules in this experiment will not be published.",publishExperimentToCommunityCredentialsAbsentWarningLabel:"To ensure Gallery visitors can copy and run this experiment, you might want to provide instructions on how to access the credential-protected resources used in this experiment in the DETAILED DESCRIPTION field above.",publishExperimentToCommunityShouldGoToPublishedExperimentText:"Take me to the published experiment.",guidedExperimentName:"Experiment Tutorial",multipleTrainModuleSelectionTourContent:"Please click on the Train Model you want to use for Scoring.{0}",multipleTrainModuleSelectionTourTitle:"Please select a train model",toggleToExperimentViewTooltip:"Click to switch to experiment view",toggleToWebServiceViewTooltip:"Click to switch to web service view",azureUserStorageError:"Azure User Storage Error.",datasetDeleted:"Dataset deleted",deleteDatasetBlockedByDependencies:"This dataset cannot be deleted because there are web services depending on it.",deleteDatasetDependenciesWarning:"Deleting this dataset will remove it from the following experiments. Do you want to proceed?",deleteOperationFailed:"Delete operation failed: {0}",deleteTrainedModelBlockedByDependencies:"This trained model cannot be deleted because there are web services depending on it.",deleteTrainedModelDependenciesWarning:"Deleting this trained model will remove it from the following experiments. Do you want to proceed?",deletingDataset:"Deleting dataset…",deletingTrainedModel:"Deleting trained model…",trainedModelDeleted:"Trained model deleted",azureSubscriptionDisabled:"Your Azure subscription {0} is disabled.  Please contact your Azure subscription administrator.",azureSubscriptionDisabledTitle:"Azure Subscription Disabled",workspaceDisabled:"Your workspace {0} is disabled.  Please contact your Azure subscription administrator.",workspaceDisabledTitle:"Workspace Disabled",computingExperimentTabContent:"Computing experiment",scoringExperimentTabContent:"Predictive experiment",trainingExperimentTabContent:"Training experiment",standardWorkspace:"Standard workspace",newExperimentMenuLoading:"Loading...",newExperimentMenuCannotOpen:'Cannot open experiment "{0}"',newExperimentMenuOpenCallFailed:'Call to open experiment "{0}" failed.',errorDeletingExperiment:'Experiment "{0}" cannot be deleted because of an error: {1}',failedToDeleteExperiment:"The selected experiment cannot be deleted.",errorDeletingNotebook:'Notebook "{0}" cannot be deleted because of an error: {1}',failedToDeleteNotebook:"The selected notebook cannot be deleted.",failedToDeleteNotebooks:"{0} of {1} selected notebooks cannot be deleted.",cantDeleteExperimentPartOfAWebService:'Experiment "{0}" cannot be deleted because a web service depends on it.',link:"link",failedToDeleteExperiments:"{0} of {1} selected experiments cannot be deleted.",workspaceOwnersEmail:"Owner's email",workspaceStorageAccount:"Storage account",workspaceSubscriptionId:"Subscription ID",preview:"Preview",copyExperimentFromGalleryConfirmationTitle:"Copy experiment from Gallery",workspaceWithCurrentLabel:"{0} (Current)",experimentContainsMissingResources:"Some datasets and/or trained models cannot be found. They may have been deleted. Please examine your experiment.",serviceDown:"The service is down.",errorBrowserContinue:"Continue anyway,",errorBrowserCurrent:"Current browser:",errorBrowserDisclaimer:"I understand that some features may not work properly.",errorBrowserTitle:"Browser Not Supported",errorBrowserUpgrade:"Please upgrade your browser or use one of the following supported browsers.",errorServiceUnavailable:"We're sorry. Azure Machine Learning is temporarily unavailable. Our engineers are working quickly to resolve the issue.",errorServiceUnavailableTitle:"AzureML is unavailable",copyExperimentDialogCopyExperiment:"Copy Experiment",copyExperimentDialogDestinationWorkspace:"Destination Workspace",copyExperimentFromGalleryDialogDestinationWorkspace:"Select a workspace to copy this experiment into:",copyExperimentFromGalleryDialogWorkspaceInfoNotAvailable:"No workspaces found. Select another region.",copyExperimentDialogExperimentName:"Experiment Name",copyExperimentDialogWorkspaceInfoNotAvailable:"Could not load your available workspaces. Please refresh and try again.",copyExperimentDialogCopyExperimentWarning:"Note: Uploaded datasets and other resources associated with the experiment will also be copied. Any passwords or secrets configured in the experiment will not be copied.",copyExperimentDialogCopyExperimentStarted:'Copying experiment "{0}" to workspace "{1}"',copyExperimentDialogCopyExperimentSucceeded:'Experiment "{0}" has been successfully copied to workspace "{1}"',copyExperimentDialogCopyExperimentFailed:'Copying experiment "{0}" to workspace "{1}" failed: {2}',copyExperimentDialogLinkToCopy:"Open the new copy",copyExperimentCommandName:"Copy to Workspace",navbarForumSearch:"Forum",navbarHelpSearch:"Search help and documentation",navbarSubmitFeedback:"Submit Feedback",navbarTimeRemaining:"Time remaining for trial workspace",workspaceId:"Workspace ID",homeWelcomeEnter:"Start Experiment",close:"Close",homeEnjoyAccess:"Enjoy {0} hours of Guest Access. No sign-in required. {1}",homeEnterMLStudio:"Enter Azure Machine Learning Studio",homeGetWorkspace:"Get my own workspace. {0} required.",homeGuestAccess:"Guest Access",homeSignIn:"Sign In",trialDialogDisabledModuleUploadDescription:"Looks like you are trying to upload a custom module. This feature is only available in the Free or Standard tier of Azure Machine Learning. To enable it, please sign in with a {0}.",trialDialogDisabledWebServicePublishDescription:"Looks like you are trying to publish a web service. This feature is only available in the Free or Standard tier of Azure Machine Learning. To enable it, please sign in with a {0}",navbarWorkspaceName:"Workspace name",datasetCategorySamples:"Samples",datasetCategoryUserCreated:"My Datasets",fileTooLargeAnonymous:"The selected file is too large. The maximum allowed size for a Guest workspace is {0}",homeWelcomeSubtitleAnonymous:"Try it for free",trialDialogDisabledPublishToCommunityDescription:"Looks like you are trying to publish an experiment to Gallery. This feature is only available in the Free or Standard tier of Azure Machine Learning. To enable it, please sign in with a {0}",azureMLDescription:"Azure Machine Learning Studio is a GUI-based integrated development environment for constructing and operationalizing Machine Learning workflow on Azure.",welcomeInfoContributeToGallery:"Share your experiments in Gallery",welcomeInfoCopyExperimentsAcrossWorkspaces:"How to copy experiments",welcomeInfoNYCTaxiDataset:"Build ML models on NYC Taxi Data",welcomeInfoGuideForCloudDataScienceProcess:"Cloud Data Science Process",trialDialogDisabledModuleDescriptionNamed:"Looks like you are trying to use the module {0} which is only available in the Free or Standard tier of Azure Machine Learning. To enable it, please sign in with a {1}.",trialDialogExceededStorageLimitDescriptionAnonymous:"With a Guest workspace, you cannot use more than {0} GB of storage. To remove this restriction, please sign up for an {1}.",experimentListPivotQuickStarts:"quick starts",experimentListPivotTemplates:"templates",experimentListPivotTutorials:"tutorials",homeCreateExperiment:"Create Experiment",workspaceCreationTime:"Creation Time",homeGetStarted:"Get started",homeReadMore:"Read more…",CompetitionProperties:"Competition",submitCompetitionEntry:"Submit Competition Entry",publishExperimentToCommunityValidationError_LargeDataset_Title:"Publish to Gallery failed because the total size of the dataset exceeds the max limit of {0}. Please reduce the dataset size and try again.",copyExperiment_LargeDataset_Title:"Copy to workspace failed because the total size of the dataset exceeds the max limit of {0}. Please reduce the dataset size and try again.",copyExperiment_ValidationFailure_Details:"Error: {0}",copyExperiment_ValidationFailure_Title:"Failed to validate experiment for copying.",dataGateways:"Data Gateways",host:"host",addNewDataGateway:"(Add new data gateway...)",confirmDeleteDataGateway:'Are you sure to delete the data gateway "{0}"? Any modules that reference this gateway will fail when executed after it is removed.',downloadAndRegister:"Download and Register",editDescription:"Edit Description",newDataGateway:"New Data Gateway",created:"Created",description2:"Description",lastConnected:"Last connected",none:"None",notRegistered:"Not registered",offline:"Offline",online:"Online",other:"Other",registered:"Registered",updateAvailable:"Update available",updateRequired:"Update required",upToDate:"Up to date",byDate:"by {0}",gatewayExpiredVersionHtml:'This data gateway is out of date and no longer usable. It has been marked offline. <a target="_blank" href="//go.microsoft.com/fwlink/?LinkId=271260">Download</a> and install the latest version of the data gateway to bring it up to date and back online. (64 bit preferred)',gatewayExpiringVersionHtml:'This data gateway needs to be updated by {0} or it will be no longer be usable and marked offline. <a href="//go.microsoft.com/fwlink/?LinkId=271260">Download</a> and install the latest version of the data gateway. (64 bit preferred)',gatewayGetNewVersionHtml:'<a href="//go.microsoft.com/fwlink/?LinkId=271260">Download</a> and install the latest version of data gateway. (64 bit preferred)',gatewayOfflineMessageHtml:'This data gateway is offline. Launch Data Management Gateway Configuration Manager on the gateway machine and confirm that the "Service status" is "Started", "Gateway key status" is "Registered", and the status bar shows "Connected to Data Management Gateway Cloud Service". If not, check Windows Event Log on the gateway machine for detailed information.',notRegisteredMessageHtml:"This data gateway needs to be registered with the Azure Machine Learning Studio. Use Download & Register to install a data gateway on a machine within your network.",dataGateway64BitPreferred:"(64bit preferred)",dataGatewayDownloadAndRegisterTitle:"Download and register data gateway",dataGatewayDownloadLinkText:"Download data management gateway",dataGatewayInstallHereText:"Install and auto-register on this computer",dataGatewayInstallPreamble:"To use this data gateway you need to install Microsoft Data Management Gateway on a computer that has network connectivity to the data sources.",dataGatewayNameInvalid:"The data gateway name can only contain letters (A to Z), numbers, dashes and underscores. The name cannot contain spaces.",dataGatewayPreamble:"A data gateway provides access to on-premise data sources in your corporate environment.",dataGatewayRegeneateWarning:"Regenerating the key will make this registered data gateway <strong>non-functional</strong> immediately until the data gateway is newly registered with the regenerated key.",dataGatewayRegenerateRegistrationKey:"Regenerate registration key",dataGatewayRegistered:"Gateway registered",dataGatewayRegisteredPostamble:"The data gateway has been registered and is now ready to use.",dataGatewayRegistrationKeyLabel:"Gateway registration key",dataGatewayRegistrationKeyPreample:"After installation, when prompted to register, use this key.",dataGatewayRegistrationNeeded:"Gateway not registered",dataGatewayRegistrationPostamble:"You can also start Data Management Gateway Configuration Manager on the gateway computer and select Change Key or Register.",nameAlreadyInUse:"This name is already in use. Choose a different name.",nameTooLong:"The name is too long.",nameTooShort:"The name is too short.",newDataGatewayDescriptionLabel:"Description",newDataGatewayDescriptionPlaceholder:"Enter the detailed description for your gateway.",newDataGatewayNameLabel:"Gateway Name",newDataGatewayNameWizardTitle:"New data gateway",refreshStatus:"Refresh status",or:"or",dataGatewayGettingRegistrationKey:"Generating registration key...",addNewDataGatewayChoice:"(add new Data Gateway...)",validationInvalidDataGateway:"The Data Gateway is not valid.",clickOnceWarning:"This may not work with your browser. Use Internet Explorer if you encounter problems.",dataGatewayEnterCredentials:"Enter values",dataGatewayCredentialValuesRequired:"values required",dataGatewayCredentialValuesSet:"values set",webinarAiredOn:"Aired on",webinarAiringOn:"Airing on",columnPickerIndicesOutOfRange:"Indices must be greater than 0 and less than or equal to the number of columns ({0}).",goToCompetitionText:"View Competition in Gallery",experimentEditorContextMenuApiCode:"Generate Data Access Code…",notebookPlusNewNotebookDescription:"Open a new notebook.",notebookExtensionNotebookTitle:"Notebooks",notebookPlusNewNotebookTitle:"Notebook",notebookPlusNewExamplesLabel:"Examples",notebookPlusNewBlankPython2NotebookLabel:"Python 2",notebookPlusNewBlankPython3NotebookLabel:"Python 3",notebookPlusNewExamplePython2Notebook:"Welcome to Studio/Jupyter",notebookLanguagePython2:"Python 2",notebookLanguagePython3:"Python 3",competitionStatusCreateScoringExperiment:"Predictive Web Service Set Up",competitionStatusCreateWebService:"Web Service Deployed",competitionStatusSubmitWebService:"Web Service Submitted",copyExperimentCurrentWorkspacePrefix:"(current) ",renameNotebookDialogRenameTitle:"Rename Notebook",renameNotebookDialogNameInputLabel:"Notebook Name",notebookNameWhitespaceError:"Notebook name must contain at least one non-whitespace character",renameNotebookFailed:"Renaming notebook failed. {0}",renameNotebookDialogNameTitle:"Name Notebook",renameNotebookDialogSameNameError:'"A notebook with this name already exists"',renameNotebookDialogDefaultNotebookNameBeginning:"Untitled",deleteNotebookConfirmation:"Delete notebook {0}? ",deleteNotebookProgress:"Deleting notebook {0}. ",deleteNotebookSucceeded:"Notebook {0} has been deleted. ",deleteNotebookFailed:"Could not delete notebook {0}. {1} ",workspaceSelectorEmptyResult1:"No workspaces found.",workspaceSelectorRegionSelectorLabel:"REGION:",workspaceSelectorAvailableWorkspaces:"WORKSPACE:",workspaceSelectorEmptyResult2:"Select another region.",workspaceSelectorLoadingMessage:"Loading",copyExperimentFromGalleryDialogDestinationRegionMultiGeo:"REGION:",copyExperimentFromGalleryDialogDestinationWorkspaceMultiGeo:"WORKSPACE:",copyExperimentFromGalleryGeoLoading:"Loading",datasetListDownloadCommand:"Download",datasetListDeleteCommand:"Delete",datasetListNotebookCommand:"Open in Notebook",datasetListGenerateAccessCodeCommand:"Generate Data Access Code... ",createNotebookFailed:"Creating notebook {0} failed. {1}",openNotebookFailed:"Opening notebook failed. Notebook id: {0}. {1}",notebookServiceUnavailable:"Notebook service is currently unavailable.",competitionStatusCreateStarterExperiment:"Starter Experiment Copied",ErrorSubmissionNameMustContainAtLeastOneNonWhitespaceCharacter:"Submission name must contain at least one non-whitespace character.",competitionSubmissionWizardStep1Preamble:"Please name your submission.",competitionSubmissionWizardStep1SubmissionNameLabel:"Submission Name",competitionSubmissionWizardStep1Title:"Submission Name",competitionSubmissionWizardStep2Errors:"Errors",competitionSubmissionWizardStep2NoErrors:"No Errors",competitionSubmissionWizardStep2ReadyToSubmit:"Your entry is ready to submit.",competitionSubmissionWizardStep2TitleValidationError:"Oops, we've found some errors.",competitionSubmissionWizardStep2TitleValidationFinished:"Validation finished.",competitionSubmissionWizardStep2TitleValidationSuccessful:"Validation succeeded!",competitionSubmissionWizardStep2Validating:"Validating…",competitionSubmissionWizardStep2WarningOnlyPreamble:"We found some warnings. You may submit your entry without fixing them.",competitionSubmissionWizardStep2Warnings:"Warnings",competitionSubmissionWizardStep3Submitting:"Submitting…",competitionSubmissionWizardStep3TitleSubmissionFailed:"Unexpected error",competitionSubmissionWizardStep2TitleSubmissionSuccessful:"Submit the Entry",competitionSubmissionWizardStep3VisitGalleryLink:"View Competition in Gallery",competitionSubmissionWizardStep3VisitGalleryPreamble:"Please click on the checkmark to kick off the submission. This process might take a minute or two.",experimentGridHeaderSource:"Source",experimentSaveAsDialogHeader:"Create a copy of this experiment",authenticateNotebookSessionFailed:"Could not authenticate the Notebook session. {0}",createNotebookSessionFailed:"Could not create the Notebook session. {0}",contextMenuOpenInNotebook:"Open in a new Notebook",contextMenuNotebookPython2:"Python 2",contextMenuNotebookPython3:"Python 3",runResultNotebookNamePrefix:"Run result ",notebookNameSuffixBasedOnLanguage:" {0} notebook",copyExperimentFromGalleryGeoRegions:"REGION:",copyExperimentFromGalleryGeoWorkspaces:"WORKSPACE:",competitionSubmissionErrorExperimentMissingTrainedModel:"The experiment linked to the staging web service does not have trained model.",competitionSubmissionErrorWebServiceInputPortNotFound:"The staging web service does not have input port.",competitionSubmissionErrorWebServiceNotFound:"The staging web service cannot be found.",competitionSubmissionErrorWebServiceOutputPortNotFound:"The staging web service does not have output port.",projectExperimentNavigationError:"Unable to open experiment",competitionSubmissionErrorNotificationDetailsFormat:"Competition entry submission failed with error: {0}",competitionSubmissionErrorNotificationTitle:"Competition entry submission failed.",competitionSubmissionRetryMessage:"click here",competitionSubmissionErrorMessage1:"Oops! We ran into an unexpected error. Please",competitionSubmissionErrorMessage2:"to re-submit or try again later.",notebookNameIllegalCharacterError:"A notebook name can't contain any of following characters: {0}",CarouselNext:"Next",CarouselPrevious:"Previous",landingPageCarouselSlide1Caption:"Quick Tour of ML Studio (classic)",landingPageCarouselSlide2Caption:"Jupyter Notebook",landingPageCarouselSlide3Caption:"Try it today!",landingPageCarouselSlideCaptionRetirement:"ML Studio (classic) retirement",landingPageCarouselSlideCaptionTryAMLDesigner:"Try Azure Machine Learning designer",landingPageHeroCaption:"Featured",binaryClassificationNegativeLabel:"Negative Label",binaryClassificationPositiveLabel:"Positive Label",notebookErrorNameConflict:"A notebook with the same name already exists.",notebookErrorNotFound:"The notebook could not be found.",mlnotebookText:"Jupyter",notebookPlusNewBlankExperiment:"Blank Notebook",notebookPlusNewExampleDescription:"Start here for an intro to Jupyter notebooks",regressionError:"Error",regressionErrorHistogramHeader:"Error Histogram",regressionErrorNoHistogramErrorMessage:"Error: either dataset is empty, or all label/score column values are missing",regressionMetricCoefficientOfDetermination:"Coefficient of Determination",regressionMetricMeanAbsoluteError:"Mean Absolute Error",regressionMetricRelativeAbsoluteError:"Relative Absolute Error",regressionMetricRelativeSquaredError:"Relative Squared Error",regressionMetricRootMeanSquaredError:"Root Mean Squared Error",UnhandledExceptionGiveFeedback:"Give feedback",UnhandledExceptionPlaceholder:"Tell us what you were doing when you got this error.",UnhandledExceptionRefreshLink:"refresh your browser",UnhandledExceptionRefreshPrompt:"Please {0} and try again.",UnhandledExceptionStatement:"We've collected the error info and are working on getting this fixed.",UnhandledExceptionTitle:"Sorry, the Studio ran into a problem.",moduleErrorChatLink:"Live chat with us!",moduleErrorChatPrompt:"Need more help? ",moduleErrorEndTime:"End time: ",moduleErrorForumLink:"go to the forum for additional help.",moduleErrorForumPrompt:"If this problem persists, ",moduleErrorHideDetails:"HIDE DETAILS",moduleErrorShowDetails:"SHOW DETAILS",moduleErrorStartTime:"Start time: ",errorForumLink:"//social.msdn.microsoft.com/forums/azure/en-US/home?forum=MachineLearning",columnPickerByName:"by name",columnPickerByNameDisabledError:"Name-based column selection will be enabled after running the experiment.",columnPickerColumnsAlreadySelectedError:'Columns have already been selected "by rule". Delete everything but "Include column names" rules to enable the "by name" column selector.',columnPickerColumnsAvailable:"{0} columns available",columnPickerColumnsAvailableShowing:"{0} columns available (showing {1})",columnPickerColumnsSelected:"{0} columns selected",columnPickerColumnsSelectedShowing:"{0} columns selected (showing {1})",columnPickerSearchColumns:"search columns",columnPickerTooLargeDatasetError:"Selecting columns by name is disabled for datasets with more than {0} columns",columnPickerWithRules:"with rules",primaryAuthToken:"Primary Authorization Token",regenerateAuthToken:"Regenerate",secondaryAuthToken:"Secondary Authorization Token",backToExperiment:"Back to Experiment",dataset:"Dataset",deleteCredentials:"Delete Credentials",deleteDataImports:"Delete Data Imports",discard2:"Discard",inviteMoreUsers:"Invite more users",launchColumnSelector:"Launch column selector",learnMore:"Learn More.",rename:"Rename",zoomIn:"Zoom in (= key)",zoomOut:"Zoom out (- key)",zoomToActualSize:"Zoom to actual size (9 key)",zoomToFit:"Zoom to fit (0 key)",lastModified:"Last Modified",removeCredentialsConfirmation:"Remove {0} Credential(s)",removeDataImportsConfirmation:"Remove {0} Data Import(s)",colonInNamesSaveErrror:"Cannot save experiment draft with ':' in input/output names",cycleError:"This module is in a cycle.",emptyNameSaveError:"Cannot save experiment draft with empty name.",id:"Id",module:"Module",noModulesError:"This experiment contains no modules.",noModulesSaveError:"Cannot save experiment draft with no modules.",outputSavedAs:"Output saved as '{0}'.",savingIntermediateOutputFailed:"Saving intermediate output failed. ",state:"State",bins:"bins",frequency:"frequency",competitionSubmissionErrorMissingInput:"Web service doesn't have input.",competitionSubmissionErrorMissingOutput:"Web service doesn't have output.",competitionSubmissionErrorMultiInputPorts:"Competition only supports one input.",competitionSubmissionErrorMultiOutputPorts:"Competition only supports one output.",competitionSubmissionErrorWrongSchema:"Web service schema doesn't match expected schema.",competitionSubmissionErrorInvalidInputHeader:"Invalid input columns:",competitionSubmissionErrorInvalidOutputHeader:"Invalid output columns:",errorId:"Error {0}",navbarFeedbackFrownText:"Send a frown",navbarFeedbackSmileText:"Send a smile",navbarGuestTitle:"Guest",navbarMobileAccount:"Your account",navbarMobileChat:"Chat",navbarMobileFedbackHeader:"Submit Feedback",navbarMobileFeedback:"Feedback",navbarMobileForum:"Forums",navbarMobileHelp:"Help",navbarMobileHelpHeader:"Search Help Content",navbarHelpSearchNoResults:"No Results found.",navbarHelpSearchResultsLabel:"Search results for: ",competitionSubmissionNotificationSubmittingTitle:"Submitting to competition",competitionSubmissionNotificationSuccessTitle:"Competition entry is submitted",competitionSubmissionWizardTermAcceptanceStepAcceptTermsCheckboxLabel:"I agree to the above Terms and Conditions.",competitionSubmissionWizardTermAcceptanceStepTitle:"Terms and Conditions",loadMetadataFromGallery:"Load metadata from Gallery",experimentEditorPropertiesPaneScriptEditorPopOut:"Popout the script editor",scriptEditorHasChangesConfirmation:"You have made changes to the script, press OK to continue and discard the changes.",networkErrorNotification:"A network error has occurred. Please try again.",requestErrorNotification:"Error when requesting {0}",experimentProcessorErrorNoCompatibleScorerFound:"Couldn't find a compatible score module.",experimentProcessorErrorNoMatchingTrainedModel:"No matching trained model which is generated from training graph.",experimentProcessorErrorNoOutputPortsNew:"The new trained model doesn't have any output ports.",experimentProcessorErrorNoOutputPortsOld:"The old trained model doesn't have any output ports.",experimentProcessorErrorOutputNotConnected:"The output of the old trained model is not connected.",competitionSubmissionErrorExtraColumns:"Extra Columns:",competitionSubmissionErrorMissingColumns:"Missing Columns:",competitionSubmissionErrorMistypedColumns:"Column '{0}' shoud have type {1}, not {2}.",workSchoolOrMicrosoftAccount:"Work or School account, or a Microsoft account",publishExperimentToCommunityConsentCustomModulesLabel:"Custom Modules in this experiment will also be published.",publishExperimentToCommunityCustomModulesPresentWarningLabel:"This experiment contains one or more custom modules. They will be published along with the experiment.",ErrorExperimentNotFound:'Experiment with ID "{0}" not found.',ErrorNamedExperimentNotFound:'Experiment "{0}" not found.',competitionSubmissionWizardStep2Error:"Error",competitionSubmissionWizardStep2TitleError:"Oops, we've encountered an error.",competitionSubmissionWizardStep2Warning:"Warning",publishNotebookDescriptionPlaceholder:"Enter a detailed description of your notebook",publishNotebookNameInputLabel:"Notebook Name",publishNotebookSummaryPlaceholder:"Enter a few lines summarizing the goal of the notebook",publishNotebookVisibilityPublicExplanation:"Anyone can view and copy the notebook. Once public, it cannot be unlisted.",publishNotebookVisibilityUnlistedExplanation:"Only people with the direct link can view and copy the notebook.",publishLoadImageFromGallery:"Load image from Gallery",galleryIncludeDataset:"Include Dataset",galleryNotebookOptions:"Notebook Options",publishNotebookErrorTitle:"An error occurred when publishing the notebook.",notebookPublishCompletedDescription:"Visit the Gallery to view comments, edit details, and share your notebook.",notebookPublishCompletedEmailText:"Check out my machine learning notebook on {0}",notebookPublishCompletedEmailTitle:"Check out my notebook",notebookPublishCompletedHeader:"Your notebook has been published",notebookPublishCompletedLinkLabel:"Link to Published Notebook",publishNotebookDescriptionTitle:"Notebook Description",newNotebookMenuSearchPlaceholder:"Search notebooks",HomePageCompetitionCallToAction:"Learn More",HomePageCompetitionText:"Competitions",HomePageIntroduceText:"Introducing",HomePageWebinarCalendarCallToAction:"More",landingPageCarouselSlide4Caption:"Azure ML Competitions",welcomeInfoSEAsiaBlog:"Azure ML goes to Southeast Asia",competitionReleaseBlogEntry:"New Azure ML Competitions",welcomeInfoWesternEuropeBlog:"Azure ML goes to Western Europe",uploadModuleDialogExamplePy:"Download example Python module",uploadModuleDialogExamplePyLink:"//go.microsoft.com/fwlink/?LinkId=624437",uploadModuleDialogExampleRLink:"//go.microsoft.com/fwlink/?LinkId=524916",uploadModuleDialogSupportedLanguagePy:"Python",uploadModuleDialogSupportedLanguageR:"R",uploadModuleDialogSupportedLanguagesConjunction:"or",schemaGenerationError:"Unable to generate schema and visualization.",VisualizeDisabledTooltip:"You must run this experiment to enable Visualize",JsonDeserializationErrorFlag:"Failed to deserialize an API response as JSON",responseErrorNotification:"Failed to process a network response",treeEnsembleTreesConstructed:"trees constructed",DraftState_SaveFailed:"Draft save failed",treeEnsembleEdges:"Edges",treeEnsembleExpand:"expand",treeEnsembleFalse:"false",treeEnsembleGainPValue:"gain p-value",treeEnsemblePredicate:"predicate",treeEnsemblePrediction:"prediction",treeEnsembleShowMore:"Show more",treeEnsembleSplitGain:"split gain",treeEnsembleStatistics:"Statistics",treeEnsembleTrue:"true",notebookPlusNewBlankRNotebookLabel:"R",newNotebookMenuOpenNotebook:"OPEN NOTEBOOK",contextMenuNotebookR:"R",competitionSubmissionErrorCompetitionEnded:"Competition is already closed.",competitionSubmissionErrorCompetitionNotStarted:"Competition has not started yet.",competitionSubmissionErrorExceededDailySubmissionLimit:"You cannot submit more than {0} time(s) each day. You can submit again at {1}.",competitionSubmissionErrorExceededTotalSubmissionLimit:"You have reached the total limit of {0} submission(s) allowed for this competition.",competitionSubmissionErrorInCoolDownPeriod:"There is a cool-down period after each submission. You may submit again at {0}.",competitionSubmissionErrorInvalidSchema:"Invalid web service input/output schema.",competitionSubmissionErrorTimeout:"Operation timed out. Please try again.",competitionSubmissionErrorUnknown:"Unknown error.",copyNotebookFromGalleryConfirmationTitle:"Copy notebook from Gallery",newNotebookMenuOpenCallFailed:'Call to open notebook "{0}" failed.',predictiveExperimentNameSuffix:" [Predictive Exp.]",dataGatewayFailedGetEnterCredsURL:"Unable to start username and password entry. Ensure the data gateway is registered and online.",bubbleNextButtonTextNew:"Show Me",miniMapTitle:"Mini Map",bubbleFinishedButtonTextNew:"Finished",animatedExperimentDontShowAgain:"Don't show me this again",animatedExperimentStep0Content:"Let’s build a machine learning experiment to predict income level based on demographic information.",animatedExperimentStep0Title:"Build an experiment in 5 short steps",animatedExperimentStep1Content:"This sample dataset contains census and income information of about 32,000 individuals.",animatedExperimentStep1Title:"Add a dataset from samples",animatedExperimentStep2Content:"Let’s randomly split the dataset into training set (70%) and test set (30%).",animatedExperimentStep2Title:"Split dataset",animatedExperimentStep3Content:"Let’s choose Two-class Boosted Decision Tree algorithm and train it with the training dataset.",animatedExperimentStep3Title:"Select an ML algorithm",animatedExperimentStep4Content:"Let’s use the trained model to predict on the test dataset.",animatedExperimentStep4Title:"Make predictions",animatedExperimentStep5Content:"Now we are ready to run the experiment to get our predictions. This can take a minute or two.",animatedExperimentStep5Title:"Run the experiment",animatedExperimentAlternateStep6Content:"You have successfully built a machine learning model to predict income level based on demographic information.<p></p><a href='//go.microsoft.com/fwlink/?LinkId=524824' target='_blank'>•See more examples</a><p></p></div>",animatedExperimentAlternateStep6Title:"Congratulations, you did it!",projectsExtensionTitle:"Projects",projectQuickCreateLabelDescription:"Description",projectQuickCreateLabelName:"Name",projectsPlusNewDescription:"Create a new project.",projectsPlusNewTitle:"Project",projectQuickCreateDescriptionPlaceHolder:"Enter the project description here…",projectQuickCreateNamePlaceHolder:"New project name",EditProfileLinkText:"My Profile",animatedExperimentAlternateStep0Content:"In just short 5 steps, let’s build a machine learning experiment to predict income level based on demographic information",animatedExperimentAlternateStep0Title:"Would you like a tour of ML Studio (classic)?",editCommand:"Edit",ProjectDisplayName:"Project",showHideMiniMap:"Show/Hide mini map (m key)",projectQuickCreateFailedNotificationTitle:"Project creation failed. Please retry.",projectConfigDialogInitializationErrorTitle:"Failed to retrieve project collection details. Please retry…",projectConfigDialogUpdateConfigErrorTitle:"Failed to update project collection. Please retry…",notebookLanguageR:"R",commandsRunSelected:"Run selected",AddToProjectCommand:"Add To Project",addProjectDialogError:"Unable to start Add Project dialog.",addProjectDialogFailedToAdd:"Adding asset to project {0} failed",addProjectDialogTitle:"Add to project",projectAssetDisplayNameAllTypes:"All Types",projectAssetDisplayNameDatasets:"Datasets",projectAssetDisplayNameExperiments:"Experiments",projectAssetDisplayNameModules:"Modules",projectAssetDisplayNameNotebooks:"Notebooks",projectAssetDisplayNameTrainedModels:"Trained Models",projectAssetDisplayNameWebServices:"Web Services",projectConfigAllAssetsLabel:"All Assets",projectConfigDescriptionLabel:"Description",projectConfigDialogTitle:"Change Project Configuration",projectConfigNameLabel:"Name",projectConfigProjectAssetsLabel:"Project Assets",projectConfigSearchAssets:"Search Assets",projectDetailAssetModified:"Last Modified",projectDetailAssetOwner:"Owner",projectDetailDatasetExpanderTitle:"Datasets",projectDetailDescriptionLabel:"Description",projectDetailExperimentExpanderTitle:"Experiments",projectDetailNoneEntryText:"Empty",projectDetailNotebookExpanderTitle:"Notebooks",projectDetailPropertiesLabel:"Properties",projectDetailTrainedModelExpanderTitle:"Trained Models",projectDetailTransformExpanderTitle:"Transforms",projectDetailWebServiceExpanderTitle:"Web Services",projectQuickCreateEmptyProjectTitle:"Empty Project",projectAssetDisplayNameTransforms:"Transforms",projectConfigAssetsSelectionSummaryPlural:"{0} items selected",projectConfigAssetsSelectionSummarySingular:"{0} item selected",projectDetailAssetLanguage:"Language",projectDetailAssetStatus:"Status",projectDetailModuleExpanderTitle:"Modules",projectQuickCreateDialogTitle:"New Project",projectListHeaderAuthor:"Author",projectListHeaderContents:"Contents",projectListHeaderLastUsed:"Last Used",projectListHeaderName:"Name",projectListNoContentPlaceholder:"Empty",addProjectResourcesNewProject:"New Project…",addProjectResourcesProjectNamePrompt:"Project Name",addProjectResourcesSearch:" search projects",projectTitleInOtherGrids:"Project",noProjectsInGridItem:"None",projectNumberText:"{0} Projects",animatedExperimentWebServiceStep0Content:"You have successfully built a machine learning model to predict income level based on demographic information. Now let’s learn about operationalizing this model by publishing it as a web service API.",animatedExperimentWebServiceStep1Content:"The trained model “Income Predication” is created for you. Also the web service input/output modules indicate the data flow of Web Service API you are about to generate.",animatedExperimentWebServiceStep1Title:"Predictive experiment created",animatedExperimentWebServiceStep2Content:"Let’s help system to infer web service input schema by excluding the “Income” label column.",animatedExperimentWebServiceStep2Title:"Infer the web service input schema",animatedExperimentWebServiceStep3Content:"Let’s help the system to infer web service output schema by only including the scored labels and the scored probabilities. After that we will run the predictive experiment.",animatedExperimentWebServiceStep3Title:"Infer the web service output schema",confirmDeleteSelectedProject:"Are you sure you want to delete the selected project?",deletingProject:"Deleting trained model…",projectDeleted:"Project deleted",addToProjectCompleteMessage:"Added {0} to project {1}.",addToProjectPluralItem:"{0} items",addToProjectProgressMessage:"Adding {0} to project {1}.",addToProjectSingleItem:"1 item",propertyPaneProjectTabCaption:"Project",projectNameError:"Project name must contain at least one non-whitespace character",projectNameLengthError:"Project name can contain at most {0} characters",animatedExperimentWebServiceStep4Content:"We can now deploy the predictive experiment as a web service.",animatedExperimentWebServiceStep4Title:"Deploy web service",animatedExperimentWebServiceStep5Content:"You have successfully created a web service API to predict income level based on demographic information. You can hook it up to your mobile/web/desktop app now. \r\n<p></p><a href='//go.microsoft.com/fwlink/?LinkId=524824' target='_blank'>•See more examples</a><p></p></div>",animatedExperimentWebServiceStep5Title:"Congratulations, you did it!",animatedExperimentWebServiceStep0Title:"Congratulations, you did it!",addAssetProjectContainsTooltip:"All selected assets are already included in this project",SchemaErrorDuplicateColumnNames:"Duplicate column names given for renaming",SchemaErrorNewColumnsCountMismatch:"Number of new column names must match number of selected columns",WebServiceGroupDashboardViewLoadFailure:"{0} was unable to open the web service's dashboard. Please refresh the page and try again.",WebServiceGroupListViewLoadFailure:"{0} was unable to retrieve the list of web services. Please refresh the page and try again.",WorkspaceSettingsLoadFailure:"{0} was unable to load your settings. Please refresh the page and try again.",projectConfigDisabledAddTooltip:"Cannot add first class assets to more than one project",workspaceEncryptionKeyLabel:"Encryption Key",workspaceEncryptionLearnMoreLink:"//go.microsoft.com/fwlink/?LinkID=715515",workspaceNotEncrypted:"Not Encrypted",projectDescriptionAddAssetsLink:"Add assets",projectListCreateProjectLink:"Create project",ColumnPickerAvailableColumns:"Available Columns",ColumnPickerSelectedColumns:"Selected Columns",columnPickerByNameDisallowDuplicates:"Disable the option '{0}' to enable column selection by name.",addToProjectLink:"Add to project",addToProjectLinkDisabled:"Experiment must be saved before it can be added to a project",renameTrainedModelLabel:"Trained Model Name",renameTrainedModelTitle:"Rename Trained Model",assetErrorNameConflict:"A {0} with the same name already exists.",assetErrorNotFound:"The {0} could not be found.",assetNameBeingUploadedErrorMessage:"A {0} with this name is being uploaded.",assetNameEmptyErrorMessage:"A {0} name must be provided.",assetNameExistsErrorMessgage:"A {0} with this name already exists.",assetNameInvalidCharactersErrorMessage:"The {0} name contains invalid characters. The following characters are not allowed: / \\\\ ? : #",assetNameLengthErrorMessage:"The {0} name may contain at most {1} characters.",assetServiceUnavailable:"{0} service is currently unavailable.",datasetType:"dataset",experimentType:"experiment",moduleType:"module",notebookType:"notebook",renameDatasetFailed:"Renaming dataset failed. {0}",renameDatasetLabel:"Dataset Name",renameDatasetTitle:"Rename Dataset",renameModuleFailed:"Renaming module failed. {0}",renameModuleLabel:"Module Name",renameModuleTitle:"Rename Module",renameTrainedModelFailed:"Renaming trained model failed. {0}",annotationEditPlaceholder:"Type your comment here",renameTransformFailed:"Renaming transform failed. {0}",renameTransformLabel:"Transform Name",renameTransformTitle:"Rename Transform",trainedModelType:"trained model",transformType:"transform",annotationCouldNotBeAdded:"An error occured trying to add a new annotation.",annotationCannotUpdateAlreadyUpdated:"Your annotation changes cannot be saved because they have been updated in another session. Please re-open to see the latest version.",annotationCouldNotBeUpdated:"An annotation could not be saved.",someAnnotationsCouldNotBeDeleted:"Some annotations could not be removed.",annotationsCouldNotBeLoaded:"An error occured while loading experiment annotations.",annotationsCouldNotBeAddedOnSaveAs:"An error occured while saving annotations to this experiment. You can refresh and copy them into this experiment.",ChooseANotebookLanguageAndEllipsis:"Select a notebook language...",uploadNotebookDialogDataToUpload:"Select the data to upload:",uploadNotebookDialogEnterName:"Enter a name for the new notebook:",uploadNotebookDialogSelectLanguage:"Select a language for the new notebook:",uploadNotebookDialogUploadANewNotebook:"Upload a new notebook",navigatingAwayWhileUploadingWarning:"Navigating away will cancel any existing uploads.",uploadingNewNotebook:"Uploading a new notebook '{0}' ...",uploadingNotebookCompleted:"Upload of the notebook '{0}' has completed.",uploadingNotebookFailed:"Notebook upload failed.",notebookUploadFailed409:'The notebook upload failed. A notebook with the same name, "{0}", already exists. Please try uploading again using a different name.',resourceNameContainsInvalidCharacters:"The {0} name contains invalid characters. The following characters are not allowed: {1}",goToCompetitionSubmissionText:"View competition submission in gallery",uploadingFailedDuplicateName:'The dataset upload failed. A dataset with the same name, "{0}", already exists. Please try uploading again using a different name.',confirmDeleteCompetitionWebServiceGroup:"If you have submitted this web service as a competition entry, deleting it will render your entry invalid. Do you really want to delete it?",notebookUploadSelectLanguage:"Select a language for the new {0}.",datasetUploadSelectDatasetToDeprecate:"Select {0} to deprecate.",datasetUploadSelectDataType:"Select a data type for the new {0}.",newExperimentMenuUploadNotebook:"Upload",newExperimentMenuUploadNotebookTooltip:"Upload a new Jupyter notebook from a local file.",ViewWorkspacePartialRefreshFailure:'The Studio failed to load. Please <a id="view-workspace-refresh-retry" href="#">refresh</a> this page.',userSettingsErrorLoading:"Couldn't load user settings.",userSettingsErrorSaving:"Couldn't save the settings changes.",userSettingsReceiveEmails:"Receive emails from AzureML team",userSettingsShowTour:"Show AzureML tour dialog at login",userSettingsInfo:"Here are the settings we have stored for you:",userSettings:"User Settings",signInHere:"Sign in here",signInSmallPrompt:"Already an Azure ML User?",lineageExperimentStatusPartialRun:" (Partial run)",localStorageNotAvailableError:"Local storage is not available",webServiceInputNodeName:"Web service input",webServiceOutputNodeName:"Web service output",webServiceInputNodeInPaletteName:"Input",webServiceOutputNodeInPaletteName:"Output",webServiceInputNodeInPaletteDescription:"Web service input port.",webServiceOutputNodeInPaletteDescription:"Web service output port.",onPremiseNotAvailable:'Accessing your on-premises database feature is not available for "Free" tier. Upgrade to "Standard" tier to access data from on-premises.',clickOnceWarningChrome:"This browser doesn’t support click once apps without a plug-in. Download and install {0} for this to work or use Microsoft Edge browser instead.",clickOnceWarningNotSupported:"This browser doesn't support click once apps. Use Microsoft Edge browser.",clickOnceChromePlugIn:"Chrome Plug-In",errorCannotCopyEncryptedExperimentToOthersWorkspaces:"Cannot copy an encrypted experiment to other workspaces",errorCannotPublishEncryptedExperimentToGallery:"Cannot publish an encrypted experiment to the Gallery",workspaceSelectorRestrictOneRegionForCompetitionWarning:"I understand Competition submissions can only be made from a {0} workspace.",readMore:"Read more",copyCompetitionExperimentFromGalleryConfirmationTitle:"Copy Starter Experiment",welcomeBannerButton:"Let's proceed",welcomeBannerSubtitle:"Stay connected to the latest news from Cortana Intelligence Suite",welcomeBannerTitle:"Welcome to Machine Learning Studio (classic)",welcomeBannerEmails:"Sign me up for Azure Machine Learning email updates.",competitionSubmissionErrorFailedToConnectToService:"Failed to contact the Competition Service. Please try again later.",animatedTourFailed:"The tour encountered an error and cannot proceed. Please refresh the page and try again.",notAnAzureMlUser:"Not an ML Studio (classic) user?",signUpHere:"Sign up here",welcomeCountryLabel:"Country/region :",welcomeCountryTooltip:"Your country or territory of residence",ok:"Ok",projectDeleteTooltip:"Only empty projects can be deleted",webserviceListwebserviceInArm:"If you don't see your web service, try here",validationMaxScriptLengthExceeded:"Script exceeds maximum length of {0} characters.",scriptVersionChangeWarning:'You are changing the {0} Runtime Version to "{1}" - this will change the {0} Runtime Version for all modules in this experiment.',SynchronizeScriptVersionDialogHeader:"Script Runtime Version Change",SynchronizeScriptVersionDialogLabel:"This experiment contains modules which contains different versions of the {0} runtime{1}, but all modules need to use the same version.",SynchronizeScriptVersionDialogPythonLabel:"Please select the Python runtime version",SynchronizeScriptVersionDialogRLabel:"Please select the R runtime version",scriptVersionParameterDisabledTooltip:"Changing the runtime version is not permitted for experiments which contain {0} modules.",customModuleAddedWarningDialogHeader:"Confirm Runtime Version Change",customModuleAddedWarningDialogSingleVersionLabel:"You are adding a {0} module to an experiment which contains {1} modules - this will change the {1} runtime versions to {2} for all modules in the experiment.",ScriptVersionChangeDialogHeader:"Confirm Runtime Version Change",charactersOverLimit:"character(s) over limit",competitionSubmissionInformationDailyLimit:"You have made a total of {0} daily submission(s) out of a possible {1}.",competitionSubmissionInformationTotalLimit:"You have made a total of {0} submission(s) out of a possible {1}.",competitionSubmissionInformationDailyCouldNotLoad:"Could not load information about daily submissions.",competitionSubmissionInformationTotalCouldNotLoad:"Could not load information about total submissions.",dagSearchBoxPlaceholder:"Search in experiment",fraction:"{0} of {1}",searchCanvas:"Search Canvas (Shift+Ctrl+f keys)",publishWebServiceSubCommandTitle:"Deploy Web Service [Classic]",dataConnectConfigureConnection:"Connect to {0}",dataConnectConfigureDetails:"Configure {0}",dataConnectSelectSource:"Choose data source",publishCustomModuleContextMenu:"Publish to Gallery",publishCustomModuleToGalleryWizardTitle:"Publish to Gallery",launchImportDataWizardButton:"Launch Import Data Wizard",customModuleDescriptionLabel:"Short Description",customModuleInputPortsLabel:"Input Ports",customModuleNameLabel:"Module Name",customModuleOutputPortsLabel:"Output Ports",customModuleParametersLabel:"Parameters",publishCustomModuleToCommunityWizardTitle:"New custom module",consentToPublishSampleExperiment:"I agree to publish the accompanying sample experiment to Gallery.",newModuleMenuOpenModule:"IMPORT MODULE",plusNewMenuUploadModule:"Upload",plusNewMenuUploadModuleTooltip:"Upload a custom module zip package",newModuleMenuSearchPlaceholder:"Search custom modules",galleryModuleImportFailed:'Failed to open module "{0}". Please try again later.',galleryModuleImportingInProgress:'Importing module "{0}" from Gallery...',galleryModuleImportSucceeded:'Import completed. The module "{0}" can be found under the Custom section in the module palette.',copyModuleFromGalleryConfirmationTitle:"Copy module and sample experiment from Gallery",copyGalleryModuleFailed:'Failed to open the Gallery module and its sample experiment from "{0}". Please try again later.',publishModuleToCommunityPublishedModuleHeader:"Your module has been published",publishModuleToCommunityPublishedModuleLinkLabel:"Link To Published Module",publishModuleToCommunityPublishedModuleVisitGalleryLabel:"Visit the Gallery to view comments, edit details, and share your module.",publishCustomModuleSubCommand:"Publish Custom Module",publishExperimentSubCommand:"Publish Experiment",cannotCreateNotebooksInNonOwnerWorkspace:"You need to be an Owner of the current workspace in order to create notebooks.",notWorkspaceOwnerNoNotebooks:"You need to be an Owner of the current workspace in order to access Notebooks.",publishCustomModuleToCommunityErrorTitle:"An error occurred when publishing the custom module.",customModuleNameExistsErrorTitle:'A custom module with the name "{0}" already exists in Gallery.',publishCustomModuleToCommunityDescriptionPlaceholder:"Enter a detailed description of your module",publishCustomModuleToCommunitySummaryPlaceholder:"Enter a few lines summarizing the goal of the module",mustBeWorkspaceOwner:"You must be an Owner of the selected workspace.",workspaceSelectorBodyText:"Please specify the Region and Workspace you would like to use to open the notebook you have selected from the Gallery.",workspaceSelectorReturnToGallery:"Return to Gallery",workspaceSelectorNotebookError:"Error Opening Notebook",workspaceSelectorErrorMessage:'Please try again. If the issue persists, please go to the <a href="https://social.msdn.microsoft.com/Forums/azure/en-US/home?forum=MachineLearning">Azure Machine Learning forum</a> for assistance.',testConnectionDatabaseOpenFailed:"Could not open database {0}",testConnectionError:"Connection attempt failed.",testConnectionInvalidAzureAccountOrKey:"Invalid key or account name {0}",testConnectionInvalidSasUri:"Invalid SAS URI",testConnectionSucceeded:"Test connection succeeded.",testConnectionUnsupportedBlobType:"Blob exists but Append blobs are unsupported ",errorCannotPublishEncryptedCustomModuleToGallery:"Cannot publish to the Gallery from an encrypted workspace",uploadNotebookMenuDetails:"Upload a new notebook from a local file",webServiceManageEndpointsLinkBelize:"Manage endpoints",duplicateModuleName:"Duplicate name.",moduleNameConflictLabel:"Module: ",moduleNameConflictsText:"These modules already exist in your palette. Please rename your modules.",moduleNameConflictsTitle:"{0} Module Name Conflicts Found",moduleNameConflictText:"This module already exists in your palette. Please rename your module.",moduleNameConflictTitle:"Module Name Conflict Found",testConnectionInvalidTableName:"Test connection failed. Table name is invalid.",testConnectionInvalidTableKey:"Test connection failed. Key is invalid for the specified table.",dataIngestionPrimaryKey:"Primary Key: ",dataIngestionSecondaryKey:"Secondary Key: ",importDataWizardConnectionSubheader:"SOURCES",publishCustomModuleDisabledTooltip:"Experiment must be run before publishing custom module.",publishCustomModuleUnselectedError:"Select one custom module to publish it to Gallery.",publishCustomModuleReadOnlyError:"Cannot publish a custom module to Gallery in read-only mode.",publishCustomModuleUnfinishedError:"Experiment must be run before publishing a custom module to Gallery.",publishExperimentReadOnlyError:"Cannot publish an experiment to Gallery in read-only mode.",publishExperimentUnfinishedError:"Experiment must be run before publishing to Gallery.",copyExperimentDialogEncryptedToUnencryptedDisallowed:"Cannot copy to an unencrypted workspace.",dataIngestionConfigurationCompleteBody:"You have finished configuring {0}.",dataIngestionConfigurationCompleteTitle:"Configuration completed",trialDialogExceededConcurrentRunLimit:"Free workspaces can only run one experiment at a time, so this experiment will wait in a queue until those ahead of it have completed. To remove this restriction, please sign up for an {0}, and then create a new {1}.",testConnectionIncorrectDatabase:"Test connection failed. Unable to access the database.",testConnectionIncorrectDatabaseTooltip:"Cannot access database {0}",testConnectionIncorrectServer:"Test connection failed. Unable to connect to the server.",testConnectionIncorrectServerTooltip:"Cannot connect to server {0}",testConnectionIncorrectUserOrPassword:"Test connection failed. Incorrect username or password.",testConnectionIncorrectUserOrPasswordTooltip:"Database cannot be accessed using suplied username/password.",testConnectionInvalidAccount:"Test connection failed. Account name is invalid.",testConnectionInvalidAccountTooltip:"Blob cannot be accessed.",testConnectionInvalidKey:"Test connection failed. Key is invalid for the specified account.",testConnectionInvalidKeyTooltip:"Account {0} cannot be accessed with account key",testConnectionInvalidPath:"Test connection failed. Path specified is invalid.",testConnectionInvalidPathTooltip:"Path cannot be accessed.",testConnectionInvalidTableNameTooltip:"Table {0} cannot be accessed.",publishExperimentToCommunityAuthorCompanyExplanationLabel:"This experiment will be published on behalf of your company.",publishExperimentToCommunityAuthorCompanyLabel:"Company",publishExperimentToCommunityAuthorLabel:"Author",publishExperimentToCommunityAuthorUserExplanationLabel:"This experiment will be published under your own name.",publishExperimentToCommunityAuthorUserLable:"User",publishNotebookToCommunityAuthorCompanyExplanationLabel:"This notebook will be published on behalf of your company.",publishNotebookToCommunityAuthorUserExplanationLabel:"This notebook will be published under your own name.",workspacePageNonEditableNameTooltip:"Azure workspace name cannot be changed",sharingPageWorkspacePermissionsTooltip:"To see who can access the Workspace, verify the Resource Group and underlying Workspace permissions in the Azure Portal.",publishToCommunityAgreeToWebsite:"I agree that publishing the experiment is subject to the ",publishToCommunityTermsOfUse:"Microsoft Azure Website Terms of Use.",publishToCommunityTermsOfUseLink:"https://aka.ms/Tubpos",workspaceDeleteWarning1:"Warning! This action cannot be undone.",workspaceDeleteConfirmationText:"Type DELETE and press ENTER to confirm.",workspaceDeleteFailed:"Delete workspace failed. Please refresh the page and try again. Error: {0}",workspaceDeleteSucceeded:"Your {0} workspace has been deleted.",workspaceDeleteDescription:"Permanently delete this workspace.",workspaceDeleteLabel:"Delete workspace",workspaceDeleteButtonText:"Delete",workspaceDeleteWarning2:" This will permanently delete workspace {0} and its contents.",retirementMessage:'Machine Learning Studio (classic) will retire on 31 August 2024. From now through 31 August 2024, you can continue to use the existing Machine Learning Studio (classic) experiments and web services. Beginning 1 December 2021, new creation of Machine Learning Studio (classic) resources will not be available. To avoid or minimize disruption to your Machine Learning Studio (classic) workloads, transition to Azure Machine Learning by following the <a href="{0}" target="_blank">migration steps</a> here before 31 Aug 2024.',retirementNotificationTitle:"Machine Learning Studio (classic) will retire on 31 August 2024 - transition to Azure Machine Learning",retirementNotificationContent1:"Because Azure Machine Learning now provides rich, consolidated capabilities for model training and deploying, we will retire the older Machine Learning Studio (classic) on <strong>31 August 2024</strong>. Please transition to using Azure Machine Learning by that date.",retirementNotificationContent2:"From now through 31 August 2024, you can continue to use the existing Machine Learning Studio (classic) experiments and web services. Beginning 1 December 2021, new creation of Machine Learning Studio (classic) resources will not be available.",retirementNotificationContent3:'Follow these <a href="{0}" target="_blank">steps</a> to transition to using Azure Machine Learning before 31 August 2024.'}}),window.templates=[{extensionName:"Experiments",templateName:"IntroVideo",src:"~/Extensions/DataLab/IntroVideo.html",content:'<div id="introText">\r\n    <h2>%introTitle%</h2>\r\n    <p>%introDescription%</p>\r\n</div>\r\n\r\n<video controls width="{{>width}}" height="{{>height}}">\r\n    <source src="{{>source1}}" />\r\n    <source src="{{>source2}}" />\r\n</video>\r\n\r\n<a href="#" style="display:{{>guidedTourLinkVisibility}}" class="fx-dialog-start-guided-tour" onclick="\r\n    Shell.Diagnostics.Telemetry.featureUsage(DataLabConstants.FeatureId.GuidedTourOpenFromIntroVideo, DataLabConstants.FeatureId.GuidedTour, Workspace.id);\r\n    ExperimentEditor.GuidedTour.launch();"\r\n>\r\n    %guidedTourGetStartedNow%\r\n</a> '},{extensionName:"Experiments",templateName:"Grid",src:"~/Extensions/DataLab/Grid.htm",content:'<div id="grid"></div>'},{extensionName:"Experiments",templateName:"ExperimentEditor",src:"~/Extensions/DataLab/ExperimentEditor.htm",content:'<div id="ExperimentEditor"></div>\r\n'},{extensionName:"Modules",templateName:"Grid",src:"~/Extensions/DataLab/Grid.htm",content:'<div id="grid"></div>'},{extensionName:"Datasets",templateName:"Grid",src:"~/Extensions/DataLab/Grid.htm",content:'<div id="grid"></div>'},{extensionName:"Datasets",templateName:"Search",src:"~/Extensions/DataLab/Search.htm",content:'<div class="searchTabContent" id="idSearchTemplate">\r\n\r\n    <div class="searchResultsAndPreview">\r\n        <vflexbox class="searchResultCollection">\r\n\r\n            <flexstatic class="searchBoxContainer">\r\n                <input type="button" class="searchButton" data-bind="click: search" />\r\n                <span class="searchTextContainer">\r\n                    <input type="text" class="searchTextBox" data-bind="value: searchQuery, valueUpdate: \'input\', event: { keypress: handleKeypress }, hasfocus: searchBoxFocus" />\r\n                </span>\r\n            </flexstatic>\r\n\r\n            <flexstatic class="searchResultsHeader" data-bind="css: { noResultsClass: searchResultCount() == 0 }">\r\n                <div class="searchResultInfo" data-bind="text: headerText">\r\n                </div>\r\n                <hr />\r\n            </flexstatic>\r\n            <flexstatic class="searchNoResults" data-bind="css: { noResultsClass: noResultsFound }">\r\n                No results\r\n            </flexstatic>\r\n            <flexfill class="searchResultsContainer">\r\n                <!-- ko foreach: searchResults -->\r\n                <img data-bind="attr: { src: iconUrl }, style: { visibility: iconVisible ? \'\' : \'hidden\' }" class="searchSourceIcon" />\r\n                <span class="singleResultContainer">\r\n                    <div class="searchResult" data-bind="click: $parent.selectItem.bind($parent),\r\n                            event: { mouseover: $parent.selectPreview.bind($parent) },\r\n                            css: { hoveredItem: hovered() }">\r\n                        <div class="searchResultTitle" data-bind="text: resultTitle"></div>\r\n                        <div class="searchResultDescription" data-bind="text: shortDescription"></div>\r\n                    </div>\r\n                </span>\r\n                <!-- /ko -->\r\n            </flexfill>\r\n            <flexstatic class="searchPageContainer">\r\n                <div style="float:right">\r\n                    <input type="button" class="searchPagesPrevious" data-bind="style: { visibility: previousEnabled() ? \'\' : \'hidden\' }, event: { click: prevPage }" />\r\n                    <!-- ko foreach: searchResultPages -->\r\n                    <span class="searchResultPage" data-bind="text: pageId, event: { click: $parent.switchPage.bind($parent) }, css: { selectedSearchPage: selected }"></span>\r\n                    <!-- /ko -->\r\n                    <input type="button" class="searchPagesNext" data-bind="style: { visibility: nextEnabled() ? \'\' : \'hidden\' }, event: { click: nextPage }" />\r\n                </div>\r\n            </flexstatic>\r\n        </vflexbox>\r\n        <vflexbox class="searchPreview">\r\n            <flexstatic class="searchResultTitle" data-bind="text: previewTitle"></flexstatic>\r\n            <flexstatic class="searchResultDescription" data-bind="text: previewDescription"></flexstatic>\r\n            <flexfill class="iframeContainer">                \r\n                <iframe id="idsearchpreviewiframe" data-bind="attr: { src: datalabPreviewUrl }, event: { load: iframeLoad }"></iframe>                \r\n            </flexfill>\r\n        </vflexbox>\r\n    </div>\r\n</div>\r\n'},{extensionName:"TrainedModels",templateName:"Grid",src:"~/Extensions/DataLab/Grid.htm",content:'<div id="grid"></div>'},{extensionName:"Notebooks",templateName:"Grid",src:"~/Extensions/DataLab/Grid.htm",content:'<div id="grid"></div>'},{extensionName:"ExperimentV2",templateName:"Grid",src:"~/Extensions/DataLab/Grid.htm",content:'<div id="grid"></div>'},{extensionName:"ExperimentV2",templateName:"ExperimentEditor",src:"~/Extensions/DataLab/ExperimentEditor.htm",content:'<div id="ExperimentEditor"></div>\r\n'},{extensionName:"Dataflows",templateName:"Grid",src:"~/Extensions/DataLab/Grid.htm",content:'<div id="grid"></div>'},{extensionName:"Dataflows",templateName:"DataflowViewer",src:"~/Extensions/DataLab/ExperimentEditor.htm",content:'<div id="ExperimentEditor"></div>\r\n'},{extensionName:"WebServiceGroups",templateName:"Grid",src:"~/Extensions/DataLab/Grid.htm",content:'<div id="grid"></div>'},{extensionName:"WebServiceGroups",templateName:"DashboardTab",src:"~/Extensions/DataLab/WebServiceGroups/DashboardTabView.html",content:'<!-- Templates required for CompetitionURL -->\r\n<!-- TODO: Refactor this to avoid code duplication with PropertyEditorTemplate.html-->\r\n<script type="text/html" id="checkboxParameter">\r\n    <input type="checkbox"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="checkboxvalue: { value: property.value, choices: property.descriptor.choices },\r\n                      hasfocus: focus,\r\n                      disable: ($root.readOnlyMode() || isDisabled()),\r\n                      css: { disabled: ($root.readOnlyMode() || isDisabled()) },\r\n                      event: { focus: $root.onParameterFocus }" />\r\n</script>\r\n\r\n<script type="text/html" id="linkProperty">\r\n    <div class="propertyLink">\r\n        <a data-bind="attr: { title: property.tooltip, href: (property.endpoint && property.endpoint.Size === -1) ? false: property.value},\r\n                      hasfocus: focus,\r\n                      event: { focus: $root.onParameterFocus, click: onClick },\r\n                      text: property.label"\r\n           target="_blank">\r\n        </a>\r\n    </div>\r\n    <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)</div>\r\n</script>\r\n\r\n<script type="text/html" id="buttonProperty">\r\n    <div class="propertyEditor-staticValueCell">\r\n        <div class="datalab-gridCellTextArea">\r\n            <div class=" propertyeditor-statictextareaitem propertyeditor-headingcellwrapper"\r\n                 data-bind="css: { isButton: templateType() === \'buttonProperty\' }, visible: property.value() === false || property.value()">\r\n                <button data-bind="attr: { title: property.tooltip, name: property.label},\r\n                           hasfocus: focus,\r\n                           event: { focus: $root.onParameterFocus, click: onClick },\r\n                           text: property.label,\r\n                           disable: clickDisabled"></button>\r\n            </div>\r\n            <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)</div>\r\n        </div>\r\n    </div>\r\n</script>\r\n\r\n<script type="text/html" id="propertyKey">\r\n    <!-- ko if: isExperimentLevel() && !$root.readOnlyMode() -->\r\n    <div>\r\n        <input type="text"\r\n               class="datalab-gridCellPropertyItem"\r\n               data-bind="validatedInputBox: { value: property.validatableName },\r\n                              event: { blur: property.textboxBlur, keydown: property.textboxKeydown },\r\n                              visible: property.isEditingName" />\r\n        <div class="datalab-gridCellKey"\r\n             data-bind="attr: { title: property.tooltip },\r\n                    text: property.label,\r\n                    click: property.toggleEditingName,\r\n                    visible: !property.isEditingName()">\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: isExperimentLevel() && !$root.readOnlyMode() -->\r\n    <!-- ko if: templateType() === \'linkProperty\' -->\r\n    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'linkProperty\' }"></hflexbox>\r\n    <!-- /ko -->\r\n    <!-- ko if: templateType() === \'buttonProperty\' -->\r\n    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'buttonProperty\' }"></hflexbox>\r\n    <!-- /ko -->\r\n    <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->\r\n    <div class="datalab-gridCellKey" data-bind="attr: { title: property.tooltip }, text: property.label"></div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</script>\r\n\r\n<script type="text/html" id="propertyItem">\r\n    <div class="propertyEditor-textAreaItem">\r\n        <div class="propertyEditor-headingCellWrapper" data-bind="css: { propertyEditorHeadingCellWrapperEditingName: property.isEditingName, isLink: templateType() === \'linkProperty\' }">\r\n            <div class="propertyEditor-headingCell">\r\n                <div class="propertyEditor-sideButtonWrapper">\r\n                    <div class="parameterIsLinked linkStatus propertyEditorButton"\r\n                         data-bind="style: { visibility: property.isLinked() && !isExperimentLevel() ? \'visible\' : \'hidden\' },\r\n                                    event: { click: $root.focusLinkedWebServiceParameter },\r\n                                    attr: { title: Util.format(LocalizedResources.parameterIsLinkedToWebServiceParameter, linkedParameterName()) }">\r\n                    </div>\r\n                    <!-- ko if: !isExperimentLevel() && isLinkable -->\r\n                    <div class="propertyEditorButton dropMenu"\r\n                         data-bind="dropMenu: $root.menuBuilder">\r\n                    </div>\r\n                    <!-- /ko -->\r\n                    <!-- ko if: isExperimentLevel() && !$root.readOnlyMode() -->\r\n                    <div class="propertyEditorButton dropMenu"\r\n                         data-bind="dropMenu: $root.webServiceParameterMenuBuilder">\r\n                    </div>\r\n                    <!-- /ko -->\r\n                </div>\r\n\r\n                <!-- ko if: templateType() === \'checkboxParameter\' -->\r\n                <div data-bind="template: { name: \'checkboxParameter\' },\r\n                                visible: !isExperimentLevel() || property.hasDefaultValue()">\r\n                </div>\r\n                <!-- /ko -->\r\n                <div class="datalab-gridCellKeyWrapper"\r\n                     data-bind="template: { name: \'propertyKey\' }">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: templateType() !== \'checkboxParameter\' && templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->\r\n        <!-- ko if: !isExperimentLevel() || property.hasDefaultValue() -->\r\n        <div class="propertyEditor-valueCellWrapper">\r\n            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"></div>\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- /ko -->\r\n    </div>\r\n    <!-- ko foreach: childParameters -->\r\n    <!-- ko if: property.isRelevant() -->\r\n    <div data-bind="template: { name: \'propertyItem\' }"></div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</script>\r\n\r\n<script type="text/html" id="checkboxProperty">\r\n    <input type="checkbox"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="checked: property.value,\r\n                        hasfocus: focus,\r\n                        disable: $root.readOnlyMode(),\r\n                        css: { disabled: $root.readOnlyMode() },\r\n                        event: { focus: $root.onParameterFocus }" />\r\n    <div class="datalab-gridCellKeyWrapper"\r\n         data-bind="template: { name: \'propertyKey\' }">\r\n    </div>\r\n</script>\r\n\r\n<script type="text/html" id="staticPropertyItem">\r\n    <div class="propertyEditor-staticTextAreaItem propertyEditor-headingCellWrapper"\r\n         data-bind="css: { isLink: templateType() === \'linkProperty\', isButton: templateType() === \'buttonProperty\' }, style: { height: property.name === \'Status details\' ? \'100%\': \'22px\' }, visible: property.value() === false || property.value()">\r\n        <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'checkboxProperty\' && templateType() !== \'buttonProperty\' -->\r\n        <div class="propertyEditor-staticHeadingCell">\r\n            <div class="datalab-gridCellKeyWrapper"\r\n                 data-bind="template: { name: \'propertyKey\' }">\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n        <div class="propertyEditor-staticValueCell">\r\n            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"></div>\r\n        </div>\r\n    </div>\r\n</script>\r\n\r\n<div id="WebServiceGroupDashboardViewContent" style="display: none;">\r\n    <h2 data-bind="text: LocalizedResources.webServiceGroupDashboardGeneralLabel, css: {\'trybelize-side\':shouldShowBelizeLinks()}"></h2> <div class="trybelize trybelize-container trybelize-side" data-bind="visible: shouldShowBelizeLinks()"><a data-bind="text: LocalizedResources.webServiceGroupDashboardTryBelize, attr: {href: Features.belizeForSMV1Enabled() ? tryBelize(\'/endpoints/default\', {fromStudio: true}) : tryBelize(\'\', {fromStudio: true}), target: \'_blank\'}" class="trybelize-lnk"></a><span data-bind="text: LocalizedResources.preview" class="trybelize trybelize-preview"></span></div>\r\n    <div>\r\n        <h3 data-bind="text: LocalizedResources.webServiceGroupDashboardParentExperimentLable"></h3>\r\n        <div>\r\n            <a data-bind="text: LocalizedResources.webServiceGroupDashboardParentExperimentViewSnapshot, attr: { href: \'#Workspaces/Experiments/Experiment/\' + parentExperimentId() + \'/ViewExperiment\' }"></a>\r\n            <a data-bind="text: LocalizedResources.webServiceGroupDashboardParentExperimentViewLatest, attr: { href: \'#Workspaces/Experiments/Experiment/\' + parentExperimentLatestId + \'/ViewExperiment\' }" class="LinkToLatestExperiment"></a>\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <h3 data-bind="text: LocalizedResources.webServiceGroupDashboardDescriptionLabel"></h3>\r\n        <span data-bind="text: wsgDescription"></span>\r\n    </div>\r\n    <div id="relatedWebServiceSection" data-bind="visible: shouldShowRelatedWebService, if: shouldShowRelatedWebService">\r\n        <h3 data-bind="text: relatedWebServiceLabel"></h3>\r\n        <a data-bind="text: relatedWebServiceName, attr: { href: \'#Workspaces/WebServiceGroups/WebServiceGroup/\' + relatedWebServiceGroupId() + \'/dashboard\' }"></a>\r\n    </div>\r\n    <div id="competition-prop" style="display: none;">\r\n        <!-- Competition Section -->\r\n        <!-- ko if: window.Features.competitionExperimentSupportEnabled() && $root.isCompetition()-->\r\n        <h3>%CompetitionProperties%</h3>\r\n        <div class="webService-competitionProperties">\r\n            <div class="competition-steps">\r\n                <div class="competition-step isCompleted">%competitionStatusCreateStarterExperiment%</div>\r\n                <div class="competition-step" data-bind="css: { isCompleted: $root.isScoringExperimentCreated() }">%competitionStatusCreateScoringExperiment%</div>\r\n                <div class="competition-step isCompleted">%competitionStatusCreateWebService%</div>\r\n                <div class="competition-step" data-bind="css: { isCompleted: $root.isSubmittedToCompetition() }">%competitionStatusSubmitWebService%</div>\r\n            </div>\r\n            <!-- ko with: competitionUrl -->\r\n            <div class="textAreaProperty viewCompetitionLinkContainer" data-bind="template: { name: \'staticPropertyItem\' }"></div>\r\n            <!-- /ko -->\r\n        </div><br />\r\n        <span data-bind="text: submissionEntryInformationDaily"></span><br />\r\n        <span data-bind="text: submissionEntryInformationTotal"></span>\r\n        <!-- /ko -->\r\n        <!-- end of Competition Section -->\r\n    </div>\r\n\r\n    <div>\r\n        <h3 data-bind="text: LocalizedResources.webServiceGroupPrimaryApiKeyLabel"></h3>\r\n        <div id="WebServicePrimaryKey" class="WebServiceKeyBox"></div>\r\n    </div>\r\n    <h2 data-bind="text: LocalizedResources.webServiceStagingEnvironmentTitle"></h2>\r\n    <div id="webServiceGrid"></div>\r\n    <div data-bind="visible: shouldShowProductionElements">\r\n        <h2 data-bind="text: productionStatusSectionTitle"></h2>\r\n        <span data-bind="text: productionStatusDescription"></span><br />\r\n        <div class="trybelize-container trybelize-side" data-bind="visible: shouldShowBelizeAsEndpointManagment()"> <a data-bind="text: productionActionDescription, attr: { href: productionActionUrl }" target="_blank"></a> <span data-bind="text: LocalizedResources.preview" class="trybelize trybelize-preview"></span> </div> <a data-bind="text: productionActionDescription, attr: { href: productionActionUrl }, visible: !shouldShowBelizeAsEndpointManagment()" target="_blank"></a>\r\n    </div>\r\n</div>\r\n'},{extensionName:"WebServiceGroups",templateName:"ConfigurationTab",src:"~/Extensions/DataLab/WebServiceGroups/ConfigurationTabView.html",content:'<div id="WebServiceGroupViewContent" class="waz-config  config-container waz-config-help-header-section">\r\n    <h2 data-bind="text: LocalizedResources.modelPackageConfigSettings"></h2>\r\n    <div id="WebServiceGroupConfig" style="display: none;">        \r\n        <div class="waz-config-setting configGroup" style="display: block;">\r\n            <div class="waz-config-setting">\r\n                <label data-bind="text: LocalizedResources.modelPackageConfigGeneral"></label>\r\n                <div class="waz-control waz-config-setting-value waz-table">\r\n                    <table>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>\r\n                                    <input class="control" type="text" readonly="readonly" data-bind="value: LocalizedResources.modelPackageConfigDisplayName" /></td>\r\n                                <td>\r\n                                    <input id="DisplayNameValue" class="control" type="text" data-bind="value: configViewModel.name, valueUpdate: [\'input\', \'keyup\'], event: { input: configUpdated }" /></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>\r\n                                    <input class="control" type="text" readonly="readonly" data-bind="value: LocalizedResources.modelPackageConfigDescription" /></td>\r\n                                <td>\r\n                                    <textarea class="control" rows="5" cols="50" data-bind="value: configViewModel.description, valueUpdate: [\'input\', \'keyup\'], event: { input: configUpdated }" /></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class="waz-config-setting" data-bind="visible: shouldShowDiagnosticsButton">\r\n                <label data-bind="text: LocalizedResources.webServiceDiagnosticsMode"></label>                \r\n                <div class="waz-control waz-config-setting-value waz-table">\r\n                    <table>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td><div id="radioDiagnosticsMode" class="radio pushbutton"></div></td>\r\n                                <td><a data-bind="text: LocalizedResources.webServiceLearnMore, attr: { href: LocalizedResources.webServiceDiagnosticsLearnMoreUrl }" target="_blank"></a></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>                    \r\n                </div>\r\n            </div>\r\n            <div class="waz-config-setting" data-bind="visible: Features.allowAnonymousTest()">\r\n                <label data-bind="text: LocalizedResources.webServiceTestEnabled"></label>\r\n                <div class="waz-config-setting-value">\r\n                    <div id="radioAllowAnonymousTest" class="radio pushbutton"></div>\r\n                </div>\r\n            </div>\r\n        <div class="waz-config-setting" data-bind="visible: Features.agaveExcelClientEnableSampleData()">\r\n                <label data-bind="text: LocalizedResources.webServiceSampleDataEnabled"></label>\r\n                <div class="waz-config-setting-value">\r\n                    <div id="radioSampleDataEnabled" class="radio pushbutton"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="waz-config-setting configGroup" style="display: block;">\r\n            <div class="waz-config-setting">\r\n                <label data-bind="text: LocalizedResources.modelPackageConfigInputSchema"></label>\r\n                <div id="divInputSettings" class="waz-control waz-config-setting-value waz-table">\r\n                    <table>\r\n                        <tbody>\r\n                            <!-- ko foreach: configViewModel.inputs -->\r\n                            <tr>\r\n                                <td>\r\n                                    <input class="control" type="text" readonly="readonly" data-bind="value: columnDisplayName" /></td>\r\n                                <td>\r\n                                    <input class="control schemaValue" type="text" data-bind="value: columnFriendlyName, valueUpdate: [\'input\', \'keyup\'], event: { input: $parent.configUpdated }" /></td>\r\n                            </tr>\r\n                            <!-- /ko -->\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="waz-config-setting configGroup" style="display: block;">\r\n            <div class="waz-config-setting configGroup">\r\n                <label>%WebServiceOutputSchema%</label>\r\n                <div id="divOutputSettings" class="waz-control waz-config-setting-value waz-table">\r\n                    <table>\r\n                        <tbody>\r\n                            <!-- ko foreach: configViewModel.outputs-->\r\n                            <tr>\r\n                                <td>\r\n                                    <input class="control" type="text" readonly="readonly" data-bind="value: columnDisplayName" />\r\n                                </td>\r\n                                <td>\r\n                                    <input class="control schemaValue" type="text" data-bind="value: columnFriendlyName, valueUpdate: [\'input\', \'keyup\'], event: { input: $parent.configUpdated }" />\r\n                                </td>\r\n                            </tr>\r\n                            <!-- /ko -->\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="waz-config-setting" style="display: block;">\r\n            <div class="waz-config-setting configGroup">\r\n                <label>%WebServiceApiParameterSchema%</label>\r\n                <div id="divApiParameterSettings" class="waz-control waz-config-setting-value waz-table">\r\n                    <table>\r\n                        <tbody>\r\n                            <!-- ko foreach: configViewModel.globalParameters-->\r\n                            <tr>\r\n                                <td>\r\n                                    <input class="control" type="text" readonly="readonly" data-bind="value: displayName" />\r\n                                </td>\r\n                                <td>\r\n                                    <input class="control schemaValue" type="text" data-bind="value: description, valueUpdate: [\'input\', \'keyup\'], event: { input: $parent.configUpdated }" />\r\n                                </td>\r\n                            </tr>\r\n                            <!-- /ko -->\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},{extensionName:"WebServiceGroups",templateName:"TestsTab",src:"~/Extensions/DataLab/WebServiceGroups/TestsTabView.html",content:'<div id="WebServiceGroupViewContent">\r\n    <h2><!--%webServiceStagingEnvironmentTitle%-->Staging environment</h2>\r\n    <div id="DetailsList" data-bind="foreach: webServices">\r\n        <div>\r\n            <div><label for="UrlBox" data-bind="text: LocalizedResources.webServiceUrlTitle"></label></div>\r\n            <div><input id="UrlBox" type="text" readonly="readonly" data-bind="value: Url"/></div>\r\n        </div>\r\n        <div>\r\n            <div data-bind="text: LocalizedResources.webServiceTypeTitle"></div>\r\n            <div data-bind="text: Type"></div>\r\n        </div>\r\n        <div>\r\n            <div data-bind="text: LocalizedResources.webServiceGroupCreationTimeLabel"></div>\r\n            <div data-bind="text: CreationTime"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},{extensionName:"Settings",templateName:"NameTab",src:"~/Extensions/DataLab/Settings/Name.htm",content:'<script type="text/html" id="SpaceQuota">\r\n    <div class="waz-config-setting" data-bind="visible: data">\r\n        <label>%workspacePageWorkspaceStorage%</label>\r\n        <div class="waz-config-setting-value">\r\n            <div style="width: 400px; margin-bottom: 5px;" data-bind="usageBar: data"></div>\r\n            <div data-bind="html: note "></div>\r\n        </div>\r\n    </div>\r\n</script>\r\n\r\n<div id="Name" class="waz-config config-container waz-config-help-header" data-bind="if: workspaceSettings()">\r\n\r\n    <div class="waz-config-setting">\r\n        <label>%workspacePageWorkspaceName%</label>\r\n        <!-- ko if: allowEditingWorkspaceName() -->\r\n        <div class="waz-config-setting-value">\r\n            <input id="FriendlyName" type="text" maxlength="256" data-bind="validatedInputBox: { value: workspaceSettings().friendlyName }, event: { input: $root.settingsUpdated }, disable: isReadOnly" />\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- ko ifnot: allowEditingWorkspaceName() -->\r\n        <div class="waz-config-setting-value">\r\n            <span data-bind="text: workspaceSettings().friendlyName" title="%workspacePageNonEditableNameTooltip%"></span>\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n\r\n    <div class="waz-config-setting">\r\n        <label>%workspacePageWorkspaceDescription%</label>\r\n        <div class="waz-config-setting-value">\r\n            <textarea id="Description" maxlength="2048" data-bind="value: workspaceSettings().description, valueUpdate: [\'input\', \'keyup\'], event: { input: $root.settingsUpdated }, disable: isReadOnly" rows="5" cols="50" />\r\n        </div>\r\n    </div>\r\n\r\n    <div class="waz-config-setting" data-bind="visible: workspaceTypeText">\r\n        <label>%workspacePageWorkspaceType%</label>\r\n        <div class="waz-config-setting-value">\r\n            <span data-bind="text: workspaceTypeText"></span>\r\n            <a style="margin-left: 3em" href="%homeWelcomeLearnMoreLink%" target="_blank">%workspacePageLearnMore%</a>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- ko foreach: accountInfo -->\r\n    <div class="waz-config-setting">\r\n        <label data-bind="text: label"></label>\r\n        <div class="waz-config-setting-value">\r\n            <span data-bind="text: value"></span>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n\r\n    <!-- ko template: { name: "SpaceQuota", data: { data: spaceQuota, note: spaceQuotaNote } } --><!-- /ko -->\r\n    \r\n    <!-- ko if: showEncryptionInfo -->\r\n    <div class="waz-config-setting">\r\n        <label>%workspaceEncryptionKeyLabel%</label>\r\n        <div class="waz-config-setting-value">\r\n            <!-- ko if: workspaceSettings().keyVaultKeyIdentifier -->\r\n            <span data-bind="text: workspaceSettings().keyVaultKeyIdentifier"></span>\r\n            <!-- /ko -->\r\n            <!-- ko if: !workspaceSettings().keyVaultKeyIdentifier -->\r\n            <span>%workspaceNotEncrypted%</span>\r\n            <a style="margin-left: 3em" href="%workspaceEncryptionLearnMoreLink%" target="_blank">%workspacePageLearnMore%</a>\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko if: showWorkspaceDeleteButton -->\r\n    <div class="waz-config-setting delete-workspace">\r\n        <label>%workspaceDeleteLabel%</label>\r\n        <div class="waz-config-setting-value">\r\n            <p>%workspaceDeleteDescription%</p>\r\n            <p><span class="warning">%workspaceDeleteWarning1%</span><span data-bind="text: workspaceDeleteWarning2"></span></p>\r\n\r\n            <button class="delete-workspace" data-bind="click: confirmDeleteWorkspace">\r\n                %workspaceDeleteButtonText%\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n</div>\r\n'},{extensionName:"Settings",templateName:"AuthTokensTab",src:"~/Extensions/DataLab/Settings/AuthTokens.htm",content:'<div id="Dataflows" class="waz-config config-container waz-config-help-header" data-bind="if: workspaceSettings()">\r\n\r\n    <div class="waz-config-setting">\r\n        <label>%primaryAuthToken%</label>\r\n        <div class="waz-config-setting-value">\r\n            <input id="PrimaryAuthorizationToken" data-bind="value:workspaceSettings().authorizationToken.primary" type="text" readonly="readonly" />\r\n            <button type="button" id="RegeneratePrimaryToken" data-bind="click: regeneratePrimary">%regenerateAuthToken%</button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="waz-config-setting">\r\n        <label>%secondaryAuthToken%</label>\r\n        <div class="waz-config-setting-value">\r\n            <input id="SecondaryAuthorizationToken" data-bind="value:workspaceSettings().authorizationToken.secondary" type="text" readonly="readonly" />\r\n            <button type="button" id="RegenerateSecondaryToken" data-bind="click: regenerateSecondary">%regenerateAuthToken%</button>\r\n        </div>\r\n    </div>\r\n\r\n</div>'},{extensionName:"Settings",templateName:"ResourcesTab",src:"~/Extensions/DataLab/Settings/Resources.htm",content:'<div id="Resources" class="waz-config config-container waz-config-help-header" data-bind="if: workspaceSettings()">\r\n\r\n    <div class="waz-config-help-header-section first">\r\n        <h2>HDInsight Cluster Connection</h2>\r\n    </div>\r\n\r\n    <div class="waz-config-setting">\r\n        <label>User</label>\r\n        <div class="waz-config-setting-value">\r\n            <input id="HDInsightClusterUser"\r\n                   type="text"\r\n                   data-bind="validatedInputBox: { value: workspaceSettings().hdinsightClusterConnectionString.user },\r\n                              event: { input: $root.settingsUpdated }"\r\n             />\r\n        </div>\r\n    </div>\r\n    <div class="waz-config-setting">\r\n        <label>Password</label>\r\n        <div class="waz-config-setting-value">\r\n            <input id="HDInsightClusterPassword"\r\n                   type="password"\r\n                   data-bind="validatedInputBox: { value: workspaceSettings().hdinsightClusterConnectionString.password },\r\n                              event: { input: $root.settingsUpdated }"\r\n            />\r\n        </div>\r\n    </div>\r\n    <div class="waz-config-setting">\r\n        <label>URI</label>\r\n        <div class="waz-config-setting-value">\r\n            <input id="HDInsightClusterUri"\r\n                   type="text"\r\n                   data-bind="validatedInputBox: { value: workspaceSettings().hdinsightClusterConnectionString.uri },\r\n                              event: { input: function () { $root.settingsUpdated(); workspaceSettings().hdinsightClusterConnectionString.settingsUpdated(); } }"\r\n            />\r\n        </div>\r\n    </div>\r\n        \r\n    <div class="waz-config-help-header-section">\r\n        <h2>HDInsight Storage Connection</h2>\r\n    </div>\r\n\r\n    <div class="waz-config-setting">\r\n        <label>Account Name</label>\r\n        <div class="waz-config-setting-value">\r\n            <input id="HDInsightStorageAccountName"\r\n                   type="text" \r\n                   data-bind="validatedInputBox: { value: workspaceSettings().hdinsightStorageConnectionString.accountName },\r\n                              event: { input: function () { $root.settingsUpdated; workspaceSettings().hdinsightStorageConnectionString.settingsUpdated(); } }"\r\n            />\r\n        </div>\r\n    </div>\r\n    <div class="waz-config-setting">\r\n        <label>Account Key</label>\r\n        <div class="waz-config-setting-value">\r\n            <input id="HDInsightStorageAccountKey"\r\n                   type="password"\r\n                   data-bind="validatedInputBox: { value: workspaceSettings().hdinsightStorageConnectionString.accountKey },\r\n                              event: { input: $root.settingsUpdated }"\r\n            />\r\n        </div>\r\n    </div>\r\n    <div class="waz-config-setting">\r\n        <label>Container</label>\r\n        <div class="waz-config-setting-value">\r\n            <input id="HDInsightStorageContainer"\r\n                   type="text" \r\n                   data-bind="validatedInputBox: { value: workspaceSettings().hdinsightStorageConnectionString.container },\r\n                              event: { input: function () { $root.settingsUpdated; workspaceSettings().hdinsightStorageConnectionString.settingsUpdated(); } }"\r\n            />\r\n        </div>\r\n    </div>\r\n    \r\n    <div class="waz-config-help-header-section">\r\n        <h2>Analytic Framework Cluster Connection</h2>\r\n    </div>\r\n\r\n    <div class="waz-config-setting">\r\n        <label>Analytic Framework Cluster</label>\r\n        <div class="waz-config-setting-value">\r\n            <input data-bind="value:workspaceSettings().analyticFrameworkClusterConnectionString" type="text" disabled="disabled" />\r\n        </div>\r\n    </div>\r\n\r\n</div>'},{extensionName:"Settings",templateName:"ResourcesReadOnlyTab",src:"~/Extensions/DataLab/Settings/ResourcesReadOnly.htm",content:"<div>Missing template 'ResourcesReadOnlyTab' of extension 'Settings'</div>"},{extensionName:"Settings",templateName:"Grid",src:"~/Extensions/DataLab/Grid.htm",content:'<div id="grid"></div>'},{extensionName:"Settings",templateName:"SharingTab",src:"~/Extensions/DataLab/Settings/Sharing.htm",content:'<div id="Sharing" class="waz-config config-container waz-config-help-header">\r\n\r\n    <div class="waz-config-setting">\r\n        <label>%sharingPageWorkspacePermissions%</label>\r\n        <div class="waz-config-setting-value">\r\n            <a href="#" target="_blank" data-bind="attr: { href: ibizaLink }">%sharingPageWorkspacePermissionsLink%</a>\r\n            </div>\r\n    </div>\r\n\r\n</div>'},{extensionName:"Settings",templateName:"DataGatewaysTab",src:"~/Extensions/DataLab/DataGatewaysTemplate.html",content:'<div id="dataGateways">    <div id="grid"></div>    <div id="propertiesPane">        <!-- ko if: selectedItem() -->            <div class="gatewayPropertiesTitle" data-bind="text: selectedItem().Name , attr: { title: selectedItem().Name }" />            <div class="gatewayProperty">                <div class="gatewayPropertiesLabel" data-bind="text: resources.description2, attr: { title: resources.description2 }" />                <div class="gatewayPropertiesValue gatewayPropertiesValueMultiLine" data-bind="text: selectedItem().Gateway.Description" />            </div>            <!-- ko if: selectedItem().Gateway.Host -->                <div class="gatewayProperty">                    <div class="gatewayPropertiesLabel" data-bind="text: resources.host, attr: { title: resources.host }" />                    <div class="gatewayPropertiesValue gatewayPropertiesValueMultiLine" data-bind="text: selectedItem().Gateway.Host" />                </div>            <!-- /ko -->            <div class="gatewayProperty">                <div class="gatewayPropertiesLabel" data-bind="text: resources.status, attr: { title: resources.status }" />                <div class="gatewayPropertiesValue">                    <span data-bind="css: statusClass, text: statusText" />                </div>                 <!-- ko if: statusMessageHtml -->                    <div class="gatewayPropertiesValue" data-bind="html: statusMessageHtml" />                <!-- /ko -->            </div>            <!-- ko if: lastConnected -->                <div class="gatewayProperty">                    <div class="gatewayPropertiesLabel" data-bind="text: resources.lastConnected, attr: { title: resources.lastConnected }" />                    <div class="gatewayPropertiesValue" data-bind="text: lastConnected" />                </div>            <!-- /ko -->            <!-- ko if: selectedItem().Gateway.Version -->                <div class="gatewayProperty">                    <div class="gatewayPropertiesLabel" data-bind="text: resources.version, attr: { title: resources.version }" />                    <div class="gatewayPropertiesValue" data-bind="text: selectedItem().Gateway.Version" />                    <div class="gatewayPropertiesValue">                        <span data-bind="css: versionStatusClass, text: versionStatusText" />                    </div>                    <!-- ko if: versionStatusMessageHtml -->                        <div class="gatewayPropertiesValue" data-bind="html: versionStatusMessageHtml" />                    <!-- /ko -->                </div>            <!-- /ko -->            <div class="gatewayProperty">                <div class="gatewayPropertiesLabel" data-bind="text: resources.created, attr: { title: resources.created }" />                <div class="gatewayPropertiesValue" data-bind="text: created" />            </div>            <!-- ko if: selectedItem().Gateway.RegisterTime -->                <div class="gatewayProperty">                    <div class="gatewayPropertiesLabel" data-bind="text: resources.registered, attr: { title: resources.registered }" />                    <div class="gatewayPropertiesValue" data-bind="text: registered" />                </div>            <!-- /ko -->        <!-- /ko -->    </div></div>'}],define("templates",function(){});var ExperimentEditorTemplates;(function(e){e._addAssetToProjectMarkup='<div class="addAssetToProjectDialog">    <h1 class="addAssetTitle" data-bind="text: LocalizedResources.addProjectDialogTitle"></h1>    <div class="projectFilter">        <input class="filterInput" data-bind="textInput: searchString, attr: {placeholder: LocalizedResources.addProjectResourcesSearch}" />        <div class="searchIcon"></div>    </div>    <div class="projectOptionsContainer" data-bind="foreach: Projects">        <!-- ko if: IsNewProject -->        <div class="newProjectOption" data-bind="click: $parent.onSelection, visible: IsVisible, css:{selected: IsSelected(), valid: NewProjectName.isValid()}">            <div class="leftMarginBox">                <div class="selectedCheckMark"></div>            </div>            <div class="projectIcon"></div>            <!-- ko if: IsInEditMode() -->            <input id="projectNameInput" class="newProjectInput" data-bind="click:$.noop, hasFocus: IsInEditMode(), clickBubble: false, validatedInputBox: { value: NewProjectName}, attr: {placeholder:  LocalizedResources.addProjectResourcesProjectNamePrompt}, css:{invalid: !NewProjectName.isValid()}" />            <!-- /ko -->            <!-- ko if: !IsInEditMode() -->            <div class="projectLabelWrapper" data-bind="click:$parent.selectOrEditNewProject, clickBubble:false">                <!-- ko if: !NameIsEmpty() -->                <div class="projectOptionLabel" data-bind="text: Name"></div>                <!-- /ko -->                <!-- ko if: NameIsEmpty() -->                <div class="projectOptionLabelPlaceholder" data-bind="text: LocalizedResources.addProjectResourcesNewProject"></div>                <!-- /ko -->                <div class="newProjectErrorIcon" data-bind="attr:{title: NewProjectName.errorMessage()}, visible: !NewProjectName.isValid() && IsSelected()"></div>            </div>            <!-- /ko -->        </div>        <!-- /ko -->        <!-- ko if: !IsNewProject -->        <!-- ko if: IsEnabled -->        <div class="projectOption" data-bind="click: $parent.onSelection, visible: IsVisible, css:{selected: IsSelected()}">            <div class="leftMarginBox">                <div class="selectedCheckMark"></div>            </div>            <div class="projectIcon"></div>            <div class="projectOptionLabel" data-bind="text: Name"></div>        </div>        <!-- /ko -->        <!-- ko if: !IsEnabled -->        <div class="projectOptionDisabled" data-bind="visible: IsVisible, attr: {title: LocalizedResources.addAssetProjectContainsTooltip}">            <div class="leftMarginBox">                <div class="selectedCheckMark"></div>            </div>            <div class="projectIcon"></div>            <div class="projectOptionLabel" data-bind="text: Name"></div>        </div>        <!-- /ko -->        <!-- /ko -->    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._addAssetToProjectMarkup");var ExperimentEditorTemplates;(function(e){e._allExperimentsMarkup='<div id="experiments">    <div id="grid"></div>    <div id="previewPane">        <div id="thumbnailContainer" data-bind="visible: pageLoaded">        <!-- ko ifnot: selectedItems().length !== 1 -->        <!-- ko template: { name: \'experimentSvgTemplate\', data: thumbnail, if: thumbnail } --><!-- /ko -->        <div class="spinner" data-bind="css: { thumbnailLoading: loading() }"></div>        <div class="shield"></div>        <!-- /ko -->        <!-- ko if: selectedItems().length !== 1 -->        <div class="selection-info">            <span data-bind="text: itemsSelectedMessage"></span>        </div>        <!-- /ko -->    </div>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._allExperimentsMarkup");var ExperimentEditorTemplates;(function(e){e._apiCodeDialogMarkup='<p class="aux-dialogHeader" data-bind="text: LocalizedResources.apiCodeDialogTopText"></p><p class="aux-dialogSubHeader" data-bind="text: LocalizedResources.apiCodeDialogTitle"></p><div class="api-code-dialog">    <p><span data-bind="text: LocalizedResources.apiCodeDialogWelcomeMessage"></span><a href=" http://go.microsoft.com/fwlink/?LinkId=524527" target="_blank" data-bind="text: LocalizedResources.learnMore"></a></p>    <div class="dialog-warning" data-bind="text: LocalizedResources.apiCodeDialogTokenWarning"></div>    <br />        <label id="long-code-label" for="long-code-text" data-bind="text: LocalizedResources.apiCodeDialogLongCodeLabel"></label>    <div class="textarea-tabs" data-bind="foreach: languages">        <label>            <input type="radio" name="radio-group-languages" data-bind="attr: { value: $data }, checked: $parent.language" />            <span class="textarea-tab" data-bind="text: $data"></span>        </label>    </div>    <textarea id="long-code-text" data-bind="value: longCode" readonly="readonly" rows="13" style="width: 100%"></textarea>    <label><input data-bind="checked: useSecondaryToken, visible: !showExtraHelp" type="checkbox" /><span data-bind="text: LocalizedResources.apiCodeDialogUseSecondaryTokenLabel, visible: !showExtraHelp"></span></label>        <a href=" http://go.microsoft.com/fwlink/?LinkId=524830" target="_blank" data-bind="visible: showExtraHelp"> Why is my workspace token unavailable?</a></div><!--See ApiCodeDialogViewModel.ts for the JavaScript code that shouldbe executed as part of this dialog. DialogView does not support usingJS within templates.-->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._apiCodeDialogMarkup");var ExperimentEditorTemplates;(function(e){e._chatControlMarkup='<div class="chat-control-wrapper" data-bind="css: { offscreen: !isVisible() }">    <div class="close-chat" data-bind="click: toggle">X</div>    <iframe class="chat-iframe" data-bind="attr: {src: chatbotUrl}"></iframe></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._chatControlMarkup");var ExperimentEditorTemplates;(function(e){e._columnPickerMarkup='<vflexbox class="columnPicker">    <flexfill style="min-height: 210px">        <flexcontent class="ruleSection">            <!-- ko if: !singleColumnSelection() -->                <input id="AllowDuplicatesCheckbox" type="checkbox" data-bind="checked: allowDuplicates" />                <label for="AllowDuplicatesCheckbox" data-bind="text: LocalizedResources.allowDuplicatesInSelectionLabel"></label>            <!-- /ko -->            <div class="ruleTable">                <!-- ko if: !allowDuplicates() && !singleColumnSelection() -->                <hflexbox class="ruleRow">                    <flexstatic>                        <label for="RulesStartingChoice" data-bind="text: LocalizedResources.rulesStartingChoiceLabel"></label>                        <div id="RulesStartingChoice" class="pushbutton startingChoice" data-bind="fxRadio: startingChoicesFxRadioOptions"></div>                    </flexstatic>                </hflexbox>                <!-- /ko -->                <!-- ko foreach: visibleRules -->                <hflexbox class="ruleRow" data-bind="validate: { value:  isFirstRule }">                    <flexstatic>                        <select class="ruleCategoryChoice" data-bind="options: ruleCategoryChoices, value: ruleCategory, optionsText: \'name\', optionsValue: \'exclude\', oninit: setWidthToStartingChoiceLabelWidth "></select>                        <select class="ruleTypeChoice" data-bind="options: ruleChoices, value: ruleType, optionsText: \'name\'"></select>                    </flexstatic>                    <!-- ko if: ruleType().id === "ColumnNames" -->                    <hflexbox class="columnNameList" data-bind="validate: { value: currentColumn }, click: setNameInputFocused, css: {hasItems: selectedColumns().length > 0 || invalidColumns().length > 0}">                        <!-- ko foreach: selectedColumns -->                        <flexstatic class="columnNameBox">                            <span data-bind="text: $data"></span>                            <span class="removeColumnName" data-bind="click: $parent.removeColumnName"></span>                        </flexstatic>                        <!-- /ko -->                        <!-- ko foreach: invalidColumns -->                        <flexstatic class="columnNameBoxInvalid">                            <span data-bind="text: $data"></span>                            <span class="removeColumnName" data-bind="click: $parent.removeInvalidColumnName"></span>                        </flexstatic>                        <!-- /ko -->                        <flexfill>                        <!-- ko if: $parent.hasSchema -->                        <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: placeholderText }, style: { \'minWidth\': selectedColumns().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: selectedColumns, invalidColumnNames: invalidColumns }, columnPickerAutocomplete: { array: $parent.autocompleteArray, dependentObservable: currentColumn, allowAnyEntry: $parent.schemaIsInaccurate }" />                        <!-- /ko -->                        <!-- ko ifnot: $parent.hasSchema -->                        <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: placeholderText }, style: { \'minWidth\': selectedColumns().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: selectedColumns, invalidColumnNames: invalidColumns }, value: currentColumn" />                        <!-- /ko -->                        </flexfill>                        <div class="textWidthSpan"></div>                    </hflexbox>                    <!-- /ko -->                    <!-- ko if: ruleType().id === "ColumnIndexes" -->                    <input class="columnIndicesInput" type="text" placeholder="Enter column indices" data-bind="value: indexList, validatedInputBox: { value: indexList } " />                    <!-- /ko -->                    <!-- ko if: ruleType().id === "ColumnTypes" -->                    <select class="columnAttributeDropDown" data-bind="options: typeChoices, selectedOptions: columnTypes"></select>                        <!-- ko if: hasKinds() -->                        <span style="padding: 4px;">%ColumnPickerColumnsThatAre%</span>                        <select class="columnAttributeDropDown" data-bind="options: kindChoices, selectedOptions: columnKinds"></select>                        <!-- /ko -->                    <!-- /ko -->                    <flexstatic class="buttonBox" data-bind="visible: $parent.allowMultipleRules">                        <input style="width: 20px;" type="button" value="+" data-bind="click: function(data, event) { $parent.createNewRule(data, true) }, enable: !$parent.allowDuplicates()" />                        <input style="width: 20px;" type="button" value="-" data-bind="click: function(data, event) { $parent.removeRule(data) }, enable: $parent.rules().length > 1" />                    </flexstatic>                </hflexbox>                <!-- /ko -->            </div>        </flexcontent>    </flexfill>    <flexstatic>        <hflexbox>            <flexfill></flexfill>            <flexstatic class="icon tick" data-bind="click: function(data, event) { if (!hasErrors()) { saveRulesAndClose()} }"></flexstatic>         </hflexbox>    </flexstatic></vflexbox>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._columnPickerMarkup");var ExperimentEditorTemplates;(function(e){e._columnPickerOldDesignMarkup='<div class="columnPicker">    <h1 data-bind="text: singleColumnSelection() ? LocalizedResources.singleColumnSelectHeading : LocalizedResources.multipleColumnSelectHeading"></h1>    <flexfill style="min-height: 210px">        <flexcontent class="ruleSection">            <!-- ko if: !singleColumnSelection() -->            <input id="AllowDuplicatesCheckbox" type="checkbox" data-bind="checked: allowDuplicates" />            <label for="AllowDuplicatesCheckbox" data-bind="text: LocalizedResources.allowDuplicatesInSelectionLabel"></label>            <!-- /ko -->            <div class="ruleTable">                <!-- ko if: !allowDuplicates() && !singleColumnSelection() -->                <hflexbox class="ruleRow">                    <flexstatic>                        <label for="RulesStartingChoice" data-bind="text: LocalizedResources.rulesStartingChoiceLabel"></label>                        <select id="RulesStartingChoice" class="startingChoice" data-bind="options: startingChoices, value: startingChoice, optionsText: \'name\'"></select>                    </flexstatic>                </hflexbox>                <!-- /ko -->                <!-- ko foreach: visibleRules -->                <hflexbox class="ruleRow" data-bind="validate: { value:  isFirstRule }">                    <flexstatic>                        <select class="ruleCategoryChoice" data-bind="options: ruleCategoryChoices, value: ruleCategory, optionsText: \'name\', optionsValue: \'exclude\', oninit: setWidthToStartingChoiceLabelWidth "></select>                        <select class="ruleTypeChoice" data-bind="options: ruleChoices, value: ruleType, optionsText: \'name\'"></select>                    </flexstatic>                    <!-- ko if: ruleType().id === "ColumnNames" -->                    <hflexbox class="columnNameList" data-bind="validate: { value: currentColumn }, click: setNameInputFocused, css: {hasItems: selectedColumns().length > 0 || invalidColumns().length > 0}">                        <!-- ko foreach: selectedColumns -->                        <flexstatic class="columnNameBox">                            <span data-bind="text: $data"></span>                            <span class="removeColumnName" data-bind="click: $parent.removeColumnName"></span>                        </flexstatic>                        <!-- /ko -->                        <!-- ko foreach: invalidColumns -->                        <flexstatic class="columnNameBoxInvalid">                            <span data-bind="text: $data"></span>                            <span class="removeColumnName" data-bind="click: $parent.removeInvalidColumnName"></span>                        </flexstatic>                        <!-- /ko -->                        <flexfill>                            <!-- ko if: $parent.hasSchema -->                            <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: placeholderText }, style: { \'minWidth\': selectedColumns().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: selectedColumns, invalidColumnNames: invalidColumns }, columnPickerAutocomplete: { array: $parent.autocompleteArray, dependentObservable: currentColumn, allowAnyEntry: $parent.schemaIsInaccurate }" />                            <!-- /ko -->                            <!-- ko ifnot: $parent.hasSchema -->                            <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: placeholderText }, style: { \'minWidth\': selectedColumns().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: selectedColumns, invalidColumnNames: invalidColumns }, value: currentColumn" />                            <!-- /ko -->                        </flexfill>                        <div class="textWidthSpan"></div>                    </hflexbox>                    <!-- /ko -->                    <!-- ko if: ruleType().id === "ColumnIndexes" -->                    <input class="columnIndicesInput" type="text" placeholder="Enter column indices" data-bind="value: indexList, validatedInputBox: { value: indexList } " />                    <!-- /ko -->                    <!-- ko if: ruleType().id === "ColumnTypes" -->                    <select class="columnAttributeDropDown" data-bind="options: typeChoices, selectedOptions: columnTypes"></select>                    <!-- ko if: hasKinds() -->                    <span style="padding: 4px;">%ColumnPickerColumnsThatAre%</span>                    <select class="columnAttributeDropDown" data-bind="options: kindChoices, selectedOptions: columnKinds"></select>                    <!-- /ko -->                    <!-- /ko -->                    <flexstatic class="buttonBox" data-bind="visible: $parent.allowMultipleRules">                        <input style="width: 20px;" type="button" value="+" data-bind="click: function(data, event) { $parent.createNewRule(data, true) }, enable: !$parent.allowDuplicates()" />                        <input style="width: 20px;" type="button" value="-" data-bind="click: function(data, event) { $parent.removeRule(data) }, enable: $parent.rules().length > 1" />                    </flexstatic>                </hflexbox>                <!-- /ko -->            </div>        </flexcontent>    </flexfill>    <flexstatic>        <hflexbox>            <flexfill></flexfill>            <flexstatic class="icon tick" data-bind="click: function(data, event) { if (!hasErrors()) { saveRulesAndClose()} }"></flexstatic>        </hflexbox>    </flexstatic></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._columnPickerOldDesignMarkup");var ExperimentEditorTemplates;(function(e){e._competitionSubmissionStep1Markup='<script type="text/html" id="CompetitionSubmissionStep1Template">    <div class="fx-dialog-template competition-submission-wizard-step">        <div class="preamble">%competitionSubmissionWizardStep1Preamble%</div>        <div class="datalab-dialog">            <!--<label for="submission-name">%competitionSubmissionWizardStep1SubmissionNameLabel%</label>-->            <input id="submission-name" type="text" class="submissionNameInput" data-bind="value: submissionName, validatedInputBox: { value: submissionName }" />        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._competitionSubmissionStep1Markup");var ExperimentEditorTemplates;(function(e){e._competitionSubmissionStep2Markup='<script type="text/html" id="CompetitionSubmissionStep2Template">    <div class="fx-dialog-template competition-submission-wizard-step">        <div class="datalab-dialog">            <!-- ko if: isInProgress -->            <div class="activity-in-progress animation"></div>            <!-- ko if: isValidating -->            <div class="activity-in-progress description">%competitionSubmissionWizardStep2Validating%</div>            <!-- /ko -->            <!-- /ko -->            <!-- ko if: validationFailed -->            <div class="competition-submission-validation-results">                <!-- ko if: onlyWarningsFound -->                <div class="preamble">%competitionSubmissionWizardStep2WarningOnlyPreamble%</div>                <!-- /ko -->                <!-- ko if: errors().length > 0 -->                <div class="validation-results-container">                    <div class="validation-errors-header">                        <!-- ko if: errors().length === 1 -->                        <span data-bind="text: errors().length"></span> %competitionSubmissionWizardStep2Error%                        <!-- /ko -->                        <!-- ko if: errors().length > 1 -->                        <span data-bind="text: errors().length"></span> %competitionSubmissionWizardStep2Errors%                        <!-- /ko -->                    </div>                    <!-- ko foreach: errors -->                    <div class="validation-error-item" data-bind="text: $data.summary"></div>                    <!-- ko if: $data.details -->                    <textarea readonly class="validation-error-details" data-bind="text: $data.details"></textarea>                    <!-- /ko -->                    <!-- /ko -->                </div>                <!-- /ko -->                <!-- ko if: warnings().length > 0 -->                <div class="validation-results-container">                    <div class="validation-warnings-header">                        <!-- ko if: warnings().length === 1 -->                        <span data-bind="text: warnings().length"></span> %competitionSubmissionWizardStep2Warning%                        <!-- /ko -->                        <!-- ko if: warnings().length > 1 -->                        <span data-bind="text: warnings().length"></span> %competitionSubmissionWizardStep2Warnings%                        <!-- /ko -->                    </div>                    <!-- ko foreach: warnings -->                    <div class="validation-warning-item" data-bind="text: $data.summary"></div>                    <!-- /ko -->                </div>                <!-- /ko -->            </div>            <!-- /ko -->            <!-- ko if: validationPassed -->            <div class="competition-submission-validation-results">                <div class="validation-results-container">                    <div class="validation-success-header">%competitionSubmissionWizardStep2NoErrors%</div>                    <div class="validation-success-message">%competitionSubmissionWizardStep2ReadyToSubmit%</div>                </div>            </div>            <!-- /ko -->        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._competitionSubmissionStep2Markup");var ExperimentEditorTemplates;(function(e){e._competitionSubmissionTermAcceptanceStepMarkup='<script type="text/html" id="CompetitionSubmissionTermAcceptanceStepTemplate">    <div class="fx-dialog-template competition-submission-wizard-step term-acceptance">        <div class="datalab-dialog">            <markdown-editor class="markdown-editor" params="value: content, placeholder: \'\'"></markdown-editor>            <div class="acceptTermsCheckboxContainer">                <input type="checkbox" class="acceptTermsCheckbox" data-bind="checked: isTermAccepted">                %competitionSubmissionWizardTermAcceptanceStepAcceptTermsCheckboxLabel%            </div>        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._competitionSubmissionTermAcceptanceStepMarkup");var ExperimentEditorTemplates;(function(e){e._confirmationDialogMarkup='<h2 data-bind="text: title"></h2><p data-bind="text: text"></p>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._confirmationDialogMarkup");var ExperimentEditorTemplates;(function(e){e._copyExperimentDialogMarkup='<h2>%copyExperimentDialogCopyExperiment%</h2><label>%copyExperimentDialogExperimentName%</label><input type="text" data-bind="validatedInputBox: { value: experimentName }" /> <label>%copyExperimentDialogDestinationWorkspace%</label><select data-bind="options: workspaceOptions, optionsText: \'FriendlyName\', value: destinationWorkspace, visible: workspaceInfoAvailable"></select><div class="copy-experiment-noWorkspaces" data-bind="visible: !workspaceInfoAvailable()">%copyExperimentDialogWorkspaceInfoNotAvailable%</div><div class="copy-experiment-error" data-bind="visible: copyFromEncryptedToUnencryptedWorkspace">%copyExperimentDialogEncryptedToUnencryptedDisallowed%</div><div class="dialog-warning copy-experiment-warning" >%copyExperimentDialogCopyExperimentWarning%</div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._copyExperimentDialogMarkup");var ExperimentEditorTemplates;(function(e){e._copyExperimentFromGalleryDialogMarkup='<h2 data-bind="text: title"></h2><!-- ko with: workspaceSelector --><label>%copyExperimentFromGalleryDialogDestinationWorkspace%</label><select data-bind="options: workspaces, optionsText: \'displayName\', value: destinationWorkspace, visible: workspaceInfoAvailable"></select><div class="copy-experiment-noWorkspaces" data-bind="visible: !workspaceInfoAvailable()">%copyExperimentDialogWorkspaceInfoNotAvailable%</div><!-- /ko --><!-- ko if: showWarning --><div class="dialog-warning copy-from-gallery">    <label>        <input type="checkbox" data-bind="checked: isWarningAcknowledged" />        <span data-bind="text: warningMessage"></span>    </label></div><!-- /ko -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._copyExperimentFromGalleryDialogMarkup");var ExperimentEditorTemplates;(function(e){e._copyExperimentFromGalleryMultiGeoDialogMarkup='<h2 data-bind="text: title"></h2><!-- ko with: workspaceSelector --><label for="location-select">%copyExperimentFromGalleryGeoRegions%</label><select id="location-select" data-bind="options: locations, optionsText: \'location\', value: selectedLocation"></select><label for="workspace-select">%copyExperimentFromGalleryGeoWorkspaces%</label><select id="workspace-select" data-bind="options: workspaces, optionsText: \'displayName\', value: destinationWorkspace, visible: workspaceInfoAvailable() && !loadingWorkspaces() "></select><div class="copy-experiment-loading" data-bind="visible: loadingWorkspaces"><img src="../../../Content/Images/icon-status-status-dots-anim-16.gif" /></div><div class="copy-experiment-loading-message" data-bind="visible: loadingWorkspaces">%copyExperimentFromGalleryGeoLoading%</div><div class="copy-experiment-gallery-noWorkspaces" data-bind="visible: !workspaceInfoAvailable() && !loadingWorkspaces()">%copyExperimentFromGalleryDialogWorkspaceInfoNotAvailable%</div><!-- /ko --><!-- ko if: showWarning --><div class="dialog-warning copy-from-gallery">    <label>        <input type="checkbox" data-bind="checked: isWarningAcknowledged" />        <span><span data-bind="text: warningMessage"></span> <a href="http://aka.ms/cascompetitionfaq" target="_blank">%readMore%</a>.</span>    </label></div><!-- /ko -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._copyExperimentFromGalleryMultiGeoDialogMarkup");var ExperimentEditorTemplates;(function(e){e._createWebServiceGraphFromTrainedModelDialogMarkup='<h2>Create Web Service</h2><div>    <div>        <label for="create-web-service-name" data-bind="text: \'%createWebServiceGraphNameLabel%\'"></label>        <input id="create-web-service-name" type="text" data-bind="value: name" />    </div>    <div>        <label for="create-web-service-description" data-bind="text: \'%createWebServiceGraphDescriptionLabel%\'"></label>        <textarea rows="4" id="create-web-service-description" data-bind="value: description" />    </div>        <div style="color: gray" data-bind="text: \'createWebServiceGraphTrainedModelCopyText\'">    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceGraphFromTrainedModelDialogMarkup");var ExperimentEditorTemplates;(function(e){e._createWebServiceGraphFromTransformDialogMarkup='<h2>Create Web Service</h2><div>    <div>        <label for="create-web-service-name" data-bind="text: \'%createWebServiceGraphNameLabel%\'"></label>        <input id="create-web-service-name" type="text" data-bind="value: name" />    </div>    <div>        <label for="create-web-service-description" data-bind="text: \'%createWebServiceGraphDescriptionLabel%\'"></label>        <textarea rows="4" id="create-web-service-description" data-bind="value: description" />    </div>        <div style="color: gray" data-bind="text: \'createWebServiceGraphTransformCopyText\'">    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceGraphFromTransformDialogMarkup");var ExperimentEditorTemplates;(function(e){e._customModuleAddedWarningDialogMarkup='<h2>%SynchronizeScriptVersionDialogHeader%</h2><div data-bind="text: warningLabel"></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._customModuleAddedWarningDialogMarkup");var ExperimentEditorTemplates;(function(e){e._dagSearchMarkup='<div class="dagSearchIconAndContainerDiv" data-bind="style:{right:x()+\'px\', top:y()+\'px\'}">    <div class="dagSearchIconDiv">        <span class="icon-Discovery cursorPointer dagSearchIcon" title="%searchCanvas%" data-bind="event:{mousedown:$root.initDragging}"></span>    </div>    <div class="dagSearchContainer" data-bind="event:{scroll: $root.nextResult}">        <div id="dagSearchTextBox" class=".xe-genericSearchBox">            <span class="dagSearchResultsCountString" data-bind="text:dagSearchResultsCount"> </span>            <span class="dragControlGreyBox cursorPointer dagSearchIcon" style="display:none;" data-bind="event:{mousedown:$root.initDragging}"></span>            <div class="angledButtonLeft cursorPointer" data-bind="click:$root.selectPreviousResult"> < </div>            <div class="angledButtonRight cursorPointer" data-bind="click:$root.selectNextResult"> > </div>            <input id="dagSearchTextArea" tabindex="4" type="text" data-bind="value:dagSearchText, valueUpdate:[\'input\',\'keyup\']" placeholder="%dagSearchBoxPlaceholder%" />        </div>        <div class="dagSearchResults">            <!-- ko foreach:Util.values(resultsShortcutViewModels()) -->            <!-- ko if: graphNodeViewModel.isAnnotation() && !graphNodeViewModel.annotationNode.annotation.deleted() -->            <div class="cursorPointer searchResultNode" data-bind=" click:$root.focusToNodeWrapper, event:{dblclick:$root.focusAndPanToNode}, css:{highlightedEntityOrange: graphNodeViewModel.searchResultSelected}">                <svg data-bind="attr: { x: graphNodeViewModel.iconPosX(), y: graphNodeViewModel.iconPosY() }" style="overflow: visible; margin-left: 10px; margin-top: 10px;" width="25" height="25">                    <image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/Content/Images/comment_bubble.svg" x="0" y="0" dy="20" width="25" height="25"></image>                         </svg>                <div class="infoContainer">                    <div class="nameText" data-bind="text: \'Name: *Annotation*\'"></div>                    <div class="resultText" data-bind="text: \'Result: \' + searchContext"></div>                </div>            </div>            <!-- /ko -->            <!-- ko ifnot: graphNodeViewModel.isAnnotation() -->            <div class="cursorPointer searchResultNode" data-bind="attr:{ title: graphNodeViewModel.tooltip}, click:$root.focusToNodeWrapper, event:{dblclick:$root.focusAndPanToNode}, css:{highlightedEntityOrange: graphNodeViewModel.searchResultSelected}">                <svg data-bind="attr: { x: graphNodeViewModel.iconPosX(), y: graphNodeViewModel.iconPosY() }" style="overflow: visible; margin-left: 10px; margin-top: 10px;" width="25" height="25">                    <text data-bind="text: graphNodeViewModel.iconSymbol, attr: { \'class\': \'graphNode-icon \' + graphNodeViewModel.iconClass }" x="0" y="0" dy="20" width="25" height="25"></text>                </svg>                <div class="infoContainer">                    <div class="nameText" data-bind="text: \'Name: \' + graphNodeViewModel.label"></div>                    <div class="resultText" data-bind="text: \'Result: \' + searchContext"></div>                </div>            </div>            <!-- /ko -->            <!-- /ko -->        </div>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._dagSearchMarkup");var ExperimentEditorTemplates;(function(e){e._dataGatewayDescriptionDialogMarkup='<div id="dataGatewayNameDialog">    <h2 data-bind="text: gatewayName"></h2>    <label>%newDataGatewayDescriptionLabel%</label>    <textarea class="description" data-bind="value: gatewayDescription, placeholder: \'%newDataGatewayDescriptionPlaceholder%\'"></textarea></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._dataGatewayDescriptionDialogMarkup");var ExperimentEditorTemplates;(function(e){e._dataGatewayDownloadAndRegisterMarkup='<div id="dataGatewayDownloadDialog" >    <p class="Title" data-bind="text: gatewayName"></p>    <!-- ko if: transitionedToRegistered() -->        <p class="PrimaryAction"><span class="gatewayIconGood">%dataGatewayRegistered%</span></p>        <p>%dataGatewayRegisteredPostamble%</p>        <!-- ko if: gatewayHost() -->            <label>%host%</label>            <p data-bind="text: gatewayHost()" ></p>        <!-- /ko -->    <!-- /ko -->    <!-- ko if: (!registered() || !transitionedToRegistered()) -->        <p>%dataGatewayInstallPreamble%</p>        <!-- ko if: installLocalUrl() -->            <a class="PrimaryAction" data-bind="attr: { href: installLocalUrl }" >%dataGatewayInstallHereText%</a>            <p class="PrimaryAction">%or%</p>        <!-- /ko -->        <a  class="PrimaryAction"href="http://go.microsoft.com/fwlink/?LinkId=271260" target="_blank">%dataGatewayDownloadLinkText%</a>         <p>%dataGateway64BitPreferred%</p>    <!-- /ko -->    <!-- ko if: (!registered() && gatewayRegistrationKey()) -->        <p>%dataGatewayRegistrationKeyPreample%</p>        <label>%dataGatewayRegistrationKeyLabel%</label>        <div data-bind="fxsCopyButton: gatewayRegistrationKey" ></div>        <p class="gatewayStatus">            <span class="gatewayIconWarn">%dataGatewayRegistrationNeeded%</span>            <a href="" class="refreshLink" data-bind="click: refreshStatus, visible: !refreshingStatus()">%refreshStatus%</a>        </p>        <p>%dataGatewayRegistrationPostamble%</p>    <!-- /ko -->    <!-- ko if: (registered() && !transitionedToRegistered()) -->        <p>            <button data-bind="click: regenerateKey, enable: !regeneratingKey()">%dataGatewayRegenerateRegistrationKey%</button><br>            <span class="gatewayIconWarn">%dataGatewayRegeneateWarning%</span>        </p>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._dataGatewayDownloadAndRegisterMarkup");var ExperimentEditorTemplates;(function(e){e._disabledFeatureDialogMarkup='<div class="trial-dialog">    <h1 class="dialog-title" data-bind="text: title"></h1>    <div class="dialog-description" data-bind="foreach: description">        <p data-bind="html: $data"></p>    </div>    <div class="dialog-button-container">        <button class="dialog-green-button dialog-button-left" data-bind="click: signIn">%trialDialogSignInNow%</button>        <button class="dialog-gray-button dialog-button-right autofocus" data-bind="click: dismiss">%trialDialogReturnToTrial%</button>    </div>    <!-- ko with: link -->    <a class="dialog-link" style="font-size: 10px" href="#" target="_blank" data-bind="attr: { href: url }, text: text"></a>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._disabledFeatureDialogMarkup");var ExperimentEditorTemplates;(function(e){e._editableTextAreaPropertyMarkup='<script type="text/html" id="editableTextAreaProperty">    <div class="editableTextAreaProperty" data-bind="editableTextArea: {}">        <textarea class="datalab-gridCellPropertyItem editableTextArea" data-bind="value: $parent.property.value, css: { disabled: $data.isReadOnly }"></textarea>        <span class="characterLimitReachedWarning">            <span class="charactersLeftCount"></span>            %charactersLeft%        </span>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._editableTextAreaPropertyMarkup");var ExperimentEditorTemplates;(function(e){e._editorSurface2Markup='<script type="text/html" id="experimentSvgTemplate">    <svg xmlns="http://www.w3.org/2000/svg"         xmlns:xlink="http://www.w3.org/1999/xlink"         data-bind="contextMenu: $data.menuBuilder"         class="svgRoot"         preserveAspectRatio="xMidYMid meet"         width="100%" height="100%">        <!-- this <g> must be first -->        <g>            <!-- ko if: $data -->            <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->            <!-- Add invisble rects so that SVG bounding box is the correct size -->            <rect data-bind="attr:{x:x, y:y, width: width, height: height, visibility: \'hidden\'}">            </rect>            <!-- ko if: isAnnotation() && !annotationNode.annotation.deleted() -->            <!-- ko ifnot: annotationNode.annotation.isCollapsed()-->            <rect data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),x:x,y:y,width:width,height:height,id:\'node-\' + graphNode.id},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">            </rect>            <rect class="annotationTextRect" id="annotationTextRect" data-bind="attr:{x:contentPosX,y:contentPosY,width:contentWidth,height:contentHeight},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">            </rect>            <svg data-bind="attr:{x:x()+8,y:y()+8},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">                <image id="collapseNodeIcon" height="10" width="10" xlink:href="/Content/Images/collapse-22.svg"></image>            </svg>            <!-- /ko -->            <!-- ko if: annotationNode.annotation.isCollapsed-->            <svg data-bind="attr: {class:getClassId($parent.experimentViewModel().displayFlowType()), x:x, y:y },event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">                <image data-bind="attrWithNamespace:{\'xlink:href\':collapsedIcon},attr:{width:collapsedWidth,height:collapsedWidth}"></image>            </svg>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- ko foreach:Util.values(experimentViewModel().connections()) -->            <path class="connectionHitTest" data-bind="attr:{d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}" />            <path class="connection"                  data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}" />            <!-- /ko -->            <!-- ko ifnot: $root.renderThumbnail -->            <!-- ko if: stateMachine.dragging() === xEStateMachine.DraggingMode.SelectionRect -->            <!-- ko with: selectionManager -->            <rect class="selectionRect" data-bind="attr:{x:curX,y:curY,width:width,height:height}"></rect>            <!-- /ko -->            <!-- /ko -->            <!-- ko with: connector -->            <!-- ko if: isPreview -->            <path class="connector" fill="none" pointer-events="none" data-bind="visible:visible,attr:{d:path}" />            <!-- /ko -->            <!-- ko ifnot: isPreview -->            <line class="connector" pointer-events="none" data-bind="visible:visible,attr:{x1:x1,y1:y1,x2:x2,y2:y2}"></line>            <g data-bind="attr:{transform:translation}" class="port idlePort">                <polygon points="0,0 4,7 8,0" />            </g>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->        </g>    </svg>    <div class="xe-overlay">        <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->        <!-- Annotation -->        <!-- ko if: isAnnotation() && !annotationNode.annotation.deleted()-->        <!-- ko ifnot: annotationNode.annotation.isCollapsed()-->        <pre class="annotationContentNonEditable" data-bind="text:annotationNode.annotation.content,style:{left:contentPosX()+\'px\', top:contentPosY()+\'px\',width:contentWidth()+\'px\',height:contentHeight()+\'px\'},visible:!editingComment(),contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,mouseover:onMouseIn,mouseout:onMouseOut}"></pre>        <div class="nodeSEResize" data-bind="style:{left:(x()+width()-15)+\'px\',top:(y()+height()-15)+\'px\'},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"></div>        <div class="nodeEResize" data-bind="style:{left:(x()+width()-5)+\'px\',top:y()+\'px\',height:(height()-15)+\'px\'},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"></div>        <div class="nodeSResize" data-bind="style:{left:x()+\'px\',top:(y()+height()-5)+\'px\',width:(width()-15)+\'px\'},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"></div>        <!-- /ko -->        <!-- /ko -->        <!-- ko ifnot: isAnnotation() -->        <!-- Module box/container-->        <div data-bind="style:{left:x()+\'px\', top:y()+\'px\', width: width() + \'px\', height: height() + \'px\'}, attr:{class:getClassId($parent.experimentViewModel().displayFlowType()) + \' node\',id: \'node-\' + graphNode.id, title: tooltip},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">            <!-- Module icon -->            <div data-bind="attr: { x: iconPosX(), y: iconPosY() }" style="overflow: visible">                <div data-bind="text: iconSymbol, attr: { \'class\': \'graphNode-icon \' + iconClass }" x="0" y="0" dy="25" width="25" height="25"></div>            </div>            <!-- Module name -->            <div class="staticText" data-bind="text: label"></div>            <!-- Module comment -->            <div class="nodeComment" data-bind="attr:{class:commentClass,title:tooltip},style:{width:commentWidth},visible:!editingComment(),contextMenu:$root.menuBuilder,event:{mouseup:$root.entityMouseUp,mouseover:onMouseIn,mouseout:onMouseOut}">                <pre class="text" data-bind="text:commentToShow,style:{height:(linesToShow()*20+\'px\')},event:{mousedown:$root.entityMouseDown,dblclick:$root.entityDoubleClick}">&nbsp;</pre>            </div>            <!-- Input Ports -->            <!-- ko foreach: Util.values(inputPorts) -->            <div data-bind="                 style:{left:hostRelativeX()+\'px\', top:hostRelativeY()+\'px\'},                 attr:{class:getClassId($parents[1].experimentViewModel().displayFlowType()) + \' inputPort\',\'data-portname\':portModel.name, title:\'\'},                 contextMenu:$root.menuBuilder,                 event:{                 mousedown:$root.entityMouseDown,                 mouseup:$root.entityMouseUp,                 dblclick:$root.entityDoubleClick                 },                 balloon:{message:balloonMessage}">                <!-- Elements to only show on hover -->                <div class="portHoverContainer">                    <div data-bind="attr:{class:\'nodePort portIcon \' + ($data.parent.isData() ? \'dataPort\': $data.parent.isTrainedModel() ? \'trainedModelPort\': \'otherPort\')}"></div>                    <div class="portLabel" data-bind="text: portModel.friendlyName + \' (\' + portTypes + \')\'"></div>                </div>            </div>            <!-- /ko --> <!-- Close: inputPort loop -->            <!-- Output Ports -->            <!-- ko foreach: Util.values(outputPorts) -->            <div data-bind="                 style:{left:hostRelativeX()+\'px\', top:hostRelativeY()+\'px\'},                 attr:{transform:translation,class:getClassId($parents[1].experimentViewModel().displayFlowType()) + \' outputPort\',\'data-portname\':portModel.name, title:\'\'},                 contextMenu:$root.menuBuilder,                 event:{                 mousedown:$root.entityMouseDown,                 mouseup:$root.entityMouseUp,                 dblclick:$root.entityDoubleClick                 },                 balloon:{message:balloonMessage}">                <!-- ko if: $parent.selected() && $index() < 9 -->                <div class="nodePort outputPortNumberCircle">                    <div data-bind="attr: { class: highlighted() ? \'active\' : \'\' }"></div>                    <div class="outputPortNumber">                        <div data-bind="text: $index() + 1 + \'\'"></div>                    </div>                </div>                <!-- /ko -->                <!-- Elements to only show on hover -->                <div class="portHoverContainer">                    <!-- ko ifnot: $parent.selected() && $index() < 9 -->                    <div data-bind="attr:{class:\'nodePort portIcon \' + ($data.parent.isData() ? \'dataPort\': $data.parent.isTrainedModel() ? \'trainedModelPort\': \'otherPort\')}"></div>                    <!-- /ko -->                    <div class="portLabel" data-bind="text: portModel.friendlyName + \' (\' + portTypes + \')\'"></div>                </div>                <!-- /ko -->            </div>            <!-- /ko -->            <!-- ko if: hasComment() -->            <div data-bind="attr: { x: x() + width() - 20, y: labelPosY() + 5 }" class="expander">                <div data-bind="click: showHideComment, event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}, text: commentCollapsedExpandedIconSymbol,contextMenu:$root.menuBuilder"></div>            </div>            <!-- /ko -->            <img class="nodeStatus" data-bind="                 hoverBalloon:{                 message:balloonMessage,                 forceBalloon:forceBalloon                 },                 click: $data.nodeIconClicked,                 event:{                 mousedown:$root.entityMouseDown,                 mouseup:$root.entityMouseUp,                 dblclick:$root.entityDoubleClick                 },                 contextMenu:$root.menuBuilder,                 attr:{                 src:statusIconURL                 }">            </img>        </div>        <!-- /ko -->        <!-- /ko -->    </div></script><!-- ko ifnot: $root.renderThumbnail --><!-- ExperimentEditor control template markup --><div class="experimentEditorContainer" data-bind="attr:{class:classId}">    <div class="experimentCanvas">        <!-- ko if: shouldShowHelpWatermark -->        <div class="watermarkGraph"></div>        <span class="watermarkTextbox">            %experimentEditorWatermarkText%        </span>        <!-- /ko -->        <!-- ko if: Features.miniMapInExperimentEditorEnabled()-->        <div class="miniMapAnchorDiv">        </div>        <!-- /ko -->        <!-- ko if: Features.dagSearchEnabled()-->        <div class="dagSearchAnchorDiv">        </div>        <!-- /ko -->        <!-- Experiment Editor SVG template start here -->        <div class="customElements">            <!-- ko template: { name: \'experimentSvgTemplate\', data: $data } --><!-- /ko -->        </div>        <!-- This is outside of custom elements because of some event handlers not cooperating -->        <div class="nativeElements">            <div class="xe-overlay">                <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->                <!-- ko ifnot: isAnnotation() -->                <textarea data-bind="attr:{class: \'disconnectedChild-\' + graphNode.id + \' nodeComment\'},style:{left:commentPosX,top:commentPosY,width:commentWidth},visible:editingComment,value:comment,hasfocus:editingComment,event:{keydown:$root.commentsEventHandler}"></textarea>                <!-- /ko -->                <!-- ko if: isAnnotation() && !annotationNode.annotation.deleted() -->                <!-- ko ifnot: annotationNode.annotation.isCollapsed()-->                <textarea class="annotationContentEditable" data-bind="attr:{placeholder:annotationNode.annotation.content().length===0?LocalizedResources.annotationEditPlaceholder:\'\'},style:{left:contentPosX()+\'px\',top:contentPosY()+\'px\',width:(contentWidth()+5)+\'px\',height:contentHeight()+\'px\'},visible:editingComment,value:annotationNode.annotation.content,hasfocus:editingComment,event:{keydown:$root.commentsEventHandler}"></textarea>                <!-- /ko -->                <!-- /ko -->                <!-- /ko -->            </div>        </div>    </div>    <div id="controlPanelContainer">        <div id="controlPanel"></div>        <div id="displayFlowSwitch" data-bind="visible:experimentViewModel().experiment.isWebServiceExperiment()">            <div class="displayFlowSwitchIcon"                 data-bind="css: { experimentFlow: experimentViewModel().displayFlowType() === \'experiment\', webServiceFlow: experimentViewModel().displayFlowType() === \'webservice\'},                            click: experimentViewModel().displayFlowToggle.bind(experimentViewModel()),                            attr: { title: experimentViewModel().displayFlowType() === \'experiment\' ? \'%toggleToWebServiceViewTooltip%\' : \'%toggleToExperimentViewTooltip%\' }"></div>        </div>    </div>    <div class="experiment-statusAlertsContainer">        <div class="experiment-statusAlerts" data-bind="text: draftSaveLabel"></div>        <div class="experiment-statusAlerts" data-bind="text: refreshStatusLabel"></div>    </div></div><!-- /ko -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._editorSurface2Markup");var ExperimentEditorTemplates;(function(e){e._editorSurfaceMarkup='<script type="text/html" id="experimentSvgTemplate">    <svg xmlns="http://www.w3.org/2000/svg"         xmlns:xlink="http://www.w3.org/1999/xlink"         data-bind="contextMenu: $data.menuBuilder"         class="svgRoot"         preserveAspectRatio="xMidYMid meet"         width="100%" height="100%">            <!-- this <g> must be first -->        <g>            <!-- ko if: $data -->            <!-- TODO [1149812]: Bind to observable maps directly -->            <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->            <!-- ko if: isAnnotation() && !annotationNode.annotation.deleted() -->            <!-- ko ifnot: annotationNode.annotation.isCollapsed()-->            <rect data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),x:x,y:y,width:width,height:height,id:\'node-\' + graphNode.id},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">            </rect>            <rect class="annotationTextRect" id="annotationTextRect" data-bind="attr:{x:contentPosX,y:contentPosY,width:contentWidth,height:contentHeight},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">            </rect>            <svg data-bind="attr:{x:x()+8,y:y()+8},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">                <image id="collapseNodeIcon" height="10" width="10" xlink:href="/Content/Images/collapse-22.svg"></image>            </svg>            <!-- /ko -->            <!-- ko if: annotationNode.annotation.isCollapsed-->            <svg data-bind="attr: { x:x, y:y },event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">                <image data-bind="attrWithNamespace:{\'xlink:href\':collapsedIcon},attr:{width:collapsedWidth,height:collapsedWidth}"></image>            </svg>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- ko foreach:Util.values(experimentViewModel().connections()) -->            <path class="connectionHitTest" data-bind="attr:{d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}" />            <path class="connection"                  data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}" />            <!-- /ko -->            <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->            <!-- ko ifnot: isAnnotation() -->            <g data-bind="attr:{class:belongsToCurrentFlow($parent.experimentViewModel().displayFlowType())?\'\':\'disabledFlow\'}">                <rect rx="10" ry="10"                      data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),x:x,y:y,width:width,height:height,id:\'node-\' + graphNode.id},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">                    <title data-bind="text: tooltip"></title>                </rect>                <!-- ko foreach: Util.values(inputPorts) -->                <g class="portElement" data-bind="attr:{transform:translation,class:getClassId($parents[1].experimentViewModel().displayFlowType()),\'data-portname\':portModel.name}">                    <g data-bind="contextMenu:$root.menuBuilder,                                      event:{                                          mousedown:$root.entityMouseDown,                                          mouseup:$root.entityMouseUp,                                          dblclick:$root.entityDoubleClick,                                          mouseenter:showLabel,                                          mouseleave: function(data, event) {                                              if ($(\'.portTextLabel\').length === 0) {                                                   hideLabel();                                              }                                            }                                          },                                      balloon:{message:balloonMessage}">                        <!-- Creates a bounding box around the port circle -->                        <rect class="portNoHighlight" height="14" width="16" x="-4" y="-7"></rect>                        <!-- ko if: !portModel.isInputPortForPublish() -->                        <!-- ko if: !portModel.isConnected() -->                        <circle r="5" cx="4" />                        <!-- /ko -->                        <!-- ko if: portModel.isConnected() -->                        <polygon points="-1,0 9,0 4,6" />                        <!-- /ko -->                        <!-- /ko -->                        <!-- ko if: portModel.isInputPortForPublish() && !showFullLabel() -->                        <image data-bind="attrWithNamespace: { \'xlink:href\': portModel.publishIcon }" height="32" width="32" x="-12" y="-16"></image>                        <!-- /ko -->                    </g>                </g>                <!-- /ko -->                <!-- ko foreach: Util.values(outputPorts) -->                <g data-bind="attr:{transform:translation,class:getClassId($parents[1].experimentViewModel().displayFlowType()),\'data-portname\':portModel.name}">                    <g data-bind="contextMenu:$root.menuBuilder,                                      event:{                                          mousedown:$root.entityMouseDown,                                          mouseup:$root.entityMouseUp,                                          dblclick:$root.entityDoubleClick,                                          mouseenter:showLabel,                                          mouseleave:function(data, event) {                                            if ($(\'.portTextLabel\').length === 0) {                                                 hideLabel();                                            }                                          }                                      },                                      balloon:{message:balloonMessage}">                        <!-- Creates a bounding box around the port circle -->                        <rect class="portNoHighlight"                              height="14"                              width="16"                              x="-4"                              y="-7">                        </rect>                        <!-- ko if: !portModel.isOutputPortForPublish() -->                        <!-- ko if: portModel.isConnected() -->                        <circle class="connectedOutputPort" r="5" cx="4" />                        <!-- /ko -->                        <!-- ko if: !portModel.isConnected() -->                        <circle r="5" cx="4" />                        <!-- /ko -->                        <!-- /ko -->                        <!-- ko ifnot: $parent.selected()  && $index() < 9 -->                        <!-- ko if: portModel.isOutputPortForPublish() && !showFullLabel() -->                        <image data-bind="attrWithNamespace: { \'xlink:href\': portModel.publishIcon }" height="32" width="32" x="-12" y="-16"></image>                        <!-- /ko -->                        <!-- /ko -->                        <!-- ko if: $parent.selected() && $index() < 9 -->                        <g class="outputPortNumber">                            <!-- work around KO css binding not working for SVG elements -->                            <circle r="12.5" cx="4" data-bind="attr: { class: highlighted() ? \'active\' : \'\' }"></circle>                        </g>                        <!-- /ko -->                    </g>                </g>                <!-- ko if: $parent.selected() && $index() < 9 -->                <g class="outputPortNumber">                    <text dy="4" data-bind="text: $index() + 1 + \'\', attr: { transform: translation }"></text>                </g>                <!-- /ko -->                <!-- /ko -->                <text class="staticText" data-bind="attr:{class:textClassId,x:labelPosX,y:labelPosY()+15}">                    <tspan data-bind="truncatedText:{label:label, maxWidth:labelMaxWidth}, visible: $root.renderThumbnail" />                </text>                <svg data-bind="attr: { x: iconPosX(), y: iconPosY() }" style="overflow: visible">                    <text data-bind="text: iconSymbol, attr: { \'class\': \'graphNode-icon \' + iconClass }" x="0" y="0" dy="25" width="25" height="25"></text>                </svg>                <svg data-bind="attr: { x: x() + width() - 40, y: labelPosY() + 2 }" class="nodeStatus">                    <image data-bind="hoverBalloon:{                                message:balloonMessage,                                forceBalloon:forceBalloon                            },                            click: $data.nodeIconClicked,                            event:{                                mousedown:$root.entityMouseDown,                                mouseup:$root.entityMouseUp,                                dblclick:$root.entityDoubleClick                            },                            contextMenu:$root.menuBuilder,                            attrWithNamespace:{                                \'xlink:href\':statusIconURL                            }"                           height="16"                           width="16">                    </image>                </svg>                <!-- ko if: hasComment() -->                <svg data-bind="attr: { x: x() + width() - 20, y: labelPosY() + 5 }" class="expander">                    <text data-bind="click: showHideComment,                            event:{                                mousedown:$root.entityMouseDown,                                mouseup:$root.entityMouseUp                            }, text: commentCollapsedExpandedIconSymbol,                            contextMenu:$root.menuBuilder"                          dy="1em"                          height="10"                          width="10">                    </text>                </svg>                <!-- /ko -->            </g>            <!-- /ko -->            <!-- /ko -->            <!-- ko ifnot: $root.renderThumbnail -->            <!-- Third loop to ensure port label tooltips are painted on top of everything else -->            <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->            <!-- ko ifnot: isConnection() -->            <!-- ko foreach: Util.values(inputPorts) -->            <!-- ko if: showFullLabel() -->            <g data-bind="portTextLabel: { label: portModel.friendlyName + \' (\' + portTypes + \')\', model: $data }, portTooltipTransform: { x:tooltipPosX, y:tooltipPosY, name: portModel.friendlyName }, event: { mouseout:hideLabel, mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp, dblclick: $root.entityDoubleClick }, contextMenu:$root.menuBuilder" />            <!-- /ko -->            <!-- /ko -->            <!-- ko foreach: Util.values(outputPorts) -->            <!-- ko if: showFullLabel() -->            <g data-bind="event: { mouseout:hideLabel, mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp, dblclick: $root.entityDoubleClick }, contextMenu:$root.menuBuilder">                <g data-bind="portTextLabel: { label: portModel.friendlyName + \' (\' + portTypes + \')\', model: $data, noIcon: $parent.selected() && $index() < 9 ? \'true\' : \'\' }, portTooltipTransform: { x:tooltipPosX, y:tooltipPosY, name: portModel.friendlyName }"></g>                <!-- ko if: $parent.selected() && $index() < 9 -->                <g class="outputPortNumber" data-bind="attr: { transform: translation }">                    <circle r="12.5" cx="4" class="active"></circle>                    <text dy="4" data-bind="text: $index() + 1 + \'\'"></text>                </g>                <!-- /ko -->            </g>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- ko if: stateMachine.dragging() === xEStateMachine.DraggingMode.SelectionRect -->            <!-- ko with: selectionManager -->            <rect class="selectionRect" data-bind="attr:{x:curX,y:curY,width:width,height:height}"></rect>            <!-- /ko -->            <!-- /ko -->            <!-- ko with: connector -->            <!-- ko if: isPreview -->            <path class="connector" fill="none" pointer-events="none" data-bind="visible:visible,attr:{d:path}" />            <!-- /ko -->            <!-- ko ifnot: isPreview -->            <line class="connector" pointer-events="none" data-bind="visible:visible,attr:{x1:x1,y1:y1,x2:x2,y2:y2}"></line>            <g data-bind="attr:{transform:translation}" class="port idlePort">                <polygon points="0,0 4,7 8,0" />            </g>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->        </g>    </svg></script><!-- ko ifnot: $root.renderThumbnail --><!-- ExperimentEditor control template markup --><div class="experimentEditorContainer" data-bind="attr:{class:classId}">    <div class="experimentCanvas">        <!-- ko if: shouldShowHelpWatermark -->        <div class="watermarkGraph"></div>        <span class="watermarkTextbox">            %experimentEditorWatermarkText%        </span>        <!-- /ko -->        <!-- ko if: Features.miniMapInExperimentEditorEnabled()-->        <div class="miniMapAnchorDiv">        </div>        <!-- /ko -->        <!-- ko if: Features.dagSearchEnabled()-->        <div class="dagSearchAnchorDiv">        </div>        <!-- /ko -->        <!-- Experiment Editor SVG template start here -->        <div class="customElements">            <!-- ko template: { name: \'experimentSvgTemplate\', data: $data } --><!-- /ko -->            <div class="xe-overlay">                <!-- Div overlay for comments -->                <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->                <!-- ko if: isAnnotation() && !annotationNode.annotation.deleted()-->                <!-- ko ifnot: annotationNode.annotation.isCollapsed()-->                <pre class="annotationContentNonEditable" data-bind="text:annotationNode.annotation.content,style:{left:contentPosX()+\'px\', top:contentPosY()+\'px\',width:contentWidth()+\'px\',height:contentHeight()+\'px\'},visible:!editingComment(),contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,mouseover:onMouseIn,mouseout:onMouseOut}"></pre>                <div class="nodeSEResize" data-bind="style:{left:(x()+width()-15)+\'px\',top:(y()+height()-15)+\'px\'},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"></div>                <div class="nodeEResize" data-bind="style:{left:(x()+width()-5)+\'px\',top:y()+\'px\',height:(height()-15)+\'px\'},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"></div>                <div class="nodeSResize" data-bind="style:{left:x()+\'px\',top:(y()+height()-5)+\'px\',width:(width()-15)+\'px\'},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"></div>                <!-- /ko -->                <!-- /ko -->                <!-- ko ifnot: isAnnotation() -->                <div class="staticText" data-bind="attr:{class:textClassId}, style:{left:labelPosX() + \'px\',top:labelPosY() + \'px\'}, text: label"></div>                <div class="nodeComment" data-bind="attr:{class:commentClass,title:tooltip},style:{left:commentPosX, top:commentPosY,width:commentWidth},visible:!editingComment(),contextMenu:$root.menuBuilder,event:{mouseup:$root.entityMouseUp,mouseover:onMouseIn,mouseout:onMouseOut}">                    <pre class="text" data-bind="text:commentToShow,style:{height:(linesToShow()*20+\'px\')},event:{mousedown:$root.entityMouseDown,dblclick:$root.entityDoubleClick}">&nbsp;</pre>                </div>                <!-- /ko -->                <!-- /ko -->            </div>        </div>        <!-- This is here because text areas should behave like text areas when you click, drag and scroll -->        <div class="nativeElements">            <div class="xe-overlay">                <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->                <!-- ko ifnot: isAnnotation() -->                <textarea class="nodeComment" data-bind="style:{left:commentPosX,top:commentPosY,width:commentWidth},visible:editingComment,value:comment,hasfocus:editingComment,event:{keydown:$root.commentsEventHandler}"></textarea>                <!-- /ko -->                <!-- ko if: isAnnotation() && !annotationNode.annotation.deleted() -->                <!-- ko ifnot: annotationNode.annotation.isCollapsed()-->                <textarea class="annotationContentEditable" data-bind="attr:{placeholder:annotationNode.annotation.content().length===0?LocalizedResources.annotationEditPlaceholder:\'\'},style:{left:contentPosX()+\'px\',top:contentPosY()+\'px\',width:(contentWidth()+5)+\'px\',height:contentHeight()+\'px\'},visible:editingComment,value:annotationNode.annotation.content,hasfocus:editingComment,event:{keydown:$root.commentsEventHandler}"></textarea>                <!-- /ko -->                <!-- /ko -->                <!-- /ko -->            </div>        </div>    </div>    <div id="controlPanelContainer">        <div id="controlPanel"></div>        <div id="displayFlowSwitch" data-bind="visible:experimentViewModel().experiment.isWebServiceExperiment()">            <div class="displayFlowSwitchIcon"                 data-bind="css: { experimentFlow: experimentViewModel().displayFlowType() === \'experiment\', webServiceFlow: experimentViewModel().displayFlowType() === \'webservice\'},                            click: experimentViewModel().displayFlowToggle.bind(experimentViewModel()),                            attr: { title: experimentViewModel().displayFlowType() === \'experiment\' ? \'%toggleToWebServiceViewTooltip%\' : \'%toggleToExperimentViewTooltip%\' }"></div>        </div>    </div>    <div class="experiment-statusAlertsContainer">        <div class="experiment-statusAlerts" data-bind="text: draftSaveLabel"></div>        <div class="experiment-statusAlerts" data-bind="text: refreshStatusLabel"></div>    </div></div><!-- /ko -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._editorSurfaceMarkup");var ExperimentEditorTemplates;(function(e){e._editorSurfaceV2Markup='<script type="text/html" id="experimentSvgTemplate">    <svg xmlns="http://www.w3.org/2000/svg"         xmlns:xlink="http://www.w3.org/1999/xlink"         data-bind="contextMenu: $data.menuBuilder"         class="svgRoot"         preserveAspectRatio="xMidYMid meet"         width="100%" height="100%">        <!-- this <g> must be first -->        <g>            <!-- ko if: $data -->            <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->            <!-- Add invisble rects so that SVG bounding box is the correct size -->            <rect data-bind="attr:{x:x, y:y, width: width, height: height, visibility: \'hidden\'}">            </rect>            <!-- ko if: isAnnotation() && !annotationNode.annotation.deleted() -->            <!-- ko ifnot: annotationNode.annotation.isCollapsed()-->            <rect data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),x:x,y:y,width:width,height:height,id:\'node-\' + graphNode.id},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">            </rect>            <rect class="annotationTextRect" id="annotationTextRect" data-bind="attr:{x:contentPosX,y:contentPosY,width:contentWidth,height:contentHeight},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">            </rect>            <svg data-bind="attr:{x:x()+8,y:y()+8},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">                <image id="collapseNodeIcon" height="10" width="10" xlink:href="/Content/Images/collapse-22.svg"></image>            </svg>            <!-- /ko -->            <!-- ko if: annotationNode.annotation.isCollapsed-->            <svg data-bind="attr: { x:x, y:y },event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">                <image data-bind="attrWithNamespace:{\'xlink:href\':collapsedIcon},attr:{width:collapsedWidth,height:collapsedWidth}"></image>            </svg>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- ko foreach:Util.values(experimentViewModel().connections()) -->            <path class="connectionHitTest" data-bind="attr:{d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"/>            <path class="connection"                  data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"/>            <!-- /ko -->            <!-- ko ifnot: $root.renderThumbnail -->            <!-- ko if: stateMachine.dragging() === xEStateMachine.DraggingMode.SelectionRect -->            <!-- ko with: selectionManager -->            <rect class="selectionRect" data-bind="attr:{x:curX,y:curY,width:width,height:height}"></rect>            <!-- /ko -->            <!-- /ko -->            <!-- ko with: connector -->            <!-- ko if: isPreview -->            <path class="connector" fill="none" pointer-events="none" data-bind="visible:visible,attr:{d:path}"/>            <!-- /ko -->            <!-- ko ifnot: isPreview -->            <line class="connector" pointer-events="none" data-bind="visible:visible,attr:{x1:x1,y1:y1,x2:x2,y2:y2}"></line>            <g data-bind="attr:{transform:translation}" class="port idlePort">                <polygon points="0,0 4,7 8,0"/>            </g>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->        </g>    </svg>    <div class="xe-overlay">        <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->        <!-- Annotation -->        <!-- ko if: isAnnotation() && !annotationNode.annotation.deleted()-->        <!-- ko ifnot: annotationNode.annotation.isCollapsed()-->        <pre class="annotationContentNonEditable" data-bind="text:annotationNode.annotation.content,style:{left:contentPosX()+\'px\', top:contentPosY()+\'px\',width:contentWidth()+\'px\',height:contentHeight()+\'px\'},visible:!editingComment(),contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,mouseover:onMouseIn,mouseout:onMouseOut}"></pre>        <div class="nodeSEResize" data-bind="style:{left:(x()+width()-15)+\'px\',top:(y()+height()-15)+\'px\'},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"></div>        <div class="nodeEResize" data-bind="style:{left:(x()+width()-5)+\'px\',top:y()+\'px\',height:(height()-15)+\'px\'},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"></div>        <div class="nodeSResize" data-bind="style:{left:x()+\'px\',top:(y()+height()-5)+\'px\',width:(width()-15)+\'px\'},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}"></div>        <!-- /ko -->        <!-- /ko -->        <!-- ko ifnot: isAnnotation() -->        <!-- Module box/container-->        <div data-bind="style:{left:x()+\'px\', top:y()+\'px\', width: width() + \'px\', height: height() + \'px\'}, attr:{class:getClassId($parent.experimentViewModel().displayFlowType()) + \' node\',id: graphNode.id, title: tooltip},contextMenu:$root.menuBuilder,event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">            <!-- Module icon -->            <div data-bind="attr: { x: iconPosX(), y: iconPosY() }" style="overflow: visible">                <div data-bind="text: iconSymbol, attr: { \'class\': \'graphNode-icon \' + iconClass }" x="0" y="0" dy="25" width="25" height="25"></div>            </div>            <!-- Module name -->            <div class="staticText" data-bind="text: label"></div>            <!-- Module comment -->            <div class="nodeComment" data-bind="attr:{class:commentClass,title:tooltip},style:{width:commentWidth},visible:!editingComment(),contextMenu:$root.menuBuilder,event:{mouseup:$root.entityMouseUp,mouseover:onMouseIn,mouseout:onMouseOut}">                <pre class="text" data-bind="text:commentToShow,style:{height:(linesToShow()*20+\'px\')},event:{mousedown:$root.entityMouseDown,dblclick:$root.entityDoubleClick}">&nbsp;</pre>            </div>            <!-- Input Ports -->            <!-- ko foreach: Util.values(inputPorts) -->            <div data-bind="                                    style:{left:hostRelativeX()+\'px\', top:hostRelativeY()+\'px\'},                                    attr:{class:getClassId($parents[1].experimentViewModel().displayFlowType()) + \' inputPort\',\'data-portname\':portModel.name, title:\'\'},                                    contextMenu:$root.menuBuilder,                                    event:{                                        mousedown:$root.entityMouseDown,                                        mouseup:$root.entityMouseUp,                                        dblclick:$root.entityDoubleClick                                    },                                    balloon:{message:balloonMessage}">                <!-- Elements to only show on hover -->                <div class="portHoverContainer">                    <div data-bind="attr:{class:\'nodePort portIcon \' + ($data.parent.isData() ? \'dataPort\': $data.parent.isTrainedModel() ? \'trainedModelPort\': \'otherPort\')}"></div>                    <div class="portLabel" data-bind="text: portModel.friendlyName + \' (\' + portTypes + \')\'"></div>                </div>            </div>            <!-- /ko --> <!-- Close: inputPort loop -->            <!-- Output Ports -->            <!-- ko foreach: Util.values(outputPorts) -->            <div data-bind="                                        style:{left:hostRelativeX()+\'px\', top:hostRelativeY()+\'px\'},                                         attr:{transform:translation,class:getClassId($parents[1].experimentViewModel().displayFlowType()) + \' outputPort\',\'data-portname\':portModel.name, title:\'\'},                                        contextMenu:$root.menuBuilder,                                        event:{                                              mousedown:$root.entityMouseDown,                                              mouseup:$root.entityMouseUp,                                              dblclick:$root.entityDoubleClick                                          },                                        balloon:{message:balloonMessage}">                <!-- ko if: $parent.selected() && $index() < 9 -->                <div class="nodePort outputPortNumberCircle">                    <div data-bind="attr: { class: highlighted() ? \'active\' : \'\' }"></div>                    <div class="outputPortNumber">                        <div data-bind="text: $index() + 1 + \'\'"></div>                    </div>                </div>                <!-- /ko -->                <!-- Elements to only show on hover -->                <div class="portHoverContainer">                    <!-- ko ifnot: $parent.selected() && $index() < 9 -->                    <div data-bind="attr:{class:\'nodePort portIcon \' + ($data.parent.isData() ? \'dataPort\': $data.parent.isTrainedModel() ? \'trainedModelPort\': \'otherPort\')}"></div>                    <!-- /ko -->                    <div class="portLabel" data-bind="text: portModel.friendlyName + \' (\' + portTypes + \')\'"></div>                </div>                <!-- /ko -->            </div>            <!-- /ko -->            <!-- ko if: hasComment() -->            <div data-bind="attr: { x: x() + width() - 20, y: labelPosY() + 5 }" class="expander">                <div data-bind="click: showHideComment, event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}, text: commentCollapsedExpandedIconSymbol,contextMenu:$root.menuBuilder"></div>            </div>            <!-- /ko -->            <img class="nodeStatus" data-bind="                hoverBalloon:{                    message:balloonMessage,                    forceBalloon:forceBalloon                },                click: $data.nodeIconClicked,                event:{                    mousedown:$root.entityMouseDown,                    mouseup:$root.entityMouseUp,                    dblclick:$root.entityDoubleClick                },                contextMenu:$root.menuBuilder,                attr:{                    src:statusIconURL                }">            </img>        </div>                   <!-- /ko -->    <!-- /ko -->    </div></script><!-- ko ifnot: $root.renderThumbnail --><!-- ExperimentEditor control template markup --><div class="experimentEditorContainer" data-bind="attr:{class:classId}">    <div class="experimentCanvas">        <!-- ko if: shouldShowHelpWatermark -->        <div class="watermarkGraph"></div>        <span class="watermarkTextbox">            %experimentEditorWatermarkText%        </span>        <!-- /ko -->        <!-- ko if: Features.miniMapInExperimentEditorEnabled()-->        <div class="miniMapAnchorDiv">        </div>        <!-- /ko -->        <!-- Experiment Editor SVG template start here -->        <div class="customElements">            <!-- ko template: { name: \'experimentSvgTemplate\', data: $data } --><!-- /ko -->        </div>        <!-- This is outside of custom elements because of some event handlers not cooperating -->        <div class="nativeElements">            <div class="xe-overlay">                <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->                    <!-- ko ifnot: isAnnotation() -->                        <textarea class="nodeComment" data-bind="style:{left:commentPosX,top:commentPosY,width:commentWidth},visible:editingComment,value:comment,hasfocus:editingComment,event:{keydown:$root.commentsEventHandler}"></textarea>                    <!-- /ko -->                    <!-- ko if: isAnnotation() && !annotationNode.annotation.deleted() -->                        <!-- ko ifnot: annotationNode.annotation.isCollapsed()-->                            <textarea class="annotationContentEditable" data-bind="attr:{placeholder:annotationNode.annotation.content().length===0?LocalizedResources.annotationEditPlaceholder:\'\'},style:{left:contentPosX()+\'px\',top:contentPosY()+\'px\',width:(contentWidth()+5)+\'px\',height:contentHeight()+\'px\'},visible:editingComment,value:annotationNode.annotation.content,hasfocus:editingComment,event:{keydown:$root.commentsEventHandler}"></textarea>                        <!-- /ko -->                    <!-- /ko -->                <!-- /ko -->            </div>        </div>    </div>    <div id="controlPanelContainer">        <div id="controlPanel"></div>        <div id="displayFlowSwitch" data-bind="visible:experimentViewModel().experiment.isWebServiceExperiment()">            <div class="displayFlowSwitchIcon"                 data-bind="css: { experimentFlow: experimentViewModel().displayFlowType() === \'experiment\', webServiceFlow: experimentViewModel().displayFlowType() === \'webservice\'},                            click: experimentViewModel().displayFlowToggle.bind(experimentViewModel()),                            attr: { title: experimentViewModel().displayFlowType() === \'experiment\' ? \'%toggleToWebServiceViewTooltip%\' : \'%toggleToExperimentViewTooltip%\' }"></div>        </div>    </div>    <div class="experiment-statusAlertsContainer">        <div class="experiment-statusAlerts" data-bind="text: draftSaveLabel"></div>        <div class="experiment-statusAlerts" data-bind="text: refreshStatusLabel"></div>    </div></div><!-- /ko -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._editorSurfaceV2Markup");var ExperimentEditorTemplates;(function(e){e._experimentEditorMarkup='<div class="experiment-container">    <div class="xe-utilityPanelRoot"         style="display: none;"         data-bind="visible: !readOnlyMode(),                    resize: {                        direction: \'right\',                        parentContainerSelector: \'.experiment-container\',                        minSize: 254,                        id: \'palette\'                    },                    collapse: {                        collapseButtonSelector: \'.paletteExpander\',                        collapsed: paletteIsCollapsed,                        collapseFrom: \'right\',                        collapsedSize: 36,                        id: \'palette\'                    }">        <div class="icon paletteExpander"></div>        <div class="xe-paletteTitle">%datasetsModulesTrainedModelsLabel%</div>        <div class="xe-paletteContent">        <div class="xe-searchBox">            <input tabindex="3" type="text" data-bind="value:searchText, valueUpdate:[\'input\',\'keyup\']" placeholder="%palletteSearchBoxPlaceholder%" />            <span class="xe-searchIcon icon-Discovery"></span>        </div>        <div class="xe-utilityPanel"></div>    </div>    </div>    <div class="experiment-container-right">        <div tabindex="5" class="xe-propertyPanel">            <div class="propertyEditorRoot"></div>        </div>        <div class="headerExperimentEditorContainer">            <!-- ko if: projectViewModel.experimentVMs().length > 1 -->            <div tabindex="1" class="project-header">                <ul class="project-experiments-tabs" id="project-experiments-tabs">                    <!-- ko foreach: projectViewModel.experimentVMs() -->                    <li data-bind="text: roleName,                        attr: { title: roleName },                        click: navigate,                        css: { active: active(),                                inactive: !active() },                        style: { \'border-left\': $index() === 0 ? \'1px solid #d9d9d9\' : false }" />                    <!-- /ko -->                </ul>            </div>            <!-- /ko -->            <div tabindex="2" class="experiment-header" data-bind="style: { top: projectViewModel.experimentVMs().length > 1 ? \'52px\' : \'0px\' }">                <input class="experiment-description"                       id="experiment-description"                       type="text"                       placeholder="Enter experiment name here"                       data-bind="validatedInputBox: {                                        value: experiment.description,                                        disabled: readOnlyMode                                      },                                      hasfocus: descriptionFocus,                                  visible: experimentEditorViewModel.experimentViewModel().experimentLoaded,                                      attr: { disabled: readOnlyMode }" />                <div class="experiment-stateLabel" data-bind="text: experimentEditorViewModel.experimentViewModel().experimentStateDisplay().statusLabel, visible: experimentEditorViewModel.experimentViewModel().experimentLoaded"></div>                <img class="experiment-stateIcon" data-bind="hoverBalloon: { message: experimentEditorViewModel.experimentViewModel().experimentStateDisplay().iconHoverBalloon },                                      visible: experimentEditorViewModel.experimentViewModel().experimentLoaded,                                      attr: { src: experimentEditorViewModel.experimentViewModel().experimentStateDisplay().statusIconUrl }" />            </div>            <div tabindex="3" class="experimentEditorRoot" data-bind="style: { top: projectViewModel.experimentVMs().length > 1 ? \'96px\' : \'44px\', stopBinding: true }"></div>        </div>    </div>    <div class="customUX hidden">    </div>    <div class="prefetchImages"></div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._experimentEditorMarkup");var ExperimentEditorTemplates;(function(e){e._experimentPropertyTabMarkup='<div class="experiment-property-tab" data-bind="visible: selected">    <!-- ko if: graphNode() -->    <div class="propertyEditor-entityParameters"            data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.propertyEditor-heading\',                        contentSelector: \'.propertyEditor-content\',                        collapsed: entityParamsCollapsed,                        collapseFrom: \'bottom\',                        id: \'entityParameters\'}">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader" data-bind="text: selectedGraphNodeName"></h2>        </div>        <div class="propertyEditor-content">            <!-- ko if: showImportDataWizard()-->                <input type="button" class="datalab-gridCellPropertyItem importDataButton" data-bind="click: launchImportDataWizard, attr:{value:LocalizedResources.launchImportDataWizardButton}"/>            <!-- /ko -->            <!-- ko if: graphNode() instanceof module.Module-->            <div class="noParameters" data-bind="visible: Object.keys(graphNode().graphNode.parameters).length === 0 &&                                                                    !graphNode().statusDetails.property.value(),                                                 text: LocalizedResources.PropertyEditorNoParameter"></div>            <!-- ko foreach: nodeParameters -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- ko if: !(graphNode().isDeterministic) -->            <!-- ko if: window.Features.showUsePreviousResultsOption() -->            <!-- ko with: graphNode().usePreviousResults -->            <div class="textAreaProperty" data-bind="template: { name: \'usePreviousResultsParameter\' }"></div>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- ko with: graphNode().startTime -->            <experiment-parameter params="viewModel: $data" data-bind="visible: property.value()"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().endTime -->            <experiment-parameter params="viewModel: $data" data-bind="visible: property.value()"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().elapsedTime -->            <experiment-parameter params="viewModel: $data" data-bind="visible: property.value()"></experiment-parameter>            <!-- /ko -->            <div data-bind="visible: graphNode().statusDetails.property.value()">                <!-- ko with: graphNode().statusCode -->                <experiment-parameter params="viewModel: $data"></experiment-parameter>                <!-- /ko -->                <!-- ko with: graphNode().statusDetails -->                <experiment-parameter params="viewModel: $data"></experiment-parameter>                <!-- /ko -->            </div>            <div data-bind="visible: graphNode().statusCode.property.value() !== \'NotStarted\' &&                                                graphNode().statusCode.property.value() !== \'Canceled\'">                <!-- ko with: graphNode().outputLog -->                <experiment-parameter params="viewModel: $data" data-bind="visible: property.value()"></experiment-parameter>                <!-- /ko -->            </div>            <div data-bind="visible: graphNode().statusCode.property.value() !== \'NotStarted\' &&                                                graphNode().statusCode.property.value() !== \'Finished\' &&                                                graphNode().statusCode.property.value() !== \'Canceled\'">                <!-- ko with: graphNode().errorLog -->                <experiment-parameter params="viewModel: $data" data-bind="visible: property.value()"></experiment-parameter>                <!-- /ko -->            </div>            <div data-bind="visible: graphNode().statusCode.property.value() !== \'NotStarted\' &&                                                graphNode().statusCode.property.value() !== \'Canceled\' &&                                                graphNode().statusCode.property.value() !== \'Running\'">            </div>            <!-- /ko -->            <!-- ko if: graphNode() instanceof webServicePort.WebServicePort-->            <!-- ko foreach: nodeParameters -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- /ko -->            <!-- ko if: graphNode() instanceof dataset.Dataset -->            <!-- ko with: graphNode().author -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().size -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().format -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().createdOn -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().viewDataset -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- /ko -->            <!-- ko if: graphNode() instanceof trainedModel.TrainedModel -->            <!-- ko with: graphNode().author -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().createdOn -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().trainingExperiment -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- /ko -->            <!-- ko if: graphNode() instanceof transform.Transform -->            <!-- ko with: graphNode().author -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().createdOn -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- ko with: graphNode().trainingExperiment -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!-- /ko -->        </div>    </div>    <!-- /ko -->    <!-- ko if: experimentEditorViewModel.experimentViewModel() && webServiceParameters.count() > 0 -->    <div class="propertyEditor-globalParameters"            data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.propertyEditor-heading\',                        contentSelector: \'.propertyEditor-content\',                        collapsed: globalParamsCollapsed,                        collapseFrom: \'bottom\',                        id: \'globalParameters\'                    }">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader" data-bind="text: LocalizedResources.WebServiceParameters"></h2>        </div>        <div class="propertyEditor-content">            <!-- ko foreach:Util.values(webServiceParameters()) -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->        </div>    </div>    <!-- /ko -->    <!-- Competition Section -->    <!-- ko if: showCompetitionProperties -->     <div class="propertyEditor-competitionProperties"            data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.propertyEditor-heading\',                        contentSelector: \'.propertyEditor-content\',                        collapsed: competitionPropertiesCollapsed,                        collapseFrom: \'bottom\',                        id: \'competitionProperties\'                    }">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader" data-bind="text: LocalizedResources.CompetitionProperties"></h2>        </div>        <div class="propertyEditor-content" data-bind="with: $root.tabs[0].CompetitionProperties">            <div class="competition-steps">                <!-- We want to include the first step “Copy starter experiment”, and mark it always completed. This gives user a sense of progress and differentiation to the rest of the steps. -->                <div class="competition-step isCompleted" data-bind="text: LocalizedResources.competitionStatusCreateStarterExperiment"></div>                <div class="competition-step" data-bind="css: { isCompleted: isScoringExperimentCreated }, text: LocalizedResources.competitionStatusCreateScoringExperiment"></div>                <div class="competition-step" data-bind="css: { isCompleted: isWebServicePublished }, text: LocalizedResources.competitionStatusCreateWebService"></div>                <div class="competition-step" data-bind="css: { isCompleted: isSubmittedToCompetition }, text: LocalizedResources.competitionStatusSubmitWebService"></div>            </div>            <!-- ko with: competitionUrl -->            <div class="textAreaProperty viewCompetitionLinkContainer">                <experiment-parameter params="viewModel: $data"></experiment-parameter>            </div>            <!-- /ko -->        </div>    </div>    <!-- /ko -->    <!-- end of Competition Section -->    <!-- ko if: experimentEditorViewModel.experimentViewModel().experimentLoaded && (!window.Features.experimentDescriptionEnabled() || !graphNode()) -->    <div class="propertyEditor-experimentProperties"            data-bind="jQueryCollapse: {                            collapseButtonSelector: \'.propertyEditor-heading\',                            contentSelector: \'.propertyEditor-content\',                            collapsed: experimentPropertiesCollapsed,                            collapseFrom: \'bottom\',                            id: \'experimentProperties\'                        }">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader" data-bind="text: LocalizedResources.ExperimentProperties"></h2>        </div>        <div class="propertyEditor-content">            <!-- ko foreach: experimentEditorViewModel.experimentViewModel().experimentProperties() -->            <experiment-parameter params="viewModel: $data"></experiment-parameter>            <!-- /ko -->            <!--Experiment Summary and Description-->            <div data-bind="visible: window.Features.experimentDescriptionEnabled()">                <div class="experimentSummary"                        data-bind="jQueryCollapse: {                            collapseButtonSelector: \'.experimentSummary-heading\',                            contentSelector: \'.experimentSummary-content\',                            collapsed: experimentSummaryCollapsed,                            collapseFrom: \'bottom\',                            id: \'experimentSummary\'                        }">                    <div class="experimentSummary-heading">                        <div class="propertyEditor-expander"></div>                        <h2 class="propertyEditor-expanderHeader" data-bind="text: LocalizedResources.experimentSummary"></h2>                    </div>                    <div class="experimentSummary-content">                        <!-- ko with: experimentEditorViewModel.experimentViewModel().summary -->                        <div data-bind="template: { name: \'editableTextAreaProperty\', data: {maxCharacters: 140, showMaxCharacterWarning: true, placeholderText: property.placeholderText, isReadOnly: $root.tabs[0].readOnlyMode()}}"></div>                        <!-- /ko -->                    </div>                </div>                <!-- ko if: !experimentEditorViewModel.experimentViewModel().isSampleExperiment() -->                <div class="experimentDetails"                        data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.experimentDetails-heading\',                        contentSelector: \'.experimentDetails-content\',                        collapsed: experimentDetailsCollapsed,                        collapseFrom: \'bottom\',                        id: \'experimentDetails\'                    }">                    <div class="experimentDetails-heading">                        <div class="propertyEditor-expander"></div>                        <h2 class="propertyEditor-expanderHeader" data-bind="text: LocalizedResources.experimentDetailedDescription"></h2>                    </div>                    <div class="experimentDetails-content">                        <!-- ko with: experimentEditorViewModel.experimentViewModel().details -->                        <div data-bind="template: { name: \'editableTextAreaProperty\', data: {expandOnFocus: true, placeholderText: property.placeholderText, isReadOnly: $root.tabs[0].readOnlyMode()} }"></div>                        <!-- /ko -->                    </div>                </div>                <!-- /ko -->                <!-- ko if: window.Features.communityUXInStudioEnabled() -->                <!-- ko with: experimentEditorViewModel.experimentViewModel().detailsLink -->                <div class="original-experiment-documentation-link" data-bind="template: { name: \'linkProperty\' }, visible: property.value()"></div>                <!-- /ko -->                <!-- /ko -->            </div>        </div>    </div>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._experimentPropertyTabMarkup");var ExperimentEditorTemplates;(function(e){e._experimentSaveAsDialogMarkup='<div id="experimentSaveAsDialog">    <h1 class="aux-dialogHeader">%experimentSaveAsDialogHeading%</h1>    <h2 class="aux-dialogSubHeader">%experimentSaveAsDialogHeader%</h2>    <div class="formContainer">        <div class="fieldLabel">            <span>%experimentSaveAsDialogExperimentName%</span>        </div>        <input class="enterField" type="text" data-bind="validatedInputBox: { value: experimentName }, attr: { placeholder: experimentName().length===0 ? LocalizedResources.experimentSaveAsDialogEnterHere : \'\' }" />    </div>    <!-- ko if: workspaceSelectorEnabled() -->    <div class="formContainer">        <div class="fieldLabel">%copyExperimentDialogDestinationWorkspace%</div>        <select data-bind="options: workspaceOptions, optionsText: \'DisplayText\', value: destinationWorkspace, optionsAfterRender: disableUnavailableOptions.bind($data)"></select>        <div class="dialog-warning copy-experiment-warning" data-bind="visible: !destinationIsCurrentWorkspace()">%copyExperimentDialogCopyExperimentWarning%</div>    </div>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._experimentSaveAsDialogMarkup");var ExperimentEditorTemplates;(function(e){e._experimentSaveAsMarkup='<div class="experimentSaveAsDialog">    <h1>%experimentSaveAsDialogHeading%</h1>    <div class="contentDiv">        <label class="enterNameLabel">%experimentSaveAsDialogExperimentName%</label>        <div class="experimentNameHelpLink dlwux-sprite-icon-drawer-help" data-bind="click: launchSaveAsHelp"></div>        <input type="text" class="enterField" data-bind="validatedInputBox: { value: name }, attr: { placeholder: name().length===0 ? LocalizedResources.experimentSaveAsDialogEnterHere : \'\' }" style="font-size: 18px;" />    </div>    <div class="icon customUXTick" data-bind="click: saveNameAndClose"></div> </div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._experimentSaveAsMarkup");var ExperimentEditorTemplates;(function(e){e._expiredTrialDialogMarkup='<div class="trial-dialog">    <h1 class="dialog-title">%trialDialogExpiredTrialTitle%</h1>    <div class="dialog-description" data-bind="html: descriptionHtml"></div>    <div class="dialog-button-container">        <button class="dialog-green-button dialog-button-left" data-bind="click: signIn">%trialDialogSignIn%</button>        <button class="dialog-gray-button dialog-button-right" data-bind="click: endTrial">%trialDialogEndTrial%</button>    </div>    <a class="dialog-link" href="%trialDialogLearnMoreUrl%" target="_blank">%trialDialogLearnMore%</a></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._expiredTrialDialogMarkup");var ExperimentEditorTemplates;(function(e){e._feedbackControlMarkup='<div title="%feedbackHoverText%"     class="datalab-feedback"     data-bind="css: { expanded: isExpanded() }">    <!-- left -->    <div class="datalab-feedback-left"         data-bind="css: { expanded: isExpanded() }">        <div class="datalab-feedback-left-question"             data-bind="css: { expanded: isExpanded() }, text: question">            %feedbackWhatDidYouLike%        </div>        <textarea class="datalab-feedback-textarea"                    placeholder="%feedbackPlaceholder%"                    data-bind="click: expand, css: { expanded: isExpanded() }, value: feedbackText, valueUpdate: \'input\', attr: { maxlength: MAX_LENGTH }"></textarea>        <div class="datalab-feedback-character-counter" data-bind="text: remainingLengthText, visible: isExpanded"></div>    </div>    <!-- right -->    <div class="datalab-feedback-right"         data-bind="css: { expanded: isExpanded() }">        <a class="datalab-feedback-rightImage datalab-feedback-iconSmileyHappy selected"           title="%feedbackSendASmile%"           data-bind="click: smileyHappySelected, css: { selected: isHappy() }"           href="#">        </a>        <a class="datalab-feedback-rightImage datalab-feedback-iconSmileySad"           title="%feedbackSendAFrown%"           data-bind="click: smileySadSelected, css: { selected: !isHappy() }"           href="#">        </a>        <a class="datalab-feedback-bottomValidation"           title="%feedbackSubmitFeedback%"           data-bind="click: sendFeedback"           href="#">        </a>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._feedbackControlMarkup");var ExperimentEditorTemplates;(function(e){e._helpSearchMarkup='<div class="helpSearch">    <!-- ko if: !helpSearchEnabled()-->    <div class=\'helpIcon helpIconNoSearch\'></div>    <!-- /ko -->    <!-- ko if: helpSearchEnabled() -->    <div class=\'helpIcon helpIconWithSearch\'></div>    <input id="searchBox" type=\'text\' placeholder="%helpSearchPlaceholder%" maxlength="100" data-bind="value: queryInput,                                                                                   valueUpdate: \'input\',                                                                                              event: { keydown: onKeyDownEvent }" />    <div id="helpSearchResults" data-bind="slideVisible: isSearchResultsVisible,                                           animating: isSearchResultsAnimating">        <div id=\'helpResultsDownArrow\' data-bind="click: hideResults"></div>                <div class="helpResultsTitle" id="resultsExistTitle" data-bind="visible: !hasErrors()">            <span data-bind="visible: searchResults().length !== 0">%helpSearchHelpContentFor%</span>            <span data-bind="visible: searchResults().length === 0">%helpSearchNoResults%</span>            <i data-bind="text: currentQuery"></i>        </div>        <div class="helpResultsTitle" data-bind="visible: hasErrors">            %helpSearchNoResults%         </div>        <ul id="helpSearchQueryResults" data-bind="visible: searchResults().length !== 0">            <!-- ko foreach: searchResults -->            <li class=\'helpSearchResult\' data-bind="text: moduleName,                                                    click: $root.searchResultClicked"></li>            <!-- /ko -->        </ul>                <!-- ko if: synonymResults().length !== 0 -->        <div id=\'helpResultsDivider\'></div>        <div class=\'helpResultsTitle\' id="semanticSynonymsExistTitle">%helpSearchDidYouMean%</div>        <ul id="semanticSynonymsQueryResults">            <!-- ko foreach: synonymResults -->            <li class=\'semanticSynonym\' data-bind="text: $data,                                                   click: $parent.synonymResultClicked"></li>            <!-- /ko -->        </ul>        <!-- /ko -->    </div>    <div id="contextualHelpResults" style="display:none"></div>    <div id=\'helpLoader\' data-bind="visible: isLoading" />    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._helpSearchMarkup");var ExperimentEditorTemplates;(function(e){e._invitationDialogMarkup="<div class='invitationDialogContent'>    <div class=\"invitationDialogConnectInstructions\"><span>%accessPermissionInstructions%</span></div>    <span id='invitationDialogInstructions' data-bind=\"text: instructions,css:{invitationDialogInstructionsError: error}\"></span>    <br />    <div contenteditable='true' spellcheck='false' class='invitationDialogAddressesBox' data-bind=\"event:{keypress: pressHandler}\"></div>    <div class='invitationDialogRoleSelector'>        Add as:        <select data-bind='value: role'>            <option value='User'>%user%</option>            <option value='Owner'>%owner%</option>        </select>        <span data-bind='text:roleDescription' style='margin-left: 10px'></span>    </div></div>"})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._invitationDialogMarkup");var ExperimentEditorTemplates;(function(e){e._limitedFeatureDialogMarkup='<div class="trial-dialog">    <h1 class="dialog-title" data-bind="text: title"></h1>    <div class="dialog-description" data-bind="foreach: description">        <p data-bind="html: $data"></p>    </div>    <div class="dialog-button-container">        <button class="dialog-green-button dialog-button-left" data-bind="click: signUp">%trialDialogShowMeHow%</button>        <button class="dialog-gray-button dialog-button-right autofocus" data-bind="click: dismiss">%trialDialogNotNow%</button>    </div>    <!-- ko with: link -->    <a class="dialog-link" style="font-size: 10px" href="#" target="_blank" data-bind="attr: { href: url }, text: text"></a>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._limitedFeatureDialogMarkup");var ExperimentEditorTemplates;(function(e){e._menuMarkup='<script type="text/html" id="menuItemTemplate">    <!-- ko if:(!menuItem.divider()) -->    <li class="datalab-contextMenuItem"        data-bind="event: {mouseup:onActivated,mousedown:onMouseDown,mouseover:onMouseOverFct,mouseout:onMouseOutFct},                   subMenu:{activate:subMenu, menuSelector:parentMenu, displayCallback: onSubMenuDisplayed},                   css: {disabled:!enabled(), enabled:enabled(), hasSubmenu: subMenu}">        <!-- ko if:(menuItem.iconClass() !== \'\') -->        <div data-bind="attr:{class: \'menuItemImage \' + menuItem.iconClass() }"></div>        <!-- /ko -->        <span data-bind="text: menuItem.label"></span>        <!-- ko if: subMenu -->        <div class="datalab-contextMenu datalab-nocontext" style="position: absolute;">            <ul data-bind=\'template: { name: "menuItemTemplate", foreach: subMenu.items }\'></ul>        </div>        <div class="ee-rightarrow"></div>        <!-- /ko -->        <!-- ko if: !subMenu -->        <!-- ko if: menuItem.enabledTooltip() && enabled() -->        <div class="contextMenuToolTip" data-bind="hoverBalloon: { message: menuItem.enabledTooltip() } "></div>        <!-- /ko -->        <!-- ko if: menuItem.disabledTooltip() && !enabled() -->        <div class="contextMenuToolTip" data-bind="hoverBalloon:  { message: menuItem.disabledTooltip() } "></div>        <!-- /ko -->        <!-- /ko -->    </li>    <!-- /ko -->    <!-- ko if:menuItem.divider() -->    <li class="datalab-contextMenuItem divider"></li>    <!-- /ko --></script><script type="text/html" id="datalab-contextMenuTemplate">    <div class="datalab-contextMenu datalab-nocontext" style="position: absolute;" data-bind="style: { zIndex: zIndex }, event: {contextmenu:menu.contextMenuMouseUp}">        <ul class="datalab-contextMenu" data-bind="template: { name: \'menuItemTemplate\', foreach: menu.items }"></ul>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._menuMarkup");var ExperimentEditorTemplates;(function(e){e._miniMapMarkup='<div class="miniMapAndLauncherContainer">    <div class="miniMapLauncher" data-bind="click: toggleExpandCollapse, attr: { title: LocalizedResources.showHideMiniMap }, css: { animatingLauncher: animatingLauncher }">    </div>    <div class="miniMapContainer miniMapBackground miniMapInvisible"         data-bind="collapse: {            collapseFrom: \'top\',            id: \'miniMap\',            collapseButtonSelector: \'.miniMapExpander\',            collapsedSize: 0,            collapsed: miniMapCollapsed,            animationEnded: animationEnded         }">        <hflexbox class="miniMapTitleContainer">            <flexfill class="miniMapTitle">%miniMapTitle%</flexfill>            <flexstatic class="miniMapExpander" data-bind="click: animateLauncher"></flexstatic>        </hflexbox>        <div class="miniMapDiv"></div>        <svg xmlns="http://www.w3.org/2000/svg"             xmlns:xlink="http://www.w3.org/1999/xlink"             data-bind="visible: !miniMapCollapsed(), event: { mouseleave: draggingStarted() ? highlightDragStop : null, mouseup: draggingStarted() ? highlightDragStop : null, mousemove: draggingStarted() ? highlightDrag : null }"             class="miniMapPositionHighlightSvg"             preserveAspectRatio="xMidYMid meet"             width="100%" height="100%">            <rect class="miniMapPositionHighlightRect"                  data-bind="attr: { x: positionHighlight().x, y: positionHighlight().y, width: positionHighlight().width, height: positionHighlight().height },                      event:{ mousedown: highlightDragStart }" />            <!--now add rectangles to shadow the non-highlighted part of the graph by having a slight opacity. They should not intersect since opacity is additive. -->            <rect class="miniMapShadowRect"                  data-bind="attr: { x: 0, y: 0, width: Math.max(mapWidth, 0), height: Math.max(positionHighlight().y, 0) }" />            <rect class="miniMapShadowRect"                  data-bind="attr: { x: 0, y: positionHighlight().y, width: Math.max(positionHighlight().x,0), height: Math.max(positionHighlight().height,0) }" />            <rect class="miniMapShadowRect"                  data-bind="attr: { x: 0, y: positionHighlight().y + positionHighlight().height, width: Math.max(mapWidth,0), height: Math.max(mapHeight - positionHighlight().y - positionHighlight().height,0) }" />            <rect class="miniMapShadowRect"                  data-bind="attr: { x: positionHighlight().x + positionHighlight().width, y: positionHighlight().y, width: Math.max(mapWidth - positionHighlight().x - positionHighlight().width,0), height: Math.max(positionHighlight().height,0) }" />        </svg>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._miniMapMarkup");var ExperimentEditorTemplates;(function(e){e._modalDialogMarkup='<div class="modal modal-dialog" id="modal" style="top:32%" data-backdrop="static" data-keyboard="false">    <div class="modal-content">        <div class="modal-header" data-bind="template: headerTemplate">             <!-- ko if: !$data.hideClose -->            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <!-- /ko -->            <div data-bind="text: headerLabel"></div>        </div>        <div class="modal-body" data-bind="template: bodyTemplate">            <p data-bind="html: bodyText"></p>        </div>        <!-- ko if: $root.footerTemplate -->        <div class="modal-footer" data-bind="template: footerTemplate">            <!-- ko foreach: buttons-->            <button class="btn btn-link" data-dismiss="modal" data-bind="text: $data.label, click: $data.onClick, disable: $data.isDisabled, css: $data.class, style: $data.style"></button>            <!-- /ko -->        </div>         <!-- /ko -->    </div></div>\''})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._modalDialogMarkup");var ExperimentEditorTemplates;(function(e){e._moduleErrorMarkup='<div class="errorAndOutputLogDialog">    <h1 data-bind="text: dialogHeading"></h1>    <flexfill style="min-height: 210px">        <vflexbox>            <flexstatic class="errorDescription">                <span data-bind="text: errorDescription"></span>                <!-- ko if: errorInfo().hasErrorId -->                <span class="errorLinkParentheses">. (</span>                <a class="errorHelpLink" data-bind="attr: { href: errorHelpLink }, text: errorLinkLabel, click: launchErrorHelp"></a>                <span class ="errorLinkParentheses">)</span>                <!-- /ko -->            </flexstatic>            <flexstatic>                <span>%moduleErrorForumPrompt%</span>                <a class="" data-bind="click: launchForum" href="#">%moduleErrorForumLink%</a>            </flexstatic>            <flexstatic data-bind="visible: chatVisible">                <span>%moduleErrorChatPrompt%</span>                <a data-bind="click: toggleChat" href="#">%moduleErrorChatLink%</a>            </flexstatic>            <textarea class="smallLogMessage" readonly wrap="off" data-bind="text: errorDetails, visible: errorInfo().containsAdditionalInformation"></textarea>            <div>                <div class="dlwux-fx-dialog-ok icon moduleErrorTick" data-bind="click: close"></div>            </div>        </vflexbox>    </flexfill></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._moduleErrorMarkup");var ExperimentEditorTemplates;(function(e){e._moduleNameConflictDialogMarkup='<h2 data-bind="text: title"></h2><h1 data-bind="text: text"></h1><div class="name-conflict-list" data-bind="foreach: nameInputs">    <div class="name-conflict">        <label><span data-bind="text: $parent.labelText"></span><span class="module-name" data-bind="text: originalName, attr: { title: originalName }"></span></label>        <input type="text" data-bind="validatedInputBox: { value : newName }, event: { keypress: $parent.enterToAccept }" />    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._moduleNameConflictDialogMarkup");var ExperimentEditorTemplates;(function(e){e._nameAssetDialogMarkup='<h2 data-bind="text: title"></h2><label data-bind="text: label"></label><input type="text" data-bind="validatedInputBox: { value: newName }, event: { keypress: enterToAccept }" />'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._nameAssetDialogMarkup");var ExperimentEditorTemplates;(function(e){e._newDataGatewayStep1Markup='<script type="text/html" id="NewDataGatewayStep1Template">    <div id="dataGatewayNameDialog" class="fx-dialog-template datalab-dialog">        <p>%dataGatewayPreamble%</p>        <label>%newDataGatewayNameLabel%</label>        <input type="text" class="gatewayName" data-bind="value: gatewayName, validatedInputBox: { value: gatewayName }, enable: nameEnabled" />        <label>%newDataGatewayDescriptionLabel%</label>        <textarea class="description" data-bind="value: description, placeholder: \'%newDataGatewayDescriptionPlaceholder%\', enable: nameEnabled"></textarea>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newDataGatewayStep1Markup");var ExperimentEditorTemplates;(function(e){e._newDatasetMenuMarkup="<div class='fxs-drawerdetails-new-dataset'>    <div data-bind='text: detailMessage'></div></div>"})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newDatasetMenuMarkup");var ExperimentEditorTemplates;(function(e){e._newExperimentMenuMarkup=" <div class='fxs-drawerdetails-new-experiment'>     <div class='search-box'>         <div class=\"icon-Discovery\"></div>         <input type='text' placeholder='%newExperimentMenuSearchPlaceholder%' data-bind='value : searchText, valueUpdate : [\"input\", \"keyup\"]'>     </div>    <div class='experiment-tile-list'>        <div data-bind='text: LocalizedResources.newExperimentMenuMicrosoftSamplesHeader'></div>        <!-- ko foreach:sampleExperiments -->             <!-- ko if: isBlankTemplate -->            <div class='experiment-tile' data-bind='visible: isVisible, click: $parent.onExperimentSelected'>                <div class='blank-experiment-preview'>                    <img class='blank-icon' data-bind='attr: {src: icon}' />                </div>                <div class='blank-name' data-bind='text: title'></div>            </div>            <!-- /ko -->                    <!-- ko if: isGuidedExperiment -->            <div class='guided-experiment-tile' data-bind='visible: isVisible, click: $parent.onExperimentSelected'>                <div class='guided-experiment-name'>%guidedExperimentName%</div>            </div>            <!-- /ko -->                        <!-- ko if: !isBlankTemplate && !isGuidedExperiment -->            <div class='experiment-tile' data-bind='visible: isVisible, click: $parent.onExperimentSelected'>                <div class='name' data-bind='text: title'></div>                <div class='experiment-preview'>                    <img class='icon' data-bind='attr: {src: icon}' />                </div>            </div>            <!-- /ko -->        <!-- /ko -->    </div></div>"})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newExperimentMenuMarkup");var ExperimentEditorTemplates;(function(e){e._newExperimentMenuWithCommunityMarkup=' <div class=\'fxs-drawerdetails-new-experiment fxs-drawerdetails-new-notebook\'>    <!-- ko if: disabled() -->        <div><span data-bind="text: disabledReason"></span></div>    <!-- /ko -->    <!-- ko if: !disabled() -->        <vflexbox class="loading-shield" data-bind="visible: loading()">            <div class="loading-label" data-bind=\'text: LocalizedResources.newExperimentMenuLoading\'></div>        </vflexbox>        <div class=\'search-box\'>            <div class="icon-Discovery"></div>            <input type=\'text\' data-bind=\'value : searchTextInstantValue, valueUpdate : ["input", "keyup"], attr: { placeholder: searchBoxPlaceholder }\'>        </div>        <hflexbox class=\'experiment-list-container notebook-list-container\' data-bind="visible: !loading()">            <hflexbox class="experiment-list-header-container">                <div>                    <img class="experiment-list-title-icon" src="/Content/Images/ExperimentCard/icons_msftSample.svg"/>                    <span class="experiment-list-title" data-bind=\'text: LocalizedResources.newExperimentMenuMicrosoftSamplesHeader\'></span>                </div>                <div data-bind=\'style: { marginRight: viewMoreSamplesMargin }, visible: showHeaderLinks\'>                    <!-- ko with: $data.notebookUploadCommand -->                    <span class="experiment-list-upload-notebook">                        <a class="experiment-list-view-more" href="#" data-bind="click: click, text: LocalizedResources.newExperimentMenuUploadNotebook, attr: { title: LocalizedResources.newExperimentMenuUploadNotebookTooltip}"></a>                        <span class="icon-upload"></span>                    </span>                    <!-- /ko -->                    <a class="experiment-list-view-more" href="#" target="_blank" data-bind=\'attr: { href: viewMoreSamplesLink }, text: LocalizedResources.newExperimentMenuViewMoreInGallery\'></a>                    <div class="view-more-popout-image dlwux-sprite-popout-icon"></div>                </div>            </hflexbox>            <hflexbox class=\'experiment-card-list\'>                <!-- ko foreach: cards -->                <div data-bind="template: { name: templateName }, visible: isVisible()"></div>                <!-- /ko -->            </hflexbox>        </hflexbox>    <!-- /ko --></div><!-- Experiment templates --><script type="text/html" id="blank-experiment-card-template">    <vflexbox class="blankExperimentCard" data-bind=\'click: $parent.onCardSelected\'>        <img class=\'blank-icon\' src=\'/Content/SampleExperimentIcons/PlusBlankExperiment.svg\' />        <span class=\'blank-name\' data-bind="text: title"></span>    </vflexbox></script><script type="text/html" id="tour-experiment-card-template">    <vflexbox class="tourExperimentCard" data-bind=\'click: $parent.onCardSelected\'>        <div class=\'tour-name\'>%guidedExperimentName%</div>    </vflexbox></script><script type="text/html" id="experiment-card-template">    <div class="experimentCard" data-bind=\'hoverStatus: overlayIsActive\'>        <!-- ko if: overlayIsActive -->        <div class="hoverOverlay">            <button class="studioOpen" data-bind="click: $parent.onCardSelected">%newExperimentMenuOpenInStudio%</button>            <div class="galleryViewContainer">                <a class="galleryViewLabel" href="#" target="_blank" data-bind="attr: { href: viewInGalleryLink }">%newExperimentMenuViewInGallery%</a>                <div class="popoutImage dlwux-sprite-popout-icon"></div>            </div>            <div class="description" data-bind="ellipsisDiv: catalogEntity.summary"></div>        </div>        <!-- /ko -->        <div class="headerContainer">            <div class="header" data-bind="visible: !$parent.loading(), ellipsisDiv: catalogEntity.name"></div>        </div>        <img class="screenShot" data-bind="attr:{src: catalogEntity.image_url}" />        <div class="algoContainer">            <!-- ko if: algorithmList -->            <span class="algoIcon"></span>            <div class="algoTextContainer" data-bind="ellipsisDiv: algorithmList"></div>            <!-- /ko -->        </div>    </div></script><!-- Jupyter Notebook templates --><script id="blank-notebook-card-template" type="text/html">    <div class="notebook-card-blank" data-bind="click: $parent.onCardSelected">        <div class="notebook-card-icon-container">            <img class="notebook-card-icon" src="#" data-bind="attr: { src: icon, \'class\': \'notebook-card-icon \' + iconClass }" />        </div>        <div class="title" data-bind="text: nameLabel"></div>        <div class="subtitle" data-bind="text: subtitle"></div>    </div></script><script id="example-notebook-card-template" type="text/html">    <div class="notebook-card-sample" data-bind="click: $parent.onCardSelected">        <div class="title" data-bind="ellipsisDiv: nameLabel"></div>        <div class="notebook-card-icon-container">            <img class="notebook-card-icon" src="#" data-bind="attr: { src: icon, \'class\': \'notebook-card-icon \' + iconClass }" />        </div>        <div class="description" data-bind="text: description"></div>    </div></script><!-- TODO: refactor experiment-card-template and gallery-notebook-card-template into one template --><script id="gallery-notebook-card-template" type="text/html">    <div class="experimentCard notebook-card-gallery-sample" data-bind="hoverStatus: overlayIsActive">        <!-- ko if: overlayIsActive -->        <div class="hoverOverlay">            <button class="studioOpen" data-bind="click: $parent.onCardSelected">%newNotebookMenuOpenNotebook%</button>            <div class="galleryViewContainer">                <a class="galleryViewLabel" href="#" target="_blank" data-bind="attr: { href: viewInGalleryLink }">%newExperimentMenuViewInGallery%</a>                <div class="popoutImage dlwux-sprite-popout-icon"></div>            </div>            <div class="description" data-bind="ellipsisDiv: catalogEntity.summary"></div>        </div>        <!-- /ko -->        <img class="languageIcon" data-bind="attr: { src: languageImage }" />            <div class="headerContainer">            <div class="header" data-bind="visible: !$parent.loading(), ellipsisDiv: catalogEntity.name"></div>        </div>        <img class="screenShot" data-bind="attr: { src: catalogEntity.image_url || languageImage || \'\' }" />        <div class="tagContainer" data-bind="foreach: tagList">            <a class="tag" data-bind="text: $data"></a>        </div>        </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newExperimentMenuWithCommunityMarkup");var ExperimentEditorTemplates;(function(e){e._newGalleryCustomModuleMenuMarkup='<div class=\'fxs-drawerdetails-new-experiment fxs-drawerdetails-new-gallery-module\'>    <vflexbox class="loading-shield" data-bind="visible: loading()">        <div class="loading-label" data-bind=\'text: LocalizedResources.newExperimentMenuLoading\'></div>    </vflexbox>    <div class=\'search-box\'>        <div class="icon-Discovery"></div>        <input type=\'text\' data-bind=\'value : searchTextInstantValue, valueUpdate : ["input", "keyup"], attr: { placeholder: searchBoxPlaceholder }\'>    </div>    <hflexbox class=\'experiment-list-container notebook-list-container\' data-bind="visible: !loading()">        <hflexbox class="experiment-list-header-container">            <div>                <img class="experiment-list-title-icon" src="/Content/Images/ExperimentCard/icons_msftSample.svg" />                <span class="experiment-list-title" data-bind=\'text: LocalizedResources.newExperimentMenuMicrosoftSamplesHeader\'></span>            </div>            <div data-bind=\'style: { marginRight: viewMoreSamplesMargin }, visible: showHeaderLinks\'>                <!-- ko with: $data.uploadCommand -->                <span class="experiment-list-upload-notebook">                    <a class="experiment-list-view-more" href="#" data-bind="click: click, text: LocalizedResources.plusNewMenuUploadModule, attr: { title: LocalizedResources.plusNewMenuUploadModuleTooltip}"></a>                    <span class="icon-upload"></span>                </span>                <!-- /ko -->                <a class="experiment-list-view-more" href="#" target="_blank" data-bind=\'attr: { href: viewMoreSamplesLink }, text: LocalizedResources.newExperimentMenuViewMoreInGallery\'></a>                <div class="view-more-popout-image dlwux-sprite-popout-icon"></div>            </div>        </hflexbox>        <hflexbox class=\'experiment-card-list\'>            <!-- ko foreach: cards -->            <div data-bind="template: { name: templateName }, visible: isVisible()"></div>            <!-- /ko -->        </hflexbox>    </hflexbox></div><script id="gallery-module-card-template" type="text/html">    <div class="experimentCard" data-bind="hoverStatus: overlayIsActive">        <!-- ko if: overlayIsActive -->        <div class="hoverOverlay">            <button class="studioOpen" data-bind="click: $parent.onCardSelected">%newModuleMenuOpenModule%</button>            <div class="galleryViewContainer">                <a class="galleryViewLabel" href="#" target="_blank" data-bind="attr: { href: viewInGalleryLink }">%newExperimentMenuViewInGallery%</a>                <div class="popoutImage dlwux-sprite-popout-icon"></div>            </div>            <div class="description" data-bind="ellipsisDiv: catalogEntity.summary"></div>        </div>        <!-- /ko -->        <img class="languageIcon" data-bind="attr: { src: languageImage }" />        <div class="headerContainer">            <div class="header" data-bind="visible: !$parent.loading(), ellipsisDiv: catalogEntity.name"></div>        </div>        <img class="screenShot" data-bind="attr: { src: catalogEntity.image_url || languageImage || \'\' }" />        <div class="tagContainer" data-bind="foreach: tagList">            <a class="tag" data-bind="text: $data"></a>        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newGalleryCustomModuleMenuMarkup");var ExperimentEditorTemplates;(function(e){e._newModuleMenuMarkup="<div class='fxs-drawerdetails-new-module'>    <div data-bind='text: detailMessage'></div></div>"})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newModuleMenuMarkup");var ExperimentEditorTemplates;(function(e){e._newNotebookMenuMarkup='<div class="fxs-drawerdetails-new-notebook">    <!-- ko if: disabled() -->        <div><span data-bind="text: disabledReason"></span></div>    <!-- /ko -->    <!-- ko if: !disabled() -->        <div class="notebook-list-container">            <!-- ko foreach: blankNotebooks -->            <div class="notebook-card-blank" data-bind="click: $parent.onCardSelected, template: { name: \'notebook-blank-template\', data: $data }"></div>            <!-- /ko -->            <!-- ko foreach: exampleNotebooks -->            <div class="notebook-card-sample" data-bind="click: $parent.onCardSelected, template: { name: \'notebook-sample-template\', data: $data }"></div>            <!-- /ko -->        </div>    <!-- /ko -->    <script id="notebook-blank-template" type="text/html">        <div class="notebook-card-icon-container">            <img class="notebook-card-icon" src="#" data-bind="attr: { src: icon, \'class\': \'notebook-card-icon \' + iconClass }"/>        </div>        <div class="title" data-bind="text: nameLabel"></div>        <div class="subtitle" data-bind="text: subtitle"></div>    </script>    <script id="notebook-sample-template" type="text/html">        <div class="title" data-bind="ellipsisDiv: nameLabel"></div>        <div class="notebook-card-icon-container">            <img class="notebook-card-icon" src="#" data-bind="attr: { src: icon, \'class\': \'notebook-card-icon \' + iconClass }"/>        </div>        <div class="description" data-bind="text: description"></div>    </script></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newNotebookMenuMarkup");var ExperimentEditorTemplates;(function(e){e._newProjectMenuMarkup='<div class="new-blank-project-dialog-content-container">    <!-- Note that this template will be used until we have the unpack-template-project-from-gallery support -->    <div class="project-tile-list">        <div class="project-tile project-card-blank" data-bind="click: onNewBlankProjectCardSelected">            <div class="project-card-icon-container">                <img class="icon" src=\'/Content/SampleExperimentIcons/PlusBlankExperiment.svg\'/>            </div>            <div class="title">%projectQuickCreateEmptyProjectTitle%</div>        </div>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newProjectMenuMarkup");var ExperimentEditorTemplates;(function(e){e._oldExperimentPropertyTabMarkup='<div class="experiment-property-tab" data-bind="visible: selected">    <!-- ko if: graphNode() -->    <div class="propertyEditor-entityParameters"            data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.propertyEditor-heading\',                        contentSelector: \'.propertyEditor-content\',                        collapsed: entityParamsCollapsed,                        collapseFrom: \'bottom\',                        id: \'entityParameters\'}">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader" data-bind="text: selectedGraphNodeName"></h2>        </div>        <div class="propertyEditor-content">            <!-- ko if: graphNode() instanceof module.Module-->            <div class="noParameters" data-bind="style: { display: Object.keys(graphNode().graphNode.parameters).length === 0 &&                                                                    !graphNode().statusDetails.property.value() ? \'block\' : \'none\' }">%PropertyEditorNoParameter%</div>            <!-- ko foreach: nodeParameters -->            <!-- ko if: !isStaticContent()-->            <div class="textAreaProperty" data-bind="template: { name: \'propertyItem\' }"></div>            <!-- /ko -->            <!-- ko if: isStaticContent()-->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- /ko -->            <!-- ko if: !(graphNode().isDeterministic) -->            <!-- ko if: window.Features.showUsePreviousResultsOption() -->            <!-- ko with: graphNode().usePreviousResults -->            <div class="textAreaProperty" data-bind="template: { name: \'usePreviousResultsParameter\' }"></div>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- ko with: graphNode().startTime -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' },                                                                    style: { display: property.value() ? \'block\' : \'none\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().endTime -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' },                                                                    style: { display: property.value() ? \'block\' : \'none\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().elapsedTime -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' },                                                                    style: { display: property.value() ? \'block\' : \'none\' }"></div>            <!-- /ko -->            <div data-bind="style: { display: graphNode().statusDetails.property.value() ? \'block\' : \'none\' }">                <!-- ko with: graphNode().statusCode -->                <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>                <!-- /ko -->                <!-- ko with: graphNode().statusDetails -->                <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>                <!-- /ko -->            </div>            <div data-bind="style: { display: graphNode().statusCode.property.value() !== \'NotStarted\' &&                                                graphNode().statusCode.property.value() !== \'Canceled\' ? \'block\' : \'none\' }">                <!-- ko with: graphNode().outputLog -->                <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' },                                                                        style: { display: property.value() ? \'block\' : \'none\' }"></div>                <!-- /ko -->            </div>            <div data-bind="style: { display: graphNode().statusCode.property.value() !== \'NotStarted\' &&                                                graphNode().statusCode.property.value() !== \'Finished\' &&                                                graphNode().statusCode.property.value() !== \'Canceled\' ? \'block\' : \'none\' }">                <!-- ko with: graphNode().errorLog -->                <div class="textAreaProperty" data-bind="template: { name: \'buttonProperty\' },                                                                        style: { display: property.value() ? \'block\' : \'none\' }"></div>                <!-- /ko -->            </div>            <div data-bind="style: { display: graphNode().statusCode.property.value() !== \'NotStarted\' &&                                                graphNode().statusCode.property.value() !== \'Canceled\' &&                                                graphNode().statusCode.property.value() !== \'Running\' ? \'block\' : \'none\' }">            </div>            <!-- /ko -->            <!-- ko if: graphNode() instanceof webServicePort.WebServicePort-->            <!-- ko foreach: nodeParameters -->            <div class="textAreaProperty" data-bind="template: { name: \'propertyItem\' }"></div>            <!-- /ko -->            <!-- /ko -->            <!-- ko if: graphNode() instanceof dataset.Dataset -->            <!-- ko with: graphNode().author -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().size -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().format -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().createdOn -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().viewDataset -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- /ko -->            <!-- ko if: graphNode() instanceof trainedModel.TrainedModel -->            <!-- ko with: graphNode().author -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().createdOn -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().trainingExperiment -->            <div class=textAreaProperty data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- /ko -->            <!-- ko if: graphNode() instanceof transform.Transform -->            <!-- ko with: graphNode().author -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().createdOn -->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- ko with: graphNode().trainingExperiment -->            <div class=textAreaProperty data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- /ko -->        </div>    </div>    <!-- /ko -->    <!-- ko if: experimentEditorViewModel.experimentViewModel().webServiceParameters.count() > 0 -->    <div class="propertyEditor-globalParameters"            data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.propertyEditor-heading\',                        contentSelector: \'.propertyEditor-content\',                        collapsed: globalParamsCollapsed,                        collapseFrom: \'bottom\',                        id: \'globalParameters\'                    }">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader">%WebServiceParameters%</h2>        </div>        <div class="propertyEditor-content">            <!-- ko foreach:Util.values(experimentEditorViewModel.experimentViewModel().webServiceParameters()) -->            <div data-bind="template: { name: \'propertyItem\' }"></div>            <!-- /ko -->        </div>    </div>    <!-- /ko -->    <!-- Competition Section -->    <!-- ko if: showCompetitionProperties -->     <div class="propertyEditor-competitionProperties"            data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.propertyEditor-heading\',                        contentSelector: \'.propertyEditor-content\',                        collapsed: competitionPropertiesCollapsed,                        collapseFrom: \'bottom\',                        id: \'competitionProperties\'                    }">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader">%CompetitionProperties%</h2>        </div>        <div class="propertyEditor-content" data-bind="with: $root.tabs[0].CompetitionProperties">            <div class="competition-steps">                <!-- We want to include the first step “Copy starter experiment”, and mark it always completed. This gives user a sense of progress and differentiation to the rest of the steps. -->                <div class="competition-step isCompleted">%competitionStatusCreateStarterExperiment%</div>                <div class="competition-step" data-bind="css: { isCompleted: isScoringExperimentCreated }">%competitionStatusCreateScoringExperiment%</div>                <div class="competition-step" data-bind="css: { isCompleted: isWebServicePublished }">%competitionStatusCreateWebService%</div>                <div class="competition-step" data-bind="css: { isCompleted: isSubmittedToCompetition }">%competitionStatusSubmitWebService%</div>            </div>            <!-- ko with: competitionUrl -->            <div class="textAreaProperty viewCompetitionLinkContainer" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->        </div>    </div>    <!-- /ko -->    <!-- end of Competition Section -->    <!-- ko if: experimentEditorViewModel.experimentViewModel().experimentLoaded && (!window.Features.experimentDescriptionEnabled() || !graphNode()) -->    <div class="propertyEditor-experimentProperties"            data-bind="jQueryCollapse: {                            collapseButtonSelector: \'.propertyEditor-heading\',                            contentSelector: \'.propertyEditor-content\',                            collapsed: experimentPropertiesCollapsed,                            collapseFrom: \'bottom\',                            id: \'experimentProperties\'                        }">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader">%ExperimentProperties%</h2>        </div>        <div class="propertyEditor-content">            <!-- ko foreach: experimentEditorViewModel.experimentViewModel().experimentProperties() -->            <div data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!--Experiment Summary and Description-->            <div data-bind="visible: window.Features.experimentDescriptionEnabled()">                <div class="experimentSummary"                        data-bind="jQueryCollapse: {                            collapseButtonSelector: \'.experimentSummary-heading\',                            contentSelector: \'.experimentSummary-content\',                            collapsed: experimentSummaryCollapsed,                            collapseFrom: \'bottom\',                            id: \'experimentSummary\'                        }">                    <div class="experimentSummary-heading">                        <div class="propertyEditor-expander"></div>                        <h2 class="propertyEditor-expanderHeader">%experimentSummary%</h2>                    </div>                    <div class="experimentSummary-content">                        <!-- ko with: experimentEditorViewModel.experimentViewModel().summary -->                        <div data-bind="template: { name: \'editableTextAreaProperty\', data: {maxCharacters: 140, showMaxCharacterWarning: true, placeholderText: property.placeholderText, isReadOnly: $root.tabs[0].readOnlyMode()}}"></div>                        <!-- /ko -->                    </div>                </div>                <!-- ko if: !experimentEditorViewModel.experimentViewModel().isSampleExperiment() -->                <div class="experimentDetails"                        data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.experimentDetails-heading\',                        contentSelector: \'.experimentDetails-content\',                        collapsed: experimentDetailsCollapsed,                        collapseFrom: \'bottom\',                        id: \'experimentDetails\'                    }">                    <div class="experimentDetails-heading">                        <div class="propertyEditor-expander"></div>                        <h2 class="propertyEditor-expanderHeader">%experimentDetailedDescription%</h2>                    </div>                    <div class="experimentDetails-content">                        <!-- ko with: experimentEditorViewModel.experimentViewModel().details -->                        <div data-bind="template: { name: \'editableTextAreaProperty\', data: {expandOnFocus: true, placeholderText: property.placeholderText, isReadOnly: $root.tabs[0].readOnlyMode()} }"></div>                        <!-- /ko -->                    </div>                </div>                <!-- /ko -->                <!-- ko if: window.Features.communityUXInStudioEnabled() -->                <!-- ko with: experimentEditorViewModel.experimentViewModel().detailsLink -->                <div class="original-experiment-documentation-link" data-bind="template: { name: \'linkProperty\' }, visible: property.value()"></div>                <!-- /ko -->                <!-- /ko -->            </div>        </div>    </div>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._oldExperimentPropertyTabMarkup");var ExperimentEditorTemplates;(function(e){e._oldExperimentPropertyTabsTemplateMarkup='<script type="text/html" id="inputParameter">    <input type="text"           class="datalab-gridCellPropertyItem"           data-bind="validatedInputBox: { value: property.value, disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                      hasfocus: focus,                      readonly:  $root.tabs[0].readOnlyMode() || isDisabled(),                      css: { disabled: $root.tabs[0].readOnlyMode() || isDisabled() },                      event: { focus: $root.tabs[0].onParameterFocus, keydown: $root.tabs[0].onParameterReturn },                      autocomplete: { array: autocompleteArray, dependentObservable: property.value }" /></script><script type="text/html" id="textAreaParameter">    <div style="position: relative"         data-bind="resize: {                        direction: \'bottom\',                        parentContainerSelector: \'.propertyEditor-right\',                        minSize: 125,                        maxSize: 9999,                        id: property.label                    }">        <div class="monaco-container datalab-gridCellPropertyItem"             data-bind="monaco: {                            value: property.value,                            mimetype: monacoMimeType,                            containerWidth: $root.tabs[0].width,                            insertSpaces: untabify,                            expandOnFocus: true                        },                        validatedInputBox: {value: property.value},                        style: { backgroundColor: ($root.tabs[0].readOnlyMode() || isDisabled()) ? \'rgba(0, 0, 0, 0.05)\' : \'\' },                        css: { focused: focus},                        readonly: $root.tabs[0].readOnlyMode() || isDisabled()">        </div>    </div>    <div class="characterCountMessage" style="display:none;">        <span class="maxCharacterCount"></span> <span class="characterCountText"></span>    </div></script><script type="text/html" id="checkboxParameter">    <input type="checkbox"           class="datalab-gridCellPropertyItem"           data-bind="checkboxvalue: { value: property.value, choices: property.descriptor.choices },                      hasfocus: focus,                      disable: ($root.tabs[0].readOnlyMode() || isDisabled()),                      css: { disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                      event: { focus: $root.tabs[0].onParameterFocus }" /></script><script type="text/html" id="multiSelectParameter">    <div class=".datalab-gridCellTextArea"         data-bind="multiSelectMenu: enumItems">        <hflexbox class="datalab-gridCellPropertyItem multiSelectButton">            <div class="datalab-gridCellPropertyItem"                 data-bind="text: buttonLabel"></div>            <div style="float:right">&#9660</div>        </hflexbox>        <ul data-bind="foreach: enumItems" class="datalab-gridCellPropertyItem multiSelectMenu">            <li data-bind="css: classString">                <a href=" #" data-bind="text: displayValue" />            </li>        </ul>    </div></script><script type="text/html" id="selectParameter">    <select class="datalab-gridCellPropertyItem"            data-bind="value: property.value,                   hasfocus: focus,                   options: property.descriptor.choices,                   optionsText: \'displayValue\',                   optionsValue: \'value\',                   disable: ($root.tabs[0].readOnlyMode() || isDisabled()),                   css: { disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                   event: { focus: $root.tabs[0].onParameterFocus },                   attr: { title: toolTipText() }"></select></script><script type="text/html" id="dataGatewayNameParameter">    <select class="datalab-gridCellPropertyItem"            data-bind="value: property.value,                   hasfocus: focus,                   options: choices,                   optionsText: \'displayValue\',                   optionsValue: \'value\',                   disable: ($root.tabs[0].readOnlyMode() || isDisabled()),                   css: { disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                   event: { focus: $root.tabs[0].onParameterFocus }"></select></script><script type="text/html" id="staticTextProperty">    <div class="datalab-gridCellPropertyItem datalab-staticProperty"         data-bind="text: property.value, attr: { title: property.value }, style: { whiteSpace: property.name === \'Status details\' ? \'normal\' : \'nowrap\' }">    </div></script><script type="text/html" id="editableTextAreaProperty">    <div class="editableTextAreaProperty" data-bind="editableTextArea: {}">        <textarea class="datalab-gridCellPropertyItem editableTextArea" data-bind="value: $parent.property.value, css: { disabled: $data.isReadOnly }"></textarea>        <span class="characterLimitReachedWarning">            <span class="charactersLeftCount"></span>            %charactersLeft%        </span>    </div></script><script type="text/html" id="credentialParameter">    <input type="password"           class="datalab-gridCellPropertyItem"           data-bind="validatedInputBox: { value: property.value, disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                      disable: $root.tabs[0].readOnlyMode() || isDisabled(),                      hasfocus: focus,                      css: { disabled:$root.tabs[0].readOnlyMode() || isDisabled() }" /></script><script type="text/html" id="dataGatewayCredentialParameter">    <div data-bind="css: invalidClass()">        <div class="dataGatewayCredentialsValue">            <!-- ko if: property.value() -->            <span data-bind="text: LocalizedResources.dataGatewayCredentialValuesSet" class="gatewayIconGood"></span>            <!-- /ko -->            <!-- ko if: !(property.value()) -->            <span data-bind="text: LocalizedResources.dataGatewayCredentialValuesRequired"></span>            <!-- /ko -->        </div>    </div>    <input type="button"           class="datalab-gridCellPropertyItem"           data-bind="disable: $root.tabs[0].readOnlyMode() || isDisabled() || !canEnterValue(),                      click: enterValue,                      value: LocalizedResources.dataGatewayEnterCredentials,                      hasfocus: focus" />    <div data-bind="if: showClickOnceWarning">        <span data-bind="html: clickOnceWarning" class="gatewayIconWarn"></span>    </div></script><script type="text/html" id="columnPickerParameter">    <div class="datalab-gridCellPropertyItem columnPickerRules"         data-bind="columnPickerRuleDisplay: property.value,                      css: { disabled: (isDisabled()) }">    </div>    <input type="button"           class="datalab-gridCellPropertyItem"           data-bind="value: LocalizedResources.launchColumnSelector,                      click: $root.tabs[0].openColumnPicker,                      disable: $root.tabs[0].readOnlyMode() || isDisabled() || launchDisabled" /></script><script type="text/html" id="usePreviousResultsParameter">    <div class="propertyEditor-headingCell" data-bind="attr:{title:LocalizedResources.usePreviousResultsLabelTooltip}">        <input id="usePreviousResultsCheckbox"               type="checkbox"               class="datalab-gridCellPropertyItem textAreaProperty"               data-bind="checked: property.value, disable: $root.tabs[0].readOnlyMode()" />        <div class="datalab-usePreviousResultsLabel textAreaProperty"             data-bind="text: LocalizedResources.usePreviousResultsLabel">        </div>    </div></script><script type="text/html" id="parameterRangeParameter">    <span class="parameterRangeLabel"          data-bind="text: LocalizedResources.useRangeBuilderLabel"          style="font-size:12px;line-height: 16.25px; font-family: Segoe UI;">    </span>    <input id="UseRangeBuilderCheckbox"           type="checkbox"           class="datalab-gridCellPropertyItem"           data-bind="checked: useRangeBuilder,                      disable: $root.tabs[0].readOnlyMode(),                      css: { disabled: $root.tabs[0].readOnlyMode()}" />    <!-- ko if: !useRangeBuilder() -->    <input type="text"           class="datalab-gridCellPropertyItem"           data-bind="value: literalList,                      validatedInputBox: { value: literalList, disabled: $root.tabs[0].readOnlyMode()},                      readonly: $root.tabs[0].readOnlyMode(),                      css: { disabled: $root.tabs[0].readOnlyMode()}" />    <!-- /ko -->    <!-- ko if: useRangeBuilder() -->    <div>        <span>            <span data-bind="text: LocalizedResources.ParameterRangeLabel"                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            </span>            <span id="ParameterRangeAsString"                  data-bind="text: rangeString"                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            </span>        </span>        <!-- ko if: isLogarithmic() -->        <div class="parameterRangeSlider"             data-bind="slider: [logMin, logMax],                        sliderOptions: {min: logMinLimit, max: logMaxLimit, range:true, step: logSliderStep, values: [logMin, logMax], disabled: $root.tabs[0].readOnlyMode()}"             style="margin: 5px 10px">        </div>        <!-- /ko -->        <!-- ko if: !isLogarithmic() -->        <div class="parameterRangeSlider"             data-bind="slider: [minValue, maxValue],                        sliderOptions: {min: sliderMin, max: sliderMax, range:true, step: linSliderStep, values: [sliderMin, sliderMax], disabled: $root.tabs[0].readOnlyMode()}"             style="margin: 5px 10px">        </div>        <!-- /ko -->        <div>            <span class="parameterRangeLabel"                  data-bind="text: LocalizedResources.rangeBuilderCount"                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            </span>            <input class="parameterRangeCount"                   id="rangeBuilderCount"                   type="text"                   data-bind="value: countValidatable,                              validatedInputBox: { value: countValidatable, disabled: $root.tabs[0].readOnlyMode()},                              readonly: $root.tabs[0].readOnlyMode(),                              css: { disabled: $root.tabs[0].readOnlyMode()}"                   style="width:40px; border: 1px solid #ccc; padding-left: 5px; padding-right: 5px; background-color: #fff;" />        </div>        <!-- ko if: logCapable -->        <div>            <span class="parameterRangeLabel"                  data-bind="text: LocalizedResources.rangeBuilderLogarithmicScaleCheckbox"                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            </span>            <input id="LogarithmicCheckbox"                   type="checkbox"                   class="datalab-gridCellPropertyItem"                   data-bind="checked: isLogarithmic,                              disable: $root.tabs[0].readOnlyMode(),                              css: { disabled: $root.tabs[0].readOnlyMode()}" />        </div>        <!-- /ko -->    </div>    <!-- /ko --></script><script type="text/html" id="linkProperty">    <div class="propertyLink">        <a href=\'#\' data-bind="attr: { title: property.tooltip, href: (property.endpoint && property.endpoint.Size === -1) ? \'#\' : property.value},                      hasfocus: focus,                      event: { focus: $root.tabs[0].onParameterFocus, click: onClick },                      text: property.label"           target="_blank">        </a>    </div>    <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)</div></script><script type="text/html" id="buttonProperty">    <div class="propertyEditor-staticValueCell">        <div class="datalab-gridCellTextArea">            <div class=" propertyeditor-statictextareaitem propertyeditor-headingcellwrapper"                 data-bind="css: { isButton: templateType() === \'buttonProperty\' }, visible: property.value() === false || property.value()">                <button data-bind="attr: { title: property.tooltip, name: property.label},                           hasfocus: focus,                           event: { focus: $root.tabs[0].onParameterFocus, click: onClick },                           text: property.label,                           disable: clickDisabled"></button>            </div>            <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)</div>        </div>    </div></script><script type="text/html" id="propertyKey">    <!-- ko if: isExperimentLevel() && !$root.tabs[0].readOnlyMode() -->    <div>        <input type="text"               class="datalab-gridCellPropertyItem"               data-bind="validatedInputBox: { value: property.validatableName },                              event: { blur: property.textboxBlur, keydown: property.textboxKeydown },                              visible: property.isEditingName" />        <div class="datalab-gridCellKey"             data-bind="attr: { title: property.tooltip },                    text: property.label,                    click: property.toggleEditingName,                    visible: !property.isEditingName()">        </div>    </div>    <!-- /ko -->    <!-- ko ifnot: isExperimentLevel() && !$root.tabs[0].readOnlyMode() -->    <!-- ko if: templateType() === \'linkProperty\' -->    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'linkProperty\' }"></hflexbox>    <!-- /ko -->    <!-- ko if: templateType() === \'buttonProperty\' -->    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'buttonProperty\' }"></hflexbox>    <!-- /ko -->    <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->    <div class="datalab-gridCellKey" data-bind="attr: { title: property.tooltip }, text: property.label"></div>    <!-- /ko -->    <!-- /ko --></script><script type="text/html" id="propertyItem">    <div class="propertyEditor-textAreaItem">        <div class="propertyEditor-headingCellWrapper" data-bind="css: { propertyEditorHeadingCellWrapperEditingName: property.isEditingName, isLink: templateType() === \'linkProperty\' }">            <div class="propertyEditor-headingCell">                <div class="propertyEditor-sideButtonWrapper">                    <div class="parameterIsLinked linkStatus propertyEditorButton"                         data-bind="style: { visibility: property.isLinked() && !isExperimentLevel() ? \'visible\' : \'hidden\' },                                    event: { click: $root.tabs[0].focusLinkedWebServiceParameter },                                    attr: { title: Util.format(LocalizedResources.parameterIsLinkedToWebServiceParameter, linkedParameterName()) }">                    </div>                    <!-- ko if: !isExperimentLevel() && isLinkable -->                    <div class="propertyEditorButton dropMenu"                         data-bind="dropMenu: $root.tabs[0].menuBuilder">                    </div>                    <!-- /ko -->                    <!-- ko if: isExperimentLevel() && !$root.tabs[0].readOnlyMode() -->                    <div class="propertyEditorButton dropMenu"                         data-bind="dropMenu: $root.tabs[0].webServiceParameterMenuBuilder">                    </div>                    <!-- /ko -->                    <!-- ko if: templateType() === "textAreaParameter" -->                    <!-- ko if: showPopupIcon() -->                    <div class="propertyEditorButton"                         data-bind="event:{ mousedown: $root.tabs[0].openScriptEditor}, attr: {title: LocalizedResources.experimentEditorPropertiesPaneScriptEditorPopOut}">                        <span class="icon icon-openscripteditor"></span>                    </div>                    <!-- /ko -->                    <!-- /ko -->                </div>                <!-- ko if: templateType() === \'checkboxParameter\' -->                <div data-bind="template: { name: \'checkboxParameter\' },                                visible: !isExperimentLevel() || property.hasDefaultValue()">                </div>                <!-- /ko -->                <div class="datalab-gridCellKeyWrapper"                     data-bind="template: { name: \'propertyKey\' }">                </div>            </div>        </div>        <!-- ko if: templateType() !== \'checkboxParameter\' && templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->        <!-- ko if: !isExperimentLevel() || property.hasDefaultValue() -->        <div class="propertyEditor-valueCellWrapper">            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"></div>        </div>        <!-- /ko -->        <!-- /ko -->    </div>    <!-- ko foreach: childParameters -->    <!-- ko if: property.isRelevant() -->    <div data-bind="template: { name: \'propertyItem\' }"></div>    <!-- /ko -->    <!-- /ko --></script><script type="text/html" id="checkboxProperty">    <input type="checkbox"           class="datalab-gridCellPropertyItem"           data-bind="checked: property.value,                        hasfocus: focus,                        disable: $root.tabs[0].readOnlyMode(),                        css: { disabled: $root.tabs[0].readOnlyMode() },                        event: { focus: $root.tabs[0].onParameterFocus }" />    <div class="datalab-gridCellKeyWrapper"         data-bind="template: { name: \'propertyKey\' }">    </div></script><script type="text/html" id="staticPropertyItem">    <div class="propertyEditor-staticTextAreaItem propertyEditor-headingCellWrapper"         data-bind="css: { isLink: templateType() === \'linkProperty\', isButton: templateType() === \'buttonProperty\' }, style: { height: property.name === \'Status details\' ? \'100%\': \'22px\' }, visible: property.value() === false || property.value()">        <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'checkboxProperty\' && templateType() !== \'buttonProperty\' -->        <div class="propertyEditor-staticHeadingCell">            <div class="datalab-gridCellKeyWrapper"                 data-bind="template: { name: \'propertyKey\' }">            </div>        </div>        <!-- /ko -->        <div class="propertyEditor-staticValueCell">            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"></div>        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._oldExperimentPropertyTabsTemplateMarkup");var ExperimentEditorTemplates;(function(e){e._onPremiseDisabledMarkup='<div class="trial-dialog">    <h1 class="dialog-title">%trialDialogDisabledFeatureTitle%</h1>    <div class="dialog-description" data-bind="foreach: description">        <p data-bind="html: $data"></p>    </div>    <div class="dialog-button-container">        <button class="dialog-gray-button dialog-button-right autofocus" data-bind="click: dismiss">%close%</button>    </div>    <!-- ko with: link -->    <a class="dialog-link" style="font-size: 10px" href="#" target="_blank" data-bind="attr: { href: url }, text: text"></a>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._onPremiseDisabledMarkup");var ExperimentEditorTemplates;(function(e){e._outputPromotionDialogMarkup='<h2>%SaveOutputAsANewDataset%</h2><!-- This markup is repeated in all dialogs for creating new datasets --><div class="dataset-form" data-bind="with: resource">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadDatasetDialogNewVersionOfDataset%    </div>    <div class="animation-wrapper" data-bind="css: { hide: deprecate() }">        %uploadDatasetDialogEnterName%        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()">    </div>    <div class="animation-wrapper" data-bind="css: { hide: !deprecate() }">        %uploadDatasetDialogExistingDataset%        <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"></div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"></div>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: LocalizedResources.ChooseDatasetToDeprecateAndEllipsis"></select>        </div>    </div></div>%uploadDatasetDialogDescription%<textarea rows="4" data-bind="value: resource.description"></textarea>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._outputPromotionDialogMarkup");var ExperimentEditorTemplates;(function(e){e._paletteMarkup='<script type="text/html" id="palette">    <div class="xe-palette"         data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.xe-paletteHeader\',                        contentSelector: \'.xe-paletteContent\',                        collapsed: isCollapsed,                        collapseFrom: \'bottom\',                        id: path ? path : name()                    }">        <div class="xe-paletteHeader">            <hflexbox>                <div class="paletteCategory-expander"></div>                <!-- ko if: icon !== null -->                <span data-bind="attr: { \'class\': \'paletteCategory-icon \' + icon }"></span>                <!-- /ko -->                <div class="paletteCategory-title" data-bind="text: name, visible: !isEmpty(), css: { expanded: !isCollapsed() }"></div>            </hflexbox>        </div>        <div class="xe-paletteContent">            <!-- ko foreach:items -->                <hflexbox class="xe-paletteItem"                      data-bind="attr: { id: id, class: classId, title: tooltip },                                mouseCapture: { mouseMove: $root.mouseMove, mouseUp: $root.mouseUp, owner: $root },                                event: { mousedown: $root.mouseDown, dblclick: $root.activate },                                visible:isVisible">                    <flexfill class="xe-paletteItemText" data-bind="text: name" ></flexfill>                    <flexstatic class="paletteGripper"></flexstatic>                </hflexbox>            <!-- /ko -->                    <!-- ko foreach:childCategories -->                <!-- ko if: !isEmpty() -->                    <div data-bind="template: { name: \'palette\' }"></div>                <!-- /ko -->            <!-- /ko -->        </div>    </div></script><!-- ko foreach: categories -->    <!-- ko if: !isEmpty() -->        <div data-bind="template: { name: \'palette\' }"></div>    <!-- /ko --><!-- /ko -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._paletteMarkup");var ExperimentEditorTemplates;(function(e){e._pauseUserWithSpinnerMarkup='<vflexbox class="loadingMessageContainer">    <img src="/Content/Images/spinner-md.gif">    <div class="loadingText" data-bind="text:title"></div></vflexbox>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._pauseUserWithSpinnerMarkup");var ExperimentEditorTemplates;(function(e){e._projectDetailsMarkup='<script type="text/html" id="projectDetailsTemplate">    <vflexbox id="propertyPane" class="projectDetails">        <flexstatic data-bind="with: project">            <div class="projectDetailTitle" data-bind="text: Name, visible: $parent.shouldShowTitle"></div>            <div class="projectDetailSectionLabel" data-bind="text: LocalizedResources.projectDetailDescriptionLabel"></div>            <!-- ko if: Description && Description.length > 0-->            <div class="projectDescription" data-bind="text: Description"></div>            <!-- /ko-->            <!-- ko if: !Description || Description.length === 0-->            <div class="projectDetailEmpty" data-bind="text: LocalizedResources.projectDetailNoneEntryText"></div>            <!-- /ko-->        </flexstatic>        <flexfill class="allAssetScroller">            <flexcontent>                <!-- ko if: experiments().length > 0-->                <div class="projectAssetClassExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectAssetClassHeading\',                                                contentSelector: \'.projectAssetsList\',                                                collapsed: experimentsCollapsed,                                                collapseFrom: \'bottom\',                                                id: \'experimentList\'}">                    <div class="projectAssetClassHeading">                        <div class="arrowExpander"></div>                        <div class="projectDetailSectionLabel" data-bind="text: LocalizedResources.projectDetailExperimentExpanderTitle"></div>                    </div>                    <div class="projectAssetsList">                        <ul data-bind="foreach: experiments">                            <li class="projectDetailElement">                                <div class="projectDetailElementExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectDetailElementHeading\',                                                contentSelector: \'.projectDetailList\',                                                collapsed: detailsCollapsed,                                                collapseFrom: \'bottom\',                                                id: id}">                                    <div class="projectDetailElementHeading">                                        <div class="arrowExpander"></div>                                        <div class="experimentAssetIcon"></div>                                        <a class="projectDetailElementLink" data-bind="text: name, click: navigateToExperiment, attr: {href: experimentUrl}"></a>                                    </div>                                    <div class="projectDetailList">                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetOwner"></div>                                            <div class="itemDetailValue" data-bind="text: owner"></div>                                        </div>                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetModified"></div>                                            <div class="itemDetailValue" data-bind="text: updated"></div>                                        </div>                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetStatus"></div>                                            <div class="itemDetailValue" data-bind="text: status"></div>                                        </div>                                    </div>                                </div>                            </li>                        </ul>                    </div>                </div>                <!-- /ko-->                <!-- ko if: notebooks().length > 0-->                <div class="projectAssetClassExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectAssetClassHeading\',                                                contentSelector: \'.projectAssetsList\',                                                collapsed: notebooksCollapsed,                                                collapseFrom: \'bottom\',                                                id: \'notebookList\'}">                    <div class="projectAssetClassHeading">                        <div class="arrowExpander"></div>                        <div class="projectDetailSectionLabel" data-bind="text: LocalizedResources.projectDetailNotebookExpanderTitle"></div>                    </div>                    <div class="projectAssetsList">                        <ul data-bind="foreach: notebooks">                            <li class="projectDetailElement">                                <div class="projectDetailElementExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectDetailElementHeading\',                                                contentSelector: \'.projectDetailList\',                                                collapsed: detailsCollapsed,                                                collapseFrom: \'bottom\',                                                id: id}">                                    <div class="projectDetailElementHeading">                                        <div class="arrowExpander"></div>                                        <div class="notebookAssetIcon"></div>                                        <span class="projectDetailElementText" data-bind="text: name, click: navigateToNotebook"></span>                                    </div>                                    <div class="projectDetailList">                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetLanguage"></div>                                            <div class="itemDetailValue" data-bind="text: language"></div>                                        </div>                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetModified"></div>                                            <div class="itemDetailValue" data-bind="text: lastModified"></div>                                        </div>                                    </div>                                </div>                            </li>                        </ul>                    </div>                </div>                <!-- /ko-->                <!-- ko if: webServices().length > 0-->                <div class="projectAssetClassExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectAssetClassHeading\',                                                contentSelector: \'.projectAssetsList\',                                                collapsed: webServicesCollapsed,                                                collapseFrom: \'bottom\',                                                id: \'webServiceList\'}">                    <div class="projectAssetClassHeading">                        <div class="arrowExpander"></div>                        <div class="projectDetailSectionLabel" data-bind="text: LocalizedResources.projectDetailWebServiceExpanderTitle"></div>                    </div>                    <div class="projectAssetsList">                        <ul data-bind="foreach: webServices">                            <li class="projectDetailElement">                                <div class="projectDetailElementExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectDetailElementHeading\',                                                contentSelector: \'.projectDetailList\',                                                collapsed: detailsCollapsed,                                                collapseFrom: \'bottom\',                                                id: id}">                                    <div class="projectDetailElementHeading">                                        <div class="arrowExpander"></div>                                        <div class="webServiceAssetIcon"></div>                                        <a class="projectDetailElementLink" data-bind="text: name, click:navigateToWebService, attr: {href: webServiceUrl}"></a>                                    </div>                                    <div class="projectDetailList">                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetModified"></div>                                            <div class="itemDetailValue" data-bind="text: lastModified"></div>                                        </div>                                    </div>                                </div>                            </li>                        </ul>                    </div>                </div>                <!-- /ko-->                <!-- ko if: modules().length > 0-->                <div class="projectAssetClassExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectAssetClassHeading\',                                                contentSelector: \'.projectAssetsList\',                                                collapsed: modulesCollapsed,                                                collapseFrom: \'bottom\',                                                id: \'modulesList\'}">                    <div class="projectAssetClassHeading">                        <div class="arrowExpander"></div>                        <div class="projectDetailSectionLabel" data-bind="text: LocalizedResources.projectDetailModuleExpanderTitle"></div>                    </div>                    <div class="projectAssetsList">                        <ul data-bind="foreach: modules">                            <li class="projectDetailElement">                                <div class="projectDetailElementExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectDetailElementHeading\',                                                contentSelector: \'.projectDetailList\',                                                collapsed: detailsCollapsed,                                                collapseFrom: \'bottom\',                                                id: id}">                                    <div class="projectDetailElementHeading">                                        <div class="arrowExpander"></div>                                        <div class="moduleAssetIcon"></div>                                        <div class="projectDetailElementText" data-bind="text: name"></div>                                    </div>                                    <div class="projectDetailList">                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetModified"></div>                                            <div class="itemDetailValue" data-bind="text: lastModified"></div>                                        </div>                                    </div>                                </div>                            </li>                        </ul>                    </div>                </div>                <!-- /ko-->                <!-- ko if: trainedModels().length > 0-->                <div class="projectAssetClassExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectAssetClassHeading\',                                                contentSelector: \'.projectAssetsList\',                                                collapsed: trainedModelsCollapsed,                                                collapseFrom: \'bottom\',                                                id: \'trainedModelsList\'}">                    <div class="projectAssetClassHeading">                        <div class="arrowExpander"></div>                        <div class="projectDetailSectionLabel" data-bind="text: LocalizedResources.projectDetailTrainedModelExpanderTitle"></div>                    </div>                    <div class="projectAssetsList">                        <ul data-bind="foreach: trainedModels">                            <li class="projectDetailElement">                                <div class="projectDetailElementExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectDetailElementHeading\',                                                contentSelector: \'.projectDetailList\',                                                collapsed: detailsCollapsed,                                                collapseFrom: \'bottom\',                                                id: id}">                                    <div class="projectDetailElementHeading">                                        <div class="arrowExpander"></div>                                        <div class="trainedModelAssetIcon"></div>                                        <div class="projectDetailElementText" data-bind="text: name"></div>                                    </div>                                    <div class="projectDetailList">                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetModified"></div>                                            <div class="itemDetailValue" data-bind="text: lastModified"></div>                                        </div>                                    </div>                                </div>                            </li>                        </ul>                    </div>                </div>                <!-- /ko-->                <!-- ko if: datasets().length > 0-->                <div class="projectAssetClassExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectAssetClassHeading\',                                                contentSelector: \'.projectAssetsList\',                                                collapsed: datasetsCollapsed,                                                collapseFrom: \'bottom\',                                                id: \'datasetsList\'}">                    <div class="projectAssetClassHeading">                        <div class="arrowExpander"></div>                        <div class="projectDetailSectionLabel" data-bind="text: LocalizedResources.projectDetailDatasetExpanderTitle"></div>                    </div>                    <div class="projectAssetsList">                        <ul data-bind="foreach: datasets">                            <li class="projectDetailElement">                                <div class="projectDetailElementExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectDetailElementHeading\',                                                contentSelector: \'.projectDetailList\',                                                collapsed: detailsCollapsed,                                                collapseFrom: \'bottom\',                                                id: id}">                                    <div class="projectDetailElementHeading">                                        <div class="arrowExpander"></div>                                        <div class="datasetAssetIcon"></div>                                        <div class="projectDetailElementText" data-bind="text: name"></div>                                    </div>                                    <div class="projectDetailList">                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetModified"></div>                                            <div class="itemDetailValue" data-bind="text: lastModified"></div>                                        </div>                                    </div>                                </div>                            </li>                        </ul>                    </div>                </div>                <!-- /ko-->                <!-- ko if: transforms().length > 0-->                <div class="projectAssetClassExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectAssetClassHeading\',                                                contentSelector: \'.projectAssetsList\',                                                collapsed: transformsCollapsed,                                                collapseFrom: \'bottom\',                                                id: \'transformsList\'}">                    <div class="projectAssetClassHeading">                        <div class="arrowExpander"></div>                        <div class="projectDetailSectionLabel" data-bind="text: LocalizedResources.projectDetailTransformExpanderTitle"></div>                    </div>                    <div class="projectAssetsList">                        <ul data-bind="foreach: transforms">                            <li class="projectDetailElement">                                <div class="projectDetailElementExpander" data-bind="jQueryCollapse: {                                                collapseButtonSelector: \'.projectDetailElementHeading\',                                                contentSelector: \'.projectDetailList\',                                                collapsed: detailsCollapsed,                                                collapseFrom: \'bottom\',                                                id: id}">                                    <div class="projectDetailElementHeading">                                        <div class="arrowExpander"></div>                                        <div class="transformAssetIcon"></div>                                        <div class="projectDetailElementText" data-bind="text: name"></div>                                    </div>                                    <div class="projectDetailList">                                        <div class="projectAssetDetail">                                            <div class="itemDetailLabel" data-bind="text: LocalizedResources.projectDetailAssetModified"></div>                                            <div class="itemDetailValue" data-bind="text: lastModified"></div>                                        </div>                                    </div>                                </div>                            </li>                        </ul>                    </div>                </div>                <!-- /ko-->                <!-- ko if: showAddAssetsLink -->                <div class="addAssetsLink" data-bind="click: showProjectConfigurationDialog">%projectDescriptionAddAssetsLink%</div>                <!-- /ko-->            </flexcontent>        </flexfill>    </vflexbox></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._projectDetailsMarkup");var ExperimentEditorTemplates;(function(e){e._projectDetailMarkup='<div data-bind="visible: !isPropertyTab || selected, css: { standalone: !isPropertyTab}"><!-- ko ifnot: isPropertyTab -->    <div data-bind="template: { name: \'projectDetailsTemplate\' }"></div><!-- /ko --><!-- ko if: isPropertyTab && projectDetailViewModel.project() != null -->    <div data-bind="template: { name: \'projectDetailsTemplate\', data: projectDetailViewModel }"></div><!-- /ko --><!-- ko if: isPropertyTab && projectDetailViewModel.project() === null -->    <!-- ko if: canAddExperimentToProject()-->    <div class="addToProjectLink" data-bind="click: addToProject, text: LocalizedResources.addToProjectLink"></div>    <!-- /ko -->    <!-- ko if: !canAddExperimentToProject()-->    <div class="addToProjectLinkDisabled" data-bind="attr:{title: LocalizedResources.addToProjectLinkDisabled}, text: LocalizedResources.addToProjectLink"></div>    <!-- /ko --><!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._projectDetailMarkup");var ExperimentEditorTemplates;(function(e){e._projectListMarkup='<div id="projects" class="projectListContainer">    <div id="grid" class="projectList"></div>    <project-details></project-details></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._projectListMarkup");var ExperimentEditorTemplates;(function(e){e._propertyEditorMarkup='<div data-bind="resize: {                    direction: \'left\',                    parentContainerSelector: \'.experiment-container-right\',                    minSize: 278,                    id: \'propertyEditor\'                },                collapse: {                    collapseButtonSelector: \'.drawerExpander\',                    collapsed: drawerIsCollapsed,                    animationEnded: openCloseAnimationEnded,                    collapseFrom: \'left\',                    collapsedSize: 36,                    id: \'propertyEditor\'                }"     class="datalab-propertyEditor">    <vflexbox class="propertyEditorContainer">        <flexstatic style="height:30px;">            <flexcontent>                <hflexbox class="propertyEditorHeader">                    <!-- ko foreach: tabs -->                    <flexfill data-bind="css: { notLastTab: $index() + 1 < $root.tabs.length }"><span class="drawerExpandedTitle" data-bind="text: title, css: { deselected: !selected()}, click: function(data, event) { return $root.selectTab(id, data, event) }"></span></flexfill>                    <!-- /ko -->                     <flexstatic class="drawerExpander"></flexstatic>                </hflexbox>            </flexcontent>        </flexstatic>        <flexfill class="propertyEditorContentContainer">            <flexcontent>                <div class="propertyEditor-right">                    <!-- Note that PropertyEditorViewModel sets up the component registry                         for binding with the following elements. -->                    <experiment-property-tab></experiment-property-tab>                    <project-details-tab></project-details-tab>                    <!-- The following ones are v2-specific tabs -->                    <experiment-v2-property-tab></experiment-v2-property-tab>                </div>            </flexcontent>        </flexfill>        <flexstatic class="quickHelpContainer"                    data-bind="resize: {                                   direction: \'top\',                                   parentContainerSelector: \'.propertyEditorContainer\',                                   collapsed: quickHelpCollapsed,                                   minSize: 150,                                   id: \'quickHelp\'                               },                               collapse: {                                    collapseButtonSelector: \'.quickHelpExpander\',                                    collapsed: quickHelpCollapsed,                                    collapseFrom: \'top\',                                    collapsedSize: 36,                                    id: \'quickHelp\'                               }">            <flexcontent>                <vflexbox>                    <flexstatic>                        <hflexbox class="quickHelpHeader">                            <flexfill class="quickHelpTitle">%quickHelpTitle%</flexfill>                            <flexstatic class="quickHelpExpander"></flexstatic>                        </hflexbox>                    </flexstatic>                    <flexfill>                        <flexcontent style="padding:5px; width: auto; height: auto; top: 5px; bottom: 5px; left: 5px; right: 0px">                            <div class="quickHelpContent">                                <div data-bind="text: help.currentHelpTopic"></div>                                <!-- ko if: help.moduleTopicID() -->                                <a class=\'pointerText\' data-bind=\'click:getHelp\'>%quickHelpMore%</a>                                <!-- /ko -->                            </div>                        </flexcontent>                    </flexfill>                </vflexbox>            </flexcontent>        </flexstatic>    </vflexbox></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._propertyEditorMarkup");var ExperimentEditorTemplates;(function(e){e._publishCustomModuleStep1Markup='<script type="text/html" id="PublishCustomModuleStep1Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <div class="publish-custom-module-details" data-bind="foreach: moduleDetailHeaders">                <div class="module-detail-item">                    <span class="module-detail-header" data-bind="text: $data"></span><span class="module-detail-value" data-bind="text: $parent.moduleDetailValues()[$index()]"></span>                </div>            </div>            <label>%publishExperimentToCommunityTagsLabel%</label>            <!-- ko template: { name: \'TagTextBox\', data: new tagTextBoxViewModel.TagTextBoxViewModel(tags) } --><!-- /ko -->            <label>%publishExperimentToCommunitySummaryLabel%</label>            <div data-bind="editableTextArea: {maxCharacters: 140, showMaxCharacterWarning: true}">                <textarea class="summary" data-bind="value: summary, placeholder: \'%publishCustomModuleToCommunitySummaryPlaceholder%\'"></textarea>                <span class="characterLimitReachedWarning">                    <span class="charactersLeftCount"></span>                    %charactersLeft%                </span>            </div>            <label>%publishExperimentToCommunityDescriptionLabel%</label>            <!-- ko ifnot: useMarkdownEditor -->            <textarea class="description" data-bind="value: description, placeholder: \'%publishCustomModuleToCommunityDescriptionPlaceholder%\'"></textarea>            <!-- /ko -->            <!-- ko if: useMarkdownEditor -->            <markdown-editor params="value: description, placeholder: \'%publishCustomModuleToCommunityDescriptionPlaceholder%\'"></markdown-editor>            <!-- /ko -->            <div class="dialog-warning publishConsents">                <label>                    <input type="checkbox" data-bind="checked: hasConsentedPublishSampleExperiment" />                    %consentToPublishSampleExperiment%                </label>            </div>        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishCustomModuleStep1Markup");var ExperimentEditorTemplates;(function(e){e._publishCustomModuleStep3Markup='<script type="text/html" id="PublishCustomModuleStep3Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <div class="settings-option-container">                <div class="title-label">%publishExperimentToCommunityVisibilityLabel%</div>                <div class="publish-type-option">                    <input type="radio" value="1" class="publish-type-option-button" data-bind="checked: publishTypeString" />%publishExperimentToCommunityPublicPublishLabel%                </div>                <div class="option-details">%publishExperimentToCommunityPublicPublishExplanationLabel%</div>                <div class="publish-type-option" data-bind="css: { \'text-disabled\': isPublicPublishOnly }">                    <input type="radio" value="0" class="publish-type-option-button" data-bind="checked: publishTypeString, disable: isPublicPublishOnly" />%publishExperimentToCommunityUnlistedPublishLabel%                </div>                <div class="option-details" data-bind="css: { \'text-disabled\': isPublicPublishOnly }">%publishExperimentToCommunityUnlistedPublishExplanationLabel%</div>            </div>            <!-- ko if: isPublishAuthorEnabled() -->            <div class="settings-option-container" data-bind="visible: isPublishAuthorEnabled">                <div class="title-label">%publishExperimentToCommunityAuthorLabel%</div>                <div class="publish-type-option">                    <input type="radio" value="0" class="publish-type-option-button" data-bind="checked: publishAuthorString" />%publishExperimentToCommunityAuthorUserLable%                </div>                <div class="option-details">%publishExperimentToCommunityAuthorUserExplanationLabel%</div>                <div class="publish-type-option">                    <input type="radio" value="1" class="publish-type-option-button" data-bind="checked: publishAuthorString" />%publishExperimentToCommunityAuthorCompanyLabel%                </div>                <div class="option-details">%publishExperimentToCommunityAuthorCompanyExplanationLabel%</div>            </div>            <!-- /ko -->        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishCustomModuleStep3Markup");var ExperimentEditorTemplates;(function(e){e._publishNotebookStep1Markup='<script type="text/html" id="PublishNotebookStep1Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <!-- ko if: isRepublish -->            <hflexbox class="publishNameAndDataSelectorContainer">                <label>%publishNotebookNameInputLabel%</label>                <div class="publishDataSelectorContainer">                    <input type="checkbox" class="publishDataSelector" data-bind="checked: detailsFromGallery">                    %loadMetadataFromGallery%                </div>            </hflexbox>            <!-- /ko -->                       <!-- ko ifnot: isRepublish -->            <label>%publishNotebookNameInputLabel%</label>            <!-- /ko -->            <input type="text" class="nameInput" data-bind="value: name, validatedInputBox: { value: name }" />            <label>%publishExperimentToCommunityTagsLabel%</label>            <!-- ko template: { name: \'TagTextBox\', data: new tagTextBoxViewModel.TagTextBoxViewModel(tags) } --><!-- /ko -->            <label>%publishExperimentToCommunitySummaryLabel%</label>            <div data-bind="editableTextArea: {maxCharacters: 140, showMaxCharacterWarning: true}">                <textarea class="summary" data-bind="value: summary, placeholder: \'%publishNotebookSummaryPlaceholder%\'"></textarea>                <span class="characterLimitReachedWarning">                    <span class="charactersLeftCount"></span>                    %charactersLeft%                </span>            </div>            <label>%publishExperimentToCommunityDescriptionLabel%</label>            <!-- ko ifnot: useMarkdownEditor -->            <textarea class="description" data-bind="value: description, placeholder: \'%publishNotebookDescriptionPlaceholder%\'"></textarea>            <!-- /ko -->            <!-- ko if: useMarkdownEditor -->            <markdown-editor params="value: description, placeholder: \'%publishNotebookDescriptionPlaceholder%\'"></markdown-editor>            <!-- /ko -->        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishNotebookStep1Markup");var ExperimentEditorTemplates;(function(e){e._publishNotebookStep2Markup='<script type="text/html" id="PublishNotebookStep2Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <!-- ko if: isRepublish -->            <hflexbox>                <p class="publishExperimentSubtitle">%publishExperimentToCommunityWizardImageSelectionSubTitle%</p>                <div class="publishDataSelectorContainer">                    <input type="checkbox" class="publishDataSelector" data-bind="checked: imageFromGallery">                    %publishLoadImageFromGallery%                </div>            </hflexbox>            <!-- /ko -->            <!-- ko ifnot: isRepublish -->            <p class="publishExperimentSubtitle">%publishExperimentToCommunityWizardImageSelectionSubTitle%</p>            <!-- /ko -->            <!-- ko with: imageViewModel -->            <div class="publish-to-community-wizard-image-thumbnail" data-bind="css: { imagePlaceholder: !hasImage() }">                <img data-bind="attr: {src: selectedImageThumbnailSrc}" />            </div>            <!-- /ko -->            <div class="radio pushbutton publishImageSelectionMode" data-bind="fxRadio: {                                                        value: uploadImageOption,                                                        values: publishToCommunityWizardViewModel.PublishToCommunityWizardViewModel.uploadImageOptions,                                                        trackedit: false }"></div>            <div data-bind="visible: uploadImageOption() === Global.ImageSelectionMode.SelectYourOwn">                <!-- ko with: imageViewModel -->                <!-- ko with: imageUploadViewModel -->                <div>                    <input type="file"                           data-bind="file: selectedImage, fxUpload: {acceptedMimeTypes: [\'image/*\']}" />                    <span style="color: red"                          data-bind="visible: errorMessage, text: errorMessage"></span>                </div>                <p data-bind="visible: isProcessingSelectedImage, text: LocalizedResources.imageUploadProcessingText"></p>                <!-- /ko -->                <!-- /ko -->            </div>            <div data-bind="visible: uploadImageOption() === Global.ImageSelectionMode.StockImageFromGallery">                <!-- ko with: imageViewModel -->                <div class="imgGalleryContainer" data-bind="foreach: stockImages">                    <div class="imgGalleryBox">                        <img class="imgGallery" data-bind="attr: { src: url }, click: $parent.selectStockImage" />                    </div>                </div>                <!-- /ko -->            </div>        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishNotebookStep2Markup");var ExperimentEditorTemplates;(function(e){e._publishNotebookStep3Markup='<script type="text/html" id="PublishNotebookStep3Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <div class="settings-option-container">                <div class="title-label">%publishExperimentToCommunityVisibilityLabel%</div>                <div class="publish-type-option">                    <label class="radio-label"><input type="radio" value="1" class="publish-type-option-button" data-bind="checked: publishTypeString" />%publishExperimentToCommunityPublicPublishLabel%</label>                </div>                <div class="option-details">%publishNotebookVisibilityPublicExplanation%</div>                <div class="publish-type-option" data-bind="css: { \'text-disabled\': isRepublish && !previousPublishTypeHidden }">                    <label class="radio-label"><input type="radio" value="0" class="publish-type-option-button" data-bind="checked: publishTypeString, disable: isRepublish && !previousPublishTypeHidden" />%publishExperimentToCommunityUnlistedPublishLabel%</label>                </div>                <div class="option-details" data-bind="css: { \'text-disabled\': isRepublish && !previousPublishTypeHidden }">%publishNotebookVisibilityUnlistedExplanation%</div>            </div>            <!-- ko if: isPublishAuthorEnabled() -->            <div class="settings-option-container">                <div class="title-label">%publishExperimentToCommunityAuthorLabel%</div>                <div class="publish-type-option">                    <input type="radio" value="0" class="publish-type-option-button" data-bind="checked: publishAuthorString" />%publishExperimentToCommunityAuthorUserLable%                </div>                <div class="option-details">%publishNotebookToCommunityAuthorCompanyExplanationLabel%</div>                <div class="publish-type-option">                    <input type="radio" value="1" class="publish-type-option-button" data-bind="checked: publishAuthorString" />%publishExperimentToCommunityAuthorCompanyLabel%                </div>                <div class="option-details">%publishNotebookToCommunityAuthorUserExplanationLabel%</div>            </div>            <!-- /ko -->            <!-- ko if: Features.publishNotebookOptionIncludeDatasetEnabled() -->            <label>%galleryNotebookOptions%</label>            <label class="fx-checkboxlabel"><input type="checkbox" data-bind="checked: includeDataset" /> <span>%galleryIncludeDataset%</span></label>            <!-- /ko -->        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishNotebookStep3Markup");var ExperimentEditorTemplates;(function(e){e._publishToCommunityStep1Markup='<script type="text/html" id="PublishToCommunityStep1Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <!-- ko if: isRepublish -->            <hflexbox class="publishNameAndDataSelectorContainer">                <label>%experimentSaveAsDialogExperimentName%</label>                <div class="publishDataSelectorContainer">                    <input type="checkbox" class="publishDataSelector" data-bind="checked: detailsFromGallery">                    %loadMetadataFromGallery%                </div>            </hflexbox>            <!-- /ko -->            <!-- ko ifnot: isRepublish -->            <label>%experimentSaveAsDialogExperimentName%</label>            <!-- /ko -->            <input type="text" class="publishExperimentName" data-bind="value: experimentName, validatedInputBox: { value: experimentName }" />            <label>%publishExperimentToCommunityTagsLabel%</label>            <!-- ko template: { name: \'TagTextBox\', data: new tagTextBoxViewModel.TagTextBoxViewModel(tags) } --><!-- /ko -->            <label>%publishExperimentToCommunitySummaryLabel%</label>            <div data-bind="editableTextArea: {maxCharacters: 140, showMaxCharacterWarning: true}">                <textarea class="summary" data-bind="value: summary, placeholder: \'%publishExperimentToCommunitySummaryPlaceholder%\'"></textarea>                <span class="characterLimitReachedWarning">                    <span class="charactersLeftCount"></span>                    %charactersLeft%                </span>            </div>            <label>%publishExperimentToCommunityDescriptionLabel%</label>            <!-- ko ifnot: useMarkdownEditor -->            <textarea class="description" data-bind="value: description, placeholder: \'%publishExperimentToCommunityDescriptionPlaceholder%\'"></textarea>            <!-- /ko -->            <!-- ko if: useMarkdownEditor -->            <markdown-editor params="value: description, placeholder: \'%publishExperimentToCommunityDescriptionPlaceholder%\'"></markdown-editor>            <!-- /ko -->            <!-- ko if: hasCredentials -->            <div class="dialog-warning publishConsents">                <label>                    <input type="checkbox" data-bind="checked: hasConsentedCredentials" />                    %publishExperimentToCommunityConsentCredentialsLabel%                </label>                <div class="credentialsAbsentWarning">%publishExperimentToCommunityCredentialsAbsentWarningLabel%</div>            </div>            <!-- /ko -->            <!-- ko if: hasCustomModules && Features.publishCustomModulesToGalleryEnabled() -->            <div class="dialog-warning publishConsents">                <label>                    <input type="checkbox" data-bind="checked: hasConsentedCustomModules" />                    %publishExperimentToCommunityConsentCustomModulesLabel%                </label>                            </div>            <!-- /ko -->        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishToCommunityStep1Markup");var ExperimentEditorTemplates;(function(e){e._publishToCommunityStep2Markup='<script type="text/html" id="PublishToCommunityStep2Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <!-- ko if: isRepublish -->            <hflexbox>                <p class="publishExperimentSubtitle">%publishExperimentToCommunityWizardImageSelectionSubTitle%</p>                <div class="publishDataSelectorContainer">                    <input type="checkbox" class="publishDataSelector" data-bind="checked: imageFromGallery">                    Load image from Gallery                </div>            </hflexbox>            <!-- /ko -->            <!-- ko ifnot: isRepublish -->            <p class="publishExperimentSubtitle">%publishExperimentToCommunityWizardImageSelectionSubTitle%</p>            <!-- /ko -->            <!-- ko with: imageViewModel -->            <div class="publish-to-community-wizard-image-thumbnail" data-bind="css: { imagePlaceholder: !hasImage() }">                <img data-bind="attr: {src: selectedImageThumbnailSrc}" />            </div>            <!-- /ko -->            <div class="radio pushbutton publishImageSelectionMode" data-bind="fxRadio: {                                                        value: uploadImageOption,                                                        values: localUploadImageOptions,                                                        trackedit: false }"></div>            <div data-bind="visible: uploadImageOption() === Global.ImageSelectionMode.SelectYourOwn">                <!-- ko with: imageViewModel -->                <!-- ko with: imageUploadViewModel -->                <div>                    <input type="file"                           data-bind="file: selectedImage, fxUpload: {acceptedMimeTypes: [\'image/*\']}" />                    <span style="color: red"                          data-bind="visible: errorMessage, text: errorMessage"></span>                </div>                <p data-bind="visible: isProcessingSelectedImage, text: LocalizedResources.imageUploadProcessingText"></p>                <!-- /ko -->                <!-- /ko -->            </div>            <div data-bind="visible: uploadImageOption() === Global.ImageSelectionMode.StockImageFromGallery">                <!-- ko with: imageViewModel -->                <div class="imgGalleryContainer" data-bind="foreach: stockImages">                    <div class="imgGalleryBox">                        <img class="imgGallery" data-bind="attr: { src: url }, click: $parent.selectStockImage" />                    </div>                </div>                <!-- /ko -->            </div>        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishToCommunityStep2Markup");var ExperimentEditorTemplates;(function(e){e._publishToCommunityStep3Markup='<script type="text/html" id="PublishToCommunityStep3Template">    <div class="fx-dialog-template publish-to-community-wizard-step">        <div class="datalab-dialog">            <div class="settings-option-container">                <div class="title-label">%publishExperimentToCommunityVisibilityLabel%</div>                <div class="publish-type-option">                    <input type="radio" value="1" class="publish-type-option-button" data-bind="checked: publishTypeString" />%publishExperimentToCommunityPublicPublishLabel%                </div>                <div class="option-details">%publishExperimentToCommunityPublicPublishExplanationLabel%</div>                <div class="publish-type-option" data-bind="css: { \'text-disabled\': isRepublish && !previousPublishTypeHidden }">                    <input type="radio" value="0" class="publish-type-option-button" data-bind="checked: publishTypeString, disable: isRepublish && !previousPublishTypeHidden" />%publishExperimentToCommunityUnlistedPublishLabel%                </div>                <div class="option-details" data-bind="css: { \'text-disabled\': isRepublish && !previousPublishTypeHidden }">%publishExperimentToCommunityUnlistedPublishExplanationLabel%</div>            </div>            <!-- ko if: isPublishAuthorEnabled() -->            <div class="settings-option-container" data-bind="visible: isPublishAuthorEnabled">                <div class="title-label">%publishExperimentToCommunityAuthorLabel%</div>                <div class="publish-type-option">                    <input type="radio" value="0" class="publish-type-option-button" data-bind="checked: publishAuthorString" />%publishExperimentToCommunityAuthorUserLable%                </div>                <div class="option-details">%publishExperimentToCommunityAuthorUserExplanationLabel%</div>                <div class="publish-type-option">                    <input type="radio" value="1" class="publish-type-option-button" data-bind="checked: publishAuthorString" />%publishExperimentToCommunityAuthorCompanyLabel%                </div>                <div class="option-details">%publishExperimentToCommunityAuthorCompanyExplanationLabel%</div>            </div>            <!-- /ko -->            <div class="dialog-warning publishConsents">                <label>                    <input type="checkbox" data-bind="checked: hasAcceptedTermsOfUse" />                    %publishToCommunityAgreeToWebsite%<a target="_blank" href="%publishToCommunityTermsOfUseLink%">%publishToCommunityTermsOfUse%</a>                </label>            </div>        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishToCommunityStep3Markup");var ExperimentEditorTemplates;(function(e){e._publishToCommunityStepOnCompleteMarkup='<h2 data-bind="text: header"></h2><div class="visitInGalleryLabel" data-bind="text: description"></div><label data-bind="text: linkLabel"></label><div data-bind="fxsCopyButton: catalogExperimentUrl"></div><a class="viewInGallery" data-bind="attr: { href: catalogExperimentUrl }, event: { mouseover: setLinkHoverImage, mouseout: setLinkNoHoverImage }, click: logEvent.bind($data, \'gallery\')">%publishExperimentToCommunityPublishedExperimentGotoLink%<img data-bind="attr: {src: goToGalleryImage, title: LocalizedResources.publishExperimentToCommunityPublishedExperimentGotoLink}" /></a><!-- Twitter --><br /><label class="shareWith" data-bind="text: LocalizedResources.share"></label><!-- Email --><a data-bind="attr: {href: emailLink()}, click: logEvent.bind($data, \'email\')"><img src="/Content/Images/sharing-email.svg" data-bind="attr: {title: LocalizedResources.email}" /></a> <!-- Twitter --><a data-bind="twitterButton: twitterButtonOptions(), visible: publishVisibilityIsPublic, click: logEvent.bind($data, \'twitter\')"></a><!-- Linked In --><!-- @TODO Coming soon -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishToCommunityStepOnCompleteMarkup");var ExperimentEditorTemplates;(function(e){e._publishWebServiceDialogMarkup='<div id="publishWebServiceDialogContent">    <div>        <label id="wsgNameLabel" for="wsgNameBox">%webServiceGroupNameLabel%</label>        <br/>               <input id="wsgNameBox" type="text" data-bind="value: webServiceGroupName" />        <br/><br/>        <div id="webServiceInfoBox">            %publishWebServiceDialogHelpText%        </div>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._publishWebServiceDialogMarkup");var ExperimentEditorTemplates;(function(e){e._recentWorkMarkup='<div id="recentWork">    <div id="preview" data-bind="visible: thumbnail() || loading()">        <div class="clearfix">            <div class="heading left">%recentWorkThumbnailLabel%</div>            <div class="selectorContainer right">                <div class="heading">%recentWorkThumbnailSize%</div>                <div id="thumbnailSizeSelector" class="pushbutton"></div>            </div>        </div>                <div id="thumbnailTitleContainer" data-bind="if: thumbnailTitle">            <h2 data-bind="text: thumbnailTitle"></h2>        </div>        <div id="thumbnailContainer">            <div id="thumbnail" data-bind="attr: { class: thumbnailSize }">                <!-- ko template: { name: \'experimentSvgTemplate\', data: thumbnail, if: thumbnail } --><!-- /ko -->                <div class="spinner" data-bind="css: { thumbnailLoading: loading() }"></div>                <div class="shield" data-bind="click: thumbnailOnClick, css: { clickable: thumbnail() }"></div>            </div>        </div>    </div>        <div class="selectorContainer">        <div class="heading">%recentWorkFilterBy%</div>        <div id="filterSelector" class="pushbutton"></div>    </div>    <div class="shortExperimentList clearfix" data-bind="visible: selectedFilter() === \'lastModified\'">        <div id="gridLastEdited"></div>    </div>    <div class="shortExperimentList clearfix" data-bind="visible: selectedFilter() === \'lastRun\'">        <div id="gridLastRun"></div>    </div>        <div class="shortExperimentList clearfix" data-bind="visible: selectedFilter() === \'lastPublished\'">        <div id="gridLastPublished"></div>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._recentWorkMarkup");var ExperimentEditorTemplates;(function(e){e._renameNotebookDialogMarkup='<h2 data-bind="text: title"></h2><label>%renameNotebookDialogNameInputLabel%</label><input type="text" data-bind="validatedInputBox: { value: newNotebookName }, event: { keypress: enterToAccept }" /> '})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._renameNotebookDialogMarkup");var ExperimentEditorTemplates;(function(e){e._saveSSIMDatasetMarkup='<h2>Save Dataset From SSIM</h2><!-- This markup is repeated in all dialogs for creating new datasets --><div class="dataset-form" data-bind="with: dataset">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadDatasetDialogNewVersionOfDataset%    </div>    <div class="animation-wrapper" data-bind="css: { hide: deprecate() }">        %uploadDatasetDialogEnterName%        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()">    </div>    <div class="animation-wrapper" data-bind="css: { hide: !deprecate() }">        %uploadDatasetDialogExistingDataset%        <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"></div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"></div>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: LocalizedResources.ChooseDatasetToDeprecateAndEllipsis"></select>        </div>    </div></div>    %uploadDatasetDialogDescription%<textarea rows="4" data-bind="value: dataset.description"></textarea>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._saveSSIMDatasetMarkup");var ExperimentEditorTemplates;(function(e){e._scoreDialogMarkup='<h3 data-bind="text: Util.format(\'%scoreDialogTitle%\', wsgName)"></h3><div id="scoreDialogContent" class="datalab-dialog">    <div id="parameterPanel" >        <!-- ko if: (inputColumns.length == 0 && webServiceParameters.length == 0) -->            <h2>%scoreDialogNoDataNeeded%</h2>        <!-- /ko -->        <!-- ko if: (inputColumns.length > 0) -->            <h2>%scoreDialogEnterDataToPredict%</h2>        <div data-bind="foreach: inputColumns">            <div class="field-group">                <!-- ko if: valueType == "Binary" -->                    <input type="checkbox" data-bind="checked: value, attr: { \'id\': name }" />                    <label data-bind="text: name, attr: { \'id\': name + \'_label\', \'for\': name, \'title\': friendlyName }"></label>                <!-- /ko -->                <!-- ko if: valueType == "Categorical" -->                    <label data-bind="text: name, attr: { \'id\': name + \'_label\', \'for\': name, \'title\': friendlyName }"></label>                <select type="text" data-bind="value: value, options: allowedValues, attr: { \'id\': name }"></select>                <!-- /ko -->                <!-- ko if: valueType != "Binary" && valueType != "Categorical" -->                    <label data-bind="text: name, attr: { \'id\': name + \'_label\', \'for\': name, \'title\': friendlyName }"></label>                    <input type="text" data-bind="value: value, attr: { \'id\': name }" />                <!-- /ko -->            </div>        </div>        <!-- /ko -->    </div>    <!-- ko if: (webServiceParameters.length > 0) -->        <div id="webServiceParametersPanel" data-bind="style: { \'display\': (webServiceParameters.length > 0) ? \'\' : \'none\' }">            <br />            <h2>%scoreDialogEnterWebServiceParameters%</h2>            <div data-bind="foreach: webServiceParameters">                <div class="field-group">                    <!-- ko if: metadata.Type == "Boolean" -->                        <input type="checkbox" data-bind="checked: value, attr: { \'id\':  metadata.Name  + \'_wsp\' }" />                        <label data-bind="text: metadata.Name, attr: { \'for\':  metadata.Name + \'_wsp\', \'title\': metadata.Description }" ></label>                    <!-- /ko -->                    <!-- ko if: metadata.Type != "Boolean" -->                        <label data-bind="text: metadata.Name, attr: { \'for\':  metadata.Name + \'_wsp\', \'title\': metadata.Description }" ></label>                        <!-- ko if: metadata.Type == "Script" -->                            <textarea data-bind="value: value, attr: { \'id\':  metadata.Name  + \'_wsp\' }" ></textarea>                        <!-- /ko -->                        <!-- ko if: metadata.Type == "Enumerated" -->                            <select data-bind="value: value, options: metadata.ParameterRules[0].Values, attr: { \'id\':  metadata.Name  + \'_wsp\' }" ></select>                        <!-- /ko -->                        <!-- ko if: metadata.Type == "Credential" -->                            <input type="password" data-bind="value: value, attr: { \'id\':  metadata.Name  + \'_wsp\' }" />                        <!-- /ko -->                        <!-- ko if: metadata.Type != "Script" && metadata.Type != "Enumerated" && metadata.Type != "Credential" -->                            <input type="text" data-bind="value: value, attr: { \'id\':  metadata.Name  + \'_wsp\' }" />                        <!-- /ko -->                    <!-- /ko -->                </div>            </div>        </div>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._scoreDialogMarkup");var ExperimentEditorTemplates;(function(e){e._scriptEditorMarkup='<div class="scriptEditorPopupContainer">    <h1 data-bind="text: property.label"></h1>    <div class="scriptEditorContentWrapper">        <div>            <div class="monaco-container"                 data-bind="monaco: {                            value: temporaryPropertyValue,                            mimetype: monacoMimeType,                            containerWidth: 90,                            insertSpaces: untabify                        },                        validatedInputBox: {value: temporaryPropertyValue},                        css: { focused: focus},                        readonly: false">            </div>        </div>    </div>    <div class="characterCountMessage" style="display:none;">        <span class="maxCharacterCount"></span> <span class="characterCountText"></span>    </div>    <flexstatic class="checkmarkContainer">        <hflexbox>            <flexfill></flexfill>            <flexstatic class="icon tick" data-bind="click: closeDialogAndSave"></flexstatic>        </hflexbox>    </flexstatic></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._scriptEditorMarkup");var ExperimentEditorTemplates;(function(e){e._scriptVersionChangeDialogMarkup='<h2>%ScriptVersionChangeDialogHeader%</h2><div data-bind="text: warningLabel"></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._scriptVersionChangeDialogMarkup");var ExperimentEditorTemplates;(function(e){e._synchronizeScriptVersionDialogMarkup='<h2>%SynchronizeScriptVersionDialogHeader%</h2><div data-bind="text: warningLabel"></div><br/><br/><div data-bind="visible: shouldShowPythonDropdown">    <label>%SynchronizeScriptVersionDialogPythonLabel%</label>    <select data-bind="options: pythonScriptOptions, value: pythonScriptSelection"></select></div><div data-bind="visible: shouldShowRDropdown">    <label>%SynchronizeScriptVersionDialogRLabel%</label>    <select data-bind="options: rScriptOptions, value: rScriptSelection"></select></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._synchronizeScriptVersionDialogMarkup");var ExperimentEditorTemplates;(function(e){e._tagTextBoxMarkup='<script type="text/html" id="TagTextBox">    <hflexbox class="columnNameList" data-bind="validate: { value: currentTag }, click: setNameInputFocused, css: {hasItems: hasTags}">        <!-- ko foreach: tags -->        <flexstatic class="columnNameBox">            <span data-bind="text: $data"></span>            <span class="removeColumnName" data-bind="click: $parent.removeTag"></span>        </flexstatic>        <!-- /ko -->        <flexfill>            <input type="text" class="itemTextBoxInput" data-bind="hasfocus: nameInputFocused, attr: { placeholder: hasTags() ? \'\' : LocalizedResources.pressEnterTag }, style: { \'minWidth\': tags().length === 0 ? \'250px\' : \'50px\' }, itemTextBox: { validColumnNames: tags, invalidColumnNames: ko.observableArray([]) }, value: currentTag" />        </flexfill>        <div class="textWidthSpan"></div>    </hflexbox></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._tagTextBoxMarkup");var ExperimentEditorTemplates;(function(e){e._trainedModelPromotionDialogMarkup='<h2>%SaveTrainedModel%</h2><!-- This markup is repeated in all dialogs for creating new models --><div class="dataset-form" data-bind="with: resource">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadTrainedModelDialogNewVersionOfTrainedModel%    </div>    <div class="animation-wrapper" data-bind="css: { hide: deprecate() }">        %uploadTrainedModelDialogEnterName%        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()">    </div>    <div class="animation-wrapper" data-bind="css: { hide: !deprecate() }">        %uploadTrainedModelDialogExistingTrainedModel%        <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"></div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"></div>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: LocalizedResources.ChooseTrainedModelToDeprecateAndEllipsis"></select>        </div>    </div></div>%uploadTrainedModelDialogDescription%<textarea rows="4" data-bind="value: resource.description"></textarea>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._trainedModelPromotionDialogMarkup");var ExperimentEditorTemplates;(function(e){e._transformPromotionDialogMarkup='<h2>%SaveTransform%</h2><!-- This markup is repeated in all dialogs for creating new models --><div class="dataset-form" data-bind="with: resource">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadTransformDialogNewVersionOfTransform%    </div>    <div class="animation-wrapper" data-bind="css: { hide: deprecate() }">        %uploadTransformDialogEnterName%        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()">    </div>    <div class="animation-wrapper" data-bind="css: { hide: !deprecate() }">        %uploadTransformDialogExistingTransform%        <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"></div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"></div>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: LocalizedResources.ChooseTransformToDeprecateAndEllipsis"></select>        </div>    </div></div>%uploadTransformDialogDescription%<textarea rows="4" data-bind="value: resource.description"></textarea>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._transformPromotionDialogMarkup");var ExperimentEditorTemplates;(function(e){e._twoPaneColumnPickerMarkup='<div class="fx-dialog-template">    <div class="datalab-dialog two-pane-picker">        <!-- ko ifnot: isEnabled() -->        <p data-bind="text: disabledText"></p>        <!-- /ko -->        <!-- ko if: isEnabled() -->        <hflexbox>            <flexfill>                <div class="picker-header">                    <label>%ColumnPickerAvailableColumns%</label>                    <hflexbox>                        <flexstatic>                            <select class="type-filter" data-bind="options: availableTypes, value: availableColumnsFilterType"></select>                        </flexstatic>                        <flexfill>                            <div class="xe-genericSearchBox">                                <input type="text" class="select-filter" data-bind="textInput: availableColumnsFilterText, placeholder: filterTextPlaceholder" />                            </div>                        </flexfill>                    </hflexbox>                </div>                <select class="column-list" data-bind="options: availableColumnsAfterFiltering, filterValue: availableColumnsFilterText, selectedOptions: chosenAvailableColumns" size="15" multiple></select>                <div class="picker-status-bar" data-bind="text: availableColumnsStatusText"></div>            </flexfill>            <flexstatic class="choice-buttons">                <button data-bind="click: selectColumns, disable: chooseColumnsDisabled">&gt;</button><br /><button data-bind="click: unselectColumns, disable: removeColumnsDisabled">&lt;</button>            </flexstatic>            <flexfill>                <div class="picker-header">                    <label>%ColumnPickerSelectedColumns%</label>                    <hflexbox>                        <flexstatic>                            <select class="type-filter" data-bind="options: availableTypes, value: selectedColumnsFilterType"></select>                        </flexstatic>                        <flexfill>                            <div class="xe-genericSearchBox">                                <input type="text" class="select-filter" data-bind="textInput: selectedColumnsFilterText, placeholder: filterTextPlaceholder" />                            </div>                        </flexfill>                    </hflexbox>                </div>                <select class="column-list" data-bind="options: selectedColumnsAfterFiltering, filterValue: selectedColumnsFilterText, selectedOptions: chosenSelectedColumns" size="15" multiple></select>                <div class="picker-status-bar" data-bind="text: selectedColumnsStatusText"></div>            </flexfill>        </hflexbox>        <hflexbox>            <flexfill></flexfill>            <flexstatic class="icon tick" data-bind="click: saveRulesAndClose.bind($data, true)"></flexstatic>        </hflexbox>        <!-- /ko -->    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._twoPaneColumnPickerMarkup");var ExperimentEditorTemplates;(function(e){e._uploadDatasetDialogMarkup='<h2>%uploadDatasetUploadANewDataset%</h2><div class="datalab-validation-wrapper">    <div class="datalab-validation-icon" data-bind="validate: { value: fileToUpload }"></div>    <label>        %uploadDatasetDialogDataToUpload%    </label>     <input type="file" data-bind="file: fileToUpload" />       </div><!-- This markup is repeated in all dialogs for creating new datasets --><div class="dataset-form" data-bind="with: dataset">    <div class="deprecate-header">        <input type="checkbox" data-bind="checked: deprecate"/>%uploadDatasetDialogNewVersionOfDataset%    </div>    <div class="animation-wrapper" data-bind="css: {hide: deprecate()}">        <label>            %uploadDatasetDialogEnterName%        </label>        <input type="text" data-bind="validatedInputBox: { value: _name }, enable: !deprecate()" />    </div>    <div class="animation-wrapper" data-bind="css: {hide: !deprecate()}">                <div class="datalab-validation-wrapper">                    <div class="datalab-validation-icon" data-bind="validate: { value: resourceToDeprecate }"></div>            <div class="datalab-validation-icon heuristic-hint" data-bind="style: { \'visibility\': hint() ? \'visible\' : \'hidden\', \'opacity\': hint() ? \'1\' : \'0\' }"></div>            <label>                %uploadDatasetDialogExistingDataset%            </label>            <select data-bind="options: availableResources, value: resourceToDeprecate, enable: deprecate, optionsCaption: LocalizedResources.ChooseDatasetToDeprecateAndEllipsis"></select>                    </div>    </div></div><div class="datalab-validation-wrapper">    <div class="datalab-validation-icon" data-bind="validate: { value: dataset.dataType }"></div>    <label>        %uploadDatasetDialogSelectType%    </label>    <select data-bind="options: dataTypes, value: dataset.dataType, optionsText: getDataTypeCaption, optionsCaption: LocalizedResources.ChooseADatasetTypeAndEllipsis"></select>    </div> <label>    %uploadDatasetDialogDescription%</label><textarea data-bind="value: dataset.description"></textarea>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._uploadDatasetDialogMarkup");var ExperimentEditorTemplates;(function(e){e._uploadModuleDialogMarkup='<script type="text/html" id="moduleExampleLinkProperty">    <div class="propertyLink">        <a href=\'#\' data-bind="attr: { title: property.tooltip, href: (property.endpoint && property.endpoint.Size === -1) ? \'#\' : property.value},                      hasfocus: focus,                      event: { focus: $root.onParameterFocus, click: onClick },                      text: property.label"           target="_blank">        </a>    </div>    <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)</div></script><h2>%uploadModuleUploadANewModule%</h2><div style="width:400px"><span data-bind="text: uploadDialogText"></span>    <br />    <a href="//go.microsoft.com/fwlink/?LinkId=524876" target="_blank">%uploadModuleDialogLearnMore%</a>    <br /><br />    <!-- ko foreach: uploadDialogExamples -->            <div class="custom-module-example-link" data-bind="template: { name: \'moduleExampleLinkProperty\' }, visible: property.value()"></div>    <!-- /ko -->    <br /><br /></div><div class="datalab-validation-wrapper">    <div class="datalab-validation-icon" data-bind="validate: { value: fileToUpload }"></div>    <label>        %uploadModuleDialogDataToUpload%    </label>    <input type="file" data-bind="file: fileToUpload" accept="application/zip" autofocus="autofocus" /></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._uploadModuleDialogMarkup");var ExperimentEditorTemplates;(function(e){e._uploadNotebookDialogMarkup='<h2>%uploadNotebookDialogUploadANewNotebook%</h2><div class="datalab-validation-wrapper">    <div class="datalab-validation-icon" data-bind="validate: { value: fileToUpload }"></div>    <label>        %uploadNotebookDialogDataToUpload%    </label>    <input type="file" data-bind="file: fileToUpload" accept=".ipynb" /></div><div class="dataset-form" data-bind="with: notebook">    <div class="animation-wrapper">        <label>            %uploadNotebookDialogEnterName%        </label>        <input type="text" data-bind="validatedInputBox: { value: name }" />    </div></div><div class="datalab-validation-wrapper">    <div class="datalab-validation-icon" data-bind="validate: { value: notebook.language }"></div>    <label>        %uploadNotebookDialogSelectLanguage%    </label>    <select data-bind="options: languages, value: notebook.language, optionsCaption: LocalizedResources.ChooseANotebookLanguageAndEllipsis"></select></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._uploadNotebookDialogMarkup");var ExperimentEditorTemplates;(function(e){e._usePreviousResultsParameterMarkup='<script type="text/html" id="usePreviousResultsParameter">    <div class="propertyEditor-headingCell" data-bind="attr:{title:LocalizedResources.usePreviousResultsLabelTooltip}">        <input id="usePreviousResultsCheckbox"               type="checkbox"               class="datalab-gridCellPropertyItem textAreaProperty"               data-bind="checked: property.value, disable: $root.tabs[0].readOnlyMode()" />        <div class="datalab-usePreviousResultsLabel textAreaProperty"             data-bind="text: LocalizedResources.usePreviousResultsLabel">        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._usePreviousResultsParameterMarkup");var ExperimentEditorTemplates;(function(e){e._userSettingsDialogMarkup='<div class="user-settings-dialog">    <h2>%userSettings%</h2>    <div>        <div class="info">            %userSettingsInfo%        </div>        <!-- ko foreach: settings -->        <div class="setting">            <label>                <input type="checkbox" data-bind="checked: value" />                <span data-bind="text: description"></span>            </label>        </div>        <!-- /ko -->    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._userSettingsDialogMarkup");var ExperimentEditorTemplates;(function(e){e._visualizationOldMarkup='    <!-- This file should be removed when Features.visualizationPagination is gone -->    <div class="visualizationContent OldVisualization">        <hflexbox class="numberRowsColumnsContainer">            <div class="numberRowsColumnsHeader">                <div class="smallHeader">                    %VisualizationRows%                </div>                <div data-bind="text: dataTableViewModel.numberOfRows">                </div>            </div>            <div class="numberRowsColumnsHeader">                <div class="smallHeader">                    %VisualizationColumns%                </div>                <div data-bind="text: dataTableViewModel.numberOfColumns">                </div>            </div>        </hflexbox>        <hflexbox class="visualizationTableWrapper">            <div class="dataTableContainer">                <table id="dataTable" data-bind="event: { click: selectColumn }">                    <tbody>                        <tr>                            <th class="emptyCell whiteCell"></th>                            <!-- ko foreach: columns -->                            <th class="tableHeader" data-bind="text: name, css: { \'selectedHeader\': selected() }"></th>                            <!-- /ko -->                        </tr>                        <tr>                            <td class="toggleCell">                                <div class="toggleDiv">                                    <div class="toggleLabelDiv">                                        %VisualizationViewAs%                                    </div>                                    <div class="toggleIconDiv">                                        <div data-bind="attr: { class: minimizedGraphsType() === \'Histogram\' ? \'histogramSelectedImage\' : \'histogramIdleImage\' }, event: { \'click\': setHistogramMode }">                                        </div>                                        <div data-bind="attr: { class: minimizedGraphsType() !== \'Histogram\' ? \'boxchartSelectedImage\' : \'boxcharIdleImage\' }, event: { \'click\': setBoxchartMode }">                                        </div>                                    </div>                                </div>                            </td>                            <!-- ko foreach: columns -->                            <!-- ko if: $data.minimizedGraph -->                            <td class="graphCell" data-bind="d3graph: { data: $data.minimizedGraph, minWidth: 44, height: 30, padding: 0, minimized: true }"></td>                            <!-- /ko-->                            <!-- /ko -->                        </tr>                        <!-- ko foreach: dataTableViewModel.records -->                        <tr>                            <td class="emptyCell"></td>                            <!-- ko foreach: $data -->                            <td data-bind="text: $data"></td>                            <!-- /ko -->                        </tr>                        <!-- /ko -->                    </tbody>                </table>            </div>            <div data-bind="                resize: {                    direction: \'left\',                    parentContainerSelector: \'.visualizationTableWrapper\',                    minSize: 447,                    id: \'statsAndGraphs\'                },                collapse: {                    collapseButtonSelector: \'.statsAndGraphsExpander\',                    collapsed: statsAndGraphsIsCollapsed,                    collapseFrom: \'left\',                    collapsedSize: 36,                    id: \'statsAndGraphs\'                }"                 class="statsAndGraphs">                <div class="statsAndGraphsExpander"></div>                <div class="statsAndGraphsTitle">%statsAndGraphsTitle%</div>                         <div class="statsAndGraphsContent">                    <div class="statsContainer" data-bind="                        collapse: {                            collapseButtonSelector: \'.statsAndGraphsSubExpander.statsExpander\',                            collapsed: statsIsCollapsed,                            collapseFrom: \'bottom\',                            collapsedSize: 33,                            id: \'stats\'                        }">                                 <hflexbox class="statsAndGraphsHeader">                            <div class="statsAndGraphsSubExpander statsExpander"></div>                            <div>%visualizationStatisticsHeader%</div>                        </hflexbox>                        <!-- ko if: currentSelectedColumnViewModel() && currentSelectedColumnViewModel().columnStatistics -->                        <div class="statsTable">                            <!-- ko with: currentSelectedColumnViewModel -->                            <table>                                <tbody>                                    <!-- ko foreach: columnStatistics -->                                    <!-- ko if: value !== "" -->                                    <tr>                                        <td data-bind="text: name"></td>                                        <td data-bind="text: value"></td>                                    </tr>                                    <!-- /ko -->                                    <!-- /ko -->                                </tbody>                            </table>                            <!-- /ko -->                        </div>                        <!-- /ko -->                    </div>                    <div class="graphVisualizationContainer" data-bind="                        collapse: {                            collapseButtonSelector: \'.statsAndGraphsSubExpander.visualizationExpander\',                            collapsed: visualizationIsCollapsed,                            collapseFrom: \'bottom\',                            collapsedSize: 33,                            id: \'visualization\'                        }">                        <hflexbox class="statsAndGraphsHeader">                            <div class="statsAndGraphsSubExpander visualizationExpander"></div>                            <div>%visualizationHeader%</div>                        </hflexbox>                        <div class="expandedView">                            <div data-bind="style: { \'display\': columnIsSelected() ? \'none\' : \'\' }" class="placeholderGraph graphDiv">                                <div class="placeholderImage">                                </div>                                <div class="placeholderText">                                    %VisualizationToViewSelectAColumnInTheTable%                                </div>                            </div>                            <div data-bind="style: { \'display\': graphControl().isNull ? \'none\' : \'block\' }" class="graphContainer">                                <div>                                    <div class="graphSubheader" data-bind="text: graphControl().feature">                                    </div>                                </div>                                <div class="headerDiv">                                    <div class="header graphHeader" data-bind="text: graphControl().graphTypeString">                                    </div>                                </div>                                <hflexbox class="compareToContainer" data-bind="style: { \'display\': entireDatasetIsPresent ? \'\' : \'none\' }">                                    <div class="compareTo">                                        <div class="graphText inlineDiv">                                            %VisualizationCompareTo%                                        </div>                                        <select data-bind="options: graphControl().compareToFeatures, value: graphControl().crossCompareFeature"></select>                                    </div>                                    <div class="icons">                                        <div title="Create Snapshot" class="inlineDiv snapshotIdle" data-bind="event: { click: takeSnapshot }">                                        </div>                                    </div>                                </hflexbox>                                <hflexbox id="bodyDiv">                                    <div id="activeSvgDiv" class="inlineDiv activeSvgContainer" data-bind="d3graph: { data: graphControl().graph, minWidth: 380, height: 370, padding: 60, minimized: false, name: \'main\' }">                                    </div>                                    <!-- ko foreach: snapshots -->                                    <div class="graphDiv snapshotContainer">                                        <div>                                            <div class="snapshotHeader">                                                <div class="graphSubheader leftDiv" data-bind="text: feature">                                                </div>                                                <div title="Close" class="snapshotClose closeIdle rightDiv" data-bind="event: { click: $parent.closeSnapshot.bind($parent) }">                                                </div>                                            </div>                                            <div data-bind="d3graphcopy: { name: \'main\', visible: visible, animationDuration: animationDuration }" class="svgcopy">                                            </div>                                        </div>                                    </div>                                    <!-- /ko -->                                </hflexbox>                            </div>                            <div class="parameters" data-bind="style: { \'display\': parametersAreVisible() ? \'\' : \'none\' }">                                <div data-bind="style: { \'display\': graphControl().scaleCheckboxesVisible() ? \'\' : \'none\' }">                                    <div class="logScaleDiv" data-bind="style: { \'display\': graphControl().xScaleCheckbox.visible() ? \'\' : \'none\' }">                                        <input type="checkbox" data-bind="checked: graphControl().xScaleCheckbox.value" class="inlineDiv"/>                                        <div data-bind="text: graphControl().xScaleCheckbox.label" class="inlineDiv logScaleText">                                        </div>                                    </div>                                    <div class="logScaleDiv" data-bind="style: { \'display\': graphControl().yScaleCheckbox.visible() ? \'\' : \'none\' }">                                        <input type="checkbox" data-bind="checked: graphControl().yScaleCheckbox.value" class="inlineDiv"/>                                        <div data-bind="text: graphControl().yScaleCheckbox.label" class="inlineDiv logScaleText">                                        </div>                                    </div>                                </div>                                <div data-bind="style: { \'display\': graphControl().binCountVisible() ? \'\' : \'none\' }">                                    <div class="graphText binsLabel">                                        %bins%                                    </div>                                    <input type="text" class="bins" data-bind="value: graphControl().binCount"/>                                </div>                                <div data-bind="style: { \'display\': graphControl().categoriesVisible() ? \'\' : \'none\' }">                                    <div class="graphText binsLabel">                                        %VisualizationCategories%                                    </div>                                    <input type="text" class="bins" data-bind="value: graphControl().categoriesCount"/>                                </div>                                <div class="probabilityFunctions" data-bind="style: { \'display\': graphControl().probabilityFunctionsVisible() ? \'\' : \'none\' }">                                    <div class="probabilityFunctionDiv">                                        <input type="checkbox" class="inlineDiv" data-bind="checked: graphControl().cumulativeDistribution"/>                                        <div class="inlineDiv probabilityFunctionText">                                            %VisualizationCumulativeDistribution%                                        </div>                                    </div>                                    <div class="probabilityFunctionDiv">                                        <input type="checkbox" class="inlineDiv" data-bind="checked: graphControl().probabilityDensity"/>                                        <div class="inlineDiv probabilityFunctionText">                                            %VisualizationProbabilityDensity%                                        </div>                                    </div>                                </div>                            </div>                        </div>                    </div>                </div>            </div>        </hflexbox>    </div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._visualizationOldMarkup");var ExperimentEditorTemplates;(function(e){e._visualizationMarkup='    <!-- See comment in VisualizationViewModel.ts for a description of the structure here -->    <!-- The NewVisualization class should be removed when Features.visualizationPagination is gone -->    <div class="visualizationContent NewVisualization">        <hflexbox class="numberRowsColumnsContainer">            <div class="numberRowsColumnsHeader">                <div class="smallHeader">%VisualizationRows%</div>                <div id="numberRows"></div>            </div>            <div class="numberRowsColumnsHeader">                <div class="smallHeader">%VisualizationColumns%</div>                <div id="numberColumns"></div>            </div>        </hflexbox>        <hflexbox class="visualizationTableWrapper">            <div class="dataAndHeadersContainer">                <div class="graphTogglerContainer">                    <div class="graphToggler">                        <div class="smallHeader">%VisualizationViewAs%</div>                        <div class="toggleIconDiv">                            <div data-bind="attr: { class: minimizedGraphsType() === \'Histogram\' ? \'histogramSelectedImage\' : \'histogramIdleImage\' }, event: { click: setHistogramMode }"></div>                            <div data-bind="attr: { class: minimizedGraphsType() !== \'Histogram\' ? \'boxchartSelectedImage\' : \'boxcharIdleImage\' }, event: { click: setBoxchartMode }"></div>                        </div>                    </div>                </div>                <div class="headerTableContainer">                    <div class="headerTableScrollerContainer">                        <div style="width: 1000000px;">                            <table id="headerTable"><tbody><tr><th></th></tr><tr><td></td></tr></tbody></table>                        </div>                    </div>                </div>                <div class="rownumTableContainer">                    <div class="rownumTableScrollerContainer">                        <div style="height: 1000000px;">                            <table id="rownumTable"><tbody><tr><th></th></tr><tr><td></td></tr></tbody></table>                        </div>                    </div>                </div>                <div class="dataTableContainer">                    <div style="height: 1000000px; width: 1000000px;">                        <table id="dataTable"><tbody><tr><td></td></tr></tbody></table>                    </div>                </div>                <div class="dataAndHeadersBorders"></div>            </div>            <div data-bind="                resize: {                    direction: \'left\',                    parentContainerSelector: \'.visualizationTableWrapper\',                    minSize: 447,                    id: \'statsAndGraphs\'                },                collapse: {                    collapseButtonSelector: \'.statsAndGraphsExpander\',                    collapsed: statsAndGraphsIsCollapsed,                    collapseFrom: \'left\',                    collapsedSize: 36,                    id: \'statsAndGraphs\'                }"                class="statsAndGraphs">                <div class="statsAndGraphsExpander"></div>                <div class="statsAndGraphsTitle">%statsAndGraphsTitle%</div>                <div class="statsAndGraphsContent">                    <div class="statsContainer" data-bind="                        collapse: {                            collapseButtonSelector: \'.statsAndGraphsSubExpander.statsExpander\',                            collapsed: statsIsCollapsed,                            collapseFrom: \'bottom\',                            collapsedSize: 33,                            id: \'stats\'                        }">                        <hflexbox class="statsAndGraphsHeader">                            <div class="statsAndGraphsSubExpander statsExpander"></div>                            <div>%visualizationStatisticsHeader%</div>                        </hflexbox>                        <div class="statsTable">                            <div data-bind="style: { display: columnIsSelected() ? \'none\' : \'\' }, text: noSelectionExplanation()" class="placeholderText"></div>                            <!-- ko if: currentSelectedColumnViewModel() && currentSelectedColumnViewModel().columnStatistics -->                            <!-- ko with: currentSelectedColumnViewModel -->                            <table>                                <tbody>                                    <!-- ko foreach: columnStatistics -->                                    <!-- ko if: value !== "" -->                                    <tr>                                        <td data-bind="text: name"></td>                                        <td data-bind="text: value"></td>                                    </tr>                                    <!-- /ko -->                                    <!-- /ko -->                                </tbody>                            </table>                            <!-- /ko -->                            <!-- /ko -->                        </div>                    </div>                    <div class="graphVisualizationContainer" data-bind="                        collapse: {                            collapseButtonSelector: \'.statsAndGraphsSubExpander.visualizationExpander\',                            collapsed: visualizationIsCollapsed,                            collapseFrom: \'bottom\',                            collapsedSize: 33,                            id: \'visualization\'                        }">                        <hflexbox class="statsAndGraphsHeader">                            <div class="statsAndGraphsSubExpander visualizationExpander"></div>                            <div>%visualizationHeader%</div>                        </hflexbox>                        <div class="expandedView">                            <div data-bind="style: { display: columnIsSelected() ? \'none\' : \'\' }" class="placeholderGraph graphDiv">                                <div class="placeholderImage"></div>                                <div class="placeholderText" data-bind="text: noSelectionExplanation()"></div>                            </div>                            <div data-bind="style: { display: graphControl().isNull ? \'none\' : \'block\' }" class="graphContainer">                                <div>                                    <div class="graphSubheader" data-bind="text: graphControl().feature"></div>                                </div>                                <div class="headerDiv">                                    <div class="header graphHeader" data-bind="text: graphControl().graphTypeString"></div>                                </div>                                <hflexbox class="compareToContainer" data-bind="style: { display: entireDatasetIsPresent ? \'\' : \'none\' }">                                    <div class="compareTo">                                        <div class="graphText inlineDiv">%VisualizationCompareTo%</div>                                        <select data-bind="options: graphControl().compareToFeatures, value: graphControl().crossCompareFeature"></select>                                    </div>                                    <div class="icons">                                        <div title="Create Snapshot" class="inlineDiv snapshotIdle" data-bind="event: { click: takeSnapshot }"></div>                                    </div>                                </hflexbox>                                <hflexbox id="bodyDiv">                                    <div id="activeSvgDiv" class="inlineDiv activeSvgContainer" data-bind="d3graph: { data: graphControl().graph, minWidth: 380, height: 370, padding: 60, minimized: false, name: \'main\' }">                                    </div>                                    <!-- ko foreach: snapshots -->                                    <div class="graphDiv snapshotContainer">                                        <div>                                            <div class="snapshotHeader">                                                <div class="graphSubheader leftDiv" data-bind="text: feature"></div>                                                <div title="Close" class="snapshotClose closeIdle rightDiv" data-bind="event: { click: $parent.closeSnapshot.bind($parent) }"></div>                                            </div>                                            <div data-bind="d3graphcopy: { name: \'main\', visible: visible, animationDuration: animationDuration }" class="svgcopy"></div>                                        </div>                                    </div>                                    <!-- /ko -->                                </hflexbox>                            </div>                            <div class="parameters" data-bind="style: { display: parametersAreVisible() ? \'\' : \'none\' }">                                <div data-bind="style: { display: graphControl().scaleCheckboxesVisible() ? \'\' : \'none\' }">                                    <div class="logScaleDiv" data-bind="style: { display: graphControl().xScaleCheckbox.visible() ? \'\' : \'none\' }">                                        <input type="checkbox" data-bind="checked: graphControl().xScaleCheckbox.value" class="inlineDiv"/>                                        <div data-bind="text: graphControl().xScaleCheckbox.label" class="inlineDiv logScaleText"></div>                                    </div>                                    <div class="logScaleDiv" data-bind="style: { display: graphControl().yScaleCheckbox.visible() ? \'\' : \'none\' }">                                        <input type="checkbox" data-bind="checked: graphControl().yScaleCheckbox.value" class="inlineDiv"/>                                        <div data-bind="text: graphControl().yScaleCheckbox.label" class="inlineDiv logScaleText"></div>                                    </div>                                </div>                                <div data-bind="style: { display: graphControl().binCountVisible() ? \'\' : \'none\' }">                                    <div class="graphText binsLabel">%bins%</div>                                    <input type="text" class="bins" data-bind="value: graphControl().binCount"/>                                </div>                                <div data-bind="style: { display: graphControl().categoriesVisible() ? \'\' : \'none\' }">                                    <div class="graphText binsLabel">%VisualizationCategories%</div>                                    <input type="text" class="bins" data-bind="value: graphControl().categoriesCount"/>                                </div>                                <div class="probabilityFunctions" data-bind="style: { display: graphControl().probabilityFunctionsVisible() ? \'\' : \'none\' }">                                    <div class="probabilityFunctionDiv">                                        <input type="checkbox" class="inlineDiv" data-bind="checked: graphControl().cumulativeDistribution"/>                                        <div class="inlineDiv probabilityFunctionText">%VisualizationCumulativeDistribution%</div>                                    </div>                                    <div class="probabilityFunctionDiv">                                        <input type="checkbox" class="inlineDiv" data-bind="checked: graphControl().probabilityDensity"/>                                        <div class="inlineDiv probabilityFunctionText">%VisualizationProbabilityDensity%</div>                                    </div>                                </div>                            </div>                        </div>                    </div>                </div>            </div>        </hflexbox>    </div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._visualizationMarkup");var ExperimentEditorTemplates;(function(e){e._welcomeBannerMarkup='<div class="welcome-banner">    <div class="centered-div">        <div class="banner-image"></div>        <div class="banner-text">            <div class="banner-title">                %welcomeBannerTitle%            </div>            <div class="banner-subtitle" data-bind="text: subTitle"></div>            <div class="select-section" data-bind="attr: {title: selectTooltip},  visible: Features.welcomeBannerShowCountryListEnabled()">                <div class="banner-select-label" data-bind="text: selectLabel"></div>                <select class="banner-select" data-bind="options: countryArray, value: selectedCountry"></select>            </div>            <div class="banner-check">                <label class="banner-check-label">                    <input type="checkbox" data-bind="checked: setting.value" />                    <span data-bind="text: setting.description"></span>                </label>            </div>        </div>        <div class="banner-button" data-bind="click: dismissed">            <div class="banner-button-text" data-bind="text: buttonText" />            <div class="banner-button-img" />        </div>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._welcomeBannerMarkup");var ExperimentEditorTemplates;(function(e){e._editorSurfaceV2Markup='<script type="text/html" id="experimentSvgTemplate">    <svg xmlns="http://www.w3.org/2000/svg"         xmlns:xlink="http://www.w3.org/1999/xlink"         class="svgRoot"         preserveAspectRatio="xMidYMid meet"         width="100%" height="100%">        <!-- this <g> must be first -->        <g>            <!-- ko if: $data -->            <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->            <!-- Add invisble rects so that SVG bounding box is the correct size -->            <rect data-bind="attr:{x:x, y:y, width: width, height: height, visibility: \'hidden\'}">            </rect>            <!-- /ko -->            <!-- ko foreach:Util.values(experimentViewModel().connections()) -->            <path class="connectionHitTest" data-bind="attr:{d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}" />            <path class="connection"                  data-bind="attr:{class:getClassId($parent.experimentViewModel().displayFlowType()),d:path},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}" />            <!-- /ko -->            <!-- ko ifnot: $root.renderThumbnail -->            <!-- ko if: stateMachine.dragging() === DraggingMode.SelectionRect -->            <!-- ko with: selectionManager -->            <rect class="selectionRect" data-bind="attr:{x:curX,y:curY,width:width,height:height}"></rect>            <!-- /ko -->            <!-- /ko -->            <!-- ko with: connector -->            <!-- ko if: isPreview -->            <path class="connector" fill="none" pointer-events="none" data-bind="visible:visible,attr:{d:path}" />            <!-- /ko -->            <!-- ko ifnot: isPreview -->            <line class="connector" pointer-events="none" data-bind="visible:visible,attr:{x1:x1,y1:y1,x2:x2,y2:y2}"></line>            <g data-bind="attr:{transform:translation}" class="port idlePort">                <polygon points="0,0 4,7 8,0" />            </g>            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->            <!-- /ko -->        </g>    </svg>    <div class="xe-overlay">        <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->        <!-- Module box/container-->        <div data-bind="style:{left:x()+\'px\', top:y()+\'px\', width: width() + \'px\', height: height() + \'px\'}, attr:{class:getClassId($parent.experimentViewModel().displayFlowType()) + \' node\',id: functionNodeModel.id, title: tooltip},event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp,dblclick:$root.entityDoubleClick,mouseover:onMouseIn,mouseout:onMouseOut}">            <!-- Module icon -->            <div data-bind="attr: { x: iconPosX(), y: iconPosY() }" style="overflow: visible">                <div data-bind="text: iconSymbol, attr: { \'class\': \'graphNode-icon \' + iconClass }" x="0" y="0" dy="25" width="25" height="25"></div>            </div>            <!-- Module name -->            <div class="staticText" data-bind="text: label"></div>            <!-- Module comment -->            <div class="nodeComment" data-bind="attr:{class:commentViewModel.commentClass,title:tooltip},style:{width:commentViewModel.commentWidth},visible:!commentViewModel.editingComment(),event:{mouseup:$root.entityMouseUp,mouseover:onMouseIn,mouseout:onMouseOut}">                <pre class="text" data-bind="text:commentViewModel.commentToShow,style:{height:(commentViewModel.linesToShow()*20+\'px\')},event:{mousedown:$root.entityMouseDown,dblclick:$root.entityDoubleClick}">&nbsp;</pre>            </div>            <!-- Input Ports -->            <!-- ko foreach: Util.values(inputPorts) -->            <div data-bind="                 style:{left:parentOffsetX()+\'px\', top:parentOffsetY()+\'px\'},                 attr:{class:getClassId($parents[1].experimentViewModel().displayFlowType()) + \' inputPort\',\'data-portname\':portModel.portReference.name, title:\'\'},                 event:{                 mousedown:$root.entityMouseDown,                 mouseup:$root.entityMouseUp,                 dblclick:$root.entityDoubleClick                 },                 balloon:{message:balloonMessage}">                <!-- Elements to only show on hover -->                <div class="portHoverContainer">                    <div class="portLabel" data-bind="text: portModel.portReference.name + \' (\' + portTypeName + \')\'"></div>                </div>            </div>            <!-- /ko --> <!-- Close: inputPort loop -->            <!-- Output Ports -->            <!-- ko foreach: Util.values(outputPorts) -->            <div data-bind="                 style:{left:parentOffsetX()+\'px\', top:parentOffsetY()+\'px\'},                 attr:{transform:translation,class:getClassId($parents[1].experimentViewModel().displayFlowType()) + \' outputPort\',\'data-portname\':portModel.portReference.name, title:\'\'},                 event:{                 mousedown:$root.entityMouseDown,                 mouseup:$root.entityMouseUp,                 dblclick:$root.entityDoubleClick                 },                 balloon:{message:balloonMessage}">                <!-- ko if: $parent.selected() && $index() < 9 -->                <div class="nodePort outputPortNumberCircle">                    <div data-bind="attr: { class: highlighted() ? \'active\' : \'\' }"></div>                    <div class="outputPortNumber">                        <div data-bind="text: $index() + 1 + \'\'"></div>                    </div>                </div>                <!-- /ko -->                <!-- Elements to only show on hover -->                <div class="portHoverContainer">                    <div class="portLabel" data-bind="text: portModel.portReference.name + \' (\' + portTypeName + \')\'"></div>                </div>            </div>            <!-- /ko -->            <!-- ko if: commentViewModel.hasComment() -->            <div data-bind="attr: { x: x() + width() - 20, y: labelPosY() + 5 }" class="expander">                <div data-bind="click: commentViewModel.showHideComment, event:{mousedown:$root.entityMouseDown,mouseup:$root.entityMouseUp}, text: commentViewModel.commentCollapsedExpandedIconSymbol"></div>            </div>            <!-- /ko -->            <img class="nodeStatus" data-bind="                 hoverBalloon:{                 message:balloonMessage,                 forceBalloon:forceBalloon                 },                 click $data.nodeIconClicked,                 event:{                 mousedown:$root.entityMouseDown,                 mouseup:$root.entityMouseUp,                 dblclick:$root.entityDoubleClick                 },                 attr:{                 src:statusIconURL                 }">            </img>        </div>        <!-- /ko -->    </div></script><!-- ko ifnot: $root.renderThumbnail --><!-- ExperimentEditor control template markup --><div class="experimentEditorContainer" data-bind="attr:{class:classId}">    <div class="experimentCanvas">        <!-- see v1 regarding shouldShowHelpWatermark -->        <!-- ko if: Features.miniMapInExperimentEditorEnabled()-->        <div class="miniMapAnchorDiv">        </div>        <!-- /ko -->        <!-- Experiment Editor SVG template start here -->        <div class="customElements">            <!-- ko template: { name: \'experimentSvgTemplate\', data: $data } --><!-- /ko -->        </div>        <!-- This is outside of custom elements because of some event handlers not cooperating -->        <div class="nativeElements">            <div class="xe-overlay">                <!-- ko foreach:Util.values(experimentViewModel().nodes()) -->                <textarea class="nodeComment" data-bind="style:{left:commentViewModel.commentPosX,top:commentViewModel.commentPosY,width:commentViewModel.commentWidth},visible:commentViewModel.editingComment,value:commentViewModel.comment,hasfocus:commentViewModel.editingComment,event:{keydown:$root.commentsEventHandler}"></textarea>                <!-- /ko -->            </div>        </div>    </div>    <div id="controlPanelContainer">        <div id="controlPanel"></div>        <!-- see v1 for web service view -->    </div>    <!--        todo: uncomment when enabling draft-state-machine integration    <div class="experiment-statusAlertsContainer">        <div class="experiment-statusAlerts" data-bind="text: draftSaveLabel"></div>        <div class="experiment-statusAlerts" data-bind="text: refreshStatusLabel"></div>    </div>--></div><!-- /ko -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._editorSurfaceV2Markup");var ExperimentEditorTemplates;(function(e){e._experimentEditorV2Markup='<div class="experiment-container">    <div class="xe-utilityPanelRoot"         style="display: none;"         data-bind="visible: !readOnlyMode(),                    resize: {                        direction: \'right\',                        parentContainerSelector: \'.experiment-container\',                        minSize: 254,                        id: \'palette\'                    },                    collapse: {                        collapseButtonSelector: \'.paletteExpander\',                        collapsed: paletteIsCollapsed,                        collapseFrom: \'right\',                        collapsedSize: 36,                        id: \'palette\'                    }">        <div class="icon paletteExpander"></div>        <div class="xe-paletteTitle">%datasetsModulesTrainedModelsLabel%</div>        <div class="xe-paletteContent">        <div class="xe-searchBox">            <input tabindex="3" type="text" data-bind="value:searchText, valueUpdate:[\'input\',\'keyup\']" placeholder="%palletteSearchBoxPlaceholder%" />            <span class="xe-searchIcon icon-Discovery"></span>        </div>        <div class="xe-utilityPanel"></div>    </div>    </div>    <div class="experiment-container-right">        <div tabindex="5" class="xe-propertyPanel">            <div class="propertyEditorRoot"></div>        </div>        <div class="headerExperimentEditorContainer">            <div tabindex="1" class="experiment-header">                <input class="experiment-description"                       id="experiment-description"                       type="text"                       placeholder="Enter experiment name here"                       data-bind="validatedInputBox: {                                        value: experimentEditorViewModel.experimentViewModel().experiment.name,                                        disabled: readOnlyMode                                      },                                  hasfocus: descriptionFocus,                                  visible: experimentEditorViewModel.experimentViewModel().experimentLoaded,                                  attr: { disabled: readOnlyMode }" />                <div class="experiment-stateLabel" data-bind="text: experimentEditorViewModel.experimentViewModel().experimentStateDisplay().statusLabel, visible: experimentEditorViewModel.experimentViewModel().experimentLoaded"></div>                <img class="experiment-stateIcon" data-bind="hoverBalloon: { message: experimentEditorViewModel.experimentViewModel().experimentStateDisplay().iconHoverBalloon },                                      visible: experimentEditorViewModel.experimentViewModel().experimentLoaded,                                      attr: { src: experimentEditorViewModel.experimentViewModel().experimentStateDisplay().statusIconUrl }" />            </div>            <div tabindex="2" class="experimentEditorRoot" data-bind="style: { top: \'44px\', stopBinding: true }">The canvas is under construction!</div>        </div>    </div>    <div class="customUX hidden">    </div>    <div class="prefetchImages"></div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._experimentEditorV2Markup");var ExperimentEditorTemplates;(function(e){e._bubbleMarkup='<div id="bubble-root">    <div id="bubble-container" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, visible:overlayVisible, style: { left: bubbleX() + \'px\' , top: bubbleY() + \'px\' }">        <div id="bubble-arrow" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, fadeVisible:visible, style: { left: arrowX() + \'px\', top: arrowY() + \'px\' }, css: arrowClassId()"></div>        <div id="bubble" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, fadeVisible:visible, style: { width: width() + \'px\', height: height() + \'px\' }">            <a class="bubble-close" href="#" id="bubble-close" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, click:close">x</a>            <div class="bubble-stepNumber animatedTour" data-bind="text: \'STEP \' + currentStepNumber(), visible: Features.animatedTourEnabled() && isCurrentStepAProgressStep()"></div>            <div class="bubble-title" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, html: title()"></div>            <div class="bubble-content" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, html: content()"></div>            <div class="bubble-bottom" data-bind="css:{animatedTour: Features.animatedTourEnabled()}">                <div class="bubble-button left back" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, visible: shouldShowLeftButton, click: backAsync, text: Features.animatedTourEnabled() ? leftButtonText : LocalizedResources.bubbleBackButtonText"></div>                <div class="bubble-button right next" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, visible: shouldShowRightButton, click: nextAsync, text: Features.animatedTourEnabled() ? rightButtonText : LocalizedResources.bubbleNextButtonText"></div>                <div class="bubble-button right finish" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, visible: shouldShowFinishButton(), click: close, html: Features.animatedTourEnabled() ? finishButtonText: LocalizedResources.bubbleFinishedButtonText"></div>                <div class="bubble-button midLeft" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, visible: shouldShowMidLeftButton(), click: midLeftButtonAsync, html: midLeftButtonText()"></div>                <div class="bubble-button midRight" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, visible: shouldShowMidRightButton(), click: midRightButtonAsync, html: midRightButtonText()"></div>                <!-- ko if: totalSteps() > 1-->                <ul class="bubble-progress center" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, visible: $root.isCurrentStepAProgressStep(), foreach: progressSteps">                    <li data-bind="css: {white: $root.progressSteps()[$index()] == $root.steps()[$root.currentIndex()], animatedTour: Features.animatedTourEnabled()}, click: $root.canSkipSteps ? function() { $root.gotoAsync($index()); } : null"></li>                </ul>                <!-- /ko -->            </div>        </div>    </div>    <div class="bubble-transparent-overlay blockingDiv" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, visible:overlayVisible() && showOverlay()">        <!-- ko if: hightlightRect() -->        <div class="bubble-overlay bubble-overlay-top" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, style: { height: hightlightRect().top + \'px\' }"></div>        <div class="bubble-overlay bubble-overlay-left" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, style: { top: hightlightRect().top + \'px\', height: hightlightRect().height + \'px\', width: hightlightRect().left + \'px\' }"></div>        <div class="bubble-overlay bubble-overlay-right" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, style: { top: hightlightRect().top + \'px\', height: hightlightRect().height + \'px\', left: hightlightRect().left + hightlightRect().width + \'px\' }"></div>        <div class="bubble-overlay bubble-overlay-bottom" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, style: { top: hightlightRect().top + hightlightRect().height + \'px\' }"></div>        <!-- /ko -->    </div>    <div class="bubble-element-highlight blockingDiv" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, visible:showElementHighlight()">        <!-- ko if: elementHightlightRect() -->        <div class="bubble-overlay bubble-overlay-top" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, style: { height: elementHightlightRect().top + \'px\' }"></div>        <div class="bubble-overlay bubble-overlay-left" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, style: { top: elementHightlightRect().top + \'px\', height: elementHightlightRect().height + \'px\', width: elementHightlightRect().left + \'px\' }"></div>        <div class="bubble-overlay bubble-overlay-right" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, style: { top: elementHightlightRect().top + \'px\', height: elementHightlightRect().height + \'px\', left: elementHightlightRect().left + elementHightlightRect().width + \'px\' }"></div>        <div class="bubble-overlay bubble-overlay-bottom" data-bind="css:{animatedTour: Features.animatedTourEnabled()}, style: { top: elementHightlightRect().top + elementHightlightRect().height + \'px\' }"></div>        <!-- /ko -->    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._bubbleMarkup");var ExperimentEditorTemplates;(function(e){e._createWebServiceTutorialStep1Markup="<div>    <h2>Welcome to web service creation</h2>    <div>        <p>            Placeholder        </p>    </div></div>"})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceTutorialStep1Markup");var ExperimentEditorTemplates;(function(e){e._createWebServiceTutorialStep2Markup="<div>    <h2>Edit your workflow and complete the graph</h2>    <div>        <p>            Placeholder        </p>    </div></div>"})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceTutorialStep2Markup");var ExperimentEditorTemplates;(function(e){e._createWebServiceTutorialStep3Markup="<div>    <h2>Specify Input and Output, Run and Publish</h2>    <div>        <p>            Placeholder        </p>    </div></div>"})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._createWebServiceTutorialStep3Markup");var ExperimentEditorTemplates;(function(e){e._binaryClassificationComparisonMarkup='<!-- ko if: loaded --><vflexbox class="pageContainer">    <!-- ko with: plotContainer -->    <div class="viewModelContainer">        <div class="sectionContainer">            <vflexbox>                <div class="tabHeaders">                    <!-- ko foreach: chartNames -->                    <div data-bind="attr: { id: $data + \'-tab\' }, text: $data.toUpperCase(), click: $parent.setCurrentChart, css: { selected: $data === $parent.currentChart() }" class="tab"></div>                    <!-- /ko -->                </div>                <hflexbox class="chartContainer">                    <div class="graphContainer">                        <div class="yAxisContainer" data-bind="style: { \'marginTop\': height() / 2 + \'px\' }">                            <div class="vertical-text yAxisLabel graphText" data-bind="text: yAxisLabel"></div>                        </div>                        <div class="chartAndXAxisContainer">                            <svg class="chartArea" data-bind="attr: { height: height(), width: width() }">                                <g data-bind="d3Axes: { xScale: xScale(), yScale: yScale() }" />                                <!-- ko foreach: plotData -->                                <g data-bind="attr: { id: \'curve\' + $index() }">                                    <path class="chartCurve" data-bind="                                    attr: {                                        d: $parent.svgLineFunction()(data),                                        stroke: $parent.colors()[$index()],                                        \'stroke-width\': $index() === $parents[1].currentViewModelIndex() ? 5 : 3,                                        opacity: $index() === $parents[1].currentViewModelIndex() ? 1 : 0.8                                    },                                    click: function() {  $parents[1].setCurrentViewModelIndex($index()) }">                                    </path>                                </g>                                <!-- /ko -->                            </svg>                            <div class="xAxisContainer" data-bind="style: { \'marginLeft\': width() / 2 + \'px\' }">                                <div class="horz-text xAxisLabel graphText" data-bind="text: xAxisLabel"></div>                            </div>                        </div>                        <div class="legendContainer">                            <!-- ko foreach: plotData -->                            <hflexbox class="legendInstance" data-bind="click: function() { $parents[1].setCurrentViewModelIndex($index()) }, css: { selected: $index() === $parents[1].currentViewModelIndex() }">                                <div class="legendColor" data-bind="style: { \'backgroundColor\': $parent.colors()[$index()] }"></div>                                <div class="legendLabel" data-bind="text: label"></div>                            </hflexbox>                            <!-- /ko -->                        </div>                    </div>                    <!-- ko if: Features.miniMapInEvaluateVisualizationEnabled()-->                    <div id="evaluateMiniMapContainer" class="evaluateMiniMapContainer">                        <div id="evaluateMiniMap" data-bind="style: { \'height\': height() * $parent.miniMapProportion + \'px\', \'width\': width() * $parent.miniMapProportion + \'px\' }">                            <div class="customElements">                            </div>                        </div>                        <div id="zoomControlPanelContainer" class="controlPanel">                        </div>                    </div>                    <!-- /ko -->                </hflexbox>              </vflexbox>        </div>    </div>        <!-- /ko -->    <!-- ko with: currentViewModel -->        <div class="sectionContainer">            <hflexbox>                <!-- ko with: confusionMatrixViewModel -->                <table class="confusionMatrixTable">                    <tr>                        <td class="numeric-box">                            <div class="numeric-header">%rocTruePositive%</div>                            <div class="numeric-field" data-bind="text: rows()[0].cells()[0]"></div>                        </td>                        <td class="numeric-box">                            <div class="numeric-header">%rocFalseNegative%</div>                            <div class="numeric-field" data-bind="text: rows()[0].cells()[1]"></div>                        </td>                    </tr>                    <tr>                        <td class="numeric-box">                            <div class="numeric-header">%rocFalsePositive%</div>                            <div class="numeric-field" data-bind="text: rows()[1].cells()[0]"></div>                        </td>                        <td class="numeric-box">                            <div class="numeric-header">%rocTrueNegative%</div>                            <div class="numeric-field" data-bind="text: rows()[1].cells()[1]"></div>                        </td>                    </tr>                </table>                <!-- /ko -->                <!-- ko with: precisionRecallViewModel -->                <table class="confusionMatrixTable">                    <tr>                    <td class="numeric-box">                        <div class="numeric-header">%rocAccuracy%</div>                        <div class="numeric-field" data-bind="text: rows()[0].cells()[0]"></div>                    </td>                    <td class="numeric-box">                        <div class="numeric-header">%rocPrecision%</div>                        <div class="numeric-field" data-bind="text: rows()[0].cells()[1]"></div>                    </td>                    <tr>                        <td class="numeric-box">                            <div class="numeric-header">%rocRecall%</div>                            <div class="numeric-field" data-bind="text: rows()[1].cells()[0]"></div>                        </td>                        <td class="numeric-box">                            <div class="numeric-header">%rocF1Score%</div>                            <div class="numeric-field" data-bind="text: rows()[1].cells()[1]"></div>                        </td>                    </tr>                </table>                <!-- /ko -->                <div class="numeric-box thresholdBox">                    <div class="numeric-header">%rocThreshold%</div>                    <input class="numeric-field thresholdText" data-bind="value: rawThreshold"/>                </div>                <div>                    <input type="range" min="0" max="1" step=".01" data-bind="value: threshold" />                </div>                <div class ="numeric-box">                    <div class="numeric-header">%rocCumulativeAuc%</div>                    <div class="numeric-field" data-bind="text: auc"></div>                </div>            </hflexbox>            <table class="confusionMatrixTable">                <tr>                    <!-- ko if: positiveLabel() -->                    <td class="numeric-box">                        <div class="numeric-header">%binaryClassificationPositiveLabel%</div>                        <div class="numeric-field" data-bind="text: positiveLabel"></div>                    </td>                    <!-- /ko -->                    <!-- ko if: negativeLabel() -->                    <td class="numeric-box">                        <div class="numeric-header">%binaryClassificationNegativeLabel%</div>                        <div class="numeric-field" data-bind="text: negativeLabel"></div>                    </td>                    <!-- /ko -->                </tr>            </table>        </div>        <!-- ko with: binDataViewModel -->        <div class="sectionContainer">            <table class="buckets-data">                <tr data-bind="foreach: headerRow().cells">                    <th data-bind="text: $data"></th>                </tr>                <!-- ko foreach: rows() -->                <tr data-bind="foreach: cells">                    <td data-bind="text: $data"></td>                </tr>                <!-- /ko -->            </table>        </div>        <!-- /ko -->     <!-- /ko --></vflexbox><!-- /ko -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._binaryClassificationComparisonMarkup");var ExperimentEditorTemplates;(function(e){e._clusteringMarkup='<div class="clusterContainer">    <hflexbox>        <svg class="clusterSvg" data-bind="attr: { height: height, width: width }">            <g class="axesContainer" data-bind="clusteringAxes: { }" />              <!-- ko foreach: clusterViewModels -->            <g>                <ellipse class="clusterEllipse" stroke-width="2" data-bind="                style: { fill: color },                attr: { cx: centroidX(), cy: centroidY(),                    rx: majorAxisLength(), ry: minorAxisLength(),                    transform: ellipseRotation(),                    stroke: color() }">                </ellipse>            </g>            <!-- /ko -->        </svg>        <div class="clusterLegendContainer">            <!-- ko foreach: clusterViewModels -->            <hflexbox class="clusterLegendInstance">                <div class="clusterLegendColor" data-bind="style: { \'backgroundColor\': color }"></div>                <div class="clusterLegendLabel" data-bind="text: label"></div>            </hflexbox>            <!-- /ko -->        </div>    </hflexbox></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._clusteringMarkup");var ExperimentEditorTemplates;(function(e){e._customUXContainerMarkup='<div class="customUXWindow" data-bind="style: { width: width(), height: height() }">    <hflexbox class="visualizationTopHeader">        <!-- ko with: breadcrumbHeader -->        <hflexbox class="breadcrumbHeader">            <!-- ko if: $parent.showBreadcrumbHeader -->            <div class = "breadcrumbHeaderText" data-bind="text: experimentName"></div>            <div class = "breadcrumbHeaderSeparator"></div>            <div class = "breadcrumbHeaderText" data-bind="text: moduleName"></div>            <div class = "breadcrumbHeaderSeparator"></div>            <div class = "breadcrumbHeaderText" data-bind="text: portName"></div>            <!-- /ko -->            <div class=\'icon close\'></div>        </hflexbox>        <!-- /ko -->    </hflexbox></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._customUXContainerMarkup");var ExperimentEditorTemplates;(function(e){e._customUXTabsContainerMarkup='<div class="customUXWindow customUXTabsWindow" data-bind="style: { width: width(), height: height() }">    <vflexbox>        <!--- Header --->        <flexstatic>            <!-- ko if: heading() -->            <h1 data-bind="text: heading"></h1>            <!-- /ko -->                        <!-- ko if: showBreadcrumbHeader -->            <hflexbox class="customUXTopHeader">                <hflexbox class="breadcrumbHeader">                    <!-- ko with: breadcrumbHeader -->                    <div class="breadcrumbHeaderText" data-bind="text: experimentName"></div>                    <div class="breadcrumbHeaderSeparator"></div>                    <div class="breadcrumbHeaderText" data-bind="text: moduleName"></div>                    <div class="breadcrumbHeaderSeparator"></div>                    <div class="breadcrumbHeaderText" data-bind="text: portName"></div>                    <!-- /ko -->                    <div class="icon close" data-bind="click: onClose"></div>                </hflexbox>            </hflexbox>            <!-- /ko -->            <!-- ko ifnot: showBreadcrumbHeader -->            <div class="icon close" data-bind="click: onClose"></div>            <!-- /ko -->        </flexstatic>        <!--- Content --->        <flexfill class="customUXSections left-nav" data-bind="jQueryTabs: jQueryTabsOptions">            <ul data-bind="foreach: views">                <li data-bind="hoverBalloon: {message: (!isEnabled() ? isDisabledTooltip : \'\')}">                    <a data-bind="text: title"></a>                </li>            </ul>            <!-- ko foreach: views -->            <section>                <!-- ko templateWithHtml: {html: markup, data: viewModel} --><!-- /ko -->            </section>            <!-- /ko -->        </flexfill>    </vflexbox></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._customUXTabsContainerMarkup");var ExperimentEditorTemplates;(function(e){e._genericMimeMarkup='<div class="rOutputContainer">    <!-- ko foreach: mimeSections -->    <div class="rOutputLogContainer">        <hflexbox>            <vflexbox class="rExpanderContainer">                <div class="rExpander" data-bind="css: { \'expanded\': show(), \'collapsed\': !show() }, click: function () { $data.show(!$data.show()) }"></div>            </vflexbox>            <div class="rLogHeader" data-bind="text: title()"> </div>        </hflexbox>        <div data-bind="style: { display: show() ? \'\' : \'none\' }">            <!-- ko foreach: values -->            <div data-bind="template: { name: $parents[1].getSectionTemplateByMimeType(dataType()) }"></div>            <!-- /ko -->        </div>    </div>    <!-- /ko --></div><script id="mimeTextEntry" type="text/html">    <div class="rOutputLog" data-bind="text: data()"></div></script><script id="mimePngEntry" type="text/html">    <img class="rImage" data-bind="attr: { src: \'data:image/png;base64,\' + data() }" /></script><script id="mimeJpgEntry" type="text/html">    <img class="rImage" data-bind="attr: { src: \'data:image/jpeg;base64,\' + data() }" /></script><script id="mimeSvgEntry" type="text/html">    <img class="rImage" data-bind="attr: { src: \'data:image/svg+xml;utf8,\' + data() }" /></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._genericMimeMarkup");var ExperimentEditorTemplates;(function(e){e._jSONMarkup='<div class="JSONContainer" data-bind="text: text"></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._jSONMarkup");var ExperimentEditorTemplates;(function(e){e._learnerMarkup='<div class="learnerContainer">    <div class="learnerName" data-bind="text: learnerName"></div>    <!-- ko foreach: tables -->    <div class="learnerTableContainer">        <div class="learnerTableHeader" data-bind="text: headerLabel()"></div>        <table>            <tr>                <!-- ko foreach: columnNames -->                <th data-bind="text: $data"></th>                <!-- /ko -->            </tr>            <!-- ko foreach: table -->            <tr class="learnerTable">                <!-- ko foreach: $data -->                <td data-bind="text: $data"></td>                <!-- /ko -->            </tr>            <!-- /ko -->        </table>    </div>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._learnerMarkup");var ExperimentEditorTemplates;(function(e){e._multiclassClassificationMarkup='<!-- ko if: loaded --><div class="multiclassViewModelContainer">    <!-- ko foreach: viewModels -->    <div>        <!-- ko if: showMetrics -->        <div class="multiclassSection">            <hflexbox class="multiclassSectionHeader">                <vflexbox class="multiclassExpanderContainer">                    <div class="multiclassExpander" data-bind="                        css: { \'expanded\': !metricsIsCollapsed(), \'collapsed\': metricsIsCollapsed() },                        click: function () { $data.metricsIsCollapsed(!$data.metricsIsCollapsed()) }">                    </div>                </vflexbox>                <div>%multiclassMetricsHeader%</div>            </hflexbox>            <div class="metricsTableContainer" data-bind="style: { display: metricsIsCollapsed() ? \'none\' : \'\' }">                <table class="metricsTable">                <tbody>                    <!-- ko foreach: metrics -->                    <tr>                        <!-- ko foreach: $data -->                        <td data-bind="text: $data"></td>                        <!-- /ko -->                    </tr>                    <!-- /ko -->                </tbody>                </table>            </div>        </div>        <!-- /ko -->        <div class="multiclassSection">            <hflexbox class="multiclassSectionHeader">                <vflexbox class="multiclassExpanderContainer">                    <div class="multiclassExpander" data-bind="                        css: { \'expanded\': !confusionMatrixIsCollapsed(), \'collapsed\': confusionMatrixIsCollapsed() },                        click: function () { $data.confusionMatrixIsCollapsed(!$data.confusionMatrixIsCollapsed()) }">                    </div>                </vflexbox>                <div>%multiclassConfusionMatrixHeader%</div>            </hflexbox>            <svg class="multiclassSvg" data-bind="attr: { width: width, height: height }, style: { display: confusionMatrixIsCollapsed() ? \'none\' : \'\' }">                <g>                    <!-- ko foreach: superHeaders -->                    <text class="superHeaderText" data-bind="text: label, attr: { x: xCoordinate, y: yCoordinate, transform: transform }"></text>                    <!-- /ko -->                    <!-- ko foreach: xClassLabels -->                    <text class="labelHeaderText" data-bind="text: label, attr: { x: xCoordinate, y: yCoordinate, transform: transform }">                        <title data-bind="text: fullLabel"></title>                    </text>                    <!-- /ko -->                    <!-- ko foreach: yClassLabels -->                    <text class="labelHeaderText" data-bind="text: label, attr: { x: xCoordinate, y: yCoordinate, transform: transform }">                        <title data-bind="text: fullLabel"></title>                    </text>                    <!-- /ko -->                </g>                <g>                    <!-- ko foreach: instances -->                    <rect class="confusionMatrixEntry" data-bind="style: { \'stroke-width\': isMainDiagonalEntry() ? 5 : 1 },                    attr: { width: sideLength, height: sideLength, x: xCoordinate, y: yCoordinate, \'fill-opacity\': fractionOfActualClass }">                        <title data-bind="text: \'%multiclassFrequency%: \' + frequency()"></title>                    </rect>                    <text class="entryLabel" data-bind="text: frequency() > 0 ? percentOfActualClass : \'\', attr: { x: xCoordinate() + (sideLength() / 2), y: yCoordinate() + (sideLength() / 2) }">                        <title data-bind="text: \'%multiclassFrequency%: \' + frequency()"></title>                    </text>                    <!-- /ko -->                </g>            </svg>        </div>    </div>    <!-- /ko --></div><!-- /ko -->'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._multiclassClassificationMarkup");var ExperimentEditorTemplates;(function(e){e._regressionEvaluationMarkup='<div class="multiclassViewModelContainer">    <!-- ko foreach: viewModels -->    <div>        <div class="multiclassSection">            <hflexbox class="multiclassSectionHeader">                <vflexbox class="multiclassExpanderContainer">                    <div class="multiclassExpander" data-bind="                        css: { \'expanded\': !metricsIsCollapsed(), \'collapsed\': metricsIsCollapsed() },                        click: function () { $data.metricsIsCollapsed(!$data.metricsIsCollapsed()) }">                    </div>                </vflexbox>                <div>%multiclassMetricsHeader%</div>            </hflexbox>            <div class="metricsTableContainer" data-bind="style: { display: metricsIsCollapsed() ? \'none\' : \'\' }">                <table class="metricsTable">                    <tbody>                        <!-- ko foreach: metrics -->                        <tr>                            <!-- ko foreach: $data -->                            <td data-bind="text: $data"></td>                            <!-- /ko -->                        </tr>                        <!-- /ko -->                    </tbody>                </table>            </div>        </div>        <div class="multiclassSection">            <hflexbox class="multiclassSectionHeader">                <vflexbox class="multiclassExpanderContainer">                    <div class="multiclassExpander" data-bind="                        css: { \'expanded\': !histogramIsCollapsed(), \'collapsed\': histogramIsCollapsed() },                        click: function () { $data.histogramIsCollapsed(!$data.histogramIsCollapsed()) }">                    </div>                </vflexbox>                <div>%regressionErrorHistogramHeader%</div>            </hflexbox>            <!-- ko if: $data.errorHistogram == null -->            <div class="errorHistogramContainer">              <div class="warning">%regressionErrorNoHistogramErrorMessage%</div>            </div>            <!-- /ko -->            <!-- ko if: $data.errorHistogram != null -->            <div class="errorHistogramContainer" data-bind="                    style: { display: histogramIsCollapsed() ? \'none\' : \'\' },                    d3graph: { data: $data.errorHistogram, minWidth: 380, height: 370, padding: 60, minimized: false }">            </div>            <!-- /ko -->        </div>    </div>    <!-- /ko --></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._regressionEvaluationMarkup");var ExperimentEditorTemplates;(function(e){e._rOutputMarkup='<div class="rOutputContainer">    <!-- ko foreach: outputLogs -->    <div class="rOutputLogContainer">        <hflexbox>            <vflexbox class="rExpanderContainer">                <div class="rExpander" data-bind="css: { \'expanded\': show(), \'collapsed\': !show() }, click: function () { $data.show(!$data.show()) }"></div>            </vflexbox>            <div class="rLogHeader" data-bind="text: label()"> </div>        </hflexbox>        <div class="rOutputLog" data-bind="text: content(), style: { display: show() ? \'\' : \'none\' }"></div>    </div>    <!-- /ko -->    <div class="rGraphicsDevice">        <hflexbox>            <vflexbox class="rExpanderContainer">                <div class="rExpander" data-bind="css: { \'expanded\': showGraphicsDevice(), \'collapsed\': !showGraphicsDevice() }, click: function () { $data.showGraphicsDevice(!$data.showGraphicsDevice()) }"></div>            </vflexbox>            <div class="rLogHeader">%rOutputGraphicsDevice%</div>        </hflexbox>        <div data-bind="style: { display: showGraphicsDevice() ? \'\' : \'none\' }">            <!-- ko foreach: pngSrcs -->            <img class="rImage" data-bind="attr: { src: $data }" />            <!-- /ko -->        </div>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._rOutputMarkup");var ExperimentEditorTemplates;(function(e){e._treeEnsembleMarkup='<div id="treeEnsembleViewContainer" class="TreeEnsembleOutputContainer">    <hflexbox class="numberRowsColumnsContainer">        <div class="numberRowsColumnsHeader">            <div class="smallHeader">                %treeEnsembleTreesConstructed%            </div>            <div data-bind="text: treeCount">            </div>        </div>    </hflexbox>    <hflexbox class="treeContentWrapper">        <div id="treeThumbnailSidebar" data-bind="event: { scroll: onScroll }">            <!-- ko foreach: treeThumbnailUrls -->            <div class="treeThumbnailContainer" data-bind="event: { click: select }, css: { selectedTreeThumbnail: $parent.selectedTreeIndex() === $index() }">                <div class="treeThumbnailLabel" data-bind="text: $index() + 1"></div>                <img class="treeThumbnail" data-bind="attr: { src: thumbnailUrl }" />            </div>            <!-- /ko -->            <!-- ko if: showLoadMore -->            <!-- TODO make sure this works, maybe change to link style, localize -->            <div data-bind="event: { click: loadMore }" id="showMoreLink">%treeEnsembleShowMore%</div>            <!-- /ko -->        </div><!-- this comment gets rid of the gap between the two elements        -->        <div id="treeViewContainer">            <!-- ko with: tree -->            <div id="treeInterface" style="position: relative">                <div id="treeView">                    <div class="customElements">                        <svg id="treeSvg">                            <rect width="100%" height="100%" class="treeBackground" data-bind="event: { click: clearSelection }"/>                            <g id="transformElement">                                <!-- ko foreach: leftEdges -->                                <line class="treeEdge" data-bind="attr: { x1: start.x, y1: start.y, x2: end.x, y2: end.y }, css: { selectedTreeEdge: highlight() }"/>                                <!-- ko if: text -->                                <text class="treeEdgeCaption trueEdgeCaption" data-bind="attr: { x: (start.x + end.x) / 2 - 5, y: (start.y + end.y) / 2 }, text: text"></text>                                <!-- /ko -->                                <!-- /ko -->                                <!-- ko foreach: rightEdges -->                                <line class="treeEdge" data-bind="attr: { x1: start.x, y1: start.y, x2: end.x, y2: end.y }, css: { selectedTreeEdge: highlight() }"/>                                <!-- ko if: text -->                                <text class="treeEdgeCaption falseEdgeCaption" data-bind="attr: { x: (start.x + end.x) / 2 + 5, y: (start.y + end.y) / 2 }, text: text"></text>                                <!-- /ko -->                                <!-- /ko -->                                <!-- ko foreach: interiorNodes -->                                <!-- ko if: !isPlaceholder() -->                                <circle class="treeNodeBackground interiorTreeNode" data-bind="attr: { cx: x, cy: y, r: radius }, css: { selectedTreeNode: highlight() }"/>                                <text class="treeNodeFeatureName staticText" data-bind="attr: { x: x, y: y }">                                    <tspan data-bind="text: feature()"></tspan>                                </text>                                <text class="treeNodePredicate" data-bind="attr: { x: x, y: y + 20 }, text: predicate()"/>                                <circle class="treeNodeForeground" data-bind="attr: { cx: x, cy: y, r: radius }, event: { click: selectTreeNode }">                                    <title data-bind="text: fullFeatureName()"/>                                </circle>                                <!-- /ko -->                                <!-- /ko -->                                <!-- ko foreach: leafNodes -->                                <circle class="treeNodeBackground leafTreeNode" r="40" data-bind="attr: { cx: x, cy: y }"/>                                <text class="treeNodeFeatureName staticText" data-bind="attr: { x: x, y: y }">                                    <tspan data-bind="text: feature()"></tspan>                                </text>                                <!-- ko if: showClassPercentage() -->                                <text class="treeNodeClassPercentage" data-bind="attr: { x: x, y: y + 30 }, text: classPercentage()"/>                                <!-- /ko -->                                <path class="treeNodeArc" data-bind="attr: { d: arcPath() }"/>                                <circle class="treeNodeForeground" r="40" data-bind="attr: { cx: x, cy: y }, event: { click: selectTreeNode }">                                    <title data-bind="text: fullFeatureName()" />                                </circle>                                <!-- /ko -->                            </g>                        </svg>                    </div>                </div>                <hflexbox class="treeToolbarContainer">                    <div id="treeToolbar" class="controlPanel"></div>                    <input id="viewMode" class="edgeCaptionCheckbox" type="checkbox"/>                    <label class="edgeCaptionCheckboxLabel">%treeEnsembleEdges%</label>                </hflexbox>            </div>            <!-- /ko -->        </div>        <!-- ko with: tree -->        <div id="treeStatistics">            <div class="treeStatisticsTopHeader">%treeEnsembleStatistics%</div>            <!-- ko foreach: nodeStatisticsForHighlightedPath -->            <div class="treeStatisticContainer">                <!-- ko if: $data.feature -->                <div class="treeStatisticHeader" data-bind="text: feature"></div>                <!-- /ko -->                <table>                    <tbody>                    <!-- ko if: $data.predicate -->                    <tr>                        <td class="treeStatisticName">%treeEnsemblePredicate%</td>                        <td class="treeStatisticValue" data-bind="text: predicate"></td>                    </tr>                    <!-- /ko -->                    <!-- ko if: $data[\'Split Gain\'] -->                    <tr>                        <td class="treeStatisticName">%treeEnsembleSplitGain%</td>                        <td class="treeStatisticValue" data-bind="text: $data[\'Split Gain\']"></td>                    </tr>                    <!-- /ko -->                    <!-- ko if: $data[\'Gain P-Value\'] -->                    <tr>                        <td class="treeStatisticName">%treeEnsembleGainPValue%</td>                        <td class="treeStatisticValue" data-bind="text: $data[\'Gain P-Value\']"></td>                    </tr>                    <!-- /ko -->                    </tbody>                </table>                <!-- ko if: $data.graph -->                <hflexbox>                    <div class="treeStatisticName">%treeEnsemblePrediction%</div>                    <!-- ko if: $data["Prediction Type"] === "Point mass" -->                    <div class="treePredictionValue treeStatisticValue" data-bind="text: graph.xValues[0]"></div>                    <!-- /ko -->                    <!-- ko if: $data["Prediction Type"] === "Histogram" -->                    <table>                        <tbody>                            <!-- ko foreach: $data.graph.xValues -->                            <tr>                                <td class="treePredictionValue treeStatisticValue" data-bind="text: $data"></td>                                <td>                                    <div class="treePredictionHistogramBar"                                         data-bind="style: { width: ($parent.graph.yPredictionValues[$index()] / $parent.graph.yValueSum) * 100 + \'px\' },                                            attr: { title: $parent.graph.yPredictionValues[$index()] }">                                    </div>                                </td>                            </tr>                            <!-- /ko -->                        </tbody>                    </table>                    <!-- /ko -->                </hflexbox>                <!-- /ko -->            </div>            <!-- /ko -->        </div>        <!-- /ko -->    </hflexbox></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._treeEnsembleMarkup");var ExperimentEditorTemplates;(function(e){e._videoMarkup='<video controls data-bind="attr: { src: url, width: width, height: height }, event: { playing: markAsWatched }"></video>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._videoMarkup");var ExperimentEditorTemplates;(function(e){e._configureConnectionMarkup='<script type="text/html" id="ConfigurationConnection">    <div class="fx-dialog-template datalab-dialog dataIngestion">        <!-- TODO: We\'re directly inserting child parameters, need extra padding/styling to make this look good -->        <!-- ko foreach: nodeParameters -->        <!-- ko if: property.isRelevant() -->        <experiment-parameter params="viewModel: $data"></experiment-parameter>        <!-- /ko -->        <!-- /ko -->        <div class="dataIngestionTestConnectionContainer" data-bind="visible: showTestConnection()">            <button class="dataIngestionTestConnectionButton" data-bind="click: testConnection, disable: canTestConnection">                Test Connection            </button>            <span data-bind=                  "text: testConnectionMessage,                   css: {                     \'dataIngestionTestConnectionMessage\': true,                    \'dataIngestionTestConnectionSuccessful\' : testConnectionSuccessful() ,                    \'dataIngestionTestConnectionUnsuccessful\' : !testConnectionSuccessful()                  }"             />            <div class="dataIngestionTestConnectionHelpButton quickHelpTitle" data-bind="visible: shouldShowExceptionDetails, hoverBalloon:{message: exceptionDetails}"></div>        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._configureConnectionMarkup");var ExperimentEditorTemplates;(function(e){e._configurePostConnectionMarkup='<script type="text/html" id="ConfigurePostConnection">    <div class="fx-dialog-template datalab-dialog dataIngestion vscroll">                <!-- ko ifnot: showConfigComplete() -->            <!-- ko foreach: nodeParameters -->                <!-- ko if: property.isRelevant() -->                    <experiment-parameter params="viewModel: $data"></experiment-parameter>                <!-- /ko -->            <!-- /ko -->        <!-- /ko -->        <!-- ko if: showConfigComplete() -->        <span data-bind="text: configCompleteMessage"></span>        <!-- /ko -->    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._configurePostConnectionMarkup");var ExperimentEditorTemplates;(function(e){e._dataConnectionTypeMarkup='<script type="text/html" id="DataConnectionTypeTemplate">    <div class="connectionTypeSubHeader" data-bind="text:LocalizedResources.importDataWizardConnectionSubheader"></div>    <div class="connectionTypesContainer">        <!-- ko foreach:connectionTypes -->            <div class="connectionTypeRow" data-bind="css: {selected: $data.isSelected}, click:$parent.onClick">                <div class="connectionTypeSelectionIndicator"></div>                <img class="connectionTypeImage" data-bind="attr:{src: $data.imagePath}" />                <div class="connectionTypeText" data-bind="text: $data.choice.displayValue"></div>            </div>         <!-- /ko -->    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._dataConnectionTypeMarkup");var ExperimentEditorTemplates;(function(e){e._workspaceSelectorDialogBodyMarkup='<script type="text/html" id="dialogBody">    <p data-bind="html: bodyText"></p>    <div>        <b>Region</b>        <div class="dropdown" style="width:400px;">            <button class="btn btn-default dropdown-toggle" style="width:inherit; border-radius: 0px;" type="button" data-toggle="dropdown">                <div class="row">                    <div class="col-sm-6 text-left" data-bind="text: workspaceSelector.selectedLocation().location" id="locationDropdown" />                    <div class="col-sm-6" style="text-align: right;"><span class="caret"></span></div>                </div>            </button>            <ul class="dropdown-menu" data-bind="foreach: workspaceSelector.locations" style="width: inherit">                <li><a data-bind="text: $data.location, click: $root.updateLocation" style="cursor: default" /></li>            </ul>        </div>    </div>    <div>        <br/>        <b>Workspace</b>        <div class="dropdown" style="width:400px;">            <div style="text-color: #323232; text-align: center" data-bind="visible:!workspaceAvailable(), text: getWorkspace()" />            <button class="btn btn-default dropdown-toggle" style="width:inherit; border-radius: 0px;" type="button" data-toggle="dropdown" data-bind="visible: workspaceAvailable()">                <div class="row">                    <div class="col-sm-6 text-left" data-bind="text: getWorkspace()" id="workspaceDropdown" />                    <div class="col-sm-6" style="text-align: right;"><span class="caret"></span></div>                </div>            </button>            <ul class="dropdown-menu" data-bind="foreach: workspaceSelector.workspaces, visible: workspaceAvailable()" style="width: inherit">                <li>                    <a data-bind="text: $data.displayName, click: $root.updateWorkspace" style="cursor: default" />                </li>            </ul>        </div>    </div>    <p data-bind="html: bodyWarning, visible: warningVisible()"></p></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._workspaceSelectorDialogBodyMarkup");var ExperimentEditorTemplates;(function(e){e._markdownEditorMarkup='<div class="preview-switch">    <div class="toggle-btn">        <input type="radio" name="preview-switch" value="false" data-bind="checked: inPreview.forEditing" /><div><div class="markdown-icon"></div>Markdown</div>    </div>    <div class="toggle-btn">        <input type="radio" name="preview-switch" value="true" data-bind="checked: inPreview.forEditing" /><div><div class="preview-icon"></div>Preview</div>    </div></div><div class="editor-container">    <div class="wmd-editor" data-bind="css: { \'in-preview\': inPreview }">        <div data-bind="attr: { id: buttonBarId }"></div>        <textarea class="wmd-input" data-bind="attr: { id: inputAreaId }, value: value, placeholder: placeholder"></textarea>    </div>    <div class="wmd-preview" data-bind="attr: { id: previewAreaId }, css: { \'in-preview\': inPreview }"></div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._markdownEditorMarkup");var ExperimentEditorTemplates;(function(e){e._newBlankProjectDialogMarkup='<div class="new-blank-project-dialog-content-container">    <h2 class="title" data-bind="text: LocalizedResources.projectQuickCreateDialogTitle"></h2>    <div class="new-project-name-input-container">        <label for="new-project-name-input" data-bind="text: LocalizedResources.projectQuickCreateLabelName"></label>        <input id="new-project-name-input"               type="text"               data-bind="validatedInputBox: { value: name}, attr: {placeholder: LocalizedResources.projectQuickCreateNamePlaceHolder}" />    </div>    <div class="new-project-description-input-container">        <label for="new-project-description-input" data-bind="text: LocalizedResources.projectQuickCreateLabelDescription"></label>        <textarea            id="new-project-description-input"            data-bind="value: description, attr: {placeholder: LocalizedResources.projectQuickCreateDescriptionPlaceHolder, maxlength: descriptionMaxLength}">       </textarea>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._newBlankProjectDialogMarkup");var ExperimentEditorTemplates;(function(e){e._projectConfigurationDialogMarkup='<script type="text/html" id="checkboxAssetItem">    <label>        <input type="checkbox"               class="datalab-gridCellPropertyItem"               data-bind="attr: {value: name, title: isEnabled() ? \'\' : LocalizedResources.projectConfigDisabledAddTooltip}, checked: isSelected, enable: isEnabled" />        <span class="assetName" data-bind="text: name, attr: {title: isEnabled() ? \'\' : LocalizedResources.projectConfigDisabledAddTooltip}"></span>    </label></script><div class="projectConfigurationDialog cf">    <h2 data-bind="text: LocalizedResources.projectConfigDialogTitle"></h2>    <div class="content-container">        <div class="projectInfoContainer">            <div class="projectNameContainer">                <label data-bind="text: LocalizedResources.projectConfigNameLabel"></label>                <input type="text" data-bind="validatedInputBox: { value: $data.name},											attr: {placeholder: LocalizedResources.projectQuickCreateNamePlaceHolder}" />            </div>            <div class="projectDescriptionContainer">                <label data-bind="text: LocalizedResources.projectConfigDescriptionLabel"></label>                <textarea data-bind="value: $data.description,									attr: {placeholder: LocalizedResources.projectQuickCreateDescriptionPlaceHolder, maxlength: descriptionMaxLength}"></textarea>            </div>        </div>        <div class="vertical-line"></div>        <div class="projectAssetSelectorContainer">            <div class="allAssetsArea">                <label data-bind="text: LocalizedResources.projectConfigAllAssetsLabel"></label>                <div class="filtersArea">                    <div class="assetTypeSelector">                        <select data-bind="options: assetTypes.allAssetTypes,										    optionsText: \'displayName\',										    optionsValue: \'id\',										    value: assetTypes.selectedAssetTypeId"></select>                    </div>                    <div class="assetFilterText">                        <input type="text" data-bind="textInput: assetsFilterText, attr: {placeholder: LocalizedResources.projectConfigSearchAssets}" />                    </div>                </div>                <div class="assetListContainer">                    <!-- ko if: showUnaddedDatasetsGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: unaddedDatasetsAllSelected, click: toggleUnaddedAssetsGroupSelection.bind($data, \'DATASETS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.unaddedAssetGroup-heading\',                                        contentSelector: \'.unaddedAssetGroup\',                                        collapsed: unaddedDatasetsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'unadded-datasets-group\'                                    }">                        <div class="unaddedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="datasetAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameDatasets%</span>                        </div>                        <ul data-bind="foreach: unaddedDatasets" class="unaddedAssetGroup">                            <li class="unaddedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showUnaddedExperimentsGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: unaddedExperimentsAllSelected, click: toggleUnaddedAssetsGroupSelection.bind($data, \'EXPERIMENTS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.unaddedAssetGroup-heading\',                                        contentSelector: \'.unaddedAssetGroup\',                                        collapsed: unaddedExperimentsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'unadded-experiments-group\'                                    }">                        <div class="unaddedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="experimentAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameExperiments%</span>                        </div>                        <ul data-bind="foreach: unaddedExperiments" class="unaddedAssetGroup">                            <li class="unaddedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showUnaddedModulesGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: unaddedModulesAllSelected, click: toggleUnaddedAssetsGroupSelection.bind($data, \'MODULES\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.unaddedAssetGroup-heading\',                                        contentSelector: \'.unaddedAssetGroup\',                                        collapsed: unaddedModulesCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'unadded-modules-group\'                                    }">                        <div class="unaddedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="moduleAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameModules%</span>                        </div>                        <ul data-bind="foreach: unaddedModules" class="unaddedAssetGroup">                            <li class="unaddedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showUnaddedNotebooksGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: unaddedNotebooksAllSelected, click: toggleUnaddedAssetsGroupSelection.bind($data, \'NOTEBOOKS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.unaddedAssetGroup-heading\',                                        contentSelector: \'.unaddedAssetGroup\',                                        collapsed: unaddedNotebooksCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'unadded-notebooks-group\'                                    }">                        <div class="unaddedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="notebookAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameNotebooks%</span>                        </div>                        <ul data-bind="foreach: unaddedNotebooks" class="unaddedAssetGroup">                            <li class="unaddedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showUnaddedTrainedModelsGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: unaddedTrainedModelsAllSelected, click: toggleUnaddedAssetsGroupSelection.bind($data, \'TRAINED-MODELS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.unaddedAssetGroup-heading\',                                        contentSelector: \'.unaddedAssetGroup\',                                        collapsed: unaddedTrainedModelsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'unadded-trained-models-group\'                                    }">                        <div class="unaddedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="trainedModelAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameTrainedModels%</span>                        </div>                        <ul data-bind="foreach: unaddedTrainedModels" class="unaddedAssetGroup">                            <li class="unaddedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showUnaddedTransformsGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: unaddedTransformsAllSelected, click: toggleUnaddedAssetsGroupSelection.bind($data, \'TRANSFORMS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.unaddedAssetGroup-heading\',                                        contentSelector: \'.unaddedAssetGroup\',                                        collapsed: unaddedTransformsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'unadded-transforms-group\'                                    }">                        <div class="unaddedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="transformAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameTransforms%</span>                        </div>                        <ul data-bind="foreach: unaddedTransforms" class="unaddedAssetGroup">                            <li class="unaddedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showUnaddedWebServicesGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: unaddedWebServicesAllSelected, click: toggleUnaddedAssetsGroupSelection.bind($data, \'WEB-SERVICES\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.unaddedAssetGroup-heading\',                                        contentSelector: \'.unaddedAssetGroup\',                                        collapsed: unaddedWebServicesCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'unadded-web-services-group\'                                    }">                        <div class="unaddedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="webServiceAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameWebServices%</span>                        </div>                        <ul data-bind="foreach: unaddedWebServices" class="unaddedAssetGroup">                            <li class="unaddedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                </div>                <div class="allAssetsSelectionStatus" data-bind="text: allAssetsSelectionSummary"></div>            </div>            <div class="buttonsArea">                <button class="add-assets" data-bind="enable: isAddAssetEnabled, click: addAssets">&gt;</button>                <div class="loading-asset-changes" >                    <img data-bind="visible: isBusy"/>                </div>                <button class="remove-assets" data-bind="enable: isRemoveAssetEnabled, click: removeAssets">&lt;</button>            </div>            <div class="addedAssetsArea">                <label data-bind="text: LocalizedResources.projectConfigProjectAssetsLabel"></label>                <div class="assetListContainer">                    <!-- ko if: showAddedDatasetsGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: addedDatasetsAllSelected, click: toggleAddedAssetsGroupSelection.bind($data,\'DATASETS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.addedAssetGroup-heading\',                                        contentSelector: \'.addedAssetGroup\',                                        collapsed: addedDatasetsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'added-datasets-group\'                                    }">                        <div class="addedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="datasetAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameDatasets%</span>                        </div>                        <ul data-bind="foreach: addedDatasets" class="addedAssetGroup">                            <li class="addedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showAddedExperimentsGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: addedExperimentsAllSelected, click: toggleAddedAssetsGroupSelection.bind($data, \'EXPERIMENTS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.addedAssetGroup-heading\',                                        contentSelector: \'.addedAssetGroup\',                                        collapsed: addedExperimentsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'added-experiments-group\'                                    }">                        <div class="addedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="experimentAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameExperiments%</span>                        </div>                        <ul data-bind="foreach: addedExperiments" class="addedAssetGroup">                            <li class="addedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showAddedModulesGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: addedModulesAllSelected, click: toggleAddedAssetsGroupSelection.bind($data, \'MODULES\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.addedAssetGroup-heading\',                                        contentSelector: \'.addedAssetGroup\',                                        collapsed: addedModulesCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'added-modules-group\'                                    }">                        <div class="addedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="moduleAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameModules%</span>                        </div>                        <ul data-bind="foreach: addedModules" class="addedAssetGroup">                            <li class="addedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showAddedNotebooksGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: addedNotebooksAllSelected, click: toggleAddedAssetsGroupSelection.bind($data, \'NOTEBOOKS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.addedAssetGroup-heading\',                                        contentSelector: \'.addedAssetGroup\',                                        collapsed: addedNotebooksCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'added-notebooks-group\'                                    }">                        <div class="addedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="notebookAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameNotebooks%</span>                        </div>                        <ul data-bind="foreach: addedNotebooks" class="addedAssetGroup">                            <li class="addedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showAddedTrainedModelsGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: addedTrainedModelsAllSelected, click: toggleAddedAssetsGroupSelection.bind($data, \'TRAINED-MODELS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.addedAssetGroup-heading\',                                        contentSelector: \'.addedAssetGroup\',                                        collapsed: addedTrainedModelsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'added-trained-models-group\'                                    }">                        <div class="addedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="trainedModelAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameTrainedModels%</span>                        </div>                        <ul data-bind="foreach: addedTrainedModels" class="addedAssetGroup">                            <li class="addedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showAddedTransformsGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: addedTransformsAllSelected, click: toggleAddedAssetsGroupSelection.bind($data, \'TRANSFORMS\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.addedAssetGroup-heading\',                                        contentSelector: \'.addedAssetGroup\',                                        collapsed: addedTransformsCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'added-transforms-group\'                                    }">                        <div class="addedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="transformAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameTransforms%</span>                        </div>                        <ul data-bind="foreach: addedTransforms" class="addedAssetGroup">                            <li class="addedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                    <!-- ko if: showAddedWebServicesGroup -->                    <div class="assetsGroupCheckboxContainer">                        <input type="checkbox" data-bind="checked: addedWebServicesAllSelected, click: toggleAddedAssetsGroupSelection.bind($data, \'WEB-SERVICES\')" />                    </div>                    <div class="assetsGroupExpandableContainer"                         data-bind="jQueryCollapse: {                                        collapseButtonSelector: \'.addedAssetGroup-heading\',                                        contentSelector: \'.addedAssetGroup\',                                        collapsed: addedWebServicesCollapsed,                                        collapseFrom: \'bottom\',                                        id: \'added-web-services-group\'                                    }">                        <div class="addedAssetGroup-heading">                            <div class="collapse-icon"></div>                            <div class="webServiceAssetIcon"></div>                            <span class="projectAssetType">%projectAssetDisplayNameWebServices%</span>                        </div>                        <ul data-bind="foreach: addedWebServices" class="addedAssetGroup">                            <li class="addedAssetItem"                                data-bind="template: { name: \'checkboxAssetItem\' }, visible: isVisible">                            </li>                        </ul>                    </div>                    <!-- /ko -->                </div>            </div>        </div>    </div></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._projectConfigurationDialogMarkup");var ExperimentEditorTemplates;(function(e){e._experimentV2PropertyTabMarkup='<div class="experiment-v2-property-tab" data-bind="visible: selected">    <!-- ko if: functionNodeModel -->    <div class="propertyEditor-entityParameters"         data-bind="jQueryCollapse: {                        collapseButtonSelector: \'.propertyEditor-heading\',                        contentSelector: \'.propertyEditor-content\',                        collapsed: entityParamsCollapsed,                        collapseFrom: \'bottom\',                        id: \'entityParameters\'}">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader" data-bind="text: selectedFunctionNodeModelName"></h2>        </div>        <div class="propertyEditor-content">            <div class="noParameters" data-bind="visible: nodeHasNoParameters">%PropertyEditorNoParameter%</div>            <!-- ko foreach: nodeParameters -->            <!-- ko if: !isStaticContent()-->            <div class="textAreaProperty" data-bind="template: { name: \'propertyItem\' }, visible: !hidden()"></div>            <!-- /ko -->            <!-- ko if: isStaticContent()-->            <div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->            <!-- /ko -->        </div>        <!-- ko if: hasStandardOut()-->        <div>            <a target="_blank" data-bind="attr: {href: stdOut}">Standard Out</a>        </div>        <div>            <a target="_blank" data-bind="attr: {href: stdError}">Standard Error</a>        </div>        <!-- /ko -->    </div>    <!-- /ko -->    <!-- ko if: experimentViewModel().experimentLoaded -->    <div class="propertyEditor-experimentProperties"         data-bind="visible: experimentLevelPropertiesVisible,                    jQueryCollapse: {                        collapseButtonSelector: \'.propertyEditor-heading\',                        contentSelector: \'.propertyEditor-content\',                        collapsed: experimentPropertiesCollapsed,                        collapseFrom: \'bottom\',                        id: \'experimentProperties\'                    }">        <div class="propertyEditor-heading">            <div class="propertyEditor-expander"></div>            <h2 class="propertyEditor-expanderHeader">%ExperimentProperties%</h2>        </div>        <select data-bind="options: availableRuntimes, value: runtimeVersion"></select>        <div class="propertyEditor-content">            <!-- ko foreach: experimentProperties -->            <div data-bind="template: { name: \'staticPropertyItem\' }"></div>            <!-- /ko -->        </div>    </div>    <!-- /ko --></div><script type="text/html" id="inputParameter">    <input type="text"           class="datalab-gridCellPropertyItem"           data-bind="validatedInputBox: { value: property.value, disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                      hasfocus: focus,                      readonly:  $root.tabs[0].readOnlyMode() || isDisabled(),                      css: { disabled: $root.tabs[0].readOnlyMode() || isDisabled() },                      event: { focus: $root.tabs[0].onParameterFocus, keydown: $root.tabs[0].onParameterReturn }" />                      <!-- TODO: removed autocomplete, find if it was needed --></script><script type="text/html" id="textAreaParameter">    <div style="position: relative"         data-bind="resize: {                        direction: \'bottom\',                        parentContainerSelector: \'.propertyEditor-right\',                        minSize: 125,                        maxSize: 9999,                        id: property.label                    }">        <div class="monaco-container datalab-gridCellPropertyItem"             data-bind="monaco: {                            value: property.value,                            mimetype: monacoMimeType,                            containerWidth: $root.tabs[0].width,                            insertSpaces: untabify,                            expandOnFocus: true                        },                        validatedInputBox: {value: property.value},                        style: { backgroundColor: ($root.tabs[0].readOnlyMode() || isDisabled()) ? \'rgba(0, 0, 0, 0.05)\' : \'\' },                        css: { focused: focus},                        readonly: $root.tabs[0].readOnlyMode() || isDisabled()">        </div>    </div>    <div class="characterCountMessage" style="display:none;">        <span class="maxCharacterCount"></span> <span class="characterCountText"></span>    </div></script><script type="text/html" id="checkboxParameter">    <input type="checkbox"           class="datalab-gridCellPropertyItem"           data-bind="checked: boolValue,                      hasfocus: focus,                      disable: ($root.tabs[0].readOnlyMode() || isDisabled()),                      css: { disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                      event: { focus: $root.tabs[0].onParameterFocus }" /></script><script type="text/html" id="multiSelectParameter">    <div class=".datalab-gridCellTextArea"         data-bind="multiSelectMenu: enumItems">        <hflexbox class="datalab-gridCellPropertyItem multiSelectButton">            <div class="datalab-gridCellPropertyItem"                 data-bind="text: buttonLabel"></div>            <div style="float:right">&#9660</div>        </hflexbox>        <ul data-bind="foreach: enumItems" class="datalab-gridCellPropertyItem multiSelectMenu">            <li data-bind="css: classString">                <a href=" #" data-bind="text: displayValue" />            </li>        </ul>    </div></script><script type="text/html" id="selectParameter">    <select class="datalab-gridCellPropertyItem"            data-bind="value: property.value,                   hasfocus: focus,                   options: choices,                   optionsText: \'display\',                   optionsValue: \'internal\',                   disable: ($root.tabs[0].readOnlyMode() || isDisabled()),                   css: { disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                   event: { focus: $root.tabs[0].onParameterFocus },                   attr: { title: toolTipText() }"></select></script><script type="text/html" id="dataGatewayNameParameter">    <select class="datalab-gridCellPropertyItem"            data-bind="value: property.value,                   hasfocus: focus,                   options: choices,                   optionsText: \'displayValue\',                   optionsValue: \'value\',                   disable: ($root.tabs[0].readOnlyMode() || isDisabled()),                   css: { disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                   event: { focus: $root.tabs[0].onParameterFocus }"></select></script><script type="text/html" id="staticTextProperty">    <div class="datalab-gridCellPropertyItem datalab-staticProperty"         data-bind="text: property.value, attr: { title: property.value }, style: { whiteSpace: property.name === \'Status details\' ? \'normal\' : \'nowrap\' }">    </div></script><script type="text/html" id="editableTextAreaProperty">    <div class="editableTextAreaProperty" data-bind="editableTextArea: {}">        <textarea class="datalab-gridCellPropertyItem editableTextArea" data-bind="value: $parent.property.value, css: { disabled: $data.isReadOnly }"></textarea>        <span class="characterLimitReachedWarning">            <span class="charactersLeftCount"></span>            %charactersLeft%        </span>    </div></script><script type="text/html" id="credentialParameter">    <input type="password"           class="datalab-gridCellPropertyItem"           data-bind="validatedInputBox: { value: property.value, disabled: ($root.tabs[0].readOnlyMode() || isDisabled()) },                      disable: $root.tabs[0].readOnlyMode() || isDisabled(),                      hasfocus: focus,                      css: { disabled: $root.tabs[0].readOnlyMode() || isDisabled() }" /></script><script type="text/html" id="dataGatewayCredentialParameter">    <div data-bind="css: invalidClass()">        <div class="dataGatewayCredentialsValue">            <!-- ko if: property.value() -->            <span data-bind="text: LocalizedResources.dataGatewayCredentialValuesSet" class="gatewayIconGood"></span>            <!-- /ko -->            <!-- ko if: !(property.value()) -->            <span data-bind="text: LocalizedResources.dataGatewayCredentialValuesRequired"></span>            <!-- /ko -->        </div>    </div>    <input type="button"           class="datalab-gridCellPropertyItem"           data-bind="disable: $root.tabs[0].readOnlyMode() || isDisabled() || !canEnterValue(),                      click: enterValue,                      value: LocalizedResources.dataGatewayEnterCredentials,                      hasfocus: focus" />    <div data-bind="if: showClickOnceWarning">        <span data-bind="html: clickOnceWarning" class="gatewayIconWarn"></span>    </div></script><script type="text/html" id="columnPickerParameter">    <div class="datalab-gridCellPropertyItem columnPickerRules"         data-bind="columnPickerRuleDisplay: property.value,                      css: { disabled: (isDisabled()) }">    </div>    <input type="button"           class="datalab-gridCellPropertyItem"           data-bind="value: LocalizedResources.launchColumnSelector,                      click: openColumnPicker,                      disable: $root.tabs[0].readOnlyMode() || isDisabled() || launchDisabled" /></script><script type="text/html" id="usePreviousResultsParameter">    <div class="propertyEditor-headingCell" data-bind="attr:{title:LocalizedResources.usePreviousResultsLabelTooltip}">        <input id="usePreviousResultsCheckbox"               type="checkbox"               class="datalab-gridCellPropertyItem textAreaProperty"               data-bind="checked: property.value, disable: $root.tabs[0].readOnlyMode()" />        <div class="datalab-usePreviousResultsLabel textAreaProperty"             data-bind="text: LocalizedResources.usePreviousResultsLabel">        </div>    </div></script><script type="text/html" id="parameterRangeParameter">    <span class="parameterRangeLabel"          data-bind="text: LocalizedResources.useRangeBuilderLabel"          style="font-size:12px;line-height: 16.25px; font-family: Segoe UI;">    </span>    <input id="UseRangeBuilderCheckbox"           type="checkbox"           class="datalab-gridCellPropertyItem"           data-bind="checked: useRangeBuilder,                      disable: $root.tabs[0].readOnlyMode(),                      css: { disabled: $root.tabs[0].readOnlyMode()}" />    <!-- ko if: !useRangeBuilder() -->    <input type="text"           class="datalab-gridCellPropertyItem"           data-bind="value: literalList,                      validatedInputBox: { value: literalList, disabled: $root.tabs[0].readOnlyMode()},                      readonly: $root.tabs[0].readOnlyMode(),                      css: { disabled: $root.tabs[0].readOnlyMode()}" />    <!-- /ko -->    <!-- ko if: useRangeBuilder() -->    <div>        <span>            <span data-bind="text: LocalizedResources.ParameterRangeLabel"                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            </span>            <span id="ParameterRangeAsString"                  data-bind="text: rangeString"                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            </span>        </span>        <!-- ko if: isLogarithmic() -->        <div class="parameterRangeSlider"             data-bind="slider: [logMin, logMax],                        sliderOptions: {min: logMinLimit, max: logMaxLimit, range:true, step: logSliderStep, values: [logMin, logMax], disabled: $root.tabs[0].readOnlyMode()}"             style="margin: 5px 10px">        </div>        <!-- /ko -->        <!-- ko if: !isLogarithmic() -->        <div class="parameterRangeSlider"             data-bind="slider: [minValue, maxValue],                        sliderOptions: {min: sliderMin, max: sliderMax, range:true, step: linSliderStep, values: [sliderMin, sliderMax], disabled: $root.tabs[0].readOnlyMode()}"             style="margin: 5px 10px">        </div>        <!-- /ko -->        <div>            <span class="parameterRangeLabel"                  data-bind="text: LocalizedResources.rangeBuilderCount"                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            </span>            <input class="parameterRangeCount"                   id="rangeBuilderCount"                   type="text"                   data-bind="value: countValidatable,                              validatedInputBox: { value: countValidatable, disabled: $root.tabs[0].readOnlyMode()},                              readonly: $root.tabs[0].readOnlyMode(),                              css: { disabled: $root.tabs[0].readOnlyMode()}"                   style="width:40px; border: 1px solid #ccc; padding-left: 5px; padding-right: 5px; background-color: #fff;" />        </div>        <!-- ko if: logCapable -->        <div>            <span class="parameterRangeLabel"                  data-bind="text: LocalizedResources.rangeBuilderLogarithmicScaleCheckbox"                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">            </span>            <input id="LogarithmicCheckbox"                   type="checkbox"                   class="datalab-gridCellPropertyItem"                   data-bind="checked: isLogarithmic,                              disable: $root.tabs[0].readOnlyMode(),                              css: { disabled: $root.tabs[0].readOnlyMode()}" />        </div>        <!-- /ko -->    </div>    <!-- /ko --></script><script type="text/html" id="linkProperty">    <div class="propertyLink">        <a href=\'#\' data-bind="attr: { title: property.tooltip, href: (property.endpoint && property.endpoint.Size === -1) ? \'#\' : property.value},                      hasfocus: focus,                      event: { focus: $root.tabs[0].onParameterFocus, click: onClick },                      text: property.label"           target="_blank">        </a>    </div>    <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)</div></script><script type="text/html" id="buttonProperty">    <div class="propertyEditor-staticValueCell">        <div class="datalab-gridCellTextArea">            <div class=" propertyeditor-statictextareaitem propertyeditor-headingcellwrapper"                 data-bind="css: { isButton: templateType() === \'buttonProperty\' }, visible: property.value() === false || property.value()">                <button data-bind="attr: { title: property.tooltip, name: property.label},                           hasfocus: focus,                           event: { focus: $root.tabs[0].onParameterFocus, click: onClick },                           text: property.label,                           disable: clickDisabled"></button>            </div>            <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)</div>        </div>    </div></script><script type="text/html" id="propertyKey">    <!-- ko if: isExperimentLevel() && !$root.tabs[0].readOnlyMode() -->    <div>        <input type="text"               class="datalab-gridCellPropertyItem"               data-bind="validatedInputBox: { value: property.validatableName },                              event: { blur: property.textboxBlur, keydown: property.textboxKeydown },                              visible: property.isEditingName" />        <div class="datalab-gridCellKey"             data-bind="attr: { title: property.tooltip },                    text: property.label,                    click: property.toggleEditingName,                    visible: !property.isEditingName()">        </div>    </div>    <!-- /ko -->    <!-- ko ifnot: isExperimentLevel() && !$root.tabs[0].readOnlyMode() -->    <!-- ko if: templateType() === \'linkProperty\' -->    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'linkProperty\' }"></hflexbox>    <!-- /ko -->    <!-- ko if: templateType() === \'buttonProperty\' -->    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'buttonProperty\' }"></hflexbox>    <!-- /ko -->    <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->    <div class="datalab-gridCellKey" data-bind="attr: { title: property.tooltip }, text: property.label"></div>    <!-- /ko -->    <!-- /ko --></script><script type="text/html" id="propertyItem">    <div class="propertyEditor-textAreaItem">        <div class="propertyEditor-headingCellWrapper" data-bind="css: { propertyEditorHeadingCellWrapperEditingName: property.isEditingName, isLink: templateType() === \'linkProperty\' }">            <div class="propertyEditor-headingCell">                <div class="propertyEditor-sideButtonWrapper">                    <div class="parameterIsLinked linkStatus propertyEditorButton"                         data-bind="style: { visibility: \'hidden\' }">                    </div>                    <!-- ko if: !isExperimentLevel() && isLinkable -->                    <div class="propertyEditorButton dropMenu"></div>                    <!-- /ko -->                    <!-- ko if: isExperimentLevel() && !$root.tabs[0].readOnlyMode() -->                    <div class="propertyEditorButton dropMenu"></div>                    <!-- /ko -->                    <!-- ko if: templateType() === "textAreaParameter" -->                    <!-- ko if: showPopupIcon() -->                    <div class="propertyEditorButton"                         data-bind="event:{ mousedown: openScriptEditor}, attr: {title: LocalizedResources.experimentEditorPropertiesPaneScriptEditorPopOut}">                        <span class="icon icon-openscripteditor"></span>                    </div>                    <!-- /ko -->                    <!-- /ko -->                </div>                <!-- ko if: templateType() === \'checkboxParameter\' -->                <div data-bind="template: { name: \'checkboxParameter\' },                                visible: !isExperimentLevel() || property.hasDefaultValue()">                </div>                <!-- /ko -->                <div class="datalab-gridCellKeyWrapper"                     data-bind="template: { name: \'propertyKey\' }">                </div>            </div>        </div>        <!-- ko if: templateType() !== \'checkboxParameter\' && templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->        <!-- ko if: !isExperimentLevel() || property.hasDefaultValue() -->        <div class="propertyEditor-valueCellWrapper">            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"></div>        </div>        <!-- /ko -->        <!-- /ko -->    </div></script><script type="text/html" id="checkboxProperty">    <input type="checkbox"           class="datalab-gridCellPropertyItem"           data-bind="checked: property.value,                        hasfocus: focus,                        disable: $root.tabs[0].readOnlyMode(),                        css: { disabled: $root.tabs[0].readOnlyMode() },                        event: { focus: $root.tabs[0].onParameterFocus }" />    <div class="datalab-gridCellKeyWrapper"         data-bind="template: { name: \'propertyKey\' }">    </div></script><script type="text/html" id="staticPropertyItem">    <div class="propertyEditor-staticTextAreaItem propertyEditor-headingCellWrapper"         data-bind="css: { isLink: templateType() === \'linkProperty\', isButton: templateType() === \'buttonProperty\' }, style: { height: property.name === \'Status details\' ? \'100%\': \'22px\' }, visible: property.value() === false || property.value()">        <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'checkboxProperty\' && templateType() !== \'buttonProperty\' -->        <div class="propertyEditor-staticHeadingCell">            <div class="datalab-gridCellKeyWrapper"                 data-bind="template: { name: \'propertyKey\' }">            </div>        </div>        <!-- /ko -->        <div class="propertyEditor-staticValueCell">            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"></div>        </div>    </div></script>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._experimentV2PropertyTabMarkup");var ExperimentEditorTemplates;(function(e){e._propertyEditorV2Markup='<div data-bind="resize: {                    direction: \'left\',                    parentContainerSelector: \'.experiment-container-right\',                    minSize: 278,                    id: \'propertyEditor\'                },                collapse: {                    collapseButtonSelector: \'.drawerExpander\',                    collapsed: drawerIsCollapsed,                    animationEnded: openCloseAnimationEnded,                    collapseFrom: \'left\',                    collapsedSize: 36,                    id: \'propertyEditor\'                }"     class="datalab-propertyEditor">    <vflexbox class="propertyEditorContainer">        <flexstatic style="height:30px;">            <flexcontent>                <hflexbox class="propertyEditorHeader">                    <!-- ko foreach: tabs -->                    <flexfill data-bind="css: { notLastTab: $index() + 1 < $root.tabs.length }"><span class="drawerExpandedTitle" data-bind="text: title, css: { deselected: !selected()}, click: function(data, event) { return $root.selectTab(id, data, event) }"></span></flexfill>                    <!-- /ko -->                     <flexstatic class="drawerExpander"></flexstatic>                </hflexbox>            </flexcontent>        </flexstatic>        <flexfill class="propertyEditorContentContainer">            <flexcontent>                <div class="propertyEditor-right">                    <!-- Note that PropertyEditorViewModel sets up the component registry                         for binding with the following elements. -->                    <experiment-v2-property-tab></experiment-v2-property-tab>                </div>            </flexcontent>        </flexfill>        <flexstatic class="quickHelpContainer"                    data-bind="resize: {                                   direction: \'top\',                                   parentContainerSelector: \'.propertyEditorContainer\',                                   collapsed: quickHelpCollapsed,                                   minSize: 150,                                   id: \'quickHelp\'                               },                               collapse: {                                    collapseButtonSelector: \'.quickHelpExpander\',                                    collapsed: quickHelpCollapsed,                                    collapseFrom: \'top\',                                    collapsedSize: 36,                                    id: \'quickHelp\'                               }">            <flexcontent>                <vflexbox>                    <flexstatic>                        <hflexbox class="quickHelpHeader">                            <flexfill class="quickHelpTitle">%quickHelpTitle%</flexfill>                            <flexstatic class="quickHelpExpander"></flexstatic>                        </hflexbox>                    </flexstatic>                    <flexfill>                        <flexcontent style="padding:5px; width: auto; height: auto; top: 5px; bottom: 5px; left: 5px; right: 0px">                            <div class="quickHelpContent">                                <div data-bind="text: help.currentHelpTopic"></div>                                <!-- ko if: help.moduleTopicID() -->                                <a class=\'pointerText\' data-bind=\'click:getHelp\'>%quickHelpMore%</a>                                <!-- /ko -->                            </div>                        </flexcontent>                    </flexfill>                </vflexbox>            </flexcontent>        </flexstatic>    </vflexbox></div>'})(ExperimentEditorTemplates||(ExperimentEditorTemplates={})),ExperimentEditorTemplates.typescriptResourceVariables=ExperimentEditorTemplates.typescriptResourceVariables||[],ExperimentEditorTemplates.typescriptResourceVariables.push("ExperimentEditorTemplates._propertyEditorV2Markup"),define("experimenteditortemplates",function(){}),define("zeroclipboard",[],function(){window.ZeroClipboard={version:"1.0.8",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e),this.className+=" "+e},e.removeClass=function(e){var t=this.className.split(/\s+/),n=-1;for(var r=0;r<t.length;r++)t[r]==e&&(n=r,r=t.length);return n>-1&&(t.splice(n,1),this.className=t.join(" ")),this},e.hasClass=function(e){return!!this.className.match(new RegExp("\\s*"+e+"\\s*"))}),e},setMoviePath:function(e){this.moviePath=e},newClient:function(){return new ZeroClipboard.Client},dispatch:function(e,t,n){var r=this.clients[e];r&&r.receiveEvent(t,n)},register:function(e,t){this.clients[e]=t},getDOMObjectPosition:function(e,t){var n={left:0,top:0,width:e.width?e.width:e.offsetWidth,height:e.height?e.height:e.offsetHeight};while(e&&e!=t)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},Client:function(e){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),e&&this.glue(e)}},ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,zIndex:99,glue:function(e,t,n){this.domElement=ZeroClipboard.$(e),this.domElement.style.zIndex&&(this.zIndex=parseInt(this.domElement.style.zIndex,10)+1),typeof t=="string"?t=ZeroClipboard.$(t):typeof t=="undefined"&&(t=document.getElementsByTagName("body")[0]);var r=ZeroClipboard.getDOMObjectPosition(this.domElement,t);this.div=document.createElement("div");var i=this.div.style;i.position="absolute",i.left=""+r.left+"px",i.top=""+r.top+"px",i.width=""+r.width+"px",i.height=""+r.height+"px",i.zIndex=this.zIndex;if(typeof n=="object")for(var s in n)i[s]=n[s];t.appendChild(this.div),this.div.innerHTML=this.getHTML(r.width,r.height)},getHTML:function(e,t){var n="",r="id="+this.id+"&width="+e+"&height="+t;if(navigator.userAgent.match(/MSIE/)){var i=location.href.match(/^https/i)?"https://":"http://";n+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+i+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+e+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+r+'"/><param name="wmode" value="transparent"/></object>'}else n+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+r+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var e=document.getElementsByTagName("body")[0];try{e.removeChild(this.div)}catch(t){}this.domElement=null,this.div=null}},reposition:function(e){e&&(this.domElement=ZeroClipboard.$(e),this.domElement||this.hide());if(this.domElement&&this.div){var t=ZeroClipboard.getDOMObjectPosition(this.domElement),n=this.div.style;n.left=""+t.left+"px",n.top=""+t.top+"px"}},setText:function(e){this.clipText=e,this.ready&&this.movie.setText(e)},addEventListener:function(e,t){e=e.toString().toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},setHandCursor:function(e){this.handCursorEnabled=e,this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(e,t){e=e.toString().toLowerCase().replace(/^on/,"");switch(e){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var n=this;setTimeout(function(){n.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var n=this;setTimeout(function(){n.receiveEvent("load",null)},100),this.ready=!0;return}this.ready=!0,this.movie.setText(this.clipText),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[e])for(var r=0,i=this.handlers[e].length;r<i;r++){var s=this.handlers[e][r];typeof s=="function"?s(this,t):typeof s=="object"&&s.length==2?s[0][s[1]](this,t):typeof s=="string"&&window[s](this,t)}}},typeof module!="undefined"&&(module.exports=ZeroClipboard)}),define("generated/DataLabClient/Logging/ClientInformationState",["require","exports"],function(e,t){t.workspaceId,t.workspaceType,t.sessionId,t.subscriptionId,t.tabId,t.keyVaultKeyIdentifier,t.armSharing}),define("generated/DataLabClient/Features",["require","exports"],function(e,t){function n(e){t.integrationPoints=e}function r(){return t.integrationPoints.RunnerUserType.Enabled}function i(){return t.integrationPoints.DeprecateCredentialsSystem.Enabled}function s(){return t.integrationPoints.DetectGenericScriptError.Enabled}function o(){return t.integrationPoints.UseLocalScriptsForIE11.Enabled}function u(){return t.integrationPoints.CatalogPermissionService.Enabled}function a(){return t.integrationPoints.RenameDialogForModuleImport.Enabled}function f(){return t.integrationPoints.PlusNewNotebookUploadRedesign.Enabled}function l(){return t.integrationPoints.BelizeForSMV1.Enabled}function c(){return t.integrationPoints.PublishFirstClassCustomModuleToGallery.Enabled}function h(){return t.integrationPoints.OpenModuleFromGallery.Enabled}function p(){return t.integrationPoints.DataConnectWizard.Enabled}function d(){return t.integrationPoints.SynchronizeScriptsCustomModules.Enabled}function v(){return t.integrationPoints.WorkspacePermissions.Enabled}function m(){return t.integrationPoints.FreeRuntimeLimitUpgradeDialog.Enabled}function g(){return t.integrationPoints.DeployToArmViaGet.Enabled}function y(){return t.integrationPoints.EnableAntiForgeryTokenValidation.Enabled}function b(){return t.integrationPoints.GalleryModulesInPlusNew.Enabled}function w(){return t.integrationPoints.ExperimentParameterComponent.Enabled}function E(){return t.integrationPoints.DagSearch.Enabled}function S(){return t.integrationPoints.DeployToArmAlwaysOn.Enabled}function x(){return t.integrationPoints.EditorControl2.Enabled}function T(){return t.integrationPoints.NotebookOpenExperience.Enabled}function N(){return t.integrationPoints.MLStudioV2.Enabled}function C(){return t.integrationPoints.SynchronizeScripts.Enabled}function k(){return t.integrationPoints.EnablePasswordPlaceholders.Enabled}function L(){return t.integrationPoints.HideEmailForChat.Enabled}function A(){return t.integrationPoints.BlankV2InNewMenu.Enabled}function O(){return t.integrationPoints.PublishExperimentToGallery.Enabled}function M(){return t.integrationPoints.DeployToArm.Enabled}function _(){return t.integrationPoints.WelcomeBannerShowCountryList.Enabled}function D(){return t.integrationPoints.WelcomeBannerForEmail.Enabled}function P(){return t.integrationPoints.EnableNewCustomModuleUploadEncrypted.Enabled}function H(){return t.integrationPoints.RenameCustomModule.Enabled}function B(){return t.integrationPoints.TryBelize.Enabled}function j(){return t.integrationPoints.MdaLogging.Enabled}function F(){return t.integrationPoints.GetCompetitionTermsFromES.Enabled}function I(){return t.integrationPoints.CompetitionSubmissionAllowedValidation.Enabled}function q(){return t.integrationPoints.OnPremiseSqlNotAvailablePopUp.Enabled}function R(){return t.integrationPoints.AddPreviewToOnPremLabel.Enabled}function U(){return t.integrationPoints.ListFoofSwitches.Enabled}function z(){return t.integrationPoints.UserSettingsDialog.Enabled}function W(){return t.integrationPoints.SignUpPanels.Enabled}function X(){return t.integrationPoints.RepublishNotebookToGallery.Enabled}function V(){return t.integrationPoints.OpenMultipleNotebooksFromAsset.Enabled}function $(){return t.integrationPoints.EnableCachedViewWorkspacePage.Enabled}function J(){return t.integrationPoints.JupyterNotebookUpload.Enabled}function K(){return t.integrationPoints.EnableCachedHomePage.Enabled}function Q(){return t.integrationPoints.RefreshTheDatasetCacheWhenDatasetUploadFails.Enabled}function G(){return t.integrationPoints.CanvasAnnotations.Enabled}function Y(){return t.integrationPoints.RenameAssetsInLists.Enabled}function Z(){return t.integrationPoints.WorkspaceEncryption.Enabled}function et(){return t.integrationPoints.UseNewGridControlForAssetLists.Enabled}function tt(){return t.integrationPoints.AnimatedTourWebService.Enabled}function nt(){return t.integrationPoints.DirtyLabelsInDirtyables.Enabled}function rt(){return t.integrationPoints.UseUserPreferenceStoreService.Enabled}function it(){return t.integrationPoints.LinkToWebServicesUx.Enabled}function st(){return t.integrationPoints.MonacoVersionUpdate.Enabled}function ot(){return t.integrationPoints.VariadicInputPorts.Enabled}function ut(){return t.integrationPoints.EnableProjectBasedAssetsGrouping.Enabled}function at(){return t.integrationPoints.AnimatedTour.Enabled}function ft(){return t.integrationPoints.PublishNotebooksToGallery.Enabled}function lt(){return t.integrationPoints.VisualizeZip.Enabled}function ct(){return t.integrationPoints.HomePageGetExperimentsWithOData.Enabled}function ht(){return t.integrationPoints.UseClientTelemetryLogging.Enabled}function pt(){return t.integrationPoints.PublishCustomModulesToGallery.Enabled}function dt(){return t.integrationPoints.RNotebookInContextMenu.Enabled}function vt(){return t.integrationPoints.PublishNotebookOptionIncludeDataset.Enabled}function mt(){return t.integrationPoints.MultiInputSupport.Enabled}function gt(){return t.integrationPoints.MiniMapInExperimentEditor.Enabled}function yt(){return t.integrationPoints.BlankRNotebookInNewMenu.Enabled}function bt(){return t.integrationPoints.ToolTipInEEContextMenus.Enabled}function wt(){return t.integrationPoints.MiniMapInEvaluateVisualization.Enabled}function Et(){return t.integrationPoints.HandleJsonParseErrors.Enabled}function St(){return t.integrationPoints.DataAccessCodeSupportRLanguage.Enabled}function xt(){return t.integrationPoints.HomepageCompetitionBanner.Enabled}function Tt(){return t.integrationPoints.EditMyProfile.Enabled}function Nt(){return t.integrationPoints.ConfigureYourOwnHdInsight.Enabled}function Ct(){return t.integrationPoints.Dataflows.Enabled}function kt(){return t.integrationPoints.EnablePackingService.Enabled}function Lt(){return t.integrationPoints.ModulesList.Enabled}function At(){return t.integrationPoints.AuthorizeDownloadILearner.Enabled}function Ot(){return t.integrationPoints.AuthorizeDownloadITransform.Enabled}function Mt(){return t.integrationPoints.SSIMSearch.Enabled}function _t(){return t.integrationPoints.ColumnPickerRulesRedesign.Enabled}function Dt(){return t.integrationPoints.SemanticHelpSearch.Enabled}function Pt(){return t.integrationPoints.AllowAnonymousTest.Enabled}function Ht(){return t.integrationPoints.ExperimentalExperimentList.Enabled}function Bt(){return t.integrationPoints.EnableFrictionFreeUserExperience.Enabled}function jt(){return t.integrationPoints.EnableSchemaPropagation.Enabled}function Ft(){return t.integrationPoints.EnableNewExperimentFlow.Enabled}function It(){return t.integrationPoints.EnableGalleryInPlusNewInterim.Enabled&&t.integrationPoints.EnableCommunityUXInStudio.Enabled&&t.integrationPoints.EnablePackingService.Enabled}function qt(){return t.integrationPoints.AnonymousWorkspace.Enabled}function Rt(){return t.integrationPoints.TrialLimitations.Enabled}function Ut(){return t.integrationPoints.EnableWorkspaceQuotas.Enabled}function zt(){return t.integrationPoints.IPythonNotebook.Enabled}function Wt(){return t.integrationPoints.NotebookList.Enabled}function Xt(){return t.integrationPoints.NotebookPlusNew.Enabled}function Vt(){return t.integrationPoints.NotebookContextMenu.Enabled}function $t(){return t.integrationPoints.ExperimentDescription.Enabled}function Jt(){return t.integrationPoints.StorageUsageWidget.Enabled}function Kt(){return t.integrationPoints.EnableOutputPortApiCode.Enabled}function Qt(){return t.integrationPoints.EnableOutputPortApiCode.Experience}function Gt(){return t.integrationPoints.EnableNewCustomModuleUpload.Enabled}function Yt(){return t.integrationPoints.EnableAssetDeletion.Enabled}function Zt(){return t.integrationPoints.AssetDeletionUi.Enabled}function en(){return t.integrationPoints.EnableGuidedTour.Enabled}function tn(){return t.integrationPoints.EnableGuidedExperiment.Enabled}function nn(){return t.integrationPoints.TrainedModelDeletionUi.Enabled}function rn(){return t.integrationPoints.ExcelDownloadEnabled.Enabled}function sn(){return t.integrationPoints.AgaveExcelClientEnableSampleData.Enabled}function on(){return t.integrationPoints.EnableCommunityUXInStudio.Enabled}function un(){return t.integrationPoints.ChatSupport.Enabled}function an(){return t.integrationPoints.ShowSubscriptionInfo.Enabled}function fn(){return t.integrationPoints.CopyExperimentAcrossWorkspace.Enabled}function ln(){return t.integrationPoints.DatasetUploadInTrial.Enabled}function cn(){return t.integrationPoints.ModuleUploadInTrial.Enabled}function hn(){return t.integrationPoints.TreeVisualization.Enabled}function pn(){return t.integrationPoints.PublishWebServiceInTrial.Enabled}function dn(){return t.integrationPoints.ExperimentListCategories.Enabled}function vn(){return t.integrationPoints.EnableChunkedUploadInStudio.Enabled}function mn(){return t.integrationPoints.CompetitionExperimentSupport.Enabled}function gn(){return t.integrationPoints.CompetitionEntrySchemaValidation.Enabled}function yn(){return t.integrationPoints.MarkdownInPublishDialog.Enabled}function bn(){return t.integrationPoints.MarkdownInExperimentDescription.Enabled}function wn(){return t.integrationPoints.CopyToWorkspaceInExperimentView.Enabled}function En(){return t.integrationPoints.MultiGeoNavigation.Enabled}function Sn(){return t.integrationPoints.PackingGeoPath.Enabled}function xn(){return t.integrationPoints.RepublishToGallery.Enabled}function Tn(){return t.integrationPoints.EnableCarouselOnHomepage.Enabled}function Nn(){return t.integrationPoints.EnableScriptEditorPopup.Enabled}function Cn(){return t.integrationPoints.VisualizationPagination.Enabled}function kn(){return t.integrationPoints.VisualizeRegressionHistogram.Enabled}function Ln(){return t.integrationPoints.ShowUsePreviousResultsOption.Enabled}function An(){return t.integrationPoints.CollapseEditorDrawerCommands.Enabled}function On(){return t.integrationPoints.EnableExperimentPartialRun.Enabled}function Mn(){return t.integrationPoints.JupyterNotebooksInGallery.Enabled}function _n(){return t.integrationPoints.DataGateway.Enabled}function Dn(){return t.integrationPoints.AgaveExcelClient.Enabled}function Pn(){return t.integrationPoints.EnableArmWorkspaceSharing.Enabled}t.integrationPoints={RunnerUserType:{Enabled:!0,Experience:""},DeprecateCredentialsSystem:{Enabled:!0,Experience:""},DetectGenericScriptError:{Enabled:!0,Experience:""},UseLocalScriptsForIE11:{Enabled:!0,Experience:""},CatalogPermissionService:{Enabled:!0,Experience:""},RenameDialogForModuleImport:{Enabled:!0,Experience:""},BelizeForSMV1:{Enabled:!0,Experience:""},PlusNewNotebookUploadRedesign:{Enabled:!0,Experience:""},PublishFirstClassCustomModuleToGallery:{Enabled:!0,Experience:""},DataConnectWizard:{Enabled:!1,Experience:""},SynchronizeScriptsCustomModules:{Enabled:!0,Experience:""},OpenModuleFromGallery:{Enabled:!0,Experience:""},WorkspacePermissions:{Enabled:!0,Experience:""},FreeRuntimeLimitUpgradeDialog:{Enabled:!0,Experience:""},DeployToArmViaGet:{Enabled:!0,Experience:""},EnableAntiForgeryTokenValidation:{Enabled:!0,Experience:""},GalleryModulesInPlusNew:{Enabled:!0,Experience:""},ExperimentParameterComponent:{Enabled:!0,Experience:""},DagSearch:{Enabled:!0,Experience:""},DeployToArmAlwaysOn:{Enabled:!0,Experience:""},EditorControl2:{Enabled:!0,Experience:""},NotebookOpenExperience:{Enabled:!0,Experience:""},MLStudioV2:{Enabled:!0,Experience:""},SynchronizeScripts:{Enabled:!0,Experience:""},EnablePasswordPlaceholders:{Enabled:!0,Experience:""},HideEmailForChat:{Enabled:!0,Experience:""},BlankV2InNewMenu:{Enabled:!0,Experience:""},PublishExperimentToGallery:{Enabled:!0,Experience:""},DeployToArm:{Enabled:!0,Experience:""},WelcomeBannerShowCountryList:{Enabled:!0,Experience:""},WelcomeBannerForEmail:{Enabled:!0,Experience:""},EnableNewCustomModuleUploadEncrypted:{Enabled:!0,Experience:""},RenameCustomModule:{Enabled:!0,Experience:""},TryBelize:{Enabled:!0,Experience:""},MdaLogging:{Enabled:!0,Experience:""},GetCompetitionTermsFromES:{Enabled:!0,Experience:""},CompetitionSubmissionAllowedValidation:{Enabled:!0,Experience:""},OnPremiseSqlNotAvailablePopUp:{Enabled:!0,Experience:""},AddPreviewToOnPremLabel:{Enabled:!0,Experience:""},ListFoofSwitches:{Enabled:!0,Experience:""},UserSettingsDialog:{Enabled:!0,Experience:""},SignUpPanels:{Enabled:!0,Experience:""},RepublishNotebookToGallery:{Enabled:!0,Experience:""},OpenMultipleNotebooksFromAsset:{Enabled:!0,Experience:""},EnableCachedViewWorkspacePage:{Enabled:!0,Experience:""},JupyterNotebookUpload:{Enabled:!0,Experience:""},EnableCachedHomePage:{Enabled:!0,Experience:""},RefreshTheDatasetCacheWhenDatasetUploadFails:{Enabled:!0,Experience:""},CanvasAnnotations:{Enabled:!1,Experience:""},RenameAssetsInLists:{Enabled:!0,Experience:""},WorkspaceEncryption:{Enabled:!0,Experience:""},UseNewGridControlForAssetLists:{Enabled:!0,Experience:""},AnimatedTourWebService:{Enabled:!0,Experience:""},DirtyLabelsInDirtyables:{Enabled:!0,Experience:""},UseUserPreferenceStoreService:{Enabled:!0,Experience:""},LinkToWebServicesUx:{Enabled:!0,Experience:""},MonacoVersionUpdate:{Enabled:!0,Experience:""},VariadicInputPorts:{Enabled:!0,Experience:""},EnableProjectBasedAssetsGrouping:{Enabled:!0,Experience:""},AnimatedTour:{Enabled:!0,Experience:""},PublishNotebooksToGallery:{Enabled:!0,Experience:""},VisualizeZip:{Enabled:!0,Experience:""},HomePageGetExperimentsWithOData:{Enabled:!0,Experience:""},UseClientTelemetryLogging:{Enabled:!0,Experience:""},PublishCustomModulesToGallery:{Enabled:!0,Experience:""},RNotebookInContextMenu:{Enabled:!0,Experience:""},PublishNotebookOptionIncludeDataset:{Enabled:!0,Experience:""},MultiInputSupport:{Enabled:!0,Experience:""},MiniMapInExperimentEditor:{Enabled:!0,Experience:""},BlankRNotebookInNewMenu:{Enabled:!0,Experience:""},ToolTipInEEContextMenus:{Enabled:!0,Experience:""},MiniMapInEvaluateVisualization:{Enabled:!0,Experience:""},HandleJsonParseErrors:{Enabled:!0,Experience:""},DataAccessCodeSupportRLanguage:{Enabled:!0,Experience:""},HomepageCompetitionBanner:{Enabled:!0,Experience:""},EditMyProfile:{Enabled:!0,Experience:""},ConfigureYourOwnHdInsight:{Enabled:!0,Experience:""},Dataflows:{Enabled:!0,Experience:""},ModulesList:{Enabled:!0,Experience:""},AuthorizeDownloadILearner:{Enabled:!0,Experience:""},AuthorizeDownloadITransform:{Enabled:!0,Experience:""},SSIMSearch:{Enabled:!0,Experience:""},ColumnPickerRulesRedesign:{Enabled:!1,Experience:""},SemanticHelpSearch:{Enabled:!0,Experience:""},AllowAnonymousTest:{Enabled:!0,Experience:""},ExperimentalExperimentList:{Enabled:!0,Experience:""},EnableFrictionFreeUserExperience:{Enabled:!0,Experience:""},EnableSchemaPropagation:{Enabled:!0,Experience:""},EnableNewExperimentFlow:{Enabled:!0,Experience:""},EnableGalleryInPlusNewInterim:{Enabled:!0,Experience:""},EnablePackingService:{Enabled:!0,Experience:""},IPythonNotebook:{Enabled:!0,Experience:""},NotebookList:{Enabled:!0,Experience:""},NotebookPlusNew:{Enabled:!0,Experience:""},NotebookContextMenu:{Enabled:!0,Experience:""},AnonymousWorkspace:{Enabled:!0,Experience:""},TrialLimitations:{Enabled:!0,Experience:""},EnableWorkspaceQuotas:{Enabled:!0,Experience:""},StorageUsageWidget:{Enabled:!0,Experience:""},ExperimentDescription:{Enabled:!0,Experience:""},EnableOutputPortApiCode:{Enabled:!0,Experience:""},EnableNewCustomModuleUpload:{Enabled:!0,Experience:""},EnableAssetDeletion:{Enabled:!0,Experience:""},AssetDeletionUi:{Enabled:!0,Experience:""},EnableGuidedTour:{Enabled:!0,Experience:""},EnableGuidedExperiment:{Enabled:!0,Experience:""},TrainedModelDeletionUi:{Enabled:!0,Experience:""},EnableCommunityUXInStudio:{Enabled:!0,Experience:""},ChatSupport:{Enabled:!0,Experience:""},ExcelDownloadEnabled:{Enabled:!0,Experience:""},AgaveExcelClientEnableSampleData:{Enabled:!0,Experience:""},ShowSubscriptionInfo:{Enabled:!1,Experience:""},CopyExperimentAcrossWorkspace:{Enabled:!0,Experience:""},DatasetUploadInTrial:{Enabled:!0,Experience:""},ModuleUploadInTrial:{Enabled:!0,Experience:""},TreeVisualization:{Enabled:!0,Experience:""},PublishWebServiceInTrial:{Enabled:!0,Experience:""},ExperimentListCategories:{Enabled:!0,Experience:""},EnableChunkedUploadInStudio:{Enabled:!0,Experience:""},MarkdownInPublishDialog:{Enabled:!0,Experience:""},MarkdownInExperimentDescription:{Enabled:!0,Experience:""},CompetitionExperimentSupport:{Enabled:!0,Experience:""},CompetitionEntrySchemaValidation:{Enabled:!0,Experience:""},CopyToWorkspaceInExperimentView:{Enabled:!0,Experience:""},MultiGeoNavigation:{Enabled:!0,Experience:""},PackingGeoPath:{Enabled:!0,Experience:""},RepublishToGallery:{Enabled:!0,Experience:""},EnableCarouselOnHomepage:{Enabled:!0,Experience:""},EnableScriptEditorPopup:{Enabled:!0,Experience:""},VisualizationPagination:{Enabled:!0,Experience:""},VisualizeRegressionHistogram:{Enabled:!0,Experience:""},ShowUsePreviousResultsOption:{Enabled:!0,Experience:""},CollapseEditorDrawerCommands:{Enabled:!0,Experience:""},EnableExperimentPartialRun:{Enabled:!0,Experience:""},JupyterNotebooksInGallery:{Enabled:!0,Experience:""},DataGateway:{Enabled:!0,Experience:""},AgaveExcelClient:{Enabled:!0,Experience:""},EnableArmWorkspaceSharing:{Enabled:!0,Experience:""}},t.setIntegrationPoints=n,t.runnerUserTypeEnabled=r,t.deprecateCredentialsSystemEnabled=i,t.detectGenericScriptErrorEnabled=s,t.useLocalScriptsForIE11Enabled=o,t.catalogPermissionServiceEnabled=u,t.renameDialogForModuleImportEnabled=a,t.plusNewNotebookUploadRedesignEnabled=f,t.belizeForSMV1Enabled=l,t.publishFirstClassCustomModuleToGalleryEnabled=c,t.openModuleFromGalleryEnabled=h,t.dataConnectWizardEnabled=p,t.synchronizeScriptsCustomModulesEnabled=d,t.workspacePermissionsEnabled=v,t.freeRuntimeLimitUpgradeDialogEnabled=m,t.deployToArmViaGetEnabled=g,t.enableAntiForgeryTokenValidationEnabled=y,t.galleryModulesInPlusNewEnabled=b,t.experimentParameterComponentEnabled=w,t.dagSearchEnabled=E,t.deployToArmAlwaysOnEnabled=S,t.editorControl2Enabled=x,t.notebookOpenExperienceEnabled=T,t.mLStudioV2Enabled=N,t.synchronizeScriptsEnabled=C,t.enablePasswordPlaceholdersEnabled=k,t.hideEmailForChatEnabled=L,t.blankV2InNewMenuEnabled=A,t.publishExperimentToGalleryEnabled=O,t.deployToArmEnabled=M,t.welcomeBannerShowCountryListEnabled=_,t.welcomeBannerForEmailEnabled=D,t.enableNewCustomModuleUploadEncryptedEnabled=P,t.renameCustomModuleEnabled=H,t.tryBelizeEnabled=B,t.mdaLoggingEnabled=j,t.getCompetitionTermsFromESEnabled=F,t.competitionSubmissionAllowedValidationEnabled=I,t.onPremiseSqlNotAvailablePopUpEnabled=q,t.addPreviewToOnPremLabelEnabled=R,t.listFoofSwitchesEnabled=U,t.userSettingsDialogEnabled=z,t.signUpPanelsEnabled=W,t.republishNotebookToGalleryEnabled=X,t.openMultipleNotebooksFromAssetEnabled=V,t.enableCachedViewWorkspacePageEnabled=$,t.jupyterNotebookUploadEnabled=J,t.enableCachedHomePageEnabled=K,t.refreshTheDatasetCacheWhenDatasetUploadFailsEnabled=Q,t.canvasAnnotationsEnabled=G,t.renameAssetsInListsEnabled=Y,t.workspaceEncryptionEnabled=Z,t.useNewGridControlForAssetListsEnabled=et,t.animatedTourWebServiceEnabled=tt,t.dirtyLabelsInDirtyablesEnabled=nt,t.useUserPreferenceStoreServiceEnabled=rt,t.LinkToWebServicesUxEnabled=it,t.monacoVersionUpdateEnabled=st,t.variadicInputPortsEnabled=ot,t.enableProjectBasedAssetsGroupingEnabled=ut,t.animatedTourEnabled=at,t.publishNotebooksToGalleryEnabled=ft,t.visualizeZipEnabled=lt,t.homePageGetExperimentsWithODataEnabled=ct,t.useClientTelemetryLoggingEnabled=ht,t.publishCustomModulesToGalleryEnabled=pt,t.rNotebookInContextMenuEnabled=dt,t.publishNotebookOptionIncludeDatasetEnabled=vt,t.multiInputSupportEnabled=mt,t.miniMapInExperimentEditorEnabled=gt,t.blankRNotebookInNewMenuEnabled=yt,t.toolTipInEEContextMenusEnabled=bt,t.miniMapInEvaluateVisualizationEnabled=wt,t.handleJsonParseErrorsEnabled=Et,t.dataAccessCodeSupportRLanguageEnabled=St,t.homepageCompetitionBannerEnabled=xt,t.EditMyProfileEnabled=Tt,t.configureYourOwnHdInsightEnabled=Nt,t.dataflowsEnabled=Ct,t.packingServiceEnabled=kt,t.modulesListEnabled=Lt,t.authorizeDownloadILearnerEnabled=At,t.authorizeDownloadITransformEnabled=Ot,t.ssimSearchEnabled=Mt,t.columnPickerRulesRedesignEnabled=_t,t.semanticHelpSearch=Dt,t.allowAnonymousTest=Pt,t.experimentalExperimentListEnabled=Ht,t.enableFrictionFreeUserExperienceEnabled=Bt,t.schemaPropagationEnabled=jt,t.newExperimentFlowEnabled=Ft,t.galleryInPlusNewInterimEnabled=It,t.anonymousWorkspaceEnabled=qt,t.trialLimitationsEnabled=Rt,t.enableWorkspaceQuotasEnabled=Ut,t.iPythonNotebookEnabled=zt,t.notebookListEnabled=Wt,t.notebookPlusNewEnabled=Xt,t.notebookContextMenuEnabled=Vt,t.experimentDescriptionEnabled=$t,t.storageUsageWidgetEnabled=Jt,t.enableOutputPortApiCodeEnabled=Kt,t.enableOutputPortApiCodeExperience=Qt,t.newCustomModuleUploadEnabled=Gt,t.enableAssetDeletionEnabled=Yt,t.assetDeletionUiEnabled=Zt,t.guidedTourEnabled=en,t.guidedExperimentEnabled=tn,t.trainedModelDeletionUiEnabled=nn,t.excelDownloadEnabled=rn,t.agaveExcelClientEnableSampleData=sn,t.communityUXInStudioEnabled=on,t.chatSupportEnabled=un,t.showSubscriptionInfoEnabled=an,t.copyExperimentAcrossWorkspaceEnabled=fn,t.datasetUploadInTrialEnabled=ln,t.moduleUploadInTrialEnabled=cn,t.treeVisualizationEnabled=hn,t.publishWebServiceInTrialEnabled=pn,t.experimentListCategoriesEnabled=dn,t.chunkedUploadInStudioEnabled=vn,t.competitionExperimentSupportEnabled=mn,t.competitionEntrySchemaValidationEnabled=gn,t.markdownInPublishDialogEnabled=yn,t.markdownInExperimentDescriptionEnabled=bn,t.copyToWorkspaceInExperimentViewEnabled=wn,t.multiGeoNavigationEnabled=En,t.packingGeoPath=Sn,t.republishToGalleryEnabled=xn,t.enableCarouselOnHomepage=Tn,t.enableScriptEditorPopup=Nn,t.visualizationPagination=Cn,t.visualizeRegressionHistogram=kn,t.showUsePreviousResultsOption=Ln,t.collapseEditorDrawerCommandsEnabled=An,t.enableExperimentPartialRun=On,t.jupyterNotebooksInGalleryEnabled=Mn,t.dataGatewayEnabled=_n,t.agaveExcelClientEnabled=Dn,t.enableArmWorkspaceSharingEnabled=Pn});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Logging/Logging",["require","exports","./ClientInformationState","../Constants","../LocalizedResources","../Features"],function(e,t,n,r,i,s){function h(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null),k("info",JSON.stringify([e,n]));if(f>=2)for(var r in o){var i=o[r];i.info(e,t,n)}}function p(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null),k("error",JSON.stringify([e,n]));if(f>=0)for(var r in o){var i=o[r];i.error(e,t,n)}}function d(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null),k("warn",JSON.stringify([e,n]));if(f>=1)for(var r in o){var i=o[r];i.warn(e,t,n)}}function v(e,t,n){k("verbose",JSON.stringify([e,n]));if(f>=1)for(var r in o){var i=o[r];i.verbose(e,t,n)}}function m(e,t){k("feedbackInfo",JSON.stringify(t));for(var n in o){var r=o[n];r.feedbackInfo(e,t)}}function g(e,t,n,r){typeof r.toJSON!="undefined"&&delete r.toJSON,k("performance",JSON.stringify([n,r]));for(var i in o){var s=o[i];s.performance(e,t,n,r)}}function y(e){for(var t in o){var n=o[t];n.timerStart(e)}}function b(e,t,n){for(var r in o){var i=o[r];i.timerStopAndLog(e,t,n)}}function w(e){k("featureUsage",r.FeatureId[e.featureID]);for(var t in o){var i=o[t];i.featureUsage(e,n.workspaceId)}}function E(e){k("customEvent",r.FeatureId[e.key]);for(var t in o){var i=o[t];i.customEvent(e,n.workspaceId)}}function S(e,t,n,r,i,s,u,a){for(var f in o){var l=o[f];l.IfxClientRequest(e,t,n,r,i,s,u,a)}}function x(e,t,n,r,i,s,u,a,f){for(var l in o){var c=o[l],h=r!=null?String(r):null;c.IfxScenario(e,t,n,h,i,s,u,a,f)}}function T(e){l=e}function N(e,t,n,r){t===void 0&&(t=i.exceptionOccurred),n===void 0&&(n=null),r===void 0&&(r=null),k("exception",JSON.stringify([t||"",r||{}]));for(var s in o){var u=o[s];u.error&&u.error(t,n,{exceptionMessage:e.message||String(e),stack:e.stack||null,data:r})}}function k(e,t,n){n===void 0&&(n=null);if(u<1)return;while(a.length>=u)a.shift();var r={severity:e,message:t};n&&(r.data=n),a.push(r)}function L(e,t,n,i,s){var u=s?s.stack:"error was undefined",f=!s||!s.requestId?"":s.requestID,c=l?l.scenarioId:"",h="";i!=null&&(h+="columnNumber: "+i+"\n"),t!=null&&(h+="url: "+t+"\n"),h&&(u=u+"\n\n"+h);for(var p in o){var d=o[p];d.exception?(d.exception(e,t,n,u,a,!1,c,f),l&&l.error(Error(e),r.SystemError+" Ux unhandled exception",!1)):d.error(e,"window.onerror",{line:n,url:t,trace:u,logQueue:JSON.stringify(a),requestId:f})}}function A(){window.environment&&window.environment.dataLabLogLevel?f=c[window.environment.dataLabLogLevel]:f=3}function O(){window.environment&&window.environment.dataLabLogQueueLength?u=window.environment.dataLabLogQueueLength:u=50}function M(){A(),O()}function _(e,t){if(!e)throw new Error("'logger' parameter is required");o[t]=e}function D(e){o[e]&&delete o[e]}function F(e){return e&&e.indexOf(window.location.host)!==-1&&e.indexOf("az754797.vo.msecnd.net")!==-1}var o={},u=50,a=[],f=2,l=null,c;(function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.info=2]="info",e[e.verbose=3]="verbose"})(c||(c={})),t.info=h,t.error=p,t.warn=d,t.verbose=v,t.feedbackInfo=m,t.performance=g,t.timerStart=y,t.timerStopAndLog=b,t.featureUsage=w,t.customEvent=E,t.IfxClientRequest=S,t.IfxScenario=x,t.setStopwatch=T,t.exception=N;var C=function(){function e(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var r=new Error(e),i=Object.create(n);i.stack=r.stack||null;for(var s in o){var u=o[s];u.error(e,t,i)}return r}return e}();t.TracedException=C,t.readLogSettingsFromConfig=M,t.setLogger=_,t.removeLogger=D,t.traceUnhandledExceptions=!0,t.unhandledExceptionEvent=new ko.subscribable;var P=function(){function e(){}return e.prototype.info=function(e,t,n){},e.prototype.error=function(e,t,n){},e.prototype.warn=function(e,t,n){},e.prototype.verbose=function(e,t,n){},e.prototype.exception=function(e,t,n,r,i){},e.prototype.feedbackInfo=function(e,t){},e.prototype.featureUsage=function(e,t){},e.prototype.customEvent=function(e,t){},e.prototype.performance=function(e,t,n,r){},e.prototype.timerStart=function(e){},e.prototype.timerStopAndLog=function(e,t,n){},e.prototype.IfxClientRequest=function(e,t,n,r,i,s,o,u){},e.prototype.IfxScenario=function(e,t,n,r,i){},e}();t.NullLogger=P;var H=function(e){function t(){e.call(this);if(!window.console)throw new Error("window.console object must be present to create a ConsoleLogger")}return __extends(t,e),t.prototype.info=function(e,t,n){console.info(this.format(e,t),n)},t.prototype.error=function(e,t,n){console.error(this.format(e,t),n)},t.prototype.warn=function(e,t,n){console.warn(this.format(e,t),n)},t.prototype.featureUsage=function(e,t){console.info(r.FeatureId[e.featureID],e.data)},t.prototype.customEvent=function(e){console.info(r.FeatureId[e.key],e.data)},t.prototype.format=function(e,t){return t?t+": "+e:e},t}(P);t.ConsoleLogger=H;var B=0,j=function(){if(B<=1024&&[1,2,4,8,16,32,64,128,256,512,1024].some(function(e){return B===e}))return d.apply(this,arguments)};window.onerror=function(e,n,r,i,o){var u=e==="SyntaxError"&&r===1353&&!o;if(u)return d("exception triggered from an Edge extension",null,{message:e,url:n,line:r,columnNumber:i,error:o}),!1;if(s.detectGenericScriptErrorEnabled()&&(e==="Script error"||e==="Script error.")&&(!n||F(n))&&!o){B+=1;var a={message:e,url:n,line:r,columnNumber:i,error:o,externalScripts:"",count:B};return a.externalScripts=[].slice.apply(document.querySelectorAll("script[src]")).map(function(e){return e.src}).filter(F).join(","),j("a browser extension is interfering with ML Studio",null,a),!1}return t.traceUnhandledExceptions&&L(e,n,r,i,o),t.unhandledExceptionEvent.notifySubscribers({message:e,url:n,line:r}),!1}}),define("generated/DataLabClient/DateFormatter",["require","exports"],function(e,t){var n=function(){function e(e){this.date=e,this.localeValues={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ampm:["AM","PM"],ampmAbbr:["A","P"],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"}}}return e.parse=function(e){return(e+"").substr(0,6)==="/Date("?parseInt(e.substr(6),10):this.parse.apply(this,arguments)},e.prototype.getLocaleValues=function(){return this.localeValues},e.prototype.setLocaleValues=function(e){var t;this.localeValues=e,this.localeValues.ampmAbbr=[this.localeValues.ampm[0][0],this.localeValues.ampm[1][0]],t=this.localeValues.standard,t.f=t.D+" "+t.t,t.g=t.d+" "+t.t,t.G=t.d+" "+t.T},e.prototype.toString=function(e){var t=this;if(arguments.length){var n=arguments[0];return n=this.localeValues.standard[n]||n,n=n.replace(/'([^']*)'/g,function(e,t){return this.escapeEverything(t)}),this.reverse(this.reverse(n).replace(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g,function(e){return t.replaceCharactersWithReverse(e)}).replace(/\\(?!\\)/g,""))}return this.toString.apply(this,arguments)},e.prototype.pad=function(e,t,n){return n=n===undefined?"0":n,e+="",t+1>=e.length&&(e=Array(t+1-e.length).join(n)+e),e},e.prototype.truncate=function(e,t){return e+="",e.substr(e.length-t)},e.prototype.truncateAndPad=function(e,t){return this.truncate(this.pad(e,t,"0"),t)},e.prototype.fixHour12=function(e){return e%=12,e===0?12:e},e.prototype.reverse=function(e){return e.split("").reverse().join("")},e.prototype.escapeEverything=function(e){return"\\"+e.split("").join("\\")},e.prototype.replaceCharacters=function(e){var t=e.length,n,r,i,s;switch(e[0]){case"y":switch(t){case 3:return this.pad(this.date.getFullYear().toString(),t);case 1:return+this.truncate(this.date.getFullYear().toString(),2)+"";default:return this.truncateAndPad(this.date.getFullYear().toString(),t)};case"M":switch(t){case 4:return this.escapeEverything(this.localeValues.months[this.date.getMonth()]);case 3:return this.escapeEverything(this.localeValues.monthsAbbr[this.date.getMonth()]);case 2:return this.truncateAndPad((this.date.getMonth()+1).toString(),2);default:return this.truncate((this.date.getMonth()+1).toString(),2)};case"d":switch(t){case 4:return this.escapeEverything(this.localeValues.days[this.date.getDay()]);case 3:return this.escapeEverything(this.localeValues.daysAbbr[this.date.getDay()]);case 2:return this.truncateAndPad(this.date.getDate().toString(),2);default:return this.truncate(this.date.getDate().toString(),2)};case"h":if(t===2)return this.truncateAndPad(this.fixHour12(this.date.getHours()).toString(),2);return this.truncate(this.fixHour12(this.date.getHours()).toString(),2);case"H":if(t===2)return this.truncateAndPad(this.date.getHours().toString(),2);return this.truncate(this.date.getHours().toString(),2);case"m":if(t===2)return this.truncateAndPad(this.date.getMinutes().toString(),2);return this.truncate(this.date.getMinutes().toString(),2);case"s":if(t===2)return this.truncateAndPad(this.date.getSeconds().toString(),2);return this.truncate(this.date.getSeconds().toString(),2);case"t":if(t===2)return this.localeValues.ampm[this.date.getHours()<12?0:1];return this.localeValues.ampmAbbr[this.date.getHours()<12?0:1];case"z":n=-this.date.getTimezoneOffset()/60,r=n<0,r&&(n=-n),i=parseInt(n,10),s=(n-i)*60;if(t===3)return(r?"-":"+")+this.pad(i,2)+":"+this.pad(s,2);return(r?"-":"+")+this.pad(i,t);case"/":return this.localeValues.dateSeparator;case":":return this.localeValues.timeSeparator}return""},e.prototype.replaceCharactersWithReverse=function(e){return this.reverse(this.replaceCharacters(e))},e}();t.DateFormatter=n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Disposable",["require","exports","./LocalizedResources"],function(e,t,n){function r(e){for(var t in e)e[t]=null}t.reduceRetainingTreeVerbosity=!1;var i=function(){function e(){this.isDisposed=!1,this.disposableId=e.createKeyFromID(e.nextDisposableId++),this.objectsToDispose=Object.create(null),this.parentDisposalContext=null,this.stack=null,e.ownershipAssertionContext&&(this.stack=(new Error("")).stack,e.ownershipAssertionContext[this.disposableId]=this)}return e.createKeyFromID=function(e){return"disposable-"+e},e.assertDisposablesInContext=function(t){var r=e.ownershipAssertionContext;e.ownershipAssertionContext=Object.create(null);try{t();if(Object.keys(e.ownershipAssertionContext).length>0){var i=new Error(n.disposableNotAssignedOwner);throw i.attachedContext=e.ownershipAssertionContext,i}}finally{e.ownershipAssertionContext=r}},e.exemptFromDiposablesInContextAssertion=function(t){e.ownershipAssertionContext&&delete e.ownershipAssertionContext[t.disposableId]},e.prototype.registerForDisposal=function(){var t=this,n=[];for(var r=0;r<arguments.length;r++)n[r-0]=arguments[r];n.forEach(function(n){t.objectsToDispose[n.disposableId]=n,n.parentDisposalContext=t.objectsToDispose,e.ownershipAssertionContext&&(n.stack=null,delete e.ownershipAssertionContext[n.disposableId])})},e.prototype.dispose=function(){if(this.isDisposed)return;var e=Object.keys(this.objectsToDispose);for(var n=e.length-1;n>=0;n--)this.objectsToDispose[e[n]].dispose();this.parentDisposalContext&&delete this.parentDisposalContext[this.disposableId],t.reduceRetainingTreeVerbosity&&r(this),this.isDisposed=!0},e.observableArrayOfDisposables=function(e){var t=ko.observableArray(e);["shift","pop"].forEach(function(e){var n=t[e];t[e]=function(){var e=n.apply(t,arguments);return e.dispose(),e}}),["splice","remove","removeAll"].forEach(function(e){var n=t[e];t[e]=function(){var e=n.apply(t,arguments);return e&&e.forEach(function(e){e.dispose()}),e}});var n=function(e){return Array.isArray(e)&&t.removeAll(),t.apply(t,arguments)};return $.extend(n,t),n},e.ownershipAssertionContext=null,e.nextDisposableId=0,e}();t.Disposable=i;var s=function(e){function t(t){e.call(this),this.subscription=t}return __extends(t,e),t.prototype.dispose=function(){this.subscription.dispose(),e.prototype.dispose.call(this)},t}(i);t.DisposableSubscription=s;var o=function(e){function t(t){e.call(this),this.object=t}return __extends(t,e),t.prototype.dispose=function(){this.object.dispose(),e.prototype.dispose.call(this)},t}(i);t.DisposableKnockoutObject=o;var u=function(e){function t(t,n,r,i){i===void 0&&(i=!1),e.call(this),this.type=n,this.element=t,this.callback=r,this.capture=i,this.element.addEventListener(this.type,this.callback,this.capture)}return __extends(t,e),t.prototype.dispose=function(){this.element.removeEventListener(this.type,this.callback,this.capture),e.prototype.dispose.call(this)},t}(i);t.DisposableEventListener=u;var a=function(e){function t(t,n){e.call(this),this.defaultDuration=t,this.callback=n}return __extends(t,e),t.prototype.start=function(e){var t=this;e===void 0&&(e=this.defaultDuration),this.isCountingDown()&&this.cancel(),this.timerHandle=setTimeout(function(){t.timerHandle=null,t.callback()},e)},t.prototype.cancel=function(){this.isCountingDown()&&(clearTimeout(this.timerHandle),this.timerHandle=null)},t.prototype.isCountingDown=function(){return!!this.timerHandle},t.prototype.dispose=function(){this.cancel(),e.prototype.dispose.call(this)},t}(i);t.DisposableTimer=a;var f=function(e){function t(t,n){e.call(this),ko.applyBindings(t,n),this.element=n}return __extends(t,e),t.prototype.dispose=function(){ko.cleanNode(this.element),e.prototype.dispose.call(this)},t}(i);t.DisposableKOApplyBindings=f;var l=function(e){function t(t,n){e.call(this),this.element=t,this.element.innerHTML=n}return __extends(t,e),t.prototype.dispose=function(){this.element.innerHTML="",e.prototype.dispose.call(this)},t}(i);t.DisposableSetHTML=l}),define("generated/DataLabClient/Shell/Button",["require","exports"],function(e,t){(function(e){e[e.Ok=0]="Ok",e[e.Yes=1]="Yes",e[e.No=2]="No",e[e.Close=3]="Close",e[e.Cancel=4]="Cancel",e[e.Retry=5]="Retry",e[e.Details=6]="Details"})(t.ButtonType||(t.ButtonType={}));var n=t.ButtonType}),define("generated/DataLabClient/Shell/UxFxAdapters/ShellButtonFactory",["require","exports","../Button"],function(e,t,n){var r=function(){function e(){}return e.prototype.createButton=function(e,t){switch(e){case 0:return new Shell.UI.Notifications.Buttons.ok(t);case 3:return new Shell.UI.Notifications.Buttons.close(t);case 5:return new Shell.UI.Notifications.Buttons.retry(t);case 6:return new Shell.UI.Notifications.Buttons.details(t);case 4:return new Shell.UI.Notifications.Buttons.cancel(t);case 1:return new Shell.UI.Notifications.Buttons.yes(t);case 2:return new Shell.UI.Notifications.Buttons.no(t);default:throw new Error("Invalid button type")}},e}();return r}),define("generated/DataLabClient/Shell/ButtonFactory",["require","exports","./UxFxAdapters/ShellButtonFactory"],function(e,t,n){function r(){return new n}t.createButtonFactory=r}),define("generated/DataLabClient/Shell/UxFxAdapters/ShellNotificationControl",["require","exports"],function(e,t){var n=function(){function e(){}return e.prototype.createConfirmation=function(e,t){return new Shell.UI.Notifications.Confirmation(e,t)},e.prototype.createNotification=function(e,t){return new Shell.UI.Notifications.Notification(e,t)},e.prototype.add=function(e){Shell.UI.Notifications.add(e)},e.prototype.remove=function(e){Shell.UI.Notifications.remove(e)},e}();return n}),define("generated/DataLabClient/Shell/NotificationControl",["require","exports","./UxFxAdapters/ShellNotificationControl"],function(e,t,n){var r;(function(e){e.Active="active",e.Success="success",e.Error="error",e.Warning="warning"})(r=t.NotificationStatus||(t.NotificationStatus={})),t.notificationControl=new n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Util",["require","exports","./Features","./Constants","./LocalizedResources","./Logging/Logging","./DateFormatter","./Disposable","./Shell/Button","./Shell/ButtonFactory","./Shell/NotificationControl"],function(e,t,n,r,i,s,o,u,a,f,l){function d(e){if(e instanceof h&&e.xmlHttpRequest&&e.xmlHttpRequest.responseText)try{var t=JSON.parse(e.xmlHttpRequest.responseText);t&&t.Error&&(t=t.Error);if(t.Code&&t.Code==="AzureStorageError"&&t.Message)return t.Message}catch(n){}return e instanceof h&&e.xmlHttpRequest&&e.xmlHttpRequest.responseText||e.message}function v(e){var t=[];if(!e||!e.xmlHttpRequest)t.push(i.unexpectedError);else{t.push(et(i.infoErrorHttpStatusCode,e.xmlHttpRequest.status.toString()));var n=e.xmlHttpRequest.getResponseHeader("x-ms-request-id");n&&t.push(et(i.infoErrorRequestId,n));var r=e.xmlHttpRequest.getResponseHeader("Date");r&&t.push(et(i.infoErrorTimestamp,r))}return t}function m(e){var t=!1;e.fail(function(e){if(!t){if(e instanceof Error)throw e;if(n.handleJsonParseErrorsEnabled()&&e instanceof p){var o={title:i.responseErrorNotification,details:e.message};bt(o)}else{if(!(e instanceof h&&e.message.indexOf(r.NetworkErrorFlag)>=0))throw new Error("A promise failed with object "+String(e));var u=new RegExp("^"+r.NetworkErrorFlag+"(.*) Request opened*"),a=e.message.match(u)[1],o={title:i.networkErrorNotification,details:a};bt(o),s.customEvent({key:"NetworkError",type:"Error",data:JSON.stringify(e.message)})}}});var o=e.fail;e.fail=function(){return t=!0,o.apply(e,arguments)}}function g(e){return e&&e.fail&&e.fail instanceof Function&&e.done&&e.done instanceof Function&&e.always&&e.always instanceof Function}function y(e){if(!g(e))throw new Error("Expected a jQuery-style promise")}function b(){var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];e.length>1&&e.forEach(y),e.forEach(function(e){g(e)&&e.fail(function(){})});var n=$.when.apply($,e);return m(n),n}function w(e,t,n,r){y(e),e.fail(function(){});var i,s=function(){var e=t.apply(this,arguments);return g(e)&&e.fail(function(){}),e};return i=e.then(s,n,r),m(i),i}function E(e,t,n,r){return w(e,t,n,r)}function S(e){var t=$.Deferred();return setTimeout(function(){return t.reject(e)}),b(t)}function x(e){var t=$.Deferred();return t.resolve(e),b(t.promise())}function T(){function s(){return e.every(function(e){return e.state()==="resolved"})}var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=!1,r=$.Deferred(),i=[];return e.forEach(function(t){t.fail(function(e){if(n)return;n=!0,r.reject(e)}),t.done(function(o){if(n)return;var u=e.indexOf(t);i[u]=o,s()&&(n=!0,r.resolve(i))})}),b(r.promise())}function N(e,t){if(e==null)return e;var n=Math.pow(10,t);return Math.round(e*n)/n}function C(e){var t=$("<div />"),n=t.text(e).html();return n}function k(e){var t=e.match(c);if(t!==null){var n=Number(t[1]);if(t[2]!==undefined)throw new Error("Unexpected UTC offset");return new Date(n)}throw new Error("Invalid JSON date format")}function L(e,t){var n=e instanceof Array?e:[e];n.forEach(function(e){t.forEach(function(t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error("Expected property missing: "+t);e[t]=k(e[t])})})}function A(e,t){t===void 0&&(t=3);if(e<0)throw new Error("Elapsed time cannot be less than zero.");var n=t===0?Math.floor(e/1e3):e/1e3,r=Math.floor(n/3600);n-=r*3600;var i=Math.floor(n/60);return n-=i*60,r+":"+(i<10?"0"+i:i.toString())+":"+(n<10?"0"+n.toFixed(t):n.toFixed(t))}function O(e,t){var n=t.getTime()-e.getTime();return n}function M(e){if(e.getTime()===t.minDate)return"-";var n=new o.DateFormatter(e);return n.toString("d")+" "+n.toString("T")}function D(e,t){t===void 0&&(t=3);var n=["bytes","KB","MB","GB","TB","PB"];if(e<0)throw new Error("Data size cannot be less than zero.");var r=1,i;for(var s=0;s<n.length;s++){if(e<1024*r||s===n.length-1)return i=e/r,s===0||s===n.length-1?Math.round(i)+" "+n[s]:i.toPrecision(t)+" "+n[s];r*=1024}}function P(e){return Object.freeze(Object.create(e))}function H(e){for(var t in e)return!1;return!0}function j(e){if(B!=="DefaultSession")throw new Error("Cannot set the session ID more than once");B=e}function F(){return B}function q(){return B+"-"+ ++I}function R(){var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];return{id:e.map(function(e){return e.id}).join(":")}}function U(e,t){var n=Math.floor(Math.random()*(t-e+1))+e;return Math.min(t,n)}function z(e,t){if(e instanceof Array)e.forEach(t);else{if(typeof e!="object")throw new Error("Expected an Array or Object");for(var n in e)t(e[n],n,e)}}function W(e,t){if(e instanceof Array)return e.map(t);var n=[];return z(e,function(r,i){n.push(t(r,i,e))}),n}function X(e,t){if(e instanceof Array)return e.filter(t);var n=[];return z(e,function(r,i){t(r,i,e)&&n.push(r)}),n}function J(e,t,n){t===void 0&&(t=function(){return!0});if(e instanceof Array){var r=e;for(var i=0;i<r.length;i++){var o=t(r[i],i,e);if(o)return r[i]}}else{if(typeof e!="object")throw new Error("Expected an Array or Object");for(var u in e){var o=t(e[u],u,e);if(o)return e[u]}}if(typeof n=="undefined"){if(V){var a=new Error("No matching value found");s.error("No matching value found",null,{argumentsLength:arguments.length,default_:n,type:typeof n,stack:a.stack}),V=!1,setTimeout(function(){return V=!0},5e3)}return n}return n}function K(e){return W(e,function(e){return e})}function Q(e){if(e instanceof Array)return e.length;var t=0;for(var n in e)t++;return t}function G(e){if(e instanceof Array)return e.length===0;for(var t in e)return!1;return!0}function Y(e,t,n){n===void 0&&(n=!0);for(var r=0;r<e.length;r++)if(e[r]===t){e.splice(r,1);return}if(n)throw new Error("Couldn't find element in array")}function Z(){var e={};return Object.defineProperty(e,"clear",{value:function(){for(var t in e)delete e[t]},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(e,"getItem",{value:function(t){return t in e?e[t]:null},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(e,"key",{value:function(t){Object.keys(e)[t]},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(e,"removeItem",{value:function(t){delete e[t]},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(e,"setItem",{value:function(t,n){e[t]=n},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(e,"length",{configurable:!1,enumerable:!1,get:function(){return Object.keys(e).length}}),Object.defineProperty(e,"remainingSpace",{configurable:!1,enumerable:!1,get:function(){return Infinity}}),e}function et(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/\{[0-9]\}/g,function(e){var n=parseInt(e.replace("{","").replace("}",""));if(t.length<=n)throw new Error("Parameter with index "+n+" not found");return t[n]})}function tt(e,t,n){return e===1?et(t,e.toString()):et(n,e.toString())}function nt(e){return e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20)}function rt(e){var t=e.split(/(?=[A-Z])/);return t.reduce(function(e,t){return e+" "+t},"")}function it(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function st(e,t){return parseFloat(e.toPrecision(t))}function ot(e){while(e.firstChild)ot(e.firstChild),e.removeChild(e.firstChild)}function ut(e,t){t===void 0&&(t=null);var n=$.Deferred();if(e())return n.resolve().promise();var r=function(e){e&&(i.dispose(),i=null,n.resolve())},i=e.subscribe(r);return t&&t.registerForDisposal(new u.DisposableSubscription(i)),n.promise()}function lt(e,t,n){n&&n.forEach(function(e){ct(e.componentName,e.viewModel,e.template)});if(!document.getElementById(e)){var r=t;if(!$("head"))throw new Error("<head> is not ready, make sure you instantiate the control on document ready");$("head").append(r)}return e}function ct(e,t,n){if(typeof e=="string"){var r=e;ko.components.isRegistered(r)||ko.components.register(r,{viewModel:t,template:n})}else{var i=e;ko.components.isRegistered(i.name)||(typeof i.config.onRegister=="function"&&i.config.onRegister(),ko.components.register(i.name,i.config))}}function ht(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function pt(e){return e*1024*1024}function dt(e){return e.length/4*3}function vt(e){return ko.computed({read:e,deferEvaluation:!0})}function mt(e){return ko.pureComputed({read:e,deferEvaluation:!0})}function gt(e){var t=new Shell.Utilities.QueryStringBuilder(window.location.search),n=t.containsKey(e),r;if(n){r=t.getValue(e),t.remove([e]);var i=t.toString(!0);i=i==="?"?"":i;var s=location.protocol+"//"+location.host+location.pathname+i+location.hash;history.replaceState({},document.title,s)}return r}function yt(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function bt(e){var t=l.notificationControl.createNotification(e.title,l.NotificationStatus.Error);e.details&&t.setDetailsText(e.details);var n=f.createButtonFactory();return t.setActions([n.createButton(3)]),l.notificationControl.add(t),t}function wt(e,t){return!!_.find(e,function(e){return t.test(e)})}function Et(e,t,n,r){return t===void 0&&(t=""),n===void 0&&(n="_blank"),r===void 0&&(r=null),Shell.Communication.Rpc.Functions.windowOpen(t,n,r,function(){var t=Shell.Communication.Rpc.Functions.takeLastWindowOpened();e(t)})}function St(e){e=e||window.open("","_blank");var t=window.location.origin?window.location.origin:"https://studio.azureml.net",n="AMLSpinnerId",r="<div id='"+n+"' style='left:50%;position:fixed;background: transparent url("+t+"/Content/Images/spinner-md.gif) 40% 40% no-repeat;top:140px;bottom:60px;width:960px;margin-left:-380px;'></div>";try{$(e.document.body).find("#"+n).length===0&&$(e.document.body).html(r)}catch(i){s.exception(i,"Could not add spinner to new window","addSpinnerToBlankWindow",{newWindow:e})}return e}function xt(e){var t=0,n=e.length;if(n===0)return t;var r;for(r=0;r<n;r+=1)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t>>>=0,t}function Tt(e){return("0000000"+(e>>>0).toString(16).toUpperCase()).slice(-8)}function Nt(e){var t=e&&e.constructor&&e.constructor.toString()||"",n=xt(t),r=Tt(n);return r}function Ct(e){var t=window.require;t=t&&t.s,t=t&&t.contexts,t=t&&t._,t=t&&t.defined||{};for(var n in t)if(n.indexOf("DataLabViews/")>=0){var r=t[n];for(var i in r){var s=r[i];if(typeof s=="function"&&e instanceof s){var o=n.match(/[^/]*$/)[0]||n;return o+"."+i}}}return null}function kt(e){try{var t=ko.contextFor(e);if(t){var n=t.$root,r=JSON.stringify({path:cdm&&cdm.currentContext&&cdm.currentContext.hashPath,elementClass:e.getAttribute("class"),elementId:e.getAttribute("id"),existingVmHash:Nt(n),existingVmName:Ct(n),existingVmDisposed:n&&n.isDisposed});s.error("another view model has already been bound to the node",null,r)}return!!t}catch(i){return s.error("error in check for existing bidnings",null,String(i)),!1}}function Lt(e){e=e||window.location.search,e=e.replace(/^\?/,"");var t=e.split("&"),n={};return _.forEach(t,function(e){if(e){var t=e.split("=");n[t[0]]=decodeURIComponent(t[1])}}),n}function At(){var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=undefined;e.reverse();var r=function(t){function o(){if(!s||s.length==0)return;var e=s.pop();i=undefined,typeof e=="number"?i=setTimeout(o,e):typeof e!="function"?o():e.length==1?e(o):(s.push(e()),o())}r.abort(),r.event=t;var i,s=e.concat();n=function(){i!==undefined&&(clearTimeout(i),i=undefined),s=null},o()};return r.abort=function(){n!==undefined&&n()},r}function Ot(){var e=function(t){if(!t)return Math.floor(Math.random()*16).toString(16);var n="",r;for(r=0;r<t;r++)n+=e(null);return n},t=(128+Math.floor(Math.random()*64)).toString(16);return e(8)+"-"+e(4)+"-4"+e(3)+"-"+t+e(2)+"-"+e(12)}function _t(e){var t=[],n={},r=function(i){var s=null,o=e.getNodeId(i);switch(n[o]){case 0:return i;case 1:return null;default:n[o]=0}return e.getDownstreamNodesFunction(i).forEach(function(e){var n=r(e);n&&(t.push(i),s=n===i?null:n)}),n[o]=1,s};return e.listOfNodes.forEach(function(e){r(e)}),t}function Dt(e){var t={};return Object.getOwnPropertyNames(e).forEach(function(n){t[n]=e[n]}),t}function Pt(e){var t=$.Deferred();return setTimeout(function(){t.resolve()},e),t.promise()}function Ht(e,t,n,r){return E(e(),function(e){return e},function(i){return n>0&&(!r||r(i))?E(Pt(t),function(){return Ht(e,t,n-1,r)}):i})}function Bt(e){return Array.prototype.concat.apply([],e)}function jt(e,t){var n=this;return E(e,function(e){return E(b.apply(n,e.map(t)),function(){return Array.prototype.slice.call(arguments)})})}t.windowLocationOrigin=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var c=/^\/Date\(([+-]?\d+)([+-]\d+)?\)\/$/;t.minDate=-621355968e5;var h=function(){function e(e,t,n){this._requestId=n,this.error=new Error(e),this.xmlHttpRequest=t,this.traceObject={message:e,status:t.status,statusText:t.statusText}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.error.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.error.message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSuccess",{get:function(){return this.xmlHttpRequest&&this.xmlHttpRequest.status===200},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return String(this.error)},Object.defineProperty(e.prototype,"requestId",{get:function(){return this._requestId},enumerable:!0,configurable:!0}),e}();t.AjaxError=h;var p=function(){function e(e,t){this._requestId=t,this.error=new Error(e)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.error.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.error.message},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return String(this.error)},Object.defineProperty(e.prototype,"requestId",{get:function(){return this._requestId},enumerable:!0,configurable:!0}),e}();t.JsonParseError=p,t.getErrorDetails=d,t.ajaxErrorMetas=v,t.isPromise=g,t.when=b,t.then=w,t.then2=E,t.fail=S,t.succeed=x,t.all=T,t.reduceToFixedPrecision=N,t.encodeAsHtml=C,t.parseJsonDate=k,t.replaceJsonDates=L,t.formatElapsedTime=A,t.getElapsedTimeMilliseconds=O,t.formatDate=M,t.formatDataSize=D,t.createReadOnlyView=P,t.isObjectEmpty=H;var B="DefaultSession";t.setSessionId=j,t.getSessionId=F;var I=0;t.generateUID=q,t.tuple=R,t.randomInt=U,t.forEach=z,t.map=W,t.filter=X;var V=!0;t.first=J,t.values=K,t.size=Q,t.isEmpty=G,t.removeElementFromArray=Y,t.localStorage=Z(),t.sessionStorage=Z(),t.format=et,t.formatWithPluralOption=tt,t.resurrectDashesInGUID=nt,t.addSpaceAfterCapitals=rt,t.getAllPropertyNames=it,t.reducePrecision=st,t.removeChildrenRecursively=ot,t.whenTrue=ut;var at=function(){function e(e){var t=this;e===void 0&&(e=[]),this.items=Object.create(null),this.count=0,e.forEach(function(e){return t.add(e)})}return Object.defineProperty(e.prototype,"size",{get:function(){return this.count},enumerable:!0,configurable:!0}),e.prototype.add=function(e){return e in this.items?!1:(this.items[e]=null,this.count++,!0)},e.prototype.has=function(e){return e in this.items},e.prototype.delete=function(e){e in this.items&&(delete this.items[e],this.count--)},e.prototype.clear=function(){this.items=Object.create(null),this.count=0},e.prototype.forEach=function(e){var t=this;z(this.items,function(n,r){return e(r,r,t)})},e.prototype.map=function(e){var t=this;return W(this.items,function(n,r){return e(r,r,t)})},e.prototype.exceptWith=function(e){var t=this;e.forEach(function(e){return t.delete(e)})},e.prototype.unionWith=function(e){var t=this;e.forEach(function(e){return t.add(e)})},e.prototype.overlaps=function(e){var t=this;return e.some(function(e){return t.has(e)})},e.prototype.setEqual=function(e){var t=this;return this.count==e.length&&e.every(function(e){return t.has(e)})},e.prototype.toArray=function(){return Object.keys(this.items)},e}();t.StringSet=at;var ft=function(e){function t(t,n){var r=this;e.call(this),this._transform=n,t.forEach(function(e){return r.add(e)})}return __extends(t,e),t.prototype.add=function(t){return e.prototype.add.call(this,this._transform(t))},t.prototype.has=function(t){return e.prototype.has.call(this,this._transform(t))},t.prototype.delete=function(t){e.prototype.delete.call(this,this._transform(t))},t.prototype.exceptWith=function(t){e.prototype.exceptWith.call(this,t.map(this._transform))},t.prototype.unionWith=function(t){e.prototype.unionWith.call(this,t.map(this._transform))},t.prototype.overlaps=function(t){return e.prototype.overlaps.call(this,t.map(this._transform))},t.prototype.setEqual=function(t){return e.prototype.setEqual.call(this,t.map(this._transform))},t}(at);t.StringSetWithTransform=ft,t.initializeTemplateIfNecessary=lt,t.registerComponent=ct,t.param=ht,t.megaBytesToBytes=pt,t.getBytesEncodedInBase64String=dt,t.deferredComputed=vt,t.deferredPureComputed=mt,t.getQueryParamValueAndRemoveIfPresent=gt,t.escapeRegExpString=yt,t.showErrorNotification=bt,t.findStringMatchingRegEx=wt,t.wrapWithWindowPreOpener=Et,t.addSpinnerToBlankWindow=St,t.computeStringHashCode=xt,t.int2hex=Tt,t.computeHashOfConstructor=Nt,t.findDataLabViewName=Ct,t.checkForExistingKOBindings=kt,t.parseQueryString=Lt,t.jobPipeline=At,t.createGuid=Ot;var Mt;(function(e){e[e.BeingVisited=0]="BeingVisited",e[e.BeenVisited=1]="BeenVisited"})(Mt||(Mt={})),t.findNodesInCyclesFromDirectedGraph=_t,t.errorToSerializableObject=Dt,t.wait=Pt,t.retry=Ht,t.flatten=Bt,t.mapAsync=jt}),define("generated/DataLabClient/Logging/Performance",["require","exports","../Constants","./Logging","../Util","../Disposable"],function(e,t,n,r,i,s){function c(){if(!t.isEnabled)return;if(u.timing){var e=function(){setTimeout(function(){var e=i.createGuid();r.IfxScenario(2,u.timing.navigationStart,0,null,e,null),r.IfxScenario(2,u.timing.loadEventEnd,1,u.timing.loadEventEnd-u.timing.navigationStart,e,u.timing),r.performance("initialPageLoad",u.timing.loadEventEnd-u.timing.navigationStart,"",u.timing)},0),n&&(n.dispose(),n=null)};if(u.timing.loadEventStart>0)e();else var n=new s.DisposableEventListener(window,"load",e)}}function h(e){if(!t.isEnabled)return;l++,f={name:e,startTime:u.now(),number:l},a&&(clearTimeout(a),a=null),o.isEnabled&&t.doClearResourceTimingsOnIntervalStart&&(o.flush(),o.clear())}function p(){if(!t.isEnabled)return;f&&(a&&clearTimeout(a),a=setTimeout(function(){var e=u.now()-f.startTime;r.performance("interval",e,"",f),o.isEnabled&&o.send({intervalNumber:f.number},5,2e3),f=null},0))}var o;(function(e){function o(){e.beforeClearCallback&&e.beforeClearCallback(),h()}function u(e,r,s){r===void 0&&(r=0),s===void 0&&(s=1e3);var o=t.getEntriesByType("resource"),u=o.length;for(var a=i;a<u;++a)n[a]=e;i=u,l(u,r,s)}function a(){u(e.dataForFlush,0)}function f(e){t.setResourceTimingBufferSize&&t.setResourceTimingBufferSize(e)}function l(i,o,u){c();var a=t.getEntriesByType("resource"),f=0,p=0;for(var d=0;d<i;++d){var v=n[d];if(v){var m=a[d];o===0||m.duration>0?(r.performance("resource",m.duration,"",$.extend({},m,v)),n[d]=null,p++):f++}}f>0&&o>0?s=setTimeout(l.bind(undefined,i,o-1,u),u):i===a.length&&e.doClearWhenAllSent&&h()}function c(){s&&(clearTimeout(s),s=null)}function h(){c(),t.clearResourceTimings(),i=0,n=[]}e.isEnabled=!1,e.isSetBufferSizeSupported=!1,e.beforeClearCallback=null,e.dataForFlush=null,e.doClearWhenAllSent=!0;var t=window.performance||{},n=[],i=0,s=null;e.clear=o,e.send=u,e.flush=a,e.setBufferSize=f,function(r){t.clearResourceTimings=t.clearResourceTimings||t.webkitClearResourceTimings||t.msClearResourceTimings||t.mozClearResourceTimings||t.oClearResourceTimings,t.getEntriesByType=t.getEntriesByType||t.webkitGetEntriesByType||t.msGetEntriesByType||t.mozGetEntriesByType||t.oGetEntriesByType,t.setResourceTimingBufferSize=t.setResourceTimingBufferSize||t.webkitSetResourceTimingBufferSize||t.msSetResourceTimingBufferSize||t.mozSetResourceTimingBufferSize||t.oSetResourceTimingBufferSize,e.isSetBufferSizeSupported=!!t.setResourceTimingBufferSize,e.isEnabled=!!t.getEntriesByType&&!!t.clearResourceTimings,r.environment&&r.environment.doMeasurePerformance!==!0&&(e.isEnabled=!1)}(window)})(o=t.ResourceTimings||(t.ResourceTimings={})),t.isEnabled=!0,t.doClearResourceTimingsOnIntervalStart=!0;var u,a=null,f=null,l=0;t.logNavigationTiming=c,t.intervalStart=h,t.intervalEnd=p,function(n){u=n.performance||{},t.isEnabled=n.environment&&!!n.environment.doMeasurePerformance&&!!u.now;if(!t.isEnabled)return;o.isSetBufferSizeSupported&&(o.setBufferSize(300),t.doClearResourceTimingsOnIntervalStart=!1),o.dataForFlush={intervalNumber:1},o.beforeClearCallback=function(){o.beforeClearCallback=null,o.dataForFlush=null}}(window)}),define("uxfxscript",["require","jquery","generated/DataLabClient/Constants","generated/DataLabClient/LocalizedResources","jqueryui","templates","scripts/environment","experimenteditortemplates","zeroclipboard"],function(e,t,n,r){(function(e,t){function s(e,t){var n;if(typeof e=="object"&&typeof t=="object")for(n in t)t.hasOwnProperty(n)&&(e[n]?s(e[n],t[n]):e[n]=t[n]);return e}function o(e,t,n){e[t]=e[t]||{},s(e[t],n)}var n={},i;s(e,{Resources:{getResources:function(){}}}),i=e.Resources.getResources,e.Resources.getResources=function(e){return i(e)||n[e]},function(e){function t(e){var t="fx",i=e.Resources.getResources("Microsoft.MetaAnalytics.Web.ClientResources")||r;o(n,t,i)}t(e)}(e),function(){function e(){var e="fx.regions",t={EC:"Ecuador",EE:"Estonia",EG:"Egypt",ES:"Spain",FI:"Finland",FR:"France",AD:"Andorra",AE:"United Arab Emirates",AG:"Antigua and Barbuda",AL:"Albania",AM:"Armenia",AO:"Angola",AT:"Austria",AU:"Australia",AR:"Argentina",AZ:"Azerbaijan",DE:"Germany",DK:"Denmark",DO:"Dominican Republic",DZ:"Algeria",GB:"United Kingdom",GG:"Guernsey",GR:"Greece",GT:"Guatemala",BG:"Bulgaria",BE:"Belgium",BB:"Barbados",BO:"Bolivia",BH:"Bahrain",BS:"Bahamas",BR:"Brazil",BY:"Belarus",MK:"Macedonia, FYRO",MA:"Morocco",ME:"Montenegro",MG:"Madagascar",MX:"Mexico",MY:"Malaysia",MT:"Malta",CA:"Canada",CN:"China",CO:"Colombia",CL:"Chile",CH:"Switzerland",CU:"Cuba",CR:"Costa Rica",CZ:"Czech Republic",CY:"Cyprus",NO:"Norway",NL:"Netherlands",NG:"Nigeria",NZ:"New Zealand",IL:"Israel",IM:"Isle of Man",IN:"India",ID:"Indonesia",IE:"Ireland",IT:"Italy",IS:"Iceland",LI:"Liechtenstein",LK:"Sri Lanka",LA:"Laos",LB:"Lebanon",LR:"Liberia",LU:"Luxembourg",LT:"Lithuania",LV:"Latvia",OM:"Oman",JO:"Jordan",JM:"Jamaica",JE:"Jersey",JP:"Japan",US:"United States",UY:"Uruguay",UA:"Ukraine",HK:"Hong Kong SAR",HU:"Hungary",HT:"Haiti",HR:"Croatia",KE:"Kenya",KZ:"Kazakhstan",KW:"Kuwait",KR:"Korea",VE:"Venezuela",QA:"Qatar",TR:"Turkey",TT:"Trinidad & Tobago",TW:"Taiwan",TD:"Chad",TH:"Thailand",TN:"Tunisia",RW:"Rwanda",RU:"Russia",RS:"Serbia",RO:"Romania",PT:"Portugal",PR:"Puerto Rico",PY:"Paraguay",PE:"Peru",PA:"Panama",PL:"Poland",PH:"Philippines",PK:"Pakistan",SV:"El Salvador",SG:"Singapore",SE:"Sweden",SA:"Saudi Arabia",SK:"Slovakia",SI:"Slovenia",YE:"Yemen",ZA:"South Africa"};o(n,e,t)}e()}(),function(){function e(){var e="fx.links",t={privacyUrl:"//go.microsoft.com/fwLink/?LinkID=131004&clcid=0x409",legalUrl:"//go.microsoft.com/fwLink/?LinkID=251506&clcid=0x409",windowsAzurePreviewTermsOfUse:"//go.microsoft.com/fwLink/?LinkID=247638&clcid=0x409"};o(n,e,t)}e()}()})(this),function(e,t,n){var r=e("<div></div>").addClass("fx-exceptionholder").hide().appendTo("body"),i=function(t){var n=e("<div></div>").text(t+"\\r\\n");r.append(n)},s=function(e){return e!==n&&r.text(e),r.text()},o=t.onerror||e.noop,u=e.Callbacks("On Error");t.onerror=function(){try{var e;for(e in arguments)arguments.hasOwnProperty(e)&&i(arguments[e]);i("--------")}catch(n){}o.apply(arguments);try{u.fireWith(t,arguments)}catch(n){}return!0},e.extend(!0,t,{fx:{diagnostics:{text:s,onError:u}}})}(jQuery,this),function(e,t){var n=function(n,r){var i=Array.prototype.slice.call(arguments,2),s=0,o=i.length,u,a;n=n||{};for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(n[u]?r[u]=a:e.isPlainObject(a)?r[u]=e.extend(!0,r[u]||{},a):e.isArray(a)?r[u]=e.extend(!0,[],a):r[u]=a);return r},r=function(){return e("<p />").uniqueId().attr("id").substr(6)},i=function(t,i){if(e.ui.version!=="1.10.4")throw new Error("This function must match the definition of $.Widget.prototype._createWidget,                              so it must be updated on every jQuery UI update. The only difference is .extend()                              is changed to copyReference(), and uuid is retrieved with getUUID()");i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=r(),this.eventNamespace="."+this.widgetName+this.uuid,this.options=n(this._references,{},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()};e.widgetReference=function(t,n,r){var s=t.split(".")[0],o=t.split(".")[1];e.widget.apply(this,arguments),e[s][o].prototype._createWidget=i}}(jQuery),function(e,t){function r(e){return this._data=e,this}function i(e,t){if(e&&t){var n=t.split(".");t=n.pop();while(e&&n.length)e=e[n.shift()];return[e,t]}return[]}function s(e){return this._data=e,this}function o(e){if(typeof e!="number")throw"Invalid index."}e.observable=function(t,n){return e.isArray(t)?new s(t):new r(t)};var n=[].splice;e.observable.Object=r,r.prototype={_data:null,data:function(){return this._data},setProperty:function(t,n){var r=this;if(e.isArray(t))for(var s=0,o=t.length;s<o;s++){var u=t[s];r.setProperty(u.name,u.value)}else if(typeof t=="object")for(var a in t)r.setProperty(a,t[a]);else{var f=r._data,l=i(f,t);t=l[1],l=l[0],l&&r._setProperty(l,t,n)}return r},_setProperty:function(t,n,r){var i,s=t[n];e.isFunction(s)&&(i=s,s=s.call(t)),s!=r&&(!(s instanceof Date)||s>r||s<r)&&(i?(i.call(t,r),r=i.call(t)):t[n]=r,this._trigger(t,{path:n,value:r,oldValue:s}))},_trigger:function(t,n){e(t).triggerHandler("propertyChange",n)}},e.observable.Array=s,s.prototype={_data:null,data:function(){return this._data},insert:function(t,n){return o(t),arguments.length>1&&(n=e.isArray(n)?n:[n],n.length>0&&this._insert(t,n)),this},_insert:function(e,t){n.apply(this._data,[e,0].concat(t)),this._trigger({change:"insert",index:e,items:t})},remove:function(e,n){o(e),n=n===t||n===null?1:n;if(n&&e>-1){var r=this._data.slice(e,e+n);n=r.length,n&&this._remove(e,n,r)}return this},_remove:function(e,t,n){this._data.splice(e,t),this._trigger({change:"remove",index:e,items:n})},move:function(e,n,r){o(e),o(n),r=r===t||r===null?1:r;if(r){var i=this._data.slice(e,e+r);this._move(e,n,r,i)}return this},_move:function(e,t,n,r){this._data.splice(e,n),this._data.splice.apply(this._data,[t,0].concat(r)),this._trigger({change:"move",oldIndex:e,index:t,items:r})},refresh:function(e){var t=this._data.slice(0);return this._refresh(t,e),this},_refresh:function(e,t){n.apply(this._data,[0,this._data.length].concat(t)),this._trigger({change:"refresh",oldItems:e})},_trigger:function(t){e([this._data]).triggerHandler("arrayChange",t)}}}(jQuery),this.jsviews||this.jQuery&&jQuery.views||function(e,t){function M(e){this.name="JsRender Error",this.message=e||"JsRender error"}function _(e,t,n){if(!O.rTag||arguments.length)u=e?"\\"+e.charAt(0):u,a=e?"\\"+e.charAt(1):a,f=t?"\\"+t.charAt(0):f,l=t?"\\"+t.charAt(0):l,n=n?"\\"+n:c,O.rTag=i="(\\w*"+n+")?(?:(?:(\\w+(?=[\\/\\s"+f+"]))|(?:(\\w+)?(:)|(>)|(\\*)))"+"\\s*((?:[^"+f+"]|"+f+"(?!"+l+"))*?)",i=new RegExp(u+a+i+"(\\/)?|(?:\\/(\\w+)))"+f+l,"g"),s=new RegExp("<.*>|([^\\\\]|^)[{}]|"+u+a+".*"+f+l);return[u,a,f,l,c]}function D(e){var n=this,r=n.tmpl.helpers||{};return e=(n.dynCtx&&n.dynCtx[e]!==t?n.dynCtx:n.ctx[e]!==t?n.ctx:r[e]!==t?r:R[e]!==t?R:{})[e],typeof e!="function"?e:function(){return e.apply(n,arguments)}}function P(e,n,r,i){var s=!r.markup&&r||t,o=n.tmpl.converters;return o=o&&o[e]||U[e],o?o.call(n,i,s):(X("Unknown converter: {{"+e+":"),i)}function H(e,n,r,i,s){var o,u=!r.markup&&r,a=u?u.view.tmpl:r,f=a.tags,l=a.templates,c=s.props=s.props||{},h=c.tmpl,p=arguments.length>5?L.call(arguments,5):[],d=f&&f[e]||q[e];return d?(i=i&&a.tmpls[i-1],h=h||i||d.template||t,s.view=n,h=s.tmpl=""+h===h?l&&l[h]||I[h]||I(h):h,s.attr=r.attr=r.attr||d.attr,s.tagName=e,s.renderContent=z,u&&(u.tagCtx={args:p,props:c,path:s.path,tag:d}),d.render&&(o=d.render.apply(s,p)),o||(o==t?h?s.renderContent(p[0],t,n):"":o.toString())):(X("Unknown tag: {{"+e+"}}"),"")}function B(e,n,r,i,s,o,u,a){var f,l={data:i,tmpl:s,views:a?[]:{},parent:r,ctx:e,path:n,_useKey:a?0:1,_onRender:u,_hlp:D,renderLink:function(t){var n=this.tmpl.tmpls[t];return n.render(i,e,this)}};return r&&(f=r.views,r._useKey?(f[l.key="_"+r._useKey++]=l,l.index=r.index):f.splice(l.key=l.index=o!==t?o:f.length,0,l)),l}function j(e,n,r,i,s){var o,u;if(r&&typeof r=="object"&&!r.nodeType){for(o in r)n(o,r[o]);return e}i===t&&(i=r,r=t);if(u=h.onBeforeStoreItem)s=u(n,r,i,s)||s;return r?""+r===r&&(i===null?delete n[r]:n[r]=s?i=s(i,r):i):i=s?s(i):i,(u=h.onStoreItem)&&u(n,r,i,s),i}function F(e,t){return e=typeof e=="function"?{render:e}:e,e.tagName=t,e}function I(e,t){return j(this,I,e,t,G)}function q(e,t){return j(this,q,e,t,F)}function R(e,t){return j(this,R,e,t)}function U(e,t){return j(this,U,e,t)}function z(e,n,i,s,u,a,f){var l,c,h,v,m,g,y,b,w,E,S,x,T=this,N="";s===d&&(w=d,s=0);if(T.tagName){y=T.tmpl;if(n||T.ctx)E={},T.ctx&&o(E,T.ctx),n&&o(E,n);n=E,b=T.props,b&&b.link===p&&(n=n||{},n.link=p),i=i||T.view,a=a||T.path,s=s||T.key,f=i&&i._onRender}else y=T.jquery&&(T[0]||X('Unknown template: "'+T.selector+'"'))||T,f=f||i&&i._onRender;if(y){i?(g=i.ctx,S=i.dynCtx,e===i&&(e=i.data,u=d)):g=R,x=n&&n!==g;if(S||x)g=o({},g),x&&o(g,n),S&&o(g,S);n=g,y.fn||(y=I[y]||I(y));if(y){f=n.link!==p&&f;if(r.isArray(e)&&!u){v=w?i:s!==t&&i||B(n,a,i,e,y,s,f,d);for(l=0,c=e.length;l<c;l++)h=e[l],m=y.fn(h,B(n,a,v,h,y,(s||0)+l,f),O),N+=f?f(m,y,b):m}else v=w?i:B(n,a,i,e,y,s,f),v._onRender=f,N+=y.fn(e,v,O,W);return f?f(N,y,b,v.key,a):N}}return X("No template found"),""}function W(e){return e}function X(e){if(O.debugMode)throw new O.Error(e)}function V(e){X("Syntax error\n"+e)}function $(e,t,n){function c(t){t-=u,t&&f.push(e.substr(u,t).replace(y,"\\n"))}function h(t){t&&V('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}function p(t,i,o,p,v,m,g,y,w,S,x){m&&(v=":",p="html");var T,N="",C="",k=!w&&!v&&!n;o=o||v,c(x),u=x+t.length,g?s&&f.push(["*",y.replace(b,"$1")]):o?(o==="else"?(l[5]=e.substring(l[5],x),l=a.pop(),f=l[3],k=d):i&&(a.push(l),l=["!",,,[],,x],f.push(l),f=l[3]),y=y?K(y,n,i).replace(E,function(e,t,n){return t?C+=n+",":N+=n+",",""}):"",N=N.slice(0,-1),y=y.slice(0,-1),r=[o,p||"",y,k&&[],"{"+(N?"props:{"+N+"},":"")+"data: data"+(C?",ctx:{"+C.slice(0,-1)+"}":"")+"}"],f.push(r),k?(a.push(l),l=r,l[5]=u):i&&(l[5]=e.substring(l[5],u),l=a.pop())):S&&(T=l[0],h(S!==T&&(S!=="if"||T!=="else")&&T),l[5]=e.substring(l[5],x),T==="!"&&(l[5]=e.substring(l[5],u),l=a.pop()),l=a.pop()),h(!l&&S),f=l[3]}var r,s=t&&t.allowCode,o=[],u=0,a=[],f=o,l=[,,,o];return e=e.replace(w,"\\$1"),h(a[0]&&a[0][3].pop()[0]),e.replace(i,p),c(e.length),J(o,t)}function J(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,v,m,g,y,b,w,E=t?{allowCode:g=t.allowCode,debug:t.debug}:{},S=t&&t.tmpls;i=e.length,s=i?"":'"";';for(r=0;r<i;r++)n=e[r],""+n===n?s+='"'+n+'"+':(c=n[0],c==="*"?s=s.slice(0,r?-1:-3)+";"+n[1]+(r+1<i?"ret+=":""):(h=n[1],p=n[2],y=n[3],v=n[4],markup=n[5],c.slice(-1)==="!"?(m=Y(markup,E,t,S.length),J(y,m),(b=/\s+[\w-]*\s*\=\s*\\['"]$/.exec(e[r-1]))&&X("'{{!' in attribute:\n..."+e[r-1]+"{{!...\nUse data-link"),s+="view.renderLink("+S.length+")+",m.bound=d,m.fn.attr=b||"leaf",S.push(m)):(y&&(m=Y(markup,E,t,S.length),J(y,m),S.push(m)),l=l||v.indexOf("view")>-1,s+=(c===":"?h==="html"?(u=d,"h("+p):h?(f=d,'c("'+h+'",view,this,'+p):(a=d,"((v="+p+')!=u?v:""'):(o=d,'t("'+c+'",view,this,'+(y?S.length:'""')+","+v+(p?",":"")+p))+")+")));s=k+(a?"v,":"")+(o?"t=j._tag,":"")+(f?"c=j._convert,":"")+(u?"h=j.converters.html,":"")+"ret; try{\n\n"+(E.debug?"debugger;":"")+(g?"ret=":"return ")+s.slice(0,-1)+";\n\n"+(g?"return ret;":"")+"}catch(e){return j._err(e);}";try{s=new Function("data, view, j, b, u",s)}catch(x){V("Compiled template code:\n\n"+s,x)}return t&&(t.fn=s),s}function K(e,t,n){function a(a,f,l,c,h,v,g,y,b,w,E,S,x,T,N,C){function L(e,t,n,r,i,s,o){if(t){var u,a=(n?'view._hlp("'+n+'")':r?"view":"data")+(o?(i?"."+i:n?"":r?"":"."+t)+(s||""):(o=n?"":r?i||"":t,""));return u=o?"."+o:"",k||(a+=u),a=a.slice(0,9)==="view.data"?a.slice(5):a,k&&(a="b("+a+',"'+o+'")'+u),a}return e}h=h||"",l=l||f||E,c=c||y,b=b||N||"",h=h||"";var k=(t||n)&&b!=="(";if(!v)return u?(u=!S,u?a:'"'):o?(o=!x,o?a:'"'):(l?(s++,l):"")+(C?s?"":r?(r=p,"\b"):",":g?(s&&V(e),r=d,"\b"+c+":"):c?c.replace(m,L)+(b?(i[++s]=d,b):h):h?h:T?(i[s--]=p,T)+(b?(i[++s]=d,b):""):w?(i[s]||V(e),","):f?"":(u=S,o=x,'"'));V(e)}var r,i={},s=0,o=p,u=p;return e=(e+" ").replace(g,a),e}function Q(e,t,n){var r,i;if(e)for(r in e)i=e[r],i.name!==r&&(e[r]=t(i,r,n))}function G(e,n,r,i){function f(e){if(""+e===e||e.nodeType>0){try{a=e.nodeType>0?e:!s.test(e)&&v&&v(e)[0]}catch(t){}return a&&(e=I[a.getAttribute(C)],e||(n=n||"_"+S++,a.setAttribute(C,n),e=G(a.innerHTML,n,r,i),I[n]=e)),e}}var u,a;e=e||"",u=f(e),i=i||(e.markup?e:{}),i.name=n,!u&&e.markup&&(u=f(e.markup))&&u.fn&&(u.debug!==e.debug||u.allowCode!==e.allowCode)&&(u=u.markup);if(u!==t)return n&&!r&&(A[n]=function(){return e.render.apply(e,arguments)}),u.fn||e.fn?u.fn&&(n&&n!==u.name?e=o(o({},u),i):e=u):(e=Y(u,i,r,0),$(u,e)),Q(i.templates,G,e),Q(i.tags,F),e}function Y(e,t,n,r){function i(e){n[e]&&(s[e]=o(o({},n[e]),t[e]))}t=t||{};var s={markup:e,tmpls:[],links:[],render:z};return n&&(n.templates&&(s.templates=o(o({},n.templates),t.templates)),s.parent=n,s.name=n.name+"["+r+"]",s.key=r),o(s,t),n&&(i("templates"),i("tags"),i("helpers"),i("converters")),s}function Z(e){return x[e]||(x[e]="&#"+e.charCodeAt(0)+";")}var n="v1.0pre",r,i,s,o,u="{",a="{",f="}",l="}",c="!",h={},p=!1,d=!0,v=e.jQuery,m=/^(?:null|true|false|\d[\d.]*|([\w$]+|~([\w$]+)|#(view|([\w$]+))?)([\w$.]*?)(?:[.[]([\w$]+)\]?)?|(['"]).*\8)$/g,g=/(\()(?=|\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*([)\]])([([]?))|(\s+)/g,y=/\r?\n/g,b=/\\(['"])/g,w=/\\?(['"])/g,E=/\x08(~)?([^\x08]+)\x08/g,S=0,x={"&":"&amp;","<":"&lt;",">":"&gt;"},T=/[&<"']/g,N=/[\x00"&'<>]/g,C="data-jsv-tmpl",k="var j=j||"+(v?"jQuery.":"js")+"views,",L=Array.prototype.slice,A={},O={jsviews:n,sub:h,debugMode:d,render:A,templates:I,tags:q,helpers:R,converters:U,delimiters:_,View:B,_convert:P,_err:function(e){return O.debugMode?"Error: "+(e.message||e)+". ":""},_tmplFn:$,_tag:H,error:X,Error:M};(M.prototype=new Error).constructor=M,v?(r=v,r.templates=I,r.render=A,r.views=O,r.fn.render=z):(r=e.jsviews=O,r.extend=function(e,t){var n;e=e||{};for(n in t)e[n]=t[n];return e},r.isArray=Array&&Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}),o=r.extend,q({"if":function(){var e=this,n=e.view;return n.onElse=function(e,r){var i=0,s=r.length;while(s&&!r[i++])if(i===s)return"";return n.onElse=t,e.path="",e.renderContent(n)},n.onElse(this,arguments)},"else":function(){var e=this.view;return e.onElse?e.onElse(this,arguments):""},"for":function(){var e,t=this,n="",r=arguments,i=r.length;i===0&&(i=1);for(e=0;e<i;e++)n+=t.renderContent(r[e]);return n},"*":function(e){return e}}),U({html:function(e){return e!=t?String(e).replace(N,Z):""},attr:function(e){return e!=t?String(e).replace(T,Z):""},url:function(e){return e!=t?encodeURI(String(e)):""}}),_()}(this),this.jQuery&&jQuery.link||function(e,t){function I(e){var n,r,i,o,u,a,f,l,c,h,v,m=e.target,y=rt(m);if(y=y&&y.to)l=p(m),c=s(m),h=c.ctx,v=h.onBeforeChange,i=X(m),n=_[i],u=p.isFunction(i)?i(m):n?l[n]():l.attr(i),(!v||!(r=v.call(c,e)===g))&&u!==t&&(a=d.converters[y[2]],f=y[0],y=y[1],o={src:m,tgt:f,cnvtBack:a,path:y},a&&(u=a.call(c,u,o)),u!==t&&f&&(T(f).setProperty(y,u),h.onAfterChange&&h.onAfterChange.call(o,e)),e.stopPropagation()),r&&e.stopImmediatePropagation()}function q(t){var n,r=e.getComputedStyle,i=t.currentStyle||r(t,"");return i.display==="none"&&(n=h.createElement(t.nodeName),h.body.appendChild(n),i=(r?r(n,""):n.currentStyle).display,h.body.removeChild(n)),i}function R(e,n,r,i){var s,o,u,a,f,l,c,v=this,m=v.src,b=v.tgt,E=p(b),S=v.view,x=S.ctx,T=x.onBeforeChange,N=n;n=!i&&n;if((!T||!n||T.call(v,e,n)!==g)&&(!n||e.data===n.path)){a=r.call(v,m,S,d,i||V),s=v.attr||X(b,y),c=v.tagCtx,p.isFunction(a)&&(a=a.call(m)),s==="visible"&&(s="css-display",a=a?q(b):"none"),l=s==="none",n&&c&&c.tag.onUpdate&&(l=c.tag.onUpdate.call(c,e,n,v)===g||l);if(l)return;if(f=s.lastIndexOf("css-",0)===0&&s.substr(4))(u=p.style(b,f)!==a)&&p.style(b,f,a);else{if(s==="value"){if(b.type==="radio"){if(b.value!==""+a)return;a=s="checked"}b.type===w&&(s="checked",a=a?s:t)}else if(S._leafBnd&&S._nextNode){var C=b.parentNode,k=b.nextSibling;k.nodeType===3?k.nodeValue!==a&&(C.insertBefore(h.createTextNode(a),k),C.removeChild(k)):C.insertBefore(h.createTextNode(a),k)}o=_[s];if(o){if(u=E[o]()!==a)s==="html"?(U(E,a),N&&S.link(m,t,b)):E[o](a),b.nodeName.toLowerCase()==="input"&&E.blur()}else(u=E.attr(s)!=a)&&E.attr(s,a===t||a===""?null:a)}n&&u&&x.onAfterChange&&x.onAfterChange.call(v,e,n)}}function U(e,t){var n,r,i,s=e[0],o=rt(s,L);if(n=o.length){view=p.view(s);while(n--)r=o[n],r.parent===view&&view.removeViews(r.key)}e.empty().append(t)}function z(e,t){var n=this.ctx,r=n.onBeforeChange;if(!r||r.call(this,e,t)!==g)this._onDataChanged(t),n.onAfterChange&&n.onAfterChange.call(this,e,t)}function W(e){var n,r=e.data,i=e._onArrayChange,s=e._leafBnd;e._useKey||(i&&(p([i[1]]).off(O,i[0]),e._onArrayChange=t),r&&(n=function(){e.data!==t&&z.apply(e,arguments)},p([r]).on(O,n),e._onArrayChange=[n,r])),s&&!r&&G(s)}function X(e,t){var n=d.merge[e.nodeName.toLowerCase()];return n?t?n.to.toAttr:n.from.fromAttr:t?"text":""}function V(e){return e}function $(e,t,n,r,i,s,o){return J(this,e,t,n,r,i,s,o)}function J(e,n,r,o,u,a,f,l){if(!e)return;n=n.jquery?n:p(n),i||(i=h.body,p(i).on(M,I));var c,d,v,m,b=et;return p.each(n,function(){m=this;if(""+e===e)return Z(e,m,s(m),r,o,y);u=u||s(m);if(e.markup!==t)u.link===g&&(o=o||{},o.link=b=g),o&&o.target==="replace"&&(v=m.parentNode,o.target=t),c=e.render(r,o,u,t,t,t,b),v?(a=m.previousSibling,f=m.nextSibling,p(m).replaceWith(c),m=v):(a=f=t,U(p(m),c));else if(e!==y)return;u.link(r,o,m,a,f,l)}),n}function K(e,n,r,i,s,o){function u(r,i){return l!==t&&(n.to=[r,i,l]),a=S(r),G(e,r,i),e.push([r,i,c]),a?p([r]).on(O,c):typeof r=="object"&&p(r).on(A,b,i,c),r}var a,f,l=s.to,c=function(n,o,u){i.dynCtx=r.ctx,R.call(r,n,o,s,u),!o&&(f=r.tagCtx)&&(f.tag.onBeforeLink&&f.tag.onBeforeLink.call(f,r),e.linkCtx=r),i.dynCtx=t};c(t,o,u)}function Q(e,n,r){arguments.length||(i&&(p(i).off(M,I),i=t),e=y,n=h.body),n&&(n=n.jquery?n:p(n),e===y?p.each(n,function(){ut(this);var e=this.getElementsByTagName("*"),t=e.length;while(t--)ut(e[t])}):e===t?p.each(n,function(){ut(this)}):""+e===e&&p.each(n,function(){var n,i,s,u,a,l,c,h=this,p=h&&rt(h);if(p){c=p.link,e=Y(e,h);while(n=o.exec(e)){l=n[1],s=n[2];if(n[6]&&!l&&(u=/^.*:([\w$]*)$/.exec(n[9]))){u=u[1];if(a=u.length)s=s.slice(0,-a-1)+f}(i=c[l+s])&&G(i,r)&&u!==t&&!l&&u!==t&&(p.to=t)}}}))}function G(e,n,r){var i,s=0,o=e.length;while(o-->0)i=e[o],n!==t&&n!==i[0]||r!==t&&r!==i[1]||(S(i[0])?p([i[0]]).off(O,i[2]):p(i[0]).off(A,i[2]),e.splice(o,1),s++);return s}function Y(e,t){return e=p.trim(e),e.charAt(e.length-1)!=="}"?e=a+":"+e+(X(t)?":":"")+f:e}function Z(e,n,r,i,s,a){var c,h,p,v,m,g,w,E,S,x,T,N;if(e&&n){w=r._lnk++,c=r.links||r.tmpl.links,h=it(n,k),m=rt(n);if(!(p=c[w])){p=c[w]={},e=Y(e,n);while(v=o.exec(e)){g=v[1],x=v[2],E=t;if(v[6]){if(!g&&(E=/^.*:([\w$]*)$/.exec(v[9]))){E=E[1];if(S=E.length)x=x.slice(0,-S-1)+f}E===b&&(E=t)}N=g+x,p[N]=T=d._tmplFn(u+x+l,t,y),!g&&E!==t&&(T.to=E),T.attr=g}}for(N in p)T=p[N],K(binding=h[N]=h[N]||[],m,{linkTag:N,src:i||r.data,tgt:n,view:r,ctx:s,attr:T.attr},r,T,a);return h}}function et(e,t,n,r){var i,s,o=t.tag,u="i",a="/i";return o||(o=F.exec(t.markup),o=t.tag=(o||(o=F.exec(e)))&&o[1]),r&&(u=(t.bound?"!"+t.key:"")+":"+r,a="/t"),/^(option|optgroup|li|tr|td)$/.test(o)?(i="<"+o+' jsvtmpl="',i+u+'"/>'+p.trim(e)+i+a+'"/>'):"<!--jsv"+u+"-->"+e+"<!--jsv"+a+"-->"}function tt(e,t,n,r,i,s,o){var u,a,f,l,c,h=!e._prevNode,d=e.parentElem;if(t&&""+t!==t){a=r[t-1];if(!a)return;f=h?a._after:o?a._nextNode:e._prevNode}else f=h?e._preceding||e.parent._preceding:e._prevNode;if(f&&f.parentNode!==d)return g;u=n.render(i,s,e,!o||t,e._useKey&&!o),f?(l=f.nextSibling,p(f).after(u),f=f.nextSibling):(l=d.firstChild,p(d).prepend(u),f=d.firstChild),c=f&&f.previousSibling,d.removeChild(f),d.removeChild(l?l.previousSibling:d.lastChild),e.link(i,s,d,c,l,t)}function nt(e,n,i,s,o,u){function c(s,o,l,p){var d,m,g,w,E,S,x,T,C,k,A,O,M,_,D,P,H,B;p||(k=Z(s.getAttribute(N),s,a,e,n)),m=o&&o.nextSibling||s.firstChild;while(m&&m!==l){w=m.nodeType,g=w===1&&m,x=m.nextSibling;if(g&&(B=m.getAttribute("jsvtmpl"))||w===8&&(B=m.nodeValue.split("jsv")[1])){C=B.charAt(0)!=="/"&&B,g&&(g=m.tagName,s.removeChild(m),m=b);if(!C)return a._nextNode=m,g&&B==="/i"&&i.insertBefore(a._after=h.createTextNode(""),x),g&&B==="/t"&&x&&x.tagName&&x.getAttribute("jsvtmpl")&&i.insertBefore(h.createTextNode(""),x),(T=a.ctx.onAfterCreate)&&T.call(a,a),x;(bind=B.charAt(0)==="!")?(B=B.split(":"),C=B[1],_=a.tmpl.tmpls[parseInt(B[0].slice(1))],O=f[C],A=O._leafBnd=O._leafBnd||[],K(A,A,{linkTag:_.markup,src:O.data||e,tgt:m,view:O,ctx:n,attr:_.fn.attr},O,_.fn,y)):C=C.slice(1),E=C||u++,S=S||it(s,L),d=f[E],d.link||(d.parentElem=s,v(d,r),S&&S.push(d),d.parent&&(d._useKey&&(d.nodes=[],d._lnk=0),W(d)),d._prevNode=m,d.tmpl.presenter&&(d.presenter=new d.tmpl.presenter(d.ctx,d))),g&&C&&(d._preceding=x.previousSibling,S.elLinked=!!g),x=d.link(t,t,s,x.previousSibling)}else{p&&a.parent&&a.nodes&&a.nodes.push(m);if(g){M=c(g);for(D in M)D=M[D],(H=D.linkCtx)&&(P=H.tagCtx.tag.onAfterLink)&&P.call(H.tagCtx,H)}}m=x}return k}var a=this,f=a.views,l=h.body;return u=u||0,i=""+i===i?p(i)[0]:i.jquery?i[0]:i||a.parentElem||l,c(i,s,o,y)}function rt(e,t){var n,r=p.cache[e[p.expando]];return r=r&&r.data,n=r&&r[C],t?n&&n[t]||[]:n}function it(e,t){return(rt(e)||p.data(e,C,{view:[],link:{}}))[t]}function st(e){return e.type===w?e.checked:p(e).val()}function ot(e){if(""+e===e){var t=e.split("[");e=x[t.shift()];while(e&&t.length)e=e.tmpls[t.shift().slice(0,-1)]}return e}function ut(e){var n,r,i,o,u,a,f=rt(e);if(f){a=f.link;for(i in a)G(a[i]);a=f.view;if(n=a.length){o=s(e);while(n--)u=a[n],u.parent===o&&o.removeViews(u.key,t,y)}p.removeData(e,C)}}var n="v1.0pre",r,i,s,o,u,a,f,l,c,h=e.document,p=e.jQuery,d=p.views,v=p.extend,m=d.sub,g=!1,y=!0,b=null,w="checkbox",E=d.View(d.helpers),S=p.isArray,x=d.templates,T=p.observable,N="data-link",C="_jsvData",k="link",L="view",A="propertyChange",O="arrayChange",M="change.jsv",_={value:"val",input:"val",html:"html",text:"text"},D={from:{fromAttr:"value"},to:{toAttr:"value"}},P=p.cleanData,H=d.delimiters,B=d.error,j=/^jsvi|^jsv:/,F=/^\s*<(\w+)[>\s]/;if(!p)throw"requires jQuery";if(!d)throw"requires JsRender";m.onStoreItem=function(e,t,n,r){n&&e===x&&(n.link=$,t&&(p.link[t]=function(){return $.apply(n,arguments)}))},r={refresh:function(e){var t,n=this,r=n.parent,i=n.tmpl=ot(n.tmpl);return r&&(t=!r._useKey&&n.index,p(n.nodes).remove(),n.removeViews(),n.nodes=[],tt(n,t,n.tmpl,r.views,n.data,e),W(n)),n},addViews:function(e,t,n){var r,i=this,s=i.views;if(!i._useKey&&t.length&&(n=ot(n||i.tmpl))){r=s.length+t.length;if(tt(i,e,n,s,t,i.ctx,y)!==g)while(++e<r)T(s[e]).setProperty("index",e)}return i},removeViews:function(e,n,r){function i(e,n){var i,s,o,u,a=l[e];if(a){s=a._prevNode,o=a._nextNode,u=s?[s]:a.nodes,n=n||rt(a.parentElem,L),i=n.length,i&&a.removeViews(t,t,r);while(i--)if(n[i]===a){n.splice(i,1);break}if(!r){while(s&&s.parentNode&&s!==o)s=s.nextSibling,u.push(s);a._after&&u.push(a._after),p(u).remove()}a.data=t,W(a)}}var s,o,u,a=this,f=!a._useKey,l=a.views;f&&(o=l.length,u=rt(a.parentElem,L));if(e===t)if(f){s=o;while(s--)i(s,u);a.views=[]}else{for(e in l)i(e);a.views={}}else{n===t&&(f?n=1:(i(e),delete l[e]));if(f&&n){s=e+n;while(s-->e)i(s,u);l.splice(e,n);if(o=l.length)while(e<o)T(l[e]).setProperty("index",e++)}}return this},content:function(e){return e?p(e,this.nodes):p(this.nodes)},link:nt,_onDataChanged:function(e){if(e){var t=this,n=e.change,r=e.index,i=e.items;switch(n){case"insert":t.addViews(r,i);break;case"remove":t.removeViews(r,i.length);break;case"move":t.refresh();break;case"refresh":t.refresh()}}return y},_onRender:et},v(d,{linkAttr:N,merge:{input:{from:{fromAttr:st},to:{toAttr:"value"}},textarea:D,select:D,optgroup:{from:{fromAttr:"label"},to:{toAttr:"label"}}},delimiters:function(){var e=H.apply(H,arguments);return u=e[0],a=e[1],f=e[2],l=e[3],c=e[4],o=new RegExp("(?:^|\\s*)([\\w-]*)("+a+d.rTag+")"+f+")","g"),this}}),v(p,{view:s=function(e,t){var n,r,i,o,u,a,f=h.body;if(!e||e===f||E._useKey<2)return E;a=e=""+e===e?p(e)[0]:e.jquery?e[0]:e;if(t){u=e.nextSibling||e.parentNode;while(u!==(e=e.firstChild||e.nextSibling||e.parentNode.nextSibling))if(e.nodeType===8&&j.test(e.nodeValue)){n=s(e);if(n._prevNode===e)return n}return}while(!(r=rt(u=e.parentNode||f,L)).length){if(!u||e===f)return it(f,L).push(E),E;e=u}if(r.elLinked){i=r.length;while(i--){n=r[i],o=n.nodes&&n.nodes.length;while(o--)if(n.nodes[o]===e)return n}}else while(e){if(e===u)return n;if(e.nodeType===8)if(/^jsv\/[it]$/.test(e.nodeValue)){i=r.length;while(i--){n=r[i];if(n._nextNode===e){if(e===a)return n;e=n._prevNode;break}}}else if(j.test(e.nodeValue)){i=r.length;while(i--){n=r[i];if(n._prevNode===e)return n}}e=e.previousSibling}return s(u)},link:J,unlink:Q,cleanData:function(e){var t=e.length;while(t--)ut(e[t]);P.call(p,e)}}),v(p.fn,{link:function(e,t,n,r,i,s,o){return J(e,this,t,n,r,i,s,o)},unlink:function(e,t){return Q(e,this,t)},view:function(){return s(this[0])}}),d.delimiters(),v(E,{tmpl:{},_lnk:0,links:[]}),v(E,r)}(this),function(e,t){var n={init:function(e){return this},show:function(t){var n=e.extend({speed:400,displayType:"inherit"},t);return this.css("display",n.displayType).animate({opacity:1},n.speed)},hide:function(t){var n=e.extend({speed:400,displayType:"none"},t);return this.animate({opacity:0},n.speed,function(){e(this).css("display",n.displayType)})}};e.fn.fade=function(t){if(n[t])return n[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return n.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.fade")}}(jQuery),function(){var e=Object.prototype.toString,t="[object Function]";Array.prototype.forEach||(Array.prototype.forEach=function(n,r){var i=0,s,o;if(e.call(n)!==t)throw new TypeError("The first argument to forEach needs to be a function.");s=Object(this),o=s.length>>>0;while(i<o)i in s&&n.call(r,s[i],i,s),i++}),Array.prototype.filter||(Array.prototype.filter=function(n,r){var i=0,s,o,u,a;if(e.call(n)!==t)throw new TypeError("The first argument to filter needs to be a function.");s=Object(this),o=s.length>>>0,a=[];while(i<o)i in s&&(u=s[i],n.call(r,u,i,s)&&a.push(u)),i++;return a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(this===null)throw new TypeError;var n=Object(this),r=n.length>>>0,i=Number(t),s;if(r===0)return-1;i!==i?i=0:i!==0&&i!==Infinity&&i!==-Infinity&&(i=(i>0||-1)*Math.floor(Math.abs(i)));if(i>=r)return-1;s=i>=0?i:Math.max(r-Math.abs(i),0);for(;s<r;s++)if(s in n&&n[s]===e)return s;return-1}),Array.prototype.map||(Array.prototype.map=function(e,n){var r,i,s,o,u,a,f;if(this==null)throw new TypeError(" this is null or not defined");o=Object(this),u=o.length>>>0;if({}.toString.call(e)!=t)throw new TypeError(e+" is not a function");n&&(r=n),i=new Array(u),s=0;while(s<u)s in o&&(a=o[s],f=e.call(r,a,s,o),i[s]=f),s++;return i}),Array.prototype.stableSort=function(e){var t=this.map(function(e,t){return{i:t,v:e}});return t.sort(function(t,n){var r=e(t.v,n.v);return r===0?t.i-n.i:r}),t.map(function(e){return e.v})}}(),function(e){var t=e.Date.prototype.toString,n=e.Date.parse,r={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ampm:["AM","PM"],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"}},i=function(e,t,n){return n=n?n:"0",e+="",t+1>=e.length&&(e=Array(t+1-e.length).join(n)+e),e},s=function(e,t){return e+="",e.substr(e.length-t)},o=function(e,t){return s(i(e,t,"0"),t)},u=function(e){return e%=12,e===0?12:e},a=function(e){return e.split("").reverse().join("")},f=function(e){return"\\"+e.split("").join("\\")},l,c=function(e){var t=e.length,n,a,c,h;switch(e[0]){case"y":switch(t){case 3:return i(l.getFullYear(),t);case 1:return+s(l.getFullYear(),2)+"";default:return o(l.getFullYear(),t)};case"M":switch(t){case 4:return f(r.months[l.getMonth()]);case 3:return f(r.monthsAbbr[l.getMonth()]);case 2:return o(l.getMonth()+1,2);default:return s(l.getMonth()+1,2)};case"d":switch(t){case 4:return f(r.days[l.getDay()]);case 3:return f(r.daysAbbr[l.getDay()]);case 2:return o(l.getDate(),2);default:return s(l.getDate(),2)};case"h":if(t===2)return o(u(l.getHours()),2);return s(u(l.getHours()),2);case"H":if(t===2)return o(l.getHours(),2);return s(l.getHours(),2);case"m":if(t===2)return o(l.getMinutes(),2);return s(l.getMinutes(),2);case"s":if(t===2)return o(l.getSeconds(),2);return s(l.getSeconds(),2);case"t":if(t===2)return r.ampm[l.getHours()<12?0:1];return r.ampmAbbr[l.getHours()<12?0:1];case"z":n=-l.getTimezoneOffset()/60,a=n<0,a&&(n=-n),c=parseInt(n,10),h=(n-c)*60;if(t===3)return(a?"-":"+")+i(c,2)+":"+i(h,2);return(a?"-":"+")+i(c,t);case"/":return r.dateSeparator;case":":return r.timeSeparator}return""},h=function(e){return a(c(e))};e.Date.getLocaleValues=function(){return r},e.Date.setLocaleValues=function(e){var t;r=e,r.ampmAbbr=[r.ampm[0][0],r.ampm[1][0]],t=r.standard,t.f=t.D+" "+t.t,t.g=t.d+" "+t.t,t.G=t.d+" "+t.T},e.Date.prototype.toString=function(){if(arguments.length){var e=arguments[0];return e=r.standard[e]||e,e=e.replace(/'([^']*)'/g,function(e,t){return f(t)}),l=this,a(a(e).replace(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g,h).replace(/\\(?!\\)/g,""))}return t.apply(this,arguments)},e.Date.parse=function(e){return(e+"").substr(0,6)==="/Date("?parseInt(e.substr(6),10):n.apply(this,arguments)},e.Date.setLocaleValues(r),e.Date.now||(e.Date.now=function(){return+(new e.Date)})}(this),function(e,t){e.String.prototype.format=function(){var e,n=arguments;return n&&n.length===1&&n[0]&&typeof n[0]=="object"?(n=n[0],this.replace(/\{[_a-zA-Z\d]+\}/g,function(t,r){return e=t.substring(1,t.length-1),n.hasOwnProperty(e)?n[e]:t})):this.replace(/\{(\d+)\}/g,function(e,r){return n[r]!==t?n[r]:e})}}(this),function(e,t){function n(e){var t=[],n;for(n in e)e.hasOwnProperty(n)&&t.push(n);return t}function r(e,t){var r=n(t),i=r.length,s,o;for(s=0;s<i;s++)o=r[s],e[o]=t[o]}function i(e,t,n){if(!e||!t)return n;var r=e,i=t.split("."),s=i.length,o,u;for(o=0;o<s;o++){u=i[o],r=r[u];if(!r)return n}return r}(function(t){function s(e,t,n){var i=e,s=t.split("."),o,u,a;for(o=0,u=s.length;o<u;o++)a=s[o],i[a]||(i[a]={}),i=i[a];return n&&r(i,n),i}function o(t,n){return s(e,t,n)}function u(e,t){return i(n,e,t)}e[t]||(e[t]={});var n=e[t];n.Namespace||(n.Namespace={}),r(n,{exists:u}),r(n.Namespace,{defineWithParent:s,define:o})})("Shell"),function(e){function t(e,t,n){return e=e||function(){},t&&r(e.prototype,t),n&&r(e,n),e}function n(e,n,i,s){if(e){n=n||function(){};var o=e.prototype,u=function(){};return u.prototype=o,n.prototype=new u,n.prototype._super=o,n.prototype.constructor=n,i&&r(n.prototype,i),s&&r(n,s),n}return t(n,i,s)}function i(e){e=e||function(){};var t,n;for(t=0,n=arguments.length;t<n;t++)r(e.prototype,arguments[t]);return e}e.Namespace.define("Shell.Class",{define:t,derive:n,mix:i})}(Shell)}(this),function(e,t,n,r){(function(){function w(e,n,r){var i=t.Utilities.repeatString("&nbsp;",n*4),s,o="",u,a;if(e===null)return i+"[null]";if(typeof e=="undefined")return i+"[undefined]";if(n>r)return i+"[...]";for(s in e)u=e[s],o+=i+s+": ",a=typeof u,a==="function"?o+=" [function]":u===null?o+=" [null]":a==="object"?o+="<br/>"+w(u,n+1,r):o+=" "+t.Utilities.htmlEncode(u.toString()),o+="<br/>";return o}function E(e){if(!e)return Math.floor(Math.random()*16).toString(16);var t="",n;for(n=0;n<e;n++)t+=E();return t}var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;i=t.Class.define(function(e,t,n){this.detail=t,this.target=n,this.timeStamp=Date.now(),this.type=e},{bubbles:!1,cancelable:!1,target:null,timeStamp:null,type:null,isDefaultPrevented:function(){return this._preventDefaultCalled},preventDefault:function(){this._preventDefaultCalled=!0},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=!0},stopPropagation:function(){}}),s={_listeners:null,addEventListener:function(e,t,n){n=n||!1,this._listeners=this._listeners||{};var r=this._listeners[e]=this._listeners[e]||[],i,s,o;for(i=0,s=r.length;i<s;i++){o=r[i];if(o.useCapture===n&&o.listener===t)return}r.push({listener:t,useCapture:n})},dispatchEvent:function(e,t){var n=new i(e,t,this),r=this._listeners&&this._listeners[e],s,o;if(r){r=r.slice(0,r.length);for(s=0,o=r.length;s<o&&!n._stopImmediatePropagationCalled;s++)r[s].listener(n)}return n.defaultPrevented||!1},removeEventListener:function(e,t,n){n=n||!1;var r=this._listeners&&this._listeners[e],i,s,o;if(r)for(i=0,s=r.length;i<s;i++){o=r[i];if(o.listener===t&&o.useCapture===n){r.splice(i,1),r.length===0&&delete this._listeners[e];break}}}},o=function(e){if(e===r||e===null)return"";var t=n("<div />");return t.text(e).html()},u=function(e){return e.replace(/[^a-zA-Z0-9\.:\-\/]/g,"").replace(/\//g,"&#x2F;")},a=function(e){return e.replace(/'/g,"&#39;").replace(/\"/g,"&quot;")},f=function(e,t){return(new Array(t)).join(e)},l=function(e){if(e===null)return"[null]";switch(typeof e){case"undefined":return"[undefined]";case"object":return w(e,0,5);case"function":return"[function]";default:return n("<div/>").text(e).html()}},c=function(e){return n("<div/>").html(e).text()},h=function(){var e,t=new Date,n;try{return typeof Storage=="undefined"?!1:((e=window.localStorage).setItem(t,t),n=e.getItem(t)==t,e.removeItem(t),n)}catch(r){return!1}},p=function(){try{return e.document.activeElement}catch(t){return e.document.body}},d=function(e){try{return e.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}},v=function(e){for(var t in e)if(!t.match(/^jQuery\d+$/))return!1;return!0},m=function(){var e=(128+Math.floor(Math.random()*64)).toString(16);return E(8)+"-"+E(4)+"-4"+E(3)+"-"+e+E(2)+"-"+E(12)},g=function(e){return typeof e!="string"||e===null?"":e.split("?",1)[0]},y=function(e,t){return e===null?t===null?0:-1:t===null?1:e>t?1:e<t?-1:0},b=function(e){return Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object Array]"},t.Namespace.defineWithParent(t,"Utilities",{eventMixin:s,htmlEncode:o,attributeEncode:u,attributeEncodeProperlyQuotedAttribute:a,htmlEncodeVariable:l,htmlDecode:c,isLocalStorageAvailable:h,getDocumentActiveElement:p,getBBoxOrDefaultSVGRect:d,isEmptyObject:v,newGuid:m,repeatString:f,stringCompare:y,removeQueryString:g,isArray:b})})(),function(){function g(e){var t=[],n;for(n in e)e.hasOwnProperty(n)&&t.push(n);return t}function y(e){return typeof e=="object"&&e&&typeof e.then=="function"}function b(e,t,n){var r,i,s,o,u;for(r=0,i=t.length;r<i;r++){s=t[r],o=s.promise,u=s.onComplete;try{u?o._complete(u(n)):o._complete(n)}catch(a){Shell.Diagnostics.Log.writeEntry("Shell.Utilities.promise._exception",a.toString(),Shell.Diagnostics.LogEntryLevel.error),o._exception(a)}}}function w(e,t,n){var r,i,s,o,u;for(r=0,i=t.length;r<i;r++){s=t[r],o=s.promise,u=s.onError;try{u?o._handledError(n,e,u):o._chainedError(n,e)}catch(a){o._exception(a)}}}function E(e){return function(n,s){if(this._state!==o)return;this._value=n,this._state=f;if(r._listeners&&r._listeners[i]){var u=e(this,n,s);t.Promise.dispatchEvent(i,u)}this._notify(),this._cleanup()}}function S(e,t,n){var r=n._isException,i=n._errorId;return e._isException=r||!1,e._errorId=i,{exception:r?t:null,error:r?null:t,promise:e,id:i,parent:n}}function x(e,t){return e._isException=!1,e._errorId=++s,{error:t,promise:e,id:e._errorId}}function T(e,t){return e._isException=!0,e._errorId=++s,{exception:t,promise:e,id:e._errorId}}var n=t.Class.mix(t.Class.define(null),t.Utilities.eventMixin),r=new n,i="error",s=0,o=0,u=1,a=2,f=3,l=4,c=f,h,p,d,v,m;h=t.Class.define(null,{_listeners:null,_state:o,_value:null,_cancel:function(){switch(this._state){case f:case l:case a:return;case o:this._error(new Error("Canceled"));break;case u:this._state=a,typeof this._value.cancel=="function"&&this._value.cancel()}this._cleanup()},_complete:function(e){if(this._state!==o)return;this._value=e;if(y(e)){this._state=u;var t=this;e.then(function(e){t._state=o,t._complete(e)},function(n){t._state=o,e instanceof h?t._chainedError(n,e):t._error(n)},function(e){t._progress(e)})}else this._state=l,this._notify();this._cleanup()},_handledError:function(e,n,s){r._listeners&&r._listeners[i]&&t.Promise.dispatchEvent(i,{exception:n._isException?e:null,error:n._isException?null:e,promise:this,handler:s,id:n._errorId,parent:n}),this._complete(s(e))},_chainedError:E(S),_error:E(x),_exception:E(T),_notify:function(){var e=this._listeners;this._listeners=null;if(e)switch(this._state){case l:b(this,e,this._value);break;case f:w(this,e,this._value)}},_progress:function(e){if(this._state>=c)return;if(this._listeners){var t,n,r,i;for(t=0,n=this._listeners.length;t<n;t++){r=this._listeners[t],i=r.onProgress;try{i&&i(e)}catch(s){}!r.onComplete&&!r.onError&&r.promise._progress(e)}}},then:function(e,t,n){this._listeners=this._listeners||[];var r=new p(this);return this._listeners.push({promise:r,onComplete:e,onError:t,onProgress:n}),this._state>=c&&this._notify(),r}}),p=t.Class.derive(h,function(e){this._creator=e},{_cleanup:function(){this._creator=null},cancel:function(){this._creator&&this._creator.cancel(),this._cancel()}}),d=t.Class.derive(h,function(e){this._complete(e)},{_cleanup:function(){},cancel:function(){}}),v=t.Class.derive(h,function(e){this._error(e)},{_cleanup:function(){},cancel:function(){}}),m=t.Class.derive(h,function(e,t){this._onCancel=t;try{var n=this;e(function(t){n._complete(t)},function(t){n._error(t)},function(t){n._progress(t)})}catch(r){this._exception(r)}},{_cleanup:function(){this._onCancel=null},cancel:function(){this._onCancel&&this._onCancel(),this._cancel()}},{addEventListener:function(e,t,n){r.addEventListener(e,t,n)},any:function(e){return new m(function(t,n,r){var i=g(e);i.length===0&&t(),i.forEach(function(r){m.as(e[r]).then(function(){t({key:r,value:e[r]})},function(){n({key:r,value:e[r]})})})},function(){var t=g(e);t.forEach(function(t){var n=m.as(e[t]);typeof n.cancel=="function"&&n.cancel()})})},as:function(e){return y(e)?e:new d(e)},dispatchEvent:function(e,t){return r.dispatchEvent(e,t)},is:function(e){return y(e)},join:function(e){return new m(function(t,n,r){var i=g(e),s=Array.isArray(e)?[]:{},o=Array.isArray(e)?[]:{},u=i.length,a=function(e){--u===0?g(s).length===0?t(o):n(s):r({Key:e,Done:!0})};i.forEach(function(t){m.then(e[t],function(e){o[t]=e,a(t)},function(e){s[t]=e,a(t)})})},function(){g(e).forEach(function(t){var n=m.as(e[t]);typeof n.cancel=="function"&&n.cancel()})})},removeEventListener:function(e,t,n){r.removeEventListener(e,t,n)},then:function(e,t,n,r){return m.as(e).then(t,n,r)},thenEach:function(e,t,n,r){var i=Array.isArray(e)?[]:{};return g(e).forEach(function(s){i[s]=m.as(e[s]).then(t,n,r)}),m.join(i)},timeout:function(n){n||(n=5);var r=0;return new t.Promise(function(t){r=e.setTimeout(t,n)},function(){r&&e.clearTimeout(r)})},wrap:function(e){return new d(e)},wrapError:function(e){return new v(e)}}),t.Namespace.define("Shell",{Promise:m})}(),function(){function r(e){var t=typeof e;return t==="object"&&e instanceof Array&&(t="array"),t}function i(e,t){var n,s=[],o=[];if(e===t)return!0;switch(r(e)){case"array":if(r(t)!=="array")return!1;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0;case"object":if(r(t)!=="object")return!1;for(n in e)s.push(n);for(n in t)o.push(n);if(!i(s.sort(),o.sort()))return!1;for(n in e)if(!i(e[n],t[n]))return!1;return!0}return!1}function s(t){if(!t||typeof t!="string")throw"uri must be valid";e=e||n("<div></div>").hide().appendTo("body"),e.empty();var r=n("<iframe></iframe>").appendTo(e).attr({src:t});return r}var e;t.Namespace.define("Shell.Utilities",{deepEquals:i,download:s})}(),function(){function e(t){if(!t)return Math.floor(Math.random()*16).toString(16);var n="",r;for(r=0;r<t;r++)n+=e();return n}function n(){var t=(128+Math.floor(Math.random()*64)).toString(16);return e(8)+"-"+e(4)+"-4"+e(3)+"-"+t+e(2)+"-"+e(12)}t.Namespace.define("Shell.Utilities",{newGuid:n})}(),function(){function r(){return e}var e=n("input[name=__RequestVerificationToken]").val();e&&n.ajaxPrefilter(function(t,n,r){r.setRequestHeader("__RequestVerificationToken",e)}),t.Namespace.define("Shell.Utilities",{getAntiForgeryId:r})}()}(this,Shell,jQuery),function(e,t,n,r){var i;i=t.Class.define(function(e){this._parse(e)},{_parameters:null,_parse:function(t){var n,r,i,s;this._parameters=[];if(t&&t.replace(/\s/g,"").length){t[0]==="?"&&(t=t.substr(1));if(t){s=t.split("&");for(r=0,i=s.length;r<i;r++)n=s[r].split("="),this._parameters.push({key:e.decodeURIComponent(n[0]),value:n.length>1?e.decodeURIComponent(n[1]):""})}}},_findParameterIndex:function(t){var n,r;t=e.decodeURIComponent(t).toLowerCase();for(n=0,r=this._parameters.length;n<r;n++)if(this._parameters[n].key.toLowerCase()===t)return n;return-1},_setValue:function(t,n){var i;if(!t)throw"Key cannot be null nor empty.";if(n===null||n===r)throw"Value cannot be null. To remove a key use remove method.";i=this._findParameterIndex(t),i>=0?this._parameters[i].value=e.decodeURIComponent(n):this._parameters.push({key:e.decodeURIComponent(t),value:e.decodeURIComponent(n)})},getParameters:function(){return n.merge([],this._parameters)},getValue:function(e,t){var n=this._findParameterIndex(e);return n>=0?this._parameters[n].value:t},set:function(e){var t;for(t in e)this._setValue(t,e[t]);return this},remove:function(e){var t=this,r;return n.each(n.makeArray(arguments),function(){r=t._findParameterIndex(this),r>=0&&t._parameters.splice(r,1)}),this},containsKey:function(e){return this._findParameterIndex(e)>=0},toString:function(t){var r=t?"?":"",i="{0}={1}";return r+n.map(this._parameters,function(t){return i.format(e.encodeURIComponent(t.key),e.encodeURIComponent(t.value))}).join("&")}}),t.Namespace.define("Shell.Utilities",{QueryStringBuilder:i})}(this,Shell,jQuery),function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v;n=e.Class.define(function(){},{_children:[],getLinkIdPrefix:function(){return n._linkIdPrefix},setChildren:function(e){this._children=e},parse:function(e){return this._parseInternal(e,!1)},parseTextOnly:function(e){return this._parseInternal(e,!0)},_parseInternal:function(n,r){var i=[],s="",o=n||"",u,a,f,l,c;for(;;){for(f=0;f<this._children.length;f++)i[f]===t&&(i[f]=this._children[f]._match(o)),i[f]&&(!u||i[f].index<u.index)&&(u=i[f],a=this._children[f]);c=u?u.index:o.length,r?s+=o.substring(0,c):s+=e.Utilities.htmlEncode(o.substring(0,c));if(!u)break;r?s+=a._getTextOutput(u):s+=a._getOutput(u),l=u.index+u[0].length,o=o.substring(l);for(f=0;f<this._children.length;f++)i[f]&&(i[f].index<l?i[f]=t:i[f].index-=l);u=t}return s},_match:function(e){return null},_getOutput:function(e){},_getTextOutput:function(e){}},{_linkIdPrefix:"__fxshell-link-id-"}),r=e.Class.derive(n,function(){},{_match:function(e){var t=new RegExp("\\[([^|\\[\\]]+?(?:\\|[^|\\[\\]]+?){1,3})\\]");return t.exec(e)},_getOutput:function(t){var r=t[1].split("|"),i,s;return s='<a id="'+e.Utilities.attributeEncode(n._linkIdPrefix+r[0]),i=r.length>=3?e.Utilities.attributeEncode(encodeURI(r[2])):"#",s+='" href="'+i+'"',r.length>=4?s+=' target="'+e.Utilities.attributeEncode(r[3])+'">':s+=">",s+=this.parse(r[1]),s+="</a>",s},_getTextOutput:function(e){var t=e[1].split("|");return this.parseTextOnly(t[1])}}),i=e.Class.derive(n,function(){},{_match:function(e){var t=new RegExp("__(([^_]+)|([^_]*_[^_]*)*?)__");return t.exec(e)},_getOutput:function(e){var t="<strong>";return t+=this.parse(e[1]),t+="</strong>",t},_getTextOutput:function(e){return this.parseTextOnly(e[1])}}),s=e.Class.derive(n,function(){},{_match:function(e){var t=new RegExp("\\'\\'(([^\\']+)|([^\\']*\\'[^\\']*)*?)\\'\\'");return t.exec(e)},_getOutput:function(e){var t="<em>";return t+=this.parse(e[1]),t+="</em>",t},_getTextOutput:function(e){return this.parseTextOnly(e[1])}}),o=e.Class.derive(n,function(){},{_match:function(e){var t=/%%%/;return t.exec(e)},_getOutput:function(e){return"<br />"},_getTextOutput:function(e){return"\n"}}),a=new i,f=new s,l=new r,c=new o,h=new n,l.setChildren([a,f]),a.setChildren([c,l,f]),f.setChildren([c,l,a]),h.setChildren([a,f,l,c]),p=new i,d=new s,v=new n,p.setChildren([c,d]),d.setChildren([c,p]),v.setChildren([p,d,c]),u={create:function(e,t){return t?v.parse(e):h.parse(e)},getLinkIdPrefix:function(){return h.getLinkIdPrefix()},getText:function(e){return h.parseTextOnly(e)}},e.Namespace.define("Shell.Utilities.SafeMarkup",u)}(Shell),function(e,t,n,r){t.bindingHandlers.activateWidget={init:function(t,n,r,i){var s=n(),o=r()["fxcontrol-options"]||{};e(t)[s](o)},update:function(e,t,n,r){}},t.bindingHandlers.safeMarkup={init:function(r,i,s,o){var u=t.utils.unwrapObservable(i()),a=s()["safeMarkup-options"]||{};e(r).html(n.Shell.Utilities.SafeMarkup.create(u,a.disableLinks))},update:function(r,i,s,o){var u=t.utils.unwrapObservable(i()),a=s()["safeMarkup-options"]||{};e(r).html(n.Shell.Utilities.SafeMarkup.create(u,a.disableLinks))}},t.extenders.validateEnum=function(e,n){var r,i;for(r in n)if(n.hasOwnProperty(r))break;return i=t.computed({read:e,write:function(t){var i=e(),s=t in n?t:r;s!==i&&e(s)}}),i(e()),i}}(jQuery,ko,this),function(e,t,n){function u(){return r.accountUrl}function a(){return r.applicationRoot}function f(){return r.developmentMode}function l(){return r.isOnPremMode}function c(){return r.isAdminMode}function h(){return r.navigationLinks}function p(){return r.portalVersion}function d(){return r.userEmailAddress}function v(){return r.userAccountType}function m(){return r.userFirstName}function g(){return!!r.userIsFisma}function y(){return r.branding}function b(){return r.enableHelpDrawer}function w(){return r.signOutLink}function E(){return r.feedbackLink}function S(){return r.isTelemetryEventDisabled}function x(){if(!s){s={};if(r.betaFeatures)for(var e=0;e<r.betaFeatures.length;e++)s[r.betaFeatures[e].extensionName]=r.betaFeatures[e].featureName}return s}function T(){return r.betaSignUpUrl}function N(){return r.productionPortalUrl}function C(){return r.pageRequestId}function k(){return i||(i=new t.Utilities.QueryStringBuilder(r.queryString)),i}function L(){return r.enableCustomerSupport}function A(){return r.customerSupportLanguages||[]}function O(){return o||(o=e.JSON.parse(r.extensionSettings)),o}var r={},i,s,o;e.environment&&(r=e.environment),t.Namespace.define("Shell.Environment",{getCustomParameters:k,getApplicationRoot:a,getDevelopmentMode:f,getIsOnPremMode:l,getIsAdminMode:c,getNavigationLinks:h,getPortalVersion:p,getUserEmailAddress:d,getUserAccountType:v,getUserFirstName:m,getUserIsFisma:g,getEnableHelpDrawer:b,getBranding:y,getSignOutLink:w,getFeedbackLink:E,getIsTelemetryEventDisabled:S,getBetaFeatures:x,getBetaSignUpUrl:T,getAccountUrl:u,getProductionPortalUrl:N,getPageRequestId:C,getCustomerSupportEnabled:L,getCustomerSupportLanguages:A,getExtensionSettings:O})}(this,Shell),function(e,t,n,r){var i,s,o,u,a={},f={},l="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",c=function(e){var t,n,r,i,s,o;a={};for(t in e)if(e.hasOwnProperty(t)){n=t.split("_"),r=n.length,o=a;for(s=0;s<r-1;s++){i=n[s];if(!i)throw"resource key '"+t+"' is not in the correct format";o=o[i]=o[i]||{}}o[n[r-1]]=e[t]}},h=function(e,r){var a,f,l;e||(e=(t.fx||{}).environment||{}),i=e.contentUrlBasePath,s=e.contentVersionToken,o=e.uxFxImageRoot,u=e.versionedContentRoots,i||(i="/"),u||(u=[]),s||(s=""),o||(o="/Content/Images");for(f=0;f<u.length;f++)a=u[f].toLowerCase(),a.charAt(0)==="/"&&(a=a.substr(1)),u[f]=a;n&&(r=r||n.getResources("fx"),l=n.getResources("fx.culture")||{},l.formats&&t.Date.setLocaleValues&&t.Date.setLocaleValues(l.formats)),r=r||{},c(r)},p=function(t){if(!t)throw"Control must be specified";var n=t.split("."),r,i,s;s=a;for(i=0;i<n.length;i++){r=n[i],s=s[r];if(!s)throw"Control "+t+" is not recognized"}return e.extend(!0,{},s)},d=function(e){return e.indexOf("://")!==-1||e.charAt(0)==="/"&&e.charAt(1)==="/"},v=function(){var e,t=arguments.length,n,r="";for(e=0;e<t;e++)n=arguments[e],n&&(r!==""&&(n.charAt(0)==="/"&&(n=n.substr(1)),r+="/"),e!==t-1&&n.charAt(n.length-1)==="/"&&(n=n.substr(0,n.length-1)),r+=n);return!d(r)&&r.charAt(0)!=="/"&&(r="/"+r),r},m=function(e){return v(o,e)},g=function(e){var t,n,r,o;e=e||"";if(!d(e)){if(s!==""){e.charAt(0)==="/"&&(e=e.substr(1)),t=e.toLowerCase();for(n=0;n<u.length;n++){r=u[n];if(t.indexOf(r)===0)if(t.length===r.length||t.charAt(r.length)==="/"){o=r;break}}o&&(e=v(e.substr(0,o.length),s,e.substr(o.length)))}e=v(i,e)}return e},y=function(e){if(!e)throw"Control must be specified";var t=f[e];if(!t)throw"Control "+e+" is not recognized";return t()};h(),f["fx.fxBalloonIcon"]=function(){return{icon:"dlwux-icon-help",iconHover:"dlwux-icon-help-hvr"}},f["fx.fxCheckBox"]=function(){return{checked:"dlwux-icon-checkbox-checked-16",unchecked:"dlwux-icon-checkbox-unchecked-16",checkedDisabled:"dlwux-icon-checkbox-checked-disabled-16",uncheckedDisabled:"dlwux-icon-checkbox-unchecked-disabled-16",editedChecked:"dlwux-icon-checkbox-edited-checked-16",editedUnchecked:"dlwux-icon-checkbox-edited-unchecked-16",editedCheckedDisabled:"dlwux-icon-checkbox-edited-checked-disabled-16",editedUncheckedDisabled:"dlwux-icon-checkbox-edited-unchecked-disabled-16"}},f["fx.fxDialog"]=function(){return{close:"dlwux-fx-dialog-close",closeHover:"dlwux-fx-dialog-close-hover",ok:"dlwux-fx-dialog-ok",okHover:"dlwux-fx-dialog-ok-hover"}},f["fx.fxDropdown"]=function(){return{arrow:"dlwux-fx-dropdown-arrow",arrowHover:"dlwux-fx-dropdown-arrow-hover"}},f["fx.fxGrid"]=function(){return{expanded:"dlwux-sprite-triangle-expanded",collapsed:"dlwux-sprite-triangle-collapsed",ascending:"dlwux-icon-sort-up",descending:"dlwux-icon-sort-down",filter:"dlwux-icon-search"}},f["fx.fxUpload"]=function(){return{icon:"dlwux-fx-upload-icon",iconHover:"dlwux-fx-upload-icon-hover"}},f["fx.fxCopyButton"]=function(){return{swf:g("Content/_oss/ZeroClipboard10.swf")}},f["fx.fxPager"]=function(){return{previous:"dlwux-pager-arrow-left",next:"dlwux-pager-arrow-right"}},f["fx.fxTreeView"]=function(){return{expanded:"dlwux-icon-chevron-expanded",collapsed:"dlwux-icon-chevron-collapsed"}},f["fx.fxTristateCheckBox"]=function(){return{checked:"dlwux-icon-checkbox-checked-16",indeterminate:"dlwux-icon-checkbox-indeterminate-16",unchecked:"dlwux-icon-checkbox-unchecked-16",checkedDisabled:"dlwux-icon-checkbox-checked-disabled-16",indeterminateDisabled:"dlwux-icon-checkbox-indeterminate-disabled-16",uncheckedDisabled:"dlwux-icon-checkbox-unchecked-disabled-16",editedChecked:"dlwux-icon-checkbox-edited-checked-16",editedIndeterminate:"dlwux-icon-checkbox-edited-indeterminate-16",editedUnchecked:"dlwux-icon-checkbox-edited-unchecked-16",editedCheckedDisabled:"dlwux-icon-checkbox-edited-checked-disabled-16",editedIndeterminateDisabled:"dlwux-icon-checkbox-edited-indeterminate-disabled-16",editedUncheckedDisabled:"dlwux-icon-checkbox-edited-unchecked-disabled-16"}},f["fx.fxUpload"]=function(){return{icon:"dlwux-fx-upload-icon",iconHover:"dlwux-fx-upload-icon-hover"}},f["fxs.fxsDialog"]=function(){return{complete:"dlwux-button-complete",close:"dlwux-icon-closex-10-g-idl"}},f["fxs.fxsDrawerProgress"]=function(){return{collapse:"dlwux-icon-drawer-chevron-collapse",dismiss:"dlwux-icon-drawer-dismissall"}},f["fxs.fxsHeaderBar"]=function(){return{expanderExpandImageUrl:"dlwux-fxs-headerbar-chevron-down",expanderCollapseImageUrl:"dlwux-fxs-headerbar-chevron-up"}},f["fxs.fxsNotification"]=function(){return{back:"dlwux-icon-progress-back-arrow",information:"dlwux-icon-drawer-information",warning:"dlwux-icon-drawer-warning",error:"dlwux-icon-drawer-error",details:"dlwux-icon-behavior-details"}},f["fxs.fxsProgressBox"]=function(){return{back:"dlwux-icon-progress-back-arrow",active:"dlwux-icon-drawer-processing-active",success:"dlwux-icon-progress-complete",warning:"dlwux-icon-drawer-warning",error:"dlwux-icon-drawer-error",stepActive:"dlwux-icon-progress-inprogress",stepSuccess:"dlwux-icon-progress-complete",stepWarning:"dlwux-icon-progress-warning",stepError:"dlwux-icon-progress-error",stepDetails:"dlwux-icon-progress-forward-arrow",details:"dlwux-icon-behavior-details"}},f["fxs.fxsWizard"]=function(){return{previous:"dlwux-button-previous",next:"dlwux-button-next",complete:"dlwux-button-complete",close:"dlwux-icon-closex-10-g-idl"}},f["fxs.fxsCopyButton"]=function(){return{initial:"dlwux-icon-copy",hover:"dlwux-icon-copy-hover",active:"dlwux-icon-copy-hover"}},f["fxs.fxsDrawer"]=function(){return{taskBar:f["fxs.fxsDrawerTaskbar"](),menu:f["fxs.fxsDrawerMenu"](),progress:f["fxs.fxsDrawerProgress"](),drawerHelp:f["fxs.fxsDrawerHelp"]()}},f["fxs.fxsDrawerHelp"]=function(){return{closeButton:"dlwux-icons-action-32-sprites"}},f["fxs.fxsMenu"]=function(){return{popOutIcon:"dlwux-popout-icon"}},f["fxs.fxsDrawerMenu"]=function(){return{closeButton:"dlwux-icons-action-32-sprites",okButton:"dlwux-icons-action-32-sprites"}},f["fxs.fxsDrawerTaskbar"]=function(){return{newButton:"dlwux-icon-drawer-add",help:"dlwux-icon-drawer-help",tray:f["fxs.fxsDrawerTray"]()}},f["fxs.fxsDrawerTray"]=function(){return{information:"dlwux-icon-drawer-information",warning:"dlwux-icon-drawer-warning",error:"dlwux-icon-drawer-error",progress_active:"dlwux-icon-drawer-processing-active",progress_error:"dlwux-icon-drawer-processing-error",progress_completed:"dlwux-icon-drawer-processing",progress_activeWithError:"dlwux-icon-drawer-processing-active-error"}},f["fxs.fxsSubscriptionPicker"]=function(){return{checkbox:{checked:"dlwux-icon-white-checkbox-checked-14",indeterminate:"dlwux-icon-white-checkbox-indeterminate-14",unchecked:"dlwux-icon-white-checkbox-unchecked-14",editedChecked:"dlwux-icon-white-checkbox-checked-14",editedIndeterminate:"dlwux-icon-white-checkbox-indeterminate-14",editedUnchecked:"dlwux-icon-white-checkbox-unchecked-14"},filter_off:"dlwux-fxs.subscriptionpicker.filter-off",filter_on:"dlwux-fxs.subscriptionpicker.filter-on",search_off:"dlwux-fxs.subscriptionpicker.search-off",applySpinner:"dlwux-fxs.subscriptionpicker.apply-spinner"}},e.extend(!0,t,{fx:{resources:{getContentUrl:g,getStrings:p,getClasses:y,initialize:h,oneTransparentPixel:l}}})}(jQuery,this,this.Resources),function(e,t,n){var r=function(e){var t=(e||"").toUpperCase();return t==="TRUE"?!0:t==="FALSE"?!1:/^-?\d*\.?\d*?$/.test(e)?+e:e},i=/-([a-z]|[0-9])/ig,s=function(e,t){return(t+"").toUpperCase()},o=function(e){return e.replace(i,s)},u=function(t){if(t===n||t===null)return"";var r=e("<div />");return r.text(t).html()},a=function(e,t,i,s){var u={},a=new RegExp("^"+t.replace("-","\\-")+"\\-(.+)$"),f=e.attributes||[],l,c,h,p;for(l=0,c=f.length;l<c;l++){h=f[l].nodeName.match(a);if(h){p=r(f[l].nodeValue);if(i===n||i)u[o(h[1])]=p;s&&(u[h[1]]=p)}}return u},f=2e3,l=function(e){return parseInt(e,10)===f?e:f+=3},c=function(e,t,n){e=e||"";var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=e.indexOf("#"),s=i>=0?e.substr(0,i):e,o=i>=0?e.substr(i):"",u;return s.split("/").length===3&&(s+="/"),t=encodeURIComponent(t),n=encodeURIComponent(n),s?(u=s.indexOf("?")!==-1?"&":"?",s.match(r)?s=s.replace(r,"$1"+t+"="+n+"$2"):s=s+u+t+"="+n,s+o):null},h=function(e,n){var r=e.tagName,i,s,o;switch(r){case"TABLE":i="tr";break;case"TR":i="td";break;case"UL":i="li";break;default:i="span"}n&&(o=e.getAttribute("aria-live"),e.setAttribute("aria-live","assertive")),s=t.document.createElement(i),e.appendChild(s),e.removeChild(s),n&&(o?e.setAttribute("aria-live",o):e.removeAttribute("aria-live"))};e.extend(!0,t,{fx:{utilities:{attributesToObject:a,getNextZIndex:l,getUrlWithQueryStringParameter:c,htmlEncode:u,forceRead:h}}})}(jQuery,this),function(e,t){function n(){return e.Utilities.newGuid().replace(/-/g,"_")}e.Namespace.define("Shell.Internal",{Rpc:{OperationType:{OneWay:1,AsyncRequestResponse:2,AsyncDuplex:3,AsyncDuplexEnd:4},PromiseOperationType:{Complete:1,Error:2,Progress:3},generateID:n}})}(Shell),function(e,t){function i(e,t){if(typeof e=="string"){var n=e.split("."),r,i,s;if(n.length>=1&&n[0].length>0){r=t;for(i=1;i<n.length;i++){s=n[i];if(!(r!==null&&typeof r=="object"&&s in r))return null;r=r[s]}if(typeof r=="function")return r}}return null}function s(t){try{var r=JSON.parse(t);switch(r.verb){case e.Internal.Rpc.OperationType.OneWay:u(r);break;case e.Internal.Rpc.OperationType.AsyncRequestResponse:a(r);break;case e.Internal.Rpc.OperationType.AsyncDuplex:f(r);break;default:throw"RpcServer: Unknown Rpc method"}}catch(i){n(i)}}function o(t){e.Internal.Rpc.RpcClient.rpcClientReceiveFromPostMessageTransport(JSON.stringify(t))}function u(e){var t=i(e.funcName,r);if(t)try{t.apply(this,e.args)}catch(s){n(s)}}function a(e){var t=i(e.funcName,r),s,o;if(t)try{s=l(e.callbackRef),o=e.args,o.unshift(s),t.apply(this,o)}catch(u){n(u)}}function f(e){var t=i(e.funcName,r),s,o;if(t)try{s=c(e.callbackRef),o=e.args,o.unshift(s),t.apply(this,o)}catch(u){n(u)}}function l(t){var n=t.indexOf("rpc_otc_prom")!==-1;return n?function(){function n(n,r){var i={verb:e.Internal.Rpc.OperationType.AsyncRequestResponse,callbackRef:t,result:{type:n,data:r}};o(i)}return{complete:function(t){n(e.Internal.Rpc.PromiseOperationType.Complete,t)},error:function(t){n(e.Internal.Rpc.PromiseOperationType.Error,t)},progress:function(t){n(e.Internal.Rpc.PromiseOperationType.Progress,t)}}}():function(n){var r={verb:e.Internal.Rpc.OperationType.AsyncRequestResponse,callbackRef:t,result:n};o(r)}}function c(t){return{invokeCallback:function(n){var r={verb:e.Internal.Rpc.OperationType.AsyncDuplex,callbackRef:t,result:n};o(r)},releaseCallback:function(){var n={verb:e.Internal.Rpc.OperationType.AsyncDuplexEnd,callbackRef:t};o(n)}}}var n=function(){var t=e.exists("Diagnostics.Log.writeEntry");return t?function(n){var r=n&&n.toString();try{t("Shell.Internal.RpcServer",r,e.Diagnostics.LogEntryLevel.error)}catch(i){}}:function(){}}(),r=e.Namespace.define("Impl");e.Namespace.defineWithParent(e,"Internal.Rpc",{RpcServer:{rpcServerReceiveFromPostMessageTransport:s}})}(Shell),function(e,t){function i(t){e.Internal.Rpc.RpcServer.rpcServerReceiveFromPostMessageTransport(JSON.stringify(t))}function s(t){try{var n=JSON.parse(t);switch(n.verb){case e.Internal.Rpc.OperationType.AsyncRequestResponse:case e.Internal.Rpc.OperationType.AsyncDuplex:o(n);break;case e.Internal.Rpc.OperationType.AsyncDuplexEnd:u(n);break;default:throw"RpcClient: Unknown Rpc method"}}catch(r){throw e.Diagnostics.Log.writeEntry("Shell.Internal.RpcClient",r.toString(),e.Diagnostics.LogEntryLevel.error),r}}function o(t){switch(t.verb){case e.Internal.Rpc.OperationType.AsyncRequestResponse:n.invokeCallbackByIdAndRelease(t.callbackRef,t.result);break;case e.Internal.Rpc.OperationType.AsyncDuplex:r.invokeCallbackById(t.callbackRef,t.result)}}function u(e){r.releaseCallbackById(e.callbackRef)}function a(t,r,s,o){var u=n.registerCallback(r,s),a={verb:e.Internal.Rpc.OperationType.AsyncRequestResponse,funcName:t,args:o,callbackRef:u};i(a)}function f(t,n){var r=[].slice.call(arguments),s;r.splice(0,1),s={verb:e.Internal.Rpc.OperationType.OneWay,funcName:t,args:r},i(s)}function l(e,t,n){var r=[].slice.call(arguments);r.splice(0,1),a(e,t,!1,r)}function c(t,n){var r=[].slice.call(arguments);return r.splice(0,1),new e.Promise(function(n,i,s){var o=function(t){switch(t.type){case e.Internal.Rpc.PromiseOperationType.Complete:n(t.data);break;case e.Internal.Rpc.PromiseOperationType.Error:i(t.data);break;case e.Internal.Rpc.PromiseOperationType.Progress:s(t.data)}};a(t,o,!0,r)})}function h(t,n,s){var o=r.registerCallback(n),u=[].slice.call(arguments),a;u.splice(0,2),a={verb:e.Internal.Rpc.OperationType.AsyncDuplex,funcName:t,args:u,callbackRef:o},i(a)}var n,r;n=function(){function n(n,r){if(typeof n!="function")throw"userCallback must be a function";if(typeof r!="boolean")throw"isPromiseProxy must be a boolean";var i="rpc_otc_"+(r?"prom":"cb")+"_"+e.Internal.Rpc.generateID();return t[i]=n,i}function r(e,n){if(!(e in t))throw"Callback callbackId could not be found";var r=t[e];delete t[e],r.call(this,n)}var t={};return{registerCallback:n,invokeCallbackByIdAndRelease:r}}(),r=function(){function n(n){if(typeof n!="function")throw"userCallback must be a function";var r="rpc_lsc_"+e.Internal.Rpc.generateID();return t[r]=n,r}function r(e,n){if(!(e in t))throw"Callback callbackId could not be found";var r=t[e];r.call(this,n)}function i(e){e in t&&delete t[e]}var t={};return{registerCallback:n,invokeCallbackById:r,releaseCallbackById:i}}(),e.Namespace.defineWithParent(e,"Internal.Rpc",{RpcClient:{rpcInvokeOneWay:f,rpcInvokeRequestResponse:l,rpcInvokeRequestResponseWithPromise:c,rpcInvokeDuplex:h,rpcClientReceiveFromPostMessageTransport:s}})}(Shell),function(e,t,n,r){function l(e,t){if(typeof e!="string"||!/^([A-Za-z0-9_-])*$/.test(e))throw t+" must be a string containing letters, numbers, underscore or dash."}function c(e,t,n){var r=s[e.source];r&&(r.lastMessage=t,r.timeStamp=n.timeStamp,r.messageEvent=n)}var i="__FXCOMMUNICATION__",s={},o=function(e,t){return t.source===n.parent?!0:s[e.source]&&s[e.source].origin===t.origin?!0:!1},u=null,a,f;a=function(t,r){var s={data:e.Callbacks(),error:e.Callbacks(),relay:e.Callbacks()},u=this,a={},l=function(e){var n=e.data,r,a,f;if(typeof n!="string"||n.substr(0,i.length)!==i)return;n=n.substr(i.length),r=n.indexOf("}")+1,a=JSON.parse(n.substr(0,r)),f=n.substr(r),a.destination!==""&&a.destination!==t?s.relay.fireWith(u,[a,f,e]):o(a,e)?s.data.fireWith(u,[a,f,e]):a.protocol==="REGISTER"?s.data.fireWith(u,[a,f,e]):s.error.fireWith(u,[a,f,e])},c=!1;this.destroy=function(){n.removeEventListener?n.removeEventListener("message",l,!1):n.detachEvent("onmessage",l)},this.on=function(e,t){if(!s[e])throw"This event name is not supported";s[e].add(t)},this.off=function(e,t){if(!s[e])throw"This event name is not supported";s[e].remove(t)},this.bind=function(t,n){var r=a[t]=a[t]||e.Callbacks();r.add(n)},this.unbind=function(e,t){a[e]&&a[e].remove(t)},this.getChannelName=function(){return t},this.register=function(){if(!c){c=!0;var e=new f("");e._setHandle(n),e.send("REGISTER"),n.parent!=n&&(e=new f(""),e.send("REGISTER"))}},this.isRegistered=function(){return c},this.on("data",function(e){a[e.protocol]&&a[e.protocol].fireWith(this,[].slice.call(arguments))}),n.addEventListener?n.addEventListener("message",l,!1):n.attachEvent("onmessage",l)},a.create=function(e,t){if(u)throw"You can create only one server listener.";return l(e,"channelName"),u=new a(e,t),u.on("relay",function(e,t,r){var i;if(n.parent==n&&!s[e.destination])throw"The destination is not found.";i=new f(e.destination),i._setSource(e.source),i._sendRaw(r.data)}),u.bind("REGISTER",function(e,t,n){var r;if(e.source in s&&!o(e,n))return;r=s[e.source]={},r.handle=n.source,r.origin=n.origin}),u.bind("REGISTER",function(e,t,r){var i;n.parent!=n&&r.source!=n&&(i=new f(e.destination),i._setSource(e.source),i._sendRaw(r.data))}),u.on("data",function(e,t,n){c(t,n)}),u},a.destroy=function(){u&&(s={},u.destroy(),u=null)},a.getReceiver=function(){return u},f=function(e){var t=n.parent,r;l(e,"destination");if(!u||!u.isRegistered())throw"You must setup a server listener to talk with someone.";r=u.getChannelName(),s[e]&&(t=s[e].handle),this.send=function(t,n){var s={source:r,destination:e,protocol:t},o;l(t,"protocol"),n=n||"",o=JSON.stringify(s)+n,this._sendRaw(i+o)},this._setSource=function(e){r=e},this._setHandle=function(e){t=e},this._sendRaw=function(e){try{t.postMessage(e,"*")}catch(r){if(!r||typeof r.message!="string"||r.message.trim()!=="Operation aborted")throw r;n.console&&n.console.error&&n.console.error("An error occurred when using postMessage. This is most likely due to an IE10 bug. Please refer to the documentation how to fix this.")}}},t.Namespace.defineWithParent(Shell,"Communication",{Receiver:a,Sender:f})}(jQuery,Shell,this),function(e,t,n,r){function u(){this.canHandleReplacer=function(e){return!1},this.canHandleReviver=function(e){return!1},this.handleReplacer=function(e){return e},this.handleReviver=function(e){return e}}function a(e,t){var n,r=s.length;for(n=0;n<r;n++)if(s[n][e](t))return s[n];return null}function f(e){var t,n;for(t in e)e.hasOwnProperty(t)&&(n=a("canHandleReplacer",e[t]),n?e[t]=n.handleReplacer(e[t]):typeof e[t]=="object"&&f(e[t]))}function l(t){return f(t),function(t,n){var r;return typeof n=="function"?(r=i(),n.__guid=r,e.Communication.Receiver.getReceiver().addMethod(r,n,{hidden:!0}),{"##rpc_function##":r}):n}}function c(t,n){return function(r,i){var s=a("canHandleReviver",i),o;return s?s.handleReviver(i):i&&i["##rpc_function##"]?(o=function(){var n=new e.Communication.Sender(t),r=n.getMethod(i["##rpc_function##"]),s=r.apply(null,[].slice.call(arguments));return n.close(),s},o.__guid=i["##rpc_function##"],n[i["##rpc_function##"]]={release:!0,destination:t,temp:o},o):i}}function h(t){n.clearTimeout(o),o=n.setTimeout(function(){var n={},r,i;for(r in t._releaseArguments)t._releaseArguments.hasOwnProperty(r)&&t._releaseArguments[r].release&&(n[t._releaseArguments[r].destination]||(n[t._releaseArguments[r].destination]=[]),n[t._releaseArguments[r].destination].push(r),delete t._releaseArguments[r].temp.__guid,delete t._releaseArguments[r]);for(r in n)n.hasOwnProperty(r)&&(i=new e.Communication.Sender(r),i.send("RPC_RELEASE",JSON.stringify(n[r])),i.close())},1)}function p(t,n,r){var i=JSON.parse(n,c(t.source,this._releaseArguments)),s=this._listeningMethods[i.method],o,u;if(!s)throw"Callback not found - "+i.method;try{u={status:"done",value:s.callback.apply({receiver:this,channel:null},i.args)}}catch(a){this.releaseArgument(i.args),u={status:"throw",exception:a}}i.handle&&(o=new e.Communication.Sender(t.source),o.getMethod(i.handle).invokeAsync(u),o.close()),h(this)}function d(e,t,n){var r=JSON.parse(t),i;for(i=0;i<r.length;i++)this.removeMethod(r[i]),delete r[i].__guid}function v(e,n,r){var i=t.Deferred();n[r].done(function(e){n[r]=e,i.resolve()}),e.push(i.promise())}function m(e,n){var r=[],i=e.args.length-1;for(;i>=0;i--)e.args[i]&&e.args[i]["##rpc_handle##"]&&r.push(e.args[i]);return t.when.apply(this,r).done(function(){var r=[],i=e.args.length-1;for(;i>=0;i--)e.args[i]&&e.args[i]["##rpc_handle##"]&&v(r,e.args,i);t.when.apply(this,r).done(function(){n.send("RPC",JSON.stringify(e,l(e)))})})}function g(n,r){var s=i(),o=e.Communication.Receiver.getReceiver(),u=t.Deferred(),a=u.promise(),f=function(){r._latestDeferred=u,o.addMethod(s,function(e){o.removeMethod(s);switch(e.status){case"done":u.resolveWith(this,[e.value]);break;case"throw":u.rejectWith(this,[e])}},{hidden:!0}),n.handle=s,m(n,r).fail(function(){u.rejectWith(this,[{status:"dependent"}])})};return a["##rpc_handle##"]=s,r._syncQueue=r._syncQueue.then(function(){return f(),u},function(e){return e.status==="abort"?u.rejectWith(this,[{status:"abort"}]):(f(),u)}),a.fail(function(){var e=function(n){for(var r in n)typeof n[r]=="object"?e(n[r]):typeof n[r]=="function"&&n[r].__guid&&o.getMethodNames("hidden").indexOf(n[r].__guid)>=0&&(o.removeMethod(n[r].__guid),o.addMethod(n[r].__guid,t.noop,{hidden:!0}))};e(n.args)}),a}function y(e,t){if(typeof e=="function")e.__guid&&this._releaseArguments[e.__guid]&&(this._releaseArguments[e.__guid].release=t),e.__extra&&y.call(this,e.__extra,t);else for(var n in e)(typeof e[n]=="object"||typeof e[n]=="function")&&y.call(this,e[n],t)}var i=function(){return e.Utilities.newGuid().replace(/-/g,"_")},s=[],o=null;e.Communication.Receiver.prototype.holdArgument=function(e){y.call(this,e,!1)},e.Communication.Receiver.prototype.releaseArgument=function(e){y.call(this,e,!0),h(this)},e.Communication.Receiver.prototype.addMethod=function(e,n,r){if(!e)throw"methodName must be defined.";if(!n)throw"Callback must be defined.";this._listeningMethods||(this._releaseArguments=this._releaseArguments||[],this._listeningMethods={},this.bind("RPC",p),this.bind("RPC_RELEASE",d)),this._listeningMethods[e]={callback:n,options:t.extend({hidden:!1},r)}},e.Communication.Receiver.prototype.removeMethod=function(e){delete this._listeningMethods[e]},e.Communication.Receiver.prototype.getMethodNames=function(e){return e=e||"public",t.map(this._listeningMethods||{},function(t,n){return e==="all"||e==="public"&&!t.options.hidden||e==="hidden"&&t.options.hidden?n:null})},e.Communication.Sender.prototype.getMethod=function(e){var n=this,r={method:e},i;if(typeof e!="string"||!e)throw"You must provide a method name as a string.";return i=function(){return n._latestDeferred=n._latestDeferred||t.Deferred(),n._syncQueue=n._syncQueue||n._latestDeferred.resolve(),r.args=[].slice.call(arguments),g(r,n)},i.invokeAsync=function(){r.args=[].slice.call(arguments),n.send("RPC",JSON.stringify(r,l(r)))},i},e.Communication.Sender.prototype.abort=function(){this._syncQueue&&this._latestDeferred&&this._latestDeferred.rejectWith(this,[{status:"abort"}])},e.Communication.Sender.prototype.close=function(){this._syncQueue=null,this._latestDeferred=null},e.Namespace.defineWithParent(e,"Communication.Rpc",{JsonProcessor:u,addJsonProcessor:function(e){s.push(e)},removeJsonProcessor:function(e){for(var t=0;t<s.length;t++)if(s[t]===e){s.splice(t,1);break}}})}(Shell,jQuery,this),function(e,t,n,r){var i=new t.Communication.Rpc.JsonProcessor,s=new t.Communication.Rpc.JsonProcessor,o=new t.Communication.Rpc.JsonProcessor,u=new t.Communication.Rpc.JsonProcessor,a=new t.Communication.Rpc.JsonProcessor,f=new t.Communication.Rpc.JsonProcessor,l=new t.Communication.Rpc.JsonProcessor,c=null;i.canHandleReplacer=function(e){return e&&typeof e.toJSON=="function"},i.handleReplacer=function(e){return e},s.canHandleReplacer=function(e){return e instanceof jQuery.Event},s.handleReplacer=function(e){return"jQuery Event"},o.canHandleReplacer=function(e){return e instanceof Date},o.handleReplacer=function(e){return{"##rpc_date##":e}},o.canHandleReviver=function(e){return e&&e["##rpc_date##"]},o.handleReviver=function(e){return new Date(e["##rpc_date##"])},u.canHandleReplacer=function(e){return e&&typeof e.promise=="function"&&typeof e.done=="function"},u.handleReplacer=function(e){if(!e["##rpc_processed"]){var n=e.fail,r=e.done,i=t.Communication.Receiver.getReceiver();i&&(["always","done","fail","progress","then"].forEach(function(t){var s=e[t];e[t]=function(){var e=arguments,t;return i.holdArgument(arguments),t=s.apply(this,arguments),n(function(){i.releaseArgument(e)}),r(function(){i.releaseArgument(e)}),t}}),e["##rpc_processed"]=!0)}return e},a.canHandleReplacer=function(e){return e instanceof Error},a.handleReplacer=function(e){var t={"##rpc_error##":{}},n=t["##rpc_error##"];return["name","message","stack","number","description"].forEach(function(t){n[t]=e[t]}),e instanceof EvalError?n.type="EvalError":e instanceof RangeError?n.type="RangeError":e instanceof ReferenceError?n.type="ReferenceError":e instanceof SyntaxError?n.type="SyntaxError":e instanceof TypeError?n.type="TypeError":e instanceof URIError?n.type="URIError":n.type="Error",t},a.canHandleReviver=function(e){return e&&e["##rpc_error##"]},a.handleReviver=function(e){var t=e["##rpc_error##"],r=t.type?new n[t.type](t.message):new Error(t.message);return["name","stack","number","description"].forEach(function(e){r[e]=t[e]}),r},f.canHandleReviver=function(e){return e&&typeof e["##window_open_url##"]=="string"},f.handleReviver=function(e){var t=e["##window_open_url##"],r=e["##window_open_target##"]||"_blank",i=e["##window_open_features##"]||"",s=e["##window_open_extra##"]||null,o=function(){c=n.open(t,r,i),s&&s()};return o.__extra=s,o},l.canHandleReviver=function(e){return e&&e["##chromeWebStoreInstall_url##"]},l.handleReviver=function(t){var r=t["##chromeWebStoreInstall_url##"],i=t["##chromeWebStoreInstall_onSuccess##"]||null,s=t["##chromeWebStoreInstall_onFailure##"]||null,o=t["##chromeWebStoreInstall_extra##"]||null,u=function(){var t=e("<link />").attr({href:r,rel:"chrome-webstore-item"}).appendTo("head"),u=function(){t.remove()};n.chrome.webstore.install(r,function(){u(),i&&i.apply(null,arguments)},function(){u(),s&&s.apply(null,arguments)}),o&&o()};return u.__extra=[i,s,o],u},t.Namespace.define("Shell.Communication.Rpc.Functions",{windowOpen:function(e,t,n,r){return typeof t=="function"?(r=t,t=null):typeof n=="function"&&(r=n,n=null),{"##window_open_url##":e,"##window_open_target##":t||null,"##window_open_features##":n||"","##window_open_extra##":r||null}},chromeWebStoreInstall:function(e,t,n,r){return{"##chromeWebStoreInstall_url##":e,"##chromeWebStoreInstall_onSuccess##":t,"##chromeWebStoreInstall_onFailure##":n,"##chromeWebStoreInstall_extra##":r}},takeLastWindowOpened:function(){var e=c;return c=null,e}}),t.Communication.Rpc.addJsonProcessor(o),t.Communication.Rpc.addJsonProcessor(i),t.Communication.Rpc.addJsonProcessor(s),t.Communication.Rpc.addJsonProcessor(u),t.Communication.Rpc.addJsonProcessor(a),t.Communication.Rpc.addJsonProcessor(f),t.Communication.Rpc.addJsonProcessor(l)}(jQuery,Shell,this),function(e,t,n){function i(){return r?r:(r=new t.Communication.Sender("fx"),r)}function s(t){return function(){var n=e.Deferred(),r=[].slice.call(arguments),s=i();return s.getMethod(t).apply(s,[{complete:function(e){n.resolve(e)},error:function(e){n.reject(e)}}].concat(r)),n.promise()}}function o(e,t,n){return s("Impl.Configuration.getUserSettings")(e,t,n)}function u(e,t){return s("Impl.Configuration.updateUserSettings")(e,t)}function a(e){return s("Impl.Configuration.deleteUserSettings")(e)}function f(e){return s("Impl.Configuration.deleteUserSettingsByPrefix")(e)}function l(e){return s("Impl.Configuration.getLoadedUserSettings")(e)}function c(e,t){return s("Impl.Configuration.updateLoadedUserSettings")(e,t)}function h(e){return s("Impl.Configuration.deleteLoadedUserSettings")(e)}function p(){return s("Impl.Configuration.initialize")()}function d(e,t){return e.settings[0].value=t,u(e)}function v(e,t,n,r){return{store:e,type:t,subscriptionId:n,settings:r}}function m(e,t,n,r,i,s){return v(e,t,n,[g(r,i,s)])}function g(e,t,n){return{path:e,name:t,value:n}}var r;t.Namespace.define("Shell.Configuration",{getUserSettings:o,updateUserSettings:u,deleteUserSettings:a,deleteUserSettingsByPrefix:f,getLoadedUserSettings:l,updateLoadedUserSettings:c,deleteLoadedUserSettings:h,initialize:p,updateUserSetting:d,createSingleUserSetting:m,createFullUserSettings:v,createUserSetting:g})}(jQuery,Shell),function(e,t,n,r){function s(){return i?i:(i=new n.Communication.Sender("fx"),i)}function o(e){return function(){var n=t.Deferred(),r=[].slice.call(arguments),i=s();return i.getMethod(e).apply(i,[{complete:function(e){n.resolve(e)},error:function(e){n.reject(e)}}].concat(r)),n.promise()}}var i;n.Namespace.define("Shell.Configuration.ViewSettings",{getViewSettings:function(e,t){return o("Impl.Configuration.ViewSettings.getViewSettings")(e,t)},updateViewSetting:function(e,t,n,r){return o("Impl.Configuration.ViewSettings.updateViewSetting")(e,t,n,r)},Path:{perType:"###PER_TYPE###",perInstance:"###PER_INSTANCE###"}})}(this,jQuery,Shell),function(e,t,n){var r=["refreshStart","refreshSuccess","refreshError"],i={paging:"setPaging",sort:"setSort",filter:"setFilter"},s=function(t){this._paging={skip:0},this._sort=null,this._filter=null,this.refreshError=null,this.partialRefreshErrors=[],this.refreshPromise=null,this.isReset=!0,this.items=[],this.filteredTotalCount=null,this.totalCount=null;var n=this;t&&(e.each(r,function(r,i){t[i]&&e(n).on(i,t[i])}),e.each(i,function(e,r){t[e]&&n[i[e]](t[e])}))},o=t.Class.define(s,{refreshError:null,partialRefreshErrors:null,refreshPromise:null,isReset:!0,items:null,filteredTotalCount:null,totalCount:null,dataSetName:null,isQueryable:!0,dispose:function(){this.items&&(this._dispose(),this.items=null)},refresh:function(t){var n=this._startRefresh(!0),r=this.refreshPromise;return this._refresh(t).then(e.proxy(n.resolve,n),e.proxy(n.reject,n)),r},reset:function(){e.observable(this).setProperty({isReset:!0,refreshError:null,filteredTotalCount:null,totalCount:null}),e.observable(this.items).refresh([])},setSort:function(t){return this._verifyQueryable(),t?(this._sort=e.isArray(t)?t:[t],e.each(this._sort,function(t){e.isFunction(t)||e.extend({direction:"ascending"},t)})):this._sort=null,this},setPaging:function(e){return this._verifyQueryable(),this._paging=e||{},this._paging.skip=this._paging.skip||this._paging.skip===0?this._paging.skip:0,this},setFilter:function(e){return this._verifyQueryable(),this._filter=e?this._setFilter(this._normalizeFilter(e)):null,this},_dispose:function(){},_isDisposed:function(){return this.items===null},_setFilter:function(e){return e},_refresh:function(e){throw"Not reachable"},_startRefresh:function(t){var n=e.Deferred(),r=e.Deferred(),i=r.promise();return n.then(e.proxy(this._onRefreshSucceeded,this,r),e.proxy(this._onRefreshFailed,this,r)),e.observable(this).setProperty("refreshPromise",i),e(this).triggerHandler("refreshStart",{promise:i,isClientInitiated:t}),n},_onRefreshSucceeded:function(t,n,r,i,s){if(this._isDisposed())return;t.promise()===this.refreshPromise&&e.observable(this).setProperty("refreshPromise",null),this._establishNewSuccessState(n,r,i,s),t.resolve(this.items,this.filteredTotalCount,this.totalCount,this.partialRefreshErrors),e(this).triggerHandler("refreshSuccess")},_onRefreshFailed:function(t,n,r,i){if(this._isDisposed())return;t.promise()===this.refreshPromise&&e.observable(this).setProperty("refreshPromise",null),e.observable(this).setProperty("refreshError",{jqXHR:n,statusText:r,error:i}),t.reject(n,r,i),e(this).triggerHandler("refreshError")},_establishNewSuccessState:function(t,n,r,i){e.observable(this).setProperty({refreshError:null,isReset:!1}),t&&(e.observable(this.items).refresh(t),e.observable(this.partialRefreshErrors).refresh(i||[]),e.observable(this).setProperty({filteredTotalCount:n,totalCount:r}))},_normalizeFilter:function(t){t=e.isArray(t)?t:[t];var n=[],r,i;for(i=0;i<t.length;i++)r=t[i],r&&(e.isFunction(r)||(r.operator=r.operator||"=="),n.push(r));return n},_haveItem:function(t){return e.inArray(t,this.items)>=0},_verifyQueryable:function(){if(!this.isQueryable)throw"This data source is not queryable."}});t.Namespace.define("Shell.Data",{DataSource:o})}(jQuery,Shell),function(e,t,n,r){function i(r,i,s){var o,u;typeof i=="function"?(o=i,i="[function]"):(o=r,n.each(i.split("."),function(){o=(o||e)[this];if(!o)return!1}));if(typeof o!="function"){t.Diagnostics.Log.writeEntry("cdm.PartnerScriptNotFound","callPartnerScript: '{0}' for extension '{1}' not found.".format(i,r.name),t.Diagnostics.LogEntryLevel.error);return}u=Array.prototype.slice.call(arguments,null),u.splice(0,3),t.Diagnostics.Log.writeEntry("cdm.CallingPartnerScript","callPartnerScript: Calling '{0}' for extension '{1}'".format(i,r.name),t.Diagnostics.LogEntryLevel.verbose);try{return o.apply(s||r||null,u)}catch(a){throw t.Diagnostics.Log.writeEntry("cdm.ErrorExecutingPartnerScript","Error executing partner script '{0}' for extension '{1}': {2}".format(i,r.name,a.message||a.Message||a),t.Diagnostics.LogEntryLevel.error),a}}t.Namespace.define("Shell.Internal",{callPartnerScript:i,initialize:function(n){return t.Diagnostics.Telemetry.timerStart("cdm.initializeStart"),t.Internal.ExtensionProviders.load(!!n&&n.extensionProviders).then(function(){e.cdm._initialize()})},start:function(e){var n,r,s;t.UI.Spinner.hide(),t.Diagnostics.Telemetry.timerStopAndLog("cdm.initializeStart","cdm.initialize total:");for(n=0,r=t.extensions.length;n<r;n++)s=t.extensions[n],s.onApplicationStart&&(t.Diagnostics.Telemetry.timerStart("cdm.initialize.onApplicationStart"),i(s,s.onApplicationStart,s),t.Diagnostics.Telemetry.timerStopAndLog("cdm.initialize.onApplicationStart",s.name+".onApplicationStart returned after"));e()}})}(this,Shell,jQuery),function(e,t,n,r,i){function f(){var e,t=s.data("config");t.no&&(e=t.no(l())),(e===i||e)&&n.UI.Dialog.cancel()}function l(){var e={};return t("#aux-yesNoDialog input").each(function(){e[this.name||this.id]=this.value||t(this).text()}),t("#aux-yesNoDialog select").each(function(){var n=[];t(this).children("option").each(function(){this.selected&&n.push(this.value)}),e[this.name||this.id]=n}),e}function c(){t("#aux-yesNoDialogTemplate").empty();var n=s.data("config");n&&!n.dataPolling&&e.Exp.Data.resumePolling(),s.hideAlert(),e.cdm.dialogActive=!1,s.dialog("close"),a&&a.focus()}var s,o={dialogClass:"aux-dialog aux-yesNoDialog",modal:!0,show:"fade",hide:"fade",resizable:!1},u=n.exists("Diagnostics.Telemetry.traceEvent",t.noop),a;window.require(["datalabext"],function(){s=t("#aux-yesNoDialog"),s.on("keydown.dialog",function(e){if(e.which===t.ui.keyCode.ESCAPE)return f(),!1}),t("#aux-yesNoDialog-yesButton").bind("click.dialog",function(){var e,t=s.data("config");t.yes&&(e=t.yes(l())),(e===i||e)&&n.UI.Dialog.ok()}),t("#aux-yesNoDialog-noButton, #aux-yesNoDialog-close").bind("click.dialog",function(){var e,t=s.data("config");t.no&&(e=t.no(l())),(e===i||e)&&n.UI.Dialog.cancel()}),t("#aux-messageDialog-okButton").bind("click.dialog",function(){t("#aux-messageDialog").dialog("close")}),t(".aux-messageDialog-close","#aux-messageDialog").bind("click.dialog",function(){t("#aux-messageDialog").dialog("close")}),s.showAlert=function(e,t,r){if(typeof e!="string"){n.Diagnostics.Log.writeEntry("Shell.UI.Dialog.TitleIsNotStringError","title is not a string",n.Diagnostics.LogEntryLevel.error);return}if(typeof t!="string"){n.Diagnostics.Log.writeEntry("Shell.UI.Dialog.ContentIsNotStringError","content is not a string",n.Diagnostics.LogEntryLevel.error);return}if(r){if(r.constructor!==Array){n.Diagnostics.Log.writeEntry("Shell.UI.Dialog.ActionsIsNotArrayError","actions is not an array",n.Diagnostics.LogEntryLevel.error);return}if(r.length>3){n.Diagnostics.Log.writeEntry("Shell.UI.Dialog.ThreeActionsMaxError","actions can only contain 3 items",n.Diagnostics.LogEntryLevel.error);return}}var i=s.dialog("widget");i?i.dialogalertbox({title:e,content:t,actions:r}).dialogalertbox("open"):n.Diagnostics.Log.writeEntry("Shell.UI.Dialog.NoDialogElementToShowAlert","Unable to find dialog to show the alert",n.Diagnostics.LogEntryLevel.error)},s.hideAlert=function(){var e=s.dialog("widget");e?(e.dialogalertbox("close"),e.on("dialogalertboxclose",function(){e.dialogalertbox("destroy")})):n.Diagnostics.Log.writeEntry("Shell.UI.Dialog.NoDialogElementToHideAlert","Unable to find dialog to hide the alert",n.Diagnostics.LogEntryLevel.error)}}),n.Namespace.define("Shell.UI",{Dialog:{open:function(l){var c,h,p,d;if(l===i)throw"yesNoDialog: No paramerters supplied.";if(!l.extension)throw"yesNoDialog: Required parameter config.extension wsa not supplied.";if(!l.template)throw"yesNoDialog: Required parameter config.template was not supplied.";return c=l.data||{},s.data("config",l),h=l.extension,typeof h=="string"&&(h=n.extensionIndex[h]),l.dataPolling||e.Exp.Data.pausePolling(),a=n.Utilities.getDocumentActiveElement(),p=h.templates[l.template],p?(n.Diagnostics.Log.writeEntry("Shell.UI.Dialog.RenderedYesNoDialog","Rendering yesNo dialog template '"+l.template+"' for extension '"+h.name+"'",n.Diagnostics.LogEntryLevel.information),e.cdm._renderTemplate(t("#aux-yesNoDialogTemplate"),p,c,h.templateHelpers)):(n.Diagnostics.Log.writeEntry("Shell.UI.Dialog.ErrorRenderingYesNoDialog","Error rendering yesNo dialog template '"+l.template+"' for extension '"+h.name+"', the template has not been not loaded.",n.Diagnostics.LogEntryLevel.error),e.cdm._renderTemplate(t("#aux-yesNoDialogTemplate"),"",c)),l.init&&l.init(c),d=t.extend({},o,l,{title:"",zIndex:r.getNextZIndex(),closeOnEscape:!1}),d.hideYes?t("#aux-yesNoDialog-yesButton").hide():t("#aux-yesNoDialog-yesButton").show(),e.cdm.dialogActive=!0,s.dialog(d),u("dialog",h.name,l.name),s},ok:function(){var r=s.data("config"),i=r.extension;typeof i=="string"&&(i=n.extensionIndex[i]),i.navigationalViewModel&&e.Exp.Data.expireData(i.navigationalViewModel.uri),c()},cancel:function(){c()}}})}(this,jQuery,Shell,this.fx.utilities),function(e,n,r,i){function h(){return u}function p(e){if(!e)throw"message must be provided";g(e)}function d(){g(null)}function v(e){var n,r;typeof e=="string"?r=e:typeof e=="object"&&"name"in e&&(r=e.name);if(typeof r!="string")throw"extension must be an extension name or an extension object";for(n=0;n<o.length;n++)if(o[n].name===r)return t.observable(o[n]);return null}function m(e){var r,i,s=v(e);if(s&&!s.data().isSelected)for(r=0;r<o.length;r++)i=o[r].name===s.data().name,t.observable(o[r]).setProperty(n.UI.Navigation.WellKnownPropertyNames.isSelected,i)}function g(t){t?(e.onbeforeunload=function(){return t},l=t,c=e.location.hash):(e.onbeforeunload=null,l=null,c=null)}function y(){return S()}function b(e){var t=e;return typeof e=="object"&&(t=w(e)),new n.Promise(function(e,n,r){var i=null;try{A(t)}catch(s){i=s}try{i?n(i):e()}catch(s){}})}function w(t){var r=t.extension,i=t.type,s=t.name,o=t.view,u=t.dataContext,a=t.expandPath?!0:!1,f,l,c,h=null;typeof r=="string"&&(r=n.extensionIndex[r]),f="#Workspaces/"+r.name+"/",e.Impl.UI.Pivots.ensureExtensionPivotsInitialized(r);if(!i)return o||(o=e.Impl.UI.Pivots.getFirstPivotId(r.id,i),o||(o=r.getDefaultView&&typeof r.getDefaultView=="function"?r.getDefaultView(i):"list")),f+o;if(!o){a&&(o=e.Impl.UI.Pivots.getFirstPivotId(r.id,i)),h=e.Exp.TypeRegistry.getDependencies(r.name,i);if(h&&u)for(c in h)u[h[c]]&&(f+=c+"/"+u[h[c]]+"/")}return!o&&a&&(o=r.getDefaultView&&typeof r.getDefaultView=="function"?r.getDefaultView(i):"list"),l=f+i+"/"+s,o&&(l+="/"+o),l}function E(e){return e?JSON.parse(JSON.stringify(e)):i}function S(){var t=e.location.hash,n,r,s,o,u=[],a,f,l;if(!t||t==="")return{};n=t.split("/"),r=n[1];if(n[2])if(n[2]==="list")s="list";else{s="tab";for(l=2;l<n.length;l+=2)n[l+1]?u.push({type:n[l],name:n[l+1]}):o=n[l]}u.reverse();while(u.length>=1)f=u.pop(),a={name:f.name,type:f.type,parent:E(a)||i};return{extension:r,view:s,viewName:o,item:a,itemName:a?a.name:i,itemType:a?a.type:i}}function x(e,t,n,r){var i=S(),s=e?i.extension===e:!0,o=t?i.viewName===t:!0,u=n?i.itemName===n:!0,a=r?i.itemType===r:!0;return s&&o&&u&&a}function T(t){var n,r,s,o,u,a,f,l=[];t=t||e.location.hash;if(!t)return{};n=t.split("/"),r=n.length>=1?n[1]:null;if(n[2])if(n[2]==="list")a="list";else{a="tab";for(s=2;s<n.length;s+=2)n[s+1]?l.push({type:n[s],name:n[s+1]}):f=n[s]}l.reverse();while(l.length>=1)u=l.pop(),o={name:u.name,type:u.type,parent:E(o)||i};return{hash:t,extension:r,view:a,viewName:f,item:o,itemName:o?o.name:i,itemType:o?o.type:i}}function N(e){var t=n.Utilities.removeQueryString(e).split("/"),r=null,i;return t.length>2&&(i=t[t.length-3],i.charAt(0)!=="#"&&(r=i)),r}function C(t,n){var r=n.split("/"),i,s=null;return r.length%2===1?n:(e.Impl.UI.Pivots.ensureExtensionPivotsInitialized(t),r.length===2?i=e.Impl.UI.Pivots.getFirstPivotId(t.id):r.length>2&&(s=r[r.length-2],i=e.Impl.UI.Pivots.getFirstPivotId(t.id,s)),i||(i=t.getDefaultView&&typeof t.getDefaultView=="function"?t.getDefaultView(s):"list"),r.push(i),r.join("/"))}function k(r,i,s,o){var u,f,l,c,h,p=null,d=null,v=null,m=null,g=null,y=null,b=null,E=null,S=null,x=null,T=null,N=i.split("/");if(N.length>2){p=N[N.length-1],d=N[N.length-2],v=N[N.length-3],m=null;if(v.charAt(0)==="#"||!r.dataIsLoaded)m=r.displayName,y=o,b=s,s&&(typeof g=="function"?b=g({extension:r,data:s}):r.navigationalViewModelPath&&(b={data:e.Exp.Utilities.getChildProperty(s.data,r.navigationalViewModelPath)}));else{g=e.Exp.TypeRegistry.getDataFunction(r.name,v);if(typeof g=="function"){c=[];for(u=0;u<N.length-1;u++)u%2===0&&(c[N[u++]]=N[u]);c.requestedItem=v,y=g(c,N.slice(0,N.length-1).join("/"),s),typeof y=="object"&&(y.backNavigation&&(S=y.backNavigation,S.extension||(S.extension=e.cdm.currentExtension),E={label:y.label?y.label:null,backNavigationPath:w(S)}),y.selectedData&&(b=y.selectedData,m=b.displayName),y=y.data);if(!!y&&t.isArray(y)&&!b)for(f=0,l=y.length;f<l;f++)if(y[f].name===d){b=y[f],m=b.displayName;break}}}}t("#fxshell-navpane").navigation("updateLeftNavigationBarView",N,{data:y,extensionBadges:o},E);if(!r.dataIsLoaded)return;e.Impl.Configuration.ViewSettings.setCurrentExtension(e.cdm.currentExtension),t(e.cdm).unbind("activeItemChanged.fxshell-commandBar").bind("activeItemChanged.fxshell-commandBar",function(t,i){x=i.activeItem&&i.activeItem["aux-extension-name"]?i.activeItem["aux-extension-name"]:r.name,T=n.extensionIndex[x],T.setCommands&&T.setCommands(e.cdm.currentActiveItem,e.cdm.currentContext)}),r.excludeFromViewInitialization||(p!=="list"?(h=v.charAt(0)==="#"?null:v,e.Impl.Configuration.ViewSettings.setBuiltInPaths(p,h?d:null),e.cdm.updateTabsView(r,h,b,{title:m,selected:p})):(e.Impl.Configuration.ViewSettings.setBuiltInPaths(p,null),e.cdm.updateCollectionView(r,b,m))),a=e.location.hash}function L(e){var t=n.UI.Navigation.crackNavigationPath(e),r=t.item,i=[],s=t.extension,o="",u=t.view==="list"&&!t.viewName?"list":t.viewName;while(r&&r.type)i.push(r.name),i.push(r.type),r=r.parent;return i.length>=1&&(o="."+i.reverse().join(".")),s+o+"."+u}function A(i){var s,u,a,h,p,d,v,m=null;if(o===null)return;i=e.Impl.UI.Navigation.normalizePath(i);if(l){if(c&&i===c)return;if(!e.confirm(l))return c;l=null,c=null,e.window.onbeforeunload=null}e.cdm.currentWizard&&e.cdm.currentWizard.close(),e.cdm.dialogActive&&n.UI.Dialog.cancel(),Impl.UI.Notifications.DataLoad.onNavigateAway(),s=(i||"").indexOf("/");if(s===-1){if(i!==f){A(f);return}return}h=i.substring(s+1),p=h?n.extensionIndex[h.split("/")[0]]:null;if(!p)return;a=n.UI.Navigation.expandDefaultHashPath(p,i);if(p&&p.onNavigating){u={current:n.UI.Navigation.crackNavigationPath(e.window.location.hash),destination:n.UI.Navigation.crackNavigationPath(i),expandedDestination:n.UI.Navigation.crackNavigationPath(a),redirect:function(e){m=e}},n.Internal.callPartnerScript(p,"onNavigating",p,u);if(!!m){e.window.setTimeout(function(){A(m)},10);return}}if(a!==e.window.location.hash){e.window.location.hash=a;return}i=a,e.cdm.currentExtension&&e.cdm.currentExtension.onNavigateAway&&n.Internal.callPartnerScript(e.cdm.currentExtension,"onNavigateAway"),e.cdm.currentExtension=p,e.cdm.currentContext={dataPath:h,hashPath:i,viewPath:a.substr(a.lastIndexOf("/")+1),extension:e.cdm.currentExtension},n.UI.Drawer.setHelpUrl("/HelpContent/GetContent?ExtensionContext="+L(e.cdm.currentContext.hashPath)+"&Locale="+r.environment.locale),e.Impl.UI.Pivots.setCurrentExtension(p,n.UI.Navigation.getHashPathType(i)),p.name!=="All"&&p.displayName?e.window.document.title=p.displayName+" - "+n.Environment.getBranding():e.window.document.title=n.Environment.getBranding(),t(e.cdm).unbind("activeItemChanged"),e.cdm.setActiveItem(null),p.dataIsLoaded?n.UI.Spinner.hide():n.UI.Spinner.show(),d=p.navigationalViewModel?e.Exp.Data.getLocalDataSet(p.navigationalViewModel.uri):null,v=o,n.UI.Navigation.navigateInternal(p,a,d,v),e.cdm.currentExtension.onNavigateTo&&n.Internal.callPartnerScript(p,"onNavigateTo",p,e.cdm.currentContext)}function O(){var e=[],i,s,u,a,f,l=r.resources.oneTransparentPixel;a=n.extensions.slice(0).sort(function(e,t){var r=e.displayOrderHint-t.displayOrderHint;return r===0&&(r=n.Utilities.stringCompare(e.displayName,t.displayName)),r});for(i=0,s=a.length;i<s;i++){u=a[i],u.navItem=null;if(u.excludeFromNavigation)continue;f=!!u.navigationalViewModel||u.viewModels.length!==0,u.navItem={name:u.name,namePropertyName:"id",displayName:u.displayName,displayNamePropertyName:"displayName",tooltip:u.tooltip||u.displayName,iconUri:u.iconUri||l,iconShowCount:!!u.iconShowCount,iconInvertTextColor:!!u.iconInvertTextColor,showSpinner:f,isVisible:typeof u.isVisible=="undefined"?!0:u.isVisible,isSelected:!1,count:-1,displayError:"",displayWarning:u.displayWarning},e.push(u.navItem)}o=e;for(i=0,s=a.length;i<s;i++)u=a[i],t.isFunction(u.activate)&&u.activate()}var s={count:"count",showSpinner:"showSpinner",displayError:"displayError",displayWarning:"displayWarning",name:"name",displayName:"displayName",tooltip:"tooltip",icon:"iconUri",collection:"navItems",isSelected:"isSelected"},o=null,u="#Workspace",a=e.location.hash,f=n.Utilities.isLocalStorageAvailable()&&localStorage.getItem("welcomeSkipOption")==="true"||e.environment&&e.environment.integrationPoints.EnableFrictionFreeUserExperience.Enabled?"#Workspace/Experiments/ListExperiments":"#Workspace/Home/",l=null,c=null;n.Namespace.define("Shell.UI",{Navigation:{WellKnownPropertyNames:s,getBasePath:h,getObservableExtensionBadge:v,selectExtension:m,currentLocation:y,navigate:b,calculateNavigationPath:w,crackNavigationPath:T,isNavigatedTo:x,expandDefaultHashPath:C,getHashPathType:N,navigateInternal:k,cdmNavigateTo:A,initializeNav:O,setConfirmNavigateAway:p,removeConfirmNavigateAway:d}})}(this,Shell,this.fx),function(e,t,n,r,i){function u(){return s?s:(s=new n.Communication.Sender("fx"),s)}function a(e){return function(){var n=t.Deferred(),r=[].slice.call(arguments),i=u();return i.getMethod(e).apply(i,[{complete:function(e){n.resolve(e)},error:function(e){n.reject(e)}}].concat(r)),n.promise()}}function f(r,i){var s=e.Exp.Data.getLocalDataSet(i),u=s.partialErrors,f=n.UI.Navigation.getObservableExtensionBadge(r);f&&f.setProperty(n.UI.Navigation.WellKnownPropertyNames.displayWarning,t.isArray(u)&&u.length>0?o.extensionDataLoadWarnings:""),a("Impl.UI.Notifications.DataLoad.handleExtensionDataLoadSuccess")(i,u)}function l(t,n){f(t,n),e.Exp.Data.addFetchStartListener(n,function(e,n){n.promise.then(function(e){f(t,e)})})}var s,o=r.getStrings("Shell.Data.Loader");n.Namespace.define("Exp.Data"),t(e.Exp.Data).on("navigationalViewModelDataSetLoad",function(e,t){l(t.extension,t.dataSetName)})}(this,jQuery,Shell,this.fx.resources),function(e,t,n,r){function i(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function s(e){return e===null||e===r}function o(e){return e===null||e===r||typeof e=="object"?"":e.toString()}function u(e,t){var n=e[t];return s(n)?"":n}var a=0,f=function(e){var t=e.descending?-1:1,n=-t,r=e.property,i="cachedSortProperty"+Math.floor(Math.random()*1e4).toString(),s=function(e,r){var s=e[i],o=r[i];return s==o||s instanceof Date&&o instanceof Date&&!(s<o||s>o)?0:s>o?t:n};return s.preSort=function(e){var t,n,s,o;for(t=0,n=e.length;t<n;t++)s=e[t],o=u(s,r),typeof o=="string"&&(o=o.toLowerCase()),s[i]=o},s.postSort=function(e){var t,n;for(t=0,n=e.length;t<n;t++)delete e[t][i]},s},l=function(e){if(this._refresh===r)return new n.Data.LocalDataSource(e);this._id="LocalDataSource"+(a++).toString();var i=this,s;if(!e||!e.input)throw"Supply the 'input' option when instantiating a LocalDataSource";t.isArray(e.input)?(this._inputDataSource=null,this._input=e.input):(s=this._inputDataSource=e.input,this._input=s.items,this.dataSetName=s.dataSetName,t(s).on("refreshStart."+this._id,function(e,t){i._onInputDataSourceRefreshStart(t.promise)})),t([this._input]).on("arrayChange."+this._id,function(e,t){i._onArrayChanged(e,t)}),this._manualRefresh=e&&!!e.manualRefresh,this._inputDataSourceRefreshInProgress=!1,this._inputArrayChanges=[],this._super.constructor.call(this,e),this._managePropertyChangeListeners(this._input),this._setNeedRefresh()},c={_dispose:function(){t([this._input]).off("arrayChange."+this._id),this._managePropertyChangeListeners(null,this.items),this._inputDataSource&&t(this._inputDataSource).off("refreshStart."+this._id)},_setFilter:function(e){return e&&this._createFilterFunction(e)},_refresh:function(e){var n=this,r=t.Deferred(),i=function(){n._refreshItems(),r.resolve()};return e&&!!e.all&&this._inputDataSource?(this._inputDataSourceRefreshInProgress=!0,this._inputDataSource.refresh({all:!0}).always(function(){n._inputDataSourceRefreshInProgress=!1}).then(function(){if(n._isDisposed())return;i()},function(e,t,i){if(n._isDisposed())return;r.reject(e,t,i)})):i(),r.promise()},_setNeedRefresh:function(e){this._inputArrayChanges.push(e);if(!this._manualRefresh){var t=this._startRefresh();this._refreshItems(),t.resolve()}else this._needRefresh=!0},_createFilterFunction:function(e){if(t.isFunction(e))return e;var n=this._normalizeFilter(e),r=[],i,s,o;for(o=0;o<n.length;o++)i=n[o],t.isFunction(i)?r.push(i):(s=this._createFilterPartFunction(i.property,i.operator,i.value),r.push(s));return function(e){for(var t=0;t<r.length;t++)if(!r[t](e))return!1;return!0}},_createFilterPartFunction:function(e,n,r){var i=this,s,a,f;switch(n){case"<":s=function(e){return function(t){return t<e}}(r);break;case"<=":s=function(e){return function(t){return t<=e}}(r);break;case"==":s=function(e){return function(t){return t==e}}(r);break;case"!=":s=function(e){return function(t){return t!=e}}(r);break;case">=":s=function(e){return function(t){return t>=e}}(r);break;case">":s=function(e){return function(t){return t>e}}(r);break;case"Contains":s=function(e){return function(t){return o(t).toLowerCase().indexOf(e)>=0}}(o(r).toLowerCase());break;case"||":return a=t.map(r,function(e){return i._createFilterFunction(e)}),function(e){return function(t){for(f=0;f<e.length;f++)if(e[f](t))return!0;return!1}}(a);default:throw"Unrecognized filter operator."}return function(e){return function(t){var n=u(t,e);return s(n)}}(e)},_getSortFunction:function(){var e;return this._sort?t.isFunction(this._sort)?this._sort:t.isArray(this._sort)?(t.each(this._sort,function(n,r){var i=t.isFunction(r)?r:f(r);e?e=function(e,n){var r=function(t,r){var i=e(t,r);return i===0?n(t,r):i};if(t.isFunction(e.preSort)||t.isFunction(n.preSort))r.preSort=function(r){t.isFunction(e.preSort)&&e.preSort(r),t.isFunction(n.preSort)&&n.preSort(r)};if(t.isFunction(e.postSort)||t.isFunction(n.postSort))r.postSort=function(r){t.isFunction(e.postSort)&&e.postSort(r),t.isFunction(n.postSort)&&n.postSort(r)};return r}(e,i):e=i}),e):f(this._sort):null},_applyQuery:function(){var e=this._input,n=this,r,i=this._getSortFunction(),s,o,u;return this._filter?r=t.grep(e,function(e,t){return n._filter(e)}):r=e,i?(r===e&&(r=r.slice(0)),t.isFunction(i.preSort)&&i.preSort(r),s=(r.stableSort||r.sort).call(r,i),t.isFunction(i.postSort)&&i.postSort(s)):s=r,o=this._paging.skip||0,u=o>0?s.slice(o):s,this._paging.take&&(u=u.slice(0,this._paging.take)),{items:u,filteredTotalCount:s.length,totalCount:e.length}},_onArrayChanged:function(e,t){if(this._inputDataSourceRefreshInProgress)return;var n;if(this._shouldDetermineNeedRefresh()){switch(t.change){case"insert":this._managePropertyChangeListeners(t.items),n=this._onArrayInsert(t.items);break;case"remove":this._managePropertyChangeListeners(null,t.items),n=this._onArrayRemove(t.items);break;case"refresh":this._managePropertyChangeListeners(this.items,t.oldItems),n=this._onArrayRefresh();break;default:throw"Unknown array operation '"+t.change+"'."}n&&this._setNeedRefresh(t)}},_onArrayInsert:function(e){var n,r=this,i;return e.length>0&&(i=!this._filter||t.grep(e,function(e){return r._filter(e)}).length>0,i&&(n=!0)),n},_onArrayRemove:function(e){var n,r=this,i;return this._paging.take>0||this._paging.skip>0?n=!0:(i=t.grep(e,function(e){return r._haveItem(e)}).length>0,i&&(n=!0)),n},_onArrayRefresh:function(){var e,t=this._applyQuery();return this.totalCount!==t.totalCount?e=!0:e=!i(this.items,t.items),e},_onPropertyChanged:function(e,n,r){if(this._inputDataSourceRefreshInProgress)return;var i;this._shouldDetermineNeedRefresh()&&(this._haveItem(e)?this._filter&&!this._filter(e)?i=!0:this._sort&&(t.isFunction(this._sort)?i=!0:t.isArray(this._sort)?i=t.grep(this._sort,function(e){return e.property===n}).length>0:i=this._sort.property===n):this._filter&&this._filter(e)&&(i=!0),i&&this._setNeedRefresh())},_shouldDetermineNeedRefresh:function(){return!this._needRefresh||this._canApplyPassThroughOptimization()},_canApplyPassThroughOptimization:function(){return t.grep(this._inputArrayChanges,function(e){return e&&(e.change==="insert"||e.change==="remove")}).length===this._inputArrayChanges.length},_refreshItems:function(){var e,n=this,r;this._inputArrayChanges.length&&(!this.isReset&&!this._haveQuery()&&this._canApplyPassThroughOptimization()&&(t.each(this._inputArrayChanges,function(e,r){r.change==="insert"?(t.observable(n.items).insert(r.index,r.items),t.observable(n).setProperty({filteredTotalCount:n.filteredTotalCount+r.items.length,totalCount:n.totalCount+r.items.length})):(t.observable(n.items).remove(r.index,r.items.length),t.observable(n).setProperty({filteredTotalCount:n.filteredTotalCount-r.numToRemove,totalCount:n.totalCount-r.numToRemove}))}),this._inputDataSource&&t.observable(this.partialRefreshErrors).refresh(this._inputDataSource.partialRefreshErrors),e=!0),this._inputArrayChanges.length=0),e||(r=this._applyQuery(),i(this.items,r.items)||t.observable(this.items).refresh(r.items),t.observable(this).setProperty({filteredTotalCount:r.filteredTotalCount,totalCount:r.totalCount}),this._inputDataSource&&t.observable(this.partialRefreshErrors).refresh(this._inputDataSource.partialRefreshErrors)),this._needRefresh=!1},_haveQuery:function(){return!!this._filter||!!this._sort||this._paging.skip>0||!s(this._paging.take)},_managePropertyChangeListeners:function(e,n){var r="propertyChange."+this._id,i=this;t(n).off(r),t(e).on(r,function(e,t){i._onPropertyChanged(e.target,t.path,t.value)})},_onInputDataSourceRefreshStart:function(e){if(this._manualRefresh)this._setNeedRefresh();else{this._inputDataSourceRefreshInProgress=!0;var t=this,n=this._startRefresh();e.always(function(){t._inputDataSourceRefreshInProgress=!1}).then(function(){if(t._isDisposed())return;t._refreshItems(),n.resolve()},function(e,r,i){if(t._isDisposed())return;n.reject(e,r,i)})}}};n.Namespace.define("Shell.Data",{LocalDataSource:Shell.Class.derive(Shell.Data.DataSource,l,c)})}(this,jQuery,Shell),function(e,t){function s(){return r?r:(r=new e.Communication.Sender("fx"),r)}function o(e,t){return"[object]"}function u(e,t,n){c(e,t,Shell.Diagnostics.LogEntryLevel.error,n)}function a(e,t,n){c(e,t,Shell.Diagnostics.LogEntryLevel.warning,n)}function f(e,t,n){c(e,t,Shell.Diagnostics.LogEntryLevel.information,n)}function l(e,t,n){c(e,t,Shell.Diagnostics.LogEntryLevel.verbose,n)}function c(e,t,n,r){var i="";typeof t=="object"?i=o(t,4):typeof t=="undefined"?i="[undefined]":typeof t=="function"?i="[function]":t!==null?i=t.toString():i="[null]",s().getMethod("Impl.Diagnostics.Log.writeEntry")(e,i,n,r)}function h(e,t,n,r,i){s().getMethod("Impl.Diagnostics.Log.exception")(e,t,n,r,i)}function p(e,t,n,r,i,o){s().getMethod("Impl.Diagnostics.Log.startup")(e,t,n,r,i,o)}function d(e,t,n,r){s().getMethod("Impl.Diagnostics.Log.viewSwitch")(e,t,n,r)}function v(e,t,n,r){s().getMethod("Impl.Diagnostics.Log.clientAction")(e,t,n,r)}function m(e,t,n){window.location.hostname!==""&&s().getMethod("Impl.Diagnostics.Log.customEvent")(e,t,n)}function g(e,t,n,r,i,o,u){s().getMethod("Impl.Diagnostics.Log.clientScenario")(e,t,n,r,i,o,u)}function y(e,t,n,r){r&&r.toJSON&&delete r.toJSON,s().getMethod("Impl.Diagnostics.Log.performance")(e,t,n,r)}function b(e,t,n,r){s().getMethod("Impl.Diagnostics.Log.traceEvent")(e,t,n,r)}function w(){s().getMethod("Impl.Diagnostics.Log.traceNavigation")()}function E(e,t){s().getMethod("Impl.Diagnostics.Log.feedbackInfo")(e,t)}function S(e,t,r,i,s,o){var u=n.FeatureId[e],a=n.FeatureId[t];x(e,u,t,a,r,i,s,o)}function x(e,t,n,r,i,o,u,a){window.location.hostname!==""&&s().getMethod("Impl.Diagnostics.Log.featureUsage")(e,t,n,r,i,o,u,a)}function T(e){if(typeof e!="string"||e.length===0)throw"Performance marker key must be a non empty string";i[e]=new Date}function N(e,t,n){var r=new Date,s=null,o;if(typeof e!="string"||e.length===0)throw"Performance marker key must be a non empty string";e in i&&(s=i[e],delete i[e]),s!==null?(o=(r.getTime()-s.getTime())/1e3,y(e,o,t,n)):u(e,"Shell.Diagnostics.Telemetry.timerStopAndLog() - marker name '"+e+"' cannot be found.",n)}function C(e){this.key=e,this.start=new Date}function k(e){return new C(e)}var r,i={};C.prototype={start:function(){this.start=new Date},end:function(e,t){y(this.key,(new Date-this.start)/1e3,e,t)}},e.Namespace.define("Shell.Diagnostics",{LogEntryLevel:{error:"error",warning:"warning",information:"information",verbose:"verbose"},Log:{error:u,warning:a,info:f,verbose:l,writeEntry:c,exception:h},Telemetry:{performance:y,timerStart:T,timerStopAndLog:N,startup:p,viewSwitch:d,clientAction:v,customEvent:m,clientScenario:g,traceEvent:b,traceNavigation:w,getNewTimer:k,feedbackInfo:E,featureUsage:S,featureUsageEx:x}})}(Shell),function(e,t,n){function r(n){t.Internal.Rpc.RpcClient.rpcInvokeRequestResponseWithPromise("Impl.Extensions.add",n).then(function(n){var r,i,s;t.Utilities.isArray(n)||(n=[n]),r=n.length;for(i=0;i<r;i++)s=e[n[i].name],typeof s!="undefined"&&typeof s.init=="function"&&s.init.call(n[i])})}function i(e){return t.Internal.Rpc.RpcClient.rpcInvokeOneWay("Impl.Extensions.activate",e),t.extensionIndex[e.name]=e,t.extensions.push(e),e}function s(e,n){t.Internal.Rpc.RpcClient.rpcInvokeOneWay("Impl.Extensions.Current.showCategory",e,n)}t.Namespace.define("Shell.Extensions",{add:r,activate:i,Current:{showCategory:s}})}(this,Shell),function(e,t){var n=["add","previous","close","blank","clock","copy","forward","download","edit","help","info","link","next","power","redo","connect","reimage","repair","undo","save","message","play","stop","confirm","swap","delete","unlink","upload","tools","downloadpackage","capture","key","metric","offline","online","orderedlist","group","webmatrix","visualstudio","remoteconfig","pause","manageexternal","dashboard","connectioninfo","additem","publish","unpublish","encode","upgrade","contactsettings","sync","select","dataset","browse","register","truncate","publishToCommunity","rename","notebook","submitCompetition","deployWebService","addToProject"];e.Namespace.define("Shell.UI.Icons"),n.forEach(function(t){e.UI.Icons[t]={sprite:t}})}(Shell),function(e,t,n,r,i){var s=0,o=-99999,u=-99999,a=2e3,f=2e3,l="__fx-balloon",c="fx-balloon-hidden",h="<div class='fx-balloon-pointer'></div><div class='fx-balloon-content'>{{:html}}</div>",p=e.templates(h),d=[],v={_documentClickHandler:null,_targetBalloon:null,_targetClicked:!1,_timeoutHandler:null,_delayLength:1e3,_targetActive:!1,_locked:!1,setLocked:function(){v._locked=!0},setUnlocked:function(){v._locked=!1},_hideBalloon:function(e){v._locked||v._targetBalloon&&v._targetBalloon!==e&&(v._targetBalloon.hide(),v._targetBalloon=null,v._targetClicked=!1,v._targetActive=!1)},_cancelHandler:function(){v._locked||(v._timeoutHandler&&n.clearTimeout(v._timeoutHandler),v._timeoutHandler=null)},reset:function(){v._locked=!1,v._targetBalloon=null,v._targetClicked=!1,v._cancelHandler(),v._targetActive=!1},setActive:function(){v._locked||(v._targetActive=!0)},setInactive:function(){v._locked||(v._targetActive=!1)},cancelHideTimeout:function(){v._locked||v._cancelHandler()},targetClicked:function(e){v._locked||(v.hideVisibleImmediately(e),v._targetClicked=!0)},hideVisibleImmediately:function(e){v._locked||(v._cancelHandler(),v._hideBalloon(e))},setupHideTarget:function(e){v._locked||(v._targetBalloon&&v._targetBalloon!==e&&v.hideVisibleImmediately(),v._targetBalloon=e)},setupHideTimeout:function(e){v._locked||(v._targetBalloon&&v._targetBalloon!==e?v.hideVisibleImmediately():v.cancelHideTimeout(),v._targetBalloon=e,v._timeoutHandler=n.setTimeout(function(){v._hideBalloon(),v._timeoutHandler=null},v._delayLength))}};e.widget("fx.fxBalloon",{options:{html:"",position:"right",appendTo:"body",hideAfter:0,closeOtherBalloons:!1,delayHide:null,triggerHide:null},_originalParent:null,_balloonMeasurer:null,_previousBox:null,_id:null,_mouseUpHandler:null,_mouseEnterHandler:null,_mouseLeaveHandler:null,_create:function(){this.options.html||(this.options.html=this.element.html());if(!/^(top|right|bottom|left)$/.test(this.options.position))throw"Balloon position has to be either: top, right, bottom, or left";if(this.options.hideAfter){this.options.delayHide=!0,this.options.hideAfter=parseInt(this.options.hideAfter,10);if(isNaN(this.options.hideAfter))throw"Balloon hideAfter must be a number if specified";v._delayLength=this.options.hideAfter}this.options.triggerHide&&(this.options.delayHide=!0),typeof this.options.horizontalOffset=="number"&&(this.options.horizontalOffset={preferred:this.options.horizontalOffset,alternate:this.options.horizontalOffset}),typeof this.options.verticalOffset=="number"&&(this.options.verticalOffset={preferred:this.options.verticalOffset,alternate:this.options.verticalOffset}),this.options.appendTo&&(this._originalParent=this.element.parent(),this.element.appendTo(this.options.appendTo)),this._balloonMeasurer=e("<div/>").css({position:"absolute",left:o,top:u,width:a,height:f}),this.element.attr({"aria-hidden":"true","aria-live":"assertive","aria-atomic":"true",role:"alert",id:this.getElementId()}).addClass("fx-balloon").css("z-index",r.getNextZIndex()).html(p.render(this.options)),t._create.call(this)},_destroy:function(){this.element.removeAttr("role aria-hidden aria-live aria-atomic").removeClass("fx-balloon").removeClass(c).html(this.options.html),this._removePointerClass(),this._originalParent&&(this.element.appendTo(this._originalParent),this._originalParent=null),this._cleanupDelayEvents(),this._super()},_documentClick:function(t){var n=e(t.target).closest(".fx-balloon");v._targetClicked?v._targetClicked=!1:n.length===0&&v.hideVisibleImmediately()},setActive:function(){v.setActive(this)},setInactive:function(){v.setInactive()},hideVisibleImmediately:function(){v.hideVisibleImmediately(this)},cancelDelayHide:function(){v.cancelHideTimeout()},setupTarget:function(){v.setupHideTarget(this)},targetClicked:function(){v.targetClicked(this)},setupDelay:function(){v.setupHideTimeout(this)},setLocked:function(){v.setLocked()},setUnlocked:function(){v.setUnlocked()},show:function(t){var i,s={},o,u,a,f,l,h,p,m,g,y="preferred",b,w,E,S=this;if(this.options.delayHide&&v._locked)return;t=t||this._previousBox,this._previousBox=t,this._cleanupDelayEvents();if(this.options.closeOtherBalloons)while(d.length>0)i=d.splice(0,1)[0],i!==this&&i.hide();this._removePointerClass();if(t)do{a=this.element.offsetParent(),f=this.options.position,l=this._getAlternatePosition(f),h=this._getSidePositionKey(f),p=this._getOtherSidePositionKey(f),m=this._getSizeKey(f),g=this._getOtherSizeKey(f),a[0].tagName==="BODY"&&(a=e(n)),o=this._getBalloonBox(t,f,w),u=this._getBalloonBox(t,l,w),b=o;switch(f){case"right":case"bottom":t[h]+t[m]+o.preferred[h]+o[m]>a[m]()&&(b=u);break;case"left":case"top":t[h]+o.preferred[h]<0&&(b=u)}t[p]+b.preferred[p]+b[g]>a[g]()&&t[p]+b.alternate[p]>0&&(y="alternate"),s={left:t.left+b[y].left,top:t.top+b[y].top},s.top=Math.max(0,s.top),s.left=Math.max(0,s.left),b===o?this.element.addClass("fx-balloon-box-"+f):this.element.addClass("fx-balloon-box-"+l),y==="preferred"?this.element.addClass("fx-balloon-box-position-preferred"):this.element.addClass("fx-balloon-box-position-alternate"),this.element.css(s),E=w,w=parseInt(this.element.css("width"),10)}while(w!==E&&w!==b.width);this.options.delayHide&&(this.element.on("mouseup",this._mouseUpHandler=function(){v.cancelHideTimeout()}).on("mouseenter",this._mouseEnterHandler=function(){v.cancelHideTimeout()}).on("mouseleave",this._mouseLeaveHandler=function(){v._targetActive||v.setupHideTimeout(S)}),v._documentClickHandler||e("html").on("click",v._documentClickHandler=function(){return S._documentClick.apply(S,arguments)})),d.splice(0,0,this),this.element.attr("aria-hidden","false").removeClass(c),this.options.triggerHide&&(v._targetClicked=!0,this._mouseLeaveHandler()),r.forceRead(this.element[0])},hide:function(e){e&&v.reset();if(this.element===v._targetActive)return;this._cleanupDelayEvents(),this.element.attr("aria-hidden","true").addClass(c)},getElementId:function(){return this.element[0].id||this._id||(this._id=l+s++)},_cleanupDelayEvents:function(){this._mouseUpHandler&&(this.element.off("mouseup",this._mouseUpHandler),this._mouseUpHandler=null),this._mouseEnterHandler&&(this.element.off("mouseenter",this._mouseEnterHandler),this._mouseEnterHandler=null),this._mouseLeaveHandler&&(this.element.off("mouseleave",this._mouseLeaveHandler),this._mouseLeaveHandler=null),v._documentClickHandler&&(e("html").off("click",v._documentClickHandler),v._documentClickHandler=null)},_getAlternatePosition:function(e){switch(e){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right"}},_getSidePositionKey:function(e){switch(e){case"top":case"bottom":return"top";case"left":case"right":return"left"}},_getOtherSidePositionKey:function(e){switch(e){case"top":case"bottom":return"left";case"left":case"right":return"top"}},_getSizeKey:function(e){switch(e){case"left":case"right":return"width";case"top":case"bottom":return"height"}},_getOtherSizeKey:function(e){switch(e){case"left":case"right":return"height";case"top":case"bottom":return"width"}},_removePointerClass:function(){this.element.removeClass("fx-balloon-box-top fx-balloon-box-right fx-balloon-box-bottom fx-balloon-box-left fx-balloon-box-position-preferred fx-balloon-box-position-alternate")},_readCssAndSetBaseline:function(e,t,n){var r={left:parseInt(this.element.css("left"),10),top:parseInt(this.element.css("top"),10),alignment:this.element.css("vertical-align")},i=this._getOtherSidePositionKey(n),s=this._getOtherSizeKey(n);switch(n){case"right":r.left+=t.width;break;case"left":r.left-=e.width;break;case"top":r.top-=e.height;break;case"bottom":r.top+=t.height}switch(r.alignment){case"bottom":r[i]-=e[s]-t[s];break;case"super":r[i]-=e[s];break;case"baseline":r[i]+=t[s];break;case"middle":r[i]-=(e[s]-t[s])/2}return r},_getBalloonBox:function(t,r,i){var s=this.element.parent(),o="fx-balloon-box-"+r,u,a,f;return this._balloonMeasurer.appendTo(n.document.body),i=i||"",this.element.css({left:"",top:"",bottom:"",right:"",width:i}).addClass(o),this.element.appendTo(this._balloonMeasurer),u={width:this.element.width(),height:this.element.height()},this.element.removeClass("fx-balloon-position-alternate").addClass("fx-balloon-position-preferred"),a=this._readCssAndSetBaseline(u,t,r),this.element.removeClass("fx-balloon-position-preferred").addClass("fx-balloon-position-alternate"),f=this._readCssAndSetBaseline(u,t,r),this.element.removeClass("fx-balloon-position-alternate"),e.extend(u,{preferred:a,alternate:f}),this.element.removeClass(o).appendTo(s),this._balloonMeasurer.detach(),u},_setOption:function(e,n){switch(e){case"html":this.element.find(".fx-balloon-content").html(n);break;case"position":this.element.attr("aria-hidden")==="false"&&(this.options.position=n,this.show(this._previousBox))}return t._setOption.apply(this,arguments)}})}(jQuery,jQuery.Widget.prototype,this,this.fx.utilities),function(e,t,n,r){var i=t.prototype,s="fx.fxBusinessBalloon",o="fx-businessballoon-expanded";e.widget(s,t,{options:{targetFocusElement:null},_focusHandler:null,_blurHandler:null,_focusCount:0,_create:function(){this.element.addClass("business"),this._setOption("targetFocusElement",this.options.targetFocusElement),i._create.call(this)},_destroy:function(){this.element.removeClass("business").removeClass(o),this._clearFocusElementHandlers(),this._super()},_setOption:function(e,t){return e==="targetFocusElement"&&(t?this._setTargetFocusElement(t):this._clearFocusElementHandlers()),i._setOption.apply(this,arguments)},_setTargetFocusElement:function(t){var n=this,r=e(t);this._clearFocusElementHandlers(),r.on("focusin",this._focusHandler=function(){n._focusCount++,n.element.addClass(o)}).on("focusout",this._blurHandler=function(){n._focusCount--,n.element.removeClass(o)})},_clearFocusElementHandlers:function(){var t=e(this.options.targetFocusElement);this._focusHandler&&(t.off("focusin",this._focusHandler),this._focusHandler=null),this._blurHandler&&(t.off("focusout",this._blurHandler),this._blurHandler=null)}})}(jQuery,jQuery.fx.fxBalloon,this),function(e,t,n,r){var i={validation:t.templates("{{if links}}<div class='validation'><div class='fx-balloon-validation-content'>{{:content}}</div><ul class='fx-balloon-validation-links'>{{for links}}<li>{{if icon}}<img src='{{url:icon}}' alt='' />{{/if}}<a href='{{url:url}}' target='_blank'>{{>text}}</a></li>{{/for}}</ul></div>{{else}}<div class='validation fx-balloon-validation-content'>{{:content}}</div>{{/if}}"),help:t.templates("<div class='help'>{{if title}}<div class='fx-balloon-help-title'>{{>title}}</div>{{/if}}<div class='fx-balloon-help-content'>{{:content}}</div>{{if links && links.length > 0}}<ul class='fx-balloon-help-links'>{{for links}}<li>{{if icon}}<img src='{{url:icon}}' alt='' />{{/if}}<a href='{{url:url}}' target='_blank'>{{>text}}</a></li>{{/for}}</ul>{{/if}}</div>"),business:t.templates("<div>{{:content}}</div>")},s=function(n,r,s){var o;if(n in i)return r=r||{},r.position=r.position||"right",r.content=e.Utilities.htmlEncode(r.content||"").replace(/\r\n/g,"<br />").replace(/\n/g,"<br />"),n==="business"?o=t(i[n].render(r)).fxBusinessBalloon(r):o=t(i[n].render(r)).fxBalloon(r),s||(E[o]={handle:o,title:r.title,content:r.content,links:r.links}),o;throw"No template found"},o=function(e){z(e,"setActive")},u=function(e){z(e,"setInactive")},a=function(e){z(e,"hideVisibleImmediately")},f=function(e){z(e,"setupTarget")},l=function(e){z(e,"targetClicked")},c=function(e){z(e,"setupDelay")},h=function(e){z(e,"setLocked")},p=function(e){z(e,"setUnlocked")},d=function(e,t){z(e,"hide",t)},v=function(e){z(e,"destroy"),e&&e.remove()},m=function(e,t){z(e,"show",t)},g=function(e){var n=t(e),r=n.offset();return t.extend(r,{width:n.outerWidth(),height:n.outerHeight()})},y={position:"top"},b={position:"right"},w=function(e,t){var n=!0,r;if(e===t)n=!0;else if(!e||!t||e.length!==t.length)n=!1;else for(r=0;r<e.length;r++)if(!(n=e[r]===t[r]))break;return n},E={},S=function(e,t){return t&&(!E[e]||E[e].title!==t.title||E[e].content!==t.content||!w(E[e].links,t.links))&&(E[e]&&v(E[e].handle),E[e]={handle:s("help",t,!0),title:t.title,content:t.content,links:t.links},E[e].handle.attr("data-balloon-for",e)),E[e]?E[e].handle:null},x=function(e,t){return t&&(!E[e]||E[e].content!==t.content||!w(E[e].links,t.links))&&(E[e]&&v(E[e].handle),E[e]={handle:s("validation",t,!0),content:t.content,links:t.links},E[e].handle.attr("data-balloon-for",e)),T(e)},T=function(e){return E[e]?E[e].handle:null},N=function(e){v(T(e)),delete E[e]},C=function(e){o(T(e))},k=function(e){a(T(e))},L=function(e){u(T(e))},A=function(e){l(T(e))},O=function(e){c(T(e))},M=function(e){h(T(e))},_=function(e){p(T(e))},D=function(e){f(T(e))},P=function(e){d(T(e))},H=function(e,n,r,i,s,o){i&&S(e,t.extend({},b,{title:r,content:i,links:s,delayHide:o}))},B=function(e,n,r,i,s){r=r||[],r.length>0&&x(e,t.extend({},y,{content:r.join("\n"),links:i,delayHide:s}))},j=function(e,n,r,i,s,o){i&&m(S(e,t.extend({},b,{title:r,content:i,links:s,delayHide:o})),n)},F=function(e,n,r,i,s){r=r||[],r.length>0&&m(x(e,t.extend({},y,{content:r.join("\n"),links:i,delayHide:s})),n)},I=function(e){switch(e.eventType){case"show":H(e.id,e.box,e.title,e.content,e.links,e.delayHide),k(e.id),j(e.id,e.box,e.title,e.content,e.links,e.delayHide),D(e.id),C(e.id);break;case"leaveButton":L(e.id),O(e.id);break;case"hide":L(e.id),k(e.id),P(e.id);break;case"clickOn":H(e.id,e.box,e.title,e.content,e.links,e.delayHide),_(e.id),k(e.id),j(e.id,e.box,e.title,e.content,e.links,e.delayHide),D(e.id),C(e.id),A(e.id),M(e.id);break;case"clickOff":_(e.id),L(e.id),k(e.id),P(e.id);break;case"setUnlocked":_(e.id);break;case"destroy":_(e.id),N(e.id)}},q=function(e){switch(e.eventType){case"immediate":e.message.length===0?(k(e.id),P(e.id)):e.hasFocus&&(B(e.id,e.box,e.message,e.links,!0),k(e.id),F(e.id,e.box,e.message,e.links,!0),D(e.id),C(e.id),A(e.id));break;case"mouseover":B(e.id,e.box,e.message,e.links,!0),k(e.id),F(e.id,e.box,e.message,e.links,!0),D(e.id);break;case"focus":B(e.id,e.box,e.message,e.links,!0),k(e.id),F(e.id,e.box,e.message,e.links,!0),D(e.id),C(e.id);break;case"mouseout":if(e.hasFocus){D(e.id);break}O(e.id);break;case"blur":L(e.id),O(e.id);break;case"click":A(e.id);break;case"destroy":N(e.id)}},R=function(){var e;for(e in E)E.hasOwnProperty(e)&&P(e)},U=function(e,t){t=t||{};switch(t.balloonType){case"validation":q(t);break;case"balloonIcon":I(t)}},z=function(e){var t=Array.prototype.slice.apply(arguments);if(t.length<2)throw"not enough arguments to callWidgetFunction";t=t.slice(1),e&&(e.is(":data(fx-fxBusinessBalloon)")?e.fxBusinessBalloon.apply(e,t):e.is(":data(fx-fxBalloon)")&&e.fxBalloon.apply(e,t))};e.Namespace.define("Shell.UI",{Balloon:{create:s,destroy:v,hide:d,show:m,getBoundaries:g,hideBalloons:R}}),window.require(["datalabext"],function(){t(n.document).on("balloon",function(e,t){U.apply(this,arguments)})})}(Shell,jQuery,this),function(e,t,n){function a(){return u?u:(u=new t.Communication.Sender("fx"),u)}function f(e){var n=new t.Communication.Sender("fx");e._sender=n,e.sync()}function l(e){e._sender&&(e._sender.getMethod("Impl.UI.Drawer.removeMenuItem")(e._handle),e._handle=null)}function c(e){return a().getMethod("Impl.UI.Drawer.addDrawerOpenedCallback")(e)}function h(e){a().getMethod("Impl.UI.Drawer.removeDrawerOpenedCallback")(e)}function p(e){a().getMethod("Impl.UI.Drawer.selectMenuPath")(e)}function d(e){a().getMethod("Impl.UI.Drawer.setHelpUrl")(e)}function v(){a().getMethod("Impl.UI.Drawer.open")()}function m(e){a().getMethod("Impl.UI.Drawer.openHelp")(e)}function g(){a().getMethod("Impl.UI.Drawer.close")()}function y(e){return a().getMethod("Impl.UI.Drawer.Menu.exists")(e)}function b(e){return a().getMethod("Impl.UI.Drawer.Menu.getChildren")(e)}var r,i,s,o,u;r=t.Class.define(function(e,t,n,r,i,s){this._extension=e,this._parentPath=t,this._id=n,this._text=r,this._image=i,this._description=s,t&&t!==""?this.path=t+"/"+n:this.path=n},{_sender:null,_handle:null,_type:"",_id:null,_parentPath:null,_extension:null,_text:null,_image:null,_description:null,_displayOrder:0,_disabled:!1,_isPreviewFeature:!1,path:null,setDisplayOrder:function(e){this._displayOrder=e},setDisabled:function(e){this._disabled=e,this._checkSync()},setText:function(e){this._text=e,this._checkSync()},setImage:function(e){this._image=e,this._checkSync()},setDescription:function(e){this._description=e,this._checkSync()},setIsPreviewFeature:function(e){this._isPreviewFeature=e,this._checkSync()},sync:function(){var e=this;this._handle=Impl.UI.Drawer.syncMenuItem(this._handle,this,this._handle===null?function(){e._sender=null,e._handle=null}:null)},_checkSync:function(){this._handle&&this.sync()}}),i=t.Class.derive(r,function(e,t,n,i,s,o){r.prototype.constructor.call(this,e,t,n,i,s,o),this._type="container"},{}),s=t.Class.derive(r,function(e,t,n,i,s,o,u){r.prototype.constructor.call(this,e,t,n,i,s,o),this._type="action",this._execute=u},{_execute:null}),o=t.Class.derive(s,function(e,t,n,i,s,o,u,a,f,l,c,h,p){r.prototype.constructor.call(this,e,t,n,i,s,o),this._type="quickAdd",this._template=u,this._label=a,this._data=f,this._opening=l,this._open=c,this._ok=h,this._close=p},{_extension:null,_template:null,_label:null,_data:null,_opening:null,_open:null,_ok:null,_close:null,setExtension:function(e){this._extension=e,this._checkSync()},setTemplate:function(e){this._template=e,this._checkSync()},setLabel:function(e){this._label=e,this._checkSync()},setData:function(e){this._data=e,this._checkSync()}}),t.Namespace.define("Shell.UI.Drawer.Menu",{ActionMenuItem:s,ContainerMenuItem:i,QuickAddMenuItem:o,add:f,exists:y,getChildren:b,remove:l,selectPath:p}),t.Namespace.define("Shell.UI.Drawer",{addDrawerOpenedCallback:c,open:v,openHelp:m,close:g,removeDrawerOpenedCallback:h,setHelpUrl:d})}(this,Shell),function(e,t,n){function s(e){var t,n=r.length;for(t=0;t<n;t++)if(r[t].canHandleNotification(e))return r[t];return null}function o(e){var t=s(e);t&&t.handleNotificationAdd(e)}function u(e){var t=s(e);t&&t.handleNotificationRemove(e)}function a(){this.canHandleNotification=function(e){return!1},this.handleNotificationAdd=function(e){},this.handleNotificationRemove=function(e){}}var r=[],i=t.getStrings("notifications.buttons");e.Namespace.define("Shell.UI",{Notifications:{add:o,remove:u,NotificationProcessor:a,addNotificationProcessor:function(e){r.push(e)},removeNotificationProcessor:function(e){for(var t=0;t<r.length;t++)if(r[t]===e){r.splice(t,1);break}}}}),e.Namespace.define("Shell.UI.Notifications.Severity",{information:"information",warning:"warning",error:"error"}),e.Namespace.define("Shell.UI.Notifications.Buttons",{ok:function(e){return{text:i.ok,class_:"dlwux-icon-behavior-ok",click:e}},close:function(e){return{text:i.close,class_:"dlwux-icon-behavior-close",click:e}},retry:function(e){return{text:i.retry,class_:"dlwux-icon-behavior-retry",click:e}},yes:function(e){return{text:i.yes,class_:"dlwux-icon-behavior-yes",click:e}},no:function(e){return{text:i.no,class_:"dlwux-icon-behavior-no",click:e}},cancel:function(e){return{text:i.cancel,class_:"dlwux-icon-behavior-cancel",click:e}},escalate:function(e){return{text:i.escalate,class_:"dlwux-icon-behavior-escalate",click:e}},details:function(e){return{text:i.details,class_:"dlwux-icon-behavior-details",click:e}},copy:function(e){return{text:i.copy,class_:"dlwux-icon-behavior-copy",click:e}},save:function(e){return{text:i.save,class_:"dlwux-icon-behavior-save",click:e}},scale:function(e){return{text:i.scale,class_:"dlwux-icon-behavior-scale",click:e}},pause:function(e){return{text:i.pause,class_:"dlwux-icon-behavior-pause",click:e}},stop:function(e){return{text:i.stop,class_:"dlwux-icon-behavior-stop",click:e}}}),e.Namespace.define("Shell.UI.Notifications.ButtonSets",{yesNo:function(t,n){return[e.UI.Notifications.Buttons.yes(t),e.UI.Notifications.Buttons.no(n)]},yesNoCancel:function(t,n,r){return[e.UI.Notifications.Buttons.yes(t),e.UI.Notifications.Buttons.no(n),e.UI.Notifications.Buttons.cancel(r)]}})}(Shell,this.fx.resources),function(e,t){function r(t){var n=new e.Communication.Sender("fx");t._sender=n,t.sync()}function i(e){e._sender&&(e._sender.getMethod("Impl.UI.Notifications.Confirmation.remove")(e._handle),e._handle=null)}var n;n=e.Class.define(function(e){this._widgetOptions={title:e,detailsText:"",detailsUrl:"",detailsUseHtml:!1,actions:[],focus:-1}},{_sender:null,_handle:null,_widgetOptions:null,setTitle:function(e){this._update("title",e)},setDetailsText:function(e){this._widgetOptions.detailsUrl="",this._update("detailsText",e||"")},setDetailsUseHtml:function(e){this._update("detailsUseHtml",!!e)},setDetailsUrl:function(e){this._widgetOptions.detailsText=null,this._update("detailsUrl",e||"")},setActions:function(e,n){var r=this;e&&e.forEach(function(e){var t=e.click;if(!t||typeof t=="function")e.click=function(){if(t&&t()===!1)return;i(r)}}),this._update("actions",e),this._update("focus",n===null||n===t?-1:n)},sync:function(){var e=this;this._sender&&(this._handle=this._sender.getMethod("Impl.UI.Notifications.Confirmation.sync")(this._handle,this,this._handle===null?function(){e._sender=null,e._handle=null}:null))},toJSON:function(e,t,n){return this._widgetOptions},_checkSync:function(){this._handle&&this.sync()},_update:function(e,t){this._widgetOptions[e]=t,this._checkSync()}}),function(){var t=new e.UI.Notifications.NotificationProcessor;t.canHandleNotification=function(e){return e instanceof n?!0:!1},t.handleNotificationAdd=function(e){r(e)},t.handleNotificationRemove=function(e){i(e)},e.UI.Notifications.addNotificationProcessor(t)}(),e.Namespace.define("Shell.UI.Notifications",{Confirmation:n})}(Shell),function(e,t,n,r){function s(){return i?i:(i=new n.Communication.Sender("fx"),i)}function o(e){return function(){var n=t.Deferred(),r=[].slice.call(arguments),i=s();return i.getMethod(e).apply(i,[{complete:function(e){n.resolve(e)},error:function(e){n.reject(e)}}].concat(r)),n.promise()}}function u(e,t){o("Impl.UI.Notifications.DataLoad.handleViewDataLoadSuccess")(e,t)}function a(e,t){o("Impl.UI.Notifications.DataLoad.handleViewDataLoadFailure")(e,t)}var i;n.Namespace.define("Shell.UI.Notifications.DataLoad",{handleDataLoadSuccess:u,handleDataLoadFailure:a})}(this,jQuery,Shell),function(e,t){function r(t){var n=new e.Communication.Sender("fx");t._sender=n,t.sync()}function i(e){e._sender&&(e._sender.getMethod("Impl.UI.Notifications.Notification.remove")(e._handle),e._handle=null)}var n;n=e.Class.define(function(e,t){this._widgetOptions={title:e,status:t,details:"",actions:[]}},{_sender:null,_handle:null,_widgetOptions:null,setTitle:function(e){this._update("title",e)},setStatus:function(e){this._update("status",e)},setDetailsText:function(e){this._update("detailsText",e)},setDetailsUseHtml:function(e){this._update("detailsUseHtml",!!e)},setDetailsUrl:function(e){this._widgetOptions.detailsText=null,this._update("detailsUrl",e||"")},setActions:function(e){var t=this;e&&e.forEach(function(e){var n=e.click;if(!n||typeof n=="function")e.click=function(){if(n&&n()===!1)return;i(t)}}),this._update("actions",e)},sync:function(){var e=this;this._sender&&(this._handle=this._sender.getMethod("Impl.UI.Notifications.Notification.sync")(this._handle,this,this._handle===null?function(){e._sender=null,e._handle=null}:null))},toJSON:function(e,t,n){return this._widgetOptions},_checkSync:function(){this._handle&&this.sync()},_update:function(e,t){this._widgetOptions[e]=t,this._checkSync()}}),function(){var t=new e.UI.Notifications.NotificationProcessor;t.canHandleNotification=function(e){return e instanceof n?!0:!1},t.handleNotificationAdd=function(e){r(e)},t.handleNotificationRemove=function(e){i(e)},e.UI.Notifications.addNotificationProcessor(t)}(),e.Namespace.define("Shell.UI.Notifications",{Notification:n})}(Shell),function(e,t){function o(t){var n=new e.Communication.Sender("fx");t._sender=n,t.sync()}function u(e){e._sender&&(e._sender.getMethod("Impl.UI.Notifications.Progress.remove")(e._handle),e._handle=null)}var n,r,i=0,s="__progressbox";n=e.Class.define(function(e,t,n,r){this._widgetOptions={code:s+i++,title:e,status:t},this._parent=r},{_parent:null,_widgetOptions:null,setTitle:function(e){this._update("title",e)},setStatus:function(e){this._update("status",e)},setDetailsText:function(e){this._update("detailsText",e)},setDetailsUrl:function(e){this._widgetOptions.detailsText=null,this._update("detailsUrl",e||"")},toJSON:function(){return this._widgetOptions},_update:function(e,t){this._widgetOptions[e]=t,this._parent._checkSync()}}),r=e.Class.define(function(e,t,n){this._widgetOptions={title:e,status:t,value:0,details:null,actions:[],indeterminate:n},this._steps=[],this.setDismiss()},{_sender:null,_handle:null,_widgetOptions:null,_steps:null,addStep:function(e,t,r){var i;return typeof arguments[0]!="number"&&(r=t,t=e,e=null),i=new n(t,r,e,this),this._steps.push(i),this._checkSync(),i},removeStep:function(e){for(var t=0;t<this._steps.length;t++)if(this._steps[t]===e){this._steps.splice(t,1);break}this._checkSync()},removeAllSteps:function(){this._steps=[],this._checkSync()},setClick:function(e){this._update("click",e)},setDismiss:function(e){var t=this;this._update("dismiss",function(){if(!e||typeof e=="function"){if(e&&e()===!1)return;u(t)}})},setDismissable:function(e){this._update("dismissable",e)},setTitle:function(e){this._update("title",e)},setStatus:function(e){/^error|warning|success$/.test(e)&&this._widgetOptions.indeterminate&&(this._widgetOptions.value=100,this._widgetOptions.dismissable=!0,this._widgetOptions.indeterminate=!1),this._update("status",e)},setValue:function(e){e===100&&(this._widgetOptions.dismissable=!0),this._update("value",e)},setDetailsText:function(e){this._update("detailsText",e)},setDetailsUrl:function(e){this._widgetOptions.detailsText=null,this._update("detailsUrl",e||"")},setActions:function(e){var t=this;e&&e.forEach(function(e){var n=e.click;if(!n||typeof n=="function")e.click=function(){if(n&&n()===!1)return;u(t)}}),this._update("actions",e)},sync:function(){var e=this;this._sender&&(this._handle=this._sender.getMethod("Impl.UI.Notifications.Progress.sync")(this._handle,this,this._handle===null?function(){e._sender=null,e._handle=null}:null))},toJSON:function(e,t,n){return{widgetOptions:this._widgetOptions,steps:this._steps}},_checkSync:function(){this._handle&&this.sync()},_update:function(e,t){this._widgetOptions[e]=t,this._checkSync()}}),function(){var t=new e.UI.Notifications.NotificationProcessor;t.canHandleNotification=function(e){return e instanceof r?!0:!1},t.handleNotificationAdd=function(e){o(e)},t.handleNotificationRemove=function(e){u(e)},e.UI.Notifications.addNotificationProcessor(t)}(),e.Namespace.define("Shell.UI.Notifications",{Progress:r})}(Shell),function(e,t,n,r){var i={},s="fxValidatorData",o="fxContainerValidatorData",u="fxValidationElements",a={delayed:!0,order:0},f={escapeAttributeValue:function(e){var t=new RegExp("([!\"#$%&'()*+,./:;<=>?@\\[\\\\\\]^`{|}~])","g");return e.replace(t,"\\$1")},checkable:function(e){return/radio|checkbox/i.test(e.type)},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return t("[name='"+this.escapeAttributeValue(n.name)+"']:checked").length}return e.length},getDependency:function(e){var n={};return t.each(t(e).data(s),function(){n[this.validator]=this.valid}),n},getModelPrefix:function(e){return e.substr(0,e.lastIndexOf(".")+1)},appendModelPrefix:function(e,t){return e.indexOf("*.")===0&&(e=e.replace("*.",t)),e},splitAndTrim:function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)},format:function(){var e=arguments[0],t=arguments[1],n,r,i;switch(typeof t){case"object":for(n in t)t.hasOwnProperty(n)&&(r=new RegExp("\\{:"+n+":\\}","gm"),e=e.replace(r,arguments[1][n]));break;default:for(n=0,i=arguments.length-1;n<i;n++)r=new RegExp("\\{"+n+"\\}","gm"),e=e.replace(r,arguments[n+1])}return e}},l=function(e,n,r){return t.fn[n]?t(e)[n](r):t(e)},c=function(e,n,r,s){if(!r&&!s||typeof r!="function")s=r,r=n,n=[];var o=i[e]||(i[e]=[]);return o.push({name:e,params:n,validate:r,options:t.extend({},a,s)}),this},h=function(e){var n=t(e),s=[],o,u=function(){var e="data-val-"+this.name,i=n.attr(e),o={};i!==r&&(e+="-",t.each(this.params,function(){o[this]=n.attr(e+this)}),s.push({validator:this.name,message:f.format(i,o),params:o,validate:this.validate,valid:null,options:this.options}))};if(n.data("val")===!0)for(o in i)i.hasOwnProperty(o)&&t.each(i[o],u);return s},p=function(e,n){var r=t(e),i=this.parse(r,{container:r,validateOnSubmit:!0});return t.data(r[0],u,i),m(i),v(i,n)},d=function(e){var n=t(e),r=this.parse(e,{container:null});return t.removeData(n[0],u),m(r)},v=function(e,n,r){return n&&t(e).each(function(){var e,i;i=t(this),e=i.data(o),e||(e=[],i.data(o,e)),e.push({validator:"group",message:"",params:{},validate:n||t.noop,valid:null,options:t.extend({group:!0,delayed:!0},r)})}),this},m=function(e,n){return t(e).each(function(){var e=t(this),r=e.data(o)||[],i=r.length-1;e.fxEditableControl("triggerMethod","resetValidation");if(n)for(;i>=0;i--)r[i].validate===n&&r.splice(i,1);r&&(!n||!r.length)&&e.removeData(o)}),this},g=function(e){var n=this,r=t.Event("submit.fxContainerValidate"),i=t(e),s=!1,o,a,f,l;return i.triggerHandler(r),r.isPropagationStopped()?(o=i.data(u),o&&(o.each(function(){a=n.getValidationData(this),f=E(a);if((f&1)===1)return t(this).fxEditableControl("triggerMethod","showValidationBalloon"),s=!0,!1;(f&2)===2&&(l=this)}),s||t(l).fxEditableControl("triggerMethod","showValidationBalloon")),!1):!0},y=function(e){switch(e){case"pending":return 2;case"resolved":return 4;case"rejected":return 1;default:return 0}},b=function(e){return y(e.state())},w=function(e){return e.valid!==!0&&e.valid!==!1&&e.valid!==null&&e.valid!==r},E=function(e){var t=0,n,r;if(e)for(r=0;r<e.length;r++)n=e[r],n.valid===!0?t|=4:n.valid===!1?t|=1:w(n)&&(t|=8|b(n.valid));return t},S=function(e){return!e||typeof e!="number"?"":(e&1)===1?"invalid":(e&2)===2?"pending":"valid"},x=function(e,n){var r=t(e),i=!n&&r.data(s),u=r.data(o);return i||(i=this.extractValidation(r),r.data(s,i)),u&&(i=i.concat(u)),i.sort(function(e,t){return e.options.order>t.options.order?1:e.options.order<t.options.order?-1:0}),i},T=function(e,t){var n=[],r,i;if(!t||t==="all")return e;for(i=0;i<e.length;i++)r=e[i],(r.options.delayed&&t==="delayed"||!r.options.delayed&&t==="immediate")&&n.push(r);return n},N=function(e){t(e).removeData(s)},C=function(e,r){var i=t(),s=t(e),o="input[data-val=true], select[data-val=true], textarea[data-val=true]",u=s.find(o).add(s.filter(o));return u.each(function(){var e=n.fx.utilities.attributesToObject(this,"data-fxcontrol"),s=t.extend({},e,r),o;switch(this.tagName.toUpperCase()){case"TEXTAREA":i=i.add(l(this,"fxValidation",s));break;case"SELECT":o=t(this).data("fxcontroltype")==="fxDropdown"?"fxDropdown":"fxSelectBox",i=i.add(l(this,o,s));break;case"INPUT":switch(this.type.toUpperCase()){case"TEXT":case"SEARCH":case"TEL":case"URL":case"EMAIL":case"PASSWORD":case"DATETIME":case"DATE":case"MONTH":case"WEEK":case"TIME":case"DATETIME-LOCAL":case"NUMBER":case"RANGE":case"COLOR":i=i.add(l(this,"fxTextBox",s));break;case"FILE":o=t(this).data("fxcontroltype");if(!o||!t.fn[o])o="fxFileBrowse";i=i.add(l(this,o,s))}}}),i},k=function(e,t){if(!t)delete i[e];else if(i[e]){for(var n=i[e].length-1;n>=0;n--)i[e][n].validate===t&&i[e].splice(n,1);i[e].length===0&&delete i[e]}return this},L=function(e,t,n){var i,s,o,u=n||e.value;for(i=0;i<t.length;i++)o=t[i],s=o.validate.call(f,u,e,o.params),!s||s.message===r?o.valid=s:(o.links=s.links,o.message=s.message,o.valid=s.valid);return this},A=function(e){var t=this.getValidationData(e,!1);return this.runValidation(e,t),t};e.Namespace.define("Shell.UI",{Validation:{addValidator:c,removeValidator:k,extractValidation:h,filterValidationData:T,getValidationData:x,getValidationStateFlags:E,getValidationStateName:S,helpers:f,invalidateCache:N,parse:C,setValidationContainer:p,removeValidationContainer:d,addValidationCallback:v,removeValidationCallback:m,runValidation:L,validateContainer:g,validate:A}}),window.require(["datalabext"],function(){C(n.document)})}(Shell,jQuery,this),function(e,t,n){function o(t){var n=[];s=s||new e.Communication.Sender("fx"),e.Utilities.isArray(t)||(t=[t]),t.forEach(function(e){e._sender=s,e.sync(),n.push(e._handle)}),s.getMethod("Impl.UI.Commands.add").apply(this,n)}function u(t){var n,r=[];e.Utilities.isArray(t)||(t=[t]),n=t[0]._sender,n&&(t.forEach(function(e){r.push(e._handle),e._handle=null}),n.getMethod("Impl.UI.Commands.remove").apply(this,r))}function a(t){(s||new e.Communication.Sender("fx")).getMethod("Impl.UI.Commands.clear")(t)}var r,i,s;r=e.Class.define(function(e,t,n,r,i,s,o){this._widgetOptions={text:e,click:t,disabled:n,onMouseOver:r,onMouseOut:i},this._parent=o},{_parent:null,_widgetOptions:null,setText:function(e){this._update("text",e)},setClick:function(e){this._update("click",e)},setDisabled:function(e){this._update("disabled",e)},setOnMouseOver:function(e){this._update("onMouseOver",e)},setOnMouseOut:function(e){this._update("onMouseOut",e)},toJSON:function(){return this._widgetOptions},_update:function(e,t){this._widgetOptions[e]=t,this._parent._checkSync()}}),i=e.Class.define(function(e,t,n,r,i,s){t=t||"",this._widgetOptions={action:t.sprite||null,text:e,click:n,url:t.sprite?null:t,group:r||"global",disabled:i||!1,tooltip:s||""},this._subCommands=[]},{_sender:null,_handle:null,_widgetOptions:null,_subCommands:null,addSubCommand:function(e,t,n,i,s,o,u){var a;return typeof arguments[0]!="number"&&(o=s,s=i,i=n,n=t,t=e,e=null),a=new r(t,n,i,s,o,e,this),this._subCommands.push(a),u||this._checkSync(),a},removeSubCommand:function(e,t){for(var n=0;n<this._subCommands.length;n++)if(this._subCommands[n]===e){this._subCommands.splice(n,1);break}t||this._checkSync()},addSubCommands:function(e,t){var n=[],r;return typeof arguments[0]!="number"?(t=e,e=null,r=[]):r=[e],t.forEach(function(e,i){n.push(this.addSubCommand.apply(this,r.concat([e.text,e.click,e.disabled,e.onMouseOver,e.onMouseOut,i!==t.length-1])))},this),n},removeSubCommands:function(e){for(var t=0;t<e.length;t++)this.removeSubCommand(e[t],t!==e.length-1)},setText:function(e){this._update("text",e)},setIcon:function(e){e=e||{},this._update("action",e.sprite||null),this._update("url",e.sprite?null:e)},setClick:function(e){this._update("click",e)},setDisabled:function(e){this._update("disabled",e)},setTooltip:function(e){this._update("tooltip",e)},sync:function(){var e=this;this._sender&&(this._handle=this._sender.getMethod("Impl.UI.Commands.sync")(this._handle,this,this._handle===null?function(){e._sender=null,e._handle=null}:null))},toJSON:function(e,t,n){return{widgetOptions:this._widgetOptions,subCommands:this._subCommands}},_checkSync:function(){this._handle&&this.sync()},_update:function(e,t){this._widgetOptions[e]=t,this._checkSync()}}),e.Namespace.define("Shell.UI.Commands",{Command:i,add:o,remove:u,clear:a})}(Shell,this.fx.resources),function(e,t,n){function s(e){r=r||new t.Communication.Sender("fx"),r.getMethod("Impl.UI.CustomerSupport.initialize")(e,function(e){i=e})}var r=null,i=[];t.Namespace.define("Shell.UI.CustomerSupport",{initialize:s,getDebugInfo:function(){return i}})}(this,Shell),function(e,t,n,r,i){function f(e){return o[e]||(o[e]=[]),o[e]}function l(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function c(e,t){l(f(e),t)}function h(e,t){var r,i,s;n.Utilities.isArray(t)||(t=[t]);if(t){r=f(e);for(s=0;s<t.length;s++)i=t[s],i&&!(i instanceof n.UI.Pivot)&&(i=new n.UI.Pivot(i.id,i.displayName,i.template,i.activated,i.icon,i.visible,i.navFilter)),r.push(i)}}function p(e,t){v(e),h(e,t),m(e)}function d(e,t,n){var r=f(e);if(n<0||n>r.length)throw"position is invalid";r.splice(n,0,t),m(e)}function v(e){var t=f(e);t.splice(0,t.length)}function m(e){w(),n.Internal.Rpc.RpcClient.rpcInvokeOneWay("Impl.UI.Pivots.updatePivotList",e,f(e))}function g(t,n,r){var i,s;t.template&&(s=n.templates[t.template],s&&(i=y(),e.cdm._renderTemplate(i,s,r||{},n.templateHelpers)))}function y(){return t("#tabcontainer .tabcontent")}function b(e){var r=e.extensionId,s=e.pivotId,o=e.navFilter,u=e.renderData,a=t.grep(f(r),function(e){return s===e.id&&(o===e.navFilter||(o===null||o===i)&&(e.navFilter===null||e.navFilter===i))}),l,c,h,p;if(a.length!==1)throw p=a===0?"There where no pivots with the id: ":"There are more than 1 pivots with the id: ",p+s;l=a[0],h=t.grep(n.extensions,function(e){return e.id===r}),h.length===1&&(c=h[0],g(l,c,u),l.activated&&l.activated(c,y(),u))}function w(){s||(n.Internal.Rpc.RpcClient.rpcInvokeDuplex("Impl.UI.Pivots.setupPivotActivatedListener",b),s=!0)}function E(e,t){var r=e.id;if(typeof t!="function")throw"Need an initialize function to call.";n.Internal.Rpc.RpcClient.rpcInvokeDuplex("Impl.UI.Pivots.setupPivotInitializedListener",function(){t.call(e)},r)}var s=!1,o={},u=n.Class.define(function(e,t,n,r,i,s,o){this.id=e,this.displayName=t,this.template=n,this.activated=r,this.image=i,this.visible=s,this.navFilter=o},{id:null,displayName:null,template:null,visible:!0,image:null,navFilter:null,activated:function(){}}),a=n.Class.define(function(e,t,n){this.url=e,this.urlHover=t,this.altText=n},{url:null,altText:"",urlHover:null},{getQuickStartIcon:function(){return new n.UI.PivotImageDescriptor(r.resources.getContentUrl("Content/Images/QuickStart_Cloud.png"),r.resources.getContentUrl("Content/Images/QuickStart_Cloud_HOVER.png"),"")}});n.Namespace.define("Shell.UI",{PivotImageDescriptor:a,Pivot:u,Pivots:{add:h,remove:c,update:m,clear:v,set:p,insert:d,getPivotContentArea:y,registerExtension:E}})}(this,jQuery,this.Shell,this.fx),function(e,t,n,r){var i=n.prototype,s="fx-passwordcomplexity",o="fx-passwordcomplexity-weak",u="fx-passwordcomplexity-strong";t.widget("fx.fxPasswordComplexity",n,{options:{baseScore:8,requireNonAlphanumeric:!0},_onKeyupHandler:null,_create:function(){this.element.addClass(s),this._attachEvents(),i._create.call(this)},_destroy:function(){this._detachEvents(),this.element.removeClass(s).removeClass(u).removeClass(o),this._super()},_attachEvents:function(){var e=this;e.element.on("keyup.fxPasswordComplexity",e._onKeyupHandler=function(){e._keyup()})},_detachEvents:function(){var e=this;e._onKeyupHandler&&(e.element.off("keyup.fxPasswordComplexity",e._onKeyupHandler),e._onKeyupHandler=null)},_keyup:function(){var e=this._calcStringScore(this.element.val());this._setElementStyle(e)},_calcStringScore:function(e){return e===r?0:this.options.requireNonAlphanumeric&&!e.match("^(?=.*[\\W]).*$")?this.options.baseScore-1:e.length},_setElementStyle:function(e){var t=this.element;t.removeClass(o).removeClass(u),e>=this.options.baseScore?t.addClass(u):e>0&&e<this.options.baseScore&&t.addClass(o)}})}(this,jQuery,jQuery.Widget),function(e,t,n,r){function s(e,n){var r="input[type='password'][data-enforce-complexity='true']";e=e?e:i,t(r,e).each(function(){t(this).fxPasswordComplexity()})}var i=n.document;e.Namespace.define("Shell.UI",{PasswordComplexity:{parse:s}}),window.require(["datalabext"],function(){s(i)})}(Shell,jQuery,this),function(e,t,n){var r,i,s;r=t.Class.define(function(n,r){var i=this,s={title:n,dataUrl:r,completeButtonEnabled:!0,showProgress:!1,size:[800,640]};typeof n=="object"&&n!==null?(this._sender=n.sender,this._handle=n.handle):(this._sender=new t.Communication.Sender("fx"),this._handle=this._sender.getMethod("Impl.UI.Dialogs.Dialog.create")(s,function(){i._sender.close(),i._sender=null,i._handle=null}),this.error(function(t){e.setTimeout(function(){throw t.exception?t.exception:t},0)}))},{_sender:null,_handle:null,open:function(){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Dialog.open")(this._handle)},activate:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Dialog.setActivate")(this._handle,e)},deactivate:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Dialog.setDeactivate")(this._handle,e)},closing:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Dialog.setClosing")(this._handle,e)},error:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Dialog.setError")(this._handle,e)},setTitle:function(e){this._update("title",e)},setSize:function(e,t){this._update("size",[e,t])},showProgress:function(e){this._update("showProgress",e)},setCompleteButtonEnabled:function(e){this._update("completeButtonEnabled",e)},setData:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Dialog.setDialogData")(this._handle,e)},ready:function(){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Dialog.ready")(this._handle)},_update:function(e,t){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Dialog.update")(this._handle,e,t)}}),i=function(){var e,n,i=s("dialogId");return n=t.Communication.Receiver.getReceiver(),n||(n=t.Communication.Receiver.create(i),n.register()),e=new r({sender:new t.Communication.Sender("fx"),handle:i,doNotAdd:!0}),e},s=function(t){var n=new RegExp("[?&]"+t+"=([^&#]*)"),r=n.exec(e.location.search);return r?decodeURIComponent(r[1].replace(/\+/g," ")):""},t.Namespace.define("Shell.UI.Dialogs",{Dialog:r,getThisDialog:i})}(this,Shell),function(e,t,n,r){var i,s,o,u;s=n.Class.define(function(e,t,n,r){var i={title:e,url:t,locked:!0};this._sender=r.sender,this._parentHandle=r.parentHandle,this._handle=r.handle,this._wizard=null,r.doNotAdd||(this._handle=this._sender.getMethod("Impl.UI.Dialogs.Wizard.addStep")(this._parentHandle,i,n))},{_sender:null,_parentHandle:null,_handle:null,setTitle:function(e){this._update("title",e)},setUrl:function(e){this._update("url",e)},setLocked:function(e){this._update("locked",e)},activate:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setStepActivate")(this._parentHandle,this._handle,e)},deactivate:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setStepDeactivate")(this._parentHandle,this._handle,e)},movePrevious:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setStepMovePrevious")(this._parentHandle,this._handle,e)},moveNext:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setStepMoveNext")(this._parentHandle,this._handle,e)},ready:function(){this._sender.getMethod("Impl.UI.Dialogs.Wizard.stepReady")(this._parentHandle,this._handle)},enableNextButton:function(){this._sender.getMethod("Impl.UI.Dialogs.Wizard.enableNextButton")(this._parentHandle)},disableNextButton:function(){this._sender.getMethod("Impl.UI.Dialogs.Wizard.disableNextButton")(this._parentHandle)},getWizard:function(){return this._wizard||(this._wizard=new i({sender:this._sender,handle:this._parentHandle,doNotAdd:!0})),this._wizard},setWizardData:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setWizardData")(this._parentHandle,e)},_update:function(e,t){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.updateStep")(this._parentHandle,this._handle,e,t)}}),i=n.Class.define(function(e){var r=this,i={title:e,autoLock:!0,completeButtonEnabled:!1,completeButtonDisplayed:!0,showProgress:!1,size:[800,640]};typeof e=="object"&&e!==null?(this._sender=e.sender,this._handle=e.handle):(this._sender=new n.Communication.Sender("fx"),this._handle=this._sender.getMethod("Impl.UI.Dialogs.Wizard.create")(i,function(){r._sender.close(),r._sender=null,r._handle=null}),this.error(function(e){t.setTimeout(function(){throw e.exception?e.exception:e},0)}))},{_sender:null,_handle:null,open:function(){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.open")(this._handle)},closing:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.setClosing")(this._handle,e)},error:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.setError")(this._handle,e)},setTitle:function(e){this._update("title",e)},setAutoLock:function(e){this._update("autoLock",e)},setSize:function(e,t){this._update("size",[e,t])},showProgress:function(e){this._update("showProgress",e)},setCompleteButtonEnabled:function(e){this._update("completeButtonEnabled",e)},setCompleteButtonDisplayed:function(e){this._update("completeButtonDisplayed",e)},setData:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.setWizardData")(this._handle,e)},addStep:function(e,t,n){return typeof arguments[0]!="number"&&(n=t,t=e,e=null),new s(t,n,e,{sender:this._sender,parentHandle:this._handle})},removeStep:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.removeStep")(this._handle,e._handle)},getSteps:function(){var t=this,n;if(this._sender)return n=e.Deferred(),this._sender.getMethod("Impl.UI.Dialogs.Wizard.getSteps")(this._handle).done(function(r){var i=[],o;e.each(r,function(e,n){o=new s(null,null,-1,{sender:t._sender,parentHandle:t._handle,handle:n,doNotAdd:!0}),i.push(o)}),n.resolve(i)}),n.promise()},_update:function(e,t){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.update")(this._handle,e,t)}}),o=function(){var e,t,r=u("wizardId"),i=u("stepId");return t=n.Communication.Receiver.getReceiver(),t||(t=n.Communication.Receiver.create(r+i),t.register()),e=new s("","",-1,{sender:new n.Communication.Sender("fx"),parentHandle:r,handle:i,doNotAdd:!0}),e},u=function(e){var n=new RegExp("[?&]"+e+"=([^&#]*)"),r=n.exec(t.location.search);return r?decodeURIComponent(r[1].replace(/\+/g," ")):""},n.Namespace.define("Shell.UI.Dialogs",{Wizard:i,getThisWizardStep:o})}(jQuery,this,Shell),function(e,t,n){function i(e){try{return e()}catch(t){}}function s(t){return new r(t,i(function(){return e.localStorage}))}function o(t){return new r(t,i(function(){return e.sessionStorage}))}var r;r=Shell.Class.define(function(e,t){if(!e)throw"Cache name is required";this.cacheName=e,t&&(this.storage=t),this.cacheEntry=n},{getEntry:function(){var t,r;t=this.cacheEntry;if(t===n&&this.storage){try{r=this.storage.getItem(this.cacheName)}catch(i){this.storage=null}r&&(t=e.JSON.parse(r),this.cacheEntry=t)}return t},setEntry:function(t){if(t===n)throw"entry must be defined";var r=e.JSON.stringify(t);this.cacheEntry=t;if(this.storage)try{this.storage.setItem(this.cacheName,r)}catch(i){this.storage=null}},removeEntry:function(){delete this.cacheEntry,this.storage&&this.storage.removeItem(this.cacheName)}}),t.Namespace.define("Shell.Storage",{getLocalCache:s,getSessionCache:o})}(this,Shell),function(e,t,n){function o(e,n,r){s[e]=t.setTimeout(n,r)}function u(e){var n=s[e];return n?(t.clearTimeout(n),delete s[e],!0):!1}function a(t,n){i++;var s=r+i,a=function(){f(s)&&t()},l=function(){u(s)&&o(s,a,n)};return o(s,a,n),e("body").on("click."+s,l).on("keyup."+s,l),s}function f(t){var n=u(t);return n&&e("body").off("click."+t).off("keyup."+t),n}var r="shellTimer",i=0,s={};Shell.Namespace.define("Shell.Timers",{Idle:{set:a,clear:f}})}(jQuery,this),function(e,t,n,r,i){var s,o=[],u=(new Date).getTimezoneOffset()*6e4,a=n.getStrings("Shell.Net");r.Namespace.define("Shell.Net",{ajaxPost:function(e,n){typeof e=="object"?(n=e,e=n.url):n=n||{};var i=n.data;return t.extend(n,{type:"POST",dataType:"json",cache:!1,traditional:!0,contentType:"application/json",data:typeof i=="string"?i:JSON.stringify(i)}),r.Net.ajax(e,n)},ajax:function(n,i){typeof n=="object"?(i=n,n=i.url):i=i||{};var f=t.extend({},i),l,c,h,p,d,v=function(t,n){if(s)return;s=new r.UI.Notifications.Confirmation(t),s.setActions([r.UI.Notifications.Buttons.ok(function(){n?e.location.href=r.Environment.getSignOutLink():e.location.reload(!0)})]),r.UI.Notifications.add(s)};return i.logFunction?h=i.logFunction:h=r.Diagnostics.Log.writeEntry,d=function(t,i){var s=((new Date).getTime()-l)/1e3,o=i==="success"?"Complete":"Failure",u=i==="success"?"completed":"failed",a=o+": Ajax call to: "+n+". "+u+" with status: "+i+" ("+t.status+") in "+s+" seconds. "+"x-ms-client-request-id was: "+c,f={message:a,dateTime:new Date,durationSeconds:s,url:n,status:t.status,textStatus:i,clientRequestId:c,pageRequestId:r.Context.getPageRequestId(),referrer:e.location.href,host:e.location.host};return i!=="success"&&(f.response=t.responseText),f},f.error=function(e,t,n){var s=d(e,t),o=s.message+". Response: "+(e.responseText||""),u;return e.status===401&&(e.getResponseHeader("x-ms-force-login")||"").toLowerCase()==="true"&&v(a.loggedOut),h("Shell.Net.FailedAjaxCall",o,r.Diagnostics.LogEntryLevel.error),i.error&&(u=i.error(e,t,n)),u},f.complete=function(e,t){var n=e.getResponseHeader("x-build-version"),s,o=e.getResponseHeader("x-force-user-logout"),u,f;return o&&v(a.anotherSession,!0),t==="success"&&!i.suppressSuccessLogging&&(f=d(e,t),h("Shell.Net.SuccessfulAjaxCall",f.message,r.Diagnostics.LogEntryLevel.verbose)),n&&(s=r.Environment.getPortalVersion(),s&&s!==n&&v(a.versionMismatchError)),i.complete&&(u=i.complete(e,t)),u},p=new Date((new Date).getTime()+u),c=r.Utilities.newGuid()+"-"+p.toString("u"),f.beforeSend=function(e){var t;e.setRequestHeader("x-ms-client-session-id",r.Context.getPageRequestId()),e.setRequestHeader("x-ms-client-request-id",c),i.beforeSend&&i.beforeSend(e);for(t=0;t<o.length;t++)o[t](e)},l=(new Date).getTime(),h("Shell.Net.PlacingAjaxCall","Placing ajax call to: "+n+". x-ms-client-request-id is: "+c,r.Diagnostics.LogEntryLevel.verbose),t.ajax(n,f)},get:function(e,n,i,s){return t.isFunction(n)&&(s=s||i,i=n,n=null),r.Net.ajax({url:e,data:n,success:i,dataType:s})},getJSON:function(e,n,i){return t.isFunction(n)&&(i=n,n=null),r.Net.ajaxPost({url:e,data:n,success:i})},post:function(e,t,n,i){return r.Net.ajaxPost({url:e,data:t,success:n,dataType:i})},addGlobalBeforeSend:function(e){if(!e)throw"A function is required. The function can perform customization before the ajax request is sent.";o.splice(0,0,e)},removeGlobalBeforeSend:function(e){var t;if(!e)throw"A function is required. The function can perform customization before the ajax request is sent.";for(t=0;t<o.length;t++)o[t]===e&&o.splice(t,1)}})}(this,jQuery,this.fx.resources,Shell),function(e,t,n){var r=function(){return t.Utilities.getAntiForgeryId()},i=function(){return t.Environment.getPageRequestId()};t.Namespace.define("Shell.Context",{getPageRequestId:i,getAntiForgeryId:r})}(this,Shell),function(e,t,n,r,i,s){var o="fxshell.avatarbar",u=i.getStrings(o),a=e.Resources.getResources("fx.links"),f="<div class='fxshell-avatarbar-large'><img class='fxshell-avatarbar-logo' /><div class='fxshell-avatarbar-links-container'><nav class='fxshell-avatarbar-navbar'><ul class='fxshell-avatarbar-links-list'></ul></nav></div><div class='fxshell-avatarbar-login-container'><img class='fxshell-avatarbar-userpicture' /><div class='fxshell-avatarbar-actions'><a href='#' class='fxshell-avatarbar-legal'></a><span class='fxshell-avatarbar-separator'> | </span><a href='#' class='fxshell-avatarbar-privacycookies'></a><span class='fxshell-avatarbar-separator'> | </span><a href='#' class='fxshell-avatarbar-prominentaction fxshell-avatarbar-customersupport'></a><span class='fxshell-avatarbar-separator'> | </span><a href='#' class='fxshell-avatarbar-prominentaction fxshell-avatarbar-signout'></a></div><span class='fxshell-avatarbar-username'></span></div></div><div class='fxshell-avatarbar-small'><img class='fxshell-avatarbar-logo' /><div class='fxshell-avatarbar-login-container'><img class='fxshell-avatarbar-userpicture' /><span class='fxshell-avatarbar-username'></span><img class='fxshell-avatarbar-arrow' /></div><a href='#' class='fxshell-avatarbar-feedback'><img class='fxshell-avatarbar-feedbackicon' /></a></div>",l="<li class='fxshell-avatarbar-links-listitem'><a class='fxshell-avatarbar-links-link'></a></li>";t.widget(o,{options:{allowExpansion:!0,enableSignOut:!0,brandingLogoUrl:"",brandingLogoTitle:"",signOutLabel:"",avatarUrl:"",privacyLabel:u.privacyLabel,privacyUrl:a.privacyUrl,legalLabel:u.legalLabel,legalUrl:a.legalUrl,expansionArrowImg:i.getContentUrl("Content/Images/fxshell.avatarbar.arrow.png"),expansionArrowAlt:u.expansionArrowAlt,feedbackImg:i.getContentUrl("Content/Images/fxshell.feedback.icon.png"),feedbackLabel:"",feedbackTooltip:u.feedbackTooltip,enableSupport:!0,userName:"",links:[]},_linksList:null,_create:function(){this.widgetEventPrefix="",this.element.html(f).addClass("fxshell-avatarbar-container"),this._linksList=this.element.find(".fxshell-avatarbar-links-list"),this._setupBranding(),this._setupIdentity(),this._enableDisableExpansion(),this.options.allowExpansion&&(this._setupExpansion(),this._setupFeedbackAndSignout(),this._setupCustomerSupport(),this._setupLegalAndPrivacy(),this._setupLinks()),this._attachEvents()},_destroy:function(){this._detachEvents(),this._linksList=null,this.element.removeClass("fxshell-avatarbar-container").empty(),this._super()},_setupBranding:function(){this.element.find(".fxshell-avatarbar-logo").attr("src",this.options.brandingLogoUrl).attr("alt",this.options.brandingLogoTitle)},_setupIdentity:function(){this.options.userName===null||this.options.userName===""?this.element.find(".fxshell-avatarbar-username").hide():this.element.find(".fxshell-avatarbar-username").text(this.options.userName).attr("alt",this.options.userName),this.options.avatarUrl===null||this.options.avatarUrl===""?this.element.find(".fxshell-avatarbar-userpicture").hide():this.element.find(".fxshell-avatarbar-userpicture").attr("src",this.options.avatarUrl).attr("alt",this.options.userName)},_setupExpansion:function(){this.element.find(".fxshell-avatarbar-arrow").attr("src",this.options.expansionArrowImg).attr("alt",this.options.expansionArrowAlt)},_setupCustomerSupport:function(){this.options.enableSupport?this.element.find(".fxshell-avatarbar-customersupport").fxsCustomerSupport({subscriptionListProvider:function(){return e.Exp.Rdfe.getSubscriptionList()}}):this.element.find(".fxshell-avatarbar-customersupport").hide()},_setupFeedbackAndSignout:function(){var e=this.options.feedbackLabel!==null&&this.options.feedbackLabel!=="";e?(this.element.find(".fxshell-avatarbar-feedback").attr("alt",this.options.feedbackLabel).attr("title",this.options.feedbackTooltip),this.element.find(".fxshell-avatarbar-feedbackicon").attr("src",this.options.feedbackImg).attr("alt",this.options.feedbackLabel)):this.element.find(".fxshell-avatarbar-feedback").hide(),this.options.enableSignOut?this.element.find(".fxshell-avatarbar-signout").text(this.options.signOutLabel):this.element.find(".fxshell-avatarbar-signout").hide(),(!e||!this.options.enableSignOut)&&this.element.find(".fxshell-avatarbar-separator").hide()},_setupLegalAndPrivacy:function(){var e=this.options.legalUrl!==null&&this.options.legalLabel!=="",t=this.options.privacyUrl!==null&&this.options.privacyLabel!=="";e?this.element.find(".fxshell-avatarbar-legal").text(this.options.legalLabel).attr("href",this.options.legalUrl):this.element.find(".fxshell-avatarbar-legal").hide(),t?this.element.find(".fxshell-avatarbar-privacycookies").text(this.options.privacyLabel).attr("href",this.options.privacyUrl):this.element.find(".fxshell-avatarbar-privacycookies").hide()},_enableDisableExpansion:function(){this.options.allowExpansion?this.element.addClass("fxshell-avatarbar-container-expandable"):this.element.removeClass("fxshell-avatarbar-container-expandable")},_setupLinks:function(){var e,n,r,i;this._detachLinkEvents(),this._linksList.empty();if(this.options.links){for(e=0;e<this.options.links.length;e++)n=this.options.links[e],n&&(r=t(l),i=r.find("a"),i.attr("href",n.url).text(n.label),n.selected&&i.addClass("fxshell-avatarbar-links-selectedlink"),this._linksList.append(r));this._attachLinkEvents()}},_attachEvents:function(){this.options.allowExpansion&&(this._attachExpandCollapseEvents(),this._attachSignoutAndFeedbackEvents())},_detachEvents:function(){this._detachLinkEvents(),this._detachSignoutAndFeedbackEvents(),this._detachExpandCollapseEvents(),this._detachCustomerSupport()},_attachSignoutAndFeedbackEvents:function(){var e=this;this.options.enableSignOut&&this.element.find(".fxshell-avatarbar-signout").on("click",function(t){t.stopPropagation(),t.preventDefault(),e._trigger("signout",null,null)}),this.options.feedbackLabel!==null&&this.options.feedbackLabel!==""&&this.element.find(".fxshell-avatarbar-feedback").on("click",function(t){t.stopPropagation(),t.preventDefault(),e._trigger("feedback",null,null)})},_detachCustomerSupport:function(){this.options.enableSupport&&this.element.find(".fxshell-avatarbar-customersupport").fxsCustomerSupport("destroy")},_detachSignoutAndFeedbackEvents:function(){this.options.enableSignOut&&this.element.find(".fxshell-avatarbar-signout").off("click"),this.options.feedbackLabel!==null&&this.options.feedbackLabel!==""&&this.element.find(".fxshell-avatarbar-feedback").off("click")},_attachExpandCollapseEvents:function(){var t=this,n;this.element.on("click",function(e){var n;t.element.toggleClass("fxshell-avatarbar-expanded"),n=t.element.hasClass("fxshell-avatarbar-expanded"),t.element.attr("aria-selected",n.toString())}),this.element.on("mouseenter",function(){n&&(e.clearTimeout(n),n=null)}),this.element.on("mouseleave",function(){n&&(e.clearTimeout(n),n=null),n=e.setTimeout(function(){n=null,t.element.removeClass("fxshell-avatarbar-expanded").attr("aria-selected","false")},1e3)})},_detachExpandCollapseEvents:function(){this.element.off("click"),this.element.off("mouseenter"),this.element.off("mouseleave")},_attachLinkEvents:function(){var e=this;this._linksList.on("click","a",function(t){var n=t.target.href;t.stopPropagation(),t.preventDefault(),e._trigger("linkselect",null,{item:n})})},_detachLinkEvents:function(){this._linksList.off("click","a")}})}(this,jQuery,this.Shell,this.fx,this.fx.resources),function(e,t,n,r){var i=function(){var e=n.Class.define(function(){},{_children:[],getLinkIdPrefix:function(){return e._linkIdPrefix},setChildren:function(e){this._children=e},parse:function(e){var t=[],n="",i=e,s,o,u,a,f;for(;;){for(u=0;u<this._children.length;u++)t[u]===r&&(t[u]=this._children[u]._match(i)),t[u]&&(!s||t[u].index<s.index)&&(s=t[u],o=this._children[u]);f=s?s.index:i.length,n+=i.substring(0,f);if(!s)break;n+=o._getOutput(s),a=s.index+s[0].length,i=i.substring(a);for(u=0;u<this._children.length;u++)t[u]&&(t[u].index<a?t[u]=r:t[u].index-=a);s=r}return n},_match:function(e){return null},_getOutput:function(e){}},{_linkIdPrefix:"__fxshell-link-id-"}),t=n.Class.derive(e,function(){},{_match:function(e){var t=new RegExp("\\[([^|\\[\\]]+?(?:\\|[^|\\[\\]]+?){1,2})\\]");return t.exec(e)},_getOutput:function(t){var n=t[1].split("|"),r=n.length===3?n[2]:"#",i="<a id='"+e._linkIdPrefix+n[0]+"' href='"+r+"'>";return i+=this.parse(n[1]),i+="</a>",i}}),i=n.Class.derive(e,function(){},{_match:function(e){var t=new RegExp("__(([^_]+)|([^_]*_[^_]*)*?)__");return t.exec(e)},_getOutput:function(e){var t="<strong>";return t+=this.parse(e[1]),t+="</strong>",t}}),s=n.Class.derive(e,function(){},{_match:function(e){var t=new RegExp("\\'\\'(([^\\']+)|([^\\']*\\'[^\\']*)*?)\\'\\'");return t.exec(e)},_getOutput:function(e){var t="<em>";return t+=this.parse(e[1]),t+="</em>",t}}),o=n.Class.derive(e,function(){},{_match:function(e){var t=/%%%/;return t.exec(e)},_getOutput:function(e){return"<br />"}}),u=new i,a=new s,f=new t,l=new o,c=new e;return f.setChildren([u,a]),u.setChildren([l,f,a]),a.setChildren([l,f,u]),c.setChildren([u,a,f,l]),c}();e.widget("fxshell.encodedlinkinjector",{options:{text:"",click:e.noop},_originalHtml:null,_create:function(){var e=i.parse(n.Utilities.htmlEncode(this.options.text));this._originalHtml=this.element.html(),this.element.html(e),this._attachLinkHandler()},_destroy:function(){this.element.html(this._originalHtml).off("click","a"),this._super()},_attachLinkHandler:function(){var t=this;this.element.on("click","a",function(n){var r=e(this),s=r.attr("id").substring(i.getLinkIdPrefix().length),o=r.attr("href"),u={id:s,href:o};t._trigger("click",n,u)})}})}(jQuery,jQuery.Widget.prototype,Shell),function(e,t,n,r,i){var s="fxshell.toastbox",o="<div class='fxshell-toastbox' role='alertdialog' aria-atomic='true'><div class='fxshell-toastbox-container'><div class='fxshell-toastbox-controls'></div><div class='fxshell-toastbox-contentContainer'></div></div></div>",u="<button class='fxshell-toastbox-close'></button>",a=0,f="__fxshell-toastbox",l=function(){return f+a++};t.widget(s,{options:{maxHeight:i,openDuration:200,closeDuration:100,openedOpacity:1,closedOpacity:.6,text:n.getStrings(s)},_isLocked:!1,_isOpen:!1,_isOpening:!1,_isClosing:!1,_isAwaitingRefresh:!1,_chromeHeight:null,_openClassName:null,_anchor:null,_toastBox:null,_controls:null,_content:null,_closeButton:null,_create:function(){var e=this.element,n=this.options,r=l();this._openClassName=this.widgetFullName+"-open",this._anchor=t(o).addClass(this.widgetFullName).prependTo(e).width(e.outerWidth()).attr("aria-describedby",r),this._controls=this._anchor.find(".fxshell-toastbox-controls"),this._content=this._anchor.find(".fxshell-toastbox-contentContainer").attr("id",r),this._toastBox=this._anchor.find(".fxshell-toastbox-container").css("opacity",0).append(this._controls).append(this._content).width(e.outerWidth()),this._initializeControls(),this._chromeHeight=this._toastBox.outerHeight()-this._content.outerHeight(),this._chromeHeight<0&&(this._chromeHeight=0),this._toastBox.height(0).css("opacity",n.closedOpacity),this._initializeListeners()},_destroy:function(){this._destroyListeners(),this._closeButton!==null&&this._closeButton.off(".toastbox"),this._toastBox!==null&&this._toastBox.remove(),this._anchorElement=null,this._super()},_initializeControls:function(){var e=this.options;this._closeButton=t(u).text(e.text.close).on("click.toastbox",t.proxy(this.close,this)),this._controls.append(this._closeButton)},open:function(){var e=this,n=this.options,i=this.element,s=t.Deferred(),o,u,a,f;return this._isLocked?(s.reject(),s.promise()):this._isOpen||this._isOpening?(s.resolve(),this._trigger("open"),s.promise()):(this._isClosing=!(this._isOpening=!0),o=this._chromeHeight+this._content.outerHeight(),u=parseInt(i.css("border-left-width"),10),a=parseInt(i.css("border-top-width"),10),this._toastBox.css("left",-u).css("bottom",a),f=o>n.maxHeight&&n.maxHeight>0?n.maxHeight:o,this._trigger("opening"),this._toastBox.stop().animate({height:f,opacity:n.openedOpacity},n.openDuration,function(){e._anchor.addClass(e._openClassName),e._anchor.attr({height:f}),e._isOpening=!(e._isOpen=!0),s.resolve(),e._trigger("open"),r.forceRead(e._toastBox[0],!0)}),s.promise())},close:function(){var e=this,n=this.options,r=t.Deferred();return!this._isOpen&&!this._isOpening||this._isClosing?(r.resolve(),this._trigger("close"),r.promise()):(this._isOpening=!(this._isClosing=!0),this._anchor.removeClass(this._openClassName),this._trigger("closing"),this._toastBox.stop().animate({height:0,opacity:n.closedOpacity},n.closeDuration,function(){e._anchor.attr({height:0,opacity:n.closedOpacity}),e._isClosing=e._isOpen=!1,r.resolve(),e._trigger("close")}),r.promise())},lock:function(){this._isLocked=!0},unlock:function(){this._isLocked=!1},getContentContainer:function(){return this._content},_getContentWidth:function(e){var t=0,n=e.children(),r,i;return n.length>0?(t=e.wrapInner("<span />").find(">span").width(),n.unwrap()):(r=e.text(),i=e.html(),t=e.html("<span>"+i+"</span>").find(">span").width(),e.text(r)),t},_initializeListeners:function(){var n=this;this.element.on(this.widgetEventPrefix+"contentchange",function(){n._refresh()}),t(e).on("resize."+this.widgetEventPrefix,function(){n._anchor.width(n.element.outerWidth()),n._toastBox.width(n.element.outerWidth()),n._refresh()})},_destroyListeners:function(){t(e).off("resize."+this.widgetEventPrefix),this.element.off(this.widgetEventPrefix+"contentchange")},_refresh:function(){var e=this,n=this.options,r=t.Deferred(),i=this._chromeHeight+this._content.height(),s;return this._isOpen?(this._isAwaitingRefresh=!0,s=i>n.maxHeight&&n.maxHeight>0?n.maxHeight:i,this._toastBox.stop().animate({height:i>n.maxHeight&&n.maxHeight>0?n.maxHeight:i,opacity:n.openedOpacity},n.openDuration,function(){e._anchor.attr({height:s}),e._isAwaitingRefresh=!1,r.resolve(),e._trigger("refresh")}),r.promise()):(this._isOpening&&!this._isAwaitingRefresh?(this._isAwaitingRefresh=!0,this.open().then(function(){e._refresh().then(function(){r.resolve()})})):r.reject(),r.promise())}})}(this,jQuery,this.fx.resources,this.fx.utilities),function(e,t,n,r){var i="fxshell.logviewer",s=n.getStrings(i),o="<div class='fxshell-logviewer-configurationbar'><div><fieldset><legend>Severity</legend><label><input type='checkbox' checked='checked' class='fxshell-errors-checkbox' />"+s.errors+"</label>"+"<label><input type='checkbox' checked='checked' class='fxshell-warnings-checkbox' />"+s.warnings+"</label>"+"<label><input type='checkbox' checked='checked' class='fxshell-performance-checkbox' />"+s.performance+"</label>"+"<label><input type='checkbox' checked='checked' class='fxshell-information-checkbox' />"+s.information+"</label>"+"<label><input type='checkbox' class='fxshell-verbose-checkbox' />"+s.verbose+"</label>"+"</fieldset>"+"</div>"+"<div>"+"<label>"+s.regExFilter+"<input type='text' class='fxshell-logviewer-regexpfilter-text' /></label>"+"<input type='button' value='"+s.copyLogToClipboard+"' class='fxshell-logviewer-copytoclip-button' />"+"<input type='button' value='"+s.clearLog+"' class='fxshell-logviewer-clearlog-button' />"+"</div>"+"</div>"+"<div class='fxshell-logviewer-logcontainer'>"+"</div>";t.widget(i,t.ui.dialog,{options:{title:s.title,maxEntries:1e3,showLogOnError:!0},_logMessageCount:0,_errorsCheckbox:null,_warningsCheckbox:null,_performanceCheckbox:null,_informationCheckbox:null,_verboseCheckbox:null,_clearLogButton:null,_copyToClipButton:null,_regExpTextbox:null,_logEntriesContainer:null,_create:function(){if(typeof this.options.maxEntries!="number"||this.options.maxEntries<=0)this.options.maxEntries=1e3;t.ui.dialog.prototype._create.call(this),this.element.attr("title",this.options.title),this.element.addClass("fxshell-logviewer-widget"),this.element.empty().html(o),this._logEntriesContainer=this.element.find(".fxshell-logviewer-logcontainer"),this._attachEvents()},_destroy:function(){this._detachEvents(),this.element.removeAttr("title"),this.element.removeClass("fxshell-logviewer-widget"),this.element.empty(),this._logEntriesContainer=null,this._super()},addEntry:function(e,n){if(n!=="error"&&n!=="warning"&&n!=="information"&&n!=="performance"&&n!=="verbose")throw"Unknown severity.";this._logMessageCount+1>this.options.maxEntries&&this._logEntriesContainer.children().filter(":last").remove();var r=t("<div/>").text(e).html(),i=t("<p class='fxshell-logentry'><span class='fxshell-logentry-header'>"+(new Date).toLocaleTimeString()+":</span>&nbsp;<span class='fxshell-logentry-body'>"+r+"</span></p>"),s="fxshell-logentry-"+n;i.addClass(s),this._logMessageCount=this._logMessageCount+1,this._logEntriesContainer.prepend(i),this._applyFiltersOnRow(i,this._getCurrentFilter())&&this.options.showLogOnError&&n==="error"&&this.open()},clear:function(){this._logEntriesContainer.empty(),this._logMessageCount=0},_attachEvents:function(){var e=this,n=function(){e._applyFiltersOnLog()};this._errorsCheckbox=this.element.find(".fxshell-errors-checkbox"),this._errorsCheckbox.on("click",n),this._warningsCheckbox=this.element.find(".fxshell-warnings-checkbox"),this._warningsCheckbox.on("click",n),this._performanceCheckbox=this.element.find(".fxshell-performance-checkbox"),this._performanceCheckbox.on("click",n),this._informationCheckbox=this.element.find(".fxshell-information-checkbox"),this._informationCheckbox.on("click",n),this._verboseCheckbox=this.element.find(".fxshell-verbose-checkbox"),this._verboseCheckbox.on("click",n),this._clearLogButton=this.element.find(".fxshell-logviewer-clearlog-button"),this._clearLogButton.on("click",function(){e.clear()}),this._copyToClipButton=this.element.find(".fxshell-logviewer-copytoclip-button"),this._copyToClipButton.on("click",function(){var n="";e._logEntriesContainer.children().not(".fxshell-logentry-filtered-out").each(function(){n+=t(this).text()+"\r\n"}),e._copyToClipboard(n)}),this._regExpTextbox=this.element.find(".fxshell-logviewer-regexpfilter-text"),this._regExpTextbox.on("keypress",function(e){e.which===13&&e.preventDefault()}),this._regExpTextbox.on("keyup",function(e){n()})},_detachEvents:function(){this._errorsCheckbox.off("click"),this._errorsCheckbox=null,this._warningsCheckbox.off("click"),this._warningsCheckbox=null,this._performanceCheckbox.off("click"),this._performanceCheckbox=null,this._informationCheckbox.off("click"),this._informationCheckbox=null,this._verboseCheckbox.off("click"),this._verboseCheckbox=null,this._clearLogButton.off("click"),this._clearLogButton=null,this._copyToClipButton.off("click"),this._copyToClipButton=null,this._regExpTextbox.off("keypress keyup"),this._regExpTextbox=null},_copyToClipboard:function(t){e.clipboardData?e.clipboardData.setData("Text",t):e.prompt("Copy to clipboard (Ctrl+C) then press enter to continue",t)},_getCurrentFilter:function(){var e=0,t,n,r;e=this._errorsCheckbox.is(":checked")?e|1:e,e=this._warningsCheckbox.is(":checked")?e|2:e,e=this._performanceCheckbox.is(":checked")?e|4:e,e=this._informationCheckbox.is(":checked")?e|8:e,e=this._verboseCheckbox.is(":checked")?e|16:e,t=this._regExpTextbox.val(),n=null;if(t!==""&&t!==null)try{n=new RegExp(t,"i")}catch(i){n=null}return r={severityMask:e,regExp:n},r},_applyFiltersOnLog:function(){var e=this,n=this._getCurrentFilter(),r=this._logEntriesContainer.children();r.removeClass("fxshell-logentry-filtered-out"),r.each(function(){e._applyFiltersOnRow(t(this),n)})},_applyFiltersOnRow:function(e,t){var n=this._matchesSeverityFilter(e,t.severityMask)&&(t.regExp===null||t.regExp.test(e.text()));return n||e.addClass("fxshell-logentry-filtered-out"),n},_matchesSeverityFilter:function(e,t){return((t&1)===1?e.hasClass("fxshell-logentry-error"):!1)||((t&2)===2?e.hasClass("fxshell-logentry-warning"):!1)||((t&4)===4?e.hasClass("fxshell-logentry-performance"):!1)||((t&8)===8?e.hasClass("fxshell-logentry-information"):!1)||((t&16)===16?e.hasClass("fxshell-logentry-verbose"):!1)}})}(this,jQuery,this.fx.resources),function(e,t,n){e.widget("fx.fxScrollbar",{options:{autorefresh:0,overlay:!1,animated:!1,isStaticContainerSize:!1},_scrollableTemplate:"<div class='fx-scrollbar'><div class='fx-scrollbar-area'></div></div>",_widget:null,_scrollableArea:null,_scrollbarSize:16,_trackOverlap:10,_pushScrollbarBy:40,_savedProperties:null,_resizeHandler:null,_autoRefreshInterval:null,_autoRefreshWidth:-1,_autoRefreshHeight:-1,_minimumScrollbarSize:15,_resizeTimerHandle:null,_track:null,_ratio:null,_isResizing:!1,_isRefreshing:!1,_readyForTrackClick:!1,_calls:{vertical:{scrollPosition:"scrollTop",scrollSize:"scrollHeight",clientSize:"clientHeight",page:"pageY",position:"top",size:"height"},horizontal:{scrollPosition:"scrollLeft",scrollSize:"scrollWidth",clientSize:"clientWidth",page:"pageX",position:"left",size:"width"}},_create:function(){if(typeof this.options.autorefresh!="number")throw"AutoRefresh must be a number in milliseconds";this._portScroll(e.proxy(function(){return this._createTrack(),this._attachScrollable()},this));var n=this;this._resizeHandler=function(){n._resize.apply(n,arguments)},e(t).on("resize",this._resizeHandler),this.options.autorefresh>0&&(this._autoRefreshWidth=this.element[0].scrollWidth,this._autoRefreshHeight=this.element[0].scrollHeight,this._autoRefreshInterval=t.setInterval(e.proxy(this._autoRefresh,this),this.options.autorefresh))},widget:function(){return this._widget||this.element},_destroy:function(){this._autoRefreshInterval&&(t.clearInterval(this._autoRefreshInterval),this._autoRefreshInterval=null),this._portScroll(e.proxy(function(){return this._resetStyle(),null},this)),this._resizeHandler!==null&&(e(t).off("resize",this._resizeHandler),this._resizeHandler=null),this.element.off(".fxScrollbar"),this._super()},refresh:function(t){this._isRefreshing||(this._isRefreshing=!0,this._portScroll(e.proxy(function(){var e;return this.options.isStaticContainerSize&&!t?(e=this._getScrollingObjectFromFixedSize(),this._positionTrack(this._widget.width(),this._widget.height(),e),e):(this._resetStyle(),this._attachScrollable())},this)),this._isRefreshing=!1)},scrollTop:function(e){if(this._scrollableArea){if(e===n)return this._scrollableArea.scrollTop();this._scrollableArea.scrollTop(e)}},scrollLeft:function(e){if(this._scrollableArea){if(e===n)return this._scrollableArea.scrollLeft();this._scrollableArea.scrollLeft(e)}},_portScroll:function(t){var n=this._scrollableArea||this.element,r=n.scrollLeft(),i=n.scrollTop(),s=Shell.Utilities.getDocumentActiveElement(),o=t(r,i);e.contains(this.element[0],s)&&s.focus(),n=this._scrollableArea||this.element,n.scrollLeft(r).scrollTop(i).scroll(),o&&(o.isHorizontalScrolling&&this._track.x.show(),o.isVerticalScrolling&&this._track.y.show())},_createTrack:function(){var t=this;this._track={},this._track.x=e("<div class='fx-scrollbar-track fx-scrollbar-track-x'><div class='fx-scrollbar-handle'></div></div>").find(".fx-scrollbar-handle").click(!1).mousedown(this._getHandleHandler(this,this._calls.horizontal)).end().mousedown(function(){t._readyForTrackClick=!0}).mouseup(this._getTrackHandler(this,this._calls.horizontal)),this._track.y=e("<div class='fx-scrollbar-track fx-scrollbar-track-y'><div class='fx-scrollbar-handle'></div></div>").find(".fx-scrollbar-handle").click(!1).mousedown(this._getHandleHandler(this,this._calls.vertical)).end().mousedown(function(){t._readyForTrackClick=!0}).mouseup(this._getTrackHandler(this,this._calls.vertical))},_autoRefresh:function(){if(this.element[0].scrollWidth!==this._autoRefreshWidth||this.element[0].scrollHeight!==this._autoRefreshHeight)this._autoRefreshWidth=this.element[0].scrollWidth,this._autoRefreshHeight=this.element[0].scrollHeight,this.refresh()},_resetStyle:function(){this._savedProperties&&(this._transferOverflowProperties(this.element,this._savedProperties),this._transferGlobalProperties(this.element,this._savedProperties),this.element.css({width:this._savedProperties.fluidW?"":this._savedProperties.cssWidth,height:this._savedProperties.fluidH?"":this._savedProperties.cssHeight})),this._detachTrack(),this.element.unwrap().unwrap(),this._widget=null,this._scrollableArea=null},_attachScrollable:function(){var t=this.element.width(),n=this.element.height(),r=this._getScrollingObject(this.element);return this.element.wrap(this._scrollableTemplate),this._scrollableArea=this.element.parent(),this._widget=this._scrollableArea.parent(),this._savedProperties=this._getProperties(this.element),e.extend(this._savedProperties,this._eraseGlobalProperties(this.element)),this.options.animated&&this._widget.addClass("fx-scrollbar-animated"),e.extend(this._savedProperties,this._eraseOverflowProperties(this.element)),this._transferOverflowProperties(this._scrollableArea,this._savedProperties),this._widget.width(t).height(n),this._transferGlobalProperties(this._widget,this._savedProperties),this._savedProperties.position==="static"&&this._widget.css("position",""),this._positionTrack(t,n,r),this._attachScrollEvent(this._scrollableArea),this._preventScrollingWhenDragging(this.element),r},_preventScrollingWhenDragging:function(t){var n=this,r=["SELECT","OPTION","INPUT"];t.off("mousedown.fxScrollbar").on("mousedown.fxScrollbar",function(t){e.inArray(t.target.tagName,r)===-1&&n._scrollableArea.css({overflowX:"hidden",overflowY:"hidden"})}).off("mouseup.fxScrollbar").on("mouseup.fxScrollbar",function(){n._scrollableArea.css({overflowX:n._savedProperties.overflowX,overflowY:n._savedProperties.overflowY})})},_positionTrack:function(e,t,n){this._track.x.hide(),this._track.y.hide(),this._attachTrack();var r=0,i=0,s=this._track.y.width(),o=this._track.x.height();this.element.width(Math.max(e)-(!this.options.overlay&&n.isVerticalScrolling&&!n.isHorizontalScrolling?s:0)).height(Math.max(t)-(!this.options.overlay&&n.isHorizontalScrolling&&!n.isVerticalScrolling?o:0)),n.isHorizontalScrolling&&(i=this._pushScrollbarBy,this.element.width(this.element[0].scrollWidth)),n.isVerticalScrolling&&(r=this._pushScrollbarBy,this.element.height("auto")),n.isVerticalScrolling&&n.isHorizontalScrolling&&(this.element.width(this.element.width()+s+r-this._scrollbarSize),this.element.height(this.element.height()+o+i-this._scrollbarSize)),this._scrollableArea.width(e+r).height(t+i),this._ratio={},this._setHandleSize(this._track.x.find(".fx-scrollbar-handle"),n.isVerticalScrolling?s:0,this._calls.horizontal),this._setHandleSize(this._track.y.find(".fx-scrollbar-handle"),n.isHorizontalScrolling?o:0,this._calls.vertical)},_getProperties:function(e){var t={cssWidth:e[0].style.width,cssHeight:e[0].style.height,fluidW:e[0].style.width==="",fluidH:e[0].style.height===""};return t},_eraseOverflowProperties:function(e){var t={overflowX:e.css("overflowX"),overflowY:e.css("overflowY")};return e.css({overflowX:"hidden",overflowY:"hidden"}),t},_transferOverflowProperties:function(e,t){e.css({overflowX:t.overflowX,overflowY:t.overflowY})},_eraseGlobalProperties:function(e){var t=e.css("max-height"),n={marginTop:e.css("marginTop"),marginRight:e.css("marginRight"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),borderTopWidth:e.css("borderTopWidth"),borderTopColor:e.css("borderTopColor"),borderTopStyle:e.css("borderTopStyle"),borderRightWidth:e.css("borderRightWidth"),borderRightColor:e.css("borderRightColor"),borderRightStyle:e.css("borderRightStyle"),borderBottomWidth:e.css("borderBottomWidth"),borderBottomColor:e.css("borderBottomColor"),borderBottomStyle:e.css("borderBottomStyle"),borderLeftWidth:e.css("borderLeftWidth"),borderLeftColor:e.css("borderLeftColor"),borderLeftStyle:e.css("borderLeftStyle"),position:e.css("position"),top:e.css("top"),right:e.css("right"),bottom:e.css("bottom"),left:e.css("left"),"float":e.css("float"),maxHeight:t==="0px"?"none":t};return e.css({margin:0,borderTopWidth:"0",borderTopColor:"",borderTopStyle:"",borderRightWidth:"0",borderRightColor:"",borderRightStyle:"",borderBottomWidth:"0",borderBottomColor:"",borderBottomStyle:"",borderLeftWidth:"0",borderLeftColor:"",borderLeftStyle:"",position:"static",top:"",right:"",bottom:"",left:"","float":"","max-height":"none"}),n},_transferGlobalProperties:function(e,t){e.css({marginTop:t.marginTop,marginRight:t.marginRight,marginBottom:t.marginBottom,marginLeft:t.marginLeft,borderTopWidth:t.borderTopWidth,borderTopColor:t.borderTopColor,borderTopStyle:t.borderTopStyle,borderRightWidth:t.borderRightWidth,borderRightColor:t.borderRightColor,borderRightStyle:t.borderRightStyle,borderBottomWidth:t.borderBottomWidth,borderBottomColor:t.borderBottomColor,borderBottomStyle:t.borderBottomStyle,borderLeftWidth:t.borderLeftWidth,borderLeftColor:t.borderLeftColor,borderLeftStyle:t.borderLeftStyle,position:t.position,top:t.top,right:t.right,bottom:t.bottom,left:t.left,"float":t.float,maxHeight:t.maxHeight})},_getScrollingObjectFromFixedSize:function(){var e=this._scrollableArea.css("overflowX"),t=this._scrollableArea.css("overflowY"),n,r={isHorizontalScrolling:!1,isVerticalScrolling:!1};return e==="scroll"?r.isHorizontalScrolling=!0:e==="auto"&&(n=this.element.width(),this.element.width("auto"),r.isHorizontalScrolling=this.element[0].scrollWidth>this._scrollableArea[0].clientWidth,this.element.width(n)),t==="scroll"?r.isVerticalScrolling=!0:t==="auto"&&(n=this.element.height(),this.element.height("auto"),r.isVerticalScrolling=this.element[0].clientHeight>this._scrollableArea[0].clientHeight,this.element.height(n)),r},_getScrollingObject:function(e){return{isHorizontalScrolling:this._isHorizontalScrolling(e.css("overflowX"),e),isVerticalScrolling:this._isVerticalScrolling(e.css("overflowY"),e)}},_isVerticalScrolling:function(e,t){return this._isScrolling(e,t,this._calls.vertical)},_isHorizontalScrolling:function(e,t){return this._isScrolling(e,t,this._calls.horizontal)},_isScrolling:function(e,t,n){return e==="scroll"?!0:e==="hidden"?!1:t[0][n.clientSize]<t[0][n.scrollSize]},_attachScrollEvent:function(n){var r=this;n.off("scroll.fxScrollbar").on("scroll.fxScrollbar",function(){var n=r._track.x.find(".fx-scrollbar-handle"),i=r._track.y.find(".fx-scrollbar-handle");n.css("left",e(this).scrollLeft()/r._ratio.width),i.css("top",e(this).scrollTop()/r._ratio.height),!r._isResizing&&!r._isRefreshing&&(n.addClass("fx-scrollbar-onmousewheel"),i.addClass("fx-scrollbar-onmousewheel"),t.setTimeout(function(){n.removeClass("fx-scrollbar-onmousewheel"),i.removeClass("fx-scrollbar-onmousewheel")},0))})},_resize:function(){var e=this;this._resizeTimerHandle&&t.clearTimeout(this._resizeTimerHandle),this._isResizing=!0,this.refresh(),this._resizeTimerHandle=t.setTimeout(function(){e._isResizing=!1},10)},_detachTrack:function(){this._track.x.detach(),this._track.y.detach()},_attachTrack:function(){(this._track.x.parent().length===0||this._track.y.parent().length===0)&&this._widget.append(this._track.x).append(this._track.y)},_setHandleSize:function(e,t,n){var r=this.element[0][n.scrollSize],i=this._widget[0][n.clientSize],s=Math.max(this._minimumScrollbarSize,i/r*(i-t));this._ratio[n.size]=(r-i)/Math.max(1,i-s-t-4),e.css(n.size,s).css(n.position,this.element[n.scrollPosition]()*this._ratio[n.size])},_getHandleHandler:function(n,r){return function(i){var s=e(this),o=i[r.page],u=s.position()[r.position];return e(t.document).on("mousemove.fxScrollbar",function(e){return n._scrollableArea[r.scrollPosition](n._ratio[r.size]*(e[r.page]-o+u)),!1}).one("mouseup.fxScrollbar",function(){return e(t.document).off("mousemove.fxScrollbar"),s.removeClass("fx-scrollbar-active"),!1}),s.addClass("fx-scrollbar-active"),!1}},_getTrackHandler:function(t,r){return function(i){if(!t._readyForTrackClick)return;t._readyForTrackClick=!1;if(i[r.page]===n)throw"The event doesn't have a proper position";var s=e(this),o=t._widget[0][r.clientSize],u=s.find(".fx-scrollbar-handle"),a=i[r.page]-s.offset()[r.position],f=t.element.parent()[r.scrollPosition](),l;a<u.position()[r.position]?l=f-o:l=f+o,t.element.parent()[r.scrollPosition](l)}}}),e(function(){e(".fx-scrollbar").each(function(){var n=t.fx.utilities.attributesToObject(this,"data-fxcontrol");e(this).fxScrollbar(n)})})}(jQuery,this),function(e,t,n,r,i,s){var o=r.prototype,u="fxshell.dialogalertbox",a="<div class='fxshell-dialogalertbox-expandContainer'><div class='fxshell-dialogalertbox-contentContainer'></div><div class='fxshell-dialogalertbox-actionsContainer'></div></div>",f="<button class='fxshell-dialogalertbox-expand'></button>",l="<button class='fxshell-dialogalertbox-collapse'></button>",c="<ul>{{for links}}<li tabindex='-1'><a href='{{url:url}}' target='_blank'>{{>text}}</a></li>{{/for}}</ul>",h=t.templates(c);t.widget(u,r,{options:{title:null,content:null,actions:[],maxExpansionHeight:200,expandDuration:150,collapseDuration:300,text:i.getStrings(u),severity:"warning"},_isExpanded:!1,_isExpanding:!1,_isCollapsing:!1,_dialogAlertBox:null,_expandedContainer:null,_actionsContainer:null,_expandButton:null,_collapseButton:null,_create:function(){var e=this,n=e.element;o._create.call(e),e._dialogAlertBox=t(a).width(n.outerWidth()),e._expandedContainer=e._dialogAlertBox.find(".fxshell-dialogalertbox-contentContainer"),e._actionsContainer=e._dialogAlertBox.find(".fxshell-dialogalertbox-actionsContainer"),e._dialogAlertBox.append(e._expandedContainer),e._dialogAlertBox.append(e._actionsContainer),e._anchor.append(e._dialogAlertBox),e._dialogAlertBox.height(0),e.element.addClass("fxshell-dialogalertbox-element")},_init:function(){var e=this,r=e.options.title,i=e.options.content,s=e.options.actions,o=e.options.severity,u,a,f;if(typeof r!="string"){n.Diagnostics.Log.writeEntry("fxshell.dialogalertbox.TitleNotString","title is not a string",n.Diagnostics.LogEntryLevel.error);return}if(typeof i!="string"){n.Diagnostics.Log.writeEntry("fxshell.dialogalertbox.ContentNotString","content is not a string",n.Diagnostics.LogEntryLevel.error);return}if(s){if(s.constructor!==Array){n.Diagnostics.Log.writeEntry("fxshell.dialogalertbox.ActionsNotArray","actions is not an array",n.Diagnostics.LogEntryLevel.error);return}if(s.length>3){n.Diagnostics.Log.writeEntry("fxshell.dialogalertbox.ThreeActionItemsMax","actions can only contain 3 items",n.Diagnostics.LogEntryLevel.error);return}}f=e.getContentContainer(),f.text(r);switch(o){case"information":f.addClass("fxshell-dialogalertbox-info");break;case"warning":f.addClass("fxshell-dialogalertbox-warning");break;case"error":f.addClass("fxshell-dialogalertbox-error")}u={links:s},s&&s.length>0&&(e._actionsContainer.html(h.render(u)),a=e._actionsContainer.find("li"),t(a[a.length-1]).addClass("last-child")),e._expandedContainer.text(i)},_destroy:function(){var e=this;e._expandButton.off(".dialogalertbox"),e._collapseButton.off(".dialogalertbox"),e._dialogAlertBox.remove(),e.element.removeClass("fxshell-dialogalertbox-element"),this._super()},_initializeControls:function(){var e=this,n=e.options;e._expandButton=t(f).text(n.text.expand).on("click.dialogalertbox",t.proxy(e.expand,e)),e._collapseButton=t(l).text(n.text.collapse).hide().on("click.dialogalertbox",t.proxy(e.collapse,e)),e._controls.append(e._expandButton).append(e._collapseButton)},open:function(){var e=this,t=parseInt(e.element.css("border-left-width"),10),n=parseInt(e.element.css("border-top-width"),10);return e._dialogAlertBox.css("left",-t).css("top",-n),o.open.call(e)},expand:function(){var e=this,n=e.options,r=t.Deferred(),i,s,o;return e._isCollapsing=!1,e._isExpanded||e._isExpanding||!e._isOpen?(r.resolve(),e._trigger("expand"),r.promise()):(e._isCollapsing=!(e._isExpanding=!0),i=e._dialogAlertBox.outerHeight()+e._actionsContainer.outerHeight()+e._expandedContainer.outerHeight(),i>n.maxExpansionHeight&&(i=n.maxExpansionHeight,s=e._expandedContainer.outerHeight()-e._expandedContainer.height(),o=i-e._actionsContainer.outerHeight()-s,e._expandedContainer.height(o)),e._dialogAlertBox.stop().animate({height:i>n.maxExpansionHeight&&n.maxExpansionHeight>0?n.maxExpansionHeight:i,opacity:n.openedOpacity},n.expandDuration,function(){e._isExpanded=!0,e._isExpanding=!1,r.resolve(),e._trigger("expand")}),e._expandButton.toggle(),e._collapseButton.toggle(),e._collapseButton.focus(),e._expandedContainer.fxScrollbar(),r.promise())},collapse:function(){var e=this,n=e.options,r=t.Deferred();if(!e._isExpanding)if(e._isCollapsing||!e._isExpanded)return r.resolve(),e._trigger("collapse"),r.promise();return e._isExpanding=!(e._isCollapsing=!0),e._dialogAlertBox.stop().animate({height:0,opacity:n.closedOpacity},n.collapseDuration,function(){e._isCollapsing=e._isExpanded=e._isExpanding=!1,r.resolve(),e._trigger("expand")}),e._collapseButton.toggle(),e._expandButton.toggle(),e._expandButton.focus(),r.promise()},close:function(){var e=this,t=e.options.collapseDuration;return e.options.collapseDuration=e.options.closeDuration,e.collapse(),e.options.collapseDuration=t,o.close.call(e)}})}(this,jQuery,Shell,jQuery.fxshell.toastbox,this.fx.resources),function(e,t,n,r,i){var s=r.resources.getStrings("fxshell.navigation"),o="<div id='fxshell-nav1'><div id='fxshell-nav1-scroll'><div id='fxshell-nav1-items'><nav><ul class='fxshell-navigation-nav1-container'></ul></nav></div></div></div><div id='fxshell-nav2'><a id='fxshell-nav2-back'><span class='sprite'></span></a><div id='fxshell-nav2-scroll'><div id='fxshell-nav2-items'><nav><ul class='fxshell-navigation-nav2-container'></ul></nav></div></div></div>",u="<li data-link='class{>~getClasses(isSelected)} aria-selected{>~getAria(isSelected)} title{>~getTitle(displayError, displayWarning)} data-name{>name} data-state{>~getState(#view, isVisible, displayError, showSpinner, count)} data-warning-state{>~getWarningState(displayWarning)}'><a data-link=\"href{:~getLink(showSpinner, name)}\"><div class='fxshell-nav1-icon'><img data-link='src{url:iconUri} title{:tooltip}' /></div><div class='fxshell-nav1-count' data-link='{>count} data-showcount{>iconShowCount} data-invertcolor{>iconInvertTextColor}'></div><div class='fxshell-nav1-label' data-link='{:displayName:} title{:tooltip}'></div><div class='fxshell-nav1-erroricon'><span class='dlwux-left-nav-alert sprite'></span></div><div class='fxshell-nav1-errortext'></div><div class='fxshell-nav1-warningicon'><span class='dlwux-left-nav-warning sprite'></span></div><div class='fxshell-nav1-warningtext'></div><div class='fxshell-nav1-dots'><div class='fxshell-nav1-dot1'></div><div class='fxshell-nav1-dot2'></div><div class='fxshell-nav1-dot3'></div></div></a></li>",a="<li data-link='class{>~getClasses(name, canNavigate)} aria-selected{>~getAria(name)}'><a data-link='href{:~calculateNavigationPath(canNavigate, navigationPath, name)}' title='{{attr:displayName||DisplayName}}'><span>{{>displayName||DisplayName}}</span></a></li>";e.widget("fxShell.navigation",{_navWidthInPixels:200,_expandedNav1WidthInPixels:200,_collapsedNav1WidthInPixels:60,_nav2WidthInPixels:150,_navErrorIcon:r.resources.getContentUrl("Content/Images/left-nav-alert.png"),_navWarningIcon:r.resources.getContentUrl("Content/Images/left-nav-warning.png"),_extensionBadgeCompiledTemplate:null,_navigationItemCompiledTemplate:null,_navpane:null,_nav1:null,_nav1items:null,_nav1scroll:null,_nav2:null,_nav2back:null,_nav2items:null,_nav2scroll:null,_extensionBadgesLinked:!1,_create:function(){this.widgetEventPrefix="",this.element.html(o),this.element.find("#fxshell-nav2-back").attr("title",s.backImgAlt).find(">span").addClass("sprite dlwux-sprite-fxshell-nav2-back").attr("title",s.backImgAlt),this._compileTemplates(),this._cacheElementReferences()},_destroy:function(){this._releaseTemplates(),this._releaseElementReferences(),this.element.empty(),this._super()},updateLeftNavigationBarView:function(r,s,o){var u=this,a=s.data,f=s.extensionBadges,l=r[r.length-2],c=r.length>=2?r[1]:"",h,p,d;n.UI.Navigation.selectExtension(c),this._ensureExtensionBadges(n.UI.Navigation.getBasePath(),f);if(a&&a.length>0&&a[0].showSpinner!==i){d=this._expandedNav1WidthInPixels+"px";var v=e("#aux-body");v.hasClass("navpane-collapsed")&&v.removeClass("navpane-collapsed"),this._nav1.stop().delay(500).animate({width:d},300,function(){u._nav1.removeClass("fxshell-navigation-badge-collapsed"),u._navpane.removeClass("fxshell-navpane-collapsed"),u._navpane.addClass("fxshell-navpane-expanded"),u._nav1scroll.trigger("resize")}),this._nav2.stop().delay(500).animate({left:this._expandedNav1WidthInPixels+"px"},300,function(){u._nav2.removeClass("fxshell-navigation-level2-docked"),u._nav2.hide()}),this._nav1.delay(300).css("width",d),this._nav1scroll.delay(300).trigger("resize")}else this._nav2items.off("click","a"),this._navigationItemCompiledTemplate.link(this._nav2items,a?a:[],{getClasses:function(e,t){var n=e===l,r="fxshell-nav2-item";return r=r+" "+(n?"selected":""),r=r+" "+(t?"fxshell-nav2-item-unlocked":"fxshell-nav2-item-locked"),r},getAria:function(e){return e===l?"true":"false"},calculateNavigationPath:function(e,t,s){var o=r.slice(0,r.length-2).join("/"),a=null;return e===i||e?t?(a=t,a.extension=r[1],u._navigationUrlEncoder(n.UI.Navigation.calculateNavigationPath(a))):u._navigationUrlEncoder(o+"/"+s):""}}),this._nav2items.on("click","a",function(t){var r,i,s,o=!0,a=e(t.currentTarget),f=n.UI.Navigation.crackNavigationPath(a.attr("href")),l=n.UI.Navigation.currentLocation();if(a.attr("href")!==""){if(u._shouldPreserveCurrentTab(l,f)){i=l.item,s=f.item;do{o?(r=i.type+"/"+s.name,o=!1):r=s.type+"/"+s.name+"/"+r;if(!i.parent&&!s.parent)break;i=i.parent,s=s.parent}while(!0);a.attr("href",n.UI.Navigation.getBasePath()+"/"+l.extension+"/"+r+(l.viewName?"/"+l.viewName:""))}}else t.preventDefault(),t.stopPropagation()}),d=this._navWidthInPixels-this._collapsedNav1WidthInPixels+"px",this._nav1.stop().delay(500).animate({width:this._collapsedNav1WidthInPixels+"px"},300,function(){u._nav1.addClass("fxshell-navigation-badge-collapsed"),u._navpane.removeClass("fxshell-navpane-expanded"),u._navpane.addClass("fxshell-navpane-collapsed");var t=e("#aux-body");t.addClass("navpane-collapsed")});t.cdm.currentExtension&&t.cdm.currentExtension.name!==l&&(h=t.cdm.currentExtension.displayName,p=n.UI.Navigation.calculateNavigationPath({extension:t.cdm.currentExtension}),o&&(o.label&&(h=o.label),o.backNavigationPath&&(p=o.backNavigationPath)),this._nav2back.attr("href",p))},_shouldPreserveCurrentTab:function(e,t){var n,r,i,s,o,u,a=!0,f=!1;if(e.extension===t.extension){n=e.item||null,r=t.item||null;do{if(!n||!r)break;if(a){o=n.type||null,u=r.type||null;if(!o||!u||o!==u)break;a=!1}else{o=n.type||null,u=r.type||null,i=n.name||null,s=r.name||null;if(!o||!u||!i||!s||o!==u||i!==s)break}if(!n.parent&&!r.parent){f=!0;break}n=n.parent||null,r=r.parent||null}while(!0)}return f},_cacheElementReferences:function(){this._navpane=this.element,this._nav1=this._navpane.find("#fxshell-nav1"),this._nav1items=this._nav1.find(".fxshell-navigation-nav1-container"),this._nav1scroll=this._nav1.find("#fxshell-nav1-scroll").fxScrollbar({overlay:!0,animated:!0}),this._nav2=this._navpane.find("#fxshell-nav2"),this._nav2back=this._nav2.find("#fxshell-nav2-back"),this._nav2items=this._nav2.find(".fxshell-navigation-nav2-container"),this._nav2scroll=this._nav2.find("#fxshell-nav2-scroll"),this._nav2scroll.find("#fxshell-nav2-items").fxScrollbar({overlay:!0,animated:!0})},_ensureExtensionBadges:function(e,t){var n=this;t&&t.length>0&&(this._extensionBadgesLinked||(this._extensionBadgeCompiledTemplate.link(this._nav1items,t,{getClasses:function(e){var t="fxshell-nav1-item";return e?t+" selected":t},getAria:function(e){return e?"true":"false"},getErrorIcon:function(){return n._navErrorIcon},getWarningIcon:function(){return n._navWarningIcon},getTitle:function(e,t){return e||t},getState:function(e,t,r,i,s){return t?r?(n._stopExtensionBadgeSpinner(e.nodes[0]),"error"):i?(n._startExtensionBadgeSpinner(e.nodes[0]),"loading"):(n._stopExtensionBadgeSpinner(e.nodes[0]),s<100?"2digit":"3digit"):"notavailable"},getWarningState:function(e){return e?"warning":""},getLink:function(t,r){return t?"":n._navigationUrlEncoder(e+"/"+r)},offset:function(e){return e?"top: "+e+"px;":""}}),this._nav2.find(".fxshell-nav1-errortext").text(s.error),this._nav2.find(".fxshell-nav1-warningtext").text(s.warning)),this._extensionBadgesLinked=!0)},_startExtensionBadgeSpinner:function(n){var r=e(n),i=0,s=r.find(".fxshell-nav1-dot1"),o=r.find(".fxshell-nav1-dot2"),u=r.find(".fxshell-nav1-dot3"),a=r.data("interval"),f;a||(f=function(){var e;i+=15,i%=720,e=i>720?0:i,s.css("opacity",Math.cos((e-0)/360*Math.PI)+1),o.css("opacity",Math.cos((e-80)/360*Math.PI)+1),u.css("opacity",Math.cos((e-160)/360*Math.PI)+1)},a=t.window.setInterval(f,10),r.data("interval",a))},_stopExtensionBadgeSpinner:function(n){var r=e(n),i=r.find(".fxshell-nav1-dots > *"),s=r.data("interval");s&&(i.animate({opacity:0},300),t.window.clearInterval(s),r.data("interval",null))},_navigationUrlEncoder:function(e){return e?encodeURI(e).replace(/'/g,"%27").replace(/"/g,"%22"):e},_releaseElementReferences:function(){this._navpane=null,this._nav1=null,this._nav1items=null,this._nav1scroll=null,this._nav2=null,this._nav2back=null,this._nav2items=null,this._nav2scroll=null},_compileTemplates:function(){this._extensionBadgeCompiledTemplate=e.templates(u),this._navigationItemCompiledTemplate=e.templates(a)},_releaseTemplates:function(){this._extensionBadgeCompiledTemplate=null,this._navigationItemCompiledTemplate=null}})}(jQuery,this,this.Shell,this.fx),function(e,t,n,r,i,s){var o="fxshell.previewbadge",u=t.extend({},i.getStrings(o)),a=t.each(u,function(e,t){u[e]=r.htmlEncode(t)}),f=e.Resources.getResources("fx.links"),l="<div class='preview-badge'>"+a.previewButtonText+"</div>",c="!productionPortalLinkPlaceholder!",h="!termsLinkPlaceholder!",p="<div class='preview-positioner'><div class='preview-content'><h3>"+a.contentHeader+"</h3>"+"<p>"+a.contentPara+"</p>"+"<ul>"+"<li><a href='"+c+"'>"+a.productionPortalLinkText+"</a></li>"+"<li><a href='"+h+"'>"+a.termsLinkText+"</a></li>"+"</ul>"+"<a href='#' class='link-tail preview-content-feedback'>"+a.feedbackLinkText+"</a>"+"</div>"+"</div>",d="<div class='preview-positioner'><div class='preview-content'><h3>"+a.onPremContentHeader+"</h3>"+"<p>"+a.onPremContentPara+"</p>"+"<p>Product version: "+Shell.Environment.getPortalVersion()+"</p>"+"</div>"+"</div>";t.widget("fxshell.previewbadge",{options:{isOnPrem:!1},_previewButton:null,_previewTemplate:null,_create:function(){this.widgetEventPrefix="";var e=this,r,i=this.options.isOnPrem?d:p;i=i.replace(c,n.Environment.getProductionPortalUrl()),i=i.replace(h,f.windowsAzurePreviewTermsOfUse),this._previewButton=t(l),this._previewTemplate=t(i),t(".fxshell-avatarbar-small").append(this._previewButton),t(".fxshell-avatarbar").after(this._previewTemplate),t(".preview-content-feedback").on("click",function(t){t.stopPropagation(),t.preventDefault(),e._trigger("feedback",null,null)}),r={mouseenter:function(t){return e._previewTemplate.find(".preview-content").stop(!0,!1).fade("show",{speed:200}),!1},mouseleave:function(t){return e._previewTemplate.find(".preview-content").stop(!0,!1).fade("hide",{speed:200}),!1},click:function(e){e.stopPropagation()}},this._previewButton.on(r),this._previewTemplate.on(r)},_destroy:function(){this._previewButton.off(),this._previewTemplate.off(),this._super()}})}(this,jQuery,Shell,this.fx.utilities,this.fx.resources),function(e,t,n,r,i,s){var o=t.prototype,u="<div class='fx-dialog-template'></div><a href='#' class='fx-dialog-ok' title='{{attr:text.ok}}'><span class='sprite {{attr:class_.ok}}'></span></a><a href='#' class='fx-dialog-close' title='{{attr:text.close}}'><span class='sprite {{attr:class_.close}}'></span></a>",a=e.templates(u);e.widget("fx.fxDialog",{options:{extension:null,template:null,size:null,class_:i.getClasses("fx.fxDialog"),text:i.getStrings("fx.fxDialog")},_buttonOkClickHandler:null,_escapeHandler:null,_buttonOkMouseEnterHandler:null,_buttonOkMouseLeaveHandler:null,_keydownHandler:null,_savedElementForFocus:null,_create:function(){var t,n=this;this.element.addClass("fx-dialog").attr("role","dialog").html(a.render(this.options)).on("click.fxdropdown","a[href].fx-dialog-ok",this._buttonOkClickHandler=e.proxy(this.ok,this)).on("keydown.fxdropdown",this._escapeHandler=function(t){t.which===e.ui.keyCode.ESCAPE&&n.close(t)}).on("mouseenter.fxdropdown mouseup.fxdropdown focus.fxdropdown","a[href].fx-dialog-ok span.sprite",this._buttonOkMouseEnterHandler=function(){e(this).removeClass(n.options.class_.ok).addClass(n.options.class_.okHover)}).on("mouseleave.fxdropdown mousedown.fxdropdown blur.fxdropdown","a[href].fx-dialog-ok span.sprite",this._buttonOkMouseLeaveHandler=function(){e(this).removeClass(n.options.class_.okHover).addClass(n.options.class_.ok)}),this.options.size&&this.element.css({width:this.options.size[0],height:this.options.size[1],minHeight:0}),this.element.find(".fx-dialog-close").on("click",e.proxy(this.close,this)).find("span.sprite").addClass(this.options.class_.close).on("mouseenter mouseup focus",function(){e(this).removeClass(n.options.class_.close).addClass(n.options.class_.closeHover)}).on("mouseleave mousedown blur",function(){e(this).removeClass(n.options.class_.closeHover).addClass(n.options.class_.close)});if(typeof this.options.template=="string"){if(!this.options.extension||typeof this.options.extension!="string")throw"DialogPresenter: Required parameter options.extension was not supplied, or it is not a string.";t=r.extensionIndex[this.options.extension].templates[this.options.template]}else t=this.options.template;t.link(".fx-dialog-template",this.options.data||{}),this.options.init&&this.options.init.call(this,this.options.data),this._setupTrapFocus(),this._focusFirstElement(),o._create.call(this)},_destroy:function(){this.element.removeClass("fx-dialog").off("click.fxdropdown","a[href].fx-dialog-ok",this._buttonOkClickHandler).off("keydown.fxdropdown",this._escapeHandler).off("mouseenter.fxdropdown mouseup.fxdropdown focus.fxdropdown","a[href].fx-dialog-ok",this._buttonOkMouseEnterHandler).off("mouseleave.fxdropdown mousedown.fxdropdown blur.fxdropdown","a[href].fx-dialog-ok",this._buttonOkMouseLeaveHandler),this._super()},close:function(e){e.preventDefault(),this.options.okOrClose&&this.options.okOrClose.call(this,this.options.data),this.options.closeCallback&&this.options.closeCallback(),this._removeTrapFocus(),this._restoreFocusElement()},ok:function(e){var t,i;e.preventDefault(),this.options.ok&&(t=this.options.ok(this._gatherFields()));if(t===s||t)i=r.extensionIndex[this.options.extension],i&&i.navigationalViewModel&&n.Exp.Data.expireData(i.navigationalViewModel.uri),this.close(e)},_gatherFields:function(){var t={};return this.element.find("input").each(function(){t[this.name||this.id]=this.value||e(this).text()}),this.element.find("select").each(function(){var n=[];e(this).children("option").each(function(){this.selected&&n.push(this.value)}),t[this.name||this.id]=n}),t},enableOkButton:function(){this.element.find(".fx-dialog-ok").attr("href","#")},disableOkButton:function(){this.element.find(".fx-dialog-ok").removeAttr("href")},_setupTrapFocus:function(){var t=this,n=this.widget();this._removeTrapFocus(),n.on("keydown",this._keydownHandler=function(r){var i,s,o;if(r.which!==e.ui.keyCode.TAB)return;i=e(t._getAllTabbableElements(n)),s=i.filter(":first"),o=i.filter(":last");if(r.target===o[0]&&!r.shiftKey)return s.focus(),!1;if(r.target===s[0]&&r.shiftKey)return o.focus(),!1})},_removeTrapFocus:function(){this._keydownHandler&&(this.widget().off("keydown",this._keydownHandler),this._keydownHandler=null)},_focusFirstElement:function(){this._savedElementForFocus=Shell.Utilities.getDocumentActiveElement(),this.widget().find(":tabbable").first().focus()},_restoreFocusElement:function(){var e=this._savedElementForFocus;e&&n.setTimeout(function(){e.focus()},200)},_getAllTabbableElements:function(e){var t=e.find(":tabbable").toArray();return t.stableSort?t.stableSort(function(e,t){return e.tabIndex>t.tabIndex?t.tabIndex===0?-1:1:e.tabIndex<t.tabIndex?e.tabIndex===0?1:-1:0}):t}})}(jQuery,jQuery.Widget,this,Shell,this.fx.resources),function(e,t,n,r){function u(r){function u(){if(o)return;var i;o=e("<div />").appendTo(s),e.extend(r,{closeCallback:a}),s.show(),o.fxDialog(r),s.css({"z-index":r.zIndex?r.zIndex+1:t.fx.utilities.getNextZIndex(s.css("z-index")),"margin-left":o.outerWidth()/-2,"margin-top":o.outerHeight()/-2}),i=r.extension,i&&(i=i.name||i),n.Diagnostics.Telemetry.traceEvent("dialog",i,r.name)}if(o)return;i.css("z-index",r.zIndex?r.zIndex:t.fx.utilities.getNextZIndex(i.css("z-index"))).show().animate({opacity:.75},500),t.setTimeout(u,100)}function a(){i.animate({opacity:0},250,function(){o||i.hide()}),s.hide(),o.remove(),o=null}var i,s,o;n.Namespace.define("Shell.UI",{DialogPresenter:{show:u}}),window.require(["datalabext"],function(){var t=e("body");i=e("<div />",{"class":"fx-dialogpresenter-shield"}).appendTo(t),s=e("<div />",{"class":"fx-dialogpresenter"}).appendTo(t)})}(jQuery,this,Shell),function(e,n,r,i){var s=r.getStrings("fxshell.feedback"),o=function(e){return n.htmlEncode(s[e])},u="<div class='fxshell-feedback'><h2>"+o("title")+"</h2>"+"<textarea class='fxshell-feedback-textarea' id='fxshell-feedback-textarea' rows='9' maxlength='1800'></textarea>"+"</div>",a=t.templates(u)}(Shell,this.fx.utilities,this.fx.resources),function(e,t){e.Namespace.define("Shell",{extensions:[],extensionIndex:{},extension:function(r){return this.extensionIndex[r.name]=r,this.extensions.push(r),r.pageRequestId=e.Environment.getPageRequestId(),r.templates={},r.templateUris={},r.dataIsLoaded=!1,r.navigationalViewModelPath===t&&(r.navigationalViewModelPath=""),r.viewModels===t&&(r.viewModels=[]),r.displayOrderHint===t&&(r.displayOrderHint=9999),r.loadOrderHint===t&&(r.loadOrderHint=9999),r.includeInAllView===t&&(r.includeInAllView=!0),r.excludeFromViewInitialization===t&&(r.excludeFromViewInitialization=!1),r.excludeFromNavigation===t&&(r.excludeFromNavigation=!1),r.id=e.Utilities.newGuid(),r},controls:{}})}(Shell),function(t,n,r,i){e(["generated/DataLabClient/Logging/Performance"],function(e){function i(t){var i=new r.Promise(function(i,s,a){var f=0,l,c,h=function(t){u(t),++f===c&&(i(),e.ResourceTimings.isEnabled&&setTimeout(function(){e.ResourceTimings.doClearResourceTimingsOnIntervalStart=!0,e.ResourceTimings.send({intervalNumber:1},5,2e3)},0))},p=function(e,t,n){++f===c&&i()};o(),r.Utilities.isArray(t)||(t=typeof t=="string"?[t]:[]),c=t.length;if(c===0){i();return}for(l=0;l<c;l++)n.getJSON(t[l]).done(h).fail(p)});return i}function s(e){r.Utilities.isArray(e)||(e=[e]),[].push.apply(t,e)}function o(){if(!r.Utilities.isArray(t))return;t.forEach(function(e){r.Extensions.add(e)}),t=[]}function u(e){var t;if(!!e)for(t in e)e.hasOwnProperty(t)&&r.Extensions.add(e[t])}var t=[];r.Namespace.define("Shell.Internal.ExtensionProviders",{load:i,addLocal:s})})}(this,jQuery,Shell),function(t,n,r,i){function s(){Shell.Diagnostics.Telemetry.timerStart("cdm.compileTemplates");for(var n=0,r=window.templates.length;n<r;n++){var i=window.templates[n],s=Shell.extensionIndex[i.extensionName];if(!s)continue;s.templateUris[i.templateName]=i.src;try{var o=e("datalabext"),u=o.ApplyLocalizationToHTMLResource(i.content),a=t.templates(null,{markup:u,helpers:{extensionName:i.extensionName}});s.templates[i.templateName]=a}catch(f){var l=Shell.Utilities.htmlEncode("Compilation error for template '"+i.src+"' referenced by extension '"+i.extensionName+"' as '"+i.templateName+"'. The error message was: "+f.message||f.Message||f);Shell.Diagnostics.Log.writeEntry("cdm.CompilationError",l,Shell.Diagnostics.LogEntryLevel.error),s.templates[i.templateName]=t.templates("<div>"+l+"</div>")}}Shell.Diagnostics.Telemetry.timerStopAndLog("cdm.compileTemplates","Compile extension templates ("+r+"):")}function o(){function e(e,n){var r=this.view.tmpl.helpers,i=r?Shell.extensionIndex[r.extensionName]:null,s=i&&n(i),o=this.props._encode||"html",u,a;a=s&&s[e]||e,a=a.format(this.props);if(o!=="none"){u=o==="html"?Shell.Utilities.SafeMarkup.create:t.views.converters[o];if(!u)throw'Unknown resource encoder: "'+o+'"';a=u(a)}return a}t.views.tags("res",function(t){return e.call(this,t,function(e){return e.getResources?e.getResources():null})}),t.views.tags("link",function(t){return e.call(this,t,function(e){return e.getLinks?e.getLinks():null})}),t.views.tags("url",function(e){return r.getContentUrl(e)})}function a(e,t,n){var r=typeof n=="number",i=t[t.collectionPropertyName||"data"],s=r?i[n]:{};cdm.setActiveItem(s)}var u;window.cdm={currentContext:{},currentActiveItem:null,currentExtension:null,sessionId:null,currentWizard:null,dialogActive:!1,setActiveItem:function(e){t(cdm.currentActiveItem).unbind("propertyChange.aux-activeItem"),t.observable(cdm).setProperty("currentActiveItem",e),t(cdm.currentActiveItem).bind("propertyChange.aux-activeItem",function(e,n){t(cdm).trigger("activeItemChanged",{activeItem:cdm.currentActiveItem,changeType:"Property",originalEventData:n})}),t(cdm).trigger("activeItemChanged",{activeItem:cdm.currentActiveItem,changeType:"Replaced",originalEventData:null})},getActiveItem:function(){return cdm.currentActiveItem},extensionShowCategory:function(e,n){var r=null;n in Shell.extensionIndex&&(r=Shell.extensionIndex[n],t.observable(r.navItem).setProperty("isVisible",e))},showPreviewLabel:function(e,t){var n="isBeta"in t&&t.isBeta;if(n){var r=Resources&&Resources.getResources?Resources.getResources("fx"):null,i=r&&r.fxshell_previewbadge_previewButtonText?r.fxshell_previewbadge_previewButtonText:"Preview";e.find(".preview-badge-ontitle").remove(),e.append("<span class='preview-badge-ontitle'>"+i+"</span>")}},updateCollectionView:function(e,n,r){var i=t("#tabcontainer"),s=i.tabs();s.refresh(),i.hide(),t("#aux-pane-grid").show(),t("#aux-GridHeader").text(r||"Items"),this.showPreviewLabel(t(".itemtitle"),e),n||(n={});var o=n[n.collectionPropertyName||"data"]||[],f=t("#aux-pane-grid"),l=f.clone();l.find("div.aux-gridview").remove();var c=f.find("div.aux-gridview");c&&cdm._disposeElement(c),f.after(l),f.remove();var h=l.find("#aux-collectionView"),p=[],d=e&&e.gridView;d&&d.columns&&(p=t.map(d.columns,function(e){return t.extend(!0,{},e)})),h.wazDataGrid({columns:p,data:o,selectFirstRowByDefault:!0,selectable:!0,rowSelect:function(r,i){a(e,n,i.selected&&t.inArray(i.selected.dataItem,o))}}),d&&typeof d.activated=="function"&&d.activated(e,h,o),u=h},selectCollectionViewRow:function(e,n){if(!u)return;var r,i=u.wazDataGrid("option","data");if(typeof e=="number")r=i[e];else for(var s=0,o=i.length;s<o;s++)if(i[s][e]===n){r=i[s];break}if(r){var a=u.wazDataGrid("option","rowMetadata"),f=u.wazDataGrid("getSelectedRows"),l=t.grep(a,function(e){return e.dataItem===r})[0];t.each(f,function(){t.observable(this).setProperty("selected",!1)}),l||(l={dataItem:r},t.observable(a).insert(a.length,l)),t.observable(l).setProperty("selected",!0),u.wazDataGrid("option","rowSelect")(null,{selected:l})}},updateTabsView:function(e,n,r,i){var s,o;r||(r={}),e&&(t("#aux-pane-grid").hide(),o=t("#tabcontainer"),o.show(),s=o.find(".itemtitle"),s.text(i.title),this.showPreviewLabel(s,e),Impl.UI.Pivots.selectPivot(e.id,i.selected,n,r))},renderGridView:function(e){var r=e.root,i=e.data,s=e.dataSource,o=t.map(e.columns,function(e){return t.extend(!0,{},e)}),u=e.rowMetadata,a=e.gridContainer||t(r).find("div.gridContainer"),f=typeof e.id=="undefined"?"id":e.id,l=e.dataLoad,c;return a.wazDataGrid("destroy").wazDataGrid({id:f,columns:o,data:i,dataSource:s,rowMetadata:u,selectFirstRowByDefault:!0,selectable:!0,rowSelect:function(e,t){cdm.setActiveItem(t.selected&&t.selected.dataItem||null)},dataLoad:l}),e.enableStatusHelp&&a.on("mouseenter","tbody .status",function(){var e=t(this).closest("tr").view().data.rowMetadata.dataItem,r=t(this).find(".waz-grid-status");e&&typeof e.StateHelpText=="string"&&(c=n.Shell.UI.Balloon.create("help",{content:Shell.Utilities.htmlEncode(e.StateHelpText),position:"top"}),c&&n.Shell.UI.Balloon.show(c,n.Shell.UI.Balloon.getBoundaries(r)))}).on("mouseleave",".status",function(){c&&(n.Shell.UI.Balloon.hide(c),n.Shell.UI.Balloon.destroy(c))}),a},_disposeElement:function(e){e.find("[data-hasdispose]").add(e).each(function(){this.dispose&&this.dispose()})},_renderTemplate:function(e,t,n,r){cdm._disposeElement(e.children());try{t.link(e,n,r)}catch(i){var s=Shell.Utilities.htmlEncodeVariable(i.message||i.Message||i);Shell.Diagnostics.Log.writeEntry("cdm.ErrorRenderingTemplate",s,Shell.Diagnostics.LogEntryLevel.error),e.append("<h2>Error</h2><p>"+s+"</p>")}},_initialize:function(){s(),o(),Shell.UI.Navigation.initializeNav()}}}(jQuery,this,this.fx.resources),function(e,t,n,r,i,s){function o(){var n="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",r=t("<div></div>").css({background:"url("+n+")",height:0,width:0}).appendTo(e.document.body);r.css("background-image")==="none"&&t("html").addClass("highcontrastmode"),r.remove()}function u(){r.diagnostics.onError.add(function(e,t,r,i,s){if(n.Communication.Receiver.getReceiver()!==null){var o,u="exception",a={url:"<unknown script>",line:r,column:i};if(s){if(s.stack){o=s.stack;var f=/.*:\d+:\d+.*/.exec(o);f&&f[0]&&(a.url=f[0].trim())}s.name&&(u=s.name),s.message&&e!==s.message&&(a.exceptionMessage=s.message),s.description&&e!==s.description&&a.exceptionMessage!==s.description&&(a.exceptionDescription=s.description),s.lineNumber&&s.lineNumber!==a.line&&(a.line=s.lineNumber),s.columnNumber&&s.columnNumber!==a.column&&(a.column=s.columnNumber),s.number&&(a.exceptionNumber=s.number&65535,a.exceptionFacilityCode=s.number>>16&8191),s.fileName&&(a.exceptionFileName=s.fileName)}n.Diagnostics.Log.exception(!1,u,o,e,a)}}),o()}window.require(["datalabext"],function(){u()})}(this,jQuery,Shell,this.fx,this.fx.resources),function(e,t){function n(){e("#fxshell-tabshield").show(),e("#fxshell-tabspinner").show()}function r(){e("#fxshell-tabshield").hide(),e("#fxshell-tabspinner").hide()}Shell.Namespace.define("Shell.UI",{Spinner:{show:n,hide:r}})}(jQuery),function(e,t,n,r){var i,s,o,u;s=n.Class.define(function(e,t,n,r){var i={title:e,url:t,locked:!0};this._sender=r.sender,this._parentHandle=r.parentHandle,this._handle=r.handle,this._wizard=null,r.doNotAdd||(this._handle=this._sender.getMethod("Impl.UI.Dialogs.Wizard.addStep")(this._parentHandle,i,n))},{_sender:null,_parentHandle:null,_handle:null,setTitle:function(e){this._update("title",e)},setUrl:function(e){this._update("url",e)},setLocked:function(e){this._update("locked",e)},activate:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setStepActivate")(this._parentHandle,this._handle,e)},deactivate:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setStepDeactivate")(this._parentHandle,this._handle,e)},movePrevious:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setStepMovePrevious")(this._parentHandle,this._handle,e)},moveNext:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setStepMoveNext")(this._parentHandle,this._handle,e)},ready:function(){this._sender.getMethod("Impl.UI.Dialogs.Wizard.stepReady")(this._parentHandle,this._handle)},enableNextButton:function(){this._sender.getMethod("Impl.UI.Dialogs.Wizard.enableNextButton")(this._parentHandle)},disableNextButton:function(){this._sender.getMethod("Impl.UI.Dialogs.Wizard.disableNextButton")(this._parentHandle)},getWizard:function(){return this._wizard||(this._wizard=new i({sender:this._sender,handle:this._parentHandle,doNotAdd:!0})),this._wizard},setWizardData:function(e){this._sender.getMethod("Impl.UI.Dialogs.Wizard.setWizardData")(this._parentHandle,e)},_update:function(e,t){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.updateStep")(this._parentHandle,this._handle,e,t)}}),i=n.Class.define(function(e){var r=this,i={title:e,autoLock:!0,completeButtonEnabled:!1,completeButtonDisplayed:!0,showProgress:!1,size:[800,640]};typeof e=="object"&&e!==null?(this._sender=e.sender,this._handle=e.handle):(this._sender=new n.Communication.Sender("fx"),this._handle=this._sender.getMethod("Impl.UI.Dialogs.Wizard.create")(i,function(){r._sender.close(),r._sender=null,r._handle=null}),this.error(function(e){t.setTimeout(function(){throw e.exception?e.exception:e},0)}))},{_sender:null,_handle:null,open:function(){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.open")(this._handle)},closing:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.setClosing")(this._handle,e)},error:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.setError")(this._handle,e)},setTitle:function(e){this._update("title",e)},setAutoLock:function(e){this._update("autoLock",e)},setSize:function(e,t){this._update("size",[e,t])},showProgress:function(e){this._update("showProgress",e)},setCompleteButtonEnabled:function(e){this._update("completeButtonEnabled",e)},setCompleteButtonDisplayed:function(e){this._update("completeButtonDisplayed",e)},setData:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.setWizardData")(this._handle,e)},addStep:function(e,t,n){return typeof arguments[0]!="number"&&(n=t,t=e,e=null),new s(t,n,e,{sender:this._sender,parentHandle:this._handle})},removeStep:function(e){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.removeStep")(this._handle,e._handle)},getSteps:function(){var t=this,n;if(this._sender)return n=e.Deferred(),this._sender.getMethod("Impl.UI.Dialogs.Wizard.getSteps")(this._handle).done(function(r){var i=[],o;e.each(r,function(e,n){o=new s(null,null,-1,{sender:t._sender,parentHandle:t._handle,handle:n,doNotAdd:!0}),i.push(o)}),n.resolve(i)}),n.promise()},_update:function(e,t){this._sender&&this._sender.getMethod("Impl.UI.Dialogs.Wizard.update")(this._handle,e,t)}}),o=function(){var e,t,r=u("wizardId"),i=u("stepId");return t=n.Communication.Receiver.getReceiver(),t||(t=n.Communication.Receiver.create(r+i),t.register()),e=new s("","",-1,{sender:new n.Communication.Sender("fx"),parentHandle:r,handle:i,doNotAdd:!0}),e},u=function(e){var n=new RegExp("[?&]"+e+"=([^&#]*)"),r=n.exec(t.location.search);return r?decodeURIComponent(r[1].replace(/\+/g," ")):""},n.Namespace.define("Shell.UI.Dialogs",{Wizard:i,getThisWizardStep:o})}(jQuery,this,Shell),function(e,t,n){function s(t,n){var r=e(".aux-tabcontent"),i,s,o,u;r.hide(),n&&(i=n.tabs,s=n.selectedTab,o=t.root.find("ul.fsxshell-tablist"),o.empty(),u=e.map(i,function(t,r){var i=typeof s=="number"&&r===s||s===t.name,o=t.visible!==!1,u=e("<li/>",{"class":"tabitem"+(i?" selected":""),css:{display:o?"":"none"},data:{tab:t,index:r}});return e("<a/>",{text:t.displayName,href:"#"+(n.navigationPath?n.navigationPath+"/":"")+t.name}).appendTo(u),u[0]}),o.append(e(u))),f(!0),r.show()}function o(e,t){var n=e.root;n.find(".itemtitle").text(t.title),c(e,t),s(e,t)}function u(n){var r=n.root,i=n.data,s=e.map(n.columns,function(t){return e.extend(!0,{},t)}),o=e(".aux-tabcontent"),u=typeof n.id=="undefined"?"id":n.id,a;f(!0),a=n.gridContainer||e(r).find("div.gridContainer"),a.wazDataGrid("destroy").wazDataGrid({id:u,columns:s,data:i,selectable:!0,rowSelect:function(e,n){t.cdm.setActiveItem(n.selected&&n.selected.dataItem||null)}}),o.show()}function a(e,n){n=n||0;var r=e.current,i,s,o,u,l,c,h;if(typeof n=="number")i=r.tabs[n];else if(typeof n=="string"){s=e.current.tabs;for(o=0,u=s.length;o<u;o++)if(s[o].name===n){a(e,o);return}return}e.root.find(".tabitem").removeClass("selected"),l=e.root.find(".fsxshell-tablist"),l.children().removeClass("selected").slice(n,n+1).addClass("selected"),c=r.extension.templates[i.template],h=e.root.find(".tabcontent"),f(e.current.tabs===null||e.current.tabs.length!==1),t.cdm._renderTemplate(h,c,r.data||{},r.extension.templateHelpers),r.selectedTab=i.name,i.opened&&i.opened({root:h,data:r.data,extension:r.extension})}function f(t){var n=e(".fxshell-tabcontainer"),r=e(".aux-tabcontent");r.css("top",""),r.css("height",""),t?n.removeClass("fxshell-tabcontainer-collapsed"):n.addClass("fxshell-tabcontainer-collapsed")}function l(t,n){e([n.tabs]).unbind("arrayChange.tabs")}function c(t,n){var r=t.settings;r&&l(t,r),t.current=n,e([n.tabs]).bind("arrayChange.tabs",function(){s(t,n);var e=!!t.root.find(".fsxshell-tablist .selected").length;e||a(t,0)})}var r={},i;e.fn.jQueryUITabs||(e.fn.jQueryUITabs=e.fn.tabs),e.fn.tabs=function(t){var n=this.data("tabs");return t==="get"?n||null:(t=e.extend({},r,t||{}),n=n||new i(this),n.root=this,n.options=t,this.data("tabs",n),n)},i=function(t){var n=this;t.find(".fsxshell-tablist").delegate("li a","click",function(){var t=n.current.tabSelected,r;t&&(r=e(this).parent(),r.hasClass("selected")||t(r.data("tab"),r.data("index")))})},i.prototype={navigate:function(e){if(!e)throw"Tabs.navigate: The settings parameter is not optional.";if(!e.extension)throw"Tabs.navigate: Expected settings.extension.";(!this.current||!e.data||e.data!==this.current.data)&&o(this,e),this.current=e,a(this,e.selectedTab)},setTab:function(e){a(this,e)},refresh:function(){s(this,this.current)}},t.window.azureTabs={renderGridView:u}}(jQuery,this),function(e,t,n,r){function h(){var t=u;t.on("keydown",function(n){var r,i,s;if(n.which!==e.ui.keyCode.TAB)return;r=e(v(t)),i=r.filter(":first"),s=r.filter(":last");if(n.target===s[0]&&!n.shiftKey)return i.focus(),!1;if(n.target===i[0]&&n.shiftKey)return s.focus(),!1})}function p(){l=Shell.Utilities.getDocumentActiveElement(),e(v(u)).first().focus()}function d(){l&&l.focus()}function v(e){var t=e.find(":tabbable").toArray();return t.stableSort?t.stableSort(function(e,t){return e.tabIndex>t.tabIndex?t.tabIndex===0?-1:1:e.tabIndex<t.tabIndex?e.tabIndex===0?1:-1:0}):t}function b(t){var r=n.Utilities.attributeEncode,i=r(c.cancel);e.templates("wizard_layout","<div class='wizard aux-dialog fxshell-wiz' style='display:block;' role='dialog'><div class='wizard-bladescolor' style='display:none'></div><div class='wizard-anchorleft'><div class='wizard-bargroup-complete'></div></div><div class='wizard-content'><div class='wizard-stepgroup'></div><div class='wizard-buttons'><a href='#' class='wizard-button wizard-button-navigation wizard-button-next'><span class='wizard-button-next-label'></span><div><img src='"+t+"/button-next.png' /></div>"+"</a>"+"<a href='#' class='wizard-button wizard-button-navigation wizard-button-back'>"+"<div><img src='"+t+"/button-back.png' /></div>"+"<span class='wizard-button-back-label'></span>"+"</a>"+"</div>"+"<a href='#' class='wizard-button wizard-button-cancel' title='"+i+"'>"+"<img src='"+t+"/button-cancel.png' alt='"+i+"'/>"+"</a>"+"</div>"+"<div class='wizard-anchorright'>"+"<div class='wizard-bargroup-incomplete'></div>"+"</div>"+"</div>")}function w(t){var n=m.imagesPath;e.extend(m,t),g=m.stepWidth,y=g*2,n!==m.imagesPath&&b(m.imagesPath)}function E(e,t){if(!window.Shell||!t)return;var n,r,i,s,o,u=Shell.extensionIndex[t];if(!u)throw"Error: extension "+t+" not found.";for(n=0,r=e.length;n<r;n++){i=e[n];if(typeof i.template=="string"){o=i.template,s=u.templates[o];if(!s)throw"Error: template "+o+" not found in extension "+t+".";i.template=s}}}function S(e,t,n){var r=e.paneContent,i=e.completeBar,s=e.incompleteBar;if(t===e.state)return;switch(t){case"complete":r.animate({left:"0"},0).animate({left:-g+"px",opacity:"hide"},n/2),s.animate({width:0},n).hide(),i.show().animate({width:y+"px"},n);break;case"active":r.animate({left:(e.state==="complete"?-g:g)+"px"},0).delay(n/2).animate({left:"0",opacity:"show"},n/2),i.animate({width:0},n).hide(),s.animate({width:0},n).hide();break;default:r.animate({left:"0"},0).animate({left:g+"px",opacity:"hide"},n/2),i.animate({width:0},n).hide(),s.show().animate({width:y+"px"},n)}e.state=t}function x(e,t){var n,i,s,o,u=t*y,a=e.view,f=e.steps,l=e.stepIndex,h=f[l],d=l===-1?0:m.animationSpeed,v,g,b,w,E;if(t<0)return;if(l!==-1&&t===l+1&&h.onNextStep&&h.onNextStep.call(e,t)===!1)return;if(e.handlers.onStepChanging&&e.handlers.onStepChanging.call(e,t)===!1)return;h&&h.onStepDeactivated&&h.onStepDeactivated.call(e),e.prevIndex=l;if(t>=f.length){t=f.length-1,e.stepIndex=t,h.onComplete?o=h.onComplete.call(e):e.handlers.onComplete&&(o=e.handlers.onComplete.call(e));if(o!==!1&&!e.isClosed){e.close();return}}else{Shell.UI.Balloon.hideBalloons();for(n=0;n<f.length;n++)n<t?S(f[n],"complete",d):n===t?S(f[n],"active",d):n>t&&S(f[n],"incomplete",d);e.stepIndex=t,a.content(".wizard-button-back").toggle(t!==0),f[t].previousLabel?(E=f[t].previousLabel,w=f[t].previousLabel):E=f[t].previousLabel,w?a.content(".wizard-button-back-label").removeClass("wizard-button-label-invisible"):a.content(".wizard-button-back-label").addClass("wizard-button-label-invisible"),a.content(".wizard-button-back-label").text(w),a.content(".wizard-button-back").attr("title",E||(w?"":c.back)),a.content(".wizard-button-back").find("img").attr("alt",E||(w?"":c.back)),t===f.length-1?(v=m.imagesPath+"/button-complete.png",f[t].completeLabel?(g=f[t].completeLabel,b=f[t].completeLabel):g=c.complete):(v=m.imagesPath+"/button-next.png",f[t].nextLabel?(g=f[t].nextLabel,b=f[t].nextLabel):g=c.next),b?a.content(".wizard-button-next-label").removeClass("wizard-button-label-invisible"):a.content(".wizard-button-next-label").addClass("wizard-button-label-invisible"),a.content(".wizard-button-next-label").text(b),a.content(".wizard-button-next").attr("title",g||(b?"":c.next)),a.content(".wizard-button-next").find("img").attr("src",v).attr("alt",g||(b?"":c.next)),s=f[t],s.onStepActivate&&s.onStepActivate.call(e)}u=t*y,i=(f.length-t-1)*y,a.content(".wizard-bargroup-complete").animate({width:u+"px"},d),a.content(".wizard-bargroup-incomplete").animate({width:i+"px"},d),a.content(".wizard-content").animate({width:e.width+"px"},d,function(){var n;s&&window.setTimeout(function(){s.onStepActivated&&l!==t&&s.onStepActivated.call(e),n=s.doNotFocusFirstItem===r||s.doNotFocusFirstItem!==r&&!s.doNotFocusFirstItem,n&&p()},200)}),a.content(".wizard-button-next-label").text(b),a.content(".wizard-button-back-label").text(w)}function T(t,n,i){var s=t.steps,o=t.stepIndex;i instanceof Array||(i=[i]),e.each(i,function(){this.state=r}),E(i,t.extension),n>s.length&&(n=s.length),o+=n+i.length<=o?n+i.length-o:0,t.stepIndex=o,e.observable(t.steps).insert(n,i),e.observable(t).setProperty("stepCount",s.length),t.resize(),t.setStep(t.stepIndex)}function N(t,n){var r,i,s,o=0,u=t.steps,a=t.stepIndex;n instanceof Array||(n=[n]);if(n.length>=u.length)throw"Removing too many steps. There should be at least 1 step left.";n.sort();for(r=0,i=n.length;r<i;r++)s=n[r]-o,e.observable(t.steps).remove(s),a+=s<a?-1:s===a?1:0,o++;a>=u.length&&(a=u.length-1),t.stepIndex=a,e.observable(t).setProperty("stepCount",u.length),t.resize(),t.setStep(t.stepIndex)}function C(){var t,n,r;if(!a||!r)t=e(".wizard .wizard-bladescolor"),n=t.css("color"),r=t.css("background-color"),a=L(n),f=L(r)}function k(e,t){var n=t-1,r=e.index,i=r/n,s;return C(),s="#"+Math.round(a[0]+(f[0]-a[0])*i).toString(16)+Math.round(a[1]+(f[1]-a[1])*i).toString(16)+Math.round(a[2]+(f[2]-a[2])*i).toString(16),s}function L(e){var t=0,n,r=[0,0,0];if(e&&e.length>1)if(e[0]==="#")e.length===4?(n=e.substring(1,2),n+=n,r[0]=parseInt(n,16),n=e.substring(2,3),n+=n,r[1]=parseInt(n,16),n=e.substring(3,4),n+=n,r[2]=parseInt(n,16)):(r[0]=parseInt(e.substring(1,3),16),r[1]=parseInt(e.substring(3,5),16),r[2]=parseInt(e.substring(5,7),16));else{e=e.match(/\d+(\.\d+)?%?/g);while(t<3)n=e[t],n.indexOf("%")!==-1&&(n=Math.round(parseFloat(n)*2.55)),r[t]=parseInt(n,10),t++}return r}var i,s,o,u,a=[83,184,225],f=[30,131,174],l,c=t.fx.resources.getStrings("notifications.buttons");e.extend(e.views,{presenters:{},registerPresenters:i=function(n,a){var f,l,c;if(typeof n=="object")for(f in n)i(f,n[f]);else a.allowModal&&(a.modal=function(n,r){r=r||{},o||(o=e("<div />",{id:"fxshell-wiz-shield"}),u=e("<div />",{id:"fxshell-wiz-container"}),e("body").append(o).append(u),h()),o.css("z-index",t.fx.utilities.getNextZIndex(o.css("z-index"))),u.css("z-index",t.fx.utilities.getNextZIndex(u.css("z-index"))),e.templates[a.tmpl].link(u,n,r),c=u[0],o.show(),u.show();var i=e.view(c.firstChild),s=i.presenter=new a.presenter(r,i);return s.onAfterCreate(),s}),l=(l=a.tag)===r?n:l,l&&(a.tag=l,e.views.tags[l]=a),s=(s=a.plugin)===r?n:s,s&&(e.fn[s]=e.fn[s]||function(e,t){return a.link(this,e,t||{})},a.plugin=s),e.views.presenters[n]=a;return this}});var m={imagesPath:fx.resources.getContentUrl("Content/wizard/images"),animationSpeed:350,size:"medium",stepWidth:15},g=m.stepWidth,y=g*2;e.extend(!0,Shell,{controls:{wizard:function(t,n){var r=this,i=n.data;r.view=n,r.stepIndex=-1,r.isClosed=!1,r.steps=i.steps,r.extension=i.extension,r.handlers={onInit:i.onInit,onStepChanging:i.onStepChanging,onComplete:i.onComplete,onDispose:i.onDispose},t=e.extend({stepIndex:0},t),E(r.steps,r.extension),r.options=t,r.stepCount=r.steps.length,r.size=t.size||m.size,r.width=t.width,r.height=t.height,r.handlers.onInit&&r.handlers.onInit.call(this)}}}),Shell.controls.wizard.prototype={onAfterCreate:function(){var n=this,r=n.view;n.element=r.content(),e.link.wizard_completeSteps(r.content(".wizard-bargroup-complete"),n.steps,{onAfterCreate:function(e){var t=e.data.completeBar=e.content();t.click(function(){n.setStep(e.index)})},wizard:n,getColor:k}),e.link.wizard_incompleteSteps(r.content(".wizard-bargroup-incomplete"),n.steps,{onAfterCreate:function(e){e.data.incompleteBar=e.content()},wizard:n,getColor:k}),e.link.wizard_step(r.content(".wizard-stepgroup"),n.steps,{onAfterCreate:function(e){var t;e.tmpl.name==="wizard_step"&&(e.isArray?n.stepViews=e.views:(t=e.data,t.paneContent=e.content(),t.onStepCreated&&t.onStepCreated.call(e.parent.parent.presenter,e)))}}),r.content(".wizard-button-next").click(function(){return e(this).attr("href")==="#"&&n.goNext(),!1}),r.content(".wizard-button-back").click(function(){return e(this).attr("href")==="#"&&n.goPrevious(),!1}),r.content(".wizard-button-cancel").click(function(){return n.close(),!1}),n.resize(),n.setStep(n.options.stepIndex),e(t).on("resize scroll",n.resizeHandler=function(){n.resize()}),n.element.on("keydown",function(t){t.which===e.ui.keyCode.ESCAPE&&(n.close(),t.preventDefault())})},onDispose:function(){if(this.handlers.onDispose&&this.handlers.onDispose.call(this)===!1)return;this.clearStepState()},setStep:function(e){x(this,e)},goNext:function(){this.setStep(this.stepIndex+1)},goPrevious:function(){this.setStep(this.stepIndex-1)},disableBackButton:function(){this.stepIndex!==0&&e(".wizard-button-back:not(.disabled)").removeAttr("href").fadeTo(350,.4).addClass("disabled")},disableNextButton:function(){e(".wizard-button-next:not(.disabled)").removeAttr("href").fadeTo(350,.4).addClass("disabled")},clearStepState:function(){var e,t=this.steps,n=t.length;for(e=0;e<n;e++)t[e].state=""},enableBackButton:function(){this.stepIndex!==0&&e(".wizard-button-back.disabled").attr("href","#").fadeTo(350,1).removeClass("disabled")},enableNextButton:function(){e(".wizard-button-next.disabled").attr("href","#").fadeTo(350,1).removeClass("disabled")},showProgress:function(){e(".wizard-step:visible").append("<div class='wizard-progress'></div>");var t=e(".wizard-content").width();e(".wizard-progress").css({height:this.height,width:t})},hideProgress:function(){e("div").remove(".wizard-progress")},complete:function(){this.setStep(this.steps.length)},close:function(){this.stepIndex&&this.steps[this.stepIndex].onStepDeactivated&&this.steps[this.stepIndex].onStepDeactivated.call(this),this.resizeHandler&&(e(t).off("resize scroll",this.resizeHandler),this.resizeHandler=null),this.element.off("keydown"),this.isClosed=!0,cdm.currentWizard=null;var n=this.view;n.parent.removeViews(n.key),this.onDispose&&this.onDispose(),o.hide(),u.hide(),d()},insertSteps:function(e,t){T(this,e,t)},removeSteps:function(e){N(this,e)},resize:function(){var t,n,r=this.view,i=e(window);switch(this.size){case"large":t=918,n=640;break;case"large-temp":t=800,n=640;break;case"mediumplus":t=650,n=560;break;case"medium":t=600,n=450;break;case"small":t=549,n=375;break;case"tiny":t=400,n=275}t=this.width||t,n=this.height||n,this.width=t,this.height=n,this.element.css({height:n,width:t,top:Math.max(0,(i.height()-n)/2),left:Math.max(0,(i.width()-t)/2)}),r.content(".wizard-bar").css({height:n})},gatherFields:function(t){var n={},i=t!==r&&this.stepViews?this.stepViews[t]:this.view;return i&&(i.content("input").each(function(){var t=e(this);t.is(":checkbox")?n[this.name||this.id]=t.is(":checked")?"on":"off":n[this.name||this.id]=t.val()||t.text()}),i.content("select").each(function(){n[this.name||this.id]=e(this).val()})),n},showAlert:function(e,t,n,r){if(typeof e!="string"){Shell.Diagnostics.Log.writeEntry("wizard.TitleIsNotAString","title is not a string",Shell.Diagnostics.LogEntryLevel.error);return}if(typeof t!="string"){Shell.Diagnostics.Log.writeEntry("wizard.ContentIsNotAString","content is not a string",Shell.Diagnostics.LogEntryLevel.error);return}if(n){if(n.constructor!==Array){Shell.Diagnostics.Log.writeEntry("wizard.ActionsIsNotAnArray","actions is not an array",Shell.Diagnostics.LogEntryLevel.error);return}if(n.length>3){Shell.Diagnostics.Log.writeEntry("wizard.ThreeActionsMax","actions can only contain 3 items",Shell.Diagnostics.LogEntryLevel.error);return}}if(r&&r!=="information"&&r!=="warning"&&r!=="error"){Shell.Diagnostics.Log.writeEntry("wizard.SeverityValueIsNotValid","severity can be only information, warning, or error",Shell.Diagnostics.LogEntryLevel.error);return}var i=this.element;i?(i.dialogalertbox({title:e,content:t,actions:n,severity:r}),i.dialogalertbox("open")):Shell.Diagnostics.Log.writeEntry("wizard.UnableToDisplayAlert","Unable to find wizard to display alert on",Shell.Diagnostics.LogEntryLevel.error)},hideAlert:function(){var e=this.element;e?(e.dialogalertbox("close"),e.on("dialogalertboxclose",function(){e.dialogalertbox("destroy")})):Shell.Diagnostics.Log.writeEntry("wizard.UnableToHideAlert","Unable to find wizard to hide the alert",Shell.Diagnostics.LogEntryLevel.error)}},e.views.registerPresenters({wizard:{presenter:Shell.controls.wizard,tmpl:"wizard_layout",allowModal:!0,setOptions:w}}),e.each({step:"<div class='wizard-step'>{{for #data tmpl=template/}}</div>",completeSteps:"<span class='wizard-bar' data-link='css-background-color{:~getColor(#view,~wizard.stepCount)}'><span class='wizard-num' data-link='{:#index+1}'></span></span>",incompleteSteps:"<span class='wizard-bar' data-link='css-background-color{:~getColor(#view,~wizard.stepCount)}'><span class='wizard-num' data-link='{:#index+1}'></span></span>"},function(t,n){e.templates("wizard_"+t,n)}),b(m.imagesPath),window.cdm&&(cdm.stepWizard=function(t,r){var i=e.views.presenters.wizard.modal(t,r);return cdm.currentWizard=i,n.Diagnostics.Telemetry.traceEvent("wizard",t.extension,t.name),i})}(jQuery,this,Shell),function(e,t,n,r){var i=t.prototype;e.widget("fx.fxButton",t,{options:{submit:!1,selector:null,toggle:!1,pressed:!1,state:"initial",click:e.noop,class_:{},text:{},tabindex:0},_img:null,_clickHandler:null,_mouseDownHandler:null,_mouseEnterHandler:null,_mouseLeaveHandler:null,_keyDownHandler:null,_keyUpHandler:null,_correctKeyPressed:!1,_create:function(){this.widgetFullName="fx-button",this.element.addClass("fx-button").attr({role:"button",tabindex:this.options.tabindex}).on("click",this._clickHandler=e.proxy(this._click,this)).on("mousedown",this._mouseDownHandler=e.proxy(this._mouseDown,this)).on("mouseenter",this._mouseEnterHandler=e.proxy(this._mouseEnter,this)).on("mouseleave",this._mouseLeaveHandler=e.proxy(this._mouseLeave,this)),this.options.selector&&(this._img=this.element.find(this.options.selector)),this.element.is("button")||this._attachKeyEvent(),this._setOption("pressed",this.options.pressed),i._create.call(this)},_destroy:function(){this.element.removeAttr("role tabindex aria-pressed").removeClass("fx-button fx-button-state-hover"),this._mouseLeaveHandler&&(this.element.off("mouseleave",this._mouseLeaveHandler),this._mouseLeaveHandler=null),this._mouseEnterHandler&&(this.element.off("mouseenter",this._mouseEnterHandler),this._mouseEnterHandler=null),this._mouseDownHandler&&(this.element.off("mousedown",this._mouseDownHandler),this._mouseDownHandler=null),this._keyUpHandler&&(this.element.off("keyup",this._keyUpHandler),this._keyUpHandler=null),this._keyDownHandler&&(this.element.off("keydown",this._keyDownHandler),this._keyDownHandler=null),this._clickHandler&&(this.element.off("click",this._clickHandler),this._clickHandler=null),this._super()},_attachKeyEvent:function(){var t=this;this._correctKeyPressed=!1,this.element.on("keydown",this._keyDownHandler=function(n){var r=function(){t.element.trigger("click",n)};n.which===e.ui.keyCode.ENTER&&r(),t._correctKeyPressed=!1,n.which===e.ui.keyCode.SPACE&&(t._correctKeyPressed=!0)}).on("keyup",this._keyUpHandler=function(n){t._correctKeyPressed&&n.which===e.ui.keyCode.SPACE&&(t._correctKeyPressed=!1,t.element.trigger("click",n))})},_click:function(e){if(this.options.disabled)return!1;this._setOption("pressed",!this.options.pressed),this.options.click&&this.options.click.call(this.element,e),this.options.submit&&this.element.submit()},_mouseDown:function(){var t=this;this.element.addClass("fx-button-state-active"),this.options.state="active",this._changeImage(),e(n.document).one("mouseup",function(){t.element.removeClass("fx-button-state-active"),t.options.state="",t.element.hasClass("fx-button-state-hover")?t._mouseEnter():t._mouseLeave()})},_mouseEnter:function(){this.element.addClass("fx-button-state-hover"),this.options.state!=="active"&&(this.options.state="hover",this._changeImage())},_mouseLeave:function(){this.element.removeClass("fx-button-state-hover"),this.options.state!=="active"&&(this.options.state="initial",this._changeImage())},_changeImage:function(){var e;this._img&&(e=this._getClass(),e&&this._img.attr("class","sprite "+e))},_getObject:function(e){return this.options.toggle&&e.normal&&e.pressed&&(e=this.options.pressed?e.pressed:e.normal),e.enabled&&e.disabled&&(e=this.options.disabled?e.disabled:e.enabled),e},_getClass:function(){return typeof this.options.class_=="string"?this.options.class_:this._getObject(this.options.class_)[this.options.state]||null},_getAlt:function(){return typeof this.options.text=="string"?this.options.text:this._getObject(this.options.text)[this.options.state]||null},_setPressed:function(){this.options.toggle?this.element.attr("aria-pressed",this.options.pressed):this.element.removeAttr("aria-pressed")},_setOption:function(e,t){var n=i._setOption.apply(this,arguments);switch(e){case"disabled":t?this.element.attr("tabindex",-1):this.element.attr("tabindex",this.options.tabindex),this._changeImage();break;case"tabindex":this.element.attr("tabindex",t);break;case"toggle":case"pressed":this._setPressed(this.options.pressed),this._changeImage();break;case"state":case"class_":case"text":this._changeImage()}return n}})}(jQuery,jQuery.Widget,this),function(e,t,n,r,i,s){var o=t.prototype,u=r.getClasses("fx.fxCopyButton"),a=r.getStrings("fx.fxCopyButton"),f;ZeroClipboard.setMoviePath(u.swf),e.widget("fx.fxCopyButton",t,{options:{getClipboardText:null,flashNotInstalled:function(){this.hide()},complete:null},_clipClient:null,_mouseEnterHandler:null,_create:function(){var t=this;this.element.addClass("fx-copybutton").attr("aria-label",a.label),f===s&&(f=this._checkForFlash()),n.clipboardData||f?(this.element.on("mouseenter",this._mouseEnterHandler=function(){if(!n.clipboardData&&!t._clipClient){t._clipClient=new ZeroClipboard.Client,t._clipClient.addEventListener("onMouseDown",function(e){e.setText(t.options.getClipboardText())}),t._clipClient.addEventListener("onComplete",function(){t._trigger("complete")});var r=e(this);r.append(t._clipClient.getHTML(r.outerWidth(),r.outerHeight()))}}),this._setOption("click",this._click),this._setOption("tabindex",-1),o._create.call(this)):(this.element.addClass("fx-copybutton-no-flash"),this.options.flashNotInstalled&&this.options.flashNotInstalled.call(this.element))},_destroy:function(){this.element.removeClass("fx-copybutton fx-copybutton-no-flash").removeAttr("aria-label");if(n.clipboardData||f)this.element.find("embed").remove(),this._clipClient&&(this._clipClient.destroy.call(this),this._clipClient=null),this._mouseEnterHandler&&(this.element.off("mouseenter",this._mouseEnterHandler),this._mouseEnterHandler=null);this._super()},_click:function(){n.clipboardData&&(n.clipboardData.setData("Text",this.options.getClipboardText()),this.options.complete&&this.options.complete())},_checkForFlash:function(){var e=!1,t;if(i.plugins&&i.plugins["Shockwave Flash"])e=!0;else if(n.ActiveXObject)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),t&&(e=!0)}catch(r){}return e}})}(jQuery,jQuery.fx.fxButton,this,this.fx.resources,navigator),function(e,t,n){var r=function(e){var r,i=e.selectionStart,s=e.selectionEnd,o=e.selectionDirection||"forward",u;if(i===n||s===n)t.document.selection?(r=t.document.selection.createRange(),u=r.text.length,r.moveStart("character",-e.value.length),i=r.text.length-u,s=i+u):i=s=e.value.length;return{start:i,end:s,direction:o}},i=function(e,r){try{if(e.selectionStart!==n)e.selectionStart=r.start,e.selectionEnd=r.end,e.selectionDirection=r.direction;else if(t.document.selection){e.focus();var i=t.document.selection.createRange();i.moveStart("character",-e.value.length),i.moveEnd("character",-e.value.length-1),i.moveStart("character",r.start),i.moveEnd("character",r.end-r.start),i.select()}}catch(s){}},s=function(n){var r=null;return n=e.event.fix(n).originalEvent,n&&n.clipboardData&&n.clipboardData.getData?(/text\/html/.test(n.clipboardData.types)&&(r=n.clipboardData.getData("text/html")),!r&&/text\/plain/.test(n.clipboardData.types)&&(r=n.clipboardData.getData("text/plain")),r&&r.length===0&&(r=null)):t.clipboardData&&(r=t.clipboardData.getData("text")),r};t.fx||(t.fx={}),t.fx.utilities||(t.fx.utilities={}),t.fx.utilities.text={getCaretPosition:r,setCaretPosition:i,getClipboardTextFromPasteEvent:s}}(jQuery,this),function(e,t,n,r){var i="fxLastRemotelyValidatedData",s="fxLastRemotelyValidatedResult",o={};e.UI.Validation.addValidator("required",function(e,n){switch(n.nodeName.toLowerCase()){case"select":var r=t(n).val();return!!r&&r.length>0;case"input":if(this.checkable(n))return this.getLength(e,n)>0;default:return t.trim(e).length>0}},{delayed:!1}),e.UI.Validation.addValidator("range",["min","max"],function(e,t,n){var i=n.min!==r?e>=parseInt(n.min,10):!0,s=n.max!==r?e<=parseInt(n.max,10):!0;return e.length===0?!0:i&&s}),e.UI.Validation.addValidator("length",["min","max"],function(e,t,n){var i=e.length,s=n.min!==r?i>=parseInt(n.min,10):!0,o=n.max!==r?i<=parseInt(n.max,10):!0;return s&&o}),e.UI.Validation.addValidator("number",function(e){return e.length===0?!0:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},{delayed:!1}),e.UI.Validation.addValidator("digits",function(e){return e.length===0?!0:/^\d+$/.test(e)},{delayed:!1}),e.UI.Validation.addValidator("regex",["pattern","flags"],function(e,t,n){var r=(new RegExp(n.pattern,n.flags||"")).exec(e);return!!r&&r.index===0&&r[0].length===e.length}),e.UI.Validation.addValidator("equalto",["other"],function(e,n,r){var i=this.getModelPrefix(n.name),s=r.other,o=this.appendModelPrefix(s,i),u=t(":input[name='"+this.escapeAttributeValue(o)+"']")[0];return u?e===u.value:null}),e.UI.Validation.addValidator("notequalto",["other"],function(e,n,r){var i=this.getModelPrefix(n.name),s=r.other,o=this.appendModelPrefix(s,i),u=t(":input[name='"+this.escapeAttributeValue(o)+"']")[0];return u?e!==u.value:null}),e.UI.Validation.addValidator("ip",["v4","v6"],function(e,t,n){var i=n.v4===r?!0:n.v4==="true",s=n.v6===r?!1:n.v6==="true";return e.length===0?!0:i&&/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)||s&&!0}),t.ajaxPrefilter(function(e,t,n){var r=e.port;e.mode==="fxValidatorAbort"&&(o[r]&&o[r].abort(),o[r]=n)}),e.UI.Validation.addValidator("remote",["url","additionalfields"],function(r,u,a){var f=this,l=t.Deferred(),c={},h,p=this.getDependency(u),d=this.getModelPrefix(u.name),v,m=t.data(u,i),g;for(v in p)if(p.hasOwnProperty(v)){if(v==="remote")continue;if(p[v]===!1)return null}if(!u.name)throw"Element with remote validation must have a name attribute";t.each(this.splitAndTrim(a.additionalfields||u.name),function(e,r){var i=f.appendModelPrefix(r,d);c[i]=t(n.document).find(":input[name='"+f.escapeAttributeValue(i)+"']").val()});if(m&&e.Utilities.deepEquals(m,c)){g=t.data(u,s);if(g)return g}return h=t.ajax({url:a.url,async:!0,dataType:"json",mode:"fxValidatorAbort",port:"__fx-ValidatorRemote-"+u.name,type:"POST",cache:!1,contentType:"application/json",data:JSON.stringify(c)}),g=t.extend(l.promise(),{abort:h.abort}),h.done(function(e){var n=e===!0,r;t.data(u,i,c),t.data(u,s,g),n?l.resolveWith(u):(r=e||t(u).data("val-remote"),t(u).data("val-remote",r),l.rejectWith(u,[r]))}).fail(function(e,t,n){n!=="abort"&&l.rejectWith(u,arguments)}).always(function(){delete o["__fx-ValidatorRemote-"+u.name]}),g},{order:1e3})}(Shell,jQuery,this),function(e,t,n){var r="fx-editablecontrol",i="fx-editablecontrol-edited",s="fx-childcontrol";e.widget("fx.editablecontrol",{options:{value:n,trackedit:!0,edit:e.noop,noedit:e.noop,change:e.noop},_controlClassName:r,_controlEditedClassName:i,_originalValue:n,_editedFlag:!1,_creating:!0,_create:function(){this.widgetEventPrefix="",typeof this.options.value=="number"&&(this.options.value+=""),this.setOriginalValue(),this._set(this.options.value),this.element.addClass(this._controlClassName);var t=this;this.element.on("method.editablecontrol",function(){var n=arguments[1],r=Array.prototype.slice.call(arguments,2);return e.isFunction(t[n])&&n.charAt(0)!=="_"?t[n].apply(t,r):!1}),this._creating=!1},_destroy:function(){this.element.removeClass(this._controlClassName).removeClass(this._controlEditedClassName).off("method.editablecontrol"),delete this._originalValue,this._super()},revert:function(){this._set(this._originalValue)},setOriginalValue:function(){this._originalValue=this.options.value,this._editedFlag=!1,this.element.removeClass(this._controlEditedClassName)},value:function(){return this.options.value},_set:function(e){this._checkEdited(e),this.options.value=e},_valueComparer:function(e,t){return e==t},_checkEdited:function(e){if(this._creating)return;var t=!this._valueComparer(e,this.options.value);t&&(this.options.trackedit&&(this._valueComparer(e,this._originalValue)?this._editedFlag&&(this.element.removeClass(this._controlEditedClassName),this._trigger("noedit",null,{value:e}),this._editedFlag=!1):this._editedFlag||(this.element.addClass(this._controlEditedClassName),this._trigger("edit",null,{value:e,originalValue:this._originalValue}),this._editedFlag=!0)),this._trigger("change.fxcontrol",null,{value:e}))},_trigger:function(t,n,r){var i,s,o=t.replace(/\..*/gi,""),u=this.options[o];r=r||{},n=e.Event(n),n.type=t,n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(u)&&u.call(this.element[0],n,r)===!1||n.isDefaultPrevented())},_setChildControl:function(e){e?this.element.addClass(s):this.element.removeClass(s)},_setOption:function(e,n){switch(e){case"value":typeof n=="number"&&(n+=""),this._set(n);break;case"trackedit":n=!!n,n?this._checkEdited(this.options.value):this.element.removeClass(this._controlEditedClassName)}return t._setOption.apply(this,arguments)}}),e.fn.fxEditableControl=function(t){function n(e){return e.hasClass(r)||e.hasClass("waz-control")}function o(e){return e.hasClass(i)||e.hasClass("waz-control-edited")}function u(e){return n(e)?e.not("."+s):e.find("."+r).add(e.find(".waz-control")).not("."+s)}var a={triggerMethod:function(){var t,n=arguments;return this.each(function(){var r=Array.prototype.slice.call(n,0);u(e(this)).each(function(){t=e(this).triggerHandler("method.editablecontrol",r)})}),t},hasEditedControls:function(){var t=!1;return this.each(function(){u(e(this)).each(function(){if(o(e(this)))return t=!0,!1})}),t}};return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):this}}(jQuery,jQuery.Widget.prototype),function(e,t,n,r,i,s){var o="fx.fxValidation",u=n.prototype,a=0,f="__fx-validation",l=r.getStrings(o);t.widget(o,n,{options:{container:null,validateOnSubmit:!0,withBalloon:!0,withErrorPlacement:!0},_container:null,_submitHandler:null,_errorMessage:[],_errorLinks:[],_hasFocus:!1,_id:null,_delayedTimer:null,_destroying:!1,_create:function(){this.widget().addClass("fx-validation"),this._attachContainer(this.options.container),this._attachBubbleEvents(),u._create.call(this)},_destroy:function(){this._destroying=!0,this._triggerValidationChanged("destroy"),this.resetValidation(),this._detachContainer(),this._detachBubbleEvents(),this.widget().removeClass("fx-validation"),this._super()},revert:function(){u.revert.call(this),this.resetValidation()},resetValidation:function(){this._errorMessage=[],this._errorLinks=[],this._resetGlobalValidation();var e=i.UI.Validation.getValidationData(this.element[0],!1);this._resetValidators(e),this._hideBalloon(),i.UI.Validation.invalidateCache(this.element[0])},getState:function(){var e=this._getValidatorsState();return i.UI.Validation.getValidationStateName(e)},validate:function(e,t,n){if(this.element.is(":disabled")||this.element.is(":hidden")&&!this.element.is(".fx-shadow"))return"";e=e!==!1,t=t!==!1,this._validating=!0;var r=this.element[0],s=i.UI.Validation.getValidationData(this.element),o=s,u,a=0;return t?this._cancelDelayedValidators():o=i.UI.Validation.filterValidationData(s,"immediate"),this._errorMessage=[],this._errorLinks=[],i.UI.Validation.runValidation(r,o,n),this._handleValidatorResults(o,e),a=i.UI.Validation.getValidationStateFlags(o),t||(u=i.UI.Validation.filterValidationData(s,"delayed"),u.length>0&&(this._resetValidators(u),a|=2,this._runDelayedValidationTimer())),this._setGlobalValidation(),this._validating=!1,this._triggerValidationChanged("immediate"),i.UI.Validation.getValidationStateName(a)},showValidationBalloon:function(){var e=this._errorMessage,t=this._errorLinks;this.options.withBalloon&&(this._errorMessage.length===0&&this.getState()==="pending"&&(e=[l.pending],t=[]),this._showBalloon(e,t))},getElementId:function(){return this.widget()[0].id||this._id||(this._id=f+a++)},_handleValidatorResults:function(e,t){var n,r,s;t=t!==!1;for(s=0;s<e.length;s++){n=e[s],r=i.UI.Validation.getValidationStateFlags([n]),this._resetValidatorValidationClasses(n.validator);if(!t&&n.validator==="required")continue;(r&4)===4?this.widget().addClass("fx-validation-"+n.validator+"-valid"):(r&8)===8?(r&1)===1?(this.widget().addClass("fx-validation-"+n.validator+"-invalid"),this._addErrorMessage(this.widget().data("val-"+n.validator)||n.message),this._addErrorLinks(n.links)):(r&2)===2&&(this.widget().addClass("fx-validation-"+n.validator+"-pending"),this._handlePendingDeferred(n)):(r&1)===1&&(this.widget().addClass("fx-validation-"+n.validator+"-invalid"),this._addErrorMessage(n.message),this._addErrorLinks(n.links))}},_addErrorMessage:function(e){var t=!1,n;for(n=0;n<this._errorMessage.length;n++)if(this._errorMessage[n]===e){t=!0;break}t||this._errorMessage.push(e)},_addErrorLinks:function(e){var t=!1,n,r;if(!e)return;for(r=0;r<e.length;r++){t=!1;for(n=0;n<this._errorLinks.length;n++)if(this._errorLinks[n]===e[r]){t=!0;break}t||this._errorLinks.push(e[r])}},_handlePendingDeferred:function(e){var t=this;(function(n){e.valid.always(function(){e.valid===n&&(t._handleValidatorResults([e]),t._validating||(t.options.withBalloon&&t._hideBalloon(),t._setGlobalValidation(),t._triggerValidationChanged("immediate")))})})(e.valid)},_runDelayedValidationTimer:function(){var t=this;this._delayedTimer!==null&&e.clearTimeout(this._delayedTimer),this._delayedTimer=e.setTimeout(function(){t._delayedTimer=null,t._runDelayedValidation()},this.options.delayedTimerValidation)},_runDelayedValidation:function(){var e=this.element[0],t=i.UI.Validation.getValidationData(e),n=i.UI.Validation.filterValidationData(t,"delayed");i.UI.Validation.runValidation(e,n),this._handleValidatorResults(n),this._setGlobalValidation(),this._triggerValidationChanged("immediate")},_detachContainer:function(){this._container&&this._submitHandler!==null&&(this._container.off("submit.fxContainerValidate",this._submitHandler),this._submitHandler=null)},_attachContainer:function(e){var n=this;this._detachContainer(),e=e?t(e):this.widget().closest("form"),e.length?(this._submitHandler=function(){return n._containerValidate.apply(n,arguments)},e.on("submit.fxContainerValidate",this._submitHandler),this._container=e):this._container=null},_cancelDelayedValidators:function(){this._delayedTimer!==null&&(e.clearTimeout(this._delayedTimer),this._delayedTimer=null);var t=i.UI.Validation.getValidationData(this.element[0],!1),n=i.UI.Validation.filterValidationData(t,"delayed");this._resetValidators(n)&&!this._validating&&(this._setGlobalValidation(),this._triggerValidationChanged("immediate"))},_resetValidators:function(e){var t=!1,n,r,s;for(n=e.length-1;n>=0;n--)t=!0,r=e[n],s=i.UI.Validation.getValidationStateFlags([r]),(s&8)===8&&(s&2)===2&&r.valid.abort&&r.valid.abort(),r.valid=null,this._resetValidatorValidationClasses(r.validator);return t},_getValidatorsState:function(){var e=i.UI.Validation.getValidationData(this.element[0],!1);return i.UI.Validation.getValidationStateFlags(e)},_resetGlobalValidation:function(){this.widget().removeClass("fx-validation-invalid fx-validation-valid fx-validation-pending fx-validation-deferred-pending fx-validation-deferred-valid fx-validation-deferred-invalid")},_resetValidatorValidationClasses:function(e){this.widget().removeClass("fx-validation-"+e+"-invalid").removeClass("fx-validation-"+e+"-valid").removeClass("fx-validation-"+e+"-pending")},_setGlobalValidation:function(){this._resetGlobalValidation();var e=this._getValidatorsState(),t=i.UI.Validation.getValidationStateName(e);t&&(this.widget().addClass("fx-validation-"+t),(e&8)===8&&this.widget().addClass("fx-validation-deferred-"+t))},_containerValidate:function(){return this.element.is(":disabled")||this.element.is(":hidden")&&!this.element.is(".fx-shadow")?null:this.options.validateOnSubmit?this.validate()==="valid":null},_attachBubbleEvents:function(){var e=this;this.widget().on("mouseover.fxValidation",function(){e._triggerValidationChanged.call(e,"mouseover")}).on("mouseout.fxValidation",function(){e._triggerValidationChanged.call(e,"mouseout")}).on("click.fxValidation",function(){e._click()}).on("focus.fxValidation",function(){e._focus()}).on("blur.fxValidation",function(){e._blur()})},_detachBubbleEvents:function(){this.widget().off(".fxValidation")},_click:function(){this._hasFocus=!0,this._triggerValidationChanged("click")},_focus:function(){this._hasFocus=!0,this._triggerValidationChanged("focus")},_blur:function(){this._hasFocus=!1,this._triggerValidationChanged("blur")},_triggerValidationChanged:function(e){this.options.withBalloon&&this._updateBalloon(e)},_updateBalloon:function(e,n,r){var i={top:0,left:0},s=0,o=0;n=n||this._errorMessage,r=r||this._errorLinks,this._destroying||(i=this.widget().offset(),s=this.widget().width(),o=this.widget().height()),t.extend(i,{width:s,height:o}),this.element.trigger("balloon",{balloonType:"validation",eventType:e,id:this.getElementId(),message:n,links:r,hasFocus:this._hasFocus,box:i})},_hideBalloon:function(){this._updateBalloon("mouseout")},_showBalloon:function(e,t){this._updateBalloon("focus",e,t)},_setOption:function(e,t){switch(e){case"container":this._attachContainer(t);break;case"disabled":this.resetValidation()}return u._setOption.apply(this,arguments)}})}(this,jQuery,jQuery.fx.editablecontrol,this.fx.resources,Shell),function(e,t,n,r,i){var s=t.prototype;e.widget("fx.fxTextBox",t,{options:{validateOnKeyPress:!0,validateOnBlur:!0,delayedTimerValidation:500},_keyDownHandler:null,_keyUpHandler:null,_keyPressHandler:null,_pasteHandler:null,_previousValue:null,_justValidated:!1,_downKeyCode:null,_create:function(){var e=this;this.options.value===i&&(this.options.value=this.element.val()),this._keyDownHandler=function(){return e._keyDown.apply(e,arguments)},this._keyUpHandler=function(){return e._keyUp.apply(e,arguments)},this._keyPressHandler=function(){return e._keyPress.apply(e,arguments)},this._pasteHandler=function(){return e._paste.apply(e,arguments)},this.element.addClass("fx-textbox").on("keydown.fxTextBox",this._keyDownHandler).on("keyup.fxTextBox",this._keyUpHandler).on("keypress.fxTextBox",this._keyPressHandler).on("paste.fxTextBox",this._pasteHandler),this._downKeyCode={length:0},s._create.call(this)},_destroy:function(){this._keyDownHandler&&this._keyUpHandler&&this._keyPressHandler&&this._pasteHandler&&(this.element.off("paste.fxTextBox",this._pasteHandler).off("keypress.fxTextBox",this._keyPressHandler).off("keyup.fxTextBox",this._keyUpHandler).off("keydown.fxTextBox",this._keyDownHandler),this._pasteHandler=null,this._keyPressHandler=null,this._keyUpHandler=null,this._keyDownHandler=null),this.element.removeClass("fx-textbox"),this._downKeyCode=null,this._super()},validate:function(){return this._justValidated=!0,s.validate.apply(this,arguments)},_set:function(e){this.element.val(e),s._set.call(this,e)},_keyDown:function(e){this._downKeyCode[e.which]||(this._downKeyCode[e.which]=!0,this._downKeyCode.length++)},_keyUp:function(e){this._downKeyCode[e.which]&&(delete this._downKeyCode[e.which],this._downKeyCode.length--);if(e.which>=16&&e.which<=18||e.which===9)return;this.options.validateOnKeyPress&&(e.which===8||e.which===46)&&this.validate(!1,!1),s._set.call(this,this.element[0].value),this._tentativeResetValidation()},_keyPress:function(e){var t;this.options.validateOnKeyPress&&e.which!==0&&e.which!==8&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(t=this._getNewElementValue(String.fromCharCode(e.which)),this.validate(!1,!1,t))},_paste:function(e){var t,n;this.options.validateOnKeyPress&&(t=r.text.getClipboardTextFromPasteEvent(e),t&&(n=this._getNewElementValue(t),this.validate(!1,!1,n)))},_getNewElementValue:function(e){var t=this.element[0],n=t.value,i=r.text.getCaretPosition(t),s=n.substr(0,i.start);return s+=e,s+=n.substr(i.end),s},_blur:function(e){this._hasFocus=!1,this.element[0].value!==this.options.value&&this._set(this.element[0].value),this._downKeyCode={length:0},this._tentativeResetValidation(),this.options.validateOnBlur&&this.validate(),s._blur.call(this,e)},_tentativeResetValidation:function(){this._justValidated?this._downKeyCode.length||(this._justValidated=!1):this.resetValidation()},_setOption:function(e,t){var n=s._setOption.apply(this,arguments);return e==="disabled"&&this.element.prop("disabled",t),n}})}(jQuery,jQuery.fx.fxValidation,this,this.fx.utilities),function(e,t,n,r){var i="fx.fxPager",s="<ul>{{if longPager}}<li class='fx-pager-page'><a href='#'>1</a></li><li class='fx-pager-input'><input type='text' data-val='true' data-val-range='' data-val-range-min='1' data-val-digits='' value='{{attr:currentPage}}' /></li><li class='fx-pager-page'><a href='#'>{{>numberOfPages}}</a></li>{{else}}{{for pages}}<li class='fx-pager-page'><a href='#'>{{>#data}}</a></li>{{/for}}{{/if}}{{if showArrows}}<li class='fx-pager-arrow fx-pager-arrow-previous'><a href='#' title='{{attr:text.previous}}'><span class='dlwux-pager-arrow-left sprite' title='{{attr:text.previous}}'></span></a></li><li class='fx-pager-arrow fx-pager-arrow-next'><a href='#' title='{{attr:text.next}}'><span class='dlwux-pager-arrow-right sprite' title='{{attr:text.next}}'></span></a></li>{{/if}}</ul>",o=e.templates(s);e.widget(i,{options:{currentPage:1,numberOfPages:1,maxPages:20,change:e.noop,numberOfPagesChange:e.noop,class_:n.getClasses(i),text:n.getStrings(i)},_create:function(){this.element.addClass("fx-pager"),this.options.numberOfPages=Math.max(1,this._normalizeToNumber(this.options.numberOfPages)),this.options.currentPage=Math.max(1,Math.min(this.options.numberOfPages,this._normalizeToNumber(this.options.currentPage))),this.options.maxPages=Math.max(1,this._normalizeToNumber(this.options.maxPages)),this._attachEvents(),this._render(),this._activateBehaviors()},_destroy:function(){this.element.off("click.fxPager","ul li.fx-pager-page a[href]").off("click.fxPager","ul li.fx-pager-arrow-previous a[href]").off("click.fxPager","ul li.fx-pager-arrow-next a[href]").off("keypress.fxPager focusin.fxPager focusout.fxPager mouseup.fxPager","ul li.fx-pager-input input").empty().removeClass("fx-pager"),this._super()},_setOption:function(t,n){var r=!1,i=!1,s,o,u;switch(t){case"numberOfPages":r=!0,i=!0,n=Math.max(1,this._normalizeToNumber(n)),u=n!==this.options.numberOfPages,o=this.options.currentPage,this.options.currentPage=Math.min(n,this.options.currentPage),this.options.currentPage!==o&&this._trigger("change",null,{value:this.options.currentPage});break;case"currentPage":i=!0,n=Math.max(1,Math.min(this._normalizeToNumber(n),this.options.numberOfPages)),this._trigger("change",null,{value:n});break;case"maxPages":n=Math.max(1,this._normalizeToNumber(n)),r=!0,i=!0}return s=e.Widget.prototype._setOption.call(this,t,n),r&&this._render(),i&&this._activateBehaviors(),u&&this._trigger("numberOfPagesChange",null,{numberOfPages:this.options.numberOfPages}),s},_attachEvents:function(){var n=this;this.element.on("click.fxPager","ul li.fx-pager-page a[href]",function(){return n._setOption("currentPage",e(this).text()),!1}).on("click.fxPager","ul li.fx-pager-arrow-previous a[href]",function(){return n._setOption("currentPage",n.options.currentPage-1),!1}).on("click.fxPager","ul li.fx-pager-arrow-next a[href]",function(){return n._setOption("currentPage",n.options.currentPage+1),!1}).on("keypress.fxPager focusin.fxPager focusout.fxPager mouseup.fxPager","ul li.fx-pager-input input",function(r){var i=e(this);switch(r.type){case"keypress":r.which===13&&i.fxTextBox("validate")==="valid"&&n._setOption("currentPage",i.val());break;case"focusin":t.setTimeout(function(){i.select()},0);break;case"focusout":i.val(n.options.currentPage).fxTextBox("validate");break;case"mouseup":r.preventDefault()}})},_getPages:function(){var e=[],t,n;for(t=1,n=Math.min(this.options.numberOfPages,this.options.maxPages);t<=n;t++)e.push(t);return e},_activateElements:function(t){t.each(function(){var t=e(this);t.is("[aria-disabled=true],[aria-selected=true]")&&t.removeAttr("aria-disabled aria-selected").find("a").attr("href","#")})},_disableElement:function(e){e.attr("aria-disabled","true").find("a").removeAttr("href")},_render:function(){var t=this.options.numberOfPages>this.options.maxPages,n=t?[]:this._getPages(),r=this.options.numberOfPages>1,i;this.element.html(o.render(e.extend({},this.options,{longPager:t,pages:n,showArrows:r}))),i=this.element.find(".fx-pager-input input").attr("data-val-range-max",this.options.numberOfPages).fxTextBox({withBalloon:!1,withErrorPlacement:!1}),i.length&&i.data("fx-fxTextBox")._setChildControl(!0)},_activateBehaviors:function(){var t=this;this._activateElements(this.element.find("li")),this.element.find("li.fx-pager-page").filter(function(){return t._normalizeToNumber(e(this).text())===t.options.currentPage}).attr("aria-selected","true").find("a").removeAttr("href"),this.element.find(".fx-pager-input input").val(this.options.currentPage),this.options.currentPage===1?this._disableElement(this.element.find(".fx-pager-arrow.fx-pager-arrow-previous")):this.options.currentPage===this.options.numberOfPages&&this._disableElement(this.element.find(".fx-pager-arrow.fx-pager-arrow-next"))},_normalizeToNumber:function(e){return e===null||typeof e=="undefined"?0:parseInt(e,10)}})}(jQuery,this,this.fx.resources),function(e,t,n,r){var i=n.prototype;e.widget("fx.fxDataPager",n,{options:{dataSource:null,pageSize:20},_refreshHandler:null,_create:function(){var t=this;this.widgetEventPrefix=n.prototype.widgetEventPrefix,this.options.numberOfPages=Math.max(1,this._normalizeToNumber(this.options.currentPage)),i._create.call(this),e(this.options.dataSource).on("refreshSuccess",this._refreshHandler=function(){return t._adjustNumberOfPages(t.options.dataSource.filteredTotalCount)}),this._refreshDataSource()},_destroy:function(){this._refreshHandler&&(e(this.options.dataSource).off("refreshSuccess",this._refreshHandler),this._refreshHandler=null,this.options.dataSource.setPaging(null)),this._super()},_setOption:function(e,t){var n=this.options.dataSource,r=this.options.currentPage,s=this.options.pageSize,o;return e==="pageSize"&&(t=Math.max(1,this._normalizeToNumber(t))),o=i._setOption.apply(this,arguments),(n!==this.options.dataSource||r!==this.options.currentPage||s!==this.options.pageSize)&&this._refreshDataSource(),o},_refreshDataSource:function(){var e={skip:this.options.pageSize*(this.options.currentPage-1),take:this.options.pageSize};this.options.dataSource.setPaging(e).refresh()},_adjustNumberOfPages:function(e){var t=Math.max(1,parseInt(this.options.pageSize,10)),n=Math.floor(e/t);e%t&&n++,n=n||1,n!==this.options.numberOfPages&&this._setOption("numberOfPages",n)}})}(jQuery,this,jQuery.fx.fxPager),function(e,t,n,r){var i=[],s={tableNoScroll:"<div class='fx-grid-container'><table aria-readonly='true' class='fx-grid-full'><caption>{{:text.summary}}</caption>{{for #data tmpl=~templates.header/}}{{for #data tmpl=~templates.body/}}</table></div>",tableWithScroll:"<div class='fx-grid-container'><div class='fx-grid-container-header'><table class='fx-grid-header'><caption>{{:text.summary}}</caption>{{for #data tmpl=~templates.header/}}<tbody></tbody></table></div><div class='fx-grid-container-data'><table class='fx-grid-data'><caption>{{:text.summary}}</caption><colgroup>{{for columns tmpl=~templates.headerColumn/}}</colgroup>{{for #data tmpl=~templates.body/}}</table></div></div>",header:"<colgroup>{{for columns tmpl=~templates.headerColumn/}}</colgroup><thead><tr>{{for columns tmpl=~templates.headerCell/}}</tr></thead>",body:"{{for groups tmpl=~templates.bodyGroups ~gridViewModel=#data/}}{{for data tmpl=~templates.bodyNoGroups ~bodyNoGroupData=data ~gridViewModel=#data/}}{{for noData tmpl=~templates.bodyNoRows ~gridViewModel=#data/}}",bodyNoGroups:"{{if !~groups.length&&~func.isFirstInArray(#data, ~data)}}<tbody class='fx-grid-groupdata' role='rowgroup' aria-expanded='true'>{{for ~bodyNoGroupData tmpl=~templates.bodyRows/}}</tbody>{{/if}}",bodyNoRows:"{{if !~groups.length&&~func.undefinedOrEmpty(~data)}}<tbody class='fx-grid-empty'><tr><td data-link='colspan{:~gridViewModel.numColumns} html{:~gridViewModel.noRows}'></td></tr></tbody>{{/if}}",headerColumn:"<col class='col{{attr:#index+1}}' />",headerCell:"<th role='columnheader' data-link='css-width{:width} class{:~func.combineCssClasses(\"fx-grid-unsortablecolumnheader\", #data.cssClass, #parent.index === ~columns.length - 1 ? \"last-child\" : null)}'><a><span class='fx-grid-headerlabel'>{{:name}}</span></a></th>",bodyGroups:"<tbody class='fx-grid-groupheader'><tr><td data-link='id{:~func.getGroupId(key)} colspan{:~gridViewModel.numColumns}'><a href='#'><span class='fx-grid-grouptext'>{{:text}}</span><span class='fx-grid-grouparrow'><span data-link='class{:~func.yesNo(expanded, ~class_.expanded, ~class_.collapsed) + \" sprite\"}'></span></span></a></td></tr></tbody><tbody class='fx-grid-groupdata' role='rowgroup' data-link='aria-expanded{:expanded} aria-labelledby{:~func.getGroupId(key)}'>{{for ~func.getItemsForGroup(key, expanded) tmpl=~templates.bodyRows/}}</tbody>",bodyRows:"{{for [~func.getEnhancedRowMetadata(#data)] tmpl=~templates.bodyRowsCore ~bodyRowsView=#view ~bodyRowsIndex=#index/}}",bodyRowsCore:"<tr role='row' data-link='class{:~func.getRowClassNames(~bodyRowsIndex, rowMetadata.cssClass)}'>{{for ~columns tmpl=~templates.bodyCell ~enhancedRowMetadata=#data/}}</tr>",bodyCell:"<td role='gridcell' data-link='{cellFormat rowNumber=~bodyRowsIndex columnNumber=#index enhancedRowMetadata=~enhancedRowMetadata columnDefinition=#data} class{:cssClass}'></td>"},o={},u=function(e){return e===null},a=function(e){return e===r},f=function(e){return u(e)||a(e)},l=function(t){if(t===r||t===null)return"";var n=e("<div />");return n.text(t).html()},c=function(e){return e.replace(/[^a-zA-Z0-9\.:\-\/]/g,"").replace(/\//g,"&#x2F;")},h=function(e){return e.replace(/'/g,"&#39;").replace(/\"/g,"&quot;")},p=function(e,t,n){return e.apply(this,[t].concat(n))},d=function(e){return f(e)?"":e+""},v=function(e){return f(e)?"":l(e+"")},m=0,g="__fx-grid",y={expandable:!1,group:"",cssClass:""},b=function(e){this.dataItem=e};e.extend(b.prototype,y),e.widgetReference("fx.fxGrid",{options:{columns:null,data:null,rowMetadata:null,groups:null,retainRowMetadata:!1,maxHeight:null,noRows:"",class_:n.getClasses("fx.fxGrid"),text:n.getStrings("fx.fxGrid")},_references:{columns:!0,data:!0,rowMetadata:!0,groups:!0},_resizeHandler:null,_scrollHandler:null,_dataChangedHandler:null,_rowMetadataChangedHandler:null,_columnsChangedHandler:null,_groupsChangedHandler:null,_eventGroupHeaderClick:null,_gridId:0,_creating:!1,_data:null,_allRowMetadata:null,_templateBodyCell:null,_formatterExtensions:null,_create:function(){var t=this;e.fx.fxGrid.trigger("beforeCreate",this),this._creating=!0,this.element.addClass("fx-grid"),this._gridId=++m,this._templateBodyCell=this._compileBodyCellTemplate(s.bodyCell),this._allRowMetadata=[],this._addAllRowMetadataListener(),e.each(this.options,function(e,n){t._setOption(e,n)}),this._renderGrid(),this._attachEvents(),this._creating=!1,e.fx.fxGrid.trigger("afterCreate",this)},_destroy:function(){e.fx.fxGrid.trigger("beforeDestroy",this),this._detachEvents(),this.element.empty().removeClass("fx-grid"),this._removeResizeHandler(),this._scrollHandler!==null&&(this.element.find(".fx-grid-container-data").off("scroll.fxGrid",this._scrollHandler),this._scrollHandler=null),this._removeListeners(),this.element.unlink(),this._super(),e.fx.fxGrid.trigger("afterDestroy",this)},refresh:function(){this._resizeHeader()},getRowMetadata:function(t){if(!this.options.retainRowMetadata&&e.inArray(t,this.options.data)<0)throw"Row metadata is available only for data items rendered in grid. Use the 'retainRowMetadata' option to allow for row metadata for off-screen data.";return e.grep(this._allRowMetadata,function(e){return e.dataItem===t})[0]||null},getAllRowMetadata:function(){return this._allRowMetadata},_isDisposed:function(){return!this._dataChangedHandler},_addFormatterExtension:function(e,t){this._formatterExtensions=this._formatterExtensions||{},this._formatterExtensions[e]=t},_removeFormatterExtension:function(e){delete this._formatterExtensions[e]},_getRowMetadata:function(t){var n=e.grep(this._allRowMetadata,function(e){return e.dataItem===t})[0];return n||(n=e.grep(this.options.rowMetadata,function(e){return e.dataItem===t})[0],n||(n=new b(t),this._manageRowMetadataListeners([n])),this._allRowMetadata.push(n)),n},_renderRow:function(t){var n=this.element.find("tr[role='row']"),r=e.map(n,function(n){var r=e.view(n);return r.data.rowMetadata.dataItem===t?r:null})[0];r&&r.ctx.bodyRowsView&&r.ctx.bodyRowsView.refresh()},_removeDataListener:function(){this._dataChangedHandler&&(e([this.options.data]).off("arrayChange",this._dataChangedHandler),this._dataChangedHandler=null,this._manageDataItemListeners(null,this.options.data))},_removeRowMetadataListener:function(){this._rowMetadataChangedHandler&&(e([this.options.rowMetadata]).off("arrayChange",this._rowMetadataChangedHandler),this._rowMetadataChangedHandler=null,this._manageRowMetadataListeners(null,this.options.rowMetadata))},_removeColumnsListener:function(){this._columnsChangedHandler&&(e([this.options.columns]).off("arrayChange",this._columnsChangedHandler),this._columnsChangedHandler=null,this._manageColumns(null,this.options.columns))},_removeGroupsListener:function(){this._groupsChangedHandler&&(e([this.options.groups]).off("arrayChange",this._groupsChangedHandler),this._groupsChangedHandler=null)},_onDataArrayChange:function(t,n){e.fx.fxGrid.trigger("beforeOnDataArrayChange",this,[t,n]),this._manageDataItemListeners(t,n);var r=0,i,s=[];while(r<this._allRowMetadata.length)i=this._allRowMetadata[r],this._shouldRetainRowMetadata(i)?r++:(s.push(i),this._evictRowMetadata(i,r));e.fx.fxGrid.trigger("afterOnDataArrayChange",this,[t,n,s])},_shouldRetainRowMetadata:function(t){var n,r=!1;return this.options.retainRowMetadata&&!this._isDefaultValuedRowMetadata(t)||e.inArray(t.dataItem,this.options.data)>=0?!0:(n=e.fx.fxGrid.trigger("shouldRetainRowMetadata",this,[t]),n.forEach(function(e){r|=!!e}),r)},_evictRowMetadata:function(e,t){this._manageRowMetadataListeners(null,[e]),this._allRowMetadata.splice(t,1)},_manageDataItemListeners:function(t,n){var r=this;n&&e(n).off("propertyChange.fxGrid"+this._gridId),t&&e(t).on("propertyChange.fxGrid"+this._gridId,function(e,t){for(var n=0;n<r.options.columns.length;n++)if(t.path===r.options.columns[n].field){r._renderRow(e.target);break}})},_manageRowMetadataListeners:function(t,n){var r=this;n&&e(n).off("propertyChange.grid"+this._gridId),t&&e(t).on("propertyChange.grid"+this._gridId,function(t,n){e.fx.fxGrid.trigger("onRowMetadataChange",r,[t.target,n.path])})},_isDefaultValuedRowMetadata:function(e){for(var t in b.prototype)if(e.hasOwnProperty(t)&&e[t]!==b.prototype[t])return!1;return!0},_manageColumns:function(t,n){var r=this;n&&e(n).off("propertyChange.fxGrid"+this._gridId),t&&(this._normalizeColumns(t),e(t).on("propertyChange.fxGrid"+this._gridId,function(e,t){r._onColumnChange(e,t)}))},_onColumnChange:function(t,n){e.fx.fxGrid.trigger("onColumnChange",this,[t,n])},_onColumnsChange:function(t,n){e.fx.fxGrid.trigger("beforeOnColumnsChange",this,[t,n]),this._manageColumns(t,n),e.fx.fxGrid.trigger("afterOnColumnsChange",this,[t,n])},_addAllRowMetadataListener:function(){var t=this;e([this._allRowMetadata]).on("arrayChange.fxGrid",function(e,n){if(n.change!=="remove")throw"Only removes are allowed to array returned by 'getAllRowMetadata'.  Use the 'rowMetadata' option to supply new or different row metadata.";t._onRowMetadataChange(!1,null,n.items)})},_removeAllRowMetadataListener:function(){e([this._allRowMetadata]).off("arrayChange.fxGrid")},_removeListeners:function(){this._removeDataListener(),this._removeRowMetadataListener(),this._removeColumnsListener(),this._removeGroupsListener(),this._removeAllRowMetadataListener()},_attachEvents:function(){e.fx.fxGrid.trigger("beforeAttachEvents",this);var t=this;this.element.on("click.fxGrid","tbody.fx-grid-groupheader a",this._eventGroupHeaderClick=function(){var n,r=e(this).closest("tbody"),i=r.view().data,s=e.view(this).views,o;for(o in s)if(s.hasOwnProperty(o)){n=s[o].data;break}return e.observable(i).setProperty("expanded",!i.expanded),e.observable(n).refresh(t._getItemsForGroup(i.key,i.expanded)),!1}),e.fx.fxGrid.trigger("afterAttachEvents",this)},_detachEvents:function(){e.fx.fxGrid.trigger("beforeDetachEvents",this),this._eventGroupHeaderClick&&(this.element.off("click.fxGrid",this._eventGroupHeaderClick),this._eventGroupHeaderClick=null),e.fx.fxGrid.trigger("afterDetachEvents",this)},_refreshScrollbar:function(){var e=this.element.find(".fx-grid-container");this.element.fxScrollbar&&e.data("fx-fxScrollbar")&&e.fxScrollbar("refresh")},_compileBodyCellTemplate:function(t){var n=this;return e.templates(null,{markup:t,tags:{cellFormat:{attr:"html",render:function(){var t=this.props,r=t.enhancedRowMetadata.rowMetadata,i=t.columnDefinition;return(i.formatter||e.fxGridFormatter.text)(r.dataItem[i.field],{dataItem:r.dataItem,rowNumber:t.rowNumber,columnNumber:t.columnNumber,rowMetadata:r,column:i,filter:!t.enhancedRowMetadata.isChildRow&&i.filterable?n._currentFilter:""})},onAfterLink:function(t){var r=this.props,i=r.enhancedRowMetadata.rowMetadata,s=this.props.columnDefinition;s&&e.isFunction(s.afterRender)&&s.afterRender(e(t.tgt),i.dataItem[s.field],{dataItem:i.dataItem,rowNumber:r.rowNumber,columnNumber:r.columnNumber,rowMetadata:i,column:s,filter:!r.enhancedRowMetadata.isChildRow&&s.filterable?n._currentFilter:""})}}}})},_getRenderContext:function(){var t=this,n={columns:this.options.columns,groups:this.options.groups,data:this.options.data,text:this.options.text,class_:this.options.class_,func:{testType:function(e,t){return typeof e===t},undefinedOrEmpty:function(e){return!e||!e.length},isFirstInArray:function(t,n){return e.inArray(t,n)===0},getRowClassNames:function(e,t){var n=e%2?"odd":"even";return this.combineCssClasses(n,t)},combineCssClasses:function(){var e="",t,n=arguments.length;for(t=0;t<n;t++)arguments[t]&&(e+=arguments[t]+" ");return e},getItemsForGroup:function(e,n){return t._getItemsForGroup(e,n)},getEnhancedRowMetadata:function(e){return{rowMetadata:t._getRowMetadata(e)}},getGroupId:function(e){return g+t._gridId+"-group-"+e},yesNo:function(e,t,n){return e?t:n}},templates:e.extend({},o,{bodyCell:this._templateBodyCell})},r=e.fx.fxGrid.trigger("renderContext",this);return r.forEach(function(t){e.extend(!0,n,t)}),n},_scrollHeader:function(){this.element.find(".fx-grid-container-header").scrollLeft(this.element.find(".fx-grid-container-data").scrollLeft())},_resizeHeader:function(){this.element.find(".fx-grid-header").width(this.element.find(".fx-grid-data").width())},_renderGrid:function(){var n=this,r=o.tableNoScroll,i;this._data=e.extend({},{columns:this.options.columns,data:this.options.data,noData:this._getNoDataArray(),groups:this.options.groups,noRows:this.options.noRows,class_:this.options.class_,text:this.options.text,numColumns:this.options.columns.length}),this.options.maxHeight&&(r=o.tableWithScroll),this._data.columns.length&&(e.fx.fxGrid.trigger("beforeLink",this),this.element.link(r,this._data,this._getRenderContext()).find(".fx-grid-container > table").attr("id",g+this._gridId),e.fx.fxGrid.trigger("afterLink",this),this.options.maxHeight&&(this.element.find(".fx-grid-container-data").css({height:this.options.maxHeight}),this._resizeHeader())),this._removeResizeHandler(),this.options.maxHeight&&(this._resizeHandler=function(){n._resizeHeader()},this._scrollHandler=e.proxy(this._scrollHeader,this),e(t).on("resize",this._resizeHandler),i=this.element.find(".fx-grid-container-data").on("scroll.fxGrid",this._scrollHandler),i.fxScrollbar&&i.fxScrollbar({overlay:!0,autorefresh:200,isStaticContainerSize:!0}))},_getNoDataArray:function(){return f(this.options.data)||!this.options.data.length?[!0]:[]},_removeResizeHandler:function(){this._resizeHandler!==null&&(e(t).off("resize",this._resizeHandler),this._resizeHandler=null)},_getItemsForGroup:function(e,t){var n=[],r,i,s=this.options.data;if(e){if(t)for(r=0,i=s.length;r<i;r++)this._getRowMetadata(s[r]).group===e&&n.push(s[r]);return n}return s},_normalizeRowMetadata:function(e){var t=e.length;while(t--)this._setDefaultValues(e[t],y)},_onRowMetadataChange:function(t,n,r){n&&this._normalizeRowMetadata(n),this._manageRowMetadataListeners(n,r),n=n||[],r=r||[];var i=e.grep(n,function(t){return e.inArray(t,r)<0}),s=e.grep(r,function(t){return e.inArray(t,n)<0}),o,u=function(t){var n=e.inArray(t,s)>=0,r=e.grep(i,function(e){return e.dataItem===t.dataItem}).length>0;return n||r},a,f=this,l;if(t){o=0;while(o<this._allRowMetadata.length)l=this._allRowMetadata[o],u(l)?this._evictRowMetadata(l,o):o++}this._creating||(this.options.groups.length?this._rerenderGroups():(a=e.map(i.concat(s),function(e){return e.dataItem}),e.each(a,function(){f._renderRow(this)})))},_rerenderGroups:function(){e.each(this.element.find(".fx-grid-groupdata"),function(){e.view(this).refresh()})},_normalizeColumns:function(t){var n={name:"",field:"",formatter:e.fxGridFormatter.text,cssClass:""},r=e.fx.fxGrid.trigger("getDefaultColumnProperties",this),i=t.length;r.forEach(function(t){e.extend(!0,n,t)});while(i--)this._setDefaultValues(t[i],n)},_normalizeGroups:function(e){var t=e.length;while(t--)this._setDefaultValues(e[t],{key:"",text:"",expanded:!0,showIfEmpty:!0})},_setDefaultValues:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e[n]===r&&(e[n]=t[n])},_setOption:function(n,r){var i=this,s,o,u,a;switch(n){case"data":r=r||[],this._removeDataListener(),e([r]).on("arrayChange",this._dataChangedHandler=function(n,r){i.options.groups.length?i._rerenderGroups():(r.change==="insert"&&i.options.data.length===r.items.length||r.change==="remove"&&r.items.length>0&&i.options.data.length===0||r.change==="refresh"&&r.oldItems.length===0^i.options.data.length===0)&&e.observable(i._data.noData).refresh(i._getNoDataArray());switch(r.change){case"insert":i._onDataArrayChange(r.items);break;case"remove":i._onDataArrayChange(null,r.items);break;case"refresh":i._onDataArrayChange(i.options.data,r.oldItems)}t.setTimeout(function(){i._isDisposed()||i._refreshScrollbar()},0)}),this._onDataArrayChange(r,this.options.data),o=!0;break;case"rowMetadata":r=r||[],this._removeRowMetadataListener(),e([r]).on("arrayChange",this._rowMetadataChangedHandler=function(e,t){switch(t.change){case"insert":i._onRowMetadataChange(!0,t.items);break;case"remove":i._onRowMetadataChange(!0,null,t.items);break;case"refresh":i._onRowMetadataChange(!0,i.options.rowMetadata,t.oldItems)}}),this._onRowMetadataChange(!0,r,this.options.rowMetadata);break;case"columns":r=r||[],this._removeColumnsListener(),e([r]).on("arrayChange",this._columnsChangedHandler=function(t,n){switch(n.change){case"insert":i._onColumnsChange(n.items);break;case"remove":i._onColumnsChange(null,n.items);break;case"refresh":i._onColumnsChange(i.options.columns,n.oldItems)}i._data!==null&&e.observable(i._data).setProperty("numColumns",this.length)}),this._manageColumns(r,this.options.columns),o=!0;break;case"groups":r=r||[],this._removeGroupsListener(),e([r]).on("arrayChange",this._groupsChangedHandler=function(e,t){switch(t.change){case"insert":i._normalizeGroups(t.items);break;case"refresh":i._normalizeGroups(i.options.groups)}}),this._normalizeGroups(r),o=!0;break;case"maxHeight":o=!0}return u=e.fx.fxGrid.trigger("beforeSetOption",this,[n,r]),s=e.Widget.prototype._setOption.call(this,n,r),a=e.fx.fxGrid.trigger("afterSetOption",this,[n,r]),u.concat(a).forEach(function(e){e=e||{},o|=e.reRender}),o&&!this._creating&&this._renderGrid(),s}}),e.extend(e.fx.fxGrid,{trigger:function(e,t,n){var r=[];return i[e]&&i[e].forEach(function(e){r.push(e.apply(t,n||[]))}),r},subscribe:function(t,n){var r;return typeof t=="object"?(r={},e.each(t,function(t,n){r[t]=e.fx.fxGrid.subscribe(t,n)}),r):(i[t]||(i[t]=[]),i[t].push(n),[t,n])},unsubscribe:function(t){if(e.isArray(t)){var n=t[0];i[n]&&i[n].forEach(function(e){e===t[1]&&i[n].splice(e,1)})}else e.each(t,function(t,n){e.fx.fxGrid.unsubscribe(n)})},getTemplate:function(e){return s[e]},setTemplate:function(t,n){s[t]=n,o[t]=e.templates(s[t])},synthesizedRowMetadata:b}),function(){var t;for(t in s)s.hasOwnProperty(t)&&e.fx.fxGrid.setTemplate(t,s[t])}(),e.fxGridFormatter={code:d,text:v,helpers:{isNull:u,isUndefined:a,isNullOrUndefined:f,htmlEncode:l,attributeEncode:c,callFormatter:p}}}(jQuery,this,this.fx.resources),function(e,t,n){var r=function(){var t=e.fx.fxGrid.getTemplate("headerCell"),n="<th role='columnheader' data-link='css-width{:width} aria-sort{:sorted} class{:~func.combineCssClasses(\"fx-grid-sortablecolumnheader\", #data.cssClass, #parent.index === ~columns.length - 1 ? \"last-child\" : null)}'><a href='#' data-link='title{:~func.columnHeaderText(sorted, ~text.ascending, ~text.descending)}'><span class='fx-grid-headerlabel'>{{:name}}</span><span data-link='class{:~func.columnHeaderImage(sorted, ~class_.ascending, ~class_.descending) + \" fx-grid-columnsortimage sprite\"} style{:~func.yesNo(sorted, \"display:\", \"display: none\")} title{:~func.columnHeaderText(sorted, ~text.ascending, ~text.descending)}'></span></a></th>";e.fx.fxGrid.setTemplate("headerCell","{{if sortable}}"+n+"{{else}}"+t+"{{/if}}")},i={_eventSortingClick:null,getSortedColumn:function(){var e=this.element.find("th[aria-sort=ascending], th[aria-sort=descending]");return e.length?e.view().data:null},_refreshSorting:function(){this.element.find("thead").view().refresh()},_onSort:function(e,t,n){this._trigger("columnSort",e,{column:t,sort:n})}},s={afterAttachEvents:function(){var t=this;this.element.on("click.fxGrid","thead[class!=fx-grid-empty] th a",this._eventSortingClick=function(n){var r=e.view(this).parent.data,i="ascending",s;return r.sortable?(s=t.getSortedColumn(),s!==null&&s!==r&&e.observable(s).setProperty("sorted",null),r.sorted==="ascending"&&(i="descending"),e.observable(r).setProperty("sorted",i),t._onSort(n,r,i),!1):!1})},afterDetachEvents:function(){this._eventSortingClick&&(this.element.off("click.fxGrid",this._eventSortingClick),this._eventSortingClick=null)},renderContext:function(){return{func:{columnHeaderImage:function(e,t,n){return e==="descending"?n:t},columnHeaderText:function(e,t,n){return e==="ascending"?t:e==="descending"?n:""}}}},getDefaultColumnProperties:function(){return{sortable:!1,sorted:null}},onColumnChange:function(e,t){t.path==="sortable"&&this._refreshSorting()},afterOnColumnsChange:function(e,t){this._refreshSorting()}};e.extend(!0,t.prototype,i),r(),t.subscribe(s)}(jQuery,jQuery.fx.fxGrid),function(e,t,n,r){var i=20,s=function(){var e=t.fx.fxGrid.getTemplate("headerCell"),n="{{if ~resizable}}<span class='fx-grid-resize-handle fx-grid-resize-handle-left'></span><span class='fx-grid-resize-handle fx-grid-resize-handle-right'></span>{{/if}}";t.fx.fxGrid.setTemplate("headerCell",e.replace(/<\/a>/g,n+"</a>"))},o={options:{resizable:!1},_mouseMoveHandler:null,_mouseUpHandler:null,_resizingColumn:null,_filterWidth:0,_originalDataWidth:0,_eventResizeRightMouseDown:null,_eventResizeClick:null,_eventResizeLeftMouseDown:null,_settleColumnSize:function(){var e=this;this.element.find("thead th:not(:last)").each(function(){var n=t.view(this).data,r=t(this).width();n.width!==r&&(t.observable(n).setProperty("width",t(this).width()),e._trigger("columnResize",null,{column:n}))})},_settleDataColumnSize:function(){if(this.options.maxHeight){var e=this.element.find(".fx-grid-container"),n=e.find(".fx-grid-container-header table"),r=e.find(".fx-grid-container-data"),i=e.find("thead th");r.fxScrollbar&&r.fxScrollbar("destroy"),this.element.find(".fx-grid-container-data col:not(:last)").each(function(e){var n=t(this);n.outerWidth(t(i[e]).width())}),this._refreshScrollbar(),e.fxScrollbar?r.fxScrollbar({overlay:!0,autorefresh:200,isStaticContainerSize:!0}):r.width(Math.max(n.width(),this._originalDataWidth))}},_startResizing:function(n){var r=this;n.length&&(this._filterWidth=this.element.find(".fx-grid-filter").width()||0,this._settleColumnSize(),this._resizingColumn=n,n.addClass("fx-grid-resizing-column"),t(e.document).on("mousemove",this._mouseMoveHandler=function(){r._moveResizing.apply(r,arguments)}).one("mouseup",this._mouseUpHandler=function(e){r._mouseUpHandler=null;var t=r._resizingColumn.view().data;r._stopResizing(),r._checkLastColumnSize(),r._refreshScrollbar(),r._trigger("columnResize",e,{column:t}),r._settleDataColumnSize()}))},_stopResizing:function(){this._resizingColumn&&(this._resizingColumn.removeClass("fx-grid-resizing-column"),this._resizingColumn=null),this._mouseMoveHandler&&(t(e.document).off("mousemove",this._mouseMoveHandler),this._mouseMoveHandler=null),this._mouseUpHandler&&(t(e.document).off("mouseup",this._mouseUpHandler),this._mouseUpHandler=null)},_moveResizing:function(e){if(this._resizingColumn){var n=this._resizingColumn.offset(),r=Math.max(i,e.pageX-n.left);t.observable(this._resizingColumn.view().data).setProperty("width",r),this._checkLastColumnSize(),e.preventDefault()}},_checkLastColumnSize:function(){var e=this.element.find("th:last");t.observable(e.view().data).setProperty("width",""),e[0].offsetWidth<i+this._filterWidth&&t.observable(e.view().data).setProperty("width",i+this._filterWidth)}},u={beforeDestroy:function(){this._stopResizing()},afterAttachEvents:function(){var e=this;this.element.on("mousedown.fxGrid",".fx-grid-resize-handle.fx-grid-resize-handle-right",this._eventResizeRightMouseDown=function(n){e._startResizing(t(this).closest("th")),n.preventDefault()}).on("click.fxGrid",".fx-grid-resize-handle",this._eventResizeClick=function(e){e.preventDefault(),e.stopPropagation()}).on("mousedown.fxGrid",".fx-grid-resize-handle.fx-grid-resize-handle-left",this._eventResizeLeftMouseDown=function(n){e._startResizing(t(this).closest("th").prev()),n.preventDefault()})},afterDetachEvents:function(){this._eventResizeRightMouseDown&&(this.element.off("mousedown.fxGrid",this._eventResizeRightMouseDown),this._eventResizeRightMouseDown=null),this._eventResizeClick&&(this.element.off("click.fxGrid",this._eventResizeClick),this._eventResizeClick=null),this._eventResizeLeftMouseDown&&(this.element.off("mousedown.fxGrid",this._eventResizeLeftMouseDown),this._eventResizeLeftMouseDown=null)},renderContext:function(){return{resizable:this.options.resizable}},beforeSetOption:function(e,t){if(e==="resizable")return{reRender:!0}},afterLink:function(){if(this.element.fxScrollbar){var e=this.element.find(".fx-grid-container");this.options.resizable?(e.fxScrollbar({overlay:!0,autorefresh:200}),this._refreshScrollbar()):e.data("fx-fxScrollbar")&&e.fxScrollbar("destroy")}}};t.extend(!0,n.prototype,o),s(),n.subscribe(u)}(this,jQuery,jQuery.fx.fxGrid),function(e,t,n,r){var i="<div class='fx-grid-filter'><a href='#'><span class='sprite'></span></a></div>",s="<div class='fx-grid-searchcontainer'><div class='fx-grid-searchbox'><input type='text' /></div></div>",o=function(e,n){if(n){n=t.fxGridFormatter.helpers.htmlEncode(n).replace(/([.?*+\^$\[\]\\(){}|-])/g,"\\$1");var r=new RegExp("("+n+")","gi");return e.replace(r,"<em>$1</em>")}return e},u={_searchContainer:null,_currentFilter:"",getCurrentFilter:function(){return this._currentFilter},_setCurrentFilter:function(e){this._currentFilter=e,this._addFormatterExtension("filter",this._currentFilter)},_setupFilter:function(){var n=this,r=t.grep(this.options.columns,function(e){return e.filterable}).length;this._searchContainer&&(this._searchContainer.remove(),this._searchContainer=null),this.element.find(".fx-grid-filter").remove(),r?(t(i).find("span.sprite").attr({"class":"sprite dlwux-icon-search",title:this.options.text.filter}).end().find("a").attr("title",this.options.text.filter).on("click",function(){return n._onFilterClick()}).end().appendTo(this.element.find("thead th:last")),this._searchContainer=t(s).find("input").on("focusin",function(){t(this).closest(".fx-grid-searchbox").addClass("focus")}).on("focusout",function(){t(this).closest(".fx-grid-searchbox").removeClass("focus")}).fxTextBox({value:this.getCurrentFilter(),validateOnKeyPress:!1,change:function(e,t){n._onFilter(t.value)}}).on("keydown",function(r){r.which===t.ui.keyCode.ESCAPE&&(r.preventDefault(),n._toggleFilter(),e.setTimeout(function(){n.element.find(".fx-grid-filter a").focus()},0))}).end(),this.element.addClass("fx-grid-filterable").prepend(this._searchContainer)):(this._setCurrentFilter(""),this.element.removeClass("fx-grid-filterable fx-grid-filter-visible"))},_toggleFilter:function(){var e=this.element.toggleClass("fx-grid-filter-visible").find(".fx-grid-searchcontainer"),t=e.find("input"),n;this.element.hasClass("fx-grid-filter-visible")?(n=e.zIndex(),e.css("z-index",n+2),t.focus(),this._onFilter(t.val())):this._onFilter("")},_onFilterClick:function(){return this._toggleFilter(),!1},_onFilter:function(e){e!==this.getCurrentFilter()&&(this._trigger("filterChange",null,{filter:e}),this._setCurrentFilter(e),this._refreshCells())},_refreshFiltering:function(){this._setupFilter(),this.getCurrentFilter()!==""&&this._refreshCells()},_refreshCells:function(){t("td[role=gridcell]",this.element).each(function(){t.view(this).refresh()})}},a={beforeDestroy:function(){this.element.removeClass("fx-grid-filterable fx-grid-filter-visible")},beforeLink:function(){this._setCurrentFilter(this.getCurrentFilter()||"")},afterLink:function(){this._setupFilter()},onColumnChange:function(e,t){t.path==="filterable"&&this._refreshFiltering()},afterOnColumnsChange:function(e,t){this._refreshFiltering()}};t.extend(!0,n.prototype,u),n.subscribe(a),t.fxGridFormatter.text=function(e,n){return t.fxGridFormatter.helpers.isNullOrUndefined(e)?"":o(t.fxGridFormatter.helpers.htmlEncode(e+""),n&&n.filter)}}(this,jQuery,jQuery.fx.fxGrid),function(e,t,n){var r=function(){var t=e.fx.fxGrid.getTemplate("tableNoScroll"),n=e.fx.fxGrid.getTemplate("tableWithScroll"),r="<div class='fx-grid-container-pager'></div>";e.fx.fxGrid.setTemplate("tableNoScroll",t+r),e.fx.fxGrid.setTemplate("tableWithScroll",n+r)},i={options:{pager:null,pagerOptions:{}},_pagerNumberOfPagesChangeHandler:null,_pagerChangeHandler:null,_pagerWidget:null,_oldPagerOptions:null,_destroyPager:function(){var e,t;return this._pagerNumberOfPagesChangeHandler&&(this.element.off("fxpagernumberofpageschange",this._pagerNumberOfPagesChangeHandler),this._pagerNumberOfPagesChangeHandler=null),this._pagerChangeHandler&&(this.element.off("fxpagerchange",this._pagerChangeHandler),this._pagerChangeHandler=null),this._pagerWidget&&(t=this.element.find(".fx-grid-container-pager"),e=this._pagerWidget.call(t,"option"),this._pagerWidget.call(t,"destroy"),this._pagerWidget=null),e},_setupPager:function(t){if(this.options.pager){var n=this,r,i,s,o;this._pagerWidget=e.isFunction(this.options.pager)?this.options.pager:e.fn[this.options.pager],this._pagerNumberOfPagesChangeHandler=function(e,t){n._togglePager(t.numberOfPages)},this._pagerChangeHandler=function(){n.options.maxHeight?(o=n.element.find(".fx-grid-container-data").scrollTop(0),o.fxScrollbar&&o.fxScrollbar("scrollTop",0)):n.element[0].scrollIntoView()},this.element.on("fxpagernumberofpageschange",this._pagerNumberOfPagesChangeHandler).on("fxpagerchange",this._pagerChangeHandler),s=e.extend({},this.options.pagerOptions,t?{currentPage:t.currentPage,numberOfPages:t.numberOfPages}:null),r=this.element.find(".fx-grid-container-pager"),this._pagerWidget.call(r,s),i=this._pagerWidget.call(r,"option","numberOfPages"),typeof i=="number"&&this._togglePager(i)}},_togglePager:function(e){this.element.find(".fx-grid-container-pager").toggleClass("fx-grid-pager-hidden",e<=1)}},s={beforeDestroy:function(){this._destroyPager()},beforeLink:function(){this._oldPagerOptions=this._destroyPager()},afterLink:function(){this._setupPager(this._oldPagerOptions),this._oldPagerOptions=null},afterSetOption:function(e,t){var n;switch(e){case"pager":case"pagerOptions":this._creating||(n=this._destroyPager(),this._setupPager(n))}}};e.extend(!0,t.prototype,i),r(),t.subscribe(s)}(jQuery,jQuery.fx.fxGrid),function(e,t,n,r){var i=function(){var t=e.fx.fxGrid.getTemplate("bodyRowsCore"),n="aria-disabled{:notSelectable||rowMetadata.disabled} aria-selected{:rowMetadata.selected} ";e.fx.fxGrid.setTemplate("bodyRowsCore",t.replace(/data-link='/,"data-link='"+n).replace(/class\{:/,"class{:~func.getSelectedRowClassName(rowMetadata.selected)+"))},s=function(t){e(t).attr("tabindex",0).focus().removeAttr("tabindex")},o=function(t){return function(){t.element.addClass("fx-grid-mousedown"),e("body").one("mouseup",function(){t.element.removeClass("fx-grid-mousedown")})}},u=function(t){var n=".fx-grid",r="tr[role='row']",i=":not([aria-disabled=true])",o=e(t.target),u=o.closest(n),a=o.is(n),f=a?null:o.closest(r),l;if(o.is("input"))return;switch(t.which){case e.ui.keyCode.UP:l=f&&f.prevAll(i).eq(0);if(!l||!l.length)l=u.find(r+i).last();t.preventDefault();break;case e.ui.keyCode.DOWN:l=f&&f.nextAll(i).eq(0);if(!l||!l.length)l=u.find(r+i).first();t.preventDefault();break;case e.ui.keyCode.SPACE:o.is(r)&&t.target===Shell.Utilities.getDocumentActiveElement()&&(o.click(),t.preventDefault())}l&&s(l)},a=function(){this.element.attr("tabindex",0).on("keydown",u).on("mousedown",this._mouseDownHandler=o(this))},f=function(){this.element.removeAttr("tabindex").off("keydown",u),this._mouseDownHandler&&(this.element.off("mousedown",this._mouseDownHandler),this._mouseDownHandler=null)},l={options:{selectable:!1,multiselect:!1},_oldSelectedRows:null,_eventSelectingClick:null,_mouseDownHandler:null,getSelectedRows:function(){return e.grep(this._allRowMetadata,function(e){return e.selected})},unselectAllRows:function(){e.each(this.getSelectedRows(),function(){e.observable(this).setProperty("selected",!1)})}},c={beforeDestroy:function(){f.apply(this,arguments)},afterAttachEvents:function(){var t=this;this.element.on("click.fxGrid","tbody[class!=fx-grid-empty] tr:not([aria-disabled=true])",this._eventSelectingClick=function(n){var r=e.view(this).data.rowMetadata,i=null,o=[];if(!t.options.selectable)return;e.contains(this,Shell.Utilities.getDocumentActiveElement())||s(this);if(!t.options.multiselect){o=t.getSelectedRows();if(o.length===1&&o[0]===r)return;e.each(o,function(){e.observable(this).setProperty("selected",!1)})}r.selected?o.push(r):i=r,e.observable(r).setProperty("selected",!r.selected),t._trigger("rowSelect",n,{selected:i,unselected:o})})},afterDetachEvents:function(){this._eventSelectingClick&&(this.element.off("click.fxGrid",this._eventSelectingClick),this._eventSelectingClick=null)},afterLink:function(){this.options.multiselect&&this.element.find(".fx-grid-container > table").addClass("fx-grid-multiselectable")},renderContext:function(){return{func:{getSelectedRowClassName:function(e){return e?"fx-grid-selected ":""}}}},beforeSetOption:function(e,t){e==="multiselect"?(t=!!t,this.element.find(".fx-grid-container > table").toggleClass("fx-grid-multiselectable",t)):e==="selectable"&&(t?a.apply(this,arguments):f.apply(this,arguments))},beforeOnDataArrayChange:function(){this._oldSelectedRows=this.getSelectedRows()},afterOnDataArrayChange:function(t,n,r){var i=[],s=this;r.forEach(function(t){e.inArray(t,s._oldSelectedRows)>=0&&i.push(t)}),i.length&&this._trigger("rowSelect",null,{selected:null,unselected:i})}};e.extend(!0,t.prototype,l),e.extend(!0,t.synthesizedRowMetadata.prototype,{selected:!1,disabled:!1}),i(),t.subscribe(c)}(jQuery,jQuery.fx.fxGrid,this),function(e,t,n,r){var i=function(){var t=e.fx.fxGrid.getTemplate("bodyNoGroups"),n=e.fx.fxGrid.getTemplate("bodyRowsCore"),r=e.fx.fxGrid.getTemplate("bodyCell"),i="{{if ~expandable}}{{for ~bodyNoGroupData tmpl=~templates.bodyExpandableRows/}}{{else}}",s="{{if #index===0&&~enhancedRowMetadata.isExpandableParentRow}}<td role='gridcell' data-link='class{:cssClass}'><a href='#' class='fx-grid-rowexpander'><span class='fx-grid-grouparrow'><span data-link='class{:~func.yesNo(~enhancedRowMetadata.rowMetadata.expanded, ~class_.expanded, ~class_.collapsed) + \" sprite\"}></span></span></a><span data-link='{cellFormat rowNumber=~bodyRowsIndex columnNumber=#index enhancedRowMetadata=~enhancedRowMetadata columnDefinition=#data}'></span></td>{{else}}",o="{{for [~func.getEnhancedExpandableRowMetadata(#data, true)] tmpl=~templates.bodyExpandableRowsCore ~bodyRowsView=#view ~bodyRowsIndex=#index/}}",u="<tbody class='fx-grid-parentrowheader' data-link='aria-disabled{:notSelectable||rowMetadata.disabled} aria-selected{:rowMetadata.selected}' class{:~func.getSelectedRowClassName(rowMetadata.selected)}>{{for [#data] tmpl=~templates.bodyRowsCore/}}</tbody><tbody class='fx-grid-childrows' role='rowgroup' data-link='aria-expanded{:rowMetadata.expanded}' >{{for [~func.getChildItems(#data.rowMetadata, rowMetadata.expanded)] tmpl=~templates.bodyChildRows/}}</tbody>",a="{{for expanded tmpl=~templates.bodyExpandedChildRows ~childItems=#data/}}",f="{{for ~childItems.loading tmpl=~templates.bodyLoadingChildRows/}}{{for ~childItems.loaded tmpl=~templates.bodyLoadedChildRows/}}{{for ~childItems.loadError tmpl=~templates.bodyLoadErrorChildRows/}}",l="<tr aria-disabled='true' class='fx-grid-childrow'><td data-link='colspan{:~gridViewModel.numColumns} html{:~text.loading}'></td></tr>",c="{{for ~childItems.childItems tmpl=~templates.bodyChildRow/}}",h="<tr aria-disabled='true' class='fx-grid-childrow fx-grid-parentexpanderror'><td data-link='colspan{:~gridViewModel.numColumns} html{:~func.getExpandErrorHtml(~bodyRowsIndex)}'></td></tr>",p="{{for [~func.getEnhancedExpandableRowMetadata(#data, false, true)] tmpl=~templates.bodyRowsCore ~bodyRowsView=#view ~bodyRowsIndex=#index/}}";e.fx.fxGrid.setTemplate("bodyNoGroups",t.replace("}}","}}"+i).replace("{{/if}}","{{/if}}{{/if}}")),e.fx.fxGrid.setTemplate("bodyCell",s+r+"{{/if}}"),e.fx.fxGrid.setTemplate("bodyRowsCore",n.replace(/class\{:/,"class{:~func.getExpandableRowClassName(isChildRow)+")),e.fx.fxGrid.setTemplate("bodyExpandableRows",o),e.fx.fxGrid.setTemplate("bodyExpandableRowsCore",u),e.fx.fxGrid.setTemplate("bodyChildRows",a),e.fx.fxGrid.setTemplate("bodyExpandedChildRows",f),e.fx.fxGrid.setTemplate("bodyLoadingChildRows",l),e.fx.fxGrid.setTemplate("bodyLoadErrorChildRows",h),e.fx.fxGrid.setTemplate("bodyLoadedChildRows",c),e.fx.fxGrid.setTemplate("bodyChildRow",p)},s={options:{getChildItems:null},_eventExpandingClick:null,_eventRetryExpandClick:null,_handlingExpandRow:!1,_findExpandableRowViewData:function(t){var n=e(t).closest("tbody").view(),r=n.data.rowMetadata,i=n.views,s,o=0,u;for(s in i){if(i.hasOwnProperty(s)&&o===1){u=i[s].data[0];break}o++}return{parentRowMetadata:r,childItems:u}},_findRowForItem:function(t){var n=this.element.find("tr[role='row']");return e.map(n,function(n){var r=e.view(n);return r.data.rowMetadata.dataItem===t?n:null})[0]},_onRowExpand:function(t,n){if(this._handlingRowExpand)return;var r=this._findExpandableRowViewData(t),i=r.parentRowMetadata,s=r.childItems,o=this;if(n){this._handlingRowExpand=!0;try{e.observable(i).setProperty("expanded",!i.expanded)}finally{this._handlingRowExpand=!1}}this._getChildItems(i.dataItem,i.expanded,s),!i.expanded&&s.childItems&&e.each(s.childItems,function(t,n){e.each(o._allRowMetadata,function(e,t){if(t.dataItem===n)return o._evictRowMetadata(t,e),!1})}),n&&this._triggerRowExpand(i)},_onRetryRowExpand:function(e){var t=this._findExpandableRowViewData(e),n=t.parentRowMetadata,r=t.childItems;this._getChildItems(n.dataItem,!0,r)},_triggerRowExpand:function(e){this._trigger("rowExpand",null,{rowMetadata:e})},_isExpandable:function(){return e.isFunction(this.options.getChildItems)},_getChildItems:function(e,t,n){var r=this,i;return n||(n={expanded:[],loading:[],loaded:[42],loadError:[]}),t&&(this.options.getChildItems(e).then(function(e){if(r._isDisposed())return;n.childItems=e,r._setChildItemsLoading(n,!1,!1)},function(){if(r._isDisposed())return;n.childItems=[],r._setChildItemsLoading(n,!1,!0)}).always(function(){if(r._isDisposed())return;i=!0}),i||this._setChildItemsLoading(n,!0)),this._setChildItemsExpanded(n,t),n},_setChildItemsExpanded:function(t,n){t.expanded.length>0^n&&(n?e.observable(t.expanded).insert(0,42):e.observable(t.expanded).refresh([]))},_setChildItemsLoading:function(t,n,r){t.loading.length>0^n&&(n?(e.observable(t.loading).insert(0,42),e.observable(t.loaded).refresh([]),e.observable(t.loadError).refresh([])):(e.observable(t.loading).refresh([]),r?(e.observable(t.loaded).refresh([]),e.observable(t.loadError).insert(0,42)):(e.observable(t.loaded).insert(0,42),e.observable(t.loadError).refresh([]))))}},o={afterAttachEvents:function(){var e=this;this.element.on("click.fxGrid","a.fx-grid-rowexpander",this._eventExpandingClick=function(){return e._onRowExpand(this,!0),!1}).on("click.fxGrid",".fx-grid-parentexpanderror a",this._eventRetryExpandClick=function(){return e._onRetryRowExpand(this),!1})},afterDetachEvents:function(){this._eventExpandingClick&&(this.element.off("click.fxGrid",this._eventExpandingClick),this._eventExpandingClick=null),this._eventRetryExpandClick&&(this.element.off("click.fxGrid",this._eventRetryExpandClick),this._eventRetryExpandClick=null)},shouldRetainRowMetadata:function(t){var n,r=this;return this._isExpandable()&&e.each(this.options.data,function(i,s){var o=r._findRowForItem(s),u=o&&r._findExpandableRowViewData(o);if(u&&u.childItems.expanded.length>0&&e.grep(u.childItems.childItems,function(e){return t.dataItem===e}).length>0)return n=!0,!1}),n},renderContext:function(){var t=this;return{expandable:this._isExpandable(),func:{getExpandableRowClassName:function(e){return e?"fx-grid-childrow ":""},getChildItems:function(e,n){return t._getChildItems(e.dataItem,n)},getEnhancedExpandableRowMetadata:function(t,n,r){return e.extend(this.getEnhancedRowMetadata(t),{isExpandableParentRow:n,isChildRow:!!r,notSelectable:r})},getExpandErrorHtml:function(e){return n.Utilities.SafeMarkup.create(t.options.text.expandError.format([e.toString()]))}}}},beforeSetOption:function(e,t){if(e==="getChildItems")return{reRender:!0}},onRowMetadataChange:function(t,n){if(n==="expanded"&&this._isExpandable()){var r=this._findRowForItem(t.dataItem);r&&!e(r).is(".fx-grid-childrow")&&this._onRowExpand(r)}}};e.extend(!0,t.prototype,s),i(),t.subscribe(o)}(jQuery,jQuery.fx.fxGrid,Shell),function(e,t,n,r){var i=Array.prototype.slice,s=function(t){return function(n){return e.fxGridFormatter.helpers.isNullOrUndefined(t[n])?t["##DEFAULT##"]?t["##DEFAULT##"]:n:t[n]}},o=function(t){var n=i.call(arguments,1),r=e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.text,t,n),s=e.fxGridFormatter.helpers.htmlEncode(t);return e.fxGridFormatter.helpers.isNullOrUndefined(t)?"":"<span class='fx-grid-tooltip' title='"+s+"'>"+r+"</span>"},u=function(t){var n=i.call(arguments,1);return t&&!e.fxGridFormatter.helpers.isUndefined(t.text)&&!e.fxGridFormatter.helpers.isUndefined(t.url)?"<a href='"+e.fxGridFormatter.helpers.attributeEncode(e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.code,t.url,n))+"'"+(t.target?" target='"+e.fxGridFormatter.helpers.attributeEncode(e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.code,t.target,n))+"'":"")+">"+e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.text,t.text,n)+"</a>":"<a href='"+e.fxGridFormatter.helpers.attributeEncode(e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.code,t,n))+"'>"+e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.text,t,n)+"</a>"},a=function(e){var t,n;switch(typeof e){case"number":t=new Date(e);break;case"string":n=Date.parse(e),isNaN(n)||(t=new Date(n));break;case"object":e!==null&&e.constructor===Date&&(t=e)}return t},f=function(t){var n=function(n){var r=a(n),s=i.call(arguments,1);return r?e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.text,r.toString(t),s):""};return v(n,a,n)},l=function(e){return"<input type='checkbox'"+(e?" checked='checked'":"")+" />"},c=function(t){var n=i.call(arguments,1);return t&&!e.fxGridFormatter.helpers.isUndefined(t.text)&&!e.fxGridFormatter.helpers.isUndefined(t.url)?"<img class='fx-grid-icon' src='"+e.fxGridFormatter.helpers.attributeEncode(e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.code,t.url,n))+"' alt='' />"+e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.text,t.text,n):"<img class='fx-grid-icon' src='"+e.fxGridFormatter.helpers.attributeEncode(e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.code,t,n))+"' alt='' />"},h=function(t){return function(n){var r=i.call(arguments,1);return e.fxGridFormatter.helpers.isNullOrUndefined(t[n])?t["##DEFAULT##"]?(n=e.fxGridFormatter.text(n),e.fxGridFormatter.helpers.callFormatter(c,t["##DEFAULT##"].text?{url:t["##DEFAULT##"].url,text:t["##DEFAULT##"].text.replace(/##DEFAULT##/g,n)}:t["##DEFAULT##"],r)):"":e.fxGridFormatter.helpers.callFormatter(c,t[n],r)}},p=function(t){var n=s(t);return function(t){var r=i.call(arguments,1);return e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.text,n(t),r)}},d=function(t,n){return function(r){var s=i.call(arguments,1),o=e.fxGridFormatter.helpers.isNullOrUndefined(t[r]),u=o?"":e.fxGridFormatter.helpers.attributeEncode(e.fxGridFormatter.code(t[r].attribute)).replace(" ","_"),a=o?"":e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.text,t[r].text,s);return"<div class='fx-grid-sprite "+u+"'><img src='"+e.fxGridFormatter.helpers.attributeEncode(e.fxGridFormatter.helpers.callFormatter(e.fxGridFormatter.code,n,s))+"' alt='' /></div>"+a}},v=function(t,n,r){if(!t)throw"Display formatter has to be provided to create any formatters bundle.";var i=function(){return t.apply(this,arguments)};return n&&(i.sortFormatter=e.isFunction(n)?n:s(n)),r&&(i.filterFormatter=e.isFunction(r)?r:s(r)),i},m=function(e){return v(e,e,e)};e.extend(e.fxGridFormatter,{tooltip:o,url:u,date:f,checkbox:l,icon:c,iconLookup:h,dictionaryLookup:p,spriteLookup:d,bundle:v,defaultAll:m})}(jQuery,this,this.fx.resources),function(e,t,n,r){function i(){throw"Supply a non-null value for either the 'dataSource' or 'data' option."}function s(e){return e===null||e===undefined?"":e}var o=e.Widget.prototype,u=n.prototype,a=function(){var t=e.extend({},u.options,{data:null,dataSource:null,filterQueryDelay:null});return delete t.pager,t},f="cachedSortProperty"+Math.floor(Math.random()*1e4).toString(),l=function(e,t){var n=t.sorted==="descending"?-1:1,r=-n,i=f,o=function(e,t){var s=e[i],o=t[i],u;return s==o||s instanceof Date&&o instanceof Date&&!(s<o||s>o)?u=0:s>o?u=n:u=r,u},u=t.field;return o.preSort=function(n){var r,o,a,f;for(r=0,o=n.length;r<o;r++)a=n[r],f=s(e(a[u],{dataItem:a,column:t})),typeof f=="string"&&(f=f.toLowerCase()),a[i]=f},o.postSort=function(e){var t,n;for(t=0,n=e.length;t<n;t++)delete e[t][i]},o},c=e.extend(function(e,t,r){this._dataGrid=r,n.call(this,e,t)},{prototype:e.extend({},u,{_dataGrid:null,_normalizeColumns:function(e){return this._dataGrid._normalizeColumns(e),u._normalizeColumns.apply(this,arguments)},_onSort:function(e,t){var n=u._onSort.apply(this,arguments);return this._dataGrid._onSort(t),n},_onFilter:function(e){var t=u._onFilter.apply(this,arguments);return this._dataGrid._onFilter(e),t},_triggerRowExpand:function(e){this._dataGrid._triggerRowExpand(e)},_refreshSorting:function(e,t){var n=u._refreshSorting.apply(this,arguments);return this._dataGrid._refreshSortingAndFiltering(),n},_refreshFiltering:function(e,t){var n=u._refreshFiltering.apply(this,arguments);return this._dataGrid._refreshSortingAndFiltering(),n}})}),h={options:a(),_references:u._references,_grid:null,_createdDataSource:null,_currentFilterSpec:null,_currentSortSpec:null,_filterTimeoutId:null,_childItemsDataSources:null,_create:function(){this.options.columns||(this.options.columns=[]),this.options.rowMetadata||(this.options.rowMetadata=[]),this._childItemsDataSources=[];var t=e.extend({},u.options,this.options,{pager:this.options.noPager?null:r,getChildItems:this._isExpandable()?e.proxy(this._getChildItems,this):null});return delete t.dataSource,this._normalizeColumns(this.options.columns),!this.options.dataSource^!this.options.data||i(),this._establishNewDataSource(this.options.data,this.options.dataSource,t),this._grid=new c(t,this.element,this),o._create.call(this)},_destroy:function(){this._grid&&(this._grid.destroy(),this._grid=null,this._detachFromGridDataSource(),this._disposeCreatedDataSource()),this._super()},getDataSource:function(){return this._gridDataSource},_isExpandable:function(){return e.isFunction(this.options.getChildItems)},_detachFromGridDataSource:function(){e.isFunction(this.options.dataSourceRefreshStart)&&e(this._gridDataSource).off("refreshStart",this.options.dataSourceRefreshStart),this._itemsArrayChangeHandler&&e(this._gridDataSource).off("refreshSuccess",this._itemsArrayChangeHandler)},_getChildItems:function(t){var n=this._getCachedChildItemsDataSource(t),r=e.Deferred(),i,s=this;return n||(n=this.options.getChildItems(t),this._childItemsDataSources.push({parentItem:t,dataSource:n})),i=n.refreshPromise,i||(n.isReset||n.refreshError||n.partialRefreshErrors.length>0?i=n.refresh():r.resolve(n.items)),i&&i.then(function(){if(s._isDisposed())return;r.resolve(n.items)},function(){if(s._isDisposed())return;r.reject.apply(r,arguments)}),r.promise()},_getCachedChildItemsDataSource:function(t){return(e.grep(this._childItemsDataSources,function(e){return e.parentItem===t})[0]||{}).dataSource},_isDisposed:function(){return this._grid===null},_setOption:function(t,n){var s,u=this.options[t],a,f;(t==="data"||t==="dataSource")&&n!==this.options[t]&&!n&&i(),s=o._setOption.apply(this,arguments);switch(t){case"data":u!==this.options.data&&this._establishNewDataSource(this.options.data);break;case"dataSource":u!==this.options.dataSource&&(this._establishNewDataSource(null,this.options.dataSource),this.options.data&&(this.options.data=null));break;case"noPager":a=this._grid.option("pager"),f=this.options.noPager?null:r,a!==f&&(this._gridDataSource.reset(),this._setGridOption("pager",f),f||this._gridDataSource.refresh());break;case"pager":throw"Use the 'noPager' option to turn off the pager.";case"pagerOptions":this._configureGridPager();break;case"getChildItems":e.each(this._childItemsDataSources,function(){this.dataSource.dispose()}),this._childItemsDataSources.splice(0,this._childItemsDataSources.length),this._setGridOption("getChildItems",n?e.proxy(this._getChildItems,this):null);break;default:this._setGridOption(t,n)}return s},_normalizeColumns:function(t){e.each(t,function(e,t){if(t.sortable===undefined||t.sortable===null)t.sortable=!0;if(t.filterable===undefined||t.filterable===null)t.filterable=!0})},_establishNewDataSource:function(t,n,r){var i,s,o=this;this._detachFromGridDataSource(),i=this._disposeCreatedDataSource(!0),n&&n.isQueryable?s=n:s=this._createdDataSource=Shell.Data.LocalDataSource({input:t||n}),this._gridDataSource=s,e.isFunction(this.options.dataSourceRefreshStart)&&e(s).on("refreshStart",this.options.dataSourceRefreshStart),this._isExpandable()&&e([s.items]).on("arrayChange",this._itemsArrayChangeHandler=function(e,t){switch(t.change){case"insert":o._onItemsArrayChange(t.items);break;case"remove":o._onItemsArrayChange(null,t.items);break;case"refresh":o._onItemsArrayChange(this,t.oldItems)}}),this._initializeDataSource(!0),this._configureGridPager(r),this._setGridOption("data",s.items,r),i&&i.dispose()},_onItemsArrayChange:function(t,n){t=t||[],n=n||[];var r=e.grep(n,function(n){return e.inArray(n,t)<0}),i=this;e.each(r,function(t,n){e.each(i._childItemsDataSources,function(e,t){if(t.parentItem===n)return t.dataSource.dispose(),i._childItemsDataSources.splice(e,1),!1})})},_configureGridPager:function(t){var n=e.extend({},this.options.pagerOptions,{dataSource:this._gridDataSource});this._setGridOption("pagerOptions",n,t)},_setGridOption:function(e,t,n){n?n[e]=t:this._grid.option(e,t)},_initializeDataSource:function(t,n){var r=!this.options.noPager,i,s,o;t&&r&&this._gridDataSource.reset(),s=this._gridDataSource.isReset,i=e.grep(this.options.columns,function(e){return e.sortable&&e.sorted})[0],s=this._setSort(i)||s,this._grid&&(s=this._setFilter()||s),o=t&&r,!o&&(!n||s)&&this._gridDataSource.refresh()},_setSort:function(e){var t=e?{property:e.field,descending:e.sorted==="descending"}:null,n;if(!this._matchesCurrentSortSpec(t))return this._currentSortSpec=t,e&&(n=e.sortFormatter||e.formatter&&e.formatter.sortFormatter,n&&(t=l(n,e))),this._gridDataSource.setSort(t),!0},_setFilter:function(){var t=this._grid.getCurrentFilter(),n=e.grep(this.options.columns,function(e){return e.filterable}),r=!t||t===""||!n.length?null:{operator:"||",value:e.map(n,function(e){return{property:e.field,operator:"Contains",value:t}})},i;if(!this._matchesCurrentFilterSpec(r))return this._currentFilterSpec=r,i=e.grep(n,function(e){return e.filterFormatter||e.formatter&&e.formatter.filterFormatter}).length>0,i&&(r=function(r){return e.grep(n,function(e){var n=r[e.field]||"",i=e.filterFormatter||e.formatter&&e.formatter.filterFormatter,s=i?i(n,{dataItem:r,column:e}):n;return s.toString().toLowerCase().indexOf(t.toLowerCase())>=0}).length>0}),this._gridDataSource.setFilter(r),!0},_matchesCurrentSortSpec:function(e){return!e&&!this._currentSortSpec||e&&this._currentSortSpec&&e.property===this._currentSortSpec.property&&e.descending===this._currentSortSpec.descending},_matchesCurrentFilterSpec:function(t){var n=this;return!t&&!this._currentFilterSpec||t&&this._currentFilterSpec&&t.value.length===this._currentFilterSpec.value.length&&t.value[0].value===this._currentFilterSpec.value[0].value&&e.grep(e.map(t.value,function(e){return e.property}),function(t){return e.inArray(t,e.map(n._currentFilterSpec.value,function(e){return e.property}))<0}).length===0},_disposeCreatedDataSource:function(e){if(this._createdDataSource){var t=this._createdDataSource;this._createdDataSource=null;if(e)return t;t.dispose()}},_onSort:function(e){this._setSort(e)&&this._gridDataSource.refresh()},_onFilter:function(e){if(!this.options.filterQueryDelay)this._applyFilter();else{this._filterTimeoutId&&t.clearTimeout(this._filterTimeoutId);var n=this;this._filterTimeoutId=t.setTimeout(function(){n._isDisposed()||(n._filterTimeoutId=null,n._applyFilter())},this.options.filterQueryDelay)}},_applyFilter:function(){this._setFilter()&&this._gridDataSource.refresh()},_refreshSortingAndFiltering:function(){this._initializeDataSource(!1,!0)},_triggerRowExpand:function(e){this._trigger("rowExpand",null,{rowMetadata:e,childItems:this._getCachedChildItemsDataSource(e.dataItem)})},_getRowMetadata:function(e){return this._grid._getRowMetadata(e)}};e.each(u,function(t,n){t.charAt(0)!=="_"&&e.isFunction(n)&&!h.hasOwnProperty(t)&&!o.hasOwnProperty(t)&&(h[t]=function(){return n.apply(this._grid,arguments)})}),e.widgetReference("fx.fxDataGrid",h)}(jQuery,this,jQuery.fx.fxGrid,jQuery.fn.fxDataPager),function(e,t,n,r){var i=t.prototype,s="<ul role='{{attr:ariaCompositeRole}}' aria-labelledby='{{attr:ariaLabelledBy}}'>{{for values}}<li tabindex='-1' role='{{>#parent.parent.data.ariaElementRole}}' {{>#parent.parent.data.ariaAttribute}}='false'>{{:#parent.parent.data.valueHtml(text)}}</li>{{/for}}</ul>",o=e.templates(s);e.widget("fx.fxItemList",t,{options:{name:"",ariaLabelledBy:null,values:[],disabledValues:[]},_ariaAttribute:"aria-selected",_selectedClass:"fx-itemlist-selected",_ariaCompositeRole:"",_ariaElementRole:"itemlist",_create:function(){var t=this,n={ariaCompositeRole:this._ariaCompositeRole,ariaElementRole:this._ariaElementRole,ariaAttribute:this._ariaAttribute,valueHtml:function(e){return t._valueHtml(e)}};this._validateValues(this.options),this.element.addClass("fx-itemlist").html(o.render(e.extend({},this.options,n))),this._attachControl(),this._setOption("disabledValues",this.options.disabledValues),this._unselectedTabIndex(),this._attachClassNames(),this._attachEvents(),i._create.call(this)},_destroy:function(){this.element.off("keydown.fxItemList","li").off("focusout.fxItemList","li").off("focusin.fxItemList","li").off("click.fxItemList","li").empty().removeClass("fx-itemlist"),this._super()},_valueHtml:function(e){return n.htmlEncode(e)},_validateValues:function(t){var n=t.values;if(!e.isArray(n))throw"options.values is not an array";e.each(n,function(e,t){if(t.value===r||t.text===r)throw"Each values in options.values must have a value and a text property"})},_getSelectedIndex:function(e){var t,n=!1;for(t=0;t<this.options.values.length;t++)if(this._valueComparer(this.options.values[t],e)){n=!0;break}return n?t:-1},_attachClassNames:function(){this.element.find("li:first").addClass("first-child"),this.element.find("li:last").addClass("last-child")},_attachEvents:function(){var t=this;this.element.on("click.fxItemList","li",function(){var n=e(this),r,i;if(n.attr(t._ariaAttribute)==="true"||t.options.disabled||t._isItemDisabled(n))return;r=e(this).index(),i=t.options.values[r],t._clicked(i)}).on("focusin.fxItemList","li",function(){t.element.find("["+t._ariaAttribute+"=true]").length===0&&t.element.find("li").not(this).attr("tabindex",-1)}).on("focusout.fxItemList","li",function(){t._unselectedTabIndex()}).on("keydown.fxItemList","li",function(n){var r=e(this),i,s,o=r.parent().find("li");switch(n.which){case 32:r.click();break;case 37:case 38:for(i=r.index()-1;i>=0;i--){s=o.eq(i);if(!t._isItemDisabled(s))return s.focus().click(),!1}break;case 39:case 40:for(i=r.index()+1;i<=t.options.values.length;i++){s=o.eq(i);if(!t._isItemDisabled(s))return s.focus().click(),!1}}})},_clicked:function(e){this._trigger("click",null,{value:e}),this._set(e),this.element.find("[tabindex=0]").focus()},_set:function(e){var t=this.element.find("li").attr(this._ariaAttribute,!1).removeClass(this._selectedClass).attr("tabindex",-1),n,s;if(e!==r&&e!==null){n=this._getSelectedIndex(e);if(n===-1)throw"The value is not found";s=t.eq(n);if(this._isItemDisabled(s))throw"The value "+e+" is disabled";this._setSelectedLine(s)}else this._unselectedTabIndex();i._set.call(this,e)},_valueComparer:function(e,t){return e===t||e!==r&&e!==null&&t!==r&&t!==null&&e.text===t.text&&e.value===t.value},_attachControl:function(){},_setSelectedLine:function(e){e.attr(this._ariaAttribute,!0).addClass(this._selectedClass).attr("tabindex",0)},_unselectedTabIndex:function(){this.element.find("["+this._ariaAttribute+"=true]").length===0&&this.element.find("li:not([aria-disabled=true])").first().attr("tabindex",0).end().last().attr("tabindex",0)},_disableValues:function(t){var n=this,r=this.element.find("li"),i;r.removeAttr("disabled").removeAttr("aria-disabled"),t&&e.each(t,function(){i=n._getSelectedIndex(this);if(i===-1)throw"Value "+this+" not found";n._setItemDisabled(r.eq(i))})},_setItemDisabled:function(e){e.attr("disabled","disabled").attr("aria-disabled","true")},_isItemDisabled:function(e){return e.attr("aria-disabled")==="true"},_setOption:function(e,t){var n=i._setOption.apply(this,arguments);return e==="disabled"?t?this.element.find("li").attr("tabindex",-1):(this._unselectedTabIndex(),this.element.find("li["+this._ariaAttribute+"=true]").attr("tabindex",0)):e==="disabledValues"&&this._disableValues(t),n}})}(jQuery,jQuery.fx.editablecontrol,this.fx.utilities),function(e,t,n){var r=t.prototype,i=0,s="__fx-radio";e.widget("fx.fxRadio",t,{_ariaCompositeRole:"radiogroup",_ariaElementRole:"radio",_ariaAttribute:"aria-checked",_attachedControl:"<input type='radio' name='' value='' tabindex='-1' />",_create:function(){this.options.name||(this.options.name=s+i++),this.element.addClass("fx-radio"),r._create.call(this)},_destroy:function(){this.element.empty().removeClass("fx-radio"),this._super()},_setSelectedLine:function(e){r._setSelectedLine.call(this,e),e.find("input").prop("checked",!0),this._fixControl()},_fixControl:function(){var e;this.element[0].currentStyle&&this.element[0].currentStyle.hasLayout&&(e=this.element[0].style.display,this.element[0].style.display="none",this.element[0].style.display=e)},_setItemDisabled:function(e){e.find("input").attr("disabled","disabled"),r._setItemDisabled.call(this,e)},_disableValues:function(e){return this.element.find("input").removeAttr("disabled"),r._disableValues.apply(this,arguments)},_attachControl:function(){var t=this;this.element.find("li").each(function(n){e(t._attachedControl).attr("name",t.options.name).attr("value",t.options.values[n].value).prependTo(this)})}})}(jQuery,jQuery.fx.fxItemList),function(e,t,n){var r=t.prototype,i=0,s="__fx-tablist";e.widget("fx.fxTabList",t,{options:{panels:[],trackedit:!1},_ariaCompositeRole:"tablist",_ariaElementRole:"tab",_ariaAttribute:"aria-selected",_create:function(){this.options.value===n&&(this.options.value=this.options.values[0]);if(this.options.panels.length!==this.options.values.length)throw"You must provide the same amount of tab panels";this.element.addClass("fx-tablist"),r._create.call(this),this._setupAria()},_destroy:function(){this.element.empty().removeClass("fx-tablist"),e.each(this.options.panels,function(t,n){e(n).removeAttr("aria-labelledby aria-hidden role")}),this._super()},_set:function(t){var n=this._getSelectedIndex(t);n!==-1&&(e.each(this.options.panels,function(t,n){e(n).attr("aria-hidden",!0)}),e(this.options.panels[n]).attr("aria-hidden",!1)),r._set.call(this,t)},_setupAria:function(){var t=i;this.element.find("li").each(function(){e(this).attr("id",s+i++)}),e.each(this.options.panels,function(n,r){e(r).attr({"aria-labelledby":s+t++,role:"tabpanel"})})}})}(jQuery,jQuery.fx.fxItemList),function(e,t,n){var r=t.prototype;e.widget("fx.fxSelectBox",t,{options:{validateOnChange:!0},_changeHandler:null,_create:function(){var e=this;this.options.value===n&&(this.options.value=this.element.val()),this._changeHandler=function(){return e._change.apply(e,arguments)},this.element.addClass("fx-selectbox").on("change.fxSelectBox",this._changeHandler),r._create.call(this)},_destroy:function(){this._changeHandler&&(this.element.off("change.fxSelectBox",this._changeHandler),this._changeHandler=null),this.element.removeClass("fx-selectbox"),this._super()},_set:function(t){var i=!1;this.element.find("option").each(function(){if(e(this).val()===t)return i=!0,!1});if(!i&&t!==n&&t!==null)throw"The value is not found";this.element.val(t),r._set.call(this,t)},_change:function(e){this.resetValidation(),r._set.call(this,this.element[0].value),this.options.validateOnChange&&this.validate()},_setOption:function(e,t){var n=r._setOption.apply(this,arguments);return e==="disabled"&&this.element.prop("disabled",t),n}})}(jQuery,jQuery.fx.fxValidation),function(e,t,n){var r=t.prototype;e.widget("fx.fxFileBrowse",t,{options:{validateOnChange:!0},_changeHandler:null,_create:function(){var e=this;this.options.value===n&&(this.options.value=this.element.val()),this._changeHandler=function(){return e._change.apply(e,arguments)},this.element.addClass("fx-filebrowse").on("change.fxFileBrowse",this._changeHandler),r._create.call(this)},_destroy:function(){this._changeHandler&&(this.element.off("change.fxFileBrowse",this._changeHandler),this._changeHandler=null),this.element.removeClass("fx-filebrowse"),this._super()},_change:function(){this.resetValidation(),r._set.call(this,this.element[0].value),this.options.validateOnChange&&this.validate()},_setOption:function(e,t){var n=r._setOption.apply(this,arguments);return e==="disabled"&&this.element.prop("disabled",t),n}})}(jQuery,jQuery.fx.fxValidation),function(e,t,n,r){var i=t.prototype,s=0,o="__fx-checkbox",u="on",a="<input type='checkbox' name='' value='' tabindex='-1' /><span class='sprite'></span>";e.widget("fx.fxCheckBox",t,{options:{name:"",inputValue:"",inputId:null,class_:n.getClasses("fx.fxCheckBox")},_attributes:[{name:"role",value:"checkbox"},{name:"tabindex",value:"0"}],_input:null,_image:null,_clickHandler:null,_keyDownHandler:null,_keyUpHandler:null,_create:function(){this.options.value=!!this.options.value,this.element.empty().addClass("fx-checkbox").append(a),this._input=this.element.find("input").attr("name",this.options.name||o+s++).val(this.options.inputValue||u).hide(),this._image=this.element.find("span.sprite"),this.options.inputId&&this._input.attr("id",this.options.inputId),this._addAttributes(),this._attachEvents(),i._create.call(this),this._setImage()},_destroy:function(){this.element.empty().removeClass("fx-checkbox"),this._removeAttributes(),this._detachEvents(),this._input=null,this._image=null,this._super()},toggle:function(){this._set(!this.options.value)},_set:function(e){e=!!e,this._input.prop("checked",e),this.element.attr("aria-checked",e),i._set.call(this,e),this._setImage()},_addAttributes:function(){var t=this;e.each(this._attributes,function(){t.element.attr(this.name,this.value)})},_removeAttributes:function(){var t=this;e.each(this._attributes,function(){t.element.removeAttr(this.name)})},_attachEvents:function(){var t=this;this._clickHandler=function(e){t.toggle()},this._keyDownHandler=function(t){t.which===e.ui.keyCode.SPACE&&t.preventDefault()},this._keyUpHandler=function(n){n.which===e.ui.keyCode.SPACE&&t.toggle()},this.element.on("click",this._clickHandler).on("keyup",this._keyUpHandler).on("keydown",this._keyDownHandler)},_detachEvents:function(){this.element.off("click",this._clickHandler).off("keyup",this._keyUpHandler).off("keydown",this._keyDownHandler),this._clickHandler=null,this._keyHandler=null,this._keyDownHandler=null},_setImage:function(){var e="",t=this.options.value,n=this._editedFlag,r=!this.options.disabled;t?n?e=r?this.options.class_.editedChecked:this.options.class_.editedCheckedDisabled:e=r?this.options.class_.checked:this.options.class_.checkedDisabled:n?e=r?this.options.class_.editedUnchecked:this.options.class_.editedUncheckedDisabled:e=r?this.options.class_.unchecked:this.options.class_.uncheckedDisabled,this._image.attr("class",e+" sprite")},_setOption:function(e,t){var n=i._setOption.apply(this,arguments);return e==="disabled"&&(this.element.attr("aria-disabled",t),this._input.prop("disabled",t),this._detachEvents(),t||this._attachEvents(),this._setImage()),n}})}(jQuery,jQuery.fx.editablecontrol,this.fx.resources),function(e,t,n,r,i,s){var o=t.prototype,u="fx.fxBalloonIcon",a=0,f="__fx-balloonicon",l="<button class='fx-balloonicon-button' type='button' aria-label='{{attr:altText}}'><span class='sprite {{attr:class_.icon}}'></span></button>",c=e.templates(l),h=null,p=i.getStrings("fx.fxBalloonIcon");e.widget(u,t,{options:{trace:null,skipFocus:!1,class_:i.getClasses(u),altText:p.help,balloonOptions:{title:p.title,content:p.content,links:[]}},_showing:!1,_id:null,_clickHandler:null,_balloonCreated:!1,_create:function(){var t=this;this.element.addClass("fx-balloonicon").html(c.render(this.options)).find(".fx-balloonicon-button").one("click",function(){e("html").on("click",this._clickHandler=function(){return t._documentClick.apply(t,arguments)})}).click(function(){h!==t.element[0]?(t._balloonClickOn(),h=t.element[0]):(t._balloonClickOff(),h=null)}).on("mouseover",function(){e(this).find("span.sprite").removeClass(t.options.class_.icon).addClass(t.options.class_.iconHover),h||t._showBalloon()}).on("mouseleave blur",function(){e(this).find("span.sprite").removeClass(t.options.class_.iconHover).addClass(t.options.class_.icon),h||t._updateBalloon("leaveButton")}),this._setOption("skipFocus",this.options.skipFocus),this.element.attr("id",this.getElementId())},_updateBalloon:function(e,t,n,i){var s;i=i||[],s=r.UI.Balloon.getBoundaries(this.element.find(".fx-balloonicon-button")),this.element.trigger("balloon",{balloonType:"balloonIcon",eventType:e,id:this.getElementId(),title:t,content:n,links:i,box:s,delayHide:!0})},_destroy:function(){this._removeBalloon(),this.element.empty().removeClass("fx-balloonicon"),this._clickHandler!==null&&(e("html").off("click",this._clickHandler),this._clickHandler=null),this._super()},getElementId:function(){return this.element[0].id||this._id||(this._id=f+a++)},_balloonClickOff:function(){this._updateBalloon("clickOff"),this._showing=!1},_balloonClickOn:function(){this._updateBalloon("clickOn",this.options.balloonOptions.title,this.options.balloonOptions.content,this.options.balloonOptions.links),this._balloonCreated=!0,this._showing=!0,this.options.trace&&this.options.trace()},_showBalloon:function(){this._updateBalloon("show",this.options.balloonOptions.title,this.options.balloonOptions.content,this.options.balloonOptions.links),this._balloonCreated=!0,this._showing=!0,this.options.trace&&this.options.trace()},_hideBalloon:function(){this._updateBalloon("hide"),this._showing=!1},_toggleBalloon:function(){this._showing?this._hideBalloon():this._showBalloon()},_documentClick:function(t){e(t.target).closest(".fx-balloonicon")[0]!==this.element[0]&&h===this.element[0]&&(this._updateBalloon("setUnlocked"),h=null)},_removeBalloon:function(){this._balloonCreated&&(this._hideBalloon(),this._updateBalloon("destroy"),this._balloonCreated=!1)},_setOption:function(e,t){var n=o._setOption.apply(this,arguments);return e==="skipFocus"&&(t?this.element.find("button").attr("tabindex",-1):this.element.find("button").removeAttr("tabindex")),n}})}(jQuery,jQuery.Widget,this,Shell,this.fx.resources),function(e,t){var n="<ul class='fx-legend-list'>{{for items}}<li class='fx-legend-item{{attr:#index+1}} {{attr:cssClass}}'><span class='fx-legend-label' title='{{attr:text}}'><span class='fx-legend-indicator'></span>{{>text}}</span></li>{{/for}}</ul>",r=e.templates(n);e.widget("fx.fxLegend",{options:{items:[]},_create:function(){this._render()},_destroy:function(){this.element.empty().removeClass("fx-legend"),this._super()},_render:function(){var t=this,n=e.map(this.options.items,function(e){return t._getObject(e)});this.element.html(r.render({items:n})).addClass("fx-legend").find("li:last").addClass("last-child")},_getObject:function(e){var t=e;return typeof t!="object"&&(t={cssClass:"",text:t}),t},_setOption:function(t,n){var r=e.Widget.prototype._setOption.call(this,t,n);return t==="items"&&this._render(),r}})}(jQuery),function(e,t,n,r){var i=t.prototype,s="<div class='fx-slider-slider'></div><div class='fx-slider-input'><input type='text' data-val='true' /></div>",o="<div class='fx-slider-legend'></div>";e.widget("fx.fxSlider",t,{options:{min:0,max:10,slidableMin:null,slidableMax:null,step:1,legendOptions:null,inputId:null},_slider:null,_input:null,_changing:!1,_create:function(){this.options.value||(this.options.value=this._getValidValue(this.options.min));var t=this;this.element.addClass("fx-slider").append(e(s)),this.options.legendOptions&&n&&n.call(e(o).appendTo(this.element),this.options.legendOptions),this._input=this.element.find("input").fxTextBox({withBalloon:!1,withErrorPlacement:!1}).on("blur",function(){t._setToTextBoxValue(e(this),!0)}).on("keypress",function(n){n.which===13&&t._setToTextBoxValue(e(this))}),this._input.data("fx-fxTextBox")._setChildControl(!0),this.options.inputId&&this._input.attr("id",this.options.inputId),this._slider=this.element.find(".fx-slider-slider").slider(e.extend({},this.options,{slide:e.proxy(t._sliderMoved,t),change:e.proxy(t._sliderChanged,t),range:"min"})),this._setOption("step",this.options.step),this._setInputValue(this._input,this.options.value),i._create.call(this)},_destroy:function(){this.element.empty().removeClass("fx-slider"),this._super()},_setInputValue:function(e,t){e.val(t)},_getInputValue:function(e){return e.val()},_setToTextBoxValue:function(e,t){if(e.fxTextBox("validate")==="valid"){var n=this._getInputValue(e);this._set(n)}else t&&(this._setInputValue(e,this._slider.slider("option","value")),e.fxTextBox("validate"))},_set:function(e){e=this._getValidValue(e),this._slider.slider("option","value")!==e&&(this._changing=!0,this._slider.slider("value",e),this._changing=!1),this._input.fxTextBox("resetValidation"),this._setInputValue(this._input,e),i._set.call(this,e)},_getValidValue:function(e){var t=this.options.slidableMin===null?this.options.min:Math.max(this.options.min,this.options.slidableMin),n=this.options.slidableMax===null?this.options.max:Math.min(this.options.max,this.options.slidableMax);return Math.max(t,Math.min(n,e))},_sliderMoved:function(e,t){if(this.options.slidableMin!==null&&t.value<this.options.slidableMin||this.options.slidableMax!==null&&t.value>this.options.slidableMax)return!1;this._setInputValue(this._input,t.value)},_sliderChanged:function(e,t){this._changing||this._set(t.value)},_setOption:function(e,t){var n=i._setOption.apply(this,arguments);switch(e){case"disabled":this._input.prop("disabled",t),t?this._slider.slider("disable"):this._slider.slider("enable");break;case"step":this._input.removeAttr("data-val-regex").removeAttr("data-val-regex-pattern").removeAttr("data-val-number"),/^\d+$/.test(t)?this._input.attr({"data-val-regex":"","data-val-regex-pattern":"^-?\\d+$"}):this._input.attr("data-val-number",""),this._input.fxTextBox("resetValidation")}return n}})}(jQuery,jQuery.fx.editablecontrol,jQuery.fn.fxLegend),function(e,t,n,r){var i=t.prototype;e.widget("fx.fxSliderQuota",t,{options:{multiplier:1,group:null,groupValueNotDisplayed:0},_eventName:"sliderchange.fxSliderQuota",_dataName:"fx.fxSliderQuota",_totalBar:null,_globalSliderChangedProxy:null,_originalStep:null,_create:function(){if(this.options.group===null&&this.options.group!=="_length")throw"You must provide a group name if you are using a group slider.";this.options.multiplier<=0&&(this.options.multiplier=1),this.options.value||(this.options.value=this.options.min),this._addToDocument(),this.options.value=this._getValidValue(this.options.value),i._create.call(this),this._setOption("step",this.options.step),this.element.addClass("fx-sliderquota"),this._totalBar=e("<div class='fx-slider-groupbar'></div>").insertAfter(this.element.find(".ui-slider-handle"));var t=this;this._globalSliderChangedProxy=function(){t._globalSliderChanged.apply(t,arguments)},e(n.document).on(this._eventName,this._globalSliderChangedProxy),this._globalTriggerSliderChange(this.options.value)},_destroy:function(){this._totalBar.remove(),this._removeFromDocument(),this.element.removeClass("fx-sliderquota"),e(n.document).off(this._eventName,this._globalSliderChangedProxy),this._super()},_addToDocument:function(){var t=e.data(n.document,this._dataName)||{_length:0};t[this.options.group]||(t[this.options.group]=[],t._length++),t[this.options.group].push(this),e.data(n.document,this._dataName,t)},_removeFromDocument:function(){var t=e.data(n.document,this._dataName),r;for(r=0;r<t[this.options.group].length;r++){t[this.options.group].splice(r,1);break}t[this.options.group].length===0&&(delete t[this.options.group],t._length--),t._length===0&&e.removeData(n.document,this._dataName)},_updateTotalBar:function(e,t){if(this._totalBar){var n=e-this.options.min+t,r=this.options.max-this.options.min,i=Math.min(r!==0?n/r*100:0,100);this._totalBar.css({width:i+"%"}),this.options.slidableMax=this.options.max-(e-this.options.value)}},_globalSliderChanged:function(t,r){if(r.groupName===this.options.group){var i=e.data(n.document,this._dataName)[r.groupName],s=r.groupValue,o;for(o=0;o<i.length;o++)s+=i[o].options.value;this._updateTotalBar(s,r.tempAdditionalValue)}},_globalTriggerSliderChange:function(e){this.element.trigger(this._eventName,{groupName:this.options.group,groupValue:this.options.groupValueNotDisplayed,tempAdditionalValue:e-this.options.value})},_set:function(e){e=this._getValidValue(e),i._set.call(this,e),this._globalTriggerSliderChange(this.options.value)},_getValidValue:function(t){var r=e.data(n.document,this._dataName)[this.options.group],s=this.options.groupValueNotDisplayed,o,u;t=i._getValidValue.call(this,t);for(o=0;o<r.length;o++)r[o]!==this&&(s+=r[o].options.value);return t=Math.max(Math.min(this.options.max-s,t),0),t=this._getNearestLowerDivisible(t,this.options.multiplier),u=this.options.slidableMin===null?this.options.min:Math.max(this.options.min,this.options.slidableMin),t<u&&(t=this._getNearestUpperDivisible(u,this.options.multiplier)),t},_getNearestLowerDivisible:function(e,t){return Math.floor(e/t)*t},_getNearestUpperDivisible:function(e,t){return Math.ceil(e/t)*t},_setInputValue:function(e,t){i._setInputValue.call(this,e,t/this.options.multiplier)},_getInputValue:function(e){return i._getInputValue.call(this,e)*this.options.multiplier},_sliderMoved:function(e,t){if(i._sliderMoved.call(this,e,t)===!1)return!1;this._globalTriggerSliderChange(t.value)},_setOption:function(e,t){var n;switch(e){case"multiplier":if(t>this.options.slidableMax)throw"The multiplier cannot be greater than the slidableMax";return n=i._setOption.call(this,e,t),this._setOption("step",this.options.step),this._set(this.options.value),n;case"step":return n=i._setOption.call(this,e,t*this.options.multiplier),this._slider&&this._slider.slider("option","step",this.options.step),n}return i._setOption.apply(this,arguments)}})}(jQuery,jQuery.fx.fxSlider,this),function(e,t,n,r,i,s){var o=t.prototype,u="fx.fxUsageBars",a=i.getStrings(u),f=a.xofyunits.format("<span class='fx-usagebars-label-percent'></span>","{{>totalQuotaToDisplay}} <span class='fx-usagebars-label-unit'>{{>unitLabelLong}}</span>"),l="<div class='fx-usagebars-legend'></div><ul>{{for quotas}}<li class='fx-usagebars-quota'><div class='fx-usagebars-callout'><div class='fx-usagebars-callout-body'></div><div class='fx-usagebars-callout-pointer'></div></div><div class='fx-usagebars-calloutbar-container'><div class='fx-usagebars-calloutbar fx-usagebars-calloutbar-max'></div><div class='fx-usagebars-calloutbar fx-usagebars-calloutbar-other'></div><div class='fx-usagebars-calloutbar fx-usagebars-calloutbar-this'></div></div><div class='fx-usagebars-label-container'><div class='fx-usagebars-label-name'>{{>name}}</div><div class='fx-usagebars-label-description'>"+f+"</div>"+"</div>"+"</li>"+"{{/for}}"+"</ul>",c=e.templates(l),h=.55;e.widget(u,t,{options:{thisEntityName:null,otherEntityName:null,totalEntityName:null,atCapacityName:null,overCapacityName:null,text:i.getStrings(u),quotas:[]},_defaultRoundingDecimals:2,_resizeHandler:null,_init:function(){var t=this;this._normalizeInput(),this.element.addClass("fx-usagebars"),this.element.html(c.render(this.options)),this._setBarAndText(),this._setCalloutPosition(),e(r).on("resize",this._resizeHandler=function(){return t._setCalloutPosition.apply(t,arguments)}),o._create.call(this)},_destroy:function(){this._resizeHandler!==null&&(e(r).off("resize",this._resizeHandler),this._resizeHandler=null),this.element.empty().removeClass("fx-usagebars fx-usagebars-legend-withother"),this._super()},_setBarAndText:function(){var t=this,n=!1,r=!1;e.each(this.element.find(".fx-usagebars-quota"),function(i){var s=e(this),o=s.find(".fx-usagebars-calloutbar-this"),u=s.find(".fx-usagebars-calloutbar-other"),a=s.find(".fx-usagebars-label-percent"),f=s.find(".fx-usagebars-callout"),l=f.find(".fx-usagebars-callout-body"),c=t.options.quotas[i],h=typeof c.usedByThis=="number"?c.usedByThis:0,p=c.totalQuota===0?0:100*h/c.totalQuota,d=c.totalQuota===0?0:100*c.usedByAll/c.totalQuota,v=c.usedByThis===Math.round(h)?0:c.roundingDecimals||t._defaultRoundingDecimals;o.css("width",Math.round(Math.min(100,p))+"%"),u.css("width",Math.round(Math.min(100,d))+"%"),t.options.atCapacityName!==null&&p===100?(o.addClass("fx-usagebars-atcapacity"),f.addClass("fx-usagebars-atcapacity"),n=!0):t.options.overCapacityName!==null&&p>100&&(o.addClass("fx-usagebars-overcapacity"),f.addClass("fx-usagebars-overcapacity"),r=!0),t.options.atCapacityName!==null&&d===100?(u.addClass("fx-usagebars-atcapacity"),n=!0):t.options.overCapacityName!==null&&d>100&&(u.addClass("fx-usagebars-overcapacity"),r=!0),a.html(Math.round(d)+"%"),typeof c.usedByThis=="number"?l.html(parseFloat(c.usedByThis.toFixed(v))+" "+c.unitLabel):l.html(c.usedByThis)}),this._createLegend(n,r)},_normalizeInput:function(){var e,t=this.options.quotas.length,n;for(e=0;e<t;e++){n=this.options.quotas[e];if(n.usedByAll===s||n.usedByAll===null)n.usedByAll=n.usedByThis;n.totalQuota!==Math.round(n.totalQuota)?n.totalQuotaToDisplay=n.totalQuota.toFixed(n.roundingDecimals||this._defaultRoundingDecimals):n.totalQuotaToDisplay=n.totalQuota,n.totalQuotaToDisplay=parseFloat(n.totalQuotaToDisplay)}},_createLegend:function(e,t){var r=[];this.element.removeClass("fx-usagebars-legend-other"),n&&(r.push({cssClass:"fx-usagebars-legend-this",text:this.options.thisEntityName}),this.options.otherEntityName!==null&&(this.element.addClass("fx-usagebars-legend-withother"),r.push({cssClass:"fx-usagebars-legend-other",text:this.options.otherEntityName})),r.push({cssClass:"fx-usagebars-legend-total",text:this.options.totalEntityName}),this.options.atCapacityName!==null&&e&&r.push({cssClass:"fx-usagebars-legend-atcapacity",text:this.options.atCapacityName}),this.options.overCapacityName!==null&&t&&r.push({cssClass:"fx-usagebars-legend-overcapacity",text:this.options.overCapacityName}),n.call(this.element.find(".fx-usagebars-legend"),{items:r}))},_setCalloutPosition:function(){var t=this.element.width();e.each(this.element.find(".fx-usagebars-quota"),function(){var n=e(this),r=n.find(".fx-usagebars-calloutbar-this"),i=n.find(".fx-usagebars-callout"),s=r.width();s=Math.min(t-1,s),s/t>h&&(i.addClass("fx-usagebars-callout-reversed"),s-=i.width()),i.css("left",s)})}})}(jQuery,jQuery.Widget,jQuery.fn.fxLegend,this,this.fx.resources),function(e,t,n,r,i){var s=t.prototype,o="<a href='javascript:;' class='fx-dropdown' aria-haspopup='true' role='button' aria-labelledby='{{attr:ariaLabeledBy}}'><div class='fx-dropdown-current'></div><span class='fx-dropdown-arrow sprite' title='{{attr:altTextArrow}}'></span><div class='fx-dropdown-anchor' aria-hidden='true'><ul class='fx-dropdown-list' role='listbox'></ul></div></a>",u=e.templates(o);e.widget("fx.fxDropdown",t,{options:{validateOnChange:!0,class_:r.getClasses("fx.fxDropdown"),altTextArrow:"Expand/Collapse",maxFlyoutHeight:300,ariaLabeledBy:null},_widget:null,_current:null,_arrow:null,_anchor:null,_flyOut:null,_activateHandler:null,_deactivateHandler:null,_overHandler:null,_outHandler:null,_create:function(){this.element.data=this.options.data,this._widget=e(u.render(this.options)).on("mouseenter mouseup focus",this._overHandler=e.proxy(this._mouseOver,this)).on("mouseleave mousedown blur",this._outHandler=e.proxy(this._mouseOut,this)).on("keydown",e.proxy(this._keyDown,this)).on("click",function(e){e.preventDefault()}).insertAfter(this.element).append(this.element),this._current=this._widget.find(".fx-dropdown-current"),this._arrow=this._widget.find(".fx-dropdown-arrow").addClass(this.options.class_.arrow),this._anchor=this._widget.find(".fx-dropdown-anchor"),this._flyOut=this._widget.find("ul").on("click.fxdropdown","li",e.proxy(this._select,this)),this.element.addClass("fx-shadow"),s._create.call(this),this._deactivate()},_init:function(){function n(t,n){var r=e("<li />",{"aria-selected":"false"});t.disabled&&r.attr("aria-disabled",!0),r.html(t.text).appendTo(n)}var t=this;this.options.value===i&&(this.options.value=this.element.val()),this._current.html(this.element.find("option:selected").html()),this._flyOut.empty(),this.element.children("option, optgroup").each(function(r,i){var s;i.tagName==="OPTION"?n(i,t._flyOut):i.tagName==="OPTGROUP"&&(e("<li />").addClass("fx-dropdown-title").html(i.label).appendTo(t._flyOut),s=e("<ul />").appendTo(t._flyOut),e(i).children("option").each(function(e,t){n(t,s)}))}),this._updateSelectionIndicator()},_destroy:function(){this.element.removeClass("fx-shadow").insertAfter(this._widget),this._deactivateHandler!==null&&(e(n.document).off("click.fxdropdown",this._deactivateHandler),this._deactivateHandler=null),this._super(),this._widget.remove(),this._widget=null,this._current=null,this._arrow=null,this._anchor=null,this._flyOut=null},widget:function(){return this._widget||this.element},enable:function(){return this._widget.attr("href","javascript:;").one("click.fxdropdown",this._activateHandler=e.proxy(this._activate,this)).on("mouseenter mouseup focus",this._overHandler=e.proxy(this._mouseOver,this)).on("mouseleave mousedown blur",this._outHandler=e.proxy(this._mouseOut,this)),this.element.removeAttr("disabled"),s.enable.call(this)},disable:function(){return this._widget.removeAttr("href").off("click.fxdropdown"),this._overHandler!==null&&(this._widget.off("mouseenter mouseup focus",this._overHandler),this._overHandler=null),this._outHandler!==null&&(this._widget.off("mouseleave mousedown blur",this._outHandler),this._outHandler=null),this.element.attr("disabled","disabled"),s.disable.call(this)},_mouseOver:function(){this._arrow.removeClass(this.options.class_.arrow).addClass(this.options.class_.arrowHover)},_mouseOut:function(){this._arrow._arrow.removeClass(this.options.class_.arrowHover).addClass(this.options.class_.arrow)},_keyDown:function(e){if(e.altKey)switch(e.keyCode){case 38:this._deactivate(),e.preventDefault();return;case 40:this._activate(e),e.preventDefault();return}var t=this.element.find("option:selected")[0];switch(e.keyCode){case 38:this._selectAtIndex(this._getIndexOfOption(t)-1),e.preventDefault();break;case 40:this._selectAtIndex(this._getIndexOfOption(t)+1),e.preventDefault()}},_activate:function(t){if(this._widget.hasClass("fx-dropdown-active"))return;t.preventDefault();var r=e(n),i=25,s=this._widget.offset().top-r.scrollTop(),o=r.height()-(s+this._widget.outerHeight()),u,a=null,f=this;s-=i,o-=i,this._anchor.addClass("fx-dropdown-active"),u=Math.min(this._flyOut.outerHeight(),this.options.maxFlyoutHeight),this._anchor.removeClass("fx-dropdown-active"),o>=u?a="fx-dropdown-flybelow":s>=u?a="fx-dropdown-flyabove":s>o?(a="fx-dropdown-flyabove",u=s):(a="fx-dropdown-flybelow",u=o),this._anchor.addClass("fx-dropdown-active "+a).attr("aria-hidden","false"),this._flyOut.css("max-height",u),n.setTimeout(function(){var t=f;e(n.document).one("click.fxdropdown",f._deactivateHandler=function(){t._deactivate()})},0)},_deactivate:function(){this._deactivateHandler=null,this._anchor.removeClass("fx-dropdown-active fx-dropdown-flybelow fx-dropdown-flyabove").attr("aria-hidden","true"),this._flyOut.css("max-height",""),this._activateHandler!==null&&(this._widget.off("click.fxdropdown",this._activateHandler),this._activateHandler=null),this._widget.one("click.fxdropdown",this._activateHandler=e.proxy(this._activate,this))},_select:function(t){t.preventDefault();if(e(t.target).attr("aria-disabled")==="true"||e(t.target).hasClass("fx-dropdown-title")){t.stopPropagation();return}this._selectAtIndex(this._getIndexOfListItem(t.target))},_selectAtIndex:function(e){var t=this.element.find("option"),n;if(e<0||e>=t.length)return;n=t.prop("selected",!1).attr("aria-selected","false").eq(e).prop("selected",!0).attr("aria-selected","true"),this._current.html(n.html()),this.element.trigger("change"),s._set.call(this,n.val()),this.options.validateOnChange&&this.validate(),this._updateSelectionIndicator()},_escapeAttributeValue:function(e){return e.replace(/([!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~])/g,"\\$1")},_set:function(e){if(typeof e=="undefined"||e===null)return;var t=this._escapeAttributeValue(e),n=this.element.find("option[value='"+t+"']");if(!n.length)throw"The value is not found";this._selectAtIndex(this._getIndexOfOption(n[0]))},_getIndexOfListItem:function(e){var t=this._flyOut.find("li:not(.fx-dropdown-title)"),n;for(n=0;n<t.length;n++)if(t[n]===e)return n;return-1},_getIndexOfOption:function(e){var t=this.element.find("option"),n;for(n=0;n<t.length;n++)if(t[n]===e)return n;return-1},_updateSelectionIndicator:function(){var e=this.element[0].selectedIndex;e!==-1&&this._flyOut.find("li:not(.fx-dropdown-title)").removeClass("fx-dropdown-selected").eq(e).addClass("fx-dropdown-selected")}})}(jQuery,jQuery.fx.fxValidation,this,this.fx.resources),function(e,t,n,r,i){var s=t.prototype,o="fx.fxUpload",u="<div class='fx-upload' tabindex='0'><span class='fx-upload-button sprite {{attr:class_.icon}}'></span><div class='fx-upload-label'></div></div>",a=e.templates(u);e.widget(o,t,{options:{validateOnChange:!0,class_:r.getClasses(o),acceptedMimeTypes:[],text:r.getStrings(o)},_widget:null,_widgetLabel:null,_mouseEnterHandler:null,_mouseLeaveHandler:null,_changeHandler:null,_clickHandler:null,_oldTabIndex:null,_create:function(){var t=this;this._widget=e(a.render(this.options)),this._widgetLabel=this._widget.find(".fx-upload-label"),this._widget.on("mousemove",e.proxy(this._mouseMove,this)).on("focusin",e.proxy(this._focus,this)).on("focusout",e.proxy(this._focusEnd,this)).on("keypress",function(e){e.which===13&&t.element.trigger("click")}).insertAfter(this.element),this._oldTabIndex=this.element.attr("tabindex"),this.element.attr("tabindex","-1"),this.element.addClass("fx-upload-native").on("mouseenter",this._mouseEnterHandler=e.proxy(this._mouseEnter,this)).on("mouseleave",this._mouseLeaveHandler=e.proxy(this._mouseLeave,this)).on("change",this._changeHandler=e.proxy(this._change,this)).on("click",this._clickHandler=e.proxy(this._click,this)).appendTo(this._widget).attr("accept",this.options.acceptedMimeTypes.toString()),this._change(),s._create.call(this)},_destroy:function(){this.element.removeClass("fx-upload-native fx-upload-hover fx-upload-tabactive").off("mouseenter",this._mouseEnterHandler).off("mouseleave",this._mouseLeaveHandler).off("change",this._changeHandler).off("click",this._clickHandler).css({left:"",top:""}).insertAfter(this._widget),this._widget.remove(),this._oldTabIndex!==i&&this.element.attr("tabindex",this._oldTabIndex),this._super()},widget:function(){return this._widget||this.element},_focus:function(){this._widget.addClass("fx-upload-tabactive")},_focusEnd:function(){this._widget.removeClass("fx-upload-tabactive")},_mouseEnter:function(){this._widget.addClass("fx-upload-hover")},_mouseLeave:function(){this._widget.removeClass("fx-upload-hover")},_mouseMove:function(e){var t=this._widget.offset();this.element.css({left:e.pageX-t.left-(this.element.outerWidth()-20),top:e.pageY-t.top-8})},_click:function(){var e=this;this.element.data("fx-upload-value",this.element.val()),n.setTimeout(function(){e.element.val()&&e.element.val()!==e.element.data("fx-upload-value")&&e.element.trigger("change")},100)},_change:function(){var e=this.element.val();e===""?this._widgetLabel.text(this.options.text.label).removeClass("fx-upload-chosen"):(e=e.split(/\\/).pop(),this._widgetLabel.text(e).addClass("fx-upload-chosen")),s._set.call(this,e),this.options.validateOnChange&&!this._creating&&this.validate()}})}(jQuery,jQuery.fx.fxValidation,this,this.fx.resources),function(e,t,n){var r=0,i="__fx-tree",s=t.prototype;e.widget("fx.fxTree",t,{options:{},_currentNode:null,_selectedNode:null,_clickHandler:null,_focusInHandler:null,_focusOutHandler:null,_keyDownHandler:null,_create:function(){var e=this,t=this._getContainer(this.element);this.element.addClass("fx-tree").attr("role","tree"),this._addHandlers(),t||(t=this.element.append("<ul />")),t.children("li").each(function(){e._createNode(this)}),s._create.call(this)},_destroy:function(){this.element.removeClass("fx-tree").removeAttr("role").empty(),this._removeHandlers(),this._super()},addNode:function(t,n){var r=this._getNode(n),i,s;return r||e.error("unable to find tree node with path '"+n+"'"),i=this._createNode(t),this._addNodeToParent(r,i),s=n?n+"\\":"",s+=this._getNodeId(i),s},removeNode:function(t){t||e.error("path is required");var n=t.split("\\"),r=n.slice(-1)[0],i=this._getNode(n.slice(0,-1).join("\\")),s,o;i||e.error("node to remove does not exist"),s=this._getContainer(i),s||e.error("node to remove does not exist"),o=s.children("li[data-tree-id="+r+"]"),o.length===0&&e.error("node to remove does not exist"),o.remove(),s.children("li").length===0&&this._convertParentNodeToLeafNode(i)},getSelectedNode:function(){return this._selectedNode?this._getNodePath(this._selectedNode):null},selectNode:function(t){t||e.error("path is required");var n=this._getNode(t);n||e.error("node to select does not exist"),this._selectNode(n)},deselectNode:function(t){t||e.error("path is required");var n=this._getNode(t);n||e.error("node to deselect does not exist"),this._deselectNode(n)},expandNode:function(t){t||e.error("path is required");var n=this._getNode(t);n||e.error("node to expand does not exist"),this._isExpanded(n)||this._toggleNode(n)},collapseNode:function(t){t||e.error("path is required");var n=this._getNode(t);n||e.error("node to collapse does not exist"),this._isExpanded(n)&&this._toggleNode(n)},_addHandlers:function(){var e=this;this._clickHandler=function(){return e._click.apply(e,arguments)},this._focusInHandler=function(){return e._focusIn.apply(e,arguments)},this._focusOutHandler=function(){return e._focusOut.apply(e,arguments)},this._keyDownHandler=function(){return e._keyDown.apply(e,arguments)},this.element.on("click",this._clickHandler).on("focusin",this._focusInHandler).on("focusout",this._focusOutHandler).on("keydown",this._keyDownHandler)},_removeHandlers:function(){this.element.off("click",this._clickHandler).off("focusin",this._focusInHandler).off("focusout",this._focusOutHandler).off("keydown",this._keyDownHandler)},_getNode:function(t){if(t==="")return this.element;var r=t.split("\\"),i=this.element,s,o,u,a=function(){o=e(this).data("tree-id");if(o!==n){o+="";if(o===r[u])return!0}return!1};for(u=0;u<r.length&&i&&i.length>0;u++)s=this._getContainer(i),i=null,s&&(i=s.find("li").filter(a));return u!==r.length||i.length===0?null:i},_getNodeListItem:function(t){if(!t)return null;var n=e(t).closest("li");return n.length?n:null},_getNextNode:function(e){var t=this._getNodeListItem(e),n=[];return t?(t.attr("aria-expanded")==="true"?n=t.find("li").eq(0):n=t.next("li"),n.length===0?this._getNextVisibleDescendant(t):n):null},_getNextVisibleDescendant:function(e){var t,n;return!e||e.length===0?null:(t=this._getParentNode(e),t?(n=t.next("li"),n.length>0?n:this._getNextVisibleDescendant(t)):null)},_getPreviousNode:function(e){var t=this._getNodeListItem(e),n=[];return t?(n=t.prev("li"),n.length===0?this._getParentNode(t):this._getLastVisibleDescendant(n)):null},_getLastVisibleDescendant:function(e){return!e||e.length===0?null:this._isExpanded(e)?this._getLastVisibleDescendant(this._getContainer(e).children("li").last()):e},_click:function(t){var n=this._getNodeListItem(t.target),r=e(t.target);return n||e.error("Could not find node to select"),r.closest(".fx-tree-expandable").length>0&&this._toggleNode(n),r.closest(".fx-tree-selectable").length>0&&this._selectNode(n),!0},_focusIn:function(t){var n=this._getNodeListItem(t.target);return n||e.error("Could not find node to select"),this._addFocus(n),!0},_focusOut:function(t){var n=this._getNodeListItem(t.target);return n||e.error("Could not find node to select"),this._removeFocus(n),!0},_keyDown:function(t){var n=this._getNodeListItem(t.target),r=!0;n||e.error("Could not find node for keydown event");switch(t.which){case e.ui.keyCode.SPACE:case e.ui.keyCode.ENTER:this._selectNode(n),r=!1;break;case e.ui.keyCode.UP:this._setFocus(this._getPreviousNode(n)),r=!1;break;case e.ui.keyCode.DOWN:this._setFocus(this._getNextNode(n)),r=!1;break;case e.ui.keyCode.LEFT:this._leftKeyDown(n),r=!1;break;case e.ui.keyCode.RIGHT:this._rightKeyDown(n),r=!1}return r},_leftKeyDown:function(e){this._currentNode&&this._isExpanded(e)?this._toggleNode(e):this._setFocus(this._getParentNode(e))},_rightKeyDown:function(e){this._currentNode&&!this._isLeaf(e)&&!this._isExpanded(e)?this._toggleNode(e):this._setFocus(this._getFirstChildNode(e))},_getContainer:function(e){var t;return e||(e=this.element),t=e.children("ul").eq(0),t.length===0?null:t},_addNodeToParent:function(e,t){var n=this._getContainer(e);n===null&&(this._convertLeafNodeToParentNode(e),n=this._getContainer(e)),n.append(t)},_convertLeafNodeToParentNode:function(e){e.append("<ul />").removeClass("fx-tree-leaf").attr("aria-expanded",!1).find(".fx-tree-expandable").addClass("fx-tree-expand-active")},_convertParentNodeToLeafNode:function(e){e.removeClass("fx-tree-expanded").removeAttr("aria-expanded").addClass("fx-tree-leaf").find("ul").remove().end().find(".fx-tree-exandable").removeClass("fx-tree-expand-active")},_createNode:function(t){var r=this,i;return t=e(t),i=this._getContainer(t),t.addClass("fx-tree-node"),this._disableNodeTabIndices(t),this._currentNode||(t.attr("tabindex",0),this._currentNode=t),this._getNodeId(t)===n&&t.data("tree-id",this._generateNodeId()),i!==null?(t.attr("aria-expanded",!1),i.children("li").each(function(){r._createNode(this)})):t.addClass("fx-tree-leaf"),t},_generateNodeId:function(){return i+r++},_getNodeId:function(e){return e.data("tree-id")},_getParentNode:function(e){var t=e.parent().closest("li.fx-tree-node");return t.length===0?null:t},_getFirstChildNode:function(e){var t=e.find("li").eq(0);return t.length===0?null:t},_getNodePath:function(e){var t=this._getParentNode(e);return t?this._getNodePath(t)+"\\"+this._getNodeId(e):this._getNodeId(e)},_toggleNode:function(e){if(e.hasClass("fx-tree-leaf"))return;var t=!this._isExpanded(e);e.attr("aria-expanded",t),e.toggleClass("fx-tree-expanded"),this._setNodeExpandedState(e,t)},_isLeaf:function(e){return e.hasClass("fx-tree-leaf")?!0:!1},_isExpanded:function(e){var t=e.attr("aria-expanded");return t==="true"},_setNodeExpandedState:function(e,t){},_deselectNode:function(t){if(t.attr("aria-selected")!=="true")return;this._selectedNode[0]!==t[0]&&e.error("trying to deselect a node that is not the currently selected node"),this._selectedNode=null,t.attr("aria-selected",!1)},_selectNode:function(e){this.element.find("li").attr("aria-selected",!1),this._selectedNode=e,e.attr("aria-selected",!0)},_disableNodeTabIndices:function(t){var n=t.find("a"),r;t.attr("tabindex",-1);for(r=0;r<n.length;r++)e(n[r]).attr("tabindex",-1)},_setFocus:function(e){e&&e.focus()},_addFocus:function(e){this._currentNode&&this._currentNode.attr("tabindex",-1),e.attr("tabindex",0),e.addClass("focus"),this._currentNode=e},_removeFocus:function(e){e.removeClass("focus")}})}(jQuery,jQuery.fx.editablecontrol),function(e,t,n,r){var i=t.prototype,s="fx.fxTreeView",o="<img class='fx-treeview-expand-image' />",u="<li data-tree-id='{{attr:id}}'><span class='fx-tree-expandable'></span><span class='fx-tree-selectable'><span class='fx-treeview-item-text'>{{>text}}</span></span></li>",a="<li data-tree-id='{{attr:id}}'><span class='fx-tree-expandable'></span><img class='fx-treeview-item-icon' src='{{url:icon}}' alt='{{attr:alt}}'/><span class='fx-tree-selectable'><span class='fx-treeview-item-text'>{{>text}}</span></span></li>";e.widget(s,t,{options:{class_:n.getClasses(s),text:n.getStrings(s)},_nodeTemplate:null,_create:function(){this.element.addClass("fx-treeview"),this.setTemplate(e.fx.fxTreeView.Template.Text),i._create.call(this)},_destroy:function(){this.element.removeClass("fx-treeview"),this._super()},addNode:function(t,n){var r;return t.id||(t=e.extend({},{id:this._generateNodeId()},t)),t.alt||(t=e.extend({},{alt:t.text},t)),r=e(this._nodeTemplate.render(t)),i.addNode.call(this,r.filter("li"),n)},setTemplate:function(t,n){switch(t){case e.fx.fxTreeView.Template.Custom:this._nodeTemplate=e.templates(n);break;case e.fx.fxTreeView.Template.Text:this._nodeTemplate=e.templates(u);break;case e.fx.fxTreeView.Template.ImageAndText:this._nodeTemplate=e.templates(a)}},_convertLeafNodeToParentNode:function(t){t.find(".fx-tree-expandable").append(e(o).attr({src:this.options.url.collapsed,alt:this.options.text.collapsed})),i._convertLeafNodeToParentNode.call(this,t)},_convertParentNodeToLeafNode:function(e){e.find("img.fx-treeview-expand-image").remove(),i._convertParentNodeToLeafNode.call(this,e)},_setNodeExpandedState:function(e,t){t?e.children(".fx-tree-expandable").children("img.fx-treeview-expand-image").attr({src:this.options.url.expanded,alt:this.options.text.expanded}):e.children(".fx-tree-expandable").children("img.fx-treeview-expand-image").attr({src:this.options.url.collapsed,alt:this.options.url.collapsed})}}),e.fx.fxTreeView.Template={Custom:0,Text:1,ImageAndText:2}}(jQuery,jQuery.fx.fxTree,this.fx.resources),function(e,t,n,r){var i=t.prototype,s=0,o="__fx-tristatecheckbox",u="<input type='checkbox' name='' value='' tabindex='-1' /><span class='sprite></span>";e.widget("fx.fxTristateCheckBox",t,{options:{name:"",inputId:null,inputCheckedValue:"checked",inputIndeterminateValue:"indeterminate",class_:n.getClasses("fx.fxTristateCheckBox")},_attributes:[{name:"role",value:"checkbox"},{name:"tabindex",value:"0"}],_input:null,_image:null,_clickHandler:null,_keyUpHandler:null,_keyDownHandler:null,_create:function(){i._create.call(this),this.options.value!==e.fx.fxTristateCheckBox.Values.checked&&this.options.value!==e.fx.fxTristateCheckBox.Values.indeterminate&&this.options.value!==e.fx.fxTristateCheckBox.Values.unchecked&&(this.options.value=e.fx.fxTristateCheckBox.Values.unchecked),this.element.empty().addClass("fx-tristatecheckbox").attr("name",o+s++).append(u),this._input=this.element.find("input").attr("name",this.options.name||o+s++).hide(),this.options.inputId&&this._input.attr("id",this.options.inputId),this._image=this.element.find("span.sprite"),this._addAttributes(),this._attachEvents(),this._set(this.options.value)},_destroy:function(){this._super(),this.element.empty().removeClass("fx-tristatecheckbox"),this._removeAttributes(),this._detachEvents(),this._input=null,this._image=null},toggle:function(){var t;this.options.value===e.fx.fxTristateCheckBox.Values.checked?t=e.fx.fxTristateCheckBox.Values.unchecked:t=e.fx.fxTristateCheckBox.Values.checked,this._set(t)},_set:function(t){var n=t!==e.fx.fxTristateCheckBox.Values.unchecked;i._set.call(this,t),this._input&&(t===e.fx.fxTristateCheckBox.Values.checked?this._input.val(this.options.inputCheckedValue):t===e.fx.fxTristateCheckBox.Values.indeterminate&&this._input.val(this.options.inputIndeterminateValue),this._input.prop("checked",n),this.element.attr("aria-checked",n),this._setImage())},_addAttributes:function(){var t=this;e.each(this._attributes,function(){t.element.attr(this.name,this.value)})},_removeAttributes:function(){var t=this;e.each(this._attributes,function(){t.element.removeAttr(this.name)})},_attachEvents:function(){var t=this;this._clickHandler=function(e){t.toggle()},this._keyUpHandler=function(n){n.which===e.ui.keyCode.SPACE&&t.toggle()},this._keyDownHandler=function(t){t.which===e.ui.keyCode.SPACE&&t.preventDefault()},this.element.on("click",this._clickHandler).on("keyup",this._keyUpHandler).on("keydown",this._keyDownHandler)},_detachEvents:function(){this.element.off("click",this._clickHandler).off("keyup",this._keyUpHandler).off("keydown",this._keyDownHandler),this._clickHandler=null,this._keyHandler=null},_setImage:function(){var t="",n=this.options.value,r=this._editedFlag,i=!this.options.disabled;n===e.fx.fxTristateCheckBox.Values.checked?r?t=i?this.options.class_.editedChecked:this.options.class_.editedCheckedDisabled:t=i?this.options.class_.checked:this.options.class_.checkedDisabled:n===e.fx.fxTristateCheckBox.Values.indeterminate?r?t=i?this.options.class_.editedIndeterminate:this.options.class_.editedIndeterminateDisabled:t=i?this.options.class_.indeterminate:this.options.class_.indeterminateDisabled:n===e.fx.fxTristateCheckBox.Values.unchecked&&(r?t=i?this.options.class_.editedUnchecked:this.options.class_.editedUncheckedDisabled:t=i?this.options.class_.unchecked:this.options.class_.uncheckedDisabled),this._image.attr("class","sprite "+t)},_setOption:function(e,t){var n=i._setOption.apply(this,arguments);return e==="disabled"&&(this.element.attr("aria-disabled",t),this._input.prop("disabled",t),this._detachEvents(),t||this._attachEvents(),this._setImage()),n}}),e.fx.fxTristateCheckBox.Values={checked:"checked",indeterminate:"indeterminate",unchecked:"unchecked"}}(jQuery,jQuery.fx.editablecontrol,this.fx.resources),function(e,t,n,r){var i=t.prototype,s=n.getClasses("fxs.fxsCopyButton"),o=n.getStrings("fxs.fxsCopyButton"),u="<div class='fxs-copybutton-value'><input aria-labelledby='{{attr:ariaLabelledBy}}' type='text' readonly='readonly' /></div><span class='fxs-copybutton-button'><span class='sprite'></span></span><div class='fxs-copybutton-copied'>{{html:copySuccess}}</div>",a=e.templates(u);e.widget("fxs.fxsCopyButton",t,{options:{ariaLabelledBy:null,text:null,labelElement:!1,getClipboardText:null},_create:function(){var t=this;this.element.addClass("fxs-copybutton"),t.options.labelElement?(this.element.html(a.render(e.extend({},this.options,o))).find(".fxs-copybutton-value").addClass("fxs-copybutton-value-withoutdefaultlabel"),t.options.labelElement.addClass("fxs-copybutton-value").prependTo(this.element)):(this.element.html(a.render(e.extend({},this.options,o))),this.element.find("input").val(this.options.text||"").click(function(){e(this).select()})),this.element.find(".fxs-copybutton-button").fxCopyButton({class_:s,selector:"span.sprite",getClipboardText:function(){var e,n;if(t.options.getClipboardText)e=t.options.getClipboardText();else{n=t.element.find(".fxs-copybutton-value");if(n.hasClass("fxs-copybutton-value-withoutdefaultlabel"))throw"getClipboardText has not been provided.";e=n.find("input").val()}return e},complete:function(){t.element.find(".fxs-copybutton-copied").show().delay(1200).fadeOut(600)},flashNotInstalled:function(){t.element.addClass("fxs-copybutton-no-flash"),this.hide()}}),i._create.call(this)},_destroy:function(){this.element.removeClass("fxs-copybutton fxs-copybutton-no-flash").find(".fxs-copybutton-button").fxCopyButton("destroy").end().empty(),this._super()}})}(jQuery,jQuery.Widget,this.fx.resources),function(e,t,n,r,i){var s=t.prototype,o=0,u=n&&n.getResources?n.getResources("fx"):null,a=u&&u.fxshell_previewbadge_previewButtonText?u.fxshell_previewbadge_previewButtonText:"Preview",f="__fxshell-pivotlist";e.widgetReference("fxshell.fxshellPivotList",t,{options:{panel:null,trackedit:!1,click:e.noop},_references:{values:!0},_id:null,_ariaCompositeRole:"pivotlist",_ariaElementRole:"tab",_ariaAttribute:"aria-selected",_attachedControl:"<img/>",_create:function(){if(this.options.panel===i)throw"options.panel must be defined";this.element.addClass("fxshell-pivotlist"),e(this.options.panel).addClass("fxshell-pivotlist-panel"),s._create.call(this),this._setupAria()},_destroy:function(){this.element.empty().removeClass("fxshell-pivotlist"),this.options&&this.options.panel&&e(this.options.panel).removeAttr("aria-labelledby aria-hidden role"),this._super()},_valueHtml:function(e){return typeof e=="string"||!e.isPreview?s._valueHtml.call(this,e):r.htmlEncode(e.string)+"<span class='fxshell-pivotlist-preview'>"+a+"</span>"},_clicked:function(e){this._trigger("click",null,{value:e})},_set:function(t){var n=this._getSelectedIndex(t),r=e(this.options.panel);n!==-1?r.attr({"aria-hidden":!1,"aria-labelledby":this._getUniqueItemId(n),role:"tabpanel"}):r.attr("aria-hidden",!0).removeAttr("aria-labelledby"),s._set.call(this,t)},_getElementId:function(){return this.element[0].id||this._id||(this._id=f+o++)},_getUniqueItemId:function(e){return this._getElementId()+"-"+e},_setupAria:function(){var t=this;this.element.find("li").each(function(n){e(this).attr("id",t._getUniqueItemId(n))})},_attachControl:function(){var t=this,n;this.element.find("li").each(function(r){var i=t.options.values[r].image;i&&i.url&&(n=e(t._attachedControl).attr("alt",i.altText||"").attr("src",i.url).prependTo(this),e(this).addClass("fxshell-pivotlist-withicon"),i.urlHover&&e(this).mouseover(function(){n.attr("src",i.urlHover)}).mouseleave(function(){n.attr("src",i.url)}))})}})}(jQuery,jQuery.fx.fxItemList,this.resources,this.fx.utilities),function(e,t,n,r,i){function s(t){var n={};return t&&e.each(["columnWidths","pageNumber","selection","sort"],function(){var r=this,i=e.grep(t,function(e){return e.Name==r})[0];i&&(n[r]=i.Value)}),n}function o(e){return e===null||e===i}function u(n){if(n){var r=[],i=[];e.each(n,function(n,s){s.hasOwnProperty("id")?(e.grep(r,function(e){return e===s.id}).length>0&&t.Diagnostics.Log.writeEntry("shell.datagrid","Grid column definitions contain duplicate 'id' properties.",t.Diagnostics.LogEntryLevel.information),r.push(s.id)):(e.grep(i,function(e){return e===s.field}).length>0&&t.Diagnostics.Log.writeEntry("shell.datagrid","Grid column definitions contain duplicate 'field' properties. Add 'id' properties to disambiguate.",t.Diagnostics.LogEntryLevel.information),i.push(s.field))})}}function a(e){var t=e.getBoundingClientRect().width;return t-=parseFloat(jQuery.css(e,"paddingLeft"))||0,t-=parseFloat(jQuery.css(e,"paddingRight"))||0,t-=parseFloat(jQuery.css(e,"borderLeftWidth"))||0,t-=parseFloat(jQuery.css(e,"borderRightWidth"))||0,t}var f=e.Widget.prototype,l=n.prototype,c={options:e.extend({settingsOptions:{subViewName:"Grid0"},settings:{columnWidths:{path:t.Configuration.ViewSettings.Path.perType},pageNumber:{path:t.Configuration.ViewSettings.Path.perInstance},selection:{path:t.Configuration.ViewSettings.Path.perInstance},sort:{path:t.Configuration.ViewSettings.Path.perType}},id:null},l.options),_initializedGrid:!1,_disposed:!1,_columnResizeHandler:null,_columnSortHandler:null,_rowSelectHandler:null,_destroy:function(){this._disposed||(this.element.off("fxgridcolumnresize",this._columnResizeHandler).off("fxgridcolumnsort",this._columnSortHandler),this._rowSelectHandler&&this.element.off("fxgridrowselect",this._rowSelectHandler),this._initializedGrid?l.destroy.call(this):this._super(),this._disposed=!0)},_isDisposed:function(){return this._disposed},_create:function(){var t=this,n=[];e.each(this.options.settings,function(e,t){t&&!o(t.path)&&n.push({path:t.path,name:e})}),u(this.options.columns),n.length?this._callSettingsManager("getViewSettings",n).then(function(e){if(t._isDisposed())return;t._renderGrid(e)},function(e){if(t._isDisposed())return;t._renderGrid()}):this._renderGrid()},_setOption:function(e,t){return(this._initializedGrid?l:f)._setOption.apply(this,arguments)},_triggerRowExpand:function(e){l._triggerRowExpand.apply(this,arguments),this.options.id&&this._updateRowExpand(e.dataItem,e.expanded)},_renderGrid:function(t){t=t||[],t=s(t);var n=t.columnWidths,r=t.sort,i=t.pageNumber,u=t.selection,a=this,f;n&&e.each(this.options.columns,function(t,r){var i=e.grep(n,function(e){return e.hasOwnProperty("id")?e.id===r.id:o(r.id)&&e.field===r.field})[0];i?r.width=i.width:r.width=null}),r&&e.each(this.options.columns,function(e,t){var n=r.hasOwnProperty("id")?r.id===t.id:o(t.id)&&r.field===t.field;n?t.sorted=r.sorted:t.sorted=null}),i&&(this.options.pagerOptions=this.options.pagerOptions||{},this.options.pagerOptions.currentPage=i),u&&this.options.rowMetadata&&e.each(this.options.rowMetadata,function(){this.selected&&(this.selected=!1)}),this.options.dataSourceRefreshStart=this.refreshStartHandler=function(e,t){a._handleDataSourceRefreshStart(t.promise,t.isClientInitiated)},this._initializedGrid=!0,l._create.apply(this),this.element.on("fxgridcolumnresize",this._columnResizeHandler=function(){a._updateColumnWidths()}).on("fxgridcolumnsort",this._columnSortHandler=function(e,t){a._updateSort(t.column,t.sort)}).find(".fx-grid-container-pager").on("fxpagerchange",function(e,t){a._updatePageNumber(t.value)}),this.options.id&&this.element.on("fxgridrowselect",this._rowSelectHandler=function(){a._updateSelection()}),this.getDataSource().refreshPromise?e(this.getDataSource()).on("refreshSuccess",f=function(){e(a.getDataSource()).off("refreshSuccess",f),a._isDisposed()||a._onInitialRender(u)}):this._onInitialRender(u)},_handleDataSourceRefreshStart:function(n,r){var i=this.getDataSource(),s=i.dataSetName||"grid"+this._gridId,o=this;n.then(function(n,r,u,a){if(o._isDisposed())return;!i.dataSetName&&e.isArray(a)&&a.length>0&&t.Diagnostics.Log.writeEntry("shell.datagrid","Data sources sharing the same underlying data set should have a 'dataSetName' to avoid duplicate notification details",t.Diagnostics.LogEntryLevel.information),t.UI.Notifications.DataLoad.handleDataLoadSuccess(s,a),o._trigger("dataLoad",null,{noItems:u===0&&(!a||a.length===0)})},function(e,n,u){if(o._isDisposed())return;t.UI.Notifications.DataLoad.handleDataLoadFailure(s,r),r&&i.reset()})},_updateColumnWidths:function(){if(!this._gridUsesSetting("columnWidths"))return;var t=[];e.each(this.element.find("thead th"),function(){var n=e(this).view().data,r={width:a(this)};n.hasOwnProperty("id")?r.id=n.id:r.field=n.field,t.push(r)}),this._updateSetting("columnWidths",t)},_updateSort:function(e,t){if(!this._gridUsesSetting("sort"))return;var n={sorted:t};e.hasOwnProperty("id")?n.id=e.id:n.field=e.field,this._updateSetting("sort",n)},_updatePageNumber:function(e){this._gridUsesSetting("pageNumber")&&this._updateSetting("pageNumber",e)},_updateSelection:function(){if(!this._gridUsesSetting("selection"))return;var t=this.getSelectedRows(),n=this,r=e.map(t,function(e){return n._getItemId(e.dataItem)});this._updateSetting("selection",r)},_updateRowExpand:function(e,n){var r=this._getExpandedViewSettingName(e);r&&this._callSettingsManager("updateViewSetting",t.Configuration.ViewSettings.Path.perInstance,r,n)},_getExpandedViewSettingName:function(t){var n=this._getItemId(t),r;return n===null?null:(r=[],e.each(n,function(e,t){r.push(e),r.push(t)}),"expanded-"+r.join("+"))},_getItemId:function(n){var r=this.options.id,i={},s;if(!r)throw"Supply the 'id' option to save selection / row-expanded settings";return e.each(e.isArray(r)?r:[r],function(){var e=n[this];if(o(e))return s=!0,!1;i[this]=e}),s?(t.Diagnostics.Log.writeEntry("shell.datagrid","Identity property missing on data item for grid row.",t.Diagnostics.LogEntryLevel.information),null):i},_onItemsArrayChange:function(n,r){l._onItemsArrayChange.apply(this,arguments);if(!this._isExpandable()){this._onRowMetadataConfiguredAfterDataChange();return}var i=e.grep(n,function(t){return e.inArray(t,r)<0}),s=this,o=[];e.each(i,function(e,t){var n=s._getExpandedViewSettingName(t);o.push({name:n,item:t})}),o.length>0&&this._callSettingsManager("getViewSettings",e.map(o,function(e){return{path:t.Configuration.ViewSettings.Path.perInstance,name:e.name}})).then(function(t){if(s._isDisposed())return;e.each(o,function(n,r){var i=e.grep(t,function(e){return r.name===e.Name})[0],o;i&&(o=s._getRowMetadata(r.item),e.observable(o).setProperty("expanded",i.Value))}),s._onRowMetadataConfiguredAfterDataChange()})},_onRowMetadataConfiguredAfterDataChange:function(){},_onInitialRender:function(t){var n,r,i=this;t&&e.each(this.getDataSource().items,function(r,i){var s=e.grep(t,function(e){for(var t in e)if(i[t]!==e[t])return!1;return!0}).length>0;s&&(n=n||[],n.push(i))}),n&&e.each(n,function(){r=i.getRowMetadata(this),e.observable(r).setProperty("selected",!0),i._grid._trigger("rowSelect",null,{selected:r})}),this._trigger("initialRender")},_callSettingsManager:function(e){var n=[this.options.settingsOptions].concat([].slice.call(arguments,1));return t.Configuration.ViewSettings[e].apply(t.Configuration.ViewSettings,n)},_gridUsesSetting:function(e){return this.options.settings&&this.options.settings[e]},_updateSetting:function(e,t){return this._callSettingsManager("updateViewSetting",this.options.settings[e].path,e,t)}};e.each(l,function(t,n){t.charAt(0)!=="_"&&e.isFunction(n)&&!c.hasOwnProperty(t)&&!f.hasOwnProperty(t)&&(c[t]=function(){if(!this._initializedGrid)throw"Grid has not been initialized.";return n.apply(this,arguments)})}),e.widgetReference("shell.shellDataGrid",n,c)}(jQuery,Shell,jQuery.fx.fxDataGrid,this.Impl),function(e,t){var n=e("#retirement-messagebar .close");n.off("click").on("click",function(){e("#retirement-messagebar").hide()})}(jQuery)}),define("generated/editor/TS/Common/DialogInterfaces",["require","exports"],function(e,t){function n(e){t.DialogHost&&t.DialogHost.closeActiveDialog(),t.DialogHost=e}t.DialogHost,t.setDialogHost=n}),define("generated/editor/TS/View/DialogView",["require","exports","../../TS/Common/DialogInterfaces","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(){function e(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null),this.optionsOverrides=n,this.hasBeenShown=!1,this.dialogResult=$.Deferred(),this.dialogHostResultSubscription=null;if(!e&&e!=="")throw new Error("koTemplate must be provided");this.koTemplate=e,this.viewModel=t}return e.createFactoryForTemplate=function(t,n){var r=function(r){return new e(t,r,n)};return r.show=function(e){var t=new this(e);return t.show()},r},e.enableOk=function(e){e?$("a.fx-dialog-ok").attr("href","#"):$("a.fx-dialog-ok").removeAttr("href")},e.prototype.show=function(){var e=this;if(this.hasBeenShown)throw new Error("This dialog has already been shown once and cannot be shown again");this.hasBeenShown=!0,this.dialogHostResultSubscription=n.DialogHost.dialogDismissedEvent.subscribe(function(t){e.dialogHostResultSubscription.dispose(),e.onDialogDismissed(t)});var t=n.DialogHost.showNewDialog(this);return t.innerHTML=this.koTemplate,this.viewModel!==null&&(ko.applyBindings(this.viewModel,t),this.viewModel.viewBound&&this.viewModel.viewBound()),this.dialogResult.promise()},e.prototype.close=function(){if(n.DialogHost.isActiveDialog(this)){n.DialogHost.closeActiveDialog();var e=$(".fx-dialogpresenter-shield");return e.promise()}return i.when(null)},e.prototype.canBeAccepted=function(){return this.viewModel.canBeAccepted?this.viewModel.canBeAccepted():!0},e.prototype.onDialogDismissed=function(e){if(e.dialog!==this){r.error("Dialog received a dismissal notification for a different dialog");return}this.viewModel&&this.viewModel.dismissed(e),this.dialogResult.resolveWith(this,[e])},e}();t.DialogView=s}),define("generated/editor/TS/View/DialogViewFactories",["require","exports","../../TS/View/DialogView","../../../DataLabClient/Features"],function(e,t,n,r){function i(){t.OutputPromotion=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._outputPromotionDialogMarkup),t.Confirmation=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._confirmationDialogMarkup,{size:["auto","auto"]}),t.UploadDataset=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._uploadDatasetDialogMarkup),t.UploadCustomModulePackage=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._uploadModuleDialogMarkup),t.SaveSSSIMDataset=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._saveSSIMDatasetMarkup),t.InteractiveScore=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._scoreDialogMarkup),t.TrainedModelPromotion=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._trainedModelPromotionDialogMarkup),t.TransformModulePromotion=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._transformPromotionDialogMarkup),t.FeedbackControl=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._feedbackControlMarkup),t.CreateWebServiceFromTrainedModel=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._createWebServiceGraphFromTrainedModelDialogMarkup),t.Spinner=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._pauseUserWithSpinnerMarkup,{size:["600px","400px"],postRenderDialog:function(){this.element.css("padding","0"),this.element.find(".fx-dialog-ok").hide(),this.element.find(".fx-dialog-close").hide()}}),t.PublishToCommunityStepOnComplete=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._publishToCommunityStepOnCompleteMarkup),t.ShowApiCode=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._apiCodeDialogMarkup),t.CopyExperiment=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._copyExperimentDialogMarkup,{size:["360px","255px"]}),t.CopyExperimentFromGallery=r.multiGeoNavigationEnabled()?n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._copyExperimentFromGalleryMultiGeoDialogMarkup,{size:["360px","225px"]}):n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._copyExperimentFromGalleryDialogMarkup,{size:["360px","125px"]}),t.RenameNotebook=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._renameNotebookDialogMarkup,{size:["360px","108px"]}),t.DataGatewayUpdateDescription=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._dataGatewayDescriptionDialogMarkup),t.DataGatewayDownloadAndRegister=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._dataGatewayDownloadAndRegisterMarkup,{size:[400,400]}),t.ExperimentSaveAs=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._experimentSaveAsDialogMarkup,{size:["auto","auto"]}),t.NameAsset=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._nameAssetDialogMarkup,{size:["360px","108px"]}),t.UploadNotebook=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._uploadNotebookDialogMarkup),t.UserSettings=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._userSettingsDialogMarkup,{size:["540px","190px"]}),t.SynchronizeScriptVersionDialog=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._synchronizeScriptVersionDialogMarkup,{size:["400px","auto"]}),t.CustomModuleAddedWarningDialog=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._customModuleAddedWarningDialogMarkup,{size:["400px","auto"]}),t.ScriptVersionChangeDialog=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._scriptVersionChangeDialogMarkup,{size:["400px","auto"]}),t.ModuleNameConflictDialog=n.DialogView.createFactoryForTemplate(ExperimentEditorTemplates._moduleNameConflictDialogMarkup,{size:["450px","auto"]})}t.OutputPromotion,t.Confirmation,t.UploadDataset,t.UploadCustomModulePackage,t.SaveSSSIMDataset,t.InteractiveScore,t.TrainedModelPromotion,t.TransformModulePromotion,t.FeedbackControl,t.CreateWebServiceFromTrainedModel,t.Spinner,t.PublishToCommunityStepOnComplete,t.ShowApiCode,t.CopyExperiment,t.CopyExperimentFromGallery,t.RenameNotebook,t.DataGatewayUpdateDescription,t.DataGatewayDownloadAndRegister,t.ExperimentSaveAs,t.NameAsset,t.UploadNotebook,t.UserSettings,t.SynchronizeScriptVersionDialog,t.CustomModuleAddedWarningDialog,t.ScriptVersionChangeDialog,t.ModuleNameConflictDialog,t.createViews=i}),define("generated/DataLabClient/Validation",["require","exports","./Constants","./Disposable","./LocalizedResources","./Util"],function(e,t,n,r,i,s){function a(e,t){var n;ko.isObservable(e)?n=e:n=ko.observable(e);var i=ko.observable(!1),s=ko.observable(null),u=!0,a=n.subscribe(function(){u=!1,setTimeout(function(){!u&&!n.isDisposed&&n.validate()},o)});n.validate=function(){u=!0;if(i()){var e=t(n());return s(e),n.isValid(!e),e?[e]:[]}return[]},n.isValid=ko.observable(!0),n.errorMessage=s,n.startValidating=function(){i(!0),n.validate()};var f=new r.Disposable;f.registerForDisposal(new r.DisposableSubscription(a));var l={dispose:function(){return f.dispose()},registerForDisposal:function(){var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];return f.registerForDisposal.apply(f,e)},get disposableId(){return f.disposableId},set disposableId(e){f.disposableId=e},get isDisposed(){return f.isDisposed},set isDisposed(e){f.isDisposed=e}};return Object.getOwnPropertyNames(l).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(l,e))}),n}function f(e,t){var n;ko.isObservable(e)?n=e:n=ko.observable(e);var r=ko.observable(!1),i=ko.observable(null),s=!0,u=null,a=!1,f=null;return n.subscribe(function(){s=!1,f||(f=$.Deferred()),setTimeout(function(){s||n.validate()},o)}),n.validate=function(){if(!r())return[];u?a||(u.always(function(){n.validate()}),a=!0):(s=!0,a=!1,f||(f=$.Deferred()),n.isValid(!0),u=t(n()),u.then(function(e){i(e),n.isValid(!e),!a&&s&&(f.resolve(),f=null),u=null},function(e){i(null),n.isValid(!0),!a&&s&&(f.reject(e),f=null),u=null}))},n.completeValidation=function(){return n.startValidating(),f?f.promise():$.Deferred().resolve().promise()},n.isValid=ko.observable(!0),n.errorMessage=i,n.startValidating=function(){var e=!r()||!s;r(!0),e&&n.validate()},n}var o=200,u=function(){function e(){var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];this._validators=e}return e.prototype.push=function(e){typeof e=="function"?this._validators.push({validate:e}):this._validators.push(e)},e.prototype.validate=function(e){var t=null;return this._validators.forEach(function(n){t||(t=n.validate(e))}),t},e}();t.ValidatorList=u,t.validatableObservable=a,t.asyncValidatableObservable=f;var l=function(){function e(e){this.min=e}return e.prototype.validate=function(e){if(!e)return null;if(isNaN(parseFloat(e)))return s.format(i.validationValueIsNotAValidNumberGreaterThan,e,this.min.toString());var t=parseFloat(e);return this.min<=t?null:s.format(i.validationValueIsLessThanMinimumOf,e,this.min.toString())},e}();t.PropertyMinValidator=l;var c=function(){function e(e){this.max=e}return e.prototype.validate=function(e){if(!e)return null;if(isNaN(parseFloat(e)))return s.format(i.validationValueIsNotAValidNumberLessThan,e,this.max.toString());var t=parseFloat(e);return this.max>=t?null:s.format(i.validationValueIsGreaterThanMaximumOf,e,this.max.toString())},e}();t.PropertyMaxValidator=c;var h=function(){function e(e){this.allowedValues=e}return e.prototype.validate=function(e){var t=!1,n="";return this.allowedValues.forEach(function(r){e==r.value&&r.displayValue!==i.choiceParameterPleaseSelectValue&&(t=!0),r.value!==i.choiceParameterPleaseSelectValue&&(n+=r.displayValue+", ")}),t?null:s.format(i.validationTheValueDoesNotMatchTheFollowing,e,n.substring(0,n.length-2))},e}();t.PropertyValuesValidator=h;var p=function(){function e(){}return e.prototype.validate=function(e){return e?null:i.validationValueRequired},e}();t.RequiredValueValidator=p;var d=function(){function e(){}return e.prototype.validate=function(e){var t=/^(^[-+]?[0-9]+)?$/;return t.test(e)?null:i.validationValueIsNotAValidInteger},e}();t.IntegerValidator=d;var v=function(){function e(){}return e.prototype.validate=function(e){return e!=="NaN"&&isNaN(Number(e))?i.validationValueIsNotAValidFloatingPointNumber:null},e}();t.FloatValidator=v;var m=function(){function e(e,t,n){n===void 0&&(n=!1),this._minValue=e,this._maxValue=t,this._integerType=n,this._countRegExp=new RegExp("^\\s*(\\d+)\\s*$")}return e.prototype.validate=function(e){var t;if(this._countRegExp.test(e)){var n=Number(this._countRegExp.exec(e)[1]),r=1+this._maxValue()-this._minValue();n>=r&&this._integerType?t=s.format(i.parameterRangeErrorTooManyPoints,r.toString()):n<1&&(t=i.parameterRangeCountMustBeInteger)}else t=i.parameterRangeCountMustBeInteger;return t},e}();t.RangeCountValidator=m;var g=function(){function e(e,t,n){n===void 0&&(n=!1),this._minLimit=e,this._maxLimit=t,this._integerType=n,this._integerType?(this._itemRegExp=new RegExp("^\\s*(-?\\d+)\\s*$"),this._rangeRegExp=new RegExp("^\\s*(-?\\d+)\\s*-\\s*(-?\\d+)\\s*$")):(this._itemRegExp=new RegExp("^\\s*((-?\\d+\\.?\\d*((e|E)-?\\d+))|(-?\\d*\\.?\\d+))\\s*$"),this._rangeRegExp=new RegExp("^\\s*((-?\\d+\\.?\\d*((e|E)-?\\d+))|(-?\\d*\\.?\\d+))\\s*$"))}return e.prototype.validate=function(e){var t=this,n=e.split(","),r;return n.forEach(function(e){if(t._itemRegExp.test(e)){var n=t._itemRegExp.exec(e)[1];if(Number(n)<t._minLimit){r=s.format(i.parameterRangeErrorMustBeGreaterThan,t._minLimit.toString());return}if(Number(n)>t._maxLimit){r=s.format(i.parameterRangeErrorMustBeLessThan,t._maxLimit.toString());return}}else{if(!t._rangeRegExp.test(e)){t._integerType?r=i.parameterRangeInputMustBeIntegersOrRanges:r=i.parameterRangeInputMustBeDoubles;return}var o=t._rangeRegExp.exec(e);if(Number(o[1])<t._minLimit){r=s.format(i.parameterRangeErrorMustBeGreaterThan,t._minLimit.toString());return}if(Number(o[2])>t._maxLimit){r=s.format(i.parameterRangeErrorMustBeLessThan,t._maxLimit.toString());return}if(Number(o[2])<Number(o[1])){r=i.parameterRangeInvalidRange;return}}}),r},e}();t.RangeLimitsValidator=g;var y=function(){function e(){}return e.prototype.validate=function(e){var t=n.WorkspaceNameRegex;return e?t.test(e)?null:i.workspaceNameInvalidErrorMessage:i.workspaceNameCannotBeEmpty},e}();t.WorkspaceNameValidator=y;var b=function(){function e(e){this.max=e}return e.prototype.validate=function(e){return this.max>=e.length?null:s.format(i.validationMaxScriptLengthExceeded,this.max.toString())},e}();t.TextMaxLengthValidator=b}),define("generated/DataLabClient/Model/UnsavedResource",["require","exports","../Validation","../Util","../Disposable","../LocalizedResources"],function(e,t,n,r,i,s){var o;(function(e){e.maxResourceNameLength=100})(o=t.Constants||(t.Constants={}));var u=function(){function e(e,t,u,a){var f=this;this.description=ko.observable(),this.workspace=e,this.deprecate=ko.observable(!1),this._familyId=ko.observable(""),this.hint=ko.observable(!1),this.updateAvailableResources=new i.Disposable,this._resourceCache=t,this._name=n.validatableObservable("",function(e){return r.first(t.items(),function(t){return t.name()===e.trim()},!1)?r.format(s.assetNameExistsErrorMessgage,a):u().indexOf(e.trim())>=0?r.format(s.assetNameBeingUploadedErrorMessage,a):/^\s*$/.test(e)?r.format(s.assetNameEmptyErrorMessage,a):/[:\/#\?\\]/.test(e)?r.format(s.assetNameInvalidCharactersErrorMessage,a):e.length>o.maxResourceNameLength?r.format(s.assetNameLengthErrorMessage,a,String(o.maxResourceNameLength)):null}),this.dataType=n.validatableObservable(null,function(e){return e?null:r.format(s.datasetUploadSelectDataType,a)}),this.resourceToDeprecate=n.validatableObservable(null,function(e){return e?null:r.format(s.datasetUploadSelectDatasetToDeprecate,a)}),this.availableResources=ko.observable(r.map(r.filter(this._resourceCache.items(),function(e){return f.isLatestLocal(e,f.workspace)}),function(e){return e.name()})),this.updateAvailableResources.registerForDisposal(new i.DisposableSubscription(u.subscribe(function(){f.availableResources(r.map(r.filter(f._resourceCache.items(),function(e){return f.isLatestLocal(e,f.workspace)}),function(e){return e.name()}))}))),this.resourceToDeprecate.subscribe(function(e){var t=r.first(f._resourceCache.items(),function(t){return t.name()===e&&f.isLatestLocal(t,f.workspace)},null);f.description(t?t.description():""),f.dataType(t?t.dataType:null),f._familyId(t?t.familyId:null),f.hint(!1)}),this.deprecate.subscribe(function(){f.hint(!1)}),this.familyId=ko.computed(function(){return f.deprecate()&&f._familyId()?f._familyId().split(".")[1]:null}),this.name=ko.computed({read:function(){return f.deprecate()?f.resourceToDeprecate():f._name()},write:function(e){f._name(e)}})}return e.prototype.isValid=function(){return this._name.isValid()&&!this.deprecate()||this.resourceToDeprecate.isValid()&&this.deprecate()},e.prototype.startValidating=function(){this._name.startValidating(),this.resourceToDeprecate.startValidating()},e.prototype.isLatestLocal=function(e,t){return e.isLatest()&&e.id.lastIndexOf(t.id,0)===0},e}();t.UnsavedResource=u}),define("generated/DataLabClient/AssetNameValidationHelper",["require","exports","./Util","./LocalizedResources","./Model/UnsavedResource"],function(e,t,n,r,i){function s(e,t,s,o){return function(u){return u===t?null:n.first(s.items(),function(e){return e.name()===u},!1)?n.format(r.assetNameExistsErrorMessgage,e):o&&o().indexOf(u)>=0?n.format(r.assetNameBeingUploadedErrorMessage,e):/^\s*$/.test(u)?n.format(r.assetNameEmptyErrorMessage,e):/[:\/#\?\\]/.test(u)?n.format(r.assetNameInvalidCharactersErrorMessage,e):u.length>i.Constants.maxResourceNameLength?n.format(r.assetNameLengthErrorMessage,e,i.Constants.maxResourceNameLength.toString()):null}}function o(e,t,i){var s=[];for(var o=3;o<arguments.length;o++)s[o-3]=arguments[o];var u="",a="",f=e.message;return e instanceof n.AjaxError&&e.xmlHttpRequest&&(f=f+" "+e.xmlHttpRequest.responseText,e.xmlHttpRequest.status===404&&e.xmlHttpRequest.statusText==="OK"?a=n.format(r.assetServiceUnavailable,i.charAt(0).toUpperCase()+i.slice(1)):e.xmlHttpRequest.status===404?a=n.format(r.assetErrorNotFound,i):e.xmlHttpRequest.status===409&&(a=n.format(r.assetErrorNameConflict,i))),s.push(a),u=n.format.apply(null,[t||"{0}"].concat(s)),{title:u,details:f}}t.generateNameValidator=s,t.getErrorMessage=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/Resource",["require","exports"],function(e,t){var n=function(){function e(e,t,n,r){t===void 0&&(t=new Date),n===void 0&&(n=null),r===void 0&&(r=0),this.description=ko.observable(""),this.name=ko.observable(""),this.id=e,this.created=t,this.familyId=n,this.serviceVersion=r,this.isLatest=ko.observable(!0),this.category=null}return e}();t.Resource=n;var r=function(e){function t(t,n,r,i,s){r===void 0&&(r=new Date),i===void 0&&(i=null),s===void 0&&(s=0),e.call(this,t,r,i,s),this.dataType=n}return __extends(t,e),t}(n);t.DataResource=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/Notebook",["require","exports","../Constants","./Resource"],function(e,t,n,r){var i=function(e){function t(t,n,r,i,s,o,u,a){e.call(this,s,i,s,a),this.name(t),this.author=n,this.language=r,this.modified=o?o:i,this.tags=u||null}return __extends(t,e),Object.defineProperty(t.prototype,"friendlyName",{get:function(){var e=this.name();return e&&t.simplifyName(e)||e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"galleryUri",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"galleryId",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),t.simplifyName=function(e){return t.removeFileExtension(e.trim())},t.removeFileExtension=function(e){var t=n.PythonNotebookSuffix;return e.indexOf(t,e.length-t.length)!==-1&&(e=e.slice(0,-t.length)),e},t}(r.Resource);return i}),define("generated/DataLabClient/Contracts/V1/Common/Notebook",["require","exports","../../../Model/Notebook","../../../Util"],function(e,t,n,r){function i(e){var t=new n(e.Name,e.Author,e.Language,r.parseJsonDate(e.Created),e.FamilyId,r.parseJsonDate(e.Modified),e.Tags);return t}function s(e){return{Author:e.author,Language:e.language,Tags:e.tags||null}}t.deserializeNotebook=i,t.serializeNotebookForUpdate=s}),define("generated/DataLabClient/Model/ProjectLookup",["require","exports"],function(e,t){var n=function(){function e(e){this.Name=e.Name,this.Id=e.ContainerId}return e}();t.ProjectNameIdPair=n;var r=function(){function e(){this.reverseLookup={}}return e.prototype.clear=function(){this.reverseLookup={}},e.prototype.listProjectForAsset=function(e){return this.reverseLookup[e]?this.reverseLookup[e].map(function(e){return e.Name}).sort():[]},e.prototype.listProjectIdForAsset=function(e){return this.reverseLookup[e]?this.reverseLookup[e].map(function(e){return e.Id}).sort():[]},e.prototype.addProject=function(e){var t=this;for(var r in e.Contents)e.Contents[r].forEach(function(r){t.addAssetToProject(r,new n(e))})},e.prototype.deleteProject=function(e){var t=this;for(var n in e.Contents)e.Contents[n].forEach(function(n){t.removeAssetFromProject(n,e.ContainerId)})},e.prototype.addAssetToProject=function(e,t){this.reverseLookup[e]||(this.reverseLookup[e]=[]);if(this.reverseLookup[e].some(function(e){return e.Id===t.Id}))return;this.reverseLookup[e].push(t)},e.prototype.removeAssetFromProject=function(e,t){this.reverseLookup[e]&&(this.reverseLookup[e]=this.reverseLookup[e].filter(function(e){return e.Id===t}))},e}();t.ProjectLookup=r}),define("generated/DataLabClient/ObjectWithId",["require","exports","./Util"],function(e,t,n){var r=function(){function e(e){e===void 0&&(e=null),this.id=e?e:n.generateUID()}return e}();t.ObjectWithId=r}),define("generated/DataLabClient/Contracts/V1/Constants",["require","exports"],function(e,t){var n;(function(e){e.String="String",e.Int="Int",e.Float="Float",e.Double="Double",e.Boolean="Boolean",e.Enumerated="Enumerated",e.Script="Script",e.Mode="Mode",e.Credential="Credential",e.ColumnPicker="ColumnPicker",e.ParameterRange="ParameterRange",e.DataGatewayName="DataGatewayName"})(n=t.ModuleParameterType||(t.ModuleParameterType={}));var r;(function(e){e.Literal="Literal",e.Password="Password",e.Placeholder="PlaceHolder",e.GraphParameterName="GraphParameterName"})(r=t.ModuleParameterValueType||(t.ModuleParameterValueType={}));var i;(function(e){e.OldestPythonScriptVersion="Anaconda 2.0/Python 2.7.7",e.OldestRScriptVersion="CRAN R 3.1.0"})(i=t.ModuleParameterValue||(t.ModuleParameterValue={}));var s;(function(e){e.PythonVersion="Python Version",e.RVersion="R Version"})(s=t.ModuleParameterName||(t.ModuleParameterName={}));var o;(function(e){e.CreateRModel="314e34a8b24c4870afe62649b6fc7476"})(o=t.ModuleId||(t.ModuleId={}));var u;(function(e){e.NotStarted="NotStarted",e.Running="Running",e.Finished="Finished",e.Failed="Failed",e.Canceled="Canceled",e.InDraft="InDraft",e.Throttled="Throttled"})(u=t.State||(t.State={}));var a;(function(e){e.InvalidOrigin="InvalidOrigin",e.FromResourceUpload="FromResourceUpload",e.FromExistingBlob="FromExistingBlob",e.FromOutputPromotion="FromOutputPromotion"})(a=t.DataSourceOrigin||(t.DataSourceOrigin={}));var f;(function(e){e.Exe="exe",e.Hive="hive",e.Pig="pig",e.MapReduce="mapreduce",e.MapReduceJar="mapreducejar",e.AnalyticsFramework="analyticsFramework",e.Dll="dll",e.R="r",e.Python="python",e.Cosmos="cosmos"})(f=t.CloudSystemTypes||(t.CloudSystemTypes={}));var l;(function(e){e.Pending="Pending",e.Complete="Complete",e.NotSupported="NotSupported",e.Failed="Failed",e.Invalid="Invalid"})(l=t.SchemaStatus||(t.SchemaStatus={}));var c;(function(e){e.Success="Success",e.Error="Error",e.SqlLoginFailed="SqlLoginFailed",e.DatabaseNotOpened="DatabaseNotOpened",e.ServerConnectionFailed="ServerConnectionFailed",e.InvalidSasUri="InvalidSasUri",e.MissingAccountName="MissingAccountName",e.MissingBlobPath="MissingBlobPath",e.InvalidAzureAccountOrKey="InvalidAzureAccountOrKey",e.InvalidAzureAccountKey="InvalidAzureAccountKey",e.InvalidAzureContainer="InvalidAzureContainer",e.InvalidBlobName="InvalidBlobName",e.UnsupportedBlobType="UnsupportedBlobType",e.InvalidAzureTable="InvalidAzureTable"})(c=t.TestConnectionResult||(t.TestConnectionResult={})),t.DataReferenceModuleFamilyId="DataReferenceModule";var h;(function(e){e.ExceededRuntimeLimit="Experiment runtime quota exceeded",e.ExceededStorageLimit="StorageQuota",e.DatasetRestriction="http://schemas.azureml.net/ws/2014/11/identity/claims/Dataset",e.ModulesRestriction="http://schemas.azureml.net/ws/2014/11/identity/claims/Modules",e.CustomModulesRestriction="http://schemas.azureml.net/ws/2014/11/identity/claims/CustomModules",e.WebServicesRestriction="http://schemas.azureml.net/ws/2014/11/identity/claims/WebServices",e.WorkspaceTypeRestriction="http://schemas.azureml.net/ws/2014/11/identity/claims/WorkspaceType"})(h=t.CancellationReason||(t.CancellationReason={})),t.moduleRuntimeExceededRegex=/^.*One module of the job couldn’t be completed within (\S+) hours timeout limit.*$/,t.AssetMaxNameLength=120});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/ModuleParameterDescriptor",["require","exports","../Validation","../Contracts/V1/Constants","../Constants","../Features"],function(e,t,n,r,i,s){function d(e,t){if(e.length===0)throw new Error("Expected at least one choice.");return t!==undefined?t:e[0].value}function m(e,t,n){e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=!1);var r=[];if(t){var i=e[0]&&e[0].Values.length>0?e[0].Values:Object.keys(t);s.dataGatewayEnabled()||(i=i.filter(function(e){return e!==v})),i.forEach(function(e){t[e].displayValue?r.push(new o(e,t[e].displayValue)):r.push(new o(e))})}else{if(!(e.length>0))throw new Error("Enumerated parameter has neither modeValuesInfo nor rules array with values.");e[0].Values.forEach(function(e){r.push(new o(e))})}return n&&r.unshift(new o("")),r}var o=function(){function e(e,t){this.value=e,this.displayValue=t?t:e}return e}();t.ChoiceParameterValue=o;var u;(function(e){e.Choice="Choice",e.Boolean="Boolean",e.MultiChoice="MultiChoice",e.Column="Column",e.Range="Range",e.Script="Script",e.Credential="Credential",e.DataGatewayName="Data Gateway Name",e.Mode="Mode"})(u=t.ParameterTypes||(t.ParameterTypes={}));var a=function(){function e(e,t,i,s,o,u,a,f){var l=this;o===void 0&&(o=!1),u===void 0&&(u=[]),a===void 0&&(a=[]),this.name=e,this.friendlyName=t,this.defaultValue=i,this.isOptional=o,this.rules=u,this.validators=[],this.description=s,this.isOptional||this.validators.push(new n.RequiredValueValidator),f===r.ModuleParameterType.Int?this.validators.push(new n.IntegerValidator):(f===r.ModuleParameterType.Float||f===r.ModuleParameterType.Double)&&this.validators.push(new n.FloatValidator),this.type=f!=null?f:r.ModuleParameterType.String,this.rules.forEach(function(e){"Max"in e&&l.validators.push(new n.PropertyMaxValidator(e.Max)),"Min"in e&&l.validators.push(new n.PropertyMinValidator(e.Min)),"Values"in e&&l.validators.push(new n.PropertyValuesValidator(a))})}return e.prototype.validate=function(e){var t=null;return this.validators.forEach(function(n){t||(t=n.validate(e))}),t},e.prototype.parameterType=function(){return this.type},e}();t.ModuleParameterDescriptor=a;var f=function(e){function t(t,r,i,s,o,u,a){e.call(this,t,r,d(s,a),o,i,u,s);if(s.length==0)throw new Error("Set of choices is empty for enumerated parameter.");this.choices=ko.observableArray(s);var f=!1;this.validators.forEach(function(e){e instanceof n.PropertyValuesValidator&&(f=!0)}),f||this.validators.push(new n.PropertyValuesValidator(s))}return __extends(t,e),t.prototype.parameterType=function(){return u.Choice},t.isBooleanDescriptor=function(e){if(e.length!=2)return!1;var t=e[0].value.toLowerCase().trim(),n=e[1].value.toLowerCase().trim();return t==="true"&&n==="false"||t==="yes"&&n==="no"?!0:t==="false"&&n==="true"||t==="no"&&n==="yes"?(e=e.reverse(),!0):!1},t.CreateDescriptor=function(e,n,r,i,s,o,u,a){i===void 0&&(i=!1),s===void 0&&(s=[]),o===void 0&&(o=null),a===void 0&&(a=!1);var f=m(s,o,i);return!i&&t.isBooleanDescriptor(f)?new l(e,n,r,f,u):a?new c(e,n,f,r,s,u):new t(e,n,i,f,r,s,u)},t}(a);t.ChoiceModuleParameterDescriptor=f;var l=function(e){function t(t,n,r,i,s){i===void 0&&(i=[]),e.call(this,t,n,!1,i,r,[],s)}return __extends(t,e),t.prototype.parameterType=function(){return u.Boolean},t}(f);t.BooleanModuleParameterDescriptor=l;var c=function(e){function t(t,n,r,i,s,o){e.call(this,t,n,!1,r,i,s,o)}return __extends(t,e),t.prototype.parameterType=function(){return u.MultiChoice},t}(f);t.MultiChoiceModuleParameterDescriptor=c;var h=function(e){function t(t,n,r,i,s,o,u,a,f){u===void 0&&(u=[]),a===void 0&&(a=!1),e.call(this,t,n,f,o,a,u),this.columnPickerFor=r,this.singleColumnSelection=i,this.columnSelectionCategories=s}return __extends(t,e),t.prototype.parameterType=function(){return u.Column},t}(a);t.ColumnPickerModuleParameterDescriptor=h;var p=function(e){function t(t,n,r,i,s,o,u,a,f,l){e.call(this,t,n,a,l),this.isInt=r,this.sliderMin=o,this.sliderMax=u,this.minLimit=i,this.maxLimit=s,this.isLog=f}return __extends(t,e),t.prototype.parameterType=function(){return u.Range},t}(a);t.ParameterRangeModuleParameterDescriptor=p;var v=i.WellKnownModeParameterValue.OnPremisesSqlDatabase,g=function(e){function t(t,r,s,o,u,a,f){o===void 0&&(o=null),u===void 0&&(u=null),a===void 0&&(a=!1),f===void 0&&(f=[]),e.call(this,t,r,u,s,a,f),this.scriptName=o,this.validators.push(new n.TextMaxLengthValidator(i.maxScriptSize))}return __extends(t,e),t.prototype.parameterType=function(){return u.Script},t}(a);t.ScriptModuleParameterDescriptor=g;var y=function(e){function t(t,n,r,i,s,o){o===void 0&&(o=[]),e.call(this,n,r,"",s,i,o),this.credentialDescriptor=t}return __extends(t,e),t.prototype.parameterType=function(){return u.Credential},t}(a);t.CredentialModuleParameterDescriptor=y;var b=function(e){function t(t,n,r,i){i===void 0&&(i=!1),e.call(this,t,n,null,r,i,[])}return __extends(t,e),t.prototype.parameterType=function(){return u.DataGatewayName},t}(a);t.DataGatewayNameModuleParameterDescriptor=b;var w=function(e){function t(t,n,r,i,s,o,u){s===void 0&&(s=!1),o===void 0&&(o=[]),e.call(this,t,n,s,m(o,r,s),i,o,u),this.modeValuesInfo=r}return __extends(t,e),t.prototype.parameterType=function(){return u.Mode},t}(f);t.ModeModuleParameterDescriptor=w;var E=function(){function e(e,t,n){e===void 0&&(e=""),t===void 0&&(t=[]),n===void 0&&(n=null),this.interfaceString="",this.childParameterDescriptors=[],this.displayValue=null,this.interfaceString=e,this.childParameterDescriptors=t,this.displayValue=n,s.addPreviewToOnPremLabelEnabled()&&this.displayValue==="On-Premises SQL Database"&&(this.displayValue+=" (Preview Feature)")}return e}();t.ModeValueInfo=E}),define("generated/DataLabClient/Dirtyable",["require","exports","./Util","./Features"],function(e,t,n,r){var i=function(){function e(){this.isDirty=ko.observable(!1),this.parent=null,this.children=[],this._started=!1,this.dirtyLabels=new n.StringSet([])}return e.prototype.addChild=function(e){var t=this;e.parent=this,this.children.push(e),e.dirtyLabels.forEach(function(e){t.dirtyLabels.add(e)})},e.prototype.clean=function(){this.isDirty(!1),this.dirtyLabels.clear(),this.children.forEach(function(e){e.isDirty()&&e.clean()})},e.prototype.dirty=function(e){e===void 0&&(e=null),this._started&&(this.addLabels(e),this.isDirty(!0),e&&this.isDirty.valueHasMutated(),this.parent&&this.parent.dirty(e))},e.prototype.removeChild=function(e){var t=this.children.indexOf(e);t>-1&&(e.parent=null,this.children.splice(t,1))},e.prototype.hasDirtyLabel=function(e){return this.dirtyLabels.has(e)},e.prototype.startDirtying=function(){this._started=!0},e.prototype.stopDirtying=function(){this._started=!1},e.prototype.addLabels=function(e){var t=this;e&&r.dirtyLabelsInDirtyablesEnabled()&&e.forEach(function(e){t.dirtyLabels.add(e)})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e}();return i}),define("generated/DataLabClient/Model/CredentialStore",["require","exports","../LocalizedResources","../Util","../Features"],function(e,t,n,r,i){function s(){if(!t.storeClient)throw new Error(n.cannotRefresh)}function o(e){t.storeClient=e}function a(){if(i.deprecateCredentialsSystemEnabled())return r.succeed([]);s();var e=u;return u||(e=u=$.Deferred(),t.storeClient.listCredentials().done(function(e){u.resolve(e),u=null})),e}function f(e,t){if(e.Type!=t.Type)return!1;if(e.Parts.length!=t.Parts.length)return!1;for(var n=0;n<e.Parts.length;n++)if(e.Parts[n].Name!=t.Parts[n].Name||e.Parts[n].Value!=t.Parts[n].Value)return!1;return!0}function l(e){return i.deprecateCredentialsSystemEnabled()?r.succeed(!1):u?r.then(u,function(t){var n=r.first(t,function(t){return f(t,e)},null);return r.when(!!n)}):t.storeClient.verifyCredential(e)}t.storeClient,t.initialize=o;var u=null;t.listCredentials=a,t.verifyCredential=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/Parameter",["require","exports","../ObjectWithId","../Validation","./ModuleParameterDescriptor","../Contracts/V1/Constants","../Util","../Dirtyable","../Constants","./CredentialStore","../Logging/Logging","../Features"],function(e,t,n,r,i,s,o,u,a,f,l,c){function p(e,t,n,r,s){n===void 0&&(n=undefined),r===void 0&&(r=null),s===void 0&&(s=null);var o=Object.create(null),u=[];return e.forEach(function(e){if(e.name in o)throw new Error("Duplicate parameter definition names.");e instanceof i.CredentialModuleParameterDescriptor?o[e.name]=null:o[e.name]=new d(e,t,n,r,s)}),e.forEach(function(e){e instanceof i.CredentialModuleParameterDescriptor&&(o[e.name]=new m(e,t,n,r,s,o))}),o}var h=function(e){function t(t,n){n===void 0&&(n=undefined),e.call(this),this.descriptor=t,n=typeof n=="undefined"?this.descriptor.defaultValue:n,n=n!==undefined&&n!==null?n:"",this.value=r.validatableObservable(n,this.validateValue.bind(this)),this.autocompleteArray=ko.observableArray()}return __extends(t,e),t.prototype.validate=function(){return this.value.validate()},t.prototype.startValidating=function(){this.value.startValidating()},Object.defineProperty(t.prototype,"label",{get:function(){return this.descriptor.friendlyName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameterType",{get:function(){var e="";return this.descriptor instanceof i.ScriptModuleParameterDescriptor?e=s.ModuleParameterType.Script:this.descriptor instanceof i.BooleanModuleParameterDescriptor?e=s.ModuleParameterType.Boolean:this.descriptor instanceof i.ChoiceModuleParameterDescriptor?e=s.ModuleParameterType.Enumerated:this.descriptor instanceof i.CredentialModuleParameterDescriptor?e=s.ModuleParameterType.Credential:this.descriptor instanceof i.ColumnPickerModuleParameterDescriptor?e=s.ModuleParameterType.ColumnPicker:this.descriptor instanceof i.ParameterRangeModuleParameterDescriptor?e=s.ModuleParameterType.ParameterRange:this.descriptor instanceof i.DataGatewayNameModuleParameterDescriptor?e=s.ModuleParameterType.DataGatewayName:e=s.ModuleParameterType.String,e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.descriptor.description||this.descriptor.friendlyName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.descriptor.name},enumerable:!0,configurable:!0}),t.prototype.validateValue=function(e){return this.descriptor.validate(e)},t}(n.ObjectWithId);t.Parameter=h,t.createModuleNodeParametersFromDescriptors=p;var d=function(e){function t(t,n,r,f,l,h){var d=this;r===void 0&&(r=undefined),f===void 0&&(f=null),l===void 0&&(l=null),h===void 0&&(h=s.ModuleParameterValueType.Literal),e.call(this,t,r),this._dirtyParameterOnChange=!0,this.hasScriptVersionSubscription=!1,this.respectScriptVersionSubscription=!0,this.shouldBlockRenderingInWizard=ko.observable(!1),this.linkedWebServiceParameter=ko.observable(null),this.isLinked=ko.computed(function(){return!!d.linkedWebServiceParameter()}),this.parent=n,this.isRelevant=ko.observable(!0),this.childParameters=Object.create(null),this.dirtyStatusInfo=new u,this.dirtyDraftState=new u,this.isScriptVersionParameter=this.name===s.ModuleParameterName.PythonVersion||this.name===s.ModuleParameterName.RVersion,this.valueType=h,this.valueTypeWasPlaceholder=!1,this.originalValue=this.value(),f&&(this.isRelevant=ko.computed(function(){return f.isRelevant()&&f.value()===l}),f.dirtyDraftState.addChild(this.dirtyDraftState),f.dirtyStatusInfo.addChild(this.dirtyStatusInfo)),this.value.subscribe(function(){d._dirtyParameterOnChange&&(d.dirtyStatusInfo.dirty([a.DirtyType.Rerun]),d.dirtyDraftState.dirty([a.DirtyType.Rerun])),d._valueType===s.ModuleParameterValueType.Placeholder&&(c.enablePasswordPlaceholdersEnabled()?d._valueType=s.ModuleParameterValueType.Password:d._valueType=s.ModuleParameterValueType.Literal),d.valueTypeWasPlaceholder&&(d._valueType===s.ModuleParameterValueType.Password||d._valueType===s.ModuleParameterValueType.Literal)&&d.value()===d.originalValue&&(d._valueType=s.ModuleParameterValueType.Placeholder)}),this.descriptor instanceof i.ModeModuleParameterDescriptor&&o.forEach(this.descriptor.modeValuesInfo,function(e,t){var n=p(e.childParameterDescriptors,d.parent,undefined,d,t);d.childParameters[t]=n})}return __extends(t,e),Object.defineProperty(t.prototype,"valueType",{get:function(){return this.parameterType===s.ModuleParameterType.Credential&&this._valueType===s.ModuleParameterValueType.Literal?s.ModuleParameterValueType.Password:this._valueType},set:function(e){e===s.ModuleParameterValueType.Placeholder&&(this.valueTypeWasPlaceholder=!0),this._valueType=e},enumerable:!0,configurable:!0}),t.prototype.setParameterValueWithoutDirtying=function(e){this._dirtyParameterOnChange=!1,this.value(e),this._dirtyParameterOnChange=!0},t.prototype.linkToWebServiceParameter=function(e){if(this.linkedWebServiceParameter())throw new Error("Cannot link because the parameter is already linked");e.link(this),this.linkedWebServiceParameter(e)},t.prototype.unlink=function(){if(!this.linkedWebServiceParameter())throw new Error("Cannot unlink because the parameter is not currently linked");this.linkedWebServiceParameter().unlink(this),this.linkedWebServiceParameter(null)},t.prototype.ensureUnlinked=function(){this.linkedWebServiceParameter()&&this.unlink()},t.prototype.dirtyIfNeeded=function(e){if(!this.isRelevant())return;var t=e.name!==this.name||e.value()!==this.value()||o.values(this.childParameters).length!==o.values(e.childParameters).length||!e.isRelevant();o.forEach(this.childParameters,function(n,r){var i=e.childParameters[r];i?(t=t||o.values(i).length!==o.values(n).length,o.forEach(n,function(e,n){var r=i[n];r?e.dirtyIfNeeded(r):t=!0})):t=!0}),t&&this.dirtyStatusInfo.dirty([a.DirtyType.Rerun])},t.prototype.startDirtyingParameterAndChildren=function(){this.childParameters&&o.forEach(this.childParameters,function(e){o.forEach(e,function(e){e.startDirtyingParameterAndChildren()})}),this.dirtyDraftState.startDirtying(),this.dirtyStatusInfo.startDirtying()},t.prototype.silentlyUpdateValue=function(e){this.respectScriptVersionSubscription=!1,this.value(e),this.respectScriptVersionSubscription=!0},t}(h);t.ModuleNodeParameter=d;var v;(function(e){var t;(function(e){e.credentialVerificationTimeout=500})(t=e.CredentialParameter||(e.CredentialParameter={}))})(v=t.Constants||(t.Constants={}));var v;(function(e){var t;(function(e){e.Return=13})(t=e.Key||(e.Key={}))})(v=t.Constants||(t.Constants={}));var m=function(e){function t(t,n,r,i,s,u){var a=this;e.call(this,t,n,r,i,s),this.isDirty=!1,this.credentialType=t.credentialDescriptor.CredentialType,this.credentialKeyParts=[],this.activeRequests=[],this.requestsBlocked=!1,o.forEach(u,function(e){e&&o.first(t.credentialDescriptor.CredentialKeyParts,function(t){return t===e.name},!1)&&(c.deprecateCredentialsSystemEnabled()||e.value.subscribe(function(){a.fill()}),a.credentialKeyParts.push({label:e.label,tooltip:e.tooltip,value:e.value,name:e.name,parameterType:e.parameterType}),c.deprecateCredentialsSystemEnabled()||f.listCredentials().done(function(t){o.forEach(t,function(t){if(t.Type===a.credentialType){var n=o.first(t.Parts,function(t){return t.Name===e.name},null);n&&e.autocompleteArray.push(n.Value)}})}))});if(this.credentialKeyParts.length!=t.credentialDescriptor.CredentialKeyParts.length)throw new Error("Invalid Credential descriptor for the module, some of the parameters defined as part of the credential key are missing");this.value.subscribe(function(){a.isDirty=a.value()&&!a.isLinked()?!0:!1}),c.deprecateCredentialsSystemEnabled()||this.fill(),this.isLinked.subscribe(function(e){a.isDirty=!1,c.deprecateCredentialsSystemEnabled()||e||a.fill()})}return __extends(t,e),t.prototype.sendRequest=function(e){var t=this;f.verifyCredential(e).done(function(n){t.activeRequests.length>0&&t.activeRequests[t.activeRequests.length-1]==e&&!t.isLinked()&&!t.isDirty&&(t.dirtyDraftState.isDirty()||(t.dirtyDraftState.stopDirtying(),t.dirtyStatusInfo.stopDirtying(),n&&t.value()?t.value(a.PasswordPlaceholder):t.value(""),t.dirtyDraftState.startDirtying(),t.dirtyStatusInfo.startDirtying()),t.isDirty=!1,t.activeRequests=[])})},t.prototype.fill=function(){var e=this;if(!this.isDirty&&!this.isLinked()){var t=[];o.forEach(this.credentialKeyParts,function(e){t.push({Name:e.name,Value:e.value()})});var n={Type:this.credentialType,Parts:t};this.activeRequests.push(n),this.requestsBlocked||(this.sendRequest(n),this.activeRequests.length>1&&(this.requestsBlocked=!0,setTimeout(function(){e.activeRequests.length>0&&e.sendRequest(e.activeRequests[e.activeRequests.length-1]),e.requestsBlocked=!1},v.CredentialParameter.credentialVerificationTimeout)))}},t.prototype.getSerializedValue=function(){return""},t}(d);t.CredentialParameter=m;var g=function(e){function t(n,i,s,o){e.call(this,n,s),this.isExperimentParameter=!1;var u=function(e){var n=o.parameters,r=null;e===""?r="Experiment parameter name cannot be empty.":o.parametersWithName(e).length>1&&(r="Experiment parameter '"+e+"' already exists.");if(t.shouldRecurseValidation)try{t.shouldRecurseValidation=!1,o.parameters.forEach(function(e){e.validatableName.validate()})}finally{t.shouldRecurseValidation=!0}return r};this.linkedParameters=Object.create(null),this.validatableName=r.validatableObservable(i,u),this.hasDefaultValue=ko.observable(this.value()!=null&&this.value()!=""),this.validatableName.startValidating(),this.value.startValidating(),this.isEditingName=ko.observable(!1)}return __extends(t,e),t.prototype.unlink=function(e){if(!(e.id in this.linkedParameters))throw new Error("Unlinking an module parameter that hasn't been linked");delete this.linkedParameters[e.id],this.hasDefaultValue()&&this.value.validate()},t.prototype.link=function(e){if(e.id in this.linkedParameters)throw new Error("Experiment parameter is alread linked to module parameter");this.linkedParameters[e.id]=e,this.hasDefaultValue()&&this.value.validate()},t.prototype.unlinkAll=function(){o.forEach(this.linkedParameters,function(e){e.ensureUnlinked()})},t.prototype.validateValue=function(){var e=this;if(!this.hasDefaultValue())return null;var t=[];return o.forEach(this.linkedParameters,function(n){n.descriptor.validators.forEach(function(r){if(t.length===0){var i=r.validate(e.value());i&&(i="Value is invalid for linked parameter "+n.name+" on "+n.parent.name+". "+i,t.push(i))}})}),t.length>0?t[0]:null},t.prototype.textboxKeydown=function(e,t){return t.keyCode===v.Key.Return?(e.property.isEditingName(!1),e.property.validatableName.isValid()||e.property.validatableName(e.property._nameBeforeRename),!1):!0},t.prototype.toggleEditingName=function(e,t){e.property.isEditingName(!0),e.property._nameBeforeEdit=e.property.validatableName(),l.featureUsage({featureID:47,groupID:43}),$(t.srcElement).parent().children("input").focus()},t.prototype.textboxBlur=function(e,t){e.property.isEditingName(!1),e.property.validatableName.isValid()||e.property.validatableName(e.property._nameBeforeRename)},t.prototype.validate=function(){var e=this.hasDefaultValue()?this.value.validate()[0]:null,t=[];return e&&t.push(e),t.concat(this.validatableName.validate())},Object.defineProperty(t.prototype,"name",{get:function(){return this.validatableName()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){var e=this.name.indexOf("\n");return e==-1&&(e=this.name.length),this.name.substring(0,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.name},enumerable:!0,configurable:!0}),t.prototype.isLinked=function(){return!o.isEmpty(this.linkedParameters)},t.shouldRecurseValidation=!0,t}(h);t.WebServiceParameter=g});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/Property",["require","exports","../Contracts/V1/Constants"],function(e,t,n){var r=function(){function e(e,t){this.value=t,this.name=e,this.label=e,this.tooltip=e,this.parameterType=n.ModuleParameterType.String}return e}();t.StaticProperty=r;var i=function(e){function t(t,n,r,i){e.call(this,t,r),this.placeholderText=n,i&&this.value.subscribe(function(){i.dirtyStatus.dirty(),i.dirtyForPublishStatus.dirty()})}return __extends(t,e),t}(r);t.EditableTextProperty=i;var s=function(e){function t(t,n){e.call(this,t,ko.observable(n))}return __extends(t,e),t}(r);t.LinkProperty=s;var o=function(e){function t(t,n){e.call(this,t,ko.observable(n))}return __extends(t,e),t}(r);t.ButtonProperty=o;var u=function(e){function t(t,n){var r=this;e.call(this,t,n()?n().BaseUri+n().Location+n().AccessCredential:""),this.endpoint=n,this.endpoint.subscribe(function(){r.value(n()?n().BaseUri+n().Location+n().AccessCredential:"")})}return __extends(t,e),t}(s);t.EndpointProperty=u;var a=function(e){function t(t,n,r){var i=this;e.call(this,t,r()?r().BaseUri+r().Location+r().AccessCredential:""),this.id=n,this.endpoint=r,this.endpoint.subscribe(function(){i.value(r()?r().BaseUri+r().Location+r().AccessCredential:"")})}return __extends(t,e),t}(o);t.DisplayEndpointProperty=a;var f=function(){function e(e,t,n,r,i){this.value=r,this.name=e,this.label=t,this.tooltip=n,i&&this.value.subscribe(function(){i.dirtyStatus.dirty(),i.dirtyForPublishStatus.dirty()})}return e}();t.BooleanProperty=f}),define("generated/DataLabClient/ObservableMap",["require","exports","./Util","./Disposable"],function(e,t,n,r){function o(e){return r.Disposable.apply(e),e.dispose=r.Disposable.prototype.dispose.bind(e),e.registerForDisposal=r.Disposable.prototype.registerForDisposal.bind(e),e}function u(){function u(e){t.notifySubscribers(e,i)}var e=Object.create(null),t=ko.observable(e),r=ko.observable(0),s=ko.observable(!1),o=function(){if(arguments.length>0)throw new Error("observableMaps do not support ko.observable style writes.");return n.createReadOnlyView(t())};return o.__ko_proto__=ko.observable,o.observable=t,o.isInModifyBlock=s,o.lookup=function(t){return e[t]},o.contains=function(t){return t in e},o.put=function(n,r){var i=n in e,a=e[n],l=i?1:0;if(!f(r,a)||!i)s()===!1&&t.valueWillMutate(),e[n]=r,i||o.count(o.count()+1),s()===!1&&t.valueHasMutated(),u({type:l,key:n,oldValue:a,newValue:r})},o.clear=function(){o.modify(function(){for(var t in e)o.remove(t)})},o.remove=function(n){if(n in e){s()===!1&&t.valueWillMutate();var r=e[n];delete e[n],o.count(o.count()-1),s()===!1&&t.valueHasMutated(),u({type:2,key:n,oldValue:r})}},o.modify=function(e){var n=!1;s()===!1&&(n=!0,s(!0),t.valueWillMutate());try{e()}finally{n&&(s(!1),t.valueHasMutated())}},o.subscribeToCollectionChanges=function(e){return t.subscribe(e,null,i)},o.transform=function(e){return c(o,e)},o.forEach=function(t){for(var n in e)t(e[n])},o.keys=function(){return Object.keys(e)},o.subscribe=function(){return t.subscribe.apply(t,arguments)},o.count=r,o}function a(){function a(e,t){if(i.lookup(e)!==undefined)throw new Error("Maps in union must have disjoint key sets");i.put(e,t)}function f(e,t){i.put(e,t)}function l(e){i.remove(e)}function c(e){switch(e.type){case 0:a(e.key,e.newValue);break;case 1:f(e.key,e.newValue);break;case 2:l(e.key);break;default:throw new Error("Unknown collection change type")}}var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];var i=o(u()),s=ko.computed({read:function(){var t=!1;return e.forEach(function(e){t=t||e.isInModifyBlock()}),t},write:function(t){e.forEach(function(e){e.isInModifyBlock(t)})}});return i.registerForDisposal(new r.DisposableSubscription(s.subscribe(function(e){e?(i.isInModifyBlock(!0),i.observable.valueWillMutate()):(i.isInModifyBlock(!1),i.observable.valueHasMutated())}))),i.modify=function(e){var t=!1;s()===!1&&(t=!0,s(!0));try{e()}finally{t&&s(!1)}},e.forEach(function(e){n.forEach(e(),function(e,t){return a(t,e)}),i.registerForDisposal(new r.DisposableSubscription(e.subscribeToCollectionChanges(function(e){c(e)})))}),i}function f(e,t){return l(e)&&l(t)&&e==t}function l(e){return typeof e!="object"&&typeof e!="function"}function c(e,t){function s(e){switch(e.type){case 0:case 1:i.put(e.key,t(e.newValue,e.key));break;case 2:i.remove(e.key);break;default:throw new Error("Unknown collection change type")}}var i=o(u());return n.forEach(e(),function(e,n){i.put(n,t(e,n))}),i.registerForDisposal(new r.DisposableSubscription(e.isInModifyBlock.subscribe(function(e){e?(i.isInModifyBlock(!0),i.observable.valueWillMutate()):(i.isInModifyBlock(!1),i.observable.valueHasMutated())})),new r.DisposableSubscription(e.subscribeToCollectionChanges(s))),i}var i="collectionChange";(function(e){e[e.add=0]="add",e[e.replace=1]="replace",e[e.remove=2]="remove"})(t.CollectionChangeType||(t.CollectionChangeType={}));var s=t.CollectionChangeType;t.observableMap=u,t.observableMapUnion=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/Port",["require","exports","../ObjectWithId","../ObservableMap","../Util","../Constants","../Dirtyable","../Features"],function(e,t,n,r,i,s,o,u){function h(e,t){if(e instanceof l&&t instanceof c)return{input:e,output:t};if(e instanceof c&&t instanceof l)return{input:t,output:e};throw new Error("Expected one InputPort and one OutputPort")}var a;(function(e){var t;(function(e){e.Compatible="compatiblePort",e.Incompatible="incompatiblePort",e.Default="idlePort",e.Replaceable="replaceablePort",e.CompatibleSnapped="compatibleSnapped",e.Selected="selectedPort",e.Connected="connectedPort"})(t=e.PortState||(e.PortState={}))})(a=t.Constants||(t.Constants={}));var a;(function(e){e.PortClass,u.editorControl2Enabled()?e.PortClass="nodePort":e.PortClass="port"})(a=t.Constants||(t.Constants={}));var f=function(e){function t(t,n){var s=this;n===void 0&&(n=0),e.call(this),this.outputEndpoint=null,this.parent=null,this.connectionAdded=new ko.subscribable,this.connectionRemoved=new ko.subscribable,this.isWebServicePort=!1;if(!t)throw new Error("'dataType' parameter is required");this.connectedPorts=r.observableMap(),this.descriptor=t,this.ordinal=n,this.connectedWebServicePorts=ko.computed(function(){return i.filter(i.values(s.connectedPorts()),function(e){return e.isWebServicePort})}),this.connectedNonWebServicePorts=ko.computed(function(){return i.filter(i.values(s.connectedPorts()),function(e){return!e.isWebServicePort})}),this.isConnected=ko.computed(function(){return!i.isEmpty(s.connectedNonWebServicePorts())})}return __extends(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.descriptor.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"friendlyName",{get:function(){return this.descriptor.friendlyName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"optional",{get:function(){return this.descriptor.optional},enumerable:!0,configurable:!0}),t.prototype.setParent=function(e){if(this.parent)throw new Error("Parent GraphNode already set");this.parent=e},t.prototype.isConnectedTo=function(e){return this.connectedPorts.lookup(e.id)!==undefined},t.prototype.compatibilityWithPort=function(e){throw new Error("abstract: compatibilityWithPort")},t.prototype.disconnect=function(e){var t=this,e=e||i.values(this.connectedPorts());e.forEach(function(e){t.disconnectFrom(e)})},t.prototype.disconnectFrom=function(e){this.connectedPorts.remove(e.id),e.connectedPorts.remove(this.id),this.connectionRemoved.notifySubscribers(h(this,e)),this instanceof l?(this.dirtyStatusInfo.dirty([s.DirtyType.Rerun]),this.dirtyDraftState.dirty([s.DirtyType.Rerun])):(e.dirtyStatusInfo.dirty([s.DirtyType.Rerun]),e.dirtyDraftState.dirty([s.DirtyType.Rerun]))},t.prototype.connectTo=function(e){if(!this.isCompatible(e))throw new Error("Invalid port connection");if(this.isConnectedTo(e))return;this.connectedPorts.put(e.id,e),e.connectedPorts.put(this.id,this),this.connectionAdded.notifySubscribers(h(this,e)),this instanceof l?(this.dirtyStatusInfo.dirty([s.DirtyType.Rerun]),this.dirtyDraftState.dirty([s.DirtyType.Rerun])):(e.dirtyStatusInfo.dirty([s.DirtyType.Rerun]),e.dirtyDraftState.dirty([s.DirtyType.Rerun]))},t.prototype.isCompatible=function(e){return this.parent!==null&&e.parent!==null&&this.parent===e.parent?!1:this.descriptor.isCompatible(e.descriptor)},t.prototype.isDatasetDataType=function(){return!!i.first(this.descriptor.allowedDataTypes,function(e){return e.dataTypeId==="Dataset"||e.dataTypeId==="DataTableDotNet"},null)},t}(n.ObjectWithId);t.Port=f;var l=function(e){function t(t,n){n===void 0&&(n=0),e.call(this,t,n),this.connectionIsInCycle=ko.observable(!1),this.isInputPortForPublish=ko.observable(!1),this.publishIcon="/Libraries/Images/publish_input_32.svg",this.dirtyStatusInfo=new o,this.dirtyDraftState=new o}return __extends(t,e),Object.defineProperty(t.prototype,"connectedOutputPort",{get:function(){var e=this.connectedNonWebServicePorts();if(e.length===0)return null;if(e.length===1)return e[0];throw new Error("InputPort has multiple connections, but should have either 0 or 1.")},enumerable:!0,configurable:!0}),t.prototype.compatibilityWithPort=function(e){return this.isCompatible(e)?a.PortState.Compatible:e instanceof t?a.PortState.Default:a.PortState.Incompatible},t.prototype.connectTo=function(t){if(this.isConnected()&&!t.isWebServicePort)throw new Error("Trying to put more than one connection on an input port.");if(!(t instanceof c))throw new Error("Can't connect an input port to anything other than an output port.");e.prototype.connectTo.call(this,t)},t.prototype.dirtyIfNeeded=function(e){var t=this;this.connectedPorts.count()!==e.connectedPorts.count()?this.dirtyStatusInfo.dirty([s.DirtyType.Rerun]):e.connectedPorts.forEach(function(e){var n=!1;t.connectedPorts.forEach(function(t){e.name===t.name&&e.parent.id===t.parent.id&&(n=!0)}),n||t.dirtyStatusInfo.dirty([s.DirtyType.Rerun])})},t}(f);t.InputPort=l;var c=function(e){function t(){e.apply(this,arguments),this.isOutputPortForPublish=ko.observable(!1),this.publishIcon="/Libraries/Images/publish_output_32.svg",this.trainGenericModelIcon="/Libraries/Images/trained_model_24.svg"}return __extends(t,e),t.prototype.compatibilityWithPort=function(e){return this.isCompatible(e)?e.isConnected()?a.PortState.Replaceable:a.PortState.Compatible:e instanceof t?a.PortState.Default:a.PortState.Incompatible},t.prototype.connectTo=function(t){if(t.isConnected()&&!this.isWebServicePort)throw new Error("Trying to put more than one connection on an output port");if(!(t instanceof l))throw new Error("Can't connect an output port to anything other than an input port.");e.prototype.connectTo.call(this,t)},t.prototype.isVisualizable=function(){var e=!!i.first(this.descriptor.allowedDataTypes,function(e){return e.dataTypeId==="Dataset"||e.dataTypeId==="DataTableDotNet"||e.dataTypeId==="ILearnerDotNet"||e.dataTypeId==="Zip"&&u.visualizeZipEnabled()},null);return e=e&&!this.isWebServicePort,e},t.prototype.isTrainModulePort=function(){if(this.parent.isModuleNode()){var e=this.parent;if(e.module_.category===s.ResourceCategory.TrainModule)return this.descriptor.allowedDataTypes.filter(function(e){return!e.allowModelPromotion}).length===0}return!1},t.prototype.isTransformPort=function(){if(this.parent.isModuleNode()){var e=this.parent;if(e.module_.category===s.ResourceCategory.Transform)return this.descriptor.allowedDataTypes.filter(function(e){return!e.allowModelPromotion}).length===0}return!1},t.prototype.isTransformProducerPort=function(){return this.parent.isModuleNode()?this.descriptor.allowedDataTypes.filter(function(e){return e.dataTypeId===s.WellKnownDataTypeId.ITransformDotNet}).length===1:!1},t}(f);t.OutputPort=c});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/GraphNode",["require","exports","./Port","../ObjectWithId","../Dirtyable","../Constants","../LocalizedResources","../Util"],function(e,t,n,r,i,s,o,u){var a=function(e){function t(t,r){var a=this;r===void 0&&(r=null),e.call(this,r),this.x=ko.observable(0),this.y=ko.observable(0),this.height=ko.observable(0),this.width=ko.observable(0),this.comment=ko.observable(""),this.commentCollapsed=ko.observable(!0),this.usePreviousResults=ko.observable(!1),this.balloonMessage=ko.observable(""),this.parent=null,this.ports=Object.create(null),this.inputPorts=Object.create(null),this.outputPorts=Object.create(null),this.dirtyDraftState=new i,this.dirtySinceLastRun=new i,this.dirtyForPublish=new i,this.dirtyDraftState.addChild(this.dirtySinceLastRun),this.dirtySinceLastRun.isDirty.subscribe(function(e){e&&a.dirtyForPublish.dirty()}),this.isPartOfPartialRun=undefined,this.x.subscribe(function(){a.dirtyDraftState.dirty()}),this.y.subscribe(function(){a.dirtyDraftState.dirty()}),this.comment.subscribe(function(){a.comment(a.comment().trim()),a.dirtyDraftState.dirty([s.DirtyType.Rerun])}),t.forEach(function(e){if(e.name in a.ports)throw u.format(o.duplicatePortName,e.name);a.ports[e.name]=e;if(e instanceof n.InputPort)a.inputPorts[e.name]=e;else{if(!(e instanceof n.OutputPort))throw o.unknownPortType;a.outputPorts[e.name]=e}e.setParent(a),e.connectionAdded.subscribe(function(e){return a.onPortConnectionAdded(e)}),e.connectionRemoved.subscribe(function(e){return a.onPortConnectionRemoved(e)})}),Object.freeze(this.ports),Object.freeze(this.inputPorts),Object.freeze(this.outputPorts)}return __extends(t,e),t.prototype.validate=function(){return[]},t.prototype.startValidating=function(){},Object.defineProperty(t.prototype,"name",{get:function(){throw new Error(o.nameIsAbstract)},enumerable:!0,configurable:!0}),t.prototype.remove=function(){u.forEach(this.ports,function(e){return e.disconnect()}),this.parent&&(this.parent._removeNode(this),this.parent=null)},Object.defineProperty(t.prototype,"description",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return""},enumerable:!0,configurable:!0}),t.prototype.replaceWith=function(e,t){if(!this.parent)throw new Error(o.nodeCannotReplaceOutsideExperiment);if(e.parent)throw new Error(o.nodeCannotReplaceAlreadyInExperiment);this.parent.addNode(e,this.x(),this.y()),this.comment()!==""&&(e.comment(this.comment()),e.commentCollapsed(this.commentCollapsed())),e.usePreviousResults(this.usePreviousResults()),u.forEach(this.ports,function(n){if(n.name in e.ports){var r=e.ports[n.name];u.forEach(u.values(n.connectedPorts()),function(e){n.disconnectFrom(e),r.isCompatible(e)?r.connectTo(e):t[e.id]?t[e.id].push(r):t[e.id]=[r]}),t[n.id]&&(t[n.id].forEach(function(e){r.isCompatible(e)&&r.connectTo(e)}),delete t[n.id])}}),e.dirtyDraftState.startDirtying(),e.dirtySinceLastRun.startDirtying(),e.dirtyForPublish.startDirtying(),this._onReplacing(e),this.remove()},t.prototype._onReplacing=function(e){},t.prototype.isModuleNode=function(){return!1},t.prototype.onPortConnectionAdded=function(e){if(!this.parent)throw new Error(o.nodeCannotConnectOutsideExperiment);this.parent.connectionAdded.notifySubscribers(e)},t.prototype.onPortConnectionRemoved=function(e){if(!this.parent)throw o.nodeCannotDisconnectOutsideExperiment;this.parent.connectionRemoved.notifySubscribers(e)},t}(r.ObjectWithId);t.GraphNode=a}),define("generated/DataLabClient/StateUtil",["require","exports","./Contracts/V1/Constants"],function(e,t,n){function r(e){return e===n.State.Failed}function i(e){return e===n.State.Finished}t.isFailedState=r,t.isFinishedState=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/ModulePortDescriptor",["require","exports","../Util"],function(e,t,n){function o(e,t){if(t.allowedDataTypes.length!==1)throw new Error("OutputPortDescriptor has multiple allowed types, which is not currently supported.");var n=t.allowedDataTypes[0];return e.allowedDataTypes.some(function(e){return e.acceptsConnectionFrom(n)})}var r=function(){function e(e,t,r,i,s){var o=this;i===void 0&&(i=!1);if(!r||r.length==0)throw new Error("At least one allowed DataType must be specified");this.name=e,this.friendlyName=t,this.description=s,this.allowedDataTypes=n.values(r),this.allowedDataTypeIdList=[],n.forEach(this.allowedDataTypes,function(e){o.allowedDataTypeIdList.push(e.dataTypeId)}),this.optional=i}return e.prototype.isCompatible=function(e){throw new Error("isCompatible is abstract")},e}();t.ModulePortDescriptor=r;var i=function(e){function t(t,n,r,i,s){e.call(this,t,n,r,i,s)}return __extends(t,e),t.prototype.isCompatible=function(e){return e instanceof s&&o(this,e)},t}(r);t.ModuleInputPortDescriptor=i;var s=function(e){function t(t,n,r,i,s){e.call(this,t,n,[r],i,s)}return __extends(t,e),t.prototype.isCompatible=function(e){return e instanceof i&&o(e,this)},t}(r);t.ModuleOutputPortDescriptor=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/ModuleNode",["require","exports","./Parameter","./Property","../Constants","../Contracts/V1/Constants","../LocalizedResources","../Logging/Logging","./GraphNode","../Util","../Dirtyable","./ModuleParameterDescriptor","../Features","../StateUtil","./Port","./ModulePortDescriptor"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){function y(e){var t=0,n=0;return e.portDescriptors.map(function(e){if(e instanceof v.ModuleInputPortDescriptor)return new d.InputPort(e,t++);if(e instanceof v.ModuleOutputPortDescriptor)return new d.OutputPort(e,n++);throw new Error("Unknown port descriptor type.")})}function b(e,t){f.forEach(e,function(e){if(e.name in t){var n=t[e.name];e.parameterType===n.parameterType&&(n.value(e.value()),n.valueType=e.valueType,e.isLinked()&&n.linkToWebServiceParameter(e.linkedWebServiceParameter())),f.forEach(e.childParameters,function(e,t){t in n.childParameters&&b(e,n.childParameters[t])})}})}var m=function(){function e(){var e=this;this.errorMessage=ko.observable(""),this.startTime=ko.observable(""),this.endTime=ko.observable(""),this.errorId=ko.observable(""),this.hasErrorId=ko.computed(function(){return e.errorId()!==""},this),this.messageInExpectedFormat=ko.observable(!1),this.trimmedErrorMessage=ko.observable(""),this.containsAdditionalInformation=ko.observable(!1)}return e.prototype.updateErrorLogInfo=function(e,t,n){var r=i.ModuleError.StartMessageEndRegExp.exec(e);if(!r||r.length!==4)this.messageInExpectedFormat(!1),e===""?this.errorMessage(o.moduleErrorNoErrorMessage):this.errorMessage(e),u.customEvent({key:"GetErrorLog",type:"BadFormatForErrorLog",data:JSON.stringify({errorText:e,nodeName:t,nodeID:n})});else{this.messageInExpectedFormat(!0),this.startTime(r[1]);var s=r[2];this.endTime(r[3]);var a=i.ModuleError.ModuleOutputFirstLineRegExp.exec(s);if(!a||a.length!==2)this.updateErrorLogInfoWithNonJsonError(s,r);else try{var f=JSON.parse(a[1]),l=f.Exception;l.ErrorCode&&this.errorId(l.ErrorCode);if(l.Message){this.errorMessage(l.Message);var c=i.ModuleError.GetErrorIdRegExp;c.test(l.Message)&&(r=c.exec(l.Message),this.trimmedErrorMessage(r[2]),this.containsAdditionalInformation(r[0]!==l.Message))}}catch(h){this.updateErrorLogInfoWithNonJsonError(s,r)}}},e.prototype.updateErrorLogInfoWithNonJsonError=function(e,t){e=e.replace(i.ModuleError.SkipWhitespaceAndModuleOutputStrRegExp,""),e=e.replace(i.ModuleError.SkipErrorHeadingRegExp,"");if(e!==""){this.errorMessage(e);var n=i.ModuleError.GetErrorIdRegExp;n.test(e)&&(t=n.exec(e),this.errorId(t[1]),this.trimmedErrorMessage(t[2]),this.containsAdditionalInformation(t[0]!==e))}else this.errorMessage(o.moduleErrorNoErrorMessage)},e}();t.ErrorLogInfo=m;var g=function(e){function t(a,c,d){var v=this;d===void 0&&(d=null),e.call(this,y(a),d),this.isFromExistingExperiment=!1,this.executedExperimentId=null,this.module_=a,this.parameters=this.createParametersForModule(a),this.hasParameter=function(e){return t.parameterFilterHelper(v.parameters,e)},this.hasCredentials=function(){return v.hasParameter(function(e){return e instanceof n.CredentialParameter})},this.isCustomModule=function(){return v.module_.familyId.split(".")[0].toLowerCase()!=="506153734175476c4f62416c57734963"},this.isDeterministic=a.isDeterministic,this.usePreviousResults=h.showUsePreviousResultsOption()?ko.observable(a.deterministicByDefault):ko.observable(!1),this.isDirty=!1,this.isValidating=!1,this.startTime=new r.StaticProperty(o.PropertyPanelStartTime,ko.observable()),this.endTime=new r.StaticProperty(o.PropertyPanelEndTime,ko.observable()),this.elapsedTime=new r.StaticProperty(o.elapsedTime,ko.observable()),this.statusCode=new r.StaticProperty(o.PropertyPanelStatusCode,ko.observable(null)),this.statusDetails=new r.StaticProperty(o.PropertyPanelStatusDetails,ko.observable()),this.outputLog=new r.EndpointProperty(o.PropertyPanelViewOutputLog,ko.observable()),this.errorLog=new r.DisplayEndpointProperty(o.moduleErrorDialogButtonLabel,0,ko.observable()),this.errorLogInfo=new m,this.errorLog.endpoint.subscribe(function(){p.isFailedState(v.statusCode.value())&&v.errorLog.endpoint()&&v.errorLog.endpoint().Size>0&&v.executedExperimentId&&f.then(c.getModuleErrorLog(v.executedExperimentId,v.id),function(e){v.errorLogInfo.updateErrorLogInfo(e,v.name,v.id)}).fail(function(e){u.error("getModuleErrorLog failed: "+e.message,"ModuleNode")})}),this.errorLogInfo.errorMessage.subscribe(function(){if(p.isFailedState(v.statusCode.value())||v.statusCode.value()===s.State.Running){var e=v.errorLogInfo.errorMessage().length>i.MaximumCharsForErrorToolTip?v.errorLogInfo.errorMessage().slice(0,i.MaximumCharsForErrorToolTip-1)+" ...":v.errorLogInfo.errorMessage();v.balloonMessage(e)}}),this.outputEndpoints=Object.create(null),this.dirtyStatusInfo=new l,f.forEach(this.inputPorts,function(e){v.dirtyStatusInfo.addChild(e.dirtyStatusInfo),v.dirtySinceLastRun.addChild(e.dirtyDraftState)}),f.forEach(this.parameters,function(e){v.dirtyStatusInfo.addChild(e.dirtyStatusInfo),v.dirtySinceLastRun.addChild(e.dirtyDraftState)}),this.dirtyStatusInfo.isDirty.subscribe(function(e){e&&v.dirtyModule()}),this.schemaError=ko.observable(null)}return __extends(t,e),t.parameterFilterHelper=function(e,n){return f.values(e).some(function(e){if(n(e))return!0;if(e.descriptor instanceof c.ModeModuleParameterDescriptor){var r=e.childParameters[e.value()];return t.parameterFilterHelper(r,n)}var i=f.values(e.childParameters);return i.some(function(e){return t.parameterFilterHelper(e,n)})})},Object.defineProperty(t.prototype,"owner",{get:function(){return this.module_.owner},enumerable:!0,configurable:!0}),t.prototype.startValidating=function(){this.isValidating=!0,this.startValidatingAll(this.parameters)},t.prototype.startValidatingAll=function(e){var t=this;f.forEach(e,function(e){e.startValidating(),e.descriptor instanceof c.ModeModuleParameterDescriptor&&f.forEach(e.childParameters,function(e){t.startValidatingAll(e)})})},t.prototype.validate=function(){var e=[];if(!this.isValidating)return[];var t=[];this.validateParameters(this.parameters,t),e=e.concat(t);var n=[];return f.forEach(this.inputPorts,function(e){!e.isConnected()&&!e.optional&&n.push("Input port "+e.name+" is unconnected.")}),n.length>0&&e.push({errorMessages:n,erroneousObject:this}),this.schemaError()&&e.push(this.schemaError()),e},t.prototype.updateInfo=function(e){var t=this;if(this.id!==e.id)throw new Error("Updated GraphNode ID does not match previous ID.");this.startTime.value(e.startTime.value()),this.endTime.value(e.endTime.value()),this.elapsedTime.value(e.elapsedTime.value()),this.statusCode.value(e.statusCode.value()),this.statusDetails.value(e.statusDetails.value()),this.outputLog.endpoint(e.outputLog.endpoint()),this.errorLog.endpoint(e.errorLog.endpoint()),f.forEach(this.outputEndpoints,function(n,r){e.outputEndpoints[r]&&(n.endpoint(e.outputEndpoints[r].endpoint()),t.outputPorts[r]&&(t.outputPorts[r].outputEndpoint=e.outputEndpoints[r].endpoint()))}),f.forEach(e.outputPorts,function(e){t.outputPorts[e.name].visualizationEndpoint=e.visualizationEndpoint,t.outputPorts[e.name].schemaEndpoint=e.schemaEndpoint})},t.prototype.validateParameters=function(e,t){var n=this;f.forEach(e,function(e){if(!(e.descriptor instanceof c.ModeModuleParameterDescriptor)){var r=e.validate();r.length>0&&t.push({errorMessages:r,erroneousObject:e});return}var i=e.childParameters[e.value()];i&&n.validateParameters(i,t)})},Object.defineProperty(t.prototype,"name",{get:function(){return this.module_.name()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.module_.description()},enumerable:!0,configurable:!0}),t.prototype.remove=function(){e.prototype.remove.call(this),this.unlinkAllParameters();var t=!0},t.prototype._onReplacing=function(e){var n=this;if(e instanceof t){var r=e;r.dirtyStatusInfo.startDirtying(),r.dirtyStatusInfo.dirty([i.DirtyType.Rerun]),b(this.parameters,r.parameters),f.forEach(this.inputPorts,function(t){if(t.isInputPortForPublish()){n.parent.removePublishInputPort(t);if(t.name in e.inputPorts){var r=e.inputPorts[t.name];n.parent.addPublishInputPort(r)}}}),f.forEach(this.outputPorts,function(t){if(t.isOutputPortForPublish()){n.parent.removePublishOutputPort(t);if(t.name in e.outputPorts){var r=e.outputPorts[t.name];n.parent.addPublishOutputPort(r)}}}),f.forEach(r.parameters,function(e){e.dirtyDraftState.startDirtying()}),f.forEach(r.inputPorts,function(e){e.dirtyDraftState.startDirtying()})}},t.prototype.unlinkAllParameters=function(){f.forEach(this.parameters,function(e){return e.ensureUnlinked()})},t.prototype.dirtyModule=function(e){e===void 0&&(e=Object.create(null)),this.isDirty=!0,this.startTime.value(""),this.endTime.value(""),this.elapsedTime.value(""),this.statusCode.value(s.State.NotStarted),this.statusDetails.value(""),this.outputLog.endpoint(null),this.errorLog.endpoint(null),f.forEach(this.outputEndpoints,function(e,t){e.endpoint(null)}),e[this.id]=this,f.forEach(this.outputPorts,function(n,r){f.forEach(n.connectedPorts(),function(n,r){if(n.parent instanceof t){var i=n.parent;!i.isDirty&&!e[i.id]&&i.dirtyModule(e)}})}),this.schemaError(null)},t.prototype.addEndpoint=function(e){if(!this.outputEndpoints[e.Name]||!this.outputEndpoints[e.Name].endpoint().IsAuxiliary)this.outputEndpoints[e.Name]=new r.EndpointProperty(e.Name,ko.observable(e))},t.prototype.dirtyIfNeeded=function(e){var t=this;f.values(e.parameters).length===f.values(this.parameters).length?f.forEach(e.parameters,function(e,n){var r=t.parameters[n];r?r.dirtyIfNeeded(e):t.dirtyStatusInfo.dirty([i.DirtyType.Rerun])}):this.dirtyStatusInfo.dirty([i.DirtyType.Rerun]),f.values(e.inputPorts).length===f.values(this.inputPorts).length?f.forEach(e.inputPorts,function(e,n){var r=t.inputPorts[n];r?r.dirtyIfNeeded(e):t.dirtyStatusInfo.dirty([i.DirtyType.Rerun])}):this.dirtyStatusInfo.dirty([i.DirtyType.Rerun]),f.values(e.outputPorts).length!==f.values(this.outputPorts).length&&this.dirtyStatusInfo.dirty([i.DirtyType.Rerun])},t.prototype.isModuleNode=function(){return!0},t.prototype.createParametersForModule=function(e){return n.createModuleNodeParametersFromDescriptors(e.parameterDescriptors,this)},t}(a.GraphNode);t.ModuleNode=g}),define("generated/DataLabClient/CustomEvent",["require","exports"],function(e,t){var n=function(){function e(){this.listeners=[]}return e.prototype.attach=function(e){e&&this.listeners.push(e)},e.prototype.detach=function(e){e&&(this.listeners=this.listeners.filter(function(t){return t!==e}))},e.prototype.notify=function(e){this.listeners&&this.listeners.slice(0).forEach(function(t){return t(e)})},e}();t.CustomEvent=n}),define("generated/DataLabClient/Logging/IfxScenarioStopWatch",["require","exports","./Logging","../Constants","../Util"],function(e,t,n,r,i){function s(e,t,r,s){n.IfxScenario(e,(new Date).getTime(),t,null,i.createGuid(),r,s)}t.IfxScenario=s;var o=function(){function e(e,t){t===void 0&&(t={}),this.scenarioNameId=e,this.logData=t,this._started=!1,this._ended=!1,this._scenarioId=i.createGuid()}return Object.defineProperty(e.prototype,"scenarioId",{get:function(){return this._scenarioId},enumerable:!0,configurable:!0}),e.prototype.start=function(){if(this._started||this._ended)return;this._started=!0,n.setStopwatch(this),this.startTime=(new Date).getTime(),n.IfxScenario(this.scenarioNameId,this.startTime,0,null,this._scenarioId,this.logData)},e.prototype.stop=function(e){if(!this._started||this._ended)return;this._ended=!0,this.stopTime=(new Date).getTime(),n.setStopwatch(null),n.IfxScenario(this.scenarioNameId,this.stopTime,1,this.stopTime-this.startTime,this._scenarioId,e?$.extend(this.logData,e):this.logData)},e.prototype.error=function(e,t,r){if(!this._started||this._ended)return;this._ended=!0,this.stopTime=(new Date).getTime(),n.setStopwatch(null),n.IfxScenario(this.scenarioNameId,this.stopTime,1,this.stopTime-this.startTime,this._scenarioId,$.extend(this.logData,{error:i.errorToSerializableObject(e)}),!1,t,r)},e}();t.IfxScenarioStopWatch=o;var u=function(){function e(){}return Object.defineProperty(e.prototype,"scenarioId",{get:function(){return""},enumerable:!0,configurable:!0}),e.prototype.start=function(){},e.prototype.stop=function(e){},e.prototype.error=function(e,t,n){},Object.defineProperty(e,"instance",{get:function(){return e._instance=e._instance||new e},enumerable:!0,configurable:!0}),e}();t.NullScenarioStopWatch=u}),define("generated/DataLabClient/Contracts/V1/Common/Common",["require","exports","../../../Util","../../../LocalizedResources","../../../Logging/Logging"],function(e,t,n,r,i){function s(e){var t=e.split(".");if(t.length!==3)throw new Error(n.format(r.componentCount,t.length.toString()));return{workspaceId:t[0],familyId:t[1],instanceId:t[2]}}function o(e,t){var n=s(e);if(n.familyId!==t)throw new i.TracedException(r.parseResourceIdAndValidate,"parseResourceIdAndValidateFamily",{resourceId:e,familyId:t});return n}function u(e){return e.workspaceId+"."+e.familyId}t.parseResourceId=s,t.parseResourceIdAndValidateFamily=o,t.createGloballyUniqueFamilyId=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/Dataset",["require","exports","./Resource","../Constants"],function(e,t,n,r){var i=function(e){function t(t,n,i,s,o,u,a,f){e.call(this,t,n,i,s,o),this.category=r.ResourceCategory.Dataset,this.visualizeEndPoint=u,this.schemaEndPoint=a,this.schemaStatus=f}return __extends(t,e),t}(n.DataResource);return i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/TrainedModel",["require","exports","./Resource","../Constants"],function(e,t,n,r){var i=function(e){function t(t,n,i,s,o){e.call(this,t,n,i,s,o),this.category=r.ResourceCategory.TrainedModel}return __extends(t,e),t}(n.DataResource);return i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/Transform",["require","exports","./Resource","../Constants"],function(e,t,n,r){var i=function(e){function t(t,n,i,s,o){e.call(this,t,n,i,s,o),this.category=r.ResourceCategory.Transform}return __extends(t,e),t}(n.DataResource);return i}),define("generated/DataLabClient/Contracts/V1/Common/DataResource",["require","exports","./Common","../../../Model/Dataset","../../../Util","../../../Model/TrainedModel","../../../Model/Transform","../../../LocalizedResources","../../../Logging/Logging"],function(e,t,n,r,i,s,o,u,a){function c(e,t){var s=n.parseResourceIdAndValidateFamily(e.Id,e.FamilyId),o=n.createGloballyUniqueFamilyId(s),u=new r(e.Id,t.getDataTypeWithId(e.DataTypeId),i.parseJsonDate(e.CreatedDate),o,e.ServiceVersion,e.VisualizeEndPoint,e.SchemaEndPoint,e.SchemaStatus),a=d(e,u);return e.Owner==="Microsoft Corporation"?a.category+=f:a.category+=l,a}function h(e,t){var r=n.parseResourceIdAndValidateFamily(e.Id,e.FamilyId),o=n.createGloballyUniqueFamilyId(r),u=new s(e.Id,t.getDataTypeWithId(e.DataTypeId),i.parseJsonDate(e.CreatedDate),o,e.ServiceVersion);return d(e,u)}function p(e,t){var r=n.parseResourceIdAndValidateFamily(e.Id,e.FamilyId),s=n.createGloballyUniqueFamilyId(r),u=new o(e.Id,t.getDataTypeWithId(e.DataTypeId),i.parseJsonDate(e.CreatedDate),s,e.ServiceVersion);return d(e,u)}function d(e,t){t.name(e.Name),t.description(e.Description),t.downloadLocation=e.DownloadLocation,t.owner=e.Owner,t.isLatest(e.IsLatest),t.downloadLocation&&(t.downloadLocation.Size=e.Size),t.filename=e.UploadedFromFilename;if(e.PromotedFrom){var n=function(){a.error("Incorrect format for 'PromotedFrom' field: "+e.PromotedFrom)},r=e.PromotedFrom.split(".");if(r.length<5)return n(),t;var i=/^[A-F0-9]{32}$/i,s=/^[A-F0-9]{8}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{12}-[A-F0-9]+$/i;if(!i.test(r[0])||!i.test(r[2]))return n(),t;var o=r.length-2;if(r[o]&&!s.test(r[o]))return n(),t;t.experimentId=r.filter(function(e,t){return t<o}).join("."),t.moduleId=r[o],t.outputName=r.filter(function(e,t){return t>o}).join(".")}return t}var f="\\"+u.datasetCategorySamples,l="\\"+u.datasetCategoryUserCreated;t.deserializeDataset=c,t.deserializeTrainedModel=h,t.deserializeTransformModule=p}),define("generated/DataLabClient/Model/User",["require","exports"],function(e,t){var n=function(){function e(e){this.email=e.Email,this.name=e.Name,this.role=e.Role,this.userId=e.UserId,this.authorId=e.AuthorId,this.companyId=e.TenantId}return Object.defineProperty(e.prototype,"isWorkspaceOwner",{get:function(){return this.role==="Owner"},enumerable:!0,configurable:!0}),e}();t.User=n}),define("generated/DataLabClient/FeaturesExtensions",["require","exports","./Features","./Model/User"],function(e,t,n,r){function i(){var e=r.user,t=n.iPythonNotebookEnabled();return e?t&&e.isWorkspaceOwner:t}function s(){return i()&&n.notebookContextMenuEnabled()}function o(){return i()&&n.notebookListEnabled()}t.canEnableIPythonNotebookFeature=i,t.canEnableNotebookContextMenu=s,t.canEnableNotebookList=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/Module",["require","exports","./Resource"],function(e,t,n){var r=function(e){function t(t,n,r,i,s,o,u,a,f){i===void 0&&(i=[]),a===void 0&&(a=!1),f===void 0&&(f=!1),e.call(this,t,s,o,u),this.portDescriptors=r,Object.freeze(r),this.parameterDescriptors=i,Object.freeze(i),this.category=n,this.isLatestClientVersion=!0,this.isDeterministic=a,this.deterministicByDefault=f}return __extends(t,e),t}(n.Resource);return r}),define("generated/DataLabClient/Model/Schema",["require","exports"],function(e,t){(function(e){e[e.Accurate=0]="Accurate",e[e.Superset=1]="Superset",e[e.Inaccurate=2]="Inaccurate"})(t.SchemaCorrectness||(t.SchemaCorrectness={}));var n=t.SchemaCorrectness}),define("generated/DataLabClient/Model/SchemaUtils",["require","exports","./Schema","../Util"],function(e,t,n,r){function s(e){return _.clone(e)}function o(e){return e.columnAttributes.length}function u(e,t,n,r,i){return t===void 0&&(t={}),n===void 0&&(n={}),r===void 0&&(r=[]),i===void 0&&(i=0),{isInaccurate:i,columnAttributes:e,scoreColumns:t,labelColumns:n,featureChannels:r}}function a(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=s(e);i.isInaccurate=i.isInaccurate||0;if(t.length==0)return i;var u=e.columnAttributes.map(function(e){return e.name});t.forEach(function(e){return e.columnAttributes.forEach(function(e){return u.push(e.name)})});var a=c(u,o(e)),f=o(e);return t.forEach(function(e){e=s(e),e.isInaccurate=e.isInaccurate||0,i.isInaccurate=Math.max(i.isInaccurate,e.isInaccurate);if(a>0)for(var t=0;t<o(e);t++){var n=e.columnAttributes[t].name,c=u[t+f];n!=c&&l(e,t,c,!1)}f+=o(e),i.columnAttributes.push.apply(i.columnAttributes,e.columnAttributes);for(var h in e.scoreColumns)h in i.scoreColumns||(i.scoreColumns[h]=e.scoreColumns[h]);for(var h in e.labelColumns)h in i.labelColumns||(i.labelColumns[h]=e.labelColumns[h]);e.featureChannels.forEach(function(e){var t=r.first(i.featureChannels,function(t){return t.name==e.name},null);t?t.featureColumns.push.apply(t.featureColumns,e.featureColumns):i.featureChannels.push(e)})}),i}function f(e,t){var n=t.map(function(t){return e.columnAttributes[t]}),i=new r.StringSet(n.map(function(e){return e.name})),s=Object.create(null);r.forEach(e.scoreColumns,function(e,t){i.has(e)&&(s[t]=e)});var o=Object.create(null);r.forEach(e.labelColumns,function(e,t){i.has(e)&&(o[t]=e)});var a=[];return e.featureChannels.forEach(function(e){var t=e.featureColumns.filter(function(e){return i.has(e)});t.length>0&&a.push({name:e.name,isNormalized:e.isNormalized,featureColumns:t})}),u(n,s,o,a,e.isInaccurate)}function l(e,t,n,r){r===void 0&&(r=!0);var i,s,o=e.columnAttributes;if(typeof t=="string"){s=t;var u=o.some(function(e,t){return e.name==s?(i=t,!0):!1});if(!u)throw new Error("Couldn't find column named '"+s+"'")}else{i=t;if(i<0||i>=o.length)throw new Error("Out of bounds column index: "+i);s=o[i].name}if(r&&o.some(function(e){return e.name==n}))throw new Error("New column name already exists in schema: '"+n+"'");o[i].name=n;for(var a in e.labelColumns)e.labelColumns[a]==s&&(e.labelColumns[a]=n);for(var a in e.scoreColumns)e.scoreColumns[a]==s&&(e.scoreColumns[a]=n);e.featureChannels.forEach(function(e){for(var t=0;t<e.featureColumns.length;t++)e.featureColumns[t]==s&&(e.featureColumns[t]=n)})}function c(e,t,n,i){n===void 0&&(n=2),i===void 0&&(i="({0})");var s=e.length;if(s==t)return 0;var o=new r.StringSet;for(var u=0;u<t;u++)o.add(e[u]);var a=[];for(var u=t;u<s;u++)o.add(e[u])||a.push(u);return a.forEach(function(t){var s=e[t],u=n,a;do a=s+r.format(i,u.toString()),u++;while(!o.add(a));e[t]=a}),a.length}var i=function(){function e(e){this.error=new Error(e)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.error.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.error.message},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return String(this.error)},e}();t.SchemaComputationError=i,t.clone=s,t.numColumns=o,t.createSchema=u,t.concat=a,t.selectColumns=f,t.renameColumn=l}),define("generated/DataLabClient/Model/ColumnPickerQuery",["require","exports","../Util"],function(e,t,n){function o(e){var t=JSON.parse(e);if("isFilter"in t&&"rules"in t){var n=t.rules.map(function(e){var t=r[e.ruleType],n=[],o=[],u=[];return"columns"in e&&(n=e.columns),"columnTypes"in e&&(o=e.columnTypes.map(function(e){return i[e]})),"columnKinds"in e&&(u=e.columnKinds.map(function(e){return s[e]})),{ruleType:t,exclude:e.exclude,columns:n,columnTypes:o,columnKinds:u}});return{isFilter:t.isFilter,rules:n}}throw new Error("Invalid ruleset JSON: "+e.substr(0,1e3)+" )")}(function(e){e[e.ColumnNames=0]="ColumnNames",e[e.ColumnIndexes=1]="ColumnIndexes",e[e.ColumnTypes=2]="ColumnTypes",e[e.AllColumns=3]="AllColumns"})(t.RuleType||(t.RuleType={}));var r=t.RuleType;(function(e){e[e.String=0]="String",e[e.Integer=1]="Integer",e[e.Double=2]="Double",e[e.Boolean=3]="Boolean",e[e.DateTime=4]="DateTime",e[e.TimeSpan=5]="TimeSpan",e[e.Categorical=6]="Categorical",e[e.Numeric=7]="Numeric",e[e.All=8]="All"})(t.ColumnType||(t.ColumnType={}));var i=t.ColumnType;(function(e){e[e.Feature=0]="Feature",e[e.Score=1]="Score",e[e.Label=2]="Label",e[e.All=3]="All"})(t.ColumnKind||(t.ColumnKind={}));var s=t.ColumnKind;t.parseQuery=o;var u=function(){function e(e,t){var r=this;this.nameToIndexMap=null;var i;typeof e=="string"?i=o(e):i=e,this.query=i,this.source=t;if(i.rules.length==0)throw new Error("At least one rule must be specified");if(i.rules[0].exclude)throw new Error("The first rule must be an include rule.");if(i.isFilter){var s=new n.StringSet;i.rules.forEach(function(e){var n=r.getRuleColumns(t,e);e.exclude?s.exceptWith(n.map(function(e){return e.toString()})):s.unionWith(n.map(function(e){return e.toString()}))}),this.includedColumnIndexes=s.map(function(e){return parseInt(e)}).sort(function(e,t){return e-t})}else{if(i.rules.length!=1)throw new Error("Only one rule is allowed in non-filter mode.");this.includedColumnIndexes=this.getRuleColumns(t,i.rules[0])}}return e.prototype.getRuleColumns=function(e,t){switch(t.ruleType){case 0:return this.handleColumnNamesRule(e,t);case 1:return this.handleColumnIndexesRule(e,t);case 2:return this.handleColumnTypesRule(e,t);case 3:return e.columnAttributes.map(function(e,t){return t});default:throw new Error("Unhandled ruleType: "+t.ruleType)}},e.prototype.handleColumnNamesRule=function(e,t){var n=this;return this.nameToIndexMap||(this.nameToIndexMap=Object.create(null),this.source.columnAttributes.forEach(function(e,t){return n.nameToIndexMap[e.name]=t})),t.columns.filter(function(e){return e in n.nameToIndexMap}).map(function(e){return n.nameToIndexMap[e]})},e.prototype.handleColumnIndexesRule=function(e,t){var n=/^\s*(\d+)\s*$/,r=/^\s*(\d+)\s*\-\s*(\d+)\s*$/,i=e.columnAttributes.length,s=[];return t.columns.forEach(function(e){var t=e.match(n);if(t){var o=parseInt(t[1])-1;o>=0&&o<i&&s.push(o)}else{t=e.match(r);if(!t)throw new Error("Invalid index range expression: "+e);var u=parseInt(t[1])-1,a=parseInt(t[2])-1;if(a<u||u<0||a<0)throw new Error("Out of range column range: "+e);if(u<i&&a<i)for(var f=u;f<=a;f++)s.push(f)}}),s},e.prototype.handleColumnTypesRule=function(e,t){var r=[],i=!1,s=!1;t.columnTypes.forEach(function(e){switch(e){case 0:r.push("String");break;case 1:case 2:case 7:r.push("Numeric");break;case 3:r.push("Binary");break;case 4:case 5:r.push("Object");break;case 6:i=!0;break;case 8:s=!0;break;default:throw new Error("Unhandled ColumnType: "+e)}});var o=[];return e.columnAttributes.forEach(function(u,a){if(s||i&&u.type=="Categorical"||r.indexOf(u.type)>=0)for(var f=0;f<t.columnKinds.length;f++){var l=t.columnKinds[f],c;switch(l){case 0:c=u.isFeature;break;case 1:c=n.values(e.scoreColumns).indexOf(u.name)>=0;break;case 2:c=n.values(e.labelColumns).indexOf(u.name)>=0;break;case 3:c=!0;break;default:throw new Error("Unhandled ColumnKind: "+l)}if(c){o.push(a);break}}}),o},e}();t.ColumnSelection=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/DatasetNode",["require","exports","./GraphNode","./Property","../Util","./Port","./ModulePortDescriptor","../LocalizedResources","../Logging/Logging"],function(e,t,n,r,i,s,o,u,a){function c(e){var t=new o.ModuleOutputPortDescriptor(f,f,e.dataType,!1),n=new s.OutputPort(t);return n.outputEndpoint=e.downloadLocation,n.visualizationEndpoint=e.visualizeEndPoint,n.schemaEndpoint=e.schemaEndPoint,[n]}var f="dataset",l=function(e){function t(t,n){n===void 0&&(n=null),e.call(this,c(t),n),this.dataset=t,this.author=new r.StaticProperty("Submitted by",ko.observable(t.owner)),this.format=new r.StaticProperty("Format",ko.observable(t.dataType.toString())),this.createdOn=new r.StaticProperty("Created on",ko.observable(i.formatDate(t.created))),t.downloadLocation?(this.size=new r.StaticProperty("Size",ko.observable(i.formatDataSize(t.downloadLocation.Size))),this.viewDataset=new r.EndpointProperty("View dataset",ko.observable(t.downloadLocation))):(this.size=new r.StaticProperty("Size",ko.observable()),this.viewDataset=new r.EndpointProperty("View dataset",ko.observable()))}return __extends(t,e),Object.defineProperty(t.prototype,"datasetPort",{get:function(){return this.outputPorts[f]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.dataset.name()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.dataset.description()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this.dataset.owner},enumerable:!0,configurable:!0}),t.prototype.remove=function(){e.prototype.remove.call(this);var t=!0;a.customEvent({key:"RemoveDataset",type:"RemoveNode",data:t?this.dataset.name():u.NotAuthorizedToInstrument})},t}(n.GraphNode);return l}),define("generated/DataLabClient/Model/MetadataEditorSchemaPropagation",["require","exports","../LocalizedResources","./SchemaUtils","../Util"],function(e,t,n,r,i){function a(e,t,s,o,u,a){var f=r.clone(e);s!=0&&t.includedColumnIndexes.forEach(function(e){var t;switch(s){case 1:t="String";break;case 2:case 3:t="Numeric";break;case 4:t="Binary";break;case 5:case 6:t="Object";break;default:throw new Error("Unexpected DataType encountered")}f.columnAttributes[e].type=t}),o!=0&&t.includedColumnIndexes.forEach(function(e){var t=f.columnAttributes[e];switch(o){case 1:t.type!="Categorical"&&(t.type="Categorical",t.domain={categoryType:"double",isNullable:!0,categories:[]});break;case 2:t.type=="Categorical"&&(["short","ushort","int","uint","long","ulong","float","double"].indexOf(t.domain.categoryType)!=-1?t.type="Numeric":t.domain.categoryType=="string"?t.type="String":t.type="Object",t.domain=undefined);break;default:throw new Error("Unexpected Categorical value encountered")}}),u!=0&&l(f,t.includedColumnIndexes,u);if(a){var h=c(a);if(h.length!=(new i.StringSet(h)).size)throw new r.SchemaComputationError(n.SchemaErrorDuplicateColumnNames);if(h.length!=t.includedColumnIndexes.length)throw new r.SchemaComputationError(n.SchemaErrorNewColumnsCountMismatch);for(var p=0;p<h.length;p++)r.renameColumn(f,t.includedColumnIndexes[p],h[p],!1)}return f}function l(e,t,n){switch(n){case 0:break;case 1:t.forEach(function(t){return e.columnAttributes[t].isFeature=!0});break;case 2:t.length==1&&(e.labelColumns[f]=e.columnAttributes[t[0]].name,e.columnAttributes[t[0]].isFeature=!1);break;case 4:t.forEach(function(t){return e.columnAttributes[t].isFeature=!1});break;case 5:if(f in e.labelColumns){var r=e.labelColumns[f];t.some(function(t){return e.columnAttributes[t].name==r})&&delete e.labelColumns[f]}break;case 6:e.scoreColumns={};break;case 3:case 7:break;default:throw new Error("Unexpected Fields value encountered")}}function c(e){function s(e){return e.replace(/\s*$/,"")}var t=[],n="",r="",i=0;while(i<e.length){var o=e.charAt(i++);if(o==",")n+=s(r),t.push(n),n="",r="";else if(o!=" "&&o!="	"||n.length!=0||r.length!=0)if(o=='"'&&n.length==0&&r.length==0)while(i<e.length){o=e.charAt(i++);if(o=='"'){if(!(i<e.length&&e.charAt(i)=='"'))break;n+=o,i++}else n+=o}else r+=o}return n+=s(r),t.push(n),t}(function(e){e[e.Unchanged=0]="Unchanged",e[e.String=1]="String",e[e.Integer=2]="Integer",e[e.Double=3]="Double",e[e.Boolean=4]="Boolean",e[e.DateTime=5]="DateTime",e[e.TimeSpan=6]="TimeSpan"})(t.DataType||(t.DataType={}));var s=t.DataType;(function(e){e[e.Unchanged=0]="Unchanged",e[e.Categorical=1]="Categorical",e[e.NonCategorical=2]="NonCategorical"})(t.Categorical||(t.Categorical={}));var o=t.Categorical;(function(e){e[e.Unchanged=0]="Unchanged",e[e.Features=1]="Features",e[e.Labels=2]="Labels",e[e.Weights=3]="Weights",e[e.ClearFeatures=4]="ClearFeatures",e[e.ClearLabels=5]="ClearLabels",e[e.ClearScores=6]="ClearScores",e[e.ClearWeights=7]="ClearWeights"})(t.Fields||(t.Fields={}));var u=t.Fields;t.computeOutputSchema=a;var f="True Labels"}),define("generated/DataLabClient/Model/SchemaPropagationRule",["require","exports","./ModuleNode","../Util","./Schema","./SchemaUtils","./ColumnPickerQuery","./DatasetNode","../Logging/Logging","./MetadataEditorSchemaPropagation"],function(e,t,n,r,i,s,o,u,a,f){function c(){return new l}function h(e,t){return{computeOutputSchema:function(n,r){return b(n,r,e,function(){var e=[];for(var i=0;i<arguments.length;i++)e[i-0]=arguments[i];return t.apply(null,[n,r].concat(e))})}}}function p(e){return h([e],function(e,t,n){return n})}function d(e,t){return h([e],function(e,n,r){return s.concat(r,s.createSchema(t))})}function v(e,t){return h([e,t],function(e,t,n,r){return s.concat(n,r)})}function m(e,t){return h([t],function(t,n,r){var i=t.parameters[e].value();if(!i)return null;var u=new o.ColumnSelection(decodeURIComponent(i),r);return s.selectColumns(r,u.includedColumnIndexes)})}function g(e,t,n){return h([n],function(n,r,i){var u=n.parameters[t].value();if(u=="Inplace")return i;var a=n.parameters[e].value();if(!a)return null;var f=new o.ColumnSelection(decodeURIComponent(a),i),l=s.selectColumns(i,f.includedColumnIndexes);return u=="Append"?s.concat(i,l):l})}function y(e,t,i){var s;if(typeof t=="string"){var o=t;s=i.inputPorts[t];if(!s)throw new Error("Expected input port not found: '"+o+"'")}else s=t;var a=s.connectedOutputPort;if(a)if(a.parent instanceof u){if(a.schemaEndpoint)return e.getDatasetSchema(a.parent.dataset.id)}else if(a.parent instanceof n.ModuleNode){var f=a.parent,l=a.schemaEndpoint&&!f.isDirty,c=a.descriptor.schemaPropagationRule,h=r.when(null);return!l&&c&&(h=c.computeOutputSchema(f,e)),r.then(h,function(t){if(t)return t;if(a.schemaEndpoint){var n=e.getModuleOutputSchema(f.executedExperimentId,f.id,a.name);return n=r.then(n,function(e){return f.isDirty&&(e.isInaccurate=2),e}),n}return null})}return r.when(null)}function b(e,t,n,i){var o=n.map(function(n){return y(t,n,e)}),u;return o.length>1?u=r.when.apply(null,o):u=o[0],r.then(u,function(){var t=[];for(var n=0;n<arguments.length;n++)t[n-0]=arguments[n];if(t.every(function(e){return e!=null}))try{return i.apply(null,t)}catch(r){r instanceof s.SchemaComputationError?t.every(function(e){return!e.isInaccurate})&&e.schemaError({errorMessages:[r.message],erroneousObject:e}):a.error("exception thrown during schema computation","applyFunctionToInputSchemas",JSON.stringify({message:r.message,moduleName:e.name}))}return null})}function E(e,t,n,r){var i;if(typeof r=="undefined")i=n;else{var s=n;i=h(s,r)}w[e+"/"+t]=i}function S(e,t){var n=e+"/"+t;return w[n]||c()}var l=function(){function e(){}return e.prototype.computeOutputSchema=function(e,t){var n=this,i=r.filter(e.inputPorts,function(e){return e.isDatasetDataType()&&e.isConnected()});if(i.length==0)return r.when(null);var s=i.map(function(e){return e.name});return b(e,t,s,function(){var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.unionOfSchemas(e)})},e.prototype.unionOfSchemas=function(e){var t=s.clone(e[0]);t.isInaccurate=2;if(e.length>1){var n=new r.StringSet(t.columnAttributes.map(function(e){return e.name}));for(var i=1;i<e.length;i++)e[i].columnAttributes.forEach(function(e){n.add(e.name)&&t.columnAttributes.push(_.clone(e))})}return t.columnAttributes.forEach(function(e){return e.isInaccurate=!0}),t},e}();t.computeSchemaOfInputPort=y;var w={};t.getSchemaPropagationRule=S,E("Add Columns","Combined dataset",v("Left dataset","Right dataset")),E("Add Rows","Results dataset",p("Dataset1")),E("Apply Filter","Results dataset",m("Column set","Dataset")),E("Assign to Clusters","Results dataset",["Dataset"],function(e,t,n){var r="Check for Append or Uncheck for Result Only",i=e.parameters[r].value(),o=s.createSchema([{name:"Assignment",type:"Numeric",isFeature:!0}]);return i?s.concat(n,o):o}),E("Clip Values","Results dataset",["Dataset"],function(e,t,n){var r=e.parameters["Overwrite flag"].value(),i=e.parameters["Add indicator columns"].value();if(r&&!i)return n;var o=s.clone(n),u=[];return o.columnAttributes.forEach(function(e){u.push(e),r||u.push({name:e.name+"_clipped_value",type:e.type,isFeature:!0}),i&&u.push({name:e.name+"_clipped",type:"Binary",isFeature:!0})}),o.columnAttributes=u,o});for(var x in["CSV","TSV","ARFF","SVMLight","Dataset"]){var T="Convert to "+x;E(T,"Results dataset",p("Dataset"))}E("Group Categorical Values","Results dataset",g("Selected columns","Output mode","Dataset")),E("Indicator Values","Results dataset",["Dataset"],function(e,t,n){var r=e.parameters["Overwrite categorical columns"].value();if(r)return n;var i=e.parameters["Categorical columns to convert"].value();if(!i)return null;var u=new o.ColumnSelection(decodeURIComponent(i),n),a=s.selectColumns(n,u.includedColumnIndexes);return s.concat(n,a)}),E("Linear Correlation","Results dataset",p("Dataset")),E("Metadata Editor","Results dataset",["Dataset"],function(e,t,n){var r=e.parameters.Column.value();if(!r)return null;var i=new o.ColumnSelection(decodeURIComponent(r),n),s=e.parameters["Data Type"].value(),u=f.DataType[s],a=e.parameters.Categorical.value(),l=f.Categorical[a],c=e.parameters.Fields.value(),h=f.Fields[c],p=e.parameters["New Column Name"].value();return f.computeOutputSchema(n,i,u,l,h,p)}),E("Missing Values Scrubber","Results dataset",["Dataset"],function(e,t,n){var r=s.clone(n),i=e.parameters["Cols with all MV"].value(),o=e.parameters["MV indicator column"].value();if(i!="KeepColumns"||o!="DoNotGenerate")r.isInaccurate=1;i!="KeepColumns"&&r.columnAttributes.forEach(function(e){return e.isInaccurate=!0});if(o!="DoNotGenerate"){var u=r.columnAttributes.map(function(e){return{name:e.name+"_IsMissing",type:"Binary",isFeature:!0,isInaccurate:!0}}),a=s.createSchema(u);r=s.concat(r,a)}return r}),E("Partition and Sample","Results dataset",p("Dataset")),E("Probability Function Evaluation","Results dataset",g("Column set","Result mode","Dataset")),E("Project Columns","Results dataset",m("Select Columns","Dataset")),E("Quantize","Quantized dataset",g("Comma-separated list of columns to bin","Output mode","Dataset")),E("Remove Duplicate Rows","Results dataset",p("Dataset")),E("Score Model","Scored dataset",d("Dataset",[{name:"Scored Labels",type:"String",isFeature:!0},{name:"Scored Probabilities",type:"Numeric",isFeature:!0}])),E("Split","Results dataset1",p("Dataset")),E("Split","Results dataset2",p("Dataset")),E("Transform Data By Scaling","Transformed dataset",p("Dataset"))}),define("generated/DataLabClient/Model/CommunityExperiment",["require","exports"],function(e,t){(function(e){e[e.Private=0]="Private",e[e.Public=1]="Public"})(t.CommunityExperimentVisibility||(t.CommunityExperimentVisibility={}));var n=t.CommunityExperimentVisibility;(function(e){e[e.User=0]="User",e[e.Company=1]="Company"})(t.CommunityExperimentAuthor||(t.CommunityExperimentAuthor={}));var r=t.CommunityExperimentAuthor,i=function(){function e(e,t,n){this.id=t,this.name=n;var r={0:"user",1:"company"};this.owner_type=r[e||0]}return e}();t.Owner=i;var s=function(){function e(e,t,n,r,i,s,o,u,a){this.sourceExperiment=e,this.experimentName=t,this.summary=n,this.description=r,this.visibility=i,this.owner=s,this.tags=o,this.thumbnail=u,this.imageUrl=a}return e}();t.PublishableExperiment=s}),define("generated/DataLabClient/Contracts/V1/Common/Module",["require","exports","./Common","../../../Model/Module","../../../Model/ModuleParameterDescriptor","../../../Model/ModulePortDescriptor","../../../Model/SchemaPropagationRule","../Constants","../../../Util","../../../Model/CommunityExperiment"],function(e,t,n,r,i,s,o,u,a,f){function l(e,t){var i=Object.create(null);e.ScriptsDefaultContents&&e.ScriptsDefaultContents.forEach(function(e){i[e.Name]=e.Value});var f=e.ModuleInterface.Parameters.map(function(t){return c(t,i,e.CloudSystem)}),l=e.ModuleInterface.InputPorts.map(function(e){var n=e.Types.map(function(e){return t.getDataTypeWithId(e.Id)});return new s.ModuleInputPortDescriptor(e.Name,e.FriendlyName,n,e.IsOptional,e.Description)}),h=e.ModuleInterface.OutputPorts.map(function(n){var r=new s.ModuleOutputPortDescriptor(n.Name,n.FriendlyName,t.getDataTypeWithId(n.Type.Id),n.IsOptional,n.Description);return r.schemaPropagationRule=o.getSchemaPropagationRule(e.Name,n.Name),r}),p=l.concat(h),d=e.FamilyId===u.DataReferenceModuleFamilyId?null:n.createGloballyUniqueFamilyId(n.parseResourceIdAndValidateFamily(e.Id,e.FamilyId)),v=new r(e.Id,e.Category,p,f,a.parseJsonDate(e.CreatedDate),d,e.ServiceVersion,e.IsDeterministic,e.DeterministicByDefault);return v.description(e.Description),v.name(e.Name),v.isLatest(e.IsLatest),v.owner=e.Owner,v.clientVersion=e.ClientVersion?e.ClientVersion:"",v.moduleLanguage={version:e.ModuleLanguage.Version,language:e.ModuleLanguage.Language},v}function c(e,t,n){t===void 0&&(t=Object.create(null)),n===void 0&&(n=null);var r,s;e.HasDefaultValue?s=e.DefaultValue:e.ParameterType===u.ModuleParameterType.Script&&e.Name in t&&(s=t[e.Name]);if(e.ParameterType===u.ModuleParameterType.Enumerated){var o=null;e.ModeValuesInfo&&(o=h(e.ModeValuesInfo)),r=i.ChoiceModuleParameterDescriptor.CreateDescriptor(e.Name,e.FriendlyName,e.Description,e.IsOptional,e.ParameterRules,o,s)}else e.ParameterType===u.ModuleParameterType.Mode?r=new i.ModeModuleParameterDescriptor(e.Name,e.FriendlyName,h(e.ModeValuesInfo,t),e.Description,e.IsOptional,e.ParameterRules,s):e.ParameterType===u.ModuleParameterType.Script?r=new i.ScriptModuleParameterDescriptor(e.Name,e.FriendlyName,e.Description,e.ScriptName,s,e.IsOptional,e.ParameterRules):e.ParameterType===u.ModuleParameterType.Credential?r=new i.CredentialModuleParameterDescriptor(e.CredentialDescriptor,e.Name,e.FriendlyName,e.IsOptional,e.Description,e.ParameterRules):e.ParameterType===u.ModuleParameterType.ColumnPicker?r=new i.ColumnPickerModuleParameterDescriptor(e.Name,e.FriendlyName,e.ColumnPickerFor,e.SingleColumnSelection,e.ColumnSelectionCategories,e.Description,e.ParameterRules,e.IsOptional,e.DefaultValue):e.ParameterType===u.ModuleParameterType.ParameterRange?r=new i.ParameterRangeModuleParameterDescriptor(e.Name,e.FriendlyName,e.IsInt,e.MinLimit,e.MaxLimit,e.SliderMin,e.SliderMax,e.DefaultValue,e.IsLog,e.Description):e.ParameterType===u.ModuleParameterType.Boolean?r=new i.BooleanModuleParameterDescriptor(e.Name,e.FriendlyName,e.Description,[new i.ChoiceParameterValue("True"),new i.ChoiceParameterValue("False")],s):e.ParameterType===u.ModuleParameterType.DataGatewayName?r=new i.DataGatewayNameModuleParameterDescriptor(e.Name,e.FriendlyName,e.Description,e.IsOptional):r=new i.ModuleParameterDescriptor(e.Name,e.FriendlyName,s,e.Description,e.IsOptional,e.ParameterRules,[],e.ParameterType);return e.Description&&(r.description=e.Description),r}function h(e,t){var n={};return a.forEach(e,function(e,r){var s=!1,o=e.Parameters.map(function(e){var n=c(e,t);if(n instanceof i.ModeModuleParameterDescriptor){if(s)throw new Error("Mode parameter descriptor cannot have multiple child mode parameter descriptors.");s=!0}return n});n[r]=new i.ModeValueInfo(e.InterfaceString,o,e.DisplayValue)}),n}t.deserializeModule=l,t.deserializeModuleParameterDescriptor=c,t.deserializeModeValuesInfo=h});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/AnnotationNode",["require","exports","./GraphNode","../Logging/Logging"],function(e,t,n,r){var i=function(e){function t(t){var n=this;e.call(this,[],t.id),this.annotation=t;var r=this.annotation.clientData();this.x(r.topLeftX),this.y(r.topLeftY),this.width(r.width),this.height(r.height),ko.computed(function(){if(!n.annotation.isCollapsed()){var e={topLeftX:n.x(),topLeftY:n.y(),width:n.width(),height:n.height()};n.annotation.clientData(e)}}),this.dirtyDraftState.addChild(this.annotation.dirtyAnnotationStatus)}return __extends(t,e),t.prototype.remove=function(){e.prototype.remove.call(this),r.customEvent({key:"RemoveAnnotation",type:"RemoveNode",data:this.annotation.id})},t}(n.GraphNode);return i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/TrainedModelNode",["require","exports","./GraphNode","./Property","./Port","../Util","../LocalizedResources","../Logging/Logging","./ModulePortDescriptor"],function(e,t,n,r,i,s,o,u,a){function c(e){var t=new a.ModuleOutputPortDescriptor(f,f,e.dataType,!1),n=new i.OutputPort(t);return n.outputEndpoint=e.downloadLocation,[n]}var f="trained model",l=function(e){function t(t,n){n===void 0&&(n=null),e.call(this,c(t),n),this.trainedModel=t,this.author=new r.StaticProperty(o.resourceAuthor,ko.observable(t.owner)),this.format=new r.StaticProperty(o.resourceFormat,ko.observable(t.dataType.toString())),this.createdOn=new r.StaticProperty(o.resourceCreatedOn,ko.observable(s.formatDate(t.created))),this.trainingExperiment=new r.LinkProperty(o.trainingExperimentLink,t.experimentId)}return __extends(t,e),Object.defineProperty(t.prototype,"trainedModelPort",{get:function(){return this.outputPorts[f]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.trainedModel.name()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.trainedModel.description()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this.trainedModel.owner},enumerable:!0,configurable:!0}),t.prototype.remove=function(){e.prototype.remove.call(this);var t=!0;u.customEvent({key:"RemoveTrainedModel",type:"RemoveNode",data:t?this.trainedModel.name():o.NotAuthorizedToInstrument})},t}(n.GraphNode);return l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/TransformNode",["require","exports","./GraphNode","./Property","./Port","../Util","../LocalizedResources","../Logging/Logging","./ModulePortDescriptor"],function(e,t,n,r,i,s,o,u,a){function c(e){var t=new a.ModuleOutputPortDescriptor(f,f,e.dataType,!1),n=new i.OutputPort(t);return n.outputEndpoint=e.downloadLocation,[n]}var f="transformation",l=function(e){function t(t,n){n===void 0&&(n=null),e.call(this,c(t),n),this.transform=t,this.author=new r.StaticProperty(o.resourceAuthor,ko.observable(t.owner)),this.format=new r.StaticProperty(o.resourceFormat,ko.observable(t.dataType.toString())),this.createdOn=new r.StaticProperty(o.resourceCreatedOn,ko.observable(s.formatDate(t.created))),this.trainingExperiment=new r.LinkProperty(o.trainingExperimentLink,t.experimentId)}return __extends(t,e),Object.defineProperty(t.prototype,"transformPort",{get:function(){return this.outputPorts[f]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.transform.name()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.transform.description()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this.transform.owner},enumerable:!0,configurable:!0}),t.prototype.remove=function(){e.prototype.remove.call(this);var t=!0;u.customEvent({key:"RemoveTransform",type:"RemoveNode",data:t?this.transform.name():o.NotAuthorizedToInstrument})},t}(n.GraphNode);return l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/WebServicePortNode",["require","exports","../Util","./Parameter","./ModuleParameterDescriptor","./GraphNode","./Port","./ModulePortDescriptor","../LocalizedResources"],function(e,t,n,r,i,s,o,u,a){function v(e,t){if(!t)throw new Error("WebServicePortNode: dataTypeRegistry cannot be null");if(e===0){var n=new u.ModuleOutputPortDescriptor(f,f,t.getDataTypeWithId("Dataset"),!1),r=new o.OutputPort(n);return r.isWebServicePort=!0,[r]}var i=new u.ModuleInputPortDescriptor(l,l,[t.getDataTypeWithId("Dataset"),t.getDataTypeWithId("ILearnerDotNet"),t.getDataTypeWithId("ITransformDotNet")],!1),s=new o.InputPort(i);return s.isWebServicePort=!0,[s]}function m(e,t){if(e instanceof o.InputPort&&t instanceof o.OutputPort)return{input:e,output:t};if(e instanceof o.OutputPort&&t instanceof o.InputPort)return{input:t,output:e};throw new Error("Expected one InputPort and one OutputPort")}var f="Web service input",l="Web service output";(function(e){e[e.Input=0]="Input",e[e.Output=1]="Output"})(t.WebServicePortType||(t.WebServicePortType={}));var c=t.WebServicePortType,h=function(){function e(e,t){if(!t)throw new Error("WebServicePortNameValidator: parent argument can't be null");this.type=e,this.parent=t}return e.prototype.validate=function(e){var t=this;if(!this.parent.getWebServicePortNodes||!e)return null;var r=n.filter(this.parent.getWebServicePortNodes(this.type),function(n){return n===t.parent?!1:n.nameParameter.value()===e});return r.length>0?n.format(a.validationDuplicateWebServicePortNameFailed,e):null},e}();t.WebServicePortNameValidator=h;var p=function(e){function t(t,n,r){r===void 0&&(r=undefined),e.call(this,t,r),this.isLinked=ko.computed(function(){return!1}),this.parent=n}return __extends(t,e),t}(r.Parameter);t.WebServicePortNodeParameter=p;var d=function(e){function t(t,n,r,s){e.call(this,v(t,s),n),this.connectedPort=null,this.type=t,this.port=t===0?this.ports[f]:this.ports[l],this.getWebServicePortNodes=r;var o=new i.ModuleParameterDescriptor("Name","Name","",null,!0);o.validators.push(new h(t,this)),this.nameParameter=new p(o,this,this.getDefaultValue())}return __extends(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.type===0?f:l},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.type===0?f:l},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return""},enumerable:!0,configurable:!0}),t.prototype.connectTo=function(e){if(this.connectedPort){if(this.connectedPort===e)return;this.parent.connectionRemoved.notifySubscribers(m(this.port,this.connectedPort))}this.parent.connectionAdded.notifySubscribers(m(this.port,e)),this.connectedPort=e},t.prototype.getDefaultValue=function(){var e=this;if(!this.getWebServicePortNodes)return null;var t={};n.forEach(this.getWebServicePortNodes(this.type),function(n){if(n===e)return;var r=n.nameParameter.value();if(!r)return;t[r]=!0});var r=this.type===0?"input":"output",i=1;for(;t[r+i];i++);return r+i},t}(s.GraphNode);t.WebServicePortNode=d}),define("generated/DataLabClient/Model/ModelUtils",["require","exports","./Module","./ModuleNode","./Dataset","./DatasetNode","../LocalizedResources","./TrainedModel","./TrainedModelNode","./Transform","./TransformNode"],function(e,t,n,r,i,s,o,u,a,f,l){function c(e,t){if(e instanceof n)return new r.ModuleNode(e,t);if(e instanceof i)return new s(e);if(e instanceof u)return new a(e);if(e instanceof f)return new l(e);throw new Error(o.unknownResourceType)}t.createNodeForResource=c});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/Experiment",["require","exports","../ObservableMap","./Parameter","../Util","../Disposable","../Dirtyable","./DatasetNode","./AnnotationNode","./TrainedModelNode","./TransformNode","../Validation","./Property","../Constants","../Contracts/V1/Constants","../Features","../StateUtil","./WebServicePortNode","./ModuleNode","./ModelUtils","../LocalizedResources","../Logging/Logging"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){(function(e){e[e.NotVisited=0]="NotVisited",e[e.BeingVisited=1]="BeingVisited",e[e.BeenVisited=2]="BeenVisited"})(t.CycleDetectionVisitationStatus||(t.CycleDetectionVisitationStatus={}));var S=t.CycleDetectionVisitationStatus,x=function(){function e(){return{InputPortsForPublish:[],OutputPortsForPublish:[]}}return e}();t.ExperimentPublishInfo=x;var T=function(e){function t(r,s,u,a){var f=this;r===void 0&&(r=null),s===void 0&&(s=null),u===void 0&&(u=null),a===void 0&&(a=null),e.call(this),this.etag=ko.observable(null),this.schemaVersion=ko.observable(1),this.nodes=n.observableMap(),this.parameters=n.observableMap(),this.connectionAdded=new ko.subscribable,this.connectionRemoved=new ko.subscribable,this.editVersion=ko.observable(0),this.experimentParameterInUse=!1,this.wasSetAsWebServiceExperiment=ko.observable(!1),this.hasMissingResources=!1,this.isPartialRun=ko.observable(!1),this.customModuleAdded=ko.observable(null),this.startTime=ko.observable(),this.endTime=ko.observable(),this.statusCode=ko.observable(d.State.InDraft),this.statusDetails=ko.observable(),this.tags=ko.observable([]);var l=new Date,y=l.toLocaleDateString(),b=i.format(w.ExperimentDefaultTitle,y);this.description=c.validatableObservable(b,t.validateDescription),this.summary=new h.EditableTextProperty(w.experimentSummary,w.experimentSummaryPlaceholder,ko.observable(""),this),this.originalExperimentDocumentation=new h.LinkProperty(w.originalExperimentDocumentation,""),this.experimentId=ko.observable(r),this.parentExperimentId=s,this.publishedWebServiceGroupId=a,this.publishInfo=new x,this.isDraft=ko.computed(function(){return f.statusCode()===d.State.InDraft}),this.dirtyStatus=new o,this.dirtyStatus.isDirty.subscribe(function(e){e&&(f.isDraft()||v.dirtyLabelsInDirtyablesEnabled()&&m.isFinishedState(f.statusCode()))&&f.editVersion(f.editVersion()+1)}),this.dirtyAnnotationStatus=new o,this.dirtyAnnotationStatus.startDirtying(),this.dirtyForPublishStatus=new o,this.allowPublish=ko.computed(function(){return m.isFinishedState(f.statusCode())&&!f.dirtyForPublishStatus.isDirty()}),this.connectionAdded.subscribe(function(e){f.findCycles(),f.dirtyStatus.dirty([p.DirtyType.Rerun]),f.dirtyForPublishStatus.dirty()}),this.connectionRemoved.subscribe(function(e){f.findCycles(),f.dirtyStatus.dirty([p.DirtyType.Rerun]),f.dirtyForPublishStatus.dirty()}),this.description.subscribe(function(){f.dirtyStatus.dirty()}),this.datasets=Object.create(null),this.trainedModels=Object.create(null),this.transformModules=Object.create(null),this.annotations=Object.create(null),this.isEmpty=ko.computed(function(){return f.nodes.count()===0}),this.parametersWithName=function(e){var t=[];return f.parameters.forEach(function(n){n.name===e&&t.push(n)}),t},this.disableNodesUpdate=ko.observable(!1);var E=[];E.push(new h.StaticProperty(w.PropertyPanelStartTime,this.startTime)),E.push(new h.StaticProperty(w.PropertyPanelEndTime,this.endTime)),E.push(new h.StaticProperty(w.PropertyPanelStatusCode,this.statusCode)),E.push(new h.StaticProperty(w.PropertyPanelStatusDetails,this.statusDetails)),this.publishedWebServiceGroupId&&(this.publishedWebServiceLinkProperty=new h.LinkProperty(w.goToWebService,this.publishedWebServiceGroupId),E.push(this.publishedWebServiceLinkProperty)),this.parentExperimentId&&(this.priorRunLinkProperty=new h.LinkProperty(w.priorRun,this.parentExperimentId),E.push(this.priorRunLinkProperty)),this.properties=ko.observableArray(E),this.isLeaf=ko.observable(!0),this.isWebServiceExperiment=ko.computed({read:function(){var e=f.wasSetAsWebServiceExperiment();if(!e){var t=i.first(f.nodes(),function(e){return e instanceof g.WebServicePortNode},null);t!=null&&(e=!0)}return e||(e=f.parameters.count()>0),e},write:function(e){f.wasSetAsWebServiceExperiment(e)}})}return __extends(t,e),Object.defineProperty(t.prototype,"experimentIdForLogging",{get:function(){var e=this.experimentId();return e?e:this.parentExperimentId?this.parentExperimentId:(this.tempId||(this.tempId=i.createGuid()),this.tempId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"temporaryId",{get:function(){return this.tempId},enumerable:!0,configurable:!0}),t.prototype.addPublishOutputPort=function(e){this.publishInfo.OutputPortsForPublish.length>0&&(this.publishInfo.OutputPortsForPublish.forEach(function(e){e.isOutputPortForPublish(!1)}),this.publishInfo.OutputPortsForPublish=[]),this.publishInfo.OutputPortsForPublish.push(e),e.isOutputPortForPublish(!0),this.dirtyStatus.dirty([p.DirtyType.Rerun])},t.prototype.addPublishInputPort=function(e){this.publishInfo.InputPortsForPublish.length>0&&(this.publishInfo.InputPortsForPublish.forEach(function(e){e.isInputPortForPublish(!1)}),this.publishInfo.InputPortsForPublish=[]),this.publishInfo.InputPortsForPublish.push(e),e.isInputPortForPublish(!0),this.dirtyStatus.dirty([p.DirtyType.Rerun])},t.prototype.getWebServicePortNodes=function(e){return i.filter(i.values(this.nodes()),function(t){if(t instanceof g.WebServicePortNode){var n=t;return n.type===e}return!1})},t.prototype.getModules=function(){return i.values(this.nodes()).filter(function(e){return e instanceof y.ModuleNode})},t.prototype.getDatasets=function(){return i.filter(this.nodes(),function(e){return e instanceof u})},t.prototype.getAnnotations=function(){return i.values(this.nodes()).filter(function(e){return e instanceof a})},Object.defineProperty(t.prototype,"storageUsedByDatasets",{get:function(){return this.getDatasets().filter(function(e){return e.dataset.downloadLocation&&e.dataset.downloadLocation.Size>0}).map(function(e){return e.dataset.downloadLocation.Size}).reduce(function(e,t){return e+t},0)},enumerable:!0,configurable:!0}),t.prototype.firstModuleWithCredentials=function(){return i.first(this.getModules(),function(e){return e.hasCredentials()},null)},t.prototype.firstCustomModule=function(){return i.first(this.getModules(),function(e){return e.isCustomModule()},null)},t.prototype.getPublishInputPorts=function(){var e=i.filter(this.getWebServicePortNodes(0),function(e){return e.port.connectedNonWebServicePorts().length>0});return e&&e.length>0?i.map(e,function(e){return e.port.connectedNonWebServicePorts()[0]}):this.publishInfo.InputPortsForPublish.length>0?this.publishInfo.InputPortsForPublish:[]},t.prototype.getPublishOutputPorts=function(){var e=i.filter(this.getWebServicePortNodes(1),function(e){return e.port.connectedNonWebServicePorts().length>0});return e&&e.length>0?i.map(e,function(e){return e.port.connectedNonWebServicePorts()[0]}):this.publishInfo.OutputPortsForPublish.length>0?this.publishInfo.OutputPortsForPublish:[]},t.prototype.removePublishOutputPort=function(e){var t=this.publishInfo.OutputPortsForPublish.indexOf(e);e.isOutputPortForPublish(!1),this.publishInfo.OutputPortsForPublish.splice(t,1),this.dirtyStatus.dirty([p.DirtyType.Rerun])},t.prototype.removePublishInputPort=function(e){var t=this.publishInfo.InputPortsForPublish.indexOf(e);e.isInputPortForPublish(!1),this.publishInfo.InputPortsForPublish.splice(t,1),this.dirtyStatus.dirty([p.DirtyType.Rerun])},t.validateDescription=function(e){return/\S/.test(e)?null:w.ErrorExperimentNameMustContainAtLeastOneNonWhitespaceCharacter},t.prototype.validatePortsForPublishAndSetSubgraph=function(){var e=this,t=this.getPublishInputPorts(),n=this.getPublishOutputPorts();if(t.length===1&&n.length===0||t.length===0&&n.length===1)return!0;var r;if(!v.multiInputSupportEnabled()){if(t.length>1)return!1;var s=[n[0].parent.id];r=!1;while(s.length>0&&!r){var o=s.shift(),u=this.nodes.lookup(o);i.forEach(u.inputPorts,function(e){e.connectedOutputPort&&(e.isDatasetDataType()?t.indexOf(e)<0?s.indexOf(e.connectedOutputPort.parent.id)<0&&s.push(e.connectedOutputPort.parent.id):r=!0:s.indexOf(e.connectedOutputPort.parent.id)<0&&s.push(e.connectedOutputPort.parent.id))})}}else r=!0,i.forEach(n,function(n){var s=[n.parent.id],o=!1;while(s.length>0&&!o){var u=s.shift(),a=e.nodes.lookup(u);i.forEach(a.inputPorts,function(e){e.connectedOutputPort&&(e.isDatasetDataType()?t.indexOf(e)<0?s.indexOf(e.connectedOutputPort.parent.id)<0&&s.push(e.connectedOutputPort.parent.id):o=!0:s.indexOf(e.connectedOutputPort.parent.id)<0&&s.push(e.connectedOutputPort.parent.id))})}r=r&&o});return r},t.prototype.addModule=function(e,t,n,r,i,s){s===void 0&&(s=!1);var o=new y.ModuleNode(e,t,i);return o.isFromExistingExperiment=s,this.addNode(o,n,r),o},t.prototype.addDataset=function(e,t,n,r){r===void 0&&(r=null);var i=new u(e,r);return this.addNode(i,t,n),i},t.prototype.addTrainedModel=function(e,t,n,r){r===void 0&&(r=null);var i=new f(e,r);return this.addNode(i,t,n),i},t.prototype.addWebServicePort=function(e,t,n,r,i,s,o){var u=this,a=new g.WebServicePortNode(e,r,function(e){return u.getWebServicePortNodes(e)},i);return this.addNode(a,t,n),s&&a.port.connectTo(s),o&&a.nameParameter.value(o),a},t.prototype.addTransformModule=function(e,t,n,r){r===void 0&&(r=null);var i=new l(e,r);return this.addNode(i,t,n),i},t.prototype.addAnnotation=function(e){var t=new a(e);return this.addNode(t,null,null),t},t.prototype.addParameter=function(e,t,n){var i=new r.WebServiceParameter(e,t,n,this);if(this.parameters.lookup(i.name))throw new Error("An experiment parameter with the given name already exists");return this.parameters.put(i.id,i),this.dirtyStatus.dirty([p.DirtyType.Rerun]),i},t.prototype.promoteModuleParameter=function(e){var t=e.descriptor.friendlyName,n=0;for(;;){if(i.first(this.parameters(),function(e){return e.name===t},null)===null)break;n++,t=e.descriptor.friendlyName+n}var r=this.addParameter(e.descriptor,t,null);return e.ensureUnlinked(),e.linkToWebServiceParameter(r),this.dirtyStatus.dirty([p.DirtyType.Rerun]),r},t.prototype.removeWebServiceParameter=function(e){e.unlinkAll(),this.parameters.remove(e.id),this.dirtyStatus.dirty([p.DirtyType.Rerun])},t.prototype.addNode=function(e,t,n){if(e instanceof u){var r=e.dataset;if(this.datasets[r.id])throw new Error("Dataset with id "+r.id+" already in experiment.");this.datasets[r.id]=e}if(e instanceof f){var s=e.trainedModel;if(this.trainedModels[s.id])throw new Error("TrainedModel with id "+s.id+" already in experiment.");this.trainedModels[s.id]=e}if(e instanceof l){var o=e.transform;if(this.transformModules[o.id])throw new Error("Transform with id "+o.id+" already in experiment.");this.transformModules[o.id]=e}e.parent&&e.parent._removeNode(e),t&&e.x(t),n&&e.y(n),this.nodes.put(e.id,e),e.parent=this,e.dirtyDraftState.startDirtying();if(e instanceof a){e.annotation.dirtyAnnotationStatus.startDirtying(),this.dirtyAnnotationStatus.addChild(e.dirtyDraftState);var c=e.annotation;if(this.annotations[c.id])throw new Error("Annotaion with id "+c.id+" already exists.");this.annotations[c.id]=e}else this.dirtyStatus.addChild(e.dirtyDraftState),e instanceof y.ModuleNode&&this.dirtyForPublishStatus.addChild(e.dirtyForPublish),this.dirtyStatus.dirty([p.DirtyType.Rerun]),this.dirtyForPublishStatus.dirty(),this.dirtyStatus.started&&e instanceof y.ModuleNode&&(e.dirtySinceLastRun.startDirtying(),e.dirtyForPublish.startDirtying(),e.dirtyStatusInfo.startDirtying(),i.forEach(e.parameters,function(e){e.startDirtyingParameterAndChildren()}));v.synchronizeScriptsEnabled()&&e instanceof y.ModuleNode&&(v.synchronizeScriptsCustomModulesEnabled()&&e.isCustomModule()||e.module_.id.split(".")[1]===d.ModuleId.CreateRModel)&&this.customModuleAdded(e)},t.prototype.getDatasetNode=function(e){return this.datasets[e]?this.datasets[e]:null},t.prototype.getTrainedModelNode=function(e){return this.trainedModels[e]?this.trainedModels[e]:null},t.prototype.getTransformNode=function(e){return this.transformModules[e]?this.transformModules[e]:null},t.prototype.getAnnotationNode=function(e){return this.annotations[e]?this.annotations[e]:null},t.prototype.setAnnotationNodes=function(e){var t=this;e.forEach(function(e){t.annotations[e.id]=t.addAnnotation(e)})},t.prototype.forEachConnection=function(e){i.forEach(this.nodes(),function(t){i.forEach(t.inputPorts,function(t){i.forEach(t.connectedPorts(),function(n){e(t,n)})})})},t.prototype.validate=function(){var e=[];this.description.startValidating();var t=this.description.validate();t.length>0&&e.push({erroneousObject:this.description,errorMessages:t}),this.containsModule()||e.push({erroneousObject:{name:this.description()},errorMessages:[w.noModulesError]});var n=this.findCycles();return n.rootNode&&e.push({erroneousObject:n.rootNode,errorMessages:[w.cycleError]}),this.parameters.forEach(function(t){var n=t.validate();n.length>0&&e.push({erroneousObject:t,errorMessages:n})}),this.nodes.forEach(function(t){t.startValidating();var n=t.validate();e=e.concat(n)}),e},t.prototype.getScriptParameterOptionsIfNotSynchronized=function(e){var t=this.getScriptVersionParametersByName([e]),n=null,r=null;return i.forEach(t,function(e){r===null&&(r=e.value());if(e.value()!==r){n=e.descriptor.choices().map(function(e){return e.value});return}}),n},t.prototype.getCustomModules=function(){var e=[];return i.forEach(this.nodes(),function(t){t instanceof y.ModuleNode&&t.isCustomModule()&&e.push(t)}),e},t.prototype.getCreateRModules=function(){var e=[];return i.forEach(this.getModules(),function(t){t.module_.id.split(".")[1]===d.ModuleId.CreateRModel&&e.push(t)}),e},t.prototype.getScriptVersionToModuleNodeMap=function(e){var t={};return i.forEach(this.getModules(),function(n){i.forEach(n.parameters,function(r){r.name===e&&(t[r.value()]==null?t[r.value()]=[n]:t[r.value()].push(n))})}),t},t.prototype.getScriptVersionForParameter=function(e){var t="";return i.forEach(this.getModules(),function(n){i.forEach(n.parameters,function(n){if(n.name===e&&n.hasScriptVersionSubscription){t=n.value();return}})}),t},t.prototype.getScriptVersionParametersByName=function(e){var t=[];return i.forEach(this.getModules(),function(n){i.forEach(n.parameters,function(n){e.indexOf(n.name)>=0&&t.push(n)})}),t},t.prototype.setModuleVersionInGraph=function(e,t){i.forEach(this.getScriptVersionParametersByName([e]),function(e){e.silentlyUpdateValue(t)})},t.prototype.saveError=function(){return this.description.startValidating(),this.description.validate().length>0?w.emptyNameSaveError:this.containsModule()?this.arePortNamesValid()?null:w.colonInNamesSaveErrror:w.noModulesSaveError},t.prototype.arePortNamesValid=function(){for(var e in this.nodes()){var t=this.nodes()[e];if(t instanceof g.WebServicePortNode&&t.nameParameter.value().indexOf(":")>-1)return!1}return!0},t.prototype.findCycles=function(){var e=this,t={map:{},rootNode:null};return this.nodes.forEach(function(n){e.cycleFromNode(n,t)}),t},t.prototype._removeNode=function(e){this.nodes.remove(e.id),e.parent=null,e instanceof u&&(this.datasets[e.dataset.id]=null),e instanceof f&&(this.trainedModels[e.trainedModel.id]=null),e instanceof l&&(this.transformModules[e.transform.id]=null),e instanceof a&&(this.annotations[e.annotation.id]=null),this.dirtyStatus.removeChild(e.dirtyDraftState),e instanceof y.ModuleNode&&this.dirtyForPublishStatus.removeChild(e.dirtyForPublish),this.dirtyStatus.dirty([p.DirtyType.Rerun]),this.dirtyForPublishStatus.dirty()},t.prototype.findNodesEligibleForUpgrade=function(){var e=[];return i.forEach(this.nodes(),function(t){var n;if(t instanceof y.ModuleNode)n=t.module_;else if(t instanceof u)n=t.dataset;else if(t instanceof f)n=t.trainedModel;else{if(t instanceof g.WebServicePortNode||t instanceof a)return;if(!(t instanceof l))throw new Error("Unknown node type");n=t.transform}n.isLatest()||e.push(t)}),e},t.prototype.upgradeNodes=function(e,t,n,r,i){var s=this,o=this.findNodesEligibleForUpgrade(),a={};o.forEach(function(o){var c,h;if(o instanceof y.ModuleNode)c=o.module_,h=e;else if(o instanceof u)c=o.dataset,h=t;else if(o instanceof f)c=o.trainedModel,h=n;else{if(!(o instanceof l))throw new Error("Unknown node type");c=o.transform,h=r}var p=h.getLatestResourceInFamily(c.familyId);E.info("Replacing an existing node since it uses a resource which has been updated.","Experiment.upgradeNodes",{experimentId:s.experimentId,existingNodeId:o.id,existingNodeFamilyId:c.familyId});var d=b.createNodeForResource(p,i);o.replaceWith(d,a)})},t.prototype.canRefresh=function(){return this.statusCode()===d.State.InDraft&&!!this.parentExperimentId||!!this.experimentId()},t.prototype.refresh=function(e){var t=this,n=$.Deferred(),r=null;return this.statusCode()===d.State.InDraft&&this.parentExperimentId?r=e.getExperimentAsync(this.parentExperimentId):this.experimentId()?r=e.getExperimentAsync(this.experimentId()):n.reject(new Error("Null experimentId")),r!==null&&r.done(function(e){t.refreshFromNewExperiment(e),n.resolve(e)}).fail(function(e){n.reject(e)}),i.when(n)},t.prototype.startDirtyingAll=function(){this.dirtyStatus.startDirtying(),this.dirtyForPublishStatus.startDirtying(),this.nodes.forEach(function(e){e.dirtyDraftState.startDirtying(),e.dirtySinceLastRun.startDirtying(),e.dirtyForPublish.startDirtying(),e instanceof y.ModuleNode&&(e.dirtyStatusInfo.startDirtying(),i.forEach(e.parameters,function(e){e.startDirtyingParameterAndChildren()}),i.forEach(e.inputPorts,function(e){e.dirtyStatusInfo.startDirtying(),e.dirtyDraftState.startDirtying()}))})},t.prototype.dirtyIfNeeded=function(e){var t=this;e.getModules().forEach(function(e){var n=e,r=t.nodes.lookup(n.id);r&&r.dirtyIfNeeded(n)})},t.prototype.getNumberOfModules=function(){return i.filter(this.nodes(),function(e){return e instanceof y.ModuleNode}).length},t.prototype.cycleFromNode=function(e,t){var n=this;t===void 0&&(t={map:{},rootNode:null});var r=null;switch(t.map[e.id]){case 1:return e;case 2:return null;default:t.map[e.id]=1}return i.forEach(e.outputPorts,function(i){i.connectedPorts.forEach(function(i){var s=n.cycleFromNode(i.parent,t);s?(i.connectionIsInCycle(!0),r=s===e?null:s,r&&(t.rootNode=r)):i.connectionIsInCycle(!1)})}),t.map[e.id]=2,r},t.prototype.refreshFromNewExperiment=function(e){var t=this;this.onRefreshFromNewExperiment&&this.onRefreshFromNewExperiment(this,e),this.statusCode()!==d.State.InDraft&&(this.startTime(e.startTime()),this.endTime(e.endTime()),this.statusDetails(e.statusDetails()),this.statusCode(e.statusCode())),e.getModules().forEach(function(e){var n=t.nodes.lookup(e.id);n&&!n.isDirty&&n.updateInfo(e)})},t.prototype.containsModule=function(){var e=i.first(this.nodes(),function(e){return e instanceof y.ModuleNode},null);return e!==null},t.prototype.containsTrainingModule=function(){return i.first(this.nodes(),function(e){if(e instanceof y.ModuleNode){var t=e;return t.module_.category===p.ResourceCategory.TrainModule}else return false},null)!=null},t.prototype.persistedOnService=function(){return this.experimentId()!==null},t.prototype.setDraftState=function(e){this.isDraft()!==e&&this.statusCode(e?d.State.InDraft:d.State.NotStarted)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.getTag=function(e){if(!e)return[];var t=this.getTags();return t.filter(function(t){return e.test(t)})},t.prototype.getTags=function(){var e=this.tags();return e?e:[]},t}(s.Disposable);t.Experiment=T}),define("generated/DataLabClient/Contracts/V1/DataContractInterfaces-v1",["require","exports"],function(e,t){(function(e){e[e.SubmissionAllowed=0]="SubmissionAllowed",e[e.NotAllowedCompetitionEnded=1]="NotAllowedCompetitionEnded",e[e.NotAllowedCompetitionNotStarted=2]="NotAllowedCompetitionNotStarted",e[e.NotAllowedTotalSubmissionLimit=3]="NotAllowedTotalSubmissionLimit",e[e.ErrorGettingStatus=4]="ErrorGettingStatus",e[e.NotAllowedDailySubmissionLimit=5]="NotAllowedDailySubmissionLimit",e[e.NotAllowedInCoolDownPeriod=6]="NotAllowedInCoolDownPeriod"})(t.SubmissionAllowedStatusCode||(t.SubmissionAllowedStatusCode={}));var n=t.SubmissionAllowedStatusCode;(function(e){e[e.SubmissionSuccesful=0]="SubmissionSuccesful",e[e.SubmissionNotAllowed=1]="SubmissionNotAllowed",e[e.SubmissionError=2]="SubmissionError"})(t.EntrySubmissionStatusCode||(t.EntrySubmissionStatusCode={}));var r=t.EntrySubmissionStatusCode;(function(e){e[e.Deleted=0]="Deleted",e[e.Enabled=1]="Enabled",e[e.Disabled=2]="Disabled",e[e.Migrated=3]="Migrated",e[e.Updated=4]="Updated",e[e.Registered=5]="Registered",e[e.Unregistered=6]="Unregistered"})(t.SubscriptionStatus||(t.SubscriptionStatus={}));var i=t.SubscriptionStatus}),define("generated/DataLabClient/Model/WorkspaceSettings",["require","exports","../Validation","../Logging/Logging","../Contracts/V1/DataContractInterfaces-v1"],function(e,t,n,r,i){var s="00000000000000000000000000000000",o=function(){function e(){this.primary=ko.observable(null),this.secondary=ko.observable(null)}return e.prototype.deserialize=function(e){this.primary(e.PrimaryToken),this.secondary(e.SecondaryToken)},e.SERIALIZED_ZERO_TOKEN={PrimaryToken:s,SecondaryToken:s},e}();t.AuthorizationToken=o;var u=function(){function e(){var e=this;this.hasBeenEdited=ko.observable(!1);var t=function(t){return e.hasBeenEdited()&&!t?"This field is required to update HDInsight Cluster connection.":/[;]/.test(t)?"This field cannot contain any semi-colons (;).":null};this.user=n.validatableObservable(null,t),this.password=n.validatableObservable(null,t),this.uri=n.validatableObservable(null,t)}return e.prototype.settingsUpdated=function(){this.hasBeenEdited()||(this.hasBeenEdited(!0),this.user.startValidating(),this.password.startValidating(),this.uri.startValidating(),this.user.validate(),this.password.validate(),this.uri.validate())},e.prototype.deserialize=function(e){this.uri(e)},e.prototype.serialize=function(){return(this.user()?"User="+this.user()+";":"")+(this.password()?"Password="+this.password()+";":"")+(this.uri()?"Uri="+this.uri():"")},e}();t.HDInsightClusterConnectionString=u;var a=function(){function e(){var e=this;this.hasBeenEdited=ko.observable(!1);var t=function(t){return e.hasBeenEdited()&&!t?"This field is required to update HDInsight Cluster connection.":/[;@]/.test(t)?"This field cannot contain any semi-colons (;) or at symbols (@).":null},r=function(t){return e.hasBeenEdited()&&!t?"This field is required to update HDInsight Cluster connection.":/[;]/.test(t)?"This field cannot contain any semi-colons (;).":null};this.accountName=n.validatableObservable(null,t),this.accountKey=n.validatableObservable(null,r),this.container=n.validatableObservable(null,t)}return e.prototype.settingsUpdated=function(){this.hasBeenEdited()||(this.hasBeenEdited(!0),this.accountName.startValidating(),this.accountKey.startValidating(),this.container.startValidating(),this.accountName.validate(),this.accountKey.validate(),this.container.validate())},e.prototype.deserialize=function(e){if(e){var t=e.split("@");this.accountName(t[1]),this.container(t[0])}},e.prototype.serialize=function(){return(this.accountName()?"AccountName="+this.accountName()+";":"")+(this.accountKey()?"AccountKey="+this.accountKey()+";":"")+(this.container()?"Container="+this.container():"")},e}();t.HDInsightStorageConnectionString=a,function(e){e[e.Production=0]="Production",e[e.Free=1]="Free",e[e.Anonymous=2]="Anonymous",e[e.PaidStandard=3]="PaidStandard",e[e.PaidPremium=4]="PaidPremium"}(t.WorkspaceType||(t.WorkspaceType={}));var f=t.WorkspaceType,l=function(){function e(){}return e.isProduction=function(e){switch(e){case 2:case 1:return!1;case 0:case 3:case 4:return!0;default:return r.error("Unexpected WorkspaceType."),!1}},e}();t.WorkspaceTypeExtensions=l;var c=function(){function e(e){this.id=null,this.friendlyName=n.validatableObservable(null,(new n.WorkspaceNameValidator).validate),this.description=ko.observable(null),this.azureStorageConnectionString=ko.observable(null),this.hdinsightClusterConnectionString=new u,this.hdinsightStorageConnectionString=new a,this.useDefaultHDInsightSettings=ko.observable(!0),this.sqlAzureConnectionString=ko.observable(null),this.analyticFrameworkClusterConnectionString=ko.observable(null),this.authorizationToken=new o,this.etag=null,this.type=null,this.armSharing=!1,this.id=e}return e.prototype.populateFromContract=function(e){this.friendlyName(e.FriendlyName),this.description(e.Description),this.azureStorageConnectionString(e.AzureStorageConnectionString),this.hdinsightClusterConnectionString.deserialize(e.HDInsightClusterConnectionString),this.hdinsightStorageConnectionString.deserialize(e.HDInsightStorageConnectionString),this.useDefaultHDInsightSettings(e.UseDefaultHDInsightSettings),this.sqlAzureConnectionString(e.SqlAzureConnectionString),this.analyticFrameworkClusterConnectionString(e.AnalyticFrameworkClusterConnectionString),e.AuthorizationToken||r.error("AuthorizationToken is missing","populateFromContract"),this.authorizationToken.deserialize(e.AuthorizationToken||o.SERIALIZED_ZERO_TOKEN),this.etag=e.Etag,e.Type?this.type=typeof e.Type!="number"&&e.Type in f?f[e.Type]:null:this.type=0,this.ownerEmail=e.OwnerEmail,this.userStorage=e.UserStorage,this.subscriptionId=e.SubscriptionId,this.subscriptionName=e.SubscriptionName,this.subscriptionState=typeof e.SubscriptionState=="string"&&i.SubscriptionStatus[e.SubscriptionState]||null;var t=6,n=parseInt(e.CreatedTime.substr(t));this.createdTime=n?new Date(n):null,this.keyVaultKeyIdentifier=e.KeyVaultKeyIdentifier,this.armSharing=e.ArmSharing==1,this.resourceGroupName=e.ResourceGroupName,this.tenantId=e.TenantId},e.prototype.validateAll=function(){return this.friendlyName.startValidating(),this.friendlyName.validate().length>0||this.hdinsightClusterConnectionString.user.validate().length>0||this.hdinsightClusterConnectionString.password.validate().length>0||this.hdinsightClusterConnectionString.uri.validate().length>0||this.hdinsightStorageConnectionString.accountName.validate().length>0||this.hdinsightStorageConnectionString.accountKey.validate().length>0||this.hdinsightStorageConnectionString.container.validate().length>0?!1:!0},e}();t.WorkspaceSettings=c}),define("generated/DataLabClient/Model/DataType",["require","exports"],function(e,t){var n;(function(e){e.Any="Any"})(n=t.WellKnownDataTypeIds||(t.WellKnownDataTypeIds={}));var r=function(){function e(e){if(!e)throw new Error("'dataTypeId' is required");this.dataTypeId=e,this.name=e,this.description="",this.fileExtension=null,this.allowUpload=!0,this.allowPromotion=!0,this.allowModelPromotion=!1}return e.prototype.areSame=function(e){return e.allowPromotion===this.allowPromotion&&e.allowModelPromotion===this.allowModelPromotion&&e.allowUpload===this.allowUpload&&e.dataTypeId===this.dataTypeId&&e.description===this.description&&e.fileExtension===this.fileExtension&&e.name===this.name},e.prototype.acceptsConnectionFrom=function(e){return this.areSame(e)||this.dataTypeId===n.Any||e.dataTypeId===n.Any},e.prototype.toString=function(){return this.dataTypeId},e}();t.DataType=r}),define("generated/DataLabClient/Contracts/V1/Deserializer-v1",["require","exports","../../Util","../../Model/Experiment","../../Model/WorkspaceSettings","./Common/Module","../../Logging/Logging","../../Model/WebServicePortNode","../../StateUtil","../../Constants","../../Model/DataType","./Constants","../../Model/ModuleParameterDescriptor"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function d(e){return e.NodeId+":"+e.Name}function v(e,t,i,s,o,u,a){var f=new r.Experiment(e.Id,e.ParentId);return f.description(e.Description),f.setDraftState(!1),n.when(y(e,a,t,i,s,o,u,f))}function m(e,t,i,s,o,u,a){var f=e.SchemaVersion===undefined?1:e.SchemaVersion;if(f===2)throw new Error("SchemaVersion:2 is not yet supported!");var l=e.WebService?e.WebService.WebServiceGroupId:null,c=new r.Experiment(e.ExperimentId,e.ParentExperimentId,e.Creator,l);e.Status.StatusCode&&c.statusCode(e.Status.StatusCode),c.description(e.Description),c.summary.value(e.Summary),c.originalExperimentDocumentation.value(e.OriginalExperimentDocumentationLink),c.etag(e.Etag),c.isArchived=e.IsArchived,c.isLeaf(e.IsLeaf),c.publishedModelPackageId=e.WebService?e.WebService.ModelPackageId:null,c.disableNodesUpdate(e.DisableNodesUpdate===!0),c.category=e.Category,c.tags(e.Tags||[]),c.isPartialRun(!!e.IsPartialRun),e.Status.StartTime&&c.startTime(n.formatDate(n.parseJsonDate(e.Status.StartTime))),e.Status.EndTime&&c.endTime(n.formatDate(n.parseJsonDate(e.Status.EndTime))),e.Status.StatusDetail&&c.statusDetails(e.Status.StatusDetail);var h=Object.create(null);return e.NodeStatuses.forEach(function(e){h[e.NodeId]=e}),y(e,a,t,i,s,o,u,c,h,e.WebService)}function g(e){var t=new i.WorkspaceSettings(e.WorkspaceId);return t.populateFromContract(e),t}function y(e,t,r,i,u,l,c,h,v,m){v===void 0&&(v=Object.create(null)),m===void 0&&(m=Object.create(null));var g=Object.create(null),y=Object.create(null),b=function(e,t){y[e]=t},C=Object.create(null),k=T(e.Graph.SerializedClientData),L=[],A=[];m||(m={}),m.Parameters||(m.Parameters=[]),m.Parameters.forEach(function(e){if(e.Name in C)throw new Error("Duplicate experiment-level parameter name.");var t=s.deserializeModuleParameterDescriptor(e.ParameterDefinition);t.name=e.Name,t.defaultValue=e.Value,C[e.Name]=h.addParameter(t,e.Name,e.Value)}),e.Graph.ModuleNodes.forEach(function(e){var s=$.Deferred();r.getItem(e.ModuleId).done(function(r){var o=k[e.Id]||p,a=v[e.Id],f=a!==undefined,c=o.x,m=o.y,y={};f&&a.OutputEndpoints.forEach(function(e){if(!y[e.Name]||!y[e.Name].IsAuxiliary)y[e.Name]=e});var T=h.addModule(r,t,c,m,e.Id,!0),N=[];x(T.parameters,e.ModuleParameters,C);if(f){T.executedExperimentId=h.experimentId();if(a.Status.StartTime){var L=n.parseJsonDate(a.Status.StartTime);T.startTime.value(n.formatDate(L))}if(a.Status.EndTime&&a.Status.StartTime){var O=n.parseJsonDate(a.Status.EndTime);if(O.getTime()>n.minDate){T.endTime.value(n.formatDate(O));var M=n.getElapsedTimeMilliseconds(L,O);M>=0&&T.elapsedTime.value(n.formatElapsedTime(M))}}a.Status.StatusCode&&T.statusCode.value(a.Status.StatusCode),a.Status.StatusDetail&&T.statusDetails.value(a.Status.StatusDetail),a.StandardOutEndpoint&&T.outputLog.endpoint(a.StandardOutEndpoint),a.StandardErrorEndpoint&&T.errorLog.endpoint(a.StandardErrorEndpoint),a.OutputEndpoints.forEach(function(e){T.addEndpoint(e)})}e.InputPortsInternal.forEach(function(e){var t=T.inputPorts[e.Name];if(!t)throw new Error("Invalid input port: "+e.Name);b(d(e),t);var n=null;e.DataSourceId?n=w(h,t,e.DataSourceId,i,k,g):e.TrainedModelId?n=E(h,t,e.TrainedModelId,u,k,g):e.TransformModuleId&&(n=S(h,t,e.TransformModuleId,l,k,g)),n&&(n.fail(function(e){h.hasMissingResources=!0,A.push(t)}),N.push(n))}),e.OutputPortsInternal.forEach(function(e){var t=T.outputPorts[e.Name];if(!t)throw new Error("Invalid output port: "+e.Name);b(d(e),t);var n=y[e.Name];n&&(t.outputEndpoint=n)});if(f&&a.MetadataOutputEndpoints){var _=T.outputPorts;n.forEach(_,function(e){var t=a.MetadataOutputEndpoints[e.name];if(t){var r=n.first(t,function(e){return e.Key==="visualization"},null),i=n.first(t,function(e){return e.Key==="schema"},null);e.visualizationEndpoint=r?r.Value:null,e.schemaEndpoint=i?i.Value:null}})}e.Comment?(T.comment(e.Comment),T.commentCollapsed(e.CommentCollapsed)):(T.comment(""),T.commentCollapsed(!0)),T.usePreviousResults(e.UsePreviousResults?e.UsePreviousResults:!1),T.isPartOfPartialRun=null,$.when.apply($,N.map(function(e){var t=$.Deferred();return e.always(function(){return t.resolve()}),t.promise()})).done(function(){s.resolve()})}).fail(function(){s.reject(new Error("Module with ID "+e.ModuleId+" does not exist in your workspace."))}),L.push(s)});for(var O in C)C[O].isExperimentParameter&&(h.removeWebServiceParameter(C[O]),h.experimentParameterInUse=!0);var M=$.Deferred(),_=$.when.apply($,L).done(function(){e.Graph.EdgesInternal.forEach(function(t){var r=y[t.SourceOutputPortId],i=y[t.DestinationInputPortId];if(r&&i)r.connectTo(i);else{function s(t){var r=(t||"").split(":")[0],i=n.first(e.Graph.ModuleNodes,function(e){return e.Id===r},null);return i&&i.ModuleId}o.error("bad connection","deserializeGraph",JSON.stringify({outputPort:{id:t.SourceOutputPortId,found:!!r,moduleId:s(t.SourceOutputPortId)},inputPort:{id:t.DestinationInputPortId,found:!!i,moduleId:s(t.DestinationInputPortId)}})),M.reject(new Error("Bad connection between modules found"))}}),M.resolve(h)}).fail(function(e){M.reject(e)}),D=m.SerializedClientData?T(m.SerializedClientData):{};return h.isWebServiceExperiment(m.IsWebServiceExperiment),M.done(function(){m.Inputs&&n.forEach(m.Inputs,function(e){N(h,y,e,0,D,c)}),m.Outputs&&n.forEach(m.Outputs,function(e){N(h,y,e,1,D,c)}),h.startDirtyingAll(),h.isLeaf()&&a.isFinishedState(h.statusCode())&&A.forEach(function(e){e.dirtyStatusInfo.dirty([f.DirtyType.Rerun]),e.dirtyDraftState.dirty([f.DirtyType.Rerun])})})}function b(e){var t=new l.DataType(e.Id);return t.name=e.Name,t.description=e.Description,t.fileExtension=e.FileExtension,t.allowUpload=e.AllowUpload===undefined?!0:e.AllowUpload,t.allowPromotion=e.AllowPromotion===undefined?!0:e.AllowPromotion,t.allowModelPromotion=e.AllowModelPromotion===undefined?!1:e.AllowModelPromotion,t}function w(e,t,n,r,i,s){if(n===null)return;var o=$.Deferred();return r.getItem(n).done(function(r){if(s[n]===undefined){var u=i[n]||p,a=e.addDataset(r,u.x,u.y,n);s[n]=a.datasetPort}s[n].connectTo(t),o.resolve()}).fail(function(){o.reject(new Error("Dataset with id "+n+" does not exist in your workspace."))}),o}function E(e,t,n,r,i,s){if(n===null)return;var o=$.Deferred();return r.getItem(n).done(function(r){if(s[n]===undefined){var u=i[n]||p,a=e.addTrainedModel(r,u.x,u.y,n);s[n]=a.trainedModelPort}s[n].connectTo(t),o.resolve()}).fail(function(){o.reject(new Error("Trained model with id "+n+" does not exist in your workspace."))}),o}function S(e,t,n,r,i,s){if(n===null)return;var o=$.Deferred();return r.getItem(n).done(function(r){if(s[n]===undefined){var u=i[n]||p,a=e.addTransformModule(r,u.x,u.y,n);s[n]=a.transformPort}s[n].connectTo(t),o.resolve()}).fail(function(){o.reject(new Error("Transformation module with id "+n+" does not exist in your workspace."))}),o}function x(e,t,r){n.forEach(e,function(e){var n=t.filter(function(t){return t.Name===e.name});if(n.length===0){e.descriptor.isOptional||o.error("No value exist for module parameter with name "+e.name+".");return}n.length>1&&o.error("Multiple values exist for module parameter with name "+e.name+".");var i=n[0];if(i.ValueType===c.ModuleParameterValueType.GraphParameterName){if(!(i.Value in r)){o.error("Module node references an unknown experiment-level parameter.");return}r[i.Value].isExperimentParameter=!0,i.ValueType=c.ModuleParameterValueType.Literal,i.Value=r[i.Value].value()}e.value(i.Value),e.valueType=i.ValueType;if(i.LinkedGlobalParameter){if(!(i.LinkedGlobalParameter in r)){o.error("Module node references an unknown web service parameter.");return}e.linkToWebServiceParameter(r[i.LinkedGlobalParameter])}if(e.descriptor instanceof h.ModeModuleParameterDescriptor){var s=e.childParameters[e.value()];s&&x(s,t,r)}})}function T(e){try{var t={},n=/<!ENTITY[^>]+>/;if(n.test(e))return o.warn("Compromised XML detected in graph layout data.","parseLegacyLayoutData"),t;var r=$.parseXML(e),i=r.querySelectorAll("DataV1 > NodePositions > NodePosition"),s=Array.prototype.forEach;return s.call(i,function(e){var n=e.getAttribute("Node"),r=e.getAttribute("Position"),i=r.split(",");if(i.length!==4)throw new Error('Invalid layout data, expected Position="x,x,x,x", read: '+r);t[n]={x:parseInt(i[0]),y:parseInt(i[1]),width:parseInt(i[2]),height:parseInt(i[3])}}),t}catch(u){return o.exception(u,"Failed to parse layout data.","parseLegacyLayoutData"),{}}}function N(e,t,n,r,i,s){var u=t[n.PortId];if(!u){o.warn("Can't find publish port from port lookup table. It can happens if node id or port name are changed for some reason. User has to reset publish ports again.");return}if(e.nodes.lookup(n.Id)){o.error("Attempted to add a web service port with a duplicate node id.",null,JSON.stringify({Id:n.Id,PortId:n.PortId}));return}var a=0,f=0,l=i[n.Id];l||(l=C(e,u,r)),a=l.x,f=l.y,e.addWebServicePort(r,a,f,n.Id,s,u,n.Name)}function C(e,t,r){var i={x:t?t.parent.x():0,y:0},s=n.map(n.values(e.nodes()),function(e){return e.y()});return s&&s.length&&(r==0?i.y=Math.min.apply(null,s)-77:i.y=Math.max.apply(null,s)+77),i}var p={x:0,y:0};t.deserializeDataflow=v,t.deserializeExperiment=m,t.deserializeWorkspaceSettings=g,t.deserializeDataType=b}),define("generated/DataLabClient/Model/DataTypeRegistry",["require","exports","../LocalizedResources","../Util"],function(e,t,n,r){function s(e){var t=e.match(/\.(\w+)$/);return t?t[1]:null}function o(e){return e.charAt(0)==="."?e.substr(1):e}var i=function(){function e(e){var t=this;this.dataTypes=Object.create(null),e.forEach(function(e){if(e.dataTypeId in t.dataTypes)throw new Error(r.format(n.duplicateType,e.dataTypeId));t.dataTypes[e.dataTypeId]=e}),Object.freeze(this.dataTypes)}return e.prototype.findDataTypesForFileExtension=function(e){e=o(e);if(!e)throw new Error(n.nonEmptyExtension);return r.filter(this.dataTypes,function(t){return t.fileExtension?e.toLowerCase()===o(t.fileExtension.toLowerCase()):!1})},e.prototype.findDataTypesForFileName=function(e){var t=s(e);return t?this.findDataTypesForFileExtension(t):[]},e.prototype.getDataTypeWithId=function(e){var t=this.dataTypes[e];if(!t)throw r.format(n.noSuchDataType,e);return t},e.prototype.tryGetDataTypeWithId=function(e){var t=this.dataTypes[e];return t===undefined?null:t},e}();return i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/ClientCache",["require","exports","./CustomEvent","./Util","./ObservableMap","./Features","./LocalizedResources","./Logging/Logging","./Logging/IfxScenarioStopWatch","./Constants","./Contracts/V1/Constants","./Contracts/V1/Common/DataResource","./FeaturesExtensions","./Contracts/V1/Common/Notebook","./Contracts/V1/Common/Module","./Contracts/V1/Deserializer-v1","./Model/Module","./Model/DataTypeRegistry"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=function(){function e(e,t){var n=this;this.client=e,this.moduleCategoryRegistry=i.observableMap(),this.datasetCategoryRegistry=i.observableMap(),this.addCategory(f.ResourceCategory.Dataset+"\\"+o.datasetCategorySamples,this.datasetCategoryRegistry),this.addCategory(f.ResourceCategory.Dataset+"\\"+o.datasetCategoryUserCreated,this.datasetCategoryRegistry);var r=this.createResourceBackend(function(e){return n.client.getDataset(e)},function(){return n.client.listDatasetsAsync()},function(e){return n.deserializeDataset(e)},function(e){return n.client.deleteDatasetFamilyAsync(e)},function(e,t){return n.client.renameDatasetAsync(e,t)});this.datasetCache=new E(r),this.notebookCache=null;if(h.canEnableIPythonNotebookFeature()){var u=this.createResourceBackend(function(e){return n.client.getNotebookAsync(e)},function(){return n.client.listNotebooksAsync()},function(e){return n.deserializeNotebook(e)},function(e){return n.client.deleteNotebookFamilyAsync(e)},function(e,t){return n.client.renameNotebookAsync(e,t)});this.notebookCache=new w(u)}var a=this.createResourceBackend(function(e){return n.client.getModule(e)},function(){return n.client.listModulesAsync()},function(e){return n.deserializeModule(e)},undefined,function(e,t){return n.client.renameModuleAsync(e,t)});this.moduleCache=new w(a);var l=this.createResourceBackend(function(e){return n.client.getTrainedModel(e)},function(){return n.client.listTrainedModelsAsync()},function(e){return n.deserializeTrainedModel(e)},function(e){return n.client.deleteTrainedModelFamilyAsync(e)},function(e,t){return n.client.renameTrainedModelAsync(e,t)});this.trainedModelCache=new w(l);var c=this.createResourceBackend(function(e){return n.client.getTransformModule(e)},function(){return n.client.listTransformModulesAsync()},function(e){return n.deserializeTransformModule(e)},undefined,function(e,t){return n.client.renameTransformAsync(e,t)});this.transformModulesCache=new w(c),this.projectCache=s.enableProjectBasedAssetsGroupingEnabled()?x.createInstance(t):null,this.dataTypeRegistry=Object.create(null),this.localPendingDatasets=ko.observableArray([]),this.datasetsPrefetched=ko.observable(!1),this.modulesPrefetched=ko.observable(!1),this.notebooksPrefetched=ko.observable(!1),this.datatypesPrefetched=ko.observable(!1),this.trainedModelsPrefetched=ko.observable(!1),this.transformModulesPrefetched=ko.observable(!1),this.projectsPrefetched=ko.observable(!1),this.allPrefetched=ko.computed(function(){var e=this.datasetsPrefetched()&&this.modulesPrefetched()&&this.trainedModelsPrefetched()&&this.transformModulesPrefetched();return h.canEnableNotebookList()&&(e=e&&this.notebooksPrefetched()),s.enableProjectBasedAssetsGroupingEnabled()&&(e=e&&this.projectsPrefetched()),e},this)}return e.prototype.prefetch=function(){var e=this;if(this.allPrefetched())return;var t=new a.IfxScenarioStopWatch(3);if(!this.datasetsPrefetchPromise){t.start();var n=this.allPrefetched.subscribe(function(e){e&&(t.stop(),n.dispose())})}var i=this.client.listDataTypesAsync(t),o=this.client.listDatasetsAsync(t),f=this.client.listModulesAsync(t),c=h.canEnableIPythonNotebookFeature()?this.client.listNotebooksAsync(t):null,p=this.client.listTrainedModelsAsync(t),d=this.client.listTransformModulesAsync(t),m=s.enableProjectBasedAssetsGroupingEnabled()?this.projectCache.loadNewItems(t):null,y;o.done(function(e){y=e});var b;f.done(function(e){b=e});var w;p.done(function(e){w=e});var E;d.done(function(e){E=e});if(h.canEnableNotebookList()){var S;c.done(function(e){S=e})}s.enableProjectBasedAssetsGroupingEnabled()&&m.done(function(){e.projectsPrefetched(!0)}),i.done(function(t){e.dataTypeRegistry=new g(t.map(function(e){return v.deserializeDataType(e)})),e.datatypesPrefetched(!0)});var x=r.when(o,i),T=r.when(f,i),N=c?r.when(c):null,C=r.when(p,i),k=r.when(d,i);this.datasetsPrefetchPromise||(this.datasetsPrefetchPromise=r.then(x,function(){y.forEach(function(t){try{var n=e.deserializeDataset(t);if(n.schemaStatus!=null&&n.schemaStatus===l.SchemaStatus.Pending){e.datasetCache.handlePendingInList(n,e.allPrefetched);if(n.id.lastIndexOf(e.client.workspaceId,0)===0){var r=e.datasetCache.getPromiseForPendingItem(n.id);r&&(e.localPendingDatasets.push({id:n.id,name:n.name(),promise:r}),function(t,n){n.always(function(){e.localPendingDatasets.remove(function(e){return e.id===t.id})})}(n,r))}}else n.schemaStatus!==l.SchemaStatus.Invalid&&(e.datasetCache.setItem(t.Id,n),n.category&&e.addCategory(n.category,e.datasetCategoryRegistry))}catch(i){u.exception(i,"A dataset failed to deserialize while prefetching. It will be ignored.","ApplicationCache.prefetch",{id:t.Id})}}),e.datasetsPrefetched(!0)})),this.modulesPrefetchPromise||(this.modulesPrefetchPromise=r.then(T,function(){b.forEach(function(t){try{e.moduleCache.setItem(t.Id,e.deserializeModule(t))}catch(n){u.exception(n,"A module failed to deserialize while prefetching. It will be ignored.","ApplicationCache.prefetch",{id:t.Id})}t.Category&&e.addCategory(t.Category,e.moduleCategoryRegistry)}),e.modulesPrefetched(!0)})),this.notebooksPrefetchPromise||(this.notebooksPrefetchPromise=N?r.then(N,function(){S.forEach(function(t){try{e.notebookCache.setItem(t.FamilyId,e.deserializeNotebook(t))}catch(n){u.exception(n,"A notebook failed to deserialize while prefetching. It will be ignored.","ApplicationCache.prefetch",{familyId:t.FamilyId})}}),e.notebooksPrefetched(!0)}):null),this.trainedModelsPrefetchPromise||(this.trainedModelsPrefetchPromise=r.then(C,function(){w.forEach(function(t){try{e.trainedModelCache.setItem(t.Id,e.deserializeTrainedModel(t))}catch(n){u.exception(n,"A trained model failed to deserialize while prefetching. It will be ignored.","ApplicationCache.prefetch",{id:t.Id})}}),e.trainedModelsPrefetched(!0)})),this.transformModulesPrefetchPromise||(this.transformModulesPrefetchPromise=r.then(k,function(){E.forEach(function(t){try{e.transformModulesCache.setItem(t.Id,e.deserializeTransformModule(t))}catch(n){u.exception(n,"A transform failed to deserialize while prefetching. It will be ignored.","ApplicationCache.prefetch",{id:t.Id})}}),e.transformModulesPrefetched(!0)}))},e.prototype.addCategory=function(e,t,n){n===void 0&&(n=[]);var r=e.split("\\"),s=n.concat(r.splice(0,1)),o=s.join("\\");if(!t.contains(o)){var u=i.observableMap();t.put(o,u)}r.length>0&&this.addCategory(r.join("\\"),t.lookup(o),s)},e.prototype.createResourceBackend=function(e,t,n,i,s){var o=this;return{fetch:function(t){o.assertPrefetched();var i=r.then(e(t),function(e){return n(e)});return i},list:function(){o.assertPrefetched();var e=r.then(t(),function(e){var t=[];return e.forEach(function(e){var r;try{r=n(e),t.push({key:r.id,value:r})}catch(i){u.exception(i,"A resource failed to deserialize while fetching items into a resource cache. It will be ignored.","createResourceBackend",{id:e.Id})}}),t});return e},deleteFamily:function(e){return i?(o.assertPrefetched(),i(e)):$.Deferred().reject(new Error("deleteFamily not implemented for this resource cache")).promise()},renameFamily:function(e,t){return s?(o.assertPrefetched(),r.then(s(e,t),function(e){if(e)return n(e)})):$.Deferred().reject(new Error("renameFamily not implemented for this resource cache")).promise()}}},e.prototype.deserializeModule=function(e){return d.deserializeModule(e,this.dataTypeRegistry)},e.prototype.deserializeDataset=function(e){return c.deserializeDataset(e,this.dataTypeRegistry)},e.prototype.deserializeNotebook=function(e){return p.deserializeNotebook(e)},e.prototype.deserializeTrainedModel=function(e){return c.deserializeTrainedModel(e,this.dataTypeRegistry)},e.prototype.deserializeTransformModule=function(e){return c.deserializeTransformModule(e,this.dataTypeRegistry)},e.prototype.assertPrefetched=function(){if(!this.allPrefetched())throw new Error("Before using an ApplicationCache, prefetch() must have been called and completed.")},e}();t.ApplicationCache=y;var b=function(){function e(e){this.data=i.observableMap(),this.outstandingPromises=Object.create(null),this.backend=e}return Object.defineProperty(e.prototype,"items",{get:function(){return this.data},enumerable:!0,configurable:!0}),e.prototype.setItem=function(e,t){if(this.data.contains(e))throw new Error("Cannot overwrite cache lines. The given key already exists in the cache: "+e);if(this.updateIsPendingForKey(e))throw new Error("Cannot overwrite cache lines. A pending fetch for this key is in progress: "+e);this.data.put(e,t)},e.prototype.getItemIfCached=function(e){return this.data.contains(e)?this.data.lookup(e):null},e.prototype.getItem=function(e){var t=this;if(this.data.contains(e))return $.when(this.data.lookup(e));if(this.updateIsPendingForKey(e))return this.outstandingPromises[e];var n=!1,i=r.then(this.backend.fetch(e),function(r){return t.data.contains(e)?(n=!0,t.data.lookup(e)):r});return this.outstandingPromises[e]=i,i.always(function(){delete t.outstandingPromises[e]}).done(function(r){n||t.setItem(e,r)}),i},e.prototype.loadNewItems=function(){var e=this;return this.backend.list().done(function(t){e.data.modify(function(){t.forEach(function(t){e.getItemIfCached(t.key)||(delete e.outstandingPromises[t.key],e.setItem(t.key,t.value))})})})},e.prototype.clear=function(){this.data.clear()},e.prototype.getItems=function(){return this.data},e.prototype.updateIsPendingForKey=function(e){return e in this.outstandingPromises},e.prototype.getOutstandingPromises=function(){return this.outstandingPromises},e}();t.ClientCache=b;var w=function(e){function t(t){e.call(this,t),this.resourceFamilyUpdated=new ko.subscribable,this._backend=t,this.latestResourceByFamily=Object.create(null)}return __extends(t,e),t.prototype.getLatestResourceInFamily=function(e){return e!==null&&e in this.latestResourceByFamily?this.latestResourceByFamily[e]:null},t.prototype.setItem=function(t,n){var r=!1;if(n.familyId){var i=this.latestResourceByFamily[n.familyId],s=!i,o=i&&i.serviceVersion<n.serviceVersion,a={familyId:n.familyId,newResourceId:n.id,newResourceServiceVersion:n.serviceVersion,newResourceName:n.name(),existingResourceId:null,existingResourceServiceVersion:null,existingResourceName:null};i&&(a.existingResourceId=i.id,a.existingResourceServiceVersion=i.serviceVersion,a.existingResourceName=i.name());if(i&&i.serviceVersion==n.serviceVersion)throw new u.TracedException("Attempted to add a resource with the same version number as the latest version already cached for its family","ResourceCache.setItem",a);if(o||s)this.latestResourceByFamily[n.familyId]=n;s?(u.info("A resource version has been added as the first in its family","ResourceCache.setItem",a),n.isLatest(!0),this.setIsLatestClientVersion(n,!0),r=!0):o?(u.info("A new resource version has been received for an existing family","ResourceCache.setItem",a),i.isLatest(!1),this.updateIsLatestClientVersion(i,n),n.isLatest(!0),this.setIsLatestClientVersion(n,!0),r=!0):(u.warn("A resource version is being added to the cache that is older than the latest in the family","ResourceCache.setItem",a),n.isLatest(!1),this.updateIsLatestClientVersion(n,i))}e.prototype.setItem.call(this,t,n),r&&this.resourceFamilyUpdated.notifySubscribers(n)},t.prototype.removeFamilyFromCache=function(e){var t=this,n=this.items(),r=[];for(var i in n)n[i].familyId===e&&r.push(i);var s=this.latestResourceByFamily[e];delete this.latestResourceByFamily[e],r.length>0&&this.items.modify(function(){r.forEach(function(e){return t.items.remove(e)})}),this.resourceFamilyUpdated.notifySubscribers(s)},t.prototype.deleteFamily=function(e){var t=this;if(!this._backend.deleteFamily)return $.Deferred().fail(new Error("not implemented")).promise();var n=e.split(".")[1]||e,r=this._backend.deleteFamily(n);return r.done(function(){t.removeFamilyFromCache(e)}),r},t.prototype.renameFamilyInCache=function(e,t){var n=this,r=this.items(),i=[];for(var s in r)r[s].familyId===e&&i.push(s);i.length>0&&this.items.modify(function(){i.forEach(function(e){return n.items.lookup(e).name(t)})}),this.resourceFamilyUpdated.notifySubscribers()},t.prototype.renameFamily=function(e,t){var n=this;if(!this._backend.renameFamily)return $.Deferred().fail(new Error("not implemented")).promise();var r=e.split(".")[1]||e,i=this._backend.renameFamily(r,t);return i.done(function(r){t=r&&r.name()||t,n.renameFamilyInCache(e,t)}),i},t.prototype.clear=function(){e.prototype.clear.call(this),this.latestResourceByFamily=Object.create(null),this.resourceFamilyUpdated.notifySubscribers(null)},t.prototype.setIsLatestClientVersion=function(e,t){e instanceof m&&(e.isLatestClientVersion=t)},t.prototype.updateIsLatestClientVersion=function(e,t){if(e instanceof m){var n=e,r=t,i=/(^\d+)(\.\d+)*/;if(i.test(n.clientVersion)&&i.test(r.clientVersion)){var s=parseInt(n.clientVersion.match(i)[1]),o=parseInt(r.clientVersion.match(i)[1]);n.isLatestClientVersion=s>=o}}},t}(b);t.ResourceCache=w;var E=function(){function e(e){this.outstandingPromises=Object.create(null),this.maxPollInterval=12e4,this.maxSchemaJobWaitHours=4,this.backend=e,this.resourceCache=new w(e)}return Object.defineProperty(e.prototype,"resourceFamilyUpdated",{get:function(){return this.resourceCache.resourceFamilyUpdated},set:function(e){this.resourceCache.resourceFamilyUpdated=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.resourceCache.items},enumerable:!0,configurable:!0}),e.prototype.getLatestResourceInFamily=function(e){return this.resourceCache.getLatestResourceInFamily(e)},e.prototype.setItem=function(e,t){this.resourceCache.setItem(e,t)},e.prototype.getItemIfCached=function(e){return this.resourceCache.getItemIfCached(e)},e.prototype.getItem=function(e){u.info("dataset getItem() key = "+e);var t=this.getItemIfCached(e);if(t!=null)return $.when(t);if(e in this.outstandingPromises)return this.outstandingPromises[e];u.info("dataset getItem() key = "+e+" fetching from the service");var n=$.Deferred();return this.setupResponseHandler(e,this.backend.fetch(e),n,f.PollInterval),this.setupAfterActions(e,n),n},e.prototype.loadNewItems=function(){var e=this;return r.then(this.backend.list(),function(t){var n=[];return e.items.modify(function(){t.forEach(function(t){t.value.schemaStatus!=null&&t.value.schemaStatus===l.SchemaStatus.Pending?e.handlePendingInList(t.value):t.value.schemaStatus!==l.SchemaStatus.Invalid&&(e.getItemIfCached(t.key)||e.setItem(t.key,t.value),n.push(t.value))})}),n})},e.prototype.handlePendingInList=function(e,t){var n=this;t===void 0&&(t=null);if(this.okToPoll(e)){var i=e.id;if(!(i in this.outstandingPromises)){var s=$.Deferred();r.whenTrue(t||ko.observable(!0)).done(function(){setTimeout(function(){n.pollDataSource(i,s,f.PollInterval)},f.PollInterval)}),this.setupAfterActions(i,s)}}},e.prototype.getPromiseForPendingItem=function(e){return this.outstandingPromises[e]},e.prototype.clear=function(){this.resourceCache.clear()},e.prototype.removeFamilyFromCache=function(e){this.resourceCache.removeFamilyFromCache(e)},e.prototype.deleteFamily=function(e){return this.resourceCache.deleteFamily(e)},e.prototype.renameFamily=function(e,t){return this.resourceCache.renameFamily(e,t)},e.prototype.okToPoll=function(e){var t=e.created,n=new Date(t.getTime()+this.maxSchemaJobWaitHours*60*60*1e3),r=new Date;return u.info("okToPoll on id = "+e.id+"created = "+t.toString()+" bound = "+n.toString()+" current time = "+r.toString()),r.getTime()>n.getTime()?!1:!0},e.prototype.pollDataSource=function(e,t,n){this.setupResponseHandler(e,this.backend.fetch(e),t,n)},e.prototype.setupResponseHandler=function(e,t,n,r){var i=this;t.done(function(t){u.info("dataset getItem() key = "+e+" fetched from service");var s=i.resourceCache.getItemIfCached(e);if(s!=null)u.info("dataset getItem() key = "+e+" resolved from cache"),n.resolve(s);else if(t!=null&&t.schemaStatus===l.SchemaStatus.Pending){u.info("dataset getItem() key = "+e+" schema still pending, will fetch again");if(i.okToPoll(t)){var a=i.computeBackoff(r);setTimeout(function(){i.pollDataSource(e,n,a)},a)}else n.reject(new Error("Upload timed out"))}else t==null||t.schemaStatus===l.SchemaStatus.Complete||t.schemaStatus===l.SchemaStatus.NotSupported?(u.info("dataset getItem() key = "+e+" schema done, resolving"),n.resolve(t)):t!=null&&t.schemaStatus===l.SchemaStatus.Failed?(u.info("dataset getItem() key = "+e+" schema job failed, resolving"),n.resolve(t)):t!=null&&t.schemaStatus===l.SchemaStatus.Invalid?(u.info("dataset getItem() key = "+e+" schema job failed, rejecting"),n.reject(new Error(o.schemaGenerationError))):t!=null&&!t.schemaStatus?n.resolve(t):n.reject(new Error("Internal error"))}).fail(function(e){return n.reject(e)})},e.prototype.computeBackoff=function(e){var t=e*2;return t>this.maxPollInterval?this.maxPollInterval:t},e.prototype.setupAfterActions=function(e,t){var n=this;this.outstandingPromises[e]=t,t.always(function(){delete n.outstandingPromises[e]}).done(function(t){n.getItemIfCached(t)==null&&n.setItem(e,t)})},e}();t.DatasetResourceCache=E;var S=function(e){function t(t,r,i){r===void 0&&(r=30),i===void 0&&(i=!0),e.call(this,t),this.refreshIntervalInSecs=r,this.refreshCacheInProgress=!1,this.cacheRefreshPromise=null,this._cacheRefreshed=new n.CustomEvent,this.refreshUponNextAccess=!1,this._backend=t,this._cacheUpdated=new ko.subscribable,i&&this.scheduleRefreshUponNextAccess()}return __extends(t,e),Object.defineProperty(t.prototype,"cacheRefreshed",{get:function(){return this._cacheRefreshed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cacheUpdated",{get:function(){return this._cacheUpdated},enumerable:!0,configurable:!0}),t.prototype.scheduleDelayedRefresh=function(){var e=this;this.clearTimer(),this.timer=setTimeout(function(){e.refreshUponNextAccess=!0},this.refreshIntervalInSecs*1e3)},t.prototype.scheduleRefreshUponNextAccess=function(){this.clearTimer(),this.timer=null,this.refreshUponNextAccess=!0},t.prototype.clearTimer=function(){this.timer&&clearTimeout(this.timer)},t.prototype.setItem=function(t,n){if(e.prototype.updateIsPendingForKey.call(this,t)||this.refreshCacheInProgress)return;this.setItemHelper(t,n),this._cacheUpdated.notifySubscribers()},t.prototype.deleteItem=function(t){var n=e.prototype.getItems.call(this);if(e.prototype.updateIsPendingForKey.call(this,t)){var r=e.prototype.getOutstandingPromises.call(this)[t];r.always(function(){n.remove(t)})}else n.remove(t);this._cacheUpdated.notifySubscribers()},t.prototype.getItem=function(t){var n=this;if(this.refreshUponNextAccess){var i=$.Deferred();return this.cacheRefreshPromise?this.cacheRefreshPromise.always(function(){i.resolve(e.prototype.getItemIfCached.call(n,t))}):(this.cacheRefreshPromise=this.loadNewItems(),this.cacheRefreshPromise.then(function(){i.resolve(e.prototype.getItemIfCached.call(n,t))}).fail(function(){i.resolve(e.prototype.getItemIfCached.call(n,t))}).always(function(){n.cacheRefreshPromise=null,n.scheduleDelayedRefresh()})),i}return r.succeed(e.prototype.getItemIfCached.call(this,t))},t.prototype.loadNewItems=function(t){var n=this;this.refreshCacheInProgress=!0;var r=e.prototype.getOutstandingPromises.call(this);return this._backend.list(t).done(function(t){n.clear(),t.forEach(function(t){e.prototype.updateIsPendingForKey.call(n,t.key)&&delete r[t.key],n.setItemHelper(t.key,t.value)}),n._cacheRefreshed.notify(t.map(function(e){return e.value})),n._cacheUpdated.notifySubscribers()}).always(function(){n.refreshUponNextAccess=!1,n.refreshCacheInProgress=!1,n.scheduleDelayedRefresh()})},t.prototype.refreshCacheIfNecissary=function(){var e=$.Deferred();return this.refreshUponNextAccess?this.loadNewItems().always(function(){e.resolve()}):e.resolve(),e},t.prototype.setItemHelper=function(t,n){var r=e.prototype.getItems.call(this);r.contains(t)&&r.remove(t),r.put(t,n)},t}(b);t.MutableClientCache=S;var x;(function(e){function t(e){return new S({fetch:function(t,n){return e.getProjectAsync(t,n)},list:function(t){var n=$.Deferred();return e.getProjectsAsync(t).done(function(e){var t=e.map(function(e){return{key:e.ContainerId,value:e}});n.resolve(t)}).fail(function(e){u.error(e.message),n.reject()}),n}})}e.createInstance=t})(x=t.ProjectCollectionCache||(t.ProjectCollectionCache={}))}),define("generated/DataLabClient/AjaxClient",["require","exports","./LocalizedResources","./Logging/Logging","./Util","./Features","./Constants","./Logging/ClientInformationState"],function(e,t,n,r,i,s,o,u){function p(e,t,n){return{status:e.status,statusText:e.statusText,requestUrl:t,requestId:e.getResponseHeader("x-ms-client-request-id"),isSecondAttempt:n}}function d(e,t,n){return{requestUrl:t,isSecondAttempt:n}}function v(e){return window.Blob&&e instanceof Blob}function m(e,t){var n=e.lengthComputable?l*e.total:f;if(Math.floor(t/n)<Math.floor(e.loaded/n)){var i=e.lengthComputable?e.loaded/e.total*100+"% - "+e.loaded+" bytes":e.loaded+" bytes";r.info("Upload progress: "+i,"logUploadProgress",{loaded:e.loaded,total:e.total,determinateLength:e.lengthComputable})}}function g(e){return e===c.JSON||e===c.None?c.Text:e}function y(e,t){if(t.settings.responseType!==c.JSON)return t.settings.responseType===c.Text?e.responseText:t.settings.responseType===c.None?null:e.response;try{return e.responseText?JSON.parse(e.responseText):""}catch(r){throw new i.JsonParseError(n.JsonDeserializationErrorFlag+": "+String(r)+". Url: "+t.url,t.requestId)}}function b(e){return e===1223?!0:e>=200&&e<=299?!0:!1}function w(e){var t=v(e.data);return t?h.Blob:typeof e.data=="undefined"?h.None:e.sendDataFormat?e.sendDataFormat:h.JsonString}function E(e){var t=Object.create({});t[o.LoggingHeaders.SessionIdHeaderEntry]=u.sessionId||"DefaultSession",t.Accept="*/*",e&&(t[o.DataLabAccessTokenHeaderName]=e);var n=$("[name=__RequestVerificationToken]").val();return n&&(t.__RequestVerificationToken=n),t}function S(e){var t=Object.create({});return t[o.LoggingHeaders.SessionIdHeaderEntry]=u.sessionId,t[o.LoggingHeaders.WorkspaceIdHeaderEntry]=u.workspaceId,t[o.LoggingHeaders.RequestIdHeaderEntry]=e,t[o.LoggingHeaders.SubscriptionIdHeaderEntry]=u.subscriptionId,t[o.LoggingHeaders.UserTypeHeader]=s.runnerUserTypeEnabled()?o.RunnerType:o.UxUserType,t}function x(e,t,n){e.loggedUrl||(e.loggedUrl=e.url),e.settings||(e.settings={}),e.settings.sendDataFormat=w(e.settings),e.isSecondAttempt=!1;var r=$.Deferred();return N(e,r,t,n),i.when(r.promise())}function T(e,t){if(t.logRequest){var n=(new Date).getTime(),i=n-t.startTime;r.IfxClientRequest(t,e,i,t.isSecondAttempt,n,1,t.scenarioId)}}function N(e,t,r,u){var a=this;r===void 0&&(r=$.noop),u===void 0&&(u=$.noop);var f=e.settings.sendDataFormat===h.Blob,l=Object.create(e.additionalHeaders||{});f||(l["Content-Type"]="application/json;charset=UTF-8"),e.settings=$.extend({type:"GET",responseType:c.JSON,reportUploadProgress:!1},e.settings);var p=new XMLHttpRequest;e.startTime=(new Date).getTime(),p.open(e.settings.type,e.url),p.responseType=g(e.settings.responseType),p.withCredentials=e.saveCookies,i.forEach(l,function(e,t){return p.setRequestHeader(t,e)});var d=function(){e.isSecondAttempt=!0;if(e.requestId&&e.additionalHeaders&&e.additionalHeaders[o.LoggingHeaders.RequestIdHeaderEntry]){var n=i.createGuid();e.additionalHeaders[o.LoggingHeaders.RequestIdHeaderEntry]=n,e.requestId=n}N(e,t,r,u)},v=function(r){var s=new Date,o=i.format(n.requestErrorNotification,e.url),f=r+o+" Request opened: "+(new Date(e.startTime)).toISOString()+" Onerror called: "+s.toISOString();T(p,e);if(e.isSecondAttempt){var l=new i.AjaxError(f,p,e.requestId);u(p,e,l),t.rejectWith(a,[l])}else d()},w=function(){var r="Service call failed. Error "+p.status+" ("+p.statusText+") when requesting "+e.loggedUrl;T(p,e);if(p.status===401&&e.redirectOn401)u(p,e,new Error("Session Expired")),alert(n.sessionExpired),window.location.reload();else if(e.isSecondAttempt){var s=new i.AjaxError(r,p,e.requestId);u(p,e,s),t.rejectWith(a,[s])}else d()},E=function(){T(p,e);try{var n=y(p,e);r(p,e)}catch(i){i.requestId=e.requestId,u(p,e,i);if(s.handleJsonParseErrorsEnabled()){t.rejectWith(a,[i]);return}throw i}t.resolveWith(a,[n])};p.onabort=function(){p.getAllResponseHeaders()&&v("Service call was aborted.")},p.onerror=function(){v(o.NetworkErrorFlag)},p.ontimeout=function(){v("Service call failed due to a timeout.")},p.onload=function(){b(p.status)?E():w()};if(e.settings.reportUploadProgress&&p.upload){var S=0;p.upload.onprogress=function(e){m(e,S),S=e.loaded,t.notifyWith(a,[e])}}switch(e.settings.sendDataFormat){case h.Blob:p.send(e.settings.data);break;case h.JsonString:p.send(JSON.stringify(e.settings.data));break;case h.Raw:p.send(e.settings.data);break;case h.None:p.send();break;default:throw new Error("Unhandled case for sending the request data.")}}var a="Client.sendRequest",f=5242880,l=.2,c=function(){function e(){}return Object.defineProperty(e,"ArrayBuffer",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"JSON",{get:function(){return"json"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Blob",{get:function(){return"blob"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Document",{get:function(){return"document"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Text",{get:function(){return"text"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"None",{get:function(){return"none"},enumerable:!0,configurable:!0}),e}();t.ResponseType=c;var h=function(){function e(){}return Object.defineProperty(e,"JsonString",{get:function(){return"json"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Raw",{get:function(){return"raw"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Blob",{get:function(){return"blob"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"None",{get:function(){return"none"},enumerable:!0,configurable:!0}),e}();t.SendDataFormat=h,t.generateGeneralClientHeaders=E,t.generateIFxTrackingHeaders=S,t.sendRequest=x});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/ArmClient",["require","exports","./Util","./Logging/Logging","./AjaxClient"],function(e,t,n,r,i){function u(e){if(e&&e.status===401){var t=/Bearer authorization_uri="https?:\/\/[^"]+\/([^'"]+)"/,n=e.getResponseHeader("WWW-Authenticate");if(n){var r=n.match(t);if(r&&r[1])return r[1].toLowerCase()}}return null}t.armStorageType="Microsoft.Storage/storageAccounts",t.armSqlDbType="Microsoft.Sql/servers/databases",t.armClassicStorage="Microsoft.ClassicStorage/storageAccounts";var s=function(){function e(){this.serviceBaseAddress=environment.armBaseAddress||"https://management.azure.com/",this.authenticationManager=new window.AuthenticationManager(r)}return e.prototype.sendRequest=function(e,t,s,o){var a=this;return t===void 0&&(t={}),s===void 0&&(s={}),n.then2(this.authenticationManager.getArmToken(o),function(f){s=$.extend(s,a.generateGeneralClientHeaders(f));var l=a.generateRequestArguments(a.serviceBaseAddress,e,t,s);return n.then2(i.sendRequest(l),function(e){return e},function(e){if(e instanceof n.AjaxError&&e.xmlHttpRequest){var t=u(e.xmlHttpRequest);t&&t!==o&&r.error("wrong tenant ID used in an ArmClient request",null,{tenantIdUsed:o,tenantIdInResponse:t})}return e})})},e.prototype.generateGeneralClientHeaders=function(e){var t=Object.create({});return t.Authorization="Bearer "+e,t},e.prototype.generateRequestArguments=function(e,t,n,r){return{url:e+t,loggedUrl:t,additionalHeaders:r,settings:n}},e}();t.ArmBaseClient=s;var o=function(e){function i(){e.call(this)}return __extends(i,e),i.prototype.listAllTenants=function(){var e=this,t=n.retry(function(){return e.sendRequest("tenants?api-version=2015-01-01")},1250,10,function(e){return e instanceof n.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status===500});return n.then2(t,function(e){return e&&Array.isArray(e.value)?e.value.map(function(e){return e.tenantId}):[]})},i.prototype.getSubscriptionListAsync=function(e){var t=this.sendRequest("api/invoke?_=0",{type:"GET"},{"x-ms-path-query":"/subscriptions?api-version=2016-06-01"},e);return n.then2(t,function(e){return e.value})},i.prototype.getSubscriptionAsync=function(e,t){return this.sendRequest("subscriptions/"+e+"?api-version=2015-01-01",{type:"GET"},t)},i.prototype.getResourceReferences=function(e,n){var r=this.generatePathQueryHeader("/resources?api-version=2016-06-01",e,[t.armClassicStorage,t.armStorageType,t.armSqlDbType]);return this.sendRequest("api/invoke?_=0",{type:"GET"},{"x-ms-path-query":r},n)},i.prototype.createResourceGroupRoleAssignment=function(e,t,n,r,i){var s="/subscriptions/"+e+"/providers/Microsoft.Authorization/roleDefinitions/"+n,o="/subscriptions/"+e+"/resourceGroups/"+r+"/providers/microsoft.authorization/roleassignments/"+Shell.Utilities.newGuid(),u={roleDefinitionId:s,principalId:i},a={properties:u};return this.sendRequest(o+"?api-version=2016-07-01",{type:"PUT",data:a},t)},i.prototype.getResourceKeys=function(e,i){var s=$.Deferred();if(e.type===t.armClassicStorage){var o=e.id+"/listKeys?api-version=2015-12-01";this.sendRequest("api/invoke?_=0",{type:"POST"},{"x-ms-path-query":o},i).done(function(e){e||s.resolve([]),s.resolve([e.primaryKey,e.secondaryKey])}).fail(function(e){r.error(e.message),s.reject(e)})}else{if(e.type!==t.armStorageType)return n.succeed([]);var u=e.id+"/listKeys?api-version=2016-01-01";this.sendRequest("api/invoke?_=0",{type:"POST"},{"x-ms-path-query":u},i).done(function(e){(!e||e.keys.length===0)&&s.resolve([]),s.resolve(e.keys.map(function(e){return e.value}))}).fail(function(e){r.error(e.message),s.reject(e)})}return s},i.prototype.generatePathQueryHeader=function(e,t,r){var i=t.map(function(e){return n.format("subscriptionId eq '{0}'",e)}).join(" or "),s=r.map(function(e){return n.format("resourceType eq '{0}'",e)}).join(" or "),o=n.format("({0}) and ({1})",i,s);return e+"&%2524filter="+encodeURIComponent(encodeURIComponent(o))},i}(s);t.ArmClient=o}),define("generated/DataLabClient/ArmReferenceDictionary",["require","exports","./ArmClient"],function(e,t,n){var r=function(){function e(){this.StorageAccounts=[],this.BlobStorageAccounts=[],this.ClassicStorageAccounts=[],this.SqlServers={}}return e.prototype.addResource=function(e){if(!e)return;e.type===n.armSqlDbType?this.addSqlDbType(e):e.type===n.armClassicStorage?this.ClassicStorageAccounts.push(e):e.type===n.armStorageType&&this.addStorageType(e)},e.prototype.addSqlDbType=function(e){var t=e.kind.split(","),n=e.name.split("/");if(t.length<2||n.length<2||t[1]==="system")return;var r=n[0];e.name=n[1],this.SqlServers[r]||(this.SqlServers[r]=[]),this.SqlServers[r].push(e)},e.prototype.addStorageType=function(e){e.kind==="BlobStorage"?this.BlobStorageAccounts.push(e):this.StorageAccounts.push(e)},e}();t.ArmReferenceDictionary=r}),define("generated/DataLabClient/ArmCache",["require","exports","./Util","./Logging/Logging","./ClientCache","./ArmClient","./ArmReferenceDictionary"],function(e,t,n,r,i,s,o){function a(e){var t=e.split("/")[2];return t?t.toLowerCase():null}var u=function(){function e(){var e=this;this._keysCache={},this._sortByName=function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0},this._tenantLookUpBySubscription={},this.client=new s.ArmClient,this.mutableResourceCache=new i.MutableClientCache({fetch:function(e){return null},list:function(){var t=$.Deferred(),i=n.mapAsync(e.subscriptionList,function(t){return n.then2(e.client.getResourceReferences([t.subscriptionId],e._getTenant(t.subscriptionId)),function(e){var t={};e.value.forEach(function(e){var n=a(e.id);t[n]||(t[n]=new o.ArmReferenceDictionary),t[n].addResource(e)});var n=[];for(var r in t)n.push({key:r,value:t[r]});return n})});return i.done(function(e){var r=n.flatten(e);t.resolve(r)}).fail(function(e){r.error(e.message),t.reject(e)}),t}},60)}return Object.defineProperty(e.prototype,"subscriptionList",{get:function(){var e=this;if(!this._subscriptionListPromise){var t=$.Deferred();this._subscriptionListPromise=t.promise(),n.mapAsync(this.client.listAllTenants(),function(t){return e.client.getSubscriptionListAsync(t).done(function(n){n.filter(function(e){return!!e.subscriptionId}).map(function(e){return e.subscriptionId.toLowerCase()}).forEach(function(n){return e._tenantLookUpBySubscription[n]=t})})}).done(function(e){t.resolve(n.flatten(e))}).fail(function(n){e._subscriptionListPromise=null,r.error(n.message),t.reject(n)})}return this._subscriptionListPromise},enumerable:!0,configurable:!0}),e.prototype.getKeysForStorageAccount=function(e){if(!(e.id in this._keysCache)){var t=$.Deferred(),n=this._getTenant(a(e.id));this.client.getResourceKeys(e,n).done(function(e){t.resolve(e)}).fail(function(e){r.error(e.message),t.reject(e)}),this._keysCache[e.id]=t}return this._keysCache[e.id]},e.prototype.getStorageAccounts=function(e,t){var n=this;t===void 0&&(t=!0);var r=$.Deferred();return this.mutableResourceCache.getItem(e).done(function(e){if(!e)return r.resolve([]);var i=e.BlobStorageAccounts.concat(e.ClassicStorageAccounts.concat(e.StorageAccounts));r.resolve(t?i.sort(n._sortByName):i)}).fail(function(){r.resolve([])}),r},e.prototype.getDatabases=function(e,t,n){var r=this;n===void 0&&(n=!0);var i=$.Deferred();return this.mutableResourceCache.getItem(e).done(function(e){if(!e||!(t in e.SqlServers))return i.resolve([]);var s=e.SqlServers[t];i.resolve(n?s.sort(r._sortByName):s)}).fail(function(){i.resolve([])}),i},e.prototype.getServers=function(e,t){t===void 0&&(t=!0);var n=$.Deferred();return this.mutableResourceCache.getItem(e).done(function(e){if(!e)return n.resolve([]);var r=Object.keys(e.SqlServers);n.resolve(t?r.sort():r)}).fail(function(){n.resolve([])}),n},e.prototype._getTenant=function(e){return this._tenantLookUpBySubscription[e.toLowerCase()]},e}();t.ArmCache=u}),define("generated/DataLabClient/Model/Workspace",["require","exports","../Util","../Constants","../Contracts/V1/Common/Notebook","./ProjectLookup","../Features","./ModuleNode","../Contracts/V1/Constants","../ArmCache","../Logging/Logging"],function(e,t,n,r,i,s,o,u,a,f,l){var c=function(){function e(e,t){var n=this;this.projectLookup=new s.ProjectLookup,this.initialIntroMessageComplete=$.Deferred();if(!e)throw new Error("'workspaceBackend' must be provided");if(!t)throw new Error("'applicationCache' must be provided");o.dataConnectWizardEnabled()?(this.armCache=new f.ArmCache,this.armCache.mutableResourceCache.refreshCacheIfNecissary()):this.armCache=null,this.id=e.workspaceId,this.friendlyName=e.friendlyName,this.applicationCache=t,this.moduleCache=t.moduleCache,this.datasetCache=t.datasetCache,this.notebookCache=t.notebookCache,this.trainedModelCache=t.trainedModelCache,this.transformModulesCache=t.transformModulesCache,this.projectCache=t.projectCache,this.moduleCategoryRegistry=t.moduleCategoryRegistry,this.datasetCategoryRegistry=t.datasetCategoryRegistry,this.datasetUploadsInProgress=ko.observable([]),this.customModulePackageUploadsInProgress=ko.observable([]),this.trainedModelUploadsInProgress=ko.observable([]),this.transformModuleUploadsInProgress=ko.observable([]),this.notebookUploadsInProgress=ko.observable([]),o.enableProjectBasedAssetsGroupingEnabled()&&this.projectCache.cacheRefreshed.attach(function(e){n.projectLookup.clear(),e.forEach(function(e){n.projectLookup.addProject(e)})}),this.workspaceBackend=e}return e.prototype.setUserName=function(e){this.userName=e},e.prototype.getUserName=function(){return this.userName},e.prototype.publishExperimentAsync=function(e){return this.workspaceBackend.publishExperimentAsync(e)},e.prototype.submitExperimentAsync=function(e,t){return this.workspaceBackend.submitExperimentAsync(e,t)},e.prototype.saveDraftAsync=function(e){return this.workspaceBackend.saveDraftAsync(e)},e.prototype.updateDraftAsync=function(e){return this.workspaceBackend.updateExperimentAsync(e)},e.prototype.deleteExperimentAsync=function(e,t){return this.workspaceBackend.deleteExperimentAsync(e,t)},e.prototype.cancelExperimentAsync=function(e){return this.workspaceBackend.cancelExperimentAsync(e)},e.prototype.deleteExperimentAndAncestorsAsync=function(e,t){return this.workspaceBackend.deleteExperimentAndAncestorsAsync(e,t)},e.prototype.promoteOutputToDatasetAsync=function(e,t,r,i){var s=this;if(e.descriptor.allowedDataTypes.length!==1)throw new Error("Can't promote output from a multi-typed output port.");if(e.parent instanceof u.ModuleNode)return n.then(this.workspaceBackend.promoteOutputToDatasetAsync(e,t,r,i),function(e){return s.datasetCache.getItem(e)});throw new Error("Only the output ports of a module node can be promoted to a dataset.")},e.prototype.promoteOutputToTrainedModelAsync=function(e,t,r,i){var s=this;if(e.descriptor.allowedDataTypes.length!==1)throw new Error("Can't promote output from a multi-typed output port.");if(e.parent instanceof u.ModuleNode)return n.then(this.workspaceBackend.promoteOutputToTrainedModelAsync(e,t,r,i),function(e){return s.trainedModelCache.getItem(e)});throw new Error("Only the output ports of a module node can be promoted to a trained model.")},e.prototype.promoteOutputToTransformModuleAsync=function(e,t,r,i){var s=this;if(e.descriptor.allowedDataTypes.length!==1)throw new Error("Can't promote output from a multi-typed output port.");if(e.parent instanceof u.ModuleNode)return n.then(this.workspaceBackend.promoteOutputToTransformModuleAsync(e,t,r,i),function(e){return s.transformModulesCache.getItem(e)});throw new Error("Only the output ports of a module node can be promoted to a transformation model.")},e.prototype.uploadDatasetAsync=function(e,t,i,s,o,u,a){var f=this;return n.then(this.workspaceBackend.uploadDatasetAsync(e,t,i,s,o,u,a),function(e){return a&&a.stop(),f.datasetCache.getItem(e)},function(e){return a&&a.error(e,r.SystemError),e})},e.prototype.uploadCustomModulePackageAsync=function(e,t,r,i,s,o){var u=this;return n.then(this.workspaceBackend.uploadCustomModulePackageAsync(e,t,r,i,s,o),function(e){var t=e.slice(),r=e.splice(0,1)[0];if(r==="Finished"){var i=e.map(function(e){return u.moduleCache.getItem(e)});return n.then(n.when.apply(null,i),function(){var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=[];return n.push(r),e.forEach(function(e){u.moduleCategoryRegistry.contains(e.category)||u.applicationCache.addCategory(e.category,u.moduleCategoryRegistry),n.push(e.name())}),n})}var s=$.Deferred();return setTimeout(function(){return s.resolve(t)}),s})},e.prototype.uploadNewNotebookAsync=function(e,t,r,s){var o=this,u,a,f={Parameters:null,Notebook:{Author:e,Name:t,Language:r}},c=function(){return n.then(o.workspaceBackend.createNotebookAsync(f),function(e){a=e&&e.FamilyId;if(!a)return n.fail(new Error("Invalid notebook ID"));u=i.deserializeNotebook(e)},function(e){return l.error("notebook creation failed: "+String(e),null,JSON.stringify({familyId:a,xhrStatus:e instanceof n.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status,langauge:r,name:t})),e})},h=function(){return o.notebookCache.deleteFamily(a).fail(function(e){l.error("undo of notebook creation failed: "+String(e))})},p=function(){return o.uploadNotebookAsync(s,u.name()).fail(function(e){l.error("failed to upload notebook contents: "+String(e))})},d=function(){o.notebookCache.setItem(a,u)};return n.then(c(),function(){return n.then(p(),function(){return d(),u},function(e){return n.then(h(),function(){return n.fail(e)},function(){return n.fail(e)})})})},e.prototype.uploadNotebookAsync=function(e,t){return this.workspaceBackend.uploadNotebookAsync(e,t)},e.prototype.getExperimentAnnotationsAsync=function(e){return this.workspaceBackend.getExperimentAnnotationsAsync(e)},e.prototype.addExperimentAnnotationsAsync=function(e,t){return this.workspaceBackend.addExperimentAnnotationsAsync(e,t)},e.prototype.addSerializedExperimentAnnotationsAsync=function(e,t){return this.workspaceBackend.addSerializedExperimentAnnotationsAsync(e,t)},e.prototype.updateExperimentAnnotationsAsync=function(e,t){return this.workspaceBackend.updateExperimentAnnotationsAsync(e,t)},e.prototype.deleteExperimentAnnotationsAsync=function(e,t){return this.workspaceBackend.deleteExperimentAnnotationsAsync(e,t)},e.prototype.getExperimentAsync=function(e,t){return this.workspaceBackend.getExperimentAsync(e,this.moduleCache,this.datasetCache,this.trainedModelCache,this.transformModulesCache,this.applicationCache.dataTypeRegistry,this,t)},e.prototype.getExperimentLineageAsync=function(e){return this.workspaceBackend.getExperimentLineageAsync(e)},e.prototype.getExperimentInfoAsync=function(e){return this.workspaceBackend.getExperimentInfoAsync(e)},e.prototype.getDataflowAsync=function(e,t){return this.workspaceBackend.getDataflowAsync(e,this.moduleCache,this.datasetCache,this.trainedModelCache,this.transformModulesCache,this.applicationCache.dataTypeRegistry,this,t)},e.prototype.createWebServiceGroupAsync=function(e,t,n,r){return this.workspaceBackend.createWebServiceGroupAsync(e,t,n,r)},e.prototype.getWebServiceGroupAsync=function(e){return this.workspaceBackend.getWebServiceGroupAsync(e)},e.prototype.updateWebServiceGroupAsync=function(e,t,n,r,i){return this.workspaceBackend.updateWebServiceGroupAsync(e,t,n,r,i)},e.prototype.listWebServiceGroupsAsync=function(){return this.workspaceBackend.listWebServiceGroupsAsync()},e.prototype.deleteWebServiceGroupAsync=function(e){return this.workspaceBackend.deleteWebServiceGroupAsync(e)},e.prototype.createModelPackageAsync=function(e,t,n){return this.workspaceBackend.createModelPackageAsync(e,t,n)},e.prototype.listModelPackagesAsync=function(e){return this.workspaceBackend.listModelPackagesAsync(e)},e.prototype.getModelPackageAsync=function(e,t){return this.workspaceBackend.getModelPackageAsync(e,t)},e.prototype.updateModelPackageAsync=function(e,t,n,r,i,s){return this.workspaceBackend.updateModelPackageAsync(e,t,n,r,i,s)},e.prototype.registerWebServiceAsync=function(e,t){return this.workspaceBackend.registerWebServiceAsync(e,t)},e.prototype.getWebServiceAsync=function(e,t){return this.workspaceBackend.getWebServiceAsync(e,t)},e.prototype.updateWebServiceAsync=function(e,t,n,r,i){return this.workspaceBackend.updateWebServiceAsync(e,t,n,r,i)},e.prototype.invokeScoreWebServiceAsync=function(e,t,n,r){return this.workspaceBackend.invokeScoreWebServiceAsync(e,t,n,r)},e.prototype.createNotebookAsync=function(e,t){return this.workspaceBackend.createNotebookAsync(e,t)},e.prototype.openNotebookAsync=function(e,t){return this.workspaceBackend.openNotebookAsync(e,t)},e.prototype.updateNotebookAsync=function(e,t){return this.workspaceBackend.updateNotebookAsync(e,t)},e.prototype.createCommunityExperimentAsync=function(e,t,n,r){return n===void 0&&(n=null),this.workspaceBackend.createCommunityExperimentAsync(e,t,n,r)},e.prototype.startGetCommunityExperimentIdAsync=function(e,t,n,r){return this.workspaceBackend.startGetCommunityExperimentIdAsync(e,t,n,r)},e.prototype.createCommunityNotebookAsync=function(e,t,n){return this.workspaceBackend.createCommunityNotebookAsync(e,t,n)},e.prototype.startGetCommunityNotebookIdAsync=function(e,t,n,r,i){return this.workspaceBackend.startGetCommunityNotebookIdAsync(e,t,n,r,i)},e.prototype.createCommunityCustomModuleAsync=function(e,t,n,r){return n===void 0&&(n=null),this.workspaceBackend.createCommunityCustomModuleAsync(e,t,n,r)},e.prototype.startGetCommunityModuleAsync=function(e,t,n,r,i,s){return this.workspaceBackend.startGetCommunityModuleAsync(e,t,n,r,i,s)},e.prototype.getNotebookUnpackStatusAsync=function(e){return this.workspaceBackend.getNotebookUnpackStatusAsync(e)},e.prototype.getUnpackStatusAsync=function(e){return this.workspaceBackend.getUnpackStatusAsync(e)},e.prototype.getUnpackModuleStatusAsync=function(e){return this.workspaceBackend.getUnpackModuleStatusAsync(e)},e.prototype.getWorkspaceSettingsAsync=function(){return this.workspaceBackend.getWorkspaceSettingsAsync()},e.prototype.updateWorkspaceSettings=function(e,t){return this.workspaceBackend.updateWorkspaceSettings(e,t)},e.prototype.archiveExperimentAsync=function(e){var t=this;return n.then(this.getExperimentAsync(e),function(e){return e.isArchived=!0,t.workspaceBackend.updateExperimentAsync(e)})},e.prototype.unarchiveExperimentAsync=function(e){var t=this;return n.then(this.getExperimentAsync(e),function(e){return e.isArchived=!1,t.workspaceBackend.updateExperimentAsync(e)})},e.prototype.listExperimentsAsync=function(e,t){var r=function(t){if(e.creator!==undefined&&e.creator!==t.Creator)return!1;if(e.includeArchived!==undefined&&e.includeArchived!==t.IsArchived)return!1;if(e.isDraft!==undefined){if(e.isDraft&&a.State.InDraft!==t.Status.StatusCode)return!1;if(!e.isDraft&&a.State.InDraft===t.Status.StatusCode)return!1}return!0};return n.then(this.workspaceBackend.listExperimentsAsync(e,t),function(e){return e.filter(r)})},e.prototype.listWorkspacesAsync=function(){return this.workspaceBackend.listWorkspacesAsync()},e.prototype.listUserWorkspacesAsync=function(e,t){return this.workspaceBackend.listUserWorkspacesAsync(e,t)},e.prototype.listWorkspacesPermissionsAsync=function(e,t){return this.workspaceBackend.listWorkspacesPermissionsAsync(e,t)},e.prototype.createExperimentStoragePackageAsync=function(e,t,n,r){return this.workspaceBackend.createExperimentStoragePackageAsync(e,t,n,r)},e.prototype.createExperimentStoragePackageForCommunityAsync=function(e,t,n,r){return this.workspaceBackend.createExperimentStoragePackageForCommunityAsync(e,t,n,r)},e.prototype.getExperimentStoragePackageAsync=function(e){return this.workspaceBackend.getExperimentStoragePackageAsync(e)},e.prototype.createExperimentFromStoragePackageAsync=function(e,t){return this.workspaceBackend.createExperimentFromStoragePackageAsync(e,t)},e.prototype.createNotebookStoragePackageForCommunityAsync=function(e,t){return this.workspaceBackend.createNotebookStoragePackageForCommunityAsync(e,t)},e.prototype.getNotebookStoragePackageAsync=function(e){return this.workspaceBackend.getNotebookStoragePackageAsync(e)},e.prototype.getModuleVisualizationData=function(e,t,n){return this.workspaceBackend.getModuleVisualizationData(e,t,n)},e.prototype.getModuleVisualizationDataItem=function(e,t,n,r,i,s,o){return this.workspaceBackend.getModuleVisualizationDataItem(e,t,n,r,i,s,o)},e.prototype.getDatasetVisualizationData=function(e){return this.workspaceBackend.getDatasetVisualizationData(e)},e.prototype.getPaginatedModuleVisualizationData=function(e,t,n,r,i,s,o){return this.workspaceBackend.getPaginatedModuleVisualizationData(e,t,n,r,i,s,o)},e.prototype.getModuleOutputSchema=function(e,t,n){return this.workspaceBackend.getModuleOutputSchema(e,t,n)},e.prototype.getDatasetSchema=function(e){return this.workspaceBackend.getDatasetSchema(e)},e.prototype.getModuleOutput=function(e,t,n){return this.workspaceBackend.getModuleOutput(e,t,n)},e.prototype.getModuleErrorLog=function(e,t){return this.workspaceBackend.getModuleErrorLog(e,t)},e.prototype.signOut=function(){return this.workspaceBackend.signOut()},e.prototype.getStorageSpaceQuotaAsync=function(){return this.workspaceBackend.getStorageSpaceQuotaAsync()},e.prototype.getExperimentDetailsAsync=function(e){return this.workspaceBackend.getExperimentDetailsAsync(e)},e.prototype.updateExperimentDetailsAsync=function(e,t){return this.workspaceBackend.updateExperimentDetailsAsync(e,t)},e.prototype.listProjects=function(e){return e===void 0&&(e=null),this.workspaceBackend.listProjects(e)},e.prototype.createProject=function(e){return this.workspaceBackend.createProject(e)},e.prototype.updateProject=function(e,t){return this.workspaceBackend.updateProject(e,t)},e.prototype.getDataGatewayBackend=function(){return this.workspaceBackend.dataGatewayBackend},e.prototype.startSubmitCompetitionEntryAsync=function(e,t){return this.workspaceBackend.startSubmitCompetitionEntryAsync(e,t)},e.prototype.getCompetitionSchemaDefinitionAsync=function(e,t){return this.workspaceBackend.getCompetitionSchemaDefinitionAsync(e,t)},e.prototype.getCompetitionSubmissionAllowedStatusAsync=function(e,t){return this.workspaceBackend.getCompetitionSubmissionAllowedStatusAsync(e,t)},e.prototype.getCompetitionTermsAndConditionsAsync=function(e,t){if(o.getCompetitionTermsFromESEnabled())return this.workspaceBackend.getCompetitionTermsAndConditionsAsync(e,t);var n=$.Deferred();return n.resolve("No terms at this point.")},e.prototype.createProjectAsync=function(e,t){var n=this;return this.workspaceBackend.createProjectAsync(e,t).done(function(e){n.projectLookup.addProject(e),n.projectCache.setItem(e.ContainerId,e),n.projectCache.scheduleRefreshUponNextAccess()})},e.prototype.getProjectAsync=function(e){var t=this;return this.workspaceBackend.getProjectAsync(e).done(function(e){t.projectLookup.addProject(e)})},e.prototype.getProjectsAsync=function(){var e=this;return this.workspaceBackend.getProjectsAsync().done(function(t){e.projectLookup.clear(),t.forEach(function(t){e.projectLookup.addProject(t),e.projectCache.setItem(t.ContainerId,t)}),e.projectCache.scheduleDelayedRefresh()})},e.prototype.updateProjectAsync=function(e,t){var n=this,r=this.projectCache.getItemIfCached(e.ContainerId);return this.workspaceBackend.updateProjectAsync(e,t).done(function(e){n.projectLookup.deleteProject(r),n.projectLookup.addProject(e),n.projectCache.setItem(e.ContainerId,e),n.projectCache.scheduleRefreshUponNextAccess()})},e.prototype.addToProjectAsync=function(e,t,n){var r=this;return n===void 0&&(n=!1),this.workspaceBackend.addToProjectAsync(e,t,n).done(function(e){r.projectLookup.addProject(e),r.projectCache.setItem(e.ContainerId,e),r.projectCache.scheduleRefreshUponNextAccess()})},e.prototype.removeFromProjectAsync=function(e,t,n){var r=this,i=this.projectCache.getItemIfCached(e);return this.workspaceBackend.removeFromProjectAsync(e,t,n).done(function(e){r.projectLookup.deleteProject(i),r.projectLookup.addProject(e),r.projectCache.setItem(e.ContainerId,e),r.projectCache.scheduleRefreshUponNextAccess()})},e.prototype.deleteProjectAsync=function(e){var t=this;return this.workspaceBackend.deleteProjectAsync(e).done(function(){t.projectLookup.deleteProject(e),t.projectCache.deleteItem(e.ContainerId),t.projectCache.scheduleRefreshUponNextAccess()})},e.prototype.getProjectAssetsDependenciesAsync=function(e,t){return this.workspaceBackend.getProjectAssetsDependenciesAsync(e,t)},e.prototype.getProjectAssetsReferencersAsync=function(e,t){return this.workspaceBackend.getProjectAssetsReferencersAsync(e,t)},e.prototype.getProjectListForAsset=function(e){return this.projectLookup.listProjectForAsset(e)},e.prototype.getProjectIdListForAsset=function(e){return this.projectLookup.listProjectIdForAsset(e)},e.prototype.createWebServicesUXApiKeyCookieAsync=function(e,t){return this.workspaceBackend.createWebServicesUXApiKeyCookieAsync(e,t)},e.prototype.setPromoEmailPreference=function(e,t){return this.workspaceBackend.setPromoEmailPreference(e,t)},e.prototype.getConnectionIsValid=function(e,t){return this.workspaceBackend.getConnectionIsValid(e,t)},e}();t.Workspace=c}),define("generated/editor/TS/Global",["require","exports"],function(e,t){var n;(function(e){e.Module="module",e.Dataset="dataset",e.TrainedModel="trainedmodel",e.Transform="transform",e.Connection="connection",e.InputPort="inputport",e.OutputPort="outputport",e.Entity="entity",e.WebServicePort="web service port",e.Annotation="annotation"})(n=t.EntityType||(t.EntityType={}));var r;(function(e){e.Experiment="experiment",e.Notebook="notebook"})(r=t.ResourceType||(t.ResourceType={})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(t.MouseButton||(t.MouseButton={}));var i=t.MouseButton;(function(e){e[e.Gecko=0]="Gecko",e[e.Webkit=1]="Webkit",e[e.IE9=2]="IE9",e[e.IE10=3]="IE10",e[e.IE11=4]="IE11",e[e.Edge=5]="Edge",e[e.Unknown=6]="Unknown"})(t.Browser||(t.Browser={}));var s=t.Browser;t.CurrentBrowser,/MSIE 9/.test(navigator.userAgent)?t.CurrentBrowser=2:/MSIE 10/.test(navigator.userAgent)?t.CurrentBrowser=3:/Trident/.test(navigator.userAgent)&&/rv:11/.test(navigator.userAgent)?t.CurrentBrowser=4:/Edge/.test(navigator.userAgent)?t.CurrentBrowser=5:/AppleWebKit/.test(navigator.userAgent)?t.CurrentBrowser=1:/Gecko/.test(navigator.userAgent)&&!/Trident/.test(navigator.userAgent)?t.CurrentBrowser=0:t.CurrentBrowser=6,t.errorHelpLinkGuidStart="60822377-DA7A-40B8-",t.errorHelpLinkGuidEnd="-D185D1509344",t.saveAsHelpLinkGuid="e548ed9d-064b-42fd-a1b7-4c34eccb88f8",t.rScriptEditorFocusWidth=600,t.rScriptEditorFocusHeight=400,function(e){e[e.Escape=27]="Escape",e[e.A=65]="A",e[e.Delete=46]="Delete",e[e.Minus=t.CurrentBrowser===0?173:189]="Minus",e[e.KeypadMinus=109]="KeypadMinus",e[e.Equals=t.CurrentBrowser===0?61:187]="Equals",e[e.KeypadPlus=107]="KeypadPlus",e[e.up=38]="up",e[e.down=40]="down",e[e.Zero=48]="Zero",e[e.KeypadZero=96]="KeypadZero",e[e.Nine=57]="Nine",e[e.KeypadNine=105]="KeypadNine",e[e.C=67]="C",e[e.F=70]="F",e[e.M=77]="M",e[e.S=83]="S",e[e.V=86]="V",e[e.X=88]="X",e[e.F2=113]="F2",e[e.Return=13]="Return",e[e.SpaceBar=32]="SpaceBar",e[e.F1=112]="F1",e[e.Tab=9]="Tab"}(t.Key||(t.Key={}));var o=t.Key,u;(function(e){e.Height=20})(u=t.ContextMenuItem||(t.ContextMenuItem={}));var a;(function(e){e.DefaultWidth=140})(a=t.ContextMenu||(t.ContextMenu={}));var f;(function(e){e.zoomToFitPadding=40})(f=t.Layout||(t.Layout={})),t.RectWidth=280,t.RectHeight=50;var l;(function(e){e.Height=24,e.Width=24,e.XOffset=10})(l=t.Icon||(t.Icon={}));var c;(function(e){e.Width=10,e.HalfWidth=e.Width/2,e.Height=5,e.HalfHeight=e.Height/2,e.InYPos=6,e.OutYPos=16,e.Offset=12})(c=t.Port||(t.Port={}));var h;(function(e){e.InPortYPos=10,e.OutPortYPos=-10,e.PortOffset=12,e.MaxSize=18,e.ReducedLength=15,e.ModuleBuffer=25,e.ModuleXOffset=45,e.ModuleYOffset=15,e.RectYOffset=3,e.MaxWidth=186,e.Height=15})(h=t.Label||(t.Label={}));var p;(function(e){e.RectXOffset=-5,e.RectYOffset=-2,e.WidthOffset=23,e.HeightOffset=5,e.PortYOffset=4,e.RectClass="tooltipRect",e.Class="staticText",e.XPos="0"})(p=t.Tooltip||(t.Tooltip={}));var d;(function(e){e.SplinePointMax=c.Height*15,e.SplinePointMin=c.Height*3})(d=t.Connector||(t.Connector={}));var v;(function(e){e.Experiment="experiment",e.WebService="webservice"})(v=t.ExperimentDataFlowType||(t.ExperimentDataFlowType={}));var m;(function(e){e.contentLeftMargin=25,e.contentRightMargin=25,e.contentVerticalMargin=20,e.startingWidth=250,e.startingHeight=180,e.collapsedHeight=40,e.collapsedWidth=40,e.minWidth=100,e.maxWidth=1500,e.minHeight=80,e.maxHeight=1500})(m=t.Annotation||(t.Annotation={})),t.maxModulePackageUploadSizeInBytes=2093796557,t.maxModulePackageUploadSizeDescription="1.95 gigabytes",t.maxUploadSizeInBytes=2093796557,t.maxUploadSizeInBytesNew=21474836480,t.maxUploadSizeDescription="1.95 gigabytes",t.maxUploadSizeDescriptionNew="20 gigabytes",function(e){e[e.SelectYourOwn=0]="SelectYourOwn",e[e.StockImageFromGallery=1]="StockImageFromGallery"}(t.ImageSelectionMode||(t.ImageSelectionMode={}));var g=t.ImageSelectionMode,y;(function(e){e.CompetitionUrlTagPrefix="CompetitionUri:",e.CompetitionUrlTagSearchRegex=new RegExp("^"+e.CompetitionUrlTagPrefix,"i"),e.CompetitionTenantIdTagPrefix="CompTenantId:",e.CompetitionTenantIdSearchRegex=new RegExp("^"+e.CompetitionTenantIdTagPrefix,"i"),e.GalleryUriTagPrefix="CompetitionGalleryUri:",e.GalleryUriTagSearchRegex=new RegExp("^"+e.GalleryUriTagPrefix,"i")})(y=t.CompetitionConstants||(t.CompetitionConstants={}));var b;(function(e){e.ModuleFromPaletteAnimationDuration=350,e.AnimatedZoomDuration=400,e.InitialZoomToFitYOffSet=50,e.NumberOfCacheLines=50})(b=t.ExperimentEditorControlConstants||(t.ExperimentEditorControlConstants={})),function(e){e[e.Histogram=0]="Histogram",e[e.BoxPlot=1]="BoxPlot",e[e.ScatterPlot=2]="ScatterPlot",e[e.MultiboxPlot=3]="MultiboxPlot",e[e.Crosstab=4]="Crosstab"}(t.GraphType||(t.GraphType={}));var w=t.GraphType}),define("generated/editor/TS/ViewModel/Dialogs/ModuleNameConflictDialogViewModel",["require","exports","../../../../DataLabClient/AssetNameValidationHelper","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util","../../../../DataLabClient/Validation","../../../../DataLabClient/Model/Workspace","../../../TS/Common/DialogInterfaces","../../../TS/Global"],function(e,t,n,r,i,s,o,u,a){var f=function(){function e(e){var t=this;this.renameInfo=null,this.nameInputs=_.reduce(e,function(e,n,r){return e.push({originalName:r,newName:t.createValidator(r,n)}),e},[]),this.nameInputs.forEach(function(e){return e.newName.startValidating()}),this.nameInputs.length===1?(this.title=r.moduleNameConflictTitle,this.text=r.moduleNameConflictText):(this.title=i.format(r.moduleNameConflictsTitle,String(this.nameInputs.length)),this.text=r.moduleNameConflictsText),this.labelText=r.moduleNameConflictLabel}return e.prototype.dismissed=function(e){e.accepted&&(this.renameInfo=_.reduce(this.nameInputs,function(e,t){return e[t.originalName]=t.newName().trim(),e},{}))},e.prototype.canBeAccepted=function(){var e=this.nameInputs.map(function(e){return e.newName}).every(function(e){return e.isValid()});return e},e.prototype.enterToAccept=function(e,t){return t.keyCode===13&&u.DialogHost?(u.DialogHost.acceptActiveDialog(),!1):!0},e.prototype.createValidator=function(e,t){var i=this,u=null,a=new s.ValidatorList;a.push(n.generateNameValidator(r.moduleType,t||null,o.workspace.applicationCache.moduleCache,u)),a.push(function(t){var n=i.nameInputs.filter(function(t){return t.originalName!==e}).map(function(e){return e.newName().trim()}).some(function(e){return e===t});return n?r.duplicateModuleName:null});var f=s.validatableObservable(t,function(e){return a.validate(e.trim())});return f},e}();t.ModuleNameConflictDialogViewModel=f}),define("generated/editor/TS/ViewModel/ExperimentEditor/PackagePollingHelpers",["require","exports","../../../../DataLabClient/Constants","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i){function s(e){var t=$.Deferred();return l(e,0,t,i.workspace.getUnpackStatusAsync.bind(i.workspace)),r.when(t.promise())}function o(e){var t=$.Deferred();return this.pollOnPackageHandler(e,0,t,i.workspace.getExperimentStoragePackageAsync.bind(i.workspace)),r.when(t.promise())}function u(e){var t=$.Deferred();return l(e,0,t,i.workspace.getNotebookUnpackStatusAsync.bind(i.workspace)),r.when(t.promise())}function a(e){var t=$.Deferred();return l(e,0,t,i.workspace.getNotebookStoragePackageAsync.bind(i.workspace)),r.when(t.promise())}function f(e){var t=$.Deferred();return l(e,0,t,i.workspace.getUnpackModuleStatusAsync.bind(i.workspace)),r.when(t.promise())}function l(e,t,r,i){i(e.ActivityId).done(function(e){e.Status==="Pending"?t>n.MaxPollCount?r.reject(new Error("Exceeded retry count")):setTimeout(function(){l(e,t+1,r,i)},n.PollInterval):e.Status==="Complete"?r.resolve(e):e.Status==="Failed"?r.resolve(e):r.reject(new Error("Unknown status returned for unpacking package"))}).fail(function(e){return r.reject(e)})}t.pollOnUnpack=s,t.pollOnPack=o,t.pollOnNotebookUnpack=u,t.pollOnNotebookPack=a,t.pollOnModuleUnpack=f,t.pollOnPackageHandler=l}),define("generated/editor/TS/ViewModel/Operations/AsyncOperation",["require","exports","../../../../DataLabClient/Logging/Logging"],function(e,t,n){var r=function(){function e(){this.isRunning=ko.observable(!1),this.addNotification=function(e){Shell.UI.Notifications.add(e)},this.removeNotification=function(e){Shell.UI.Notifications.remove(e)}}return e.prototype.runAsync=function(){var e=this;this.isRunning(!0);try{return this.runInternalAsync().always(function(){e.isRunning(!1)}).done(function(){e.progressSuccess()}).fail(function(t){var n=t&&t.message?t.message:"";e.progressError(n)})}catch(t){var r=t&&t.message?t.message:"";return this.progressError(r),n.error(r),this.reject(t)}},e.prototype.runInternalAsync=function(){throw new Error("The method is abstract.")},e.prototype.reject=function(e){return $.Deferred().reject(e).promise()},e.prototype.startProgress=function(e){this.progress=new Shell.UI.Notifications.Progress(e,"active",!0),this.step=null,this.progress.setActions([new Shell.UI.Notifications.Buttons.close]),this.addNotification(this.progress)},e.prototype.addStep=function(e){this.step&&this.step.setStatus("success"),this.progress&&(this.step=this.progress.addStep(e,"active"))},e.prototype.updateCurrentStep=function(e){this.step&&this.step.setTitle(e)},e.prototype.progressSuccess=function(){this.step&&this.step.setStatus("success"),this.progress&&this.progress.setStatus("success")},e.prototype.progressError=function(e){this.progress&&(this.progress.setStatus("error"),this.step?(this.step.setStatus("error"),this.step.setDetailsText(e)):this.progress.setDetailsText(e))},e}();t.AsyncOperation=r}),define("generated/editor/TS/ViewModel/Operations/ExperimentProcessor/Context",["require","exports"],function(e,t){var n=function(){function e(){this.workspace=null,this.inputNode=null,this.outputNode=null,this.trainedModelNode=null,this.experimentEditorViewModel=null,this.asyncOperation=null}return e}();t.Context=n}),define("generated/editor/TS/View/Bubble/Position",["require","exports"],function(e,t){(function(e){e[e.None=0]="None",e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right"})(t.ArrowDirection||(t.ArrowDirection={}));var n=t.ArrowDirection;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Top=3]="Top",e[e.Bottom=4]="Bottom"})(t.ArrowAlignment||(t.ArrowAlignment={}));var r=t.ArrowAlignment,i=function(){function e(e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=2),this.x=ko.observable(e),this.y=ko.observable(t),this.arrowAlignment=ko.observable(r),this.arrowDirection=ko.observable(n)}return e}();t.Position=i}),define("generated/editor/TS/View/Bubble/ViewPort",["require","exports"],function(e,t){var n=function(){function e(){this.left=ko.observable(0),this.top=ko.observable(0),this.width=ko.observable(0),this.height=ko.observable(0),this.refreshed=new ko.subscribable}return e.prototype.refresh=function(){var e=$(window);this.left(e.scrollLeft()),this.top(e.scrollTop()),this.width(e.width()),this.height(e.height()),this.refreshed.notifySubscribers(this)},e.getInstance=function(){return e.instance||(e.instance=new e,e.instance.refresh(),$(window).resize(function(t){return e.instance.refresh()}),$(window).scroll(function(t){return e.instance.refresh()})),e.instance},e}();t.ViewPort=n}),define("generated/editor/TS/View/Bubble/BubbleViewModel",["require","exports","../../../TS/View/Bubble/Position","../../../TS/View/Bubble/ViewPort","../../../../DataLabClient/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=function(){function e(){var e=this;this.steps=ko.observableArray(),this.progressSteps=ko.observableArray(),this.currentIndex=ko.observable(-1),this.currentProgressIndex=ko.observable(-1),this.visible=ko.observable(!1),this.overlayVisible=ko.observable(!1),this.showElementHighlight=ko.observable(!1),this.elementHightlightRect=ko.observable({left:0,top:0,width:0,height:0}),this.showOverlay=ko.observable(!0),this.totalSteps=ko.computed(function(){return e.steps().length}),this.current=ko.observable();var t=ko.computed(function(){if(e.currentIndex()>=0&&e.currentIndex()<e.totalSteps()){var t=e.steps()[e.currentIndex()];u.then(t.beforeLoadHandlerAsync(e),function(){t.loadHandlerAsync(e).done(function(){e.current(t),e.visible(!0)})})}});this.shouldShowRightButton=ko.computed(function(){return s.animatedTourEnabled()?e.current()&&e.current().shouldShowRightButton:e.currentIndex()<e.totalSteps()-1}),this.shouldShowLeftButton=ko.computed(function(){return s.animatedTourEnabled()?e.current()&&e.current().shouldShowLeftButton:e.currentIndex()>0&&e.current()&&e.current().shouldShowLeftButton}),this.isLastStep=ko.computed(function(){return e.currentIndex()===e.totalSteps()-1}),this.shouldShowFinishButton=ko.computed(function(){return e.current()&&e.isLastStep()&&e.current().shouldShowFinishButton}),this.shouldShowMidLeftButton=ko.computed(function(){return e.current()&&e.current().shouldShowMidLeftButton}),this.shouldShowMidRightButton=ko.computed(function(){return e.current()&&e.current().shouldShowMidRightButton}),this.midLeftButtonText=ko.computed(function(){return e.current()?e.current().midLeftButtonText:""}),this.midRightButtonText=ko.computed(function(){return e.current()?e.current().midRightButtonText:""}),this.leftButtonText=ko.computed(function(){return e.current()?e.current().leftButtonText:""}),this.rightButtonText=ko.computed(function(){return e.current()?e.current().rightButtonText:""}),this.finishButtonText=ko.computed(function(){return e.current()?e.current().finishButtonText:""}),this.isCurrentStepAProgressStep=ko.computed(function(){return e.current()&&e.current().isProgressStep}),this.currentStepNumber=ko.computed(function(){if(!e.current()||!e.current().isProgressStep)return 0;var t=0;for(var n=0;n<e.steps().length;n++){e.steps()[n].isProgressStep&&t++;if(n>=e.currentIndex())break}return t}),this.progressStepCount=ko.computed(function(){return e.progressSteps().length}),this.arrowClassId=ko.computed(function(){if(!e.current()||!e.current().position()||!e.attachBubbleToElement)return"hidden";var t=e.current().position();return t.arrowDirection()===1?"arrow-up":t.arrowDirection()===4?"arrow-right":t.arrowDirection()===2?"arrow-down":t.arrowDirection()===3?"arrow-left":"hidden"}),this.arrowX=ko.computed(function(){if(!e.current()||!e.current().position())return 0;var t=e.current(),n=t.position();return n.arrowDirection()===3?0:n.arrowDirection()===4?t.width()+10:n.arrowAlignment()===0?30:n.arrowAlignment()===2?t.width()/2:n.arrowAlignment()===1?t.width()-30:0}),this.arrowY=ko.computed(function(){if(!e.current()||!e.current().position())return 0;var t=e.current(),n=t.position();return n.arrowDirection()===1?0:n.arrowDirection()===2?t.height()+10:n.arrowAlignment()===3?30:n.arrowAlignment()===2?t.height()/2:n.arrowAlignment()===4?t.height()-30:0}),this.bubbleX=ko.computed(function(){if(!e.current()||!e.current().position())return 0;var t=e.current(),n=t.position(),i=0;n.arrowDirection()===4?i=n.x()-t.width()-20:n.arrowDirection()===3?i=n.x():n.arrowAlignment()===0?i=n.x()-40:n.arrowAlignment()===2?i=n.x()-t.width()/2-10:n.arrowAlignment()===1&&(i=n.x()-t.width()+20);var s=r.ViewPort.getInstance().width();return i<0?i=0:i+t.width()>s&&(i-=i+t.width()-s),i}),this.bubbleY=ko.computed(function(){if(!e.current()||!e.current().position())return 0;var t=e.current(),n=t.position(),i=0;n.arrowDirection()===2?i=n.y()-t.height()-20:n.arrowDirection()===1?i=n.y():n.arrowAlignment()===3?i=n.y()-40:n.arrowAlignment()===2?i=n.y()-t.height()/2-10:n.arrowAlignment()===4&&(i=n.y()-t.height()+20);var s=r.ViewPort.getInstance().height();return i<0?i=0:i+t.height()>s&&(i-=i+t.height()-s),i}),this.width=ko.computed(function(){return e.current()?e.current().width():0}),this.height=ko.computed(function(){return e.current()?e.current().height():0}),this.title=ko.computed(function(){return e.current()?e.current().title():""}),this.content=ko.computed(function(){return e.current()?e.current().content():""}),this.hightlightRect=ko.computed(function(){return!e.current()||!e.current().highlight()||!e.attachBubbleToElement?null:e.visible()?e.current().highlight():{left:0,top:0,width:0,height:0}})}return e.prototype.addStep=function(e){this.steps.push(e),e.isProgressStep&&this.progressSteps.push(e)},e.prototype.setCurrentAsync=function(e,t){var n=this;t===void 0&&(t=!0);var r=$.Deferred();return s.animatedTourEnabled()&&e>-1&&o.featureUsage({featureID:155,groupID:i.FeatureId[this.id],data:e}),this.current()&&this.visible(!1),t?setTimeout(function(){n.currentIndex(e),r.resolve(e)},500):(this.currentIndex(e),r.resolve(e)),r.promise()},e.prototype.close=function(){s.animatedTourEnabled()&&o.featureUsage({featureID:184,groupID:i.FeatureId[this.id],data:this.currentIndex()}),this.dismiss(!0)},e.prototype.setDontShowAgain=function(){this.userSettings&&(o.featureUsage({featureID:i.FeatureId[this.id+"DontShowAgain"],groupID:i.FeatureId[this.id]}),this.userSettings.neverShowAgain(this.id))},e.prototype.dismiss=function(e){e===void 0&&(e=!0),$(window).unbind("hashchange.animatedExperiment"),o.featureUsage({featureID:80,groupID:79,data:JSON.stringify({TourId:this.id,Step:this.currentIndex(),NeverShowAgain:s.animatedTourEnabled()?!1:e})}),s.animatedTourEnabled()||e&&this.userSettings&&this.userSettings.neverShowAgain(this.id),this.steps.removeAll(),this.progressSteps.removeAll(),this.setCurrentAsync(-1,!1),this.visible(!1),this.overlayVisible(!1)},e.prototype.show=function(){this.overlayVisible(!0),this.visible(!0)},e.prototype.midLeftButtonAsync=function(){return this.current().midLeftButtonAsync(this)},e.prototype.midRightButtonAsync=function(){return this.current().midRightButtonAsync(this)},e.prototype.nextAsync=function(){var e=this;if(this.visible()===!1)return;return s.animatedTourEnabled()&&o.featureUsage({featureID:183,groupID:i.FeatureId[this.id],data:this.currentIndex()}),this.visible(!1),u.then(this.current().nextHandlerAsync(this),function(){return e.setCurrentAsync(e.currentIndex()+1)}).fail($.noop)},e.prototype.backAsync=function(){var e=this;if(this.visible()===!1)return;return s.animatedTourEnabled()&&o.featureUsage({featureID:156,groupID:i.FeatureId[this.id],data:this.currentIndex()}),this.visible(!1),u.then(this.current().backHandlerAsync(this),function(){return u.then(e.steps()[e.currentIndex()-1].undoStepAsync(e),function(){return e.setCurrentAsync(e.currentIndex()-1)})})},e.prototype.gotoAsync=function(e){return this.setCurrentAsync(e)},e.prototype.copyFromAsync=function(e){var t=this;return this.dismiss(),this.id=e.id,this.userSettings=e.userSettings,this.showOverlay(e.showOverlay),this.dismissOnClick=e.dismissOnClick,this.dismissOnResize=e.dismissOnResize,this.dismissOnScroll=e.dismissOnScroll,this.canSkipSteps=e.canSkipSteps,this.attachBubbleToElement=e.attachBubbleToElement,e.steps.forEach(function(e){t.steps.push(e),e.isProgressStep&&t.progressSteps.push(e)}),this.setCurrentAsync(e.start,!1)},e.prototype.onResize=function(){this.dismissOnResize&&this.overlayVisible()&&this.dismiss()},e.prototype.onScroll=function(){this.dismissOnScroll&&this.overlayVisible()&&this.dismiss()},e.prototype.onClick=function(e){if(this.dismissOnClick&&this.overlayVisible()){var t=this.bubbleX()+10,n=this.bubbleY()+10;(e.pageX<t||e.pageX>t+this.width()||e.pageY<n||e.pageY>n+this.height())&&this.dismiss()}},e}();t.BubbleViewModel=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/Bubble/PositionLocators",["require","exports","../../../TS/View/Bubble/Position","../../../TS/View/Bubble/ViewPort"],function(e,t,n,r){var i=function(){function e(e){this.position=e}return e.prototype.getPosition=function(){return this.position},e}();t.FixedPositionLocator=i;var s=function(){function e(e,t){t===void 0&&(t=r.ViewPort.getInstance()),this.getRect=e,this.viewPort=t}return e.getPositionFromRectAndViewPort=function(e,t,r){r===void 0&&(r=200);var i=t.width(),s=t.height();if(!e)return new n.Position(t.left()+t.width()/2,t.top()+t.height()/2,0);var o=e.left-t.left(),u=t.left()+t.width()-e.left-e.width,a=e.top-t.top(),f=t.top()+t.height()-e.top-e.height,l=2,c=0,h=t.top()+t.height()/2,p=t.left()+t.width()/2;if(i>0&&s>0){var d,v=o/i,m=u/i;c=v>m?4:3,d=v>m?v:m;var g=a/s,y=f/s;c=g>d&&g>=y?2:c,c=y>d&&y>=g?1:c;switch(c){case 3:p=e.left+e.width,h=e.top+e.height/2;break;case 4:p=e.left,h=e.top+e.height/2;break;case 1:p=e.left+e.width/2,h=e.top+e.height;break;case 2:p=e.left+e.width/2,h=e.top;break;default:}if(c===3||c===4)l=h<r?3:s-h<r?4:l;else if(c===1||c===2)l=p<r?0:i-p<r?1:l}return new n.Position(p,h,c,l)},e.prototype.getPosition=function(){return e.getPositionFromRectAndViewPort(this.getRect(),this.viewPort)},e}();t.RectPositionLocator=s;var o=function(e){function t(t){e.call(this,function(){var e=t();if(!e)return null;var n=e.getBoundingClientRect();return{left:n.left-10,top:n.top-10,width:n.width+20,height:n.height+20}})}return __extends(t,e),t}(s);t.HtmlElementPositionLocator=o;var u=function(e){function t(t){e.call(this,function(){var e=t();return!e||!e.length?null:e.get(0)})}return __extends(t,e),t}(o);t.JQuerySelectorPositionLocator=u;var a=function(e){function t(n){e.call(this,function(){var e=n instanceof Array?n:[n],r=[];return e.forEach(function(e){var t=typeof e=="string"?function(){return $(e)}:e,n=new u(function(){return t()});n.getRect()&&r.push(n)}),t.computeBoundingBox(r)})}return __extends(t,e),t.computeBoundingBox=function(e){if(e.length===0)return null;var t=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.forEach(function(e){var s=e.getRect();t=t<s.left?t:s.left,n=n<s.top?n:s.top,r=r>s.left+s.width?r:s.left+s.width,i=i>s.top+s.height?i:s.top+s.height}),{left:t,top:n,width:r-t,height:i-n}},t}(s);t.MultiJQuerySelectorPositionLocator=a}),define("generated/editor/TS/View/Bubble/Step",["require","exports","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r){var i=function(){function e(t,r,i,s,o,u){o===void 0&&(o=500),u===void 0&&(u=200),this.title=ko.observable(""),this.content=ko.observable(""),this.shouldShowLeftButton=!0,this.shouldShowRightButton=!0,this.shouldShowMidLeftButton=!1,this.shouldShowMidRightButton=!1,this.shouldShowFinishButton=!0,this.isProgressStep=!0,this.midLeftButtonText="",this.midRightButtonText="",this.leftButtonText=n.bubbleBackButtonText,this.rightButtonText=n.bubbleNextButtonText,this.finishButtonText=n.bubbleFinishedButtonText,this.title(t),this.content(r),this.width=ko.observable(o),this.height=ko.observable(u),this.beforeLoadHandlerAsync=e.voidPromise,this.loadHandlerAsync=e.voidPromise,this.nextHandlerAsync=e.voidPromise,this.backHandlerAsync=e.voidPromise,this.undoStepAsync=e.voidPromise,this.midLeftButtonAsync=e.voidPromise,this.midRightButtonAsync=e.voidPromise,this.position=function(){return i.getPosition()},this.highlight=function(){return s?s():null}}return e.voidPromise=function(e){var t=$.Deferred();return t.resolve(),r.when(t.promise())},e}();t.Step=i}),define("generated/editor/TS/View/Bubble/UserSettings",["require","exports"],function(e,t){var n=function(){function e(){}return e.prototype.shouldShowBubble=function(t){if(typeof Storage!="undefined"&&Shell.Utilities.isLocalStorageAvailable()){var n=localStorage.getItem(e.storageNamespace+t);if(n)return!1}return!0},e.prototype.neverShowAgain=function(t){typeof Storage!="undefined"&&Shell.Utilities.isLocalStorageAvailable()&&localStorage.setItem(e.storageNamespace+t,"false")},e.prototype.resetAll=function(){if(typeof Storage!="undefined"&&Shell.Utilities.isLocalStorageAvailable()){var t=localStorage.length;for(var n=t;n>=0;n--){var r=localStorage.key(n);r.indexOf(e.storageNamespace)===0&&localStorage.removeItem(r)}}},e.storageNamespace="bubble.",e}();t.LocalStorageUserSettings=n}),define("generated/editor/TS/View/Bubble/Bubble",["require","exports","../../../TS/View/Bubble/BubbleViewModel","../../../TS/View/Bubble/PositionLocators","../../../TS/View/Bubble/Step","../../../TS/View/Bubble/UserSettings","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o){function f(e){if(a&&a.steps().length>0&&!a.visible())return $.Deferred().resolve();this.dismiss();if(!a){a=new n.BubbleViewModel;var t=this.getBubbleContainer();ko.applyBindings(a,t),$(window).on("resize",function(e){return a.onResize()}),$(window).on("scroll",function(e){return a.onScroll()}),$(document).on("click",function(e){return a.onClick(e)})}return e.alwaysShow||e.userSettings&&e.userSettings.shouldShowBubble(e.id)?a.copyFromAsync(e).then(function(){return a.show(),e.autoDismiss&&setTimeout(function(){return l()},e.autoDismissDelayMS),a}):o.when(a)}function l(){a&&a.dismiss()}function c(){var e=$("#bubble-container");return e.length?e.get(0):(e=$(ExperimentEditorTemplates._bubbleMarkup),e.appendTo("body"),e.get(0))}var u=function(){function e(e){this.dismissOnScroll=!1,this.dismissOnResize=!1,this.dismissOnClick=!1,this.steps=[],this.start=0,this.userSettings=new s.LocalStorageUserSettings,this.alwaysShow=!1,this.showOverlay=!0,this.autoDismiss=!1,this.autoDismissDelayMS=4e3,this.canSkipSteps=!0,this.attachBubbleToElement=!0;if(!e)throw new Error("Bubble options ID is required.");this.id=e}return e.prototype.addStepByPosition=function(e,t,n,s,o,u){var a=new i.Step(n,s,new r.RectPositionLocator(function(){return{left:e,top:t,width:0,height:0}}),null,o,u);return this.steps.push(a),a},e.prototype.addStepByJquerySelector=function(e,t,n,s,o){var u;if(e instanceof Array)u=new r.MultiJQuerySelectorPositionLocator(e);else{var a=typeof e=="string"?function(){return $(e)}:e;u=new r.JQuerySelectorPositionLocator(a)}var f=new i.Step(t,n,u,function(){return u.getRect()},s,o);return this.steps.push(f),f},e.prototype.addStepByGraphNode=function(e,t,n){return this.addStepByJquerySelector(".customElements #node-"+e.id,t,n)},e.prototype.addStepAtCenter=function(e,t,n,s){var o=new i.Step(e,t,new r.RectPositionLocator(function(){return null}),null,n,s);return this.steps.push(o),o},e.oneLineDimensions={width:500,height:200},e.twoLineDimensions={width:500,height:220},e.threeLineDimensions={width:500,height:240},e.fourLineDimensions={width:500,height:260},e.retirementDimensions={width:640,height:438},e}();t.Options=u;var a;t.showAsync=f,t.dismiss=l,t.getBubbleContainer=c}),define("generated/editor/TS/ViewModel/Operations/GuideTours",["require","exports","../../../TS/View/Bubble/Bubble","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(){function e(){}return e.showPrepareWebServiceTourAsync=function(e,t,i){var s=new n.Options("PrepareWebServiceTour");if(e){var o=s.addStepByGraphNode(e,r.createScoreTutorialInputOutputNodesTitle,r.createScoreTutorialInputOutputNodesContent);o.shouldShowLeftButton=!1}var u=s.addStepByJquerySelector("#displayFlowSwitch .displayFlowSwitchIcon",r.createScoreTutorialDataFlowTitle,r.createScoreTutorialDataFlowContent);return e||(u.shouldShowLeftButton=!1),t.applyPaletteSearch(""),t.categories().forEach(function(e){e.name()===i?e.isCollapsed(!1):e.isCollapsed(!0)}),s.addStepByJquerySelector(function(){var e=$(".xe-utilityPanel div.paletteCategory-title:contains('"+i+"')");return e.length?e.first().parent().parent().parent().parent():null},r.createScoreTutorialAddInputOutputNodesTitle,r.createScoreTutorialAddInputOutputNodesContent),s.addStepByJquerySelector(function(){var e=$("div.fxs-command-text").filter(function(e,t){return $(t).text()===r.commandsRun});if(!e.length)return;return e.first().parent().parent()},r.runExperimentCommandTourTitle,r.runExperimentCommandTourContent),n.showAsync(s)},e.showCreatingScoringExperimentTourAsync=function(e,t,i,s){var o=new n.Options("CreateScoringGraphTour"),u=o.addStepByJquerySelector("ul.project-experiments-tabs > li.active",r.createScoreTutorialNewExperimentTitle,r.createScoreTutorialNewExperimentContent);return u.shouldShowLeftButton=!1,u.isProgressStep=!1,e&&o.addStepByGraphNode(e,r.createScoreTutorialInputOutputNodesTitle,r.createScoreTutorialInputOutputNodesContent),o.addStepByJquerySelector("#displayFlowSwitch .displayFlowSwitchIcon",r.createScoreTutorialDataFlowTitle,r.createScoreTutorialDataFlowContent),t.applyPaletteSearch(""),t.categories().forEach(function(e){e.name()===i?e.isCollapsed(!1):e.isCollapsed(!0)}),o.addStepByJquerySelector(function(){var e=$(".xe-utilityPanel div.paletteCategory-title:contains('"+i+"')");return e.length?e.first().parent().parent().parent().parent():null},r.createScoreTutorialAddInputOutputNodesTitle,r.createScoreTutorialAddInputOutputNodesContent),o.addStepByGraphNode(s,r.createScoreTutorialTrainedModelTitle,r.createScoreTutorialTrainedModelContent),o.addStepByJquerySelector(function(){var e=$("div.fxs-command-text").filter(function(e,t){return $(t).text()===r.commandsRun});if(!e.length)return;return e.first().parent().parent()},r.runExperimentCommandTourTitle,r.runExperimentCommandTourContent),n.showAsync(o)},e.showCreatingScoringGraphCommandTour=function(){var e=new n.Options("CreateScoringGraphCommandTour");e.showOverlay=!1,e.dismissOnClick=!0;var t=e.addStepByJquerySelector(function(){var e=$("div.fxs-command-text").filter(function(e,t){return $(t).text()===r.setupWebServiceCommandTitle});if(!e.length)return;return e.first().parent().parent()},r.createScoreCommandTourTitle,r.createScoreCommandTourContent);t.shouldShowLeftButton=!1,t.isProgressStep=!1,n.showAsync(e)},e.showUpdatingScoringGraphCommandTour=function(){var e=new n.Options("UpdateScoringGraphCommandTour");e.showOverlay=!1,e.dismissOnClick=!0;var t=e.addStepByJquerySelector(function(){var e=$("div.fxs-command-text").filter(function(e,t){return $(t).text()===r.updateScoreGraphCommandTitle});if(!e.length)return;return e.first().parent().parent()},r.updateScoreCommandTourTitle,r.updateScoreCommandTourContent,550,200);t.shouldShowLeftButton=!1,t.isProgressStep=!1,n.showAsync(e)},e.showPublishWebServiceCommandTour=function(){var e=new n.Options("PublishWebServiceCommandTour");e.showOverlay=!1,e.dismissOnClick=!0;var t=e.addStepByJquerySelector(function(){var e=$("div.fxs-command-text").filter(function(e,t){return $(t).text()===r.publishWebServiceCommandTitle});if(!e.length)return;return e.first().parent().parent()},r.publishWebServiceCommandTourTitle,r.publishWebServiceCommandTourContent);t.shouldShowLeftButton=!1,t.isProgressStep=!1,n.showAsync(e)},e.showMultipleTrainModuleSelectionTour=function(){var e=new n.Options("MultipleTrainModuleSelectionTour"),t=e.addStepAtCenter(r.multipleTrainModuleSelectionTourTitle,i.format(r.multipleTrainModuleSelectionTourContent,"<br><img src='/Libraries/Images/GuidedScoring/train_module_snapshot.png'/><br>"),400,300);t.shouldShowLeftButton=!1,t.isProgressStep=!1,e.alwaysShow=!0,e.dismissOnScroll=!1,n.showAsync(e)},e}();t.GuideTours=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/AnimationOperation",["require","exports","../../../TS/ViewModel/Operations/AsyncOperation"],function(e,t,n){var r=function(){function e(){this.context={}}return e}();t.AnimationContext=r;var i=function(e){function t(){e.apply(this,arguments),this.totalSteps=50,this.interval=10,this.currentStep=0,this.animations=[]}return __extends(t,e),t.prototype.runInternalAsync=function(){var e=this,t=$.Deferred();return this.animations.length?this.intervalId=setInterval(function(){e.currentStep++,e.animations.forEach(function(t){return t.stepFunc(e.currentStep,t.context)}),e.currentStep>=e.totalSteps&&(clearInterval(e.intervalId),t.resolve())},10):t.resolve(),t.promise()},t}(n.AsyncOperation);t.AnimationOperation=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/CustomBindingHandlers/JQueryTabs",["require","exports","../../../../DataLabClient/Disposable"],function(e,t,n){function r(e){return $(e).children(":gt(0)")}function i(e){var t=$(e).find("ul li a"),n=r(e);n.uniqueId(),n.each(function(e,n){var r=$(n).attr("id"),i=t.get(e);$(i).attr("href","#"+r)})}var s=function(){function e(e,t){var n=this;this.isEnabled=e,this.isDisabledTooltip=t,this.isEnabled=e?e:ko.observable(!0),this.isDisabled=ko.computed(function(){return!n.isEnabled()}),this.isDisabledTooltip=t?t:ko.observable("")}return e}();t.Disableable=s;var s;(function(e){function t(e){var t=e.filter(function(e){return e.isDisabled()});return t.map(function(e,t){return t})}function n(e){var t,n=e.some(function(e,n){if(e.isEnabled())return t=n,!0});if(!n)throw new Error("At least one item must be enabled.");return t}e.getDisabledIndices=t,e.getFirstEnabledIndex=n})(s=t.Disableable||(t.Disableable={}));var o=function(e){function t(t,n,r,i,s){e.call(this,i,s),this.markup=t,this.viewModel=n,this.title=r,this.onBeforeActivate=null}return __extends(t,e),t}(s);t.TabView=o;var u=function(e){function t(){var t=this;e.call(this),this.activeTabView=ko.observable(),this.onTabActivated=function(e,n){t.activeTabView(n)},this.onBeforeTabActivated=function(e,t){t.onBeforeActivate&&t.onBeforeActivate()},this.heading=ko.computed(function(){var e=t.activeTabView();if(e){var n=e.viewModel;if(n.heading&&n.heading())return n.heading()}return null}),this.registerForDisposal(new n.DisposableKnockoutObject(this.heading))}return __extends(t,e),t}(n.Disposable);t.JQueryTabsContainer=u,ko.bindingHandlers.jQueryTabs={init:function(e,t,n,o,a){var f=t()||{};ko.applyBindingsToDescendants(a,e);var l=f.views();i(e);var c={};return f.onTabActivated&&(c.activate=function(t,n){var i=r(e).index(n.oldPanel),s=r(e).index(n.newPanel);f.onTabActivated(l[i],l[s])}),f.onBeforeTabActivated&&(c.beforeActivate=function(t,n){var i=r(e).index(n.oldPanel),s=r(e).index(n.newPanel);f.onBeforeTabActivated(l[i],l[s])}),c.disabled=s.getDisabledIndices(l),typeof f.active!="number"||l[f.active].isDisabled()?c.active=s.getFirstEnabledIndex(l):c.active=f.active,o instanceof u&&o.activeTabView(l[c.active]),$(e).jQueryUITabs(c),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){e&&$(e).data("uiTabs")&&($(e).jQueryUITabs("destroy"),e=null)}),{controlsDescendantBindings:!0}},update:function(e,t,n,r,o){var u=t()||{},a=u.views(),f=s.getDisabledIndices(a);setTimeout(function(){e&&$(e).data("uiTabs")&&(i(e),$(e).jQueryUITabs("refresh"),$(e).jQueryUITabs("option","disabled",f))},0)}}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/CustomUX",["require","exports","../../../TS/View/CustomBindingHandlers/JQueryTabs","../../../../DataLabClient/Disposable"],function(e,t,n,r){function o(e){var t=$(Shell.Utilities.getDocumentActiveElement()).is('input[type="text"]:focus, textarea:focus')&&!$(Shell.Utilities.getDocumentActiveElement()).attr("readonly");if(e.keyCode===8&&!t)return e.preventDefault();if(e.keyCode===27)return f()}function u(e,i,o,u,a,c,h,p){o===void 0&&(o="100%"),u===void 0&&(u="100%"),h===void 0&&(h=!0),p===void 0&&(p="");var d,v=[new n.TabView(e,i,null)];s={views:v,onCloseAction:a};var m=new r.DisposableEventListener(document,"keydown",function(e){var t=$(Shell.Utilities.getDocumentActiveElement()).is('input[type="text"]:focus, textarea:focus')&&!$(Shell.Utilities.getDocumentActiveElement()).attr("readonly");if(e.keyCode===8&&!t)return e.preventDefault();if(e.keyCode===27)return f()});i.registerForDisposal(m),$(".customUX").removeClass("hidden");if(c!=null){var g=ExperimentEditorTemplates._customUXContainerMarkup,y=new l(u,o,null,c);$(".customUX").append(g);var b=document.querySelector(".customUX .customUXWindow");ko.applyBindings(y,b),$(".customUXWindow").append("<div class='visualizationContentWrapper'>"+e+"</div>"),d=document.querySelector(".customUX .visualizationContentWrapper")}else $(".customUX").append("<div class='customUXWindow "+p+"' style='height: "+o+"; width: "+u+"'></div>"),h&&$(".customUXWindow").append("<div class='icon close'></div>"),$(".customUXWindow").append("<div class='customUXWindowContentWrapper'>"+e+"</div>"),d=document.querySelector(".customUX .customUXWindow");h&&($(".customUXWindow .icon.close").off("mousedown"),$(".customUXWindow .icon.close").on("mousedown",function(){f()}),$(".customUXWindow .dlwux-fx-dialog-ok").off("mousedown"),$(".customUXWindow .dlwux-fx-dialog-ok").one("mousedown",function(){f()})),ko.applyBindings(i,d),i.initialize&&i.initialize(),t.isOpen(!0)}function a(e,n,r,i,u,a){n===void 0&&(n="100%"),r===void 0&&(r="100%"),s&&f(),s={views:e,onCloseAction:i};var c;$(document).on("keydown",o),$(".customUX").removeClass("hidden");var h=ExperimentEditorTemplates._customUXTabsContainerMarkup,p=new l(r,n,e,u,a);$(".customUX").append(h);var d=document.querySelector(".customUX .customUXWindow");ko.applyBindings(p,d),t.isOpen(!0)}function f(){var e=document.querySelector(".customUX .customUXWindow");if(s){if(s.onCloseAction&&s.onCloseAction())return;s.views.forEach(function(e){e.viewModel.dispose&&e.viewModel.dispose()}),s=null}$(document).off("keydown",o),$(".customUXWindow .icon.close").off("mousedown"),$(".customUX").addClass("hidden"),e&&($(e).remove(),ko.cleanNode(e),e=null,$(".customUX").empty()),t.isOpen(!1)}t.isOpen=ko.observable(!1);var i=function(e){function t(t,n,r,i,s,o){e.call(this,t,n,r,i,s),this.markup=t,this.viewModel=n,this.title=r,this.onBeforeActivate=o}return __extends(t,e),t}(n.TabView);t.CustomUXView=i;var s=null;t.handleKeyDown=o,t.open=u,t.openMultipleViews=a,t.close=f;var l=function(e){function t(t,n,r,i,s){e.call(this),this.width=ko.observable(t),this.height=ko.observable(n),this.views=ko.observableArray(r),this.breadcrumbHeader=ko.observable(i),this.showBreadcrumbHeader=ko.observable(typeof i!="undefined"),this.jQueryTabsOptions={views:this.views,onTabActivated:this.onTabActivated,onBeforeTabActivated:this.onBeforeTabActivated},typeof s=="number"&&(this.jQueryTabsOptions.active=s)}return __extends(t,e),t.prototype.onClose=function(){f(),this.dispose()},t}(n.JQueryTabsContainer)}),define("generated/DataLabClient/UtilString",["require","exports"],function(e,t){function r(e){var t=n.exec(e),r=[];while(t!=null){var i=t[1]===undefined?t[2]:t[1];r.push(i),t=n.exec(e)}return r}function i(e){if(typeof e=="string"&&e.length>1){var t=e[0],n=e[e.length-1];t===n&&(t==='"'||t==="'")&&(e=e.slice(1,-1))}return e}var n=/(?!\s*$)\s*(?:"([^"]*(?:[\S\s][^"]*)*)"|([^,"\s]*(?:\s+[^,"\s]+)*))\s*(?:,|$)/g;t.getArrayFromCommaSeparatedString=r,t.removeSurroundingQuotes=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/ColumnPickerViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/CustomUX","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/Schema","../../../../DataLabClient/Util","../../../../DataLabClient/UtilString","../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o,u,a,f,l){function v(e){var t=e.elementType?e.elementType.typeName:"";switch(e.type){case"Binary":return[p.Boolean];case"Categorical":case"String":return[e.type];case"Numeric":var n=[p.Numeric];return["float","double","complex64","complex128"].indexOf(t)>=0?n.push(p.Double):["sbyte","byte","short","ushort","int","uint","long","ulong"].indexOf(t)>=0&&n.push(p.Integer),n;case"Ordinal":return[p.Categorical];case"Object":if(e.elementType){if(t==="timespan")return[p.TimeSpan];if(t==="datetime")return[p.DateTime]}return[];default:return[]}}var c=function(){function e(){}return e.equals=function(e,t){return e.id===t.id&&e.exclude===t.exclude},e.findRule=function(t,n){if(typeof t=="string")var r=t,i=n,s=e.all.filter(function(e){return e.id===r&&e.exclude===i});else var i=t,o=n,s=e.all.filter(function(e){return e.exclude===i&&e.columnKind===o});return s.length>0?s[0]:e.ColumnNames},e.AllColumns={id:"AllColumns",name:"All columns",exclude:!1,hidden:!0,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},e.NoColumns={id:"NoColumns",name:"No columns",exclude:!0,hidden:!0,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},e.ColumnNames={id:"ColumnNames",name:"column names",exclude:!1,hidden:!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!0},e.ColumnIndices={id:"ColumnIndexes",name:"column indices",exclude:!1,hidden:!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!0},e.ColumnTypes={id:"ColumnTypes",name:"column type",exclude:!1,hidden:!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!1},e.ExcludeColumnNames={id:"ColumnNames",name:"column names",exclude:!0,hidden:!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},e.ExcludeColumnIndices={id:"ColumnIndexes",name:"column indices",exclude:!0,hidden:!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},e.ExcludeColumnTypes={id:"ColumnTypes",name:"column type",exclude:!0,hidden:!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},e.Features={id:"Features",serializedId:"ColumnTypes",name:"all features",columnKind:"Feature",exclude:!1,hidden:!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!1},e.Scores={id:"Scores",serializedId:"ColumnTypes",name:"all scores",columnKind:"Score",exclude:!1,hidden:!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!1},e.Labels={id:"Labels",serializedId:"ColumnTypes",name:"all labels",columnKind:"Label",exclude:!1,hidden:!1,inSingleColumnMode:!0,inAllowDuplicatesMode:!1},e.ExcludeFeatures={id:"Features",serializedId:"ColumnTypes",name:"all features",columnKind:"Feature",exclude:!0,hidden:!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},e.ExcludeScores={id:"Scores",serializedId:"ColumnTypes",name:"all scores",columnKind:"Score",exclude:!0,hidden:!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},e.ExcludeLabels={id:"Labels",serializedId:"ColumnTypes",name:"all labels",columnKind:"Label",exclude:!0,hidden:!1,inSingleColumnMode:!1,inAllowDuplicatesMode:!1},e.all=[e.AllColumns,e.NoColumns,e.ColumnNames,e.ColumnIndices,e.ColumnTypes,e.Features,e.Scores,e.Labels,e.ExcludeColumnNames,e.ExcludeColumnIndices,e.ExcludeColumnTypes,e.ExcludeFeatures,e.ExcludeScores,e.ExcludeLabels],e}();t.RuleType=c;var h=function(){function e(){}return e.Include={id:"include",name:"Include",exclude:!1,inFirstRule:!0},e.Exclude={id:"exclude",name:"Exclude",exclude:!0,inFirstRule:!1},e.all=[e.Include,e.Exclude],e}(),p=function(){function e(){}return e.String="String",e.Integer="Integer",e.Double="Double",e.Boolean="Boolean",e.DateTime="DateTime",e.TimeSpan="TimeSpan",e.Categorical="Categorical",e.Numeric="Numeric",e.All="All",e}();t.ColumnType=p;var d=function(){function e(){}return e.All="All",e.Feature="Feature",e.Score="Score",e.Label="Label",e}();t.ColumnKind=d;var m=function(e){function t(n,r,u,a,v,m,g){var y=this;u===void 0&&(u=[]),a===void 0&&(a=[]),v===void 0&&(v=[]),m===void 0&&(m=[]),e.call(this),this.ruleType=ko.observable(n),this.ruleCategory=ko.observable(n.exclude),this.selectedColumns=ko.observableArray(u),this.invalidColumns=ko.observableArray(a),this.columnTypes=ko.observableArray(v),this.columnKinds=ko.observableArray(m),this.hasRuleTypeError=ko.observable(!1),this.hasIndexRuleError=ko.observable(!1),this.hasNameRuleError=ko.observable(!1),this.hasKinds=ko.computed(function(){return y.columnKinds().length>0&&y.columnKinds()[0]!==d.All}),this.typeChoices=ko.computed(function(){return y.hasKinds()?r.typeChoices:r.typeChoices.filter(function(e){return e!==d.All})},this),this.kindChoices=ko.computed(function(){return r.kindChoices},this),this.hasError=ko.computed(function(){return y.hasRuleTypeError()||y.hasIndexRuleError()||y.hasNameRuleError()},this),this.allowDuplicates=ko.computed(function(){return r.allowDuplicates()},this),this.nameInputFocused=ko.observable(!0),this.setNameInputFocused=function(){y.nameInputFocused(!0)},this.placeholderText=ko.computed(function(){return!y.nameInputFocused()&&y.selectedColumns().length===0?s.pressEnterColumnName:""}),this.registerForDisposal(new i.DisposableKnockoutObject(this.hasKinds),new i.DisposableKnockoutObject(this.typeChoices),new i.DisposableKnockoutObject(this.kindChoices),new i.DisposableKnockoutObject(this.hasError),new i.DisposableKnockoutObject(this.allowDuplicates),new i.DisposableKnockoutObject(this.placeholderText)),this.columnIndexRegExp=new RegExp("^\\s*(-?\\d+)\\s*$"),this.columnRangeRegExp=new RegExp("^\\s*(\\d+)\\s*-\\s*(\\d+)\\s*$"),this.validateIndices=function(){var e=y.indexList().split(","),n=null,r=e.some(function(e){if(y.columnIndexRegExp.test(e)){var r=Number(y.columnIndexRegExp.exec(e)[1]);n=t.validateColumnIndex(r,g)}else if(y.columnRangeRegExp.test(e)){var i=y.columnRangeRegExp.exec(e),o=Number(i[1]),u=Number(i[2]);n=t.validateColumnRange(o,u,g)}else n=s.columnPickerInputMustBeAListOfPositiveIndicesOrRanges;return!!n});return y.hasIndexRuleError(r),n};var b=this.ruleType().id===c.ColumnIndices.id?u.join(","):"";this.indexList=l.validatableObservable(b,this.validateIndices),this.registerForDisposal(this.indexList),this.ruleType().id===c.ColumnIndices.id&&(this.indexList.startValidating(),this.indexList.validate()),this.validateRuleType=function(e){var t;return y.isFirstRule()&&y.allowDuplicates()&&(y.ruleType().exclude||y.ruleType().id!==c.ColumnNames.id&&y.ruleType().id!==c.ColumnIndices.id)&&(t=s.columnPickerSelectionRules),y.isFirstRule()&&y.ruleType().exclude&&(t=s.columnPickerFirstRuleNoExlude),t?y.hasRuleTypeError(!0):y.hasRuleTypeError(!1),t};var w;this.registerForDisposal(new i.DisposableKnockoutObject(w=ko.computed(function(){return r.firstRule()===y}))),this.isFirstRule=l.validatableObservable(w,this.validateRuleType),this.registerForDisposal(this.isFirstRule),this.isFirstRule.startValidating(),this.isFirstRule.validate(),this.validateNamesSelection=function(e){var t;return r.singleColumnSelection()?y.selectedColumns().length!==1&&(t=s.columnPickerInputNameList):y.selectedColumns().length===0&&(t=s.columnPickerInputMultipleNamesList),y.invalidColumns().length>0&&(t=s.columnPickerInvalidNames),t?y.hasNameRuleError(!0):y.hasNameRuleError(!1),t},this.currentColumn=l.validatableObservable("",this.validateNamesSelection),this.registerForDisposal(this.currentColumn),this.ruleType().id===c.ColumnNames.id&&(this.currentColumn.startValidating(),this.currentColumn.validate()),this.registerForDisposal(new i.DisposableSubscription(this.currentColumn.subscribe(function(){if(y.currentColumn()!==""){var e=f.getArrayFromCommaSeparatedString(y.currentColumn());e.forEach(function(e){e!==""&&(y.selectedColumns().indexOf(e)===-1||y.allowDuplicates()?y.selectedColumns.push(e):y.invalidColumns.push(e))})}y.currentColumn.startValidating(),y.currentColumn.validate(),y.currentColumn("")}))),this.registerForDisposal(new i.DisposableSubscription(this.allowDuplicates.subscribe(function(){y.isFirstRule.startValidating(),y.isFirstRule.validate()}))),this.registerForDisposal(new i.DisposableSubscription(this.ruleType.subscribe(function(){y.isFirstRule.startValidating(),y.isFirstRule.validate(),y.hasIndexRuleError(!1),y.hasNameRuleError(!1),y.selectedColumns.removeAll(),y.invalidColumns.removeAll(),y.ruleType().id===c.ColumnNames.id&&(y.currentColumn(""),y.currentColumn.startValidating(),y.currentColumn.validate()),y.ruleType().id===c.ColumnIndices.id&&(y.indexList(""),y.indexList.startValidating(),y.indexList.validate()),y.ruleType().id===c.ColumnTypes.id&&(y.columnTypes([y.typeChoices()[0]]),y.columnKinds([y.kindChoices()[0]])),y.ruleType().columnKind&&(y.columnTypes([p.All]),y.columnKinds([y.ruleType().columnKind]))}))),this.removeColumnName=function(e){y.selectedColumns.remove(e),y.currentColumn.startValidating(),y.currentColumn.validate(),o.customEvent({key:"RemoveColumnName",type:"ColumnPicker",data:JSON.stringify({columns:e})})},this.removeInvalidColumnName=function(e){y.invalidColumns.remove(e),y.currentColumn.startValidating(),y.currentColumn.validate(),o.customEvent({key:"RemoveColumnNameInvalid",type:"ColumnPicker",data:JSON.stringify({columns:e})})},this.registerForDisposal(new i.DisposableSubscription(this.indexList.subscribe(function(){y.selectedColumns.removeAll();if(y.indexList()!==""){var e=y.indexList().split(",");e.forEach(function(e){if(y.columnIndexRegExp.test(e))y.selectedColumns.push(y.columnIndexRegExp.exec(e)[1]);else if(y.columnRangeRegExp.test(e)){var t=y.columnRangeRegExp.exec(e);y.selectedColumns.push(t[1]+"-"+t[2])}})}}))),this.registerForDisposal(new i.DisposableKnockoutObject(this.ruleChoices=ko.computed(function(){var e=c.all.filter(function(e){return r.singleColumnSelection()&&!e.inSingleColumnMode?!1:r.allowDuplicates()&&!e.inAllowDuplicatesMode?!1:e.exclude!==y.ruleCategory()?!1:e.hidden&&y.ruleType()!==e?!1:r.hiddenRuleTypes.indexOf(e)!==-1?!1:!0}),t=e.map(function(e){return e}),n=t.some(function(e){return c.equals(e,y.ruleType())});return n||y.ruleType(t[0]),t},this))),this.registerForDisposal(new i.DisposableKnockoutObject(this.ruleCategoryChoices=ko.computed(function(){return h.all.filter(function(e){return!y.isFirstRule()||e.inFirstRule})},this)))}return __extends(t,e),t.prototype.toJSON=function(){var e=this.ruleType().id===c.ColumnTypes.id||this.ruleType().serializedId===c.ColumnTypes.id;return{ruleType:this.ruleType().serializedId?this.ruleType().serializedId:this.ruleType().id,columns:function(e,t){return t===c.ColumnNames.id||t===c.ColumnIndices.id?e.selectedColumns():undefined}(this,this.ruleType().id),exclude:this.ruleType().exclude,columnTypes:e?this.columnTypes():undefined,columnKinds:e?this.columnKinds():undefined}},t.prototype.setWidthToStartingChoiceLabelWidth=function(e){var t=$("label[for='RulesStartingChoice']").first().outerWidth(!0);$(e).css("min-width",t)},t.validateColumnIndex=function(e,n){return n===void 0&&(n=null),t.validateColumnRange(e,e,n)},t.validateColumnRange=function(e,t,n){n===void 0&&(n=null);var r=n&&n.columnAttributes&&n.columnAttributes.length,i=null;return e<=0||t<=0?i=s.columnPickerIndicesMustBeGreaterThan:t<e?i=s.columnPickerInvalidRange:r&&t>r&&(i=a.format(s.columnPickerIndicesOutOfRange,r.toString())),i},t}(i.Disposable);t.ColumnPickerRule=m;var g=function(e){function t(n,r,u){var f=this;e.call(this),this.shouldSaveUiData=!1,this.schema=null,this.typeChoices=["String","Integer","Double","Boolean","DateTime","TimeSpan","Categorical","Numeric","All"],this.kindChoices=["All","Feature","Score","Label"],this.schema=u,this.hasSchema=ko.observable(u?!0:!1),this.hiddenRuleTypes=ko.observableArray([]),this.validColumnNamesFromSchema=[],this.storedRules=n;if(u){this.schemaIsInaccurate=ko.observable(u.isInaccurate==2),this.autocompleteArray=[],a.forEach(u.columnAttributes,function(e){f.validColumnNamesFromSchema.push(e.name),f.autocompleteArray.push({label:e.name,value:'"'+e.name+'"',isInaccurate:e.isInaccurate})});if(!this.schemaIsInaccurate()){this.typeChoices=[p.All],this.kindChoices=[d.All];var l,h=new a.StringSet;a.forEach(u.columnAttributes,function(e){h.unionWith(v(e)),!l&&e.isFeature&&(l=!0)}),this.typeChoices.push.apply(this.typeChoices,h.toArray()),l?this.kindChoices.push("Feature"):this.hiddenRuleTypes.push(c.Features,c.ExcludeFeatures),Object.keys(u.scoreColumns).length!==0?this.kindChoices.push("Score"):this.hiddenRuleTypes.push(c.Scores,c.ExcludeScores),Object.keys(u.labelColumns).length!==0?this.kindChoices.push("Label"):this.hiddenRuleTypes.push(c.Labels,c.ExcludeLabels)}}this.validateColumns=function(e){var t=[],n=[];return t=e.filter(function(e){return f.validColumnNamesFromSchema.indexOf(e)>=0}),n=e.filter(function(e){return f.validColumnNamesFromSchema.indexOf(e)===-1}),{valid:t,invalid:n}},this.rules=i.Disposable.observableArrayOfDisposables([]),this.firstRule=ko.computed(function(){return f.rules()[0]}),this.allowDuplicates=ko.observable(!1),this.singleColumnSelection=ko.observable(r),this.startingChoices=ko.observable([c.AllColumns,c.NoColumns]),this.startingChoice=ko.observable(c.NoColumns),this.createStartingChoices([c.AllColumns,c.NoColumns],this.startingChoice),this.heading=ko.computed(function(){return f.singleColumnSelection()?s.singleColumnSelectHeading:s.multipleColumnSelectHeading}),this.registerForDisposal(new i.DisposableSubscription(this.startingChoice.subscribe(function(){var e=f.rules().length>0&&f.rules()[0].ruleType().id===c.AllColumns.id;if(f.startingChoice()===c.AllColumns){if(!e){var t=new m(c.AllColumns,f,[],[],[],[],u);f.registerForDisposal(t),f.rules.unshift(t)}}else e&&f.rules.shift()}))),this.registerForDisposal(new i.DisposableSubscription(this.firstRule.subscribe(function(){f.firstRule()&&c.equals(f.firstRule().ruleType(),c.AllColumns)&&f.startingChoice(c.AllColumns)}))),this.allowMultipleRules=ko.computed(function(){return!f.allowDuplicates()&&!f.singleColumnSelection()},this),this.registerForDisposal(new i.DisposableSubscription(this.allowDuplicates.subscribe(function(){if(f.allowDuplicates()){o.featureUsage({featureID:31,groupID:27}),f.rules().length>1&&f.rules.splice(1,f.rules().length-1);if(f.rules().length>0&&f.rules()[0].ruleType().id===c.ColumnNames.id){var e=0;while(e<f.firstRule().invalidColumns().length)f.firstRule().selectedColumns.indexOf(f.firstRule().invalidColumns()[e])>=0&&(f.firstRule().selectedColumns.push(f.firstRule().invalidColumns()[e]),f.firstRule().invalidColumns.splice(e,1),e-=1),e+=1}}else{o.featureUsage({featureID:32,groupID:27});if(f.rules().length>0&&f.firstRule().ruleType().id===c.ColumnNames.id){var e=0;while(e<f.firstRule().selectedColumns().length){for(var t=0;t<e;t++)f.firstRule().selectedColumns()[e]===f.firstRule().selectedColumns()[t]&&(f.firstRule().invalidColumns.push(f.firstRule().selectedColumns()[e]),f.firstRule().selectedColumns.splice(e,1),e-=1);e+=1}}}f.rules().length>0&&(f.firstRule().currentColumn.startValidating(),f.firstRule().currentColumn.validate())})));try{var g=n();if(g.length!==0){var y=t.parseRules(g,function(e,t){var n=f.hasSchema()&&t.id===c.ColumnNames.id&&e.columns?f.validateColumns(e.columns):{valid:e.columns,invalid:[]},r=e.columnTypes,i=e.columnKinds,s=new m(t,f,n.valid,n.invalid,r,i,u);f.registerForDisposal(s),f.rules.push(s)});y.isFilter!==null&&y.isFilter!==undefined&&this.allowDuplicates(!y.isFilter),this.uiData=y.ui}}catch(b){o.exception(b,"Failed to parse column picker rules JSON when attempting ColumnPickerViewModel construction.")}if(this.rules().length===0){var w=new m(c.ColumnNames,this,[],[],[],[],u);this.registerForDisposal(w),this.rules([w]),this.allowDuplicates(!1)}this.visibleRules=ko.computed(function(){return f.rules().length>0&&f.rules()[0].ruleType().hidden?f.rules.slice(1):f.rules()}),this.createNewRule=function(e,t){t===void 0&&(t=!1);var n=new m(c.ColumnIndices,f,[],[],[],[],u);f.registerForDisposal(n);if(e){var r=f.rules().indexOf(e),i=f.createRulesJSONString();f.rules.splice(r+1,0,n)}else f.rules.push(n);var s=f.createRulesJSONString();t&&o.featureUsage({featureID:28,groupID:27,data:JSON.stringify({oldRules:i,newRules:s,insertIndex:r})})},this.removeRule=function(e){var t=f.createRulesJSONString();f.rules.remove(e);var n=f.createRulesJSONString();o.featureUsage({featureID:29,groupID:27,data:JSON.stringify({oldRules:t,newRules:n,ruleRemoved:e})})},this.createRulesJSONString=function(e){e===void 0&&(e=!1);var t={isFilter:!f.allowDuplicates(),rules:f.rules()};return e&&f.uiData&&_.extend(t,{ui:f.uiData}),JSON.stringify(t)},this.hasErrors=ko.computed(function(){var e=!1;return f.rules().forEach(function(t){if(t.hasError()){e=!0;return}}),e},this),this.registerForDisposal(new i.DisposableSubscription(this.rules.subscribe(function(){if(f.rules().length===0)f.createNewRule();else if(f.rules().length>1&&!f.allowMultipleRules())throw new Error(s.onlyOneRuleAllowedError)}))),this.registerForDisposal(new i.DisposableKnockoutObject(this.firstRule),new i.DisposableKnockoutObject(this.heading),new i.DisposableKnockoutObject(this.allowMultipleRules),new i.DisposableKnockoutObject(this.visibleRules),new i.DisposableKnockoutObject(this.hasErrors))}return __extends(t,e),t.parseRules=function(e,t){var n=JSON.parse(decodeURIComponent(e));return n.rules.forEach(function(e){var n=c.findRule(e.ruleType,e.exclude),r=e.columnTypes,i=e.columnKinds;if(n.id===c.ColumnTypes.id){var s=!r||r.length===0||r[0]===p.All,o=i&&i.length===1&&i[0]!==d.All;if(o&&s){var u=c.findRule(e.exclude,i[0]);e.ruleType=u.id,n=u,e.columnKinds=i}}if(n.id===c.ColumnTypes.id&&r&&r.length===1&&r[0]===p.All&&i&&i.length===1&&i[0]===d.All){var u=c.findRule(c.AllColumns.id,e.exclude);e.ruleType=u.id,n=u,e.columnTypes=[],e.columnKinds=[]}t(e,n)}),n},t.prototype.saveRulesAndClose=function(){var e=this.createRulesJSONString(this.shouldSaveUiData);this.storedRules(encodeURIComponent(e)),n.close(),o.featureUsage({featureID:30,groupID:27,data:JSON.stringify({rules:e})})},t.prototype.createStartingChoices=function(e,t){var n=new Object(null);e.forEach(function(e){return n[e.name]=e});var r=ko.pureComputed({read:function(){return t().name},write:function(e){return t(n[e])}});this.startingChoicesFxRadioOptions={values:e.map(function(e){return{text:e.name,value:e.name}}),value:r,trackedit:!1}},t}(i.Disposable);t.ColumnPickerViewModel=g}),define("generated/editor/TS/ViewModel/Operations/ModelHelpers",["require","exports","../../../TS/ViewModel/ExperimentEditor/ColumnPickerViewModel","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Constants","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/Model/ModuleParameterDescriptor","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){function f(e,t,n){t===void 0&&(t=""),n===void 0&&(n="");var i=e+t+n;if(i.length>r.AssetMaxNameLength){var s=t+n,o=e.slice(0,Math.max(1,r.AssetMaxNameLength-s.length));i=o+s;if(i.length>r.AssetMaxNameLength)throw new Error("couldn't generate a new resource name")}return i}var a=function(){function e(){}return e.isApplyTransformModuleNode=function(e){return e instanceof s.ModuleNode?e.module_.familyId.indexOf(i.WellKnownResource.ApplyTransformationFamilyId)>-1:!1},e.isModuleFamily=function(e,t){return e.familyId?e.familyId.indexOf(t)>-1:!1},e.isModuleCategory=function(e,t){return e.category===t},e.formatResourceName=function(e){var t=e?e.replace(/[\/\\#\?:]/g,"").trim():"";return t.length>110&&(t=t.substr(0,110)),t},e.getUniqueResourceName=function(e,t,n,r){n===void 0&&(n=[]),r===void 0&&(r="");var i=u.map(e.items(),function(e){return e.name().toLowerCase()}),s=n.map(function(e){return e.toLowerCase()});i=i.concat(s);var o=f(t,r);if(i.indexOf(o.toLowerCase())<0)return o;var a=1;o=f(t,r," "+a.toString());while(i.indexOf(o.toLowerCase())>-1)o=f(t,r," "+(++a).toString());return o},e.parseModelFamilyId=function(e){if(e){var t=e.split(".");if(t&&t.length>1)return t[1]}return null},e.parseExperimentFamilyId=function(e){if(!e)throw new Error("Experiment id cannot be null");var t=e.split(".");if(t.length<3)throw new Error("invalid experiment id: "+e);return t[2]},e.searchTrainedModelInScoreGraph=function(e,t){var n=u.values(e.trainedModels),r=null;return n.forEach(function(e){return e.trainedModel.experimentId.indexOf(t)>0?(r=e,!1):!0}),r},e.searchTransformNodeInScoreGraph=function(e,t,n){var r=u.values(e.transformModules);return u.first(r,function(e){if(e&&e.transform.experimentId.indexOf(t)>0&&e.transform.name()===n.name())return!0},null)},e.searchSavedTrainedModel=function(e,t,n,r){return u.first(e.items(),function(e){return e.experimentId&&e.experimentId.indexOf(t)>0?e.moduleId===n&&e.outputName===r:!1},null)},e.getTrainingModuleNodes=function(e){var t=[];return u.forEach(e.nodes(),function(e){e instanceof s.ModuleNode&&e.module_.category===i.ResourceCategory.TrainModule&&t.push(e)}),t},e.findCompatibleModule=function(e,t,n){var r=[];return u.forEach(e.moduleCache.items(),function(e){var i=t.indexOf(e.familyId);i>=0&&e.portDescriptors.some(function(e){return e.isCompatible(n.descriptor)})&&(r[i]=e)}),u.first(r,function(e){return e},null)},e.setColumnSelectionParameterToAll=function(e){u.forEach(e.parameters,function(e){var t=e.descriptor;if(t instanceof o.ColumnPickerModuleParameterDescriptor){var r=new n.ColumnPickerViewModel(e.value,t.singleColumnSelection);r.rules([new n.ColumnPickerRule(n.RuleType.AllColumns,r)]),e.value(r.createRulesJSONString())}})},e}();t.ModelHelpers=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/MoveNodesAnimationOperation",["require","exports","../../../TS/ViewModel/Operations/AnimationOperation","../../../TS/ViewModel/Operations/AsyncOperation"],function(e,t,n,r){(function(e){e[e.up=0]="up",e[e.down=1]="down"})(t.MoveDirection||(t.MoveDirection={}));var i=t.MoveDirection,s=function(){function e(){}return e}();t.NodeMovement=s;var o=function(){function e(){}return Object.defineProperty(e.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),e}(),u=function(e){function t(){e.apply(this,arguments),this.yDistance=120,this.xDistance=120,this.nodeMovements=[],this.rects=[]}return __extends(t,e),t.prototype.initialize=function(e){this.nodes=e,this.rects=this.nodes.map(function(e){var t=new o;return t.left=e.x(),t.top=e.y(),t.height=e.height(),t.width=e.width(),t})},t.prototype.AddMovement=function(e){this.nodeMovements.push(e)},t.prototype.runInternalAsync=function(){var e=this,t=new n.AnimationOperation;return this.nodeMovements.forEach(function(n){var r=e.getBestPosition(n);t.animations.push({context:{graphNode:n.node,dx:(r.left-n.node.x())/t.totalSteps,dy:(r.top-n.node.y())/t.totalSteps},stepFunc:function(e,t){var n=t.graphNode;n.x(n.x()+t.dx),n.y(n.y()+t.dy)}})}),t.runAsync()},t.prototype.getBestPosition=function(e){var t=this,n=new o;n.left=e.node.x(),n.top=e.node.y(),n.height=e.node.height(),n.width=e.node.width(),n.top=e.direction===0?n.top-this.yDistance-n.height:n.top+this.yDistance+n.height;var r=n.left;while(!this.rects.every(function(e){return!t.isOverlap(e,n)}))n.left+=this.xDistance;var i=n.left;n.left=r;while(!this.rects.every(function(e){return!t.isOverlap(e,n)}))n.left-=this.xDistance;var s=n.left;return n.left=i-r>r-s?s:i,this.rects.push(n),n},t.prototype.isOverlap=function(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top},t}(r.AsyncOperation);t.MoveNodesAnimationOperation=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/SaveTrainedModelOperation",["require","exports","../../../TS/ViewModel/Operations/AsyncOperation","../../../../DataLabClient/LocalizedResources"],function(e,t,n,r){var i=function(e){function t(t,n,r,i,s,o){o===void 0&&(o=!0),e.call(this),this.showProgress=!0;if(!t)throw new Error("workspace cannot be null.");this.workspace=t,this.port=n,this.name=r,this.familyId=i,this.description=s,this.showProgress=o}return __extends(t,e),t.prototype.runInternalAsync=function(){return this.port?this.name?this.port.isTrainModulePort()?(this.showProgress&&this.startProgress(r.promotionSavingIntermediateOutput),this.workspace.promoteOutputToTrainedModelAsync(this.port,this.name,this.familyId,this.description)):this.reject(Error("The selected port can't be saved as trained model.")):this.reject(new Error("Name can't be null or empty for trained model.")):this.reject(new Error("Port is required to save as trained model."))},t}(n.AsyncOperation);t.SaveTrainedModelOperation=i}),define("generated/editor/TS/ViewModel/Operations/ExperimentProcessor/TrainedModelExperimentProcessorBase",["require","exports","../../../../TS/ViewModel/Operations/GuideTours","../../../../TS/ViewModel/Operations/ModelHelpers","../../../../TS/ViewModel/Operations/SaveTrainedModelOperation","../../../../../DataLabClient/Constants","../../../../../DataLabClient/Model/ModuleNode","../../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=window.environment&&window.environment.globalWorkspaceId||"dummy",f=[s.WellKnownResource.ScoreGenericModuleFamilyId,s.WellKnownResource.ScoreMatchBoxModuleFamilyId,s.WellKnownResource.AssignDataToClusterFamilyId,s.WellKnownResource.AssignToClusterFamilyId].map(function(e){return a+"."+e}),l=function(){function e(e){this.trainedModelPort=null,this.webServiceInputPorts=[],this.webServiceOutputPorts=[],this.scoreNodes=[],this.supportedScoreModuleFamilyId=f,this.workspace=e,this.trainedModelCache=e.trainedModelCache}return e.prototype.preProcess=function(e,t){var n=this;return this.searchTrainingModuleInGraph(e,t).then(function(r){return n.createTrainedModelAsync(e,r,t)}).then(function(e){n.trainedModel=e})},e.prototype.process=function(e,t){return u.when("")},e.prototype.postProcess=function(e,t){return u.when("")},e.prototype.searchTrainingModuleInGraph=function(e,t){this.trainModuleNode=null;var i=r.ModelHelpers.getTrainingModuleNodes(e);if(!i.length)return t.asyncOperation.reject(new Error("No train module found in the training experiment."));if(i.length>1){var s=u.values(t.experimentEditorViewModel.selectionManager.selectedGraphNodes());if(!(s&&s.length===1&&i.indexOf(s[0].graphNode)>=0))return n.GuideTours.showMultipleTrainModuleSelectionTour(),t.asyncOperation.reject(new Error("There are more than one train module in the training experiment. Please select one and retry."));this.trainModuleNode=s[0].graphNode}else i.length===1&&(this.trainModuleNode=i[0]);return u.when(this.trainModuleNode)},e.prototype.createTrainedModelAsync=function(e,t,n){var i=u.filter(t.outputPorts,function(e){return e.isTrainModulePort()});if(!i||!i.length)return n.asyncOperation.reject(new Error("No outputs found as trained model."));this.trainedModelPort=i[0];var s=r.ModelHelpers.parseExperimentFamilyId(e.experimentId()),o=r.ModelHelpers.searchSavedTrainedModel(this.trainedModelCache,s,this.trainedModelPort.parent.id,this.trainedModelPort.name);if(o)return this.saveTrainedModel(this.workspace,this.trainedModelPort,o.name(),r.ModelHelpers.parseModelFamilyId(o.familyId),o.description());var a=r.ModelHelpers.getUniqueResourceName(this.trainedModelCache,r.ModelHelpers.formatResourceName(e.description()),[]," [trained model]");return this.saveTrainedModel(this.workspace,this.trainedModelPort,a)},e.prototype.saveTrainedModel=function(e,t,n,r,s){return(new i.SaveTrainedModelOperation(e,t,n,r,s,!1)).runAsync()},e.prototype.isScoreModuleNode=function(e){return e instanceof o.ModuleNode?this.supportedScoreModuleFamilyId.indexOf(e.module_.familyId)>=0||e.module_.category==="Machine LearningScore":!1},e}();t.TrainedModelExperimentProcessorBase=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/ExperimentProcessor/TrainedModelExperimentCreateProcessor",["require","exports","../../../../TS/ViewModel/Operations/AnimationOperation","../../../../TS/Global","../../../../TS/ViewModel/Operations/ModelHelpers","../../../../TS/ViewModel/Operations/MoveNodesAnimationOperation","../../../../TS/ViewModel/Operations/ExperimentProcessor/TrainedModelExperimentProcessorBase","../../../../../DataLabClient/Constants","../../../../../DataLabClient/Model/ModuleNode","../../../../../DataLabClient/Util","../../../../../DataLabClient/Model/WebServicePortNode"],function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.preProcess=function(t,n){return e.prototype.preProcess.call(this,t,n)},t.prototype.process=function(e,t){var n=this;return this.searchTrainingModuleInGraph(e,t).then(function(r){return t.trainedModelNode=n.addTrainedModelToGraph(e,n.trainedModel,t),n.findOrCreateScoreModuleNodeAsync(e,t)}).then(function(e){n.scoreModuleNode=e})},t.prototype.postProcess=function(e,t){var n=this;return this.removeUnusedNodesAsync(e,this.scoreModuleNode).then(function(){return n.addWebServiceInputOutputPortsAsync(e,t)})},t.prototype.addTrainedModelToGraph=function(e,t,n){return n.experimentEditorViewModel.addTrainedModelById(t.id,this.trainModuleNode.x(),this.trainModuleNode.y()).graphNode},t.prototype.findOrCreateScoreModuleNodeAsync=function(e,t){var n=this,r=$.Deferred(),o;if(this.trainedModelPort){var u=f.first(this.trainedModelPort.connectedNonWebServicePorts(),function(e){return n.isScoreModuleNode(e.parent)},null);o=u?u.parent:null}if(!o){var a=i.ModelHelpers.findCompatibleModule(this.workspace,this.supportedScoreModuleFamilyId,this.trainedModelPort);o=t.experimentEditorViewModel.addModuleById(a.id,this.trainedModelPort.parent.x(),this.trainedModelPort.parent.y()).graphNode,i.ModelHelpers.setColumnSelectionParameterToAll(o);var l=new s.MoveNodesAnimationOperation;l.initialize(f.values(e.nodes())),l.AddMovement({node:o,direction:1}),l.runAsync().done(function(){var e=f.first(o.inputPorts,function(e){return e.isDatasetDataType()}),t=f.first(n.trainModuleNode.inputPorts,function(e){return e.isDatasetDataType()},null);if(t){var i=t.connectedOutputPort;i&&i.connectTo(e)}r.resolve(o)})}else r.resolve(o);return r.then(function(e){var n=f.first(e.inputPorts),r=f.first(t.trainedModelNode.outputPorts);return n.disconnect(n.connectedNonWebServicePorts()),n.connectTo(r),e}).promise()},t.prototype.removeUnusedNodesAsync=function(e,t){var r=this;this.traverseScoreGraphNodes(t);var i=f.filter(e.nodes(),function(e){return r.scoreNodes.indexOf(e)<0}),s=new n.AnimationOperation;return i.forEach(function(e){s.animations.push({context:{graphNode:e,dx:(r.trainModuleNode.x()-e.x())/s.totalSteps,dy:(r.trainModuleNode.y()-e.y())/s.totalSteps},stepFunc:function(e,t){var n=t.graphNode;n.x(n.x()+t.dx),n.y(n.y()+t.dy)}})}),s.runAsync().done(function(){i.forEach(function(e){return e.remove()})})},t.prototype.traverseScoreGraphNodes=function(e){var t=this;if(!e)return;if(this.isScoreModuleNode(e)&&!this.webServiceOutputPorts.length){var n=f.first(e.outputPorts,function(e){return e.isDatasetDataType()},null);n&&this.webServiceOutputPorts.push(n)}this.scoreNodes.indexOf(e)<0&&this.scoreNodes.push(e),f.forEach(e.inputPorts,function(e){var n=e.connectedOutputPort;if(!n||!n.parent)return;f.isEmpty(n.parent.inputPorts)&&e.isDatasetDataType()&&(t.webServiceInputPorts.length||t.webServiceInputPorts.push(e));if(n.parent instanceof a.ModuleNode){var r=n.parent;if(i.ModelHelpers.isModuleFamily(r.module_,u.WellKnownResource.SplitModuleFamilyId)){var s=f.first(r.inputPorts);s.connectedOutputPort&&(e.disconnect(e.connectedNonWebServicePorts()),e.connectTo(s.connectedOutputPort),t.traverseScoreGraphNodes(e.parent));return}}t.traverseScoreGraphNodes(n.parent)})},t.prototype.addWebServiceInputOutputPortsAsync=function(e,t){var n=this,i=new s.MoveNodesAnimationOperation;return i.initialize(f.values(e.nodes())),f.forEach(this.webServiceInputPorts,function(r){r&&(t.inputNode=e.addWebServicePort(0,r.parent.x(),r.parent.y(),null,n.workspace.applicationCache.dataTypeRegistry,r),i.AddMovement({node:t.inputNode,direction:0}))}),f.forEach(this.webServiceOutputPorts,function(r){r&&(t.outputNode=e.addWebServicePort(1,r.parent.x(),r.parent.y(),null,n.workspace.applicationCache.dataTypeRegistry,r),i.AddMovement({node:t.outputNode,direction:1}))}),e.isWebServiceExperiment(!0),t.experimentEditorViewModel.experimentViewModel().displayFlowType(r.ExperimentDataFlowType.WebService),i.runAsync()},t}(o.TrainedModelExperimentProcessorBase);t.TrainedModelExperimentCreateProcessor=c}),define("generated/editor/TS/ViewModel/Operations/ExperimentProcessor/TransformModuleExperimentProcessorBase",["require","exports","../../../../TS/ViewModel/Operations/ModelHelpers","../../../../../DataLabClient/Util"],function(e,t,n,r){var i=function(){function e(e){this.transformResources={},this.transformProducerNodes={},this.transformModulesCache=e.transformModulesCache}return e.prototype.preProcess=function(e,t){var i=this,s=n.ModelHelpers.parseExperimentFamilyId(e.experimentId()),o=[],u=[];return e.getModules().forEach(function(a){var f=r.first(a.outputPorts,function(e){return e.isTransformProducerPort()},null);if(f){var l=i.searchTransformModule(i.transformModulesCache,s,f.parent.id,f.name);if(l)o.push(i.saveTransformModel(t.workspace,f,l.name(),n.ModelHelpers.parseModelFamilyId(l.familyId),l.description()).then(function(e){i.transformResources[a.id]=e,i.transformProducerNodes[a.id]=a}));else{var c=n.ModelHelpers.getUniqueResourceName(i.transformModulesCache,n.ModelHelpers.formatResourceName(e.description()),u," ["+n.ModelHelpers.formatResourceName(a.name)+"]");u.push(c),o.push(i.saveTransformModel(t.workspace,f,c).fail(function(e){var t={title:e.message};e instanceof r.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status===400&&(t.details=e.xmlHttpRequest.responseText),r.showErrorNotification(t)}).then(function(e){i.transformResources[a.id]=e,i.transformProducerNodes[a.id]=a}))}}}),$.when.apply($,o)},e.prototype.process=function(e,t){return r.when("")},e.prototype.postProcess=function(e,t){return r.when("")},e.prototype.searchTransformModule=function(e,t,n,i){return r.first(e.items(),function(e){return e.experimentId&&e.experimentId.indexOf(t)>0?e.moduleId===n&&e.outputName===i:!1},null)},e.prototype.saveTransformModel=function(e,t,n,r,i){return e.promoteOutputToTransformModuleAsync(t,n,r,i)},e}();t.TransformModuleExperimentProcessorBase=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/ExperimentProcessor/TransformModuleExperimentCreateProcessor",["require","exports","../../../../TS/ViewModel/Operations/ModelHelpers","../../../../TS/ViewModel/Operations/MoveNodesAnimationOperation","../../../../TS/ViewModel/Operations/ExperimentProcessor/TransformModuleExperimentProcessorBase","../../../../../DataLabClient/Constants","../../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o){var u=function(e){function t(t){e.call(this,t),this.applyTransformModuleName="Apply Transform",this.transformationOutputTransformPortName="transformation",this.applyTransformInputPortName="Transformation"}return __extends(t,e),t.prototype.preProcess=function(t,n){return e.prototype.preProcess.call(this,t,n)},t.prototype.process=function(e,t){var n=this,r=[];return $.each(this.transformResources,function(i,s){var o=n.transformProducerNodes[i],u=n.addTransformToGraph(s,o,t);r.push(n.findOrCreateApplyTransformNodeAsync(t,e,o,u).then(function(e){o.remove(),u.outputPorts[n.transformationOutputTransformPortName].connectTo(e.inputPorts[n.applyTransformInputPortName])}))}),$.when.apply($,r)},t.prototype.postProcess=function(e,t){return o.when("")},t.prototype.addTransformToGraph=function(e,t,n){return n.experimentEditorViewModel.addTransformById(e.id,t.x(),t.y()).transformNode},t.prototype.findOrCreateApplyTransformNodeAsync=function(e,t,i,u){var a=$.Deferred(),f=o.first(i.outputPorts,function(e){return e.isTransformProducerPort()},null),l=null,c=f.connectedNonWebServicePorts();if(c!=null){var h=o.first(c,function(e){return n.ModelHelpers.isApplyTransformModuleNode(e.parent)},null);h!=null&&(l=h.parent)}if(l!=null){var p=o.first(l.inputPorts,function(e){return!e.isDatasetDataType()},null);p.disconnect();var d=o.first(i.inputPorts,function(e){return e.isDatasetDataType()}),v=o.first(l.inputPorts,function(e){return e.isDatasetDataType()},null);v.disconnect(),v.connectTo(d.connectedOutputPort),a.resolve(l)}else{var m=o.first(e.workspace.moduleCache.items(),function(e){return e.familyId.indexOf(s.WellKnownResource.ApplyTransformationFamilyId)>-1});l=e.experimentEditorViewModel.addModuleById(m.id,i.x(),i.y()).graphNode;var g=new r.MoveNodesAnimationOperation;g.initialize(o.values(t.nodes())),g.AddMovement({node:l,direction:1});var y=o.first(i.inputPorts,function(e){return e.isDatasetDataType()}),b=o.first(i.outputPorts,function(e){return e.isDatasetDataType()},null),w=o.first(l.inputPorts,function(e){return e.isDatasetDataType()}),E=o.first(l.outputPorts,function(e){return e.isDatasetDataType()},null);w.connectTo(y.connectedOutputPort);if(b!=null){var S=b.connectedPorts();for(var x in S){var T=S[x];b.disconnectFrom(T),E!=null&&E.connectTo(T)}}g.runAsync().done(function(){a.resolve(l)})}return a.promise()},t}(i.TransformModuleExperimentProcessorBase);t.TransformModuleExperimentCreateProcessor=u}),define("generated/DataLabClient/Contracts/V1/Common/Project",["require","exports"],function(e,t){(function(e){e[e.Training="Training"]="Training",e[e.Scoring="Scoring"]="Scoring",e[e.Computing="Computing"]="Computing"})(t.ExperimentRole||(t.ExperimentRole={}));var n=t.ExperimentRole});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/CreateScoringGraphOperation",["require","exports","../../../TS/ViewModel/Operations/AsyncOperation","../../../TS/ViewModel/Operations/ExperimentProcessor/Context","../../../TS/ViewModel/Operations/GuideTours","../../../TS/ViewModel/Operations/ExperimentProcessor/TrainedModelExperimentCreateProcessor","../../../TS/ViewModel/Operations/ExperimentProcessor/TransformModuleExperimentCreateProcessor","../../../../DataLabClient/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Contracts/V1/Common/Project","../../../../DataLabClient/Logging/IfxScenarioStopWatch"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e){function t(t,n){e.call(this),t&&this.initialize(t,n)}return __extends(t,e),t.prototype.initialize=function(e,t){var n=this;this.experimentContainerViewModel=e,this.xeControlContainer=t,this.experiment=e.experiment,this.workspace=e.workspace,this.context=new r.Context,this.context.workspace=this.workspace,this.context.experimentEditorViewModel=e.experimentEditorViewModel,this.context.asyncOperation=this,this.processors=[new s.TrainedModelExperimentCreateProcessor(this.workspace),new o.TransformModuleExperimentCreateProcessor(this.workspace)],this.isRunning.subscribe(function(e){e?n.xeControlContainer.block():n.xeControlContainer.unblock()})},t.prototype.runAsync=function(){var t=this,n={tags:this.experiment.tags()};l.featureUsage({featureID:73,groupID:72,experimentID:this.experiment.experimentIdForLogging,data:n});var r=new h.IfxScenarioStopWatch(11,n);return r.start(),e.prototype.runAsync.call(this).fail(function(e){l.featureUsage({featureID:74,groupID:72,experimentID:t.experiment.experimentIdForLogging,data:e&&e.message}),r.error(e,u.SystemError)}).done(function(){r.stop()})},t.prototype.runInternalAsync=function(){return this.experiment.containsTrainingModule()?this.createScoreGraph():this.reject(new Error("No training module in the experiment"))},t.prototype.createScoreGraph=function(){var e=this,t,n=this.experiment.experimentId(),r=this.experimentContainerViewModel.projectViewModel.projectId;this.startProgress(f.createScoringExperimentProgressTitle);var s=[],o=[],l=[];this.addStep(f.lookingForTrainModuleStepTitle),this.processors.forEach(function(t){s.push(t.preProcess(e.experiment,e.context))});var h=$.when.apply($,s).then(function(){e.updateCurrentStep(f.foundTrainModuleStepTitle),e.addStep(f.creatingTrainedModelStepTitle),e.updateCurrentStep(f.createdTrainedModelStepTitle),e.experimentContainerViewModel.copy(e.experiment.description()+f.predictiveExperimentNameSuffix),e.experimentContainerViewModel.projectViewModel.projectId=r,e.addExperimentToProject(n,c.ExperimentRole.Training),t=e.addExperimentToProject(e.experiment.experimentId(),c.ExperimentRole.Scoring)}).then(function(){return e.processors.forEach(function(t){o.push(t.process(e.experiment,e.context))}),$.when.apply($,o)}).then(function(){return e.addStep(f.creatingScoreExperimentStepTitle),e.processors.forEach(function(t){l.push(t.postProcess(e.experiment,e.context))}),$.when.apply($,l)}).then(function(){return e.experimentContainerViewModel.experiment.trainingExperimentId=n,e.experimentContainerViewModel.save()}).then(function(){return t.experimentId(e.experiment.experimentId()),e.experimentContainerViewModel.projectViewModel.save()}).then(function(){return e.updateCurrentStep(f.createdScoreExperimentStepTitle),e.xeControlContainer.zoomToFitWithAnimation()});return a.animatedTourWebServiceEnabled()||h.then(function(){return i.GuideTours.showCreatingScoringExperimentTourAsync(e.context.inputNode||e.context.outputNode,e.experimentContainerViewModel.paletteViewModel,u.ResourceCategory.WebService,e.context.trainedModelNode)}).done(function(t){t.visible()&&e.removeNotification(e.progress)}),h},t.prototype.addExperimentToProject=function(e,t){var n=this.experimentContainerViewModel.projectViewModel;return n.addExperiment(e,t)},t.prototype.isEnabled=function(){return this.experimentContainerViewModel.experiment.containsTrainingModule()&&!this.isRunning()},t}(n.AsyncOperation);t.CreateScoringGraphOperation=p}),define("generated/editor/TS/ViewModel/Dialogs/CustomModuleAddedWarningDialogViewModel",["require","exports","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(){function e(e,t,s,o){this.experiment=e,this.customModuleNode=t,this.pythonParameters=s,this.rParameters=o;var u=t.isCustomModule()?"custom":"Create R Model";s.length>0&&t.module_.moduleLanguage.language==="Python"?this.warningLabel=i.format(r.customModuleAddedWarningDialogSingleVersionLabel,u,"Python",n.ModuleParameterValue.OldestPythonScriptVersion):o.length>0&&(t.module_.moduleLanguage.language==="R"||t.module_.id.split(".")[1]===n.ModuleId.CreateRModel)&&(this.warningLabel=i.format(r.customModuleAddedWarningDialogSingleVersionLabel,u,"R",n.ModuleParameterValue.OldestRScriptVersion))}return e.prototype.dismissed=function(e){e.accepted?this.customModuleNode.module_.moduleLanguage.language==="Python"?i.forEach(this.pythonParameters,function(e){e.silentlyUpdateValue(n.ModuleParameterValue.OldestPythonScriptVersion)}):(this.customModuleNode.module_.moduleLanguage.language==="R"||this.customModuleNode.module_.id.split(".")[1]===n.ModuleId.CreateRModel)&&i.forEach(this.rParameters,function(e){e.silentlyUpdateValue(n.ModuleParameterValue.OldestRScriptVersion)}):this.experiment._removeNode(this.customModuleNode)},e.prototype.canBeAccepted=function(){return!0},e}();t.CustomModuleAddedWarningDialogViewModel=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/DataLabView",["require","exports","../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t){e.call(this),this.extensionName=t}return __extends(t,e),t.prototype.isViewExtensionStillActive=function(){return cdm.currentExtension===Shell.extensionIndex[this.extensionName]},t}(n.Disposable);t.ViewBase=r}),define("generated/editor/TS/ViewModel/ExperimentEditor/Entity",["require","exports","../../../TS/Global"],function(e,t,n){(function(e){e[e.Unknown=0]="Unknown",e[e.GraphEdge=1]="GraphEdge",e[e.GraphNode=2]="GraphNode",e[e.GraphConnectionPoint=3]="GraphConnectionPoint",e[e.Annotation=4]="Annotation"})(t.EditorEntityCategory||(t.EditorEntityCategory={}));var r=t.EditorEntityCategory,i=function(){function e(){this.labelTimerDelay=250,this.selected=ko.observable(!1),this.hovered=ko.observable(!1),this.searchMatched=ko.observable(!1),this.searchResultSelected=ko.observable(!1),this.showFullLabel=ko.observable(!1),this.isTruncated=ko.observable(!1),this.labelWidth=ko.observable(0),this.labelHeight=ko.observable(0),this.belongsToExperimentFlow=ko.observable(!0),this.belongsToWebServiceFlow=ko.observable(!1),this.isPartOfPartialRun=ko.observable(!1),this.category=0}return e.hasRunnableEntity=function(e){return _.any(e,function(e){return e.isRunnable()})},e.allEntitiesAreRunnable=function(e){return _.all(e,function(e){return e.isRunnable()})},Object.defineProperty(e.prototype,"x",{get:function(){throw new Error("abstract property 'x' must be overriden")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){throw new Error("abstract property 'y' must be overriden")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){throw new Error("abstract property 'width' must be overriden")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){throw new Error("abstract property 'width' must be overriden")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientSideStorageId",{get:function(){throw new Error("abstract property 'clientSideStorageId' must be overriden")},enumerable:!0,configurable:!0}),e.prototype.hit=function(e,t,n,r){return!1},e.prototype.remove=function(){},e.prototype.translate=function(e,t){this.x(this.x()+e),this.y(this.y()+t)},e.prototype.entityAtPoint=function(e,t){return null},e.prototype.containsPoint=function(e,t){return!1},e.prototype.showLabel=function(){var e=this;this.labelTimer=setTimeout(function(){e.showFullLabel(!0)},this.labelTimerDelay)},e.prototype.hideLabel=function(){this.labelTimer&&clearTimeout(this.labelTimer),this.showFullLabel(!1)},e.prototype.onMouseIn=function(){this.hovered(!0)},e.prototype.onMouseOut=function(){this.hovered(!1)},e.prototype.startValidating=function(){},e.prototype.updateValidState=function(){},e.prototype.belongsToCurrentFlow=function(e){return e===n.ExperimentDataFlowType.Experiment?this.belongsToExperimentFlow():this.belongsToWebServiceFlow()},e.prototype.getClassId=function(e){var t="";return this.isPartOfPartialRun()&&(t+=" partOfPreviewRun "),this.belongsToCurrentFlow(e)?e===n.ExperimentDataFlowType.Experiment?t+=this.classId():t+=this.classId()+" blueStroke":e===n.ExperimentDataFlowType.Experiment?t+=this.classId()+" disabledFlow blueStroke":t+=this.classId()+" disabledFlow",t},e.prototype.isRunnable=function(){return!1},e.prototype.setHelp=function(e){},e}();t.Entity=i,ko.bindingHandlers.truncatedText={init:function(e,t){var n=ko.utils.unwrapObservable(t()),r=ko.utils.unwrapObservable(n.label);e.textContent=r},update:function(e,t,n,r){var i=ko.utils.unwrapObservable(t()),s=ko.utils.unwrapObservable(i.label),o=ko.utils.unwrapObservable(i.maxWidth);e.textContent=s;if(e.getComputedTextLength()<o)e.textContent=s,r.isTruncated(!1);else{var u=e.textContent,a=0,f=u.length,l=(a+f)/2;while(a<l)e.textContent=u.substring(0,l)+"...",e.getComputedTextLength()>=o?f=l:a=l,l=Math.floor((a+f)/2);r.isTruncated(!0)}var c=$(e).closest("text")[0];r.labelHeight(Shell.Utilities.getBBoxOrDefaultSVGRect(c).height),r.labelWidth(Shell.Utilities.getBBoxOrDefaultSVGRect(c).width)}},ko.bindingHandlers.portTextLabel={init:function(e,t,r,i,s){var o=document.createElementNS("http://www.w3.org/2000/svg","rect"),u=document.createElementNS("http://www.w3.org/2000/svg","text"),a=null,f=ko.utils.unwrapObservable(t());o.setAttribute("class",n.Tooltip.RectClass),e.setAttribute("class","portTextLabel"),e.appendChild(o),e.appendChild(u),f.noIcon||(a=document.createElementNS("http://www.w3.org/2000/svg","image"),e.appendChild(a))},update:function(e,t){var r=ko.utils.unwrapObservable(t()),i=r.label,s=r.model,o=$(e).children("rect")[0],u=$(e).children("text")[0],a=$(e).children("image")[0];u.textContent=i,u.setAttribute("class",n.Tooltip.Class),u.setAttribute("x",(n.Tooltip.RectXOffset+21).toString()),u.setAttribute("y",(n.Tooltip.RectYOffset+16).toString()),o.setAttribute("width",(Shell.Utilities.getBBoxOrDefaultSVGRect(u).width+n.Tooltip.WidthOffset).toString()),o.setAttribute("height",(Shell.Utilities.getBBoxOrDefaultSVGRect(u).height+n.Tooltip.HeightOffset).toString()),o.setAttribute("x",n.Tooltip.RectXOffset.toString()),o.setAttribute("y",n.Tooltip.RectYOffset.toString());if(a){var f;s.parent.isData()?f="/Libraries/Images/arrow_label_32.svg":s.parent.isTrainedModel()?f="/Libraries/Images/TM_output_flask_32.svg":f="/Libraries/Images/ArrowLabel.png",a.setAttributeNS("http://www.w3.org/1999/xlink","href",f),a.setAttribute("width","32"),a.setAttribute("height","32"),a.setAttribute("x",(n.Tooltip.RectXOffset-12).toString()),a.setAttribute("y",(n.Tooltip.RectYOffset-4).toString())}}},ko.bindingHandlers.anchorTransform={init:function(){},update:function(e,t){var r=ko.utils.unwrapObservable(t()),i=ko.utils.unwrapObservable(r.x),s=ko.utils.unwrapObservable(r.y),o="translate("+i+","+(s-n.Tooltip.RectYOffset)+")";e.setAttribute("transform",o)}},ko.bindingHandlers.portTooltipTransform={init:function(){},update:function(e,t){var n=ko.utils.unwrapObservable(t()),r=ko.utils.unwrapObservable(n.x),i=ko.utils.unwrapObservable(n.y),s=n.name,o=$(e).children("text")[0],u=o.textContent;o.textContent=s,o.textContent=u;var a="translate("+r+","+i+")";e.setAttribute("transform",a)}}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/EntityBaseV1",["require","exports","./Entity","../../../TS/Global","../../../../DataLabClient/StateUtil"],function(e,t,n,r,i){t.EntityTypes={},t.EntityTypes[0]=r.EntityType.Entity,t.EntityTypes[1]=r.EntityType.Module,t.EntityTypes[2]=r.EntityType.Dataset,t.EntityTypes[3]=r.EntityType.InputPort,t.EntityTypes[4]=r.EntityType.OutputPort,t.EntityTypes[5]=r.EntityType.Connection,t.EntityTypes[6]=r.EntityType.TrainedModel,t.EntityTypes[7]=r.EntityType.WebServicePort,t.EntityTypes[8]=r.EntityType.Annotation,t.EntityTypes[r.EntityType.Entity]=0,t.EntityTypes[r.EntityType.Module]=1,t.EntityTypes[r.EntityType.Dataset]=2,t.EntityTypes[r.EntityType.InputPort]=3,t.EntityTypes[r.EntityType.OutputPort]=4,t.EntityTypes[r.EntityType.Connection]=5,t.EntityTypes[r.EntityType.TrainedModel]=6,t.EntityTypes[r.EntityType.WebServicePort]=7,t.EntityTypes[r.EntityType.Annotation]=8;var s=function(e){function n(t){e.call(this),this.type=t}return __extends(n,e),n.areEntitiesGoingToRun=function(e){return _.any(e,function(e){return e.isRunnable()&&n.nodeWillRunAgain(e)})},n.nodeWillRunAgain=function(e){if(!e.isModule())return!1;var t=e;if(i.isFinishedState(t.moduleNode.statusCode.value())){if(t.moduleNode.module_.isDeterministic)return!1;if(t.moduleNode.usePreviousResults())return!1}return!0},n.prototype.getType=function(){return this.type},n.prototype.isModule=function(){return this.type==t.EntityTypes[r.EntityType.Module]},n.prototype.isData=function(){return this.type==t.EntityTypes[r.EntityType.Dataset]},n.prototype.isTrainedModel=function(){return this.type==t.EntityTypes[r.EntityType.TrainedModel]},n.prototype.isTransform=function(){return this.type==t.EntityTypes[r.EntityType.Transform]},n.prototype.isConnection=function(){return this.type==t.EntityTypes[r.EntityType.Connection]},n.prototype.isAnnotation=function(){return this.type==t.EntityTypes[r.EntityType.Annotation]},n}(n.Entity);t.EntityBaseV1=s}),define("generated/editor/TS/View/Balloon",["require","exports"],function(e,t){function i(e,t){s();if(n!==null)throw new Error("Expected balloon element to be unset after hiding");n=$("<div class='datalab-moduleBalloon validation'></div>").appendTo("body").fxBalloon({position:"top"}),e&&(r=t,n.children("div.fx-balloon-content").text(e),n.fxBalloon("show",t.getBoundingClientRect()))}function s(e){e===void 0&&(e=r),n&&e===r&&(n.fxBalloon("destroy"),n.remove(),n=null,r=null)}var n=null,r;t.show=i,t.hide=s}),define("generated/editor/TS/ViewModel/ExperimentEditor/Animation",["require","exports"],function(e,t){var n;(function(e){e.SixtyFPS=1e3/60})(n=t.Constants||(t.Constants={}));var r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=r;var i=function(){function e(t,n,r,i){r===void 0&&(r=800),i===void 0&&(i=e.defaultEasing),this.easingFunction=i,this.duration=r,this.startTime=Date.now(),this.endTime=this.startTime+r,this.stepFunction=t,this.animatedProperties=n,this.animationEnded=new ko.subscribable,this._animationStopped=!1,this.ignoreFrames=!1;for(var s in this.animatedProperties){if(isNaN(Number(n[s].start)))throw new Error("The property "+s+" lacks a numerical animation start value");if(isNaN(Number(n[s].end)))throw new Error("The property "+s+" lacks a numerical animation end value")}}return e.defaultEasing=function(e){return(Math.sin((e-.5)*Math.PI)+1)/2},e.prototype.start=function(){var e=this;if(this._animationStopped)throw new Error("Cannot start a previously stopped animation.");window.requestAnimationFrame?window.requestAnimationFrame(function(){e.step()}):this.legacyIntervalAnimationId=window.setTimeout(function(){e.step()},n.SixtyFPS)},e.prototype.stop=function(){if(this._animationStopped)throw new Error("Cannot stop an animation twice.");this._animationStopped=!0,this.step()},Object.defineProperty(e.prototype,"animationStopped",{get:function(){return this._animationStopped},enumerable:!0,configurable:!0}),e.prototype.step=function(){var e=this;if(this.ignoreFrames)return;var t=(Date.now()-this.startTime)/(this.endTime-this.startTime),r=t<1?this.easingFunction(t):1,i=new Object;for(var s in this.animatedProperties){var o=Number(this.animatedProperties[s].start),u=Number(this.animatedProperties[s].end);i[s]=o+(u-o)*r}if(this._animationStopped){this.animationEnded.notifySubscribers(i),this.ignoreFrames=!0;return}this.stepFunction(i),t<1?window.requestAnimationFrame?window.requestAnimationFrame(function(){e.step()}):window.setTimeout(function(){e.step()},n.SixtyFPS):this.stop()},e}();t.Animation=i}),define("generated/editor/TS/View/CoordinateHelper",["require","exports","../../../DataLabClient/Logging/Logging"],function(e,t,n){var r=function(){function e(e,t,n){this.svgRoot=e,this.getViewDimensions=t,this.svgTransformElement=n}return e.prototype.clientToDomainCoordinates=function(e,t){var r=this.svgRoot.createSVGPoint(),i=this.getViewDimensions();r.x=e-i.x,r.y=t-i.y;var s;try{s=this.svgTransformElement.getCTM().inverse()}catch(o){return n.customEvent({key:"SVGMatrixInverseFailed",type:"SVGInteraction",data:JSON.stringify({CTMMatrix:this.svgTransformElement.getCTM(),x:e,y:t})}),r}return r.matrixTransform(s)},e}();t.CoordinateHelper=r}),define("generated/editor/TS/ViewModel/ExperimentEditor/LocalStorageCache",["require","exports","../../../../DataLabClient/Util"],function(e,t,n){var r=function(){function e(t,n,r){r===void 0&&(r=Date),this.name=t,this.cacheLines=n,this.LRUDate=r,e.localStorageWrapper[t]?this.items=JSON.parse(e.localStorageWrapper[t]):this.items=Object.create(null)}return e.prototype.add=function(t,r){if(this.items[r]){this.items[r]={item:t,timeStamp:this.LRUDate.now()},e.localStorageWrapper[this.name]=JSON.stringify(this.items);return}if(Object.keys(this.items).length<this.cacheLines)this.items[r]={item:t,timeStamp:this.LRUDate.now()};else{var i=Infinity,s=null;n.forEach(this.items,function(e,t){e.timeStamp<i&&(s=t,i=e.timeStamp)}),delete this.items[s],this.items[r]={item:t,timeStamp:this.LRUDate.now()}}e.localStorageWrapper[this.name]=JSON.stringify(this.items)},e.prototype.fetch=function(t){var n=this.items[t];return n&&(n.timeStamp=this.LRUDate.now(),e.localStorageWrapper[this.name]=JSON.stringify(this.items)),n?n.item:undefined},e.prototype.clear=function(){this.items=Object.create(null)},e.localStorageWrapper=Shell.Utilities.isLocalStorageAvailable()?localStorage:Object.create(null),e}();t.LocalStorageCache=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/MiniMap",["require","exports","../../../TS/Global","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o){var u=function(e){function t(t,n,u,a,f,l,c,h){var p=this;e.call(this),this.mapHeight=150,this.mapWidth=210,this.mapPadding=8,this.animationEnded=new ko.subscribable,this.animatingLauncher=ko.observable(!1),this.canvasDiv=t,this.getViewDimensions=u,this.getGraphTransform=n,this.getExperimentBounds=a,this.pan=f,this.experimentChanged=!1,this.setMiniMapCollapsedStateTimeoutId=null,this.graphSvg=$(".customElements").children(".svgRoot"),this.graphDiv=$(".customElements").children(".xe-overlay");var d=!0;o.UserSettingsCache.getValue(r.UserPreference.MiniMapCollapsed).done(function(e){d=e==="true"}),this.miniMapCollapsed=ko.observable(d),this.experimentLoaded=ko.observable(!1),this.positionHighlight=ko.observable({x:0,y:0,width:0,height:0}),this.draggingStarted=ko.observable(!1),this.callUpdateOnExperimentChangeMethod=function(){p.updateOnExperimentChange()},this.callUpdatePositionHighlightMethod=function(){p.updatePositionHighlight()},this.callStartUpdatesMethod=function(){p.startUpdates()},ko.computed(function(){!p.miniMapCollapsed()&&p.experimentLoaded()&&!p.miniMapInitialized&&p.initializeMap(),p.miniMapCollapsed()&&p.updateIntervalId&&(clearInterval(p.updateIntervalId),p.updateIntervalId=null,p.miniMapInitialized=!1,p.experimentChanged=!1)}),new i.DisposableSubscription(l.subscribe(function(){p.callStartUpdatesMethod()})),new i.DisposableSubscription(c.subscribe(function(){p.callStartUpdatesMethod()})),new i.DisposableSubscription(h.subscribe(function(){$(".miniMapContainer").removeClass("miniMapInvisible"),p.experimentLoaded(!0)})),$(document).one("experimentLoaded",function(){$(".miniMapContainer").removeClass("miniMapInvisible"),p.experimentLoaded(!0)}),this.toggleExpandCollapse=function(){p.miniMapCollapsed(!p.miniMapCollapsed())},this.miniMapCollapsed.subscribe(function(){p.setMiniMapCollapsedStateTimeoutId||(p.setMiniMapCollapsedStateTimeoutId=setTimeout(function(){o.UserSettingsCache.setValue(r.UserPreference.MiniMapCollapsed,p.miniMapCollapsed()?"true":"false").always(function(){p.setMiniMapCollapsedStateTimeoutId=null})},2e3));var e=p.miniMapCollapsed()?164:165;s.featureUsage({featureID:e,groupID:162})}),this.registerForDisposal(new i.DisposableEventListener(this.canvasDiv,"keydown",function(e){switch(e.keyCode){case 77:p.toggleExpandCollapse();default:}}));var v=null;this.animateLauncher=function(){p.animatingLauncher(!0)},this.animationEnded.subscribe(function(){p.animatingLauncher()&&(clearTimeout(v),v=setTimeout(function(){return p.animatingLauncher(!1)},150))})}return __extends(t,e),t.prototype.updateMap=function(){if(!this.miniMapInitialized)return;this.mapSvg=this.graphSvg.clone();var e=this.graphDiv.clone();this.mapSvg.find("tspan").show();var t,n,r=this.getExperimentBounds(),i=!1;if(r&&r.width>0&&r.height>0){t=(this.mapWidth-2*this.mapPadding)/r.width,n=(this.mapHeight-2*this.mapPadding)/r.height;var s=Math.min(t,n),o=-r.x*s+(this.mapWidth-r.width*s)/2,u=-r.y*s+(this.mapHeight-r.height*s)/2;this.graphToMapTransform=this.mapSvg.get(0).createSVGMatrix().translate(o,u).scale(s);var a=this.mapSvg.children().get(0).transform.baseVal;if(a.length>0||a.numberOfItems>0){a.getItem(0).setMatrix(this.graphToMapTransform);var f="matrix("+this.graphToMapTransform.a+","+this.graphToMapTransform.b+","+this.graphToMapTransform.c+","+this.graphToMapTransform.d+","+this.graphToMapTransform.e+","+this.graphToMapTransform.f+")";e.css("-webkit-transform",f),e.css("transform",f),e.css("-ms-transform",f),e.css("-moz-transform",f)}this.experimentEmpty=!1}else this.experimentEmpty=!0;this.mapDivElement.empty(),this.mapSvg.appendTo(this.mapDivElement),e.appendTo(this.mapDivElement),this.updatePositionHighlight()},t.prototype.updateOnExperimentChange=function(){this.experimentChanged?(this.experimentChanged=!1,this.updateMap()):(clearInterval(this.updateIntervalId),this.updateIntervalId=null)},t.prototype.startUpdates=function(){this.miniMapCollapsed()||(this.experimentChanged=!0,this.updateIntervalId||(this.updateMap(),this.updateIntervalId=setInterval(this.callUpdateOnExperimentChangeMethod,2e3)))},t.prototype.highlightDragStart=function(e,t){s.featureUsage({featureID:163,groupID:162}),this.draggingStarted(!0),this.draggingStartX=t.clientX,this.draggingStartY=t.clientY},t.prototype.highlightDragStop=function(e,t){this.draggingStarted(!1)},t.prototype.highlightDrag=function(e,t){if(this.draggingStarted()){var n=t.clientX-this.draggingStartX,r=t.clientY-this.draggingStartY;this.draggingStartX=t.clientX,this.draggingStartY=t.clientY;var i=this.getGraphTransform().a,s=1/this.graphToMapTransform.a,o=s*i,u=-n*o,a=-r*o;this.pan(u,a)}},t.prototype.updatePositionHighlight=function(){var e=this.getGraphTransform(),t=this.getViewDimensions();if(!e||!t||this.experimentEmpty){this.positionHighlight({x:0,y:0,width:0,height:0});return}var n=1/e.a,r={x:-e.e*n,y:-e.f*n,width:(t.width-e.e)*n,height:(t.height-e.f)*n},i=this.graphToMapTransform.a*r.x+this.graphToMapTransform.e,s=this.graphToMapTransform.d*r.y+this.graphToMapTransform.f,o=this.graphToMapTransform.a*r.width+this.graphToMapTransform.e,u=this.graphToMapTransform.d*r.height+this.graphToMapTransform.f,a=o-i,f=u-s;i>this.mapWidth-this.mapPadding&&(i=this.mapWidth-this.mapPadding),s>this.mapHeight-this.mapPadding&&(s=this.mapHeight-this.mapPadding),i+a<this.mapPadding&&(a=this.mapPadding-i),s+f<this.mapPadding&&(f=this.mapPadding-s);var l={x:i,y:s,width:a,height:f};this.positionHighlight(l)},t.prototype.initializeMap=function(){if(this.miniMapCollapsed())return;this.mapDivElement=$(".miniMapDiv"),this.miniMapInitialized=!0,this.updateMap(),$(document).on("experimentFinishedRunning",this.callStartUpdatesMethod),$(this.graphSvg).on("originAndZoomChangedEvent",this.callUpdatePositionHighlightMethod)},t.prototype.dispose=function(){$(this.graphSvg).off("originAndZoomChangedEvent"),$(document).off("experimentFinishedRunning",this.callStartUpdatesMethod),this.setMiniMapCollapsedStateTimeoutId&&(clearTimeout(this.setMiniMapCollapsedStateTimeoutId),o.UserSettingsCache.setValue(r.UserPreference.MiniMapCollapsed,this.miniMapCollapsed()?"true":"false")),this.canvasDiv=null,this.updateIntervalId&&(clearInterval(this.updateIntervalId),this.updateIntervalId=null),this.updateStartStop=null},t}(i.Disposable);t.XEMiniMap=u}),define("generated/editor/TS/ViewModel/ExperimentEditor/DagSearchResultViewModel",["require","exports"],function(e,t){var n=function(){function e(e,t){this.searchContext=e||"",this.graphNodeViewModel=t}return e}();t.DagSearchResultViewModel=n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/Common/NodeSearchEngine",["require","exports","../../../DataLabClient/Disposable"],function(e,t,n){function o(e,t){e=e.trim(),t=t.trim();var n=e.split(" "),r=t.split(" "),i=[];for(var s=0;s<r.length;s++)for(var o=0;o<n.length;o++)if(n[o].toLowerCase().indexOf(r[s].toLowerCase())>-1){i.push(n[o]),n.splice(o,1);break}return i.length===r.length?i:[]}var r=function(){function e(){this.resultSubEntityDiv=new Array}return e}();t.SearchResultPayload=r;var i=function(){function e(){this.child=new Array}return e}();t.SearchInputPayload=i;var s=function(){function e(e,t){this.content=e,this.childElement=t,this.content=e,this.childElement=t}return e}();t.GraphEntitySearchResultOfChild=s,t.tokenizedSearch=o;var u=function(e){function t(t){e.call(this),this.runSearchAlgorithm=t,this.runSearchAlgorithm=t}return __extends(t,e),t.prototype.applySearch=function(e,t,n){var i=this;if(t===""||e=={})return{};var s={};return _.forOwn(e,function(e,o){var u=i.runSearchAlgorithm(e.parentContent,t);if(u.length>0){var a=t.split(" ")[0];s[o]=new r,s[o].context=i.generateContext(e.parentContent,a,n)}if(e.child[0]){var a=t.split(" ")[0];_.forOwn(e.child,function(e,u){var f=i.runSearchAlgorithm(e.content,t);e.content.toLowerCase().indexOf(t.toLowerCase())>-1&&(s[o]=new r,s[o].context=i.generateContext(e.content,a,n),s[o].resultSubEntityDiv.push(e.childElement))})}}),s},t.prototype.generateContext=function(e,t,n){return e.toLowerCase().indexOf(t.toLowerCase())<n?e.substring(0,n-1):e.length-e.toLowerCase().indexOf(t.toLowerCase())<n?e.substring(e.length-n,e.length-1):e.substring(e.toLowerCase().indexOf(t.toLowerCase())-n/2+5,e.toLowerCase().indexOf(t.toLowerCase())+n/2+5)},t}(n.Disposable);t.NodeSearchEngine=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/DagSearchControl",["require","exports","../../TS/Global","../../TS/ViewModel/ExperimentEditor/DagSearchResultViewModel","../../../DataLabClient/Disposable","../../../DataLabClient/Model/AnnotationNode","../../../DataLabClient/Util","../Common/NodeSearchEngine","../../../DataLabClient/LocalizedResources","../../../DataLabClient/ObservableMap"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){function t(t,n){var r=this;e.call(this),this.canvasDiv=t,this.experimentEditorviewModel=n,this.x=ko.observable(0),this.y=ko.observable(0);var s=this;this.searchableChildren={comment:"nodeComment"},this.searchUtility=new u.NodeSearchEngine(u.tokenizedSearch),this.currResultIdx=0,this.searchString="",this.dagSearchText=ko.observable("").extend({throttle:300}),this.resultsShortcutViewModels=f.observableMap(),this.maxDisplayedResults=4,this.resultsShortcutLowerBound=0,this.dagSearchWindowOn=!1,this.dagSearchResultsCount=ko.observable(o.format(a.fraction,"0","0")),this.allNodes=ko.pureComputed(function(){return r.generateSearchInputPayload(o.values(r.experimentEditorviewModel.experiment.nodes()),r.searchableChildren)}),this.focusToNode=function(e){if(!r.validateSearchedNodeListExist())return;r.getCurrentlySelectedGraphNodeViewModel().searchResultSelected(!1),r.currResultIdx=Object.keys(r.matchingNodes).indexOf(e.graphNode.id),r.dagSearchResultsCount(o.format(a.fraction,(r.currResultIdx+1).toString(),r.matchingNodeModelList.length.toString()));if(r.matchingNodeModelList&&r.matchingNodeModelList.length>0&&r.searchString!==""){var t=r.experimentEditorviewModel.experimentViewModel().getViewModelForNode(r.matchingNodeModelList[r.currResultIdx]);t.searchResultSelected(!0)}},this.focusAndPanToNode=function(e){r.experimentEditorviewModel.needsAnimationToNode.notifySubscribers(r.getCurrentlySelectedGraphNodeViewModel())},this.focusToNodeWrapper=function(e){r.focusToNode(e.graphNodeViewModel)},this.validateSearchedNodeListExist=function(){return r.matchingNodeModelList&&r.matchingNodeModelList.length>0&&r.searchString!==""},this.getCurrentlySelectedGraphNodeViewModel=function(){return r.experimentEditorviewModel.experimentViewModel().getViewModelForNode(r.matchingNodeModelList[r.currResultIdx])},this.clearAll=function(){r.dagSearchText("")},this.dagSearchText.subscribe(function(){r.updateSearchState()}),this.registerForDisposal(new i.DisposableEventListener(this.canvasDiv,"keydown",function(e){e.ctrlKey&&e.shiftKey&&(e.which===70||e.keyCode===70)?(r.handleToggle(),r.clearAll()):(e.which===27||e.keyCode===27)&&r.dagSearchWindowOn&&(r.handleToggle(),r.clearAll(),r.x(30),r.y(30)),r.handleNavigationKeys(e)})),this.registerForDisposal(new i.DisposableEventListener(document.getElementById("dagSearchTextBox"),"keydown",function(e){e.ctrlKey&&e.shiftKey&&(e.which===70||e.keyCode===70)?(r.handleToggle(),r.clearAll()):(e.which===27||e.keyCode===27)&&r.dagSearchWindowOn&&(r.handleToggle(),r.clearAll(),r.x(30),r.y(30)),r.handleNavigationKeys(e),e.stopPropagation()})),this.experimentEditorviewModel.experimentOrViewBoundsChanged.subscribe(function(){r.updateSearchState()}),$(".dagSearchIcon").click(function(){r.handleToggle()});var l=this.canvasDiv.querySelector(".dagSearchContainer");l.addEventListener(l.onmousewheel===undefined?"DOMMouseScroll":"mousewheel",function(e){return r.handleMouseWheel(e)}),this.x(30),this.y(30)}return __extends(t,e),Object.defineProperty(t.prototype,"resultsShortcutUpperBound",{get:function(){return this.resultsShortcutLowerBound+this.maxDisplayedResults-1},enumerable:!0,configurable:!0}),t.prototype.updateSearchState=function(){this.cleanHighlightCanvasNodes(),this.updateSearchResults(),this.updateSearchResultsCount(),this.repopulateShortcutViewModel(),this.setSearchHighlightCanvasNodes()},t.prototype.updateSearchResults=function(){var e=this;this.currResultIdx=0,this.searchString=this.dagSearchText.peek(),this.matchingNodes=this.searchUtility.applySearch(this.allNodes(),this.searchString,26),this.matchingNodeModelList=o.values(this.experimentEditorviewModel.experiment.nodes()).filter(function(t){return Object.keys(e.matchingNodes).indexOf(t.id)>-1}),this.resultsShortcutViewModels.clear(),this.resultsShortcutLowerBound=0,_.forEach(this.matchingNodeModelList,function(t,n){if(n>e.resultsShortcutUpperBound)return!1;e.resultsShortcutViewModels.put(t.id,new r.DagSearchResultViewModel(e.matchingNodes[t.id].context,e.experimentEditorviewModel.experimentViewModel().getViewModelForNode(e.matchingNodeModelList[n])))})},t.prototype.selectNextResult=function(){this.selectNextResultOnSurface();if(!this.validateSearchedNodeListExist())return;if(typeof this.currResultIdx!="number"||isNaN(this.currResultIdx))this.currResultIdx=0;this.currResultIdx===0?this.resultsShortcutLowerBound=0:this.currResultIdx>this.resultsShortcutUpperBound&&this.resultsShortcutLowerBound++,this.repopulateShortcutViewModel(),this.updateSearchResultsCount()},t.prototype.selectPreviousResult=function(){this.selectPreviousResultOnSurface();if(!this.validateSearchedNodeListExist())return;if(typeof this.currResultIdx!="number"||isNaN(this.currResultIdx))this.currResultIdx=0;this.currResultIdx===this.matchingNodeModelList.length-1&&(this.resultsShortcutLowerBound=this.matchingNodeModelList.length-this.maxDisplayedResults),this.currResultIdx<this.resultsShortcutLowerBound&&(this.resultsShortcutLowerBound=this.currResultIdx),this.repopulateShortcutViewModel(),this.updateSearchResultsCount()},t.prototype.selectNextResultOnSurface=function(){if(!this.validateSearchedNodeListExist())return;this.getCurrentlySelectedGraphNodeViewModel().searchResultSelected(!1),this.currResultIdx=(this.currResultIdx+1)%this.matchingNodeModelList.length;if(typeof this.currResultIdx!="number"||isNaN(this.currResultIdx))this.currResultIdx=0;this.getCurrentlySelectedGraphNodeViewModel().searchResultSelected(!0)},t.prototype.selectPreviousResultOnSurface=function(){if(!this.validateSearchedNodeListExist())return;this.getCurrentlySelectedGraphNodeViewModel().searchResultSelected(!1),this.currResultIdx===0?this.currResultIdx=this.matchingNodeModelList.length-1:this.currResultIdx--;if(typeof this.currResultIdx!="number"||isNaN(this.currResultIdx))this.currResultIdx=0;this.getCurrentlySelectedGraphNodeViewModel().searchResultSelected(!0)},t.prototype.updateSearchResultsCount=function(){this.matchingNodeModelList&&this.matchingNodeModelList.length>0?this.dagSearchResultsCount(o.format(a.fraction,(this.currResultIdx+1).toString(),this.matchingNodeModelList.length.toString())):this.dagSearchResultsCount(o.format(a.fraction,"0","0"))},t.prototype.repopulateShortcutViewModel=function(){var e=this;this.resultsShortcutViewModels.clear(),_.forEach(this.matchingNodeModelList,function(t,n){if(n>=e.resultsShortcutLowerBound){if(n>e.resultsShortcutUpperBound)return!1;e.resultsShortcutViewModels.put(t.id,new r.DagSearchResultViewModel(e.matchingNodes[t.id].context,e.experimentEditorviewModel.experimentViewModel().getViewModelForNode(e.matchingNodeModelList[n])))}})},t.prototype.cleanHighlightCanvasNodes=function(){var e=this;if(!this.validateSearchedNodeListExist())return;var t=o.values(this.experimentEditorviewModel.experiment.nodes());_.forEach(t,function(n,r){var i=e.experimentEditorviewModel.experimentViewModel().getViewModelForNode(t[r]);i&&(i.searchMatched(!1),i.searchResultSelected(!1))}),_.forEach(this.matchingNodes,function(e,t){if(e.resultSubEntityDiv.length>0){_.forEach(e.resultSubEntityDiv,function(t,n){e.resultSubEntityDiv[n]&&(e.resultSubEntityDiv[n].className=e.resultSubEntityDiv[n].className.replace(/(?:^|\s)highlightedEntityYellow(?!\S)/g,""))});var n=$(".disconnectedChild-"+t).removeClass("highlightedEntityYellow")}})},t.prototype.setSearchHighlightCanvasNodes=function(){var e=this;if(!this.validateSearchedNodeListExist())return;this.getCurrentlySelectedGraphNodeViewModel().searchResultSelected(!0),_.forEach(this.matchingNodeModelList,function(t,n){var r=e.experimentEditorviewModel.experimentViewModel().getViewModelForNode(e.matchingNodeModelList[n]);r&&r.searchMatched(!0)}),_.forEach(this.matchingNodes,function(e,t){e.resultSubEntityDiv.length>0&&(_.forEach(e.resultSubEntityDiv,function(t,n){e.resultSubEntityDiv[n]&&(e.resultSubEntityDiv[n].className+=" highlightedEntityYellow")}),$(".disconnectedChild-"+t).addClass("highlightedEntityYellow"))})},t.prototype.handleMouseWheel=function(e){var t;e.detail?t=-e.detail/3:t=e.wheelDelta/120,t>0?this.selectPreviousResult():t<0&&this.selectNextResult()},t.prototype.generateSearchInputPayload=function(e,t){var n={};return _.forOwn(e,function(e,r){e instanceof s?(n[e.id]=new u.SearchInputPayload,n[e.id].parentContent=e.annotation.content()):(n[e.id]=new u.SearchInputPayload,n[e.id].parentContent=e.name),t&&$("#node-"+e.id).length>0&&_.forOwn(t,function(t,r){e.hasOwnProperty(r)&&(e[r].constructor===Array?_.forOwn(e[r],function(r,i){$("[id=node-"+e.id.replace(/\./g,"\\.")+"]").each(function(){var s=new u.GraphEntitySearchResultOfChild(r(),$(this).find("."+t).get(+i));n[e.id].child.push(s)})}):$("[id=node-"+e.id.replace(/\./g,"\\.")+"]").each(function(){var i=new u.GraphEntitySearchResultOfChild(e[r](),$(this).find("."+t).get(0));n[e.id].child.push(i)}))})}),n},t.prototype.handleNavigationKeys=function(e){if(this.dagSearchWindowOn)if(e.which===13||e.keyCode===13)e.preventDefault(),this.validateSearchedNodeListExist()&&this.focusAndPanToNode(this.getCurrentlySelectedGraphNodeViewModel());else if(e.which===40||e.keyCode===40)e.preventDefault(),this.selectNextResult();else if(e.which===38||e.keyCode===38)e.preventDefault(),this.selectPreviousResult()},t.prototype.translate=function(e,t){this.x(this.x()+e),this.y(this.y()+t)},t.prototype.initDragging=function(e){var t=this;if(this.dragging)return;this.dragging=!0,this.draggingEventListener=new i.DisposableEventListener(this.canvasDiv,"mousemove",function(e){if(Math.abs(e.movementX)!==0||Math.abs(e.movementY)!==0)t.translate(-e.movementX,e.movementY),t.x()<0?(t.x(20),t.finishDragging(e)):t.y()<0?(t.y(20),t.finishDragging(e)):t.x()>t.canvasDiv.clientWidth-30?(t.x(t.canvasDiv.clientWidth-30),t.finishDragging(e)):t.y()>t.canvasDiv.clientHeight-30&&(t.y(t.canvasDiv.clientHeight-70),t.finishDragging(e)),t.preventToggle=!0}),this.mouseUpEventListener=new i.DisposableEventListener(document.body,"mouseup",function(e){t.finishDragging(e)})},t.prototype.finishDragging=function(e){this.dragging=!1,this.draggingEventListener.dispose(),this.mouseUpEventListener.dispose()},t.prototype.handleToggle=function(){this.preventToggle?this.preventToggle=!1:(this.dagSearchWindowOn=this.dagSearchWindowOn?!1:!0,$(".dagSearchIcon").toggle(),$(".dagSearchContainer").slideToggle("fast"),this.dagSearchWindowOn?document.getElementById("dagSearchTextArea").focus():this.canvasDiv.focus(),this.clearAll())},t}(i.Disposable);t.DagSearchControl=l}),define("generated/editor/TS/ViewModel/PaletteControl/IconUtilities",["require","exports","../../../../DataLabClient/Constants","../../../../DataLabClient/UtilString"],function(e,t,n,r){function i(e){var t="icon-module";if(!e)return t;var r=e.split("\\");switch(r[0]){case"Annotation":return"icon-annotation";case"Saved Datasets":return"icon-data_set";case"Trained Models":return"icon-trained_model";case"Transforms":return"icon-custom_transform";case"Data Format Conversions":return"icon-data_format";case"Data Input and Output":return"icon-data_input";case"Data Transformation":return"icon-transformation";case"Feature Selection":return"icon-discover";case"Statistical Functions":return"icon-math_statistics";case"Time Series":return"icon-time_series";case"Machine Learning":return"icon-machine_learning";case"OpenCV Library Modules":return"icon-computer_vision";case"R Language Modules":return"icon-R_language";case"Python Language Modules":return"icon-python_module";case"Text Analytics":return"icon-text_analytics";case"Custom Modules":return"icon-custom_module";case n.ResourceCategory.WebService:return"icon-web_service";case"Deprecated":return"icon-Deprecated";default:return t}}function o(e){var t="",n=document.createElement("span");return n.className=e,document.body.appendChild(n),t=window.getComputedStyle(n,":before").getPropertyValue("content"),t=r.removeSurroundingQuotes(t),document.body.removeChild(n),t.length!==1&&(t=s[e]),t}function a(e){return u(e)}t.GetIconForCategory=i;var s={"icon-Discovery":"","icon-properties_webservice_parameter":"","icon-properties_chevron_collapsed":"","icon-properties_chevron_expanded":"","icon-properties_parameter_menu":"","icon-Deprecated":"","icon-custom_transform":"","icon-web_service":"","icon-computer_vision":"","icon-data_format":"","icon-data_input":"","icon-data_output":"","icon-data_set":"","icon-discover":"","icon-machine_learning":"","icon-math_statistics":"","icon-module":"","icon-preview":"","icon-python_module":"","icon-R_language":"","icon-text_analytics":"","icon-time_series":"","icon-trained_model":"","icon-transformation":"","icon-custom_module":"","icon-annotation":""},u=_.memoize(o);t.GetIconSymbol=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/PortViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/Entity","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../TS/Global","../../../../DataLabClient/Features","../../../../DataLabClient/Model/Port"],function(e,t,n,r,i,s,o){var u=function(e){function t(t,n,r){var u=this;e.call(this,r),this.connections=ko.observableArray(),this.portState=ko.observable(o.Constants.PortState.Default),this.hostRelativeX=ko.observable(0),this.hostRelativeY=ko.observable(0);if(!t)throw new Error("'parent' parameter is required");if(!n)throw new Error("'portModel' parameter is required");this.category=3,this.portModel=n,this._parent=t,this.balloonMessage=ko.observable(null),this.portTypes="";for(var a=0;a<this.portModel.descriptor.allowedDataTypes.length;a++){var f=this.portModel.descriptor.allowedDataTypes[a];this.portTypes+=f.toString(),a<this.portModel.descriptor.allowedDataTypes.length-1&&(this.portTypes+=", ")}this.classId=ko.computed(function(){if(s.editorControl2Enabled()){var e=o.Constants.PortClass;this.portModel.isConnected()&&(e+=" "+o.Constants.PortState.Connected);switch(this.portState()){case o.Constants.PortState.Compatible:return e+" "+o.Constants.PortState.Compatible;case o.Constants.PortState.Incompatible:return e+" "+o.Constants.PortState.Incompatible;case o.Constants.PortState.Default:return this.portModel.isConnected()?e:e+" "+o.Constants.PortState.Default;case o.Constants.PortState.Replaceable:return e+" "+o.Constants.PortState.Replaceable;case o.Constants.PortState.Selected:return e+" "+o.Constants.PortState.Selected;default:throw new Error("Unknown port compatibility type")}}else switch(this.portState()){case o.Constants.PortState.Compatible:return o.Constants.PortClass+" "+o.Constants.PortState.Compatible;case o.Constants.PortState.Incompatible:return o.Constants.PortClass+" "+o.Constants.PortState.Incompatible;case o.Constants.PortState.Default:return this.portModel.isConnected()?o.Constants.PortClass+" "+o.Constants.PortState.Connected:o.Constants.PortClass+" "+o.Constants.PortState.Default;case o.Constants.PortState.Replaceable:return o.Constants.PortClass+" "+o.Constants.PortState.Replaceable;case o.Constants.PortState.Selected:return o.Constants.PortClass+" "+o.Constants.PortState.Selected;default:throw new Error("Unknown port compatibility type")}},this),this._x=ko.computed(function(){return u.parent.x()+u.hostRelativeX()}),this._y=ko.computed(function(){return u.parent.y()+u.hostRelativeY()}),this.labelPosX=ko.computed(function(){return u.x()+i.Port.HalfWidth}),this.translation=ko.computed(function(){return"translate("+u.x()+","+u.y()+")"}),this.labelMaxWidth=ko.observable(Number.POSITIVE_INFINITY),this.labelYOffset=ko.observable(0),this.labelPosY=ko.computed(function(){return u.y()-i.Label.InPortYPos}),this.tooltipPosX=ko.computed(function(){return u.labelPosX()}),this.tooltipPosY=ko.computed(function(){return u.labelPosY()}),this.tooltipBoxPosX=ko.computed(function(){return u.tooltipPosX()-u.labelWidth()/2}),this.infoIcon="/Libraries/Images/ArrowLabel.png",this.belongsToExperimentFlow=ko.computed(function(){return u.connections().length?u.connections().some(function(e){return e.belongsToExperimentFlow()}):u.parent.belongsToExperimentFlow()}),this.belongsToWebServiceFlow=ko.computed(function(){return u.connections().length?u.connections().some(function(e){return e.belongsToWebServiceFlow()}):u.parent.belongsToWebServiceFlow()})}return __extends(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientSideStorageId",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),t.prototype.getCX=function(){return this.x()+i.Port.HalfWidth},t.prototype.getCY=function(){return this.y()},t.prototype.entityAtPoint=function(e,t){return this.containsPoint(e,t)?this:null},t.prototype.containsPoint=function(e,t){var n=this.x(),r=this.y();return e>=n&&e<=n+i.Port.HalfWidth*2&&t>=r&&t<=r+i.Port.Height},t.prototype.addConnection=function(e){this.connections().indexOf(e)<0&&this.connections.push(e)},t.prototype.removeConnection=function(e){var t=this.connections().indexOf(e);t>=0&&this.connections.remove(e)},t.prototype.getClassId=function(t){if(s.editorControl2Enabled())return e.prototype.getClassId.call(this,t);var n=e.prototype.getClassId.call(this,t);return this.belongsToCurrentFlow(t)&&t!==i.ExperimentDataFlowType.Experiment?n+" whiteFill":!this.belongsToCurrentFlow(t)&&t===i.ExperimentDataFlowType.Experiment?n+" whiteFill":n},t}(r.EntityBaseV1);t.PortViewModel=u;var a=function(e){function t(t,n){var s=this;e.call(this,t,n,r.EntityTypes[i.EntityType.InputPort]),this.labelPosY=ko.computed(function(){return s.y()-i.Label.InPortYPos-s.labelYOffset()})}return __extends(t,e),t}(u);t.InputPort=a;var f=function(e){function t(t,n){e.call(this,t,n,r.EntityTypes[i.EntityType.OutputPort]),this.labelPosY=ko.computed(function(){return this.y()+i.Label.OutPortYPos+this.labelYOffset()},this),this.highlighted=ko.observable(!1)}return __extends(t,e),t.prototype.getCY=function(){return this.y()+i.Port.Height},t}(u);t.OutputPort=f});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/GraphNodeViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/Entity","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../TS/Global","../../../TS/ViewModel/PaletteControl/IconUtilities","../../../TS/ViewModel/ExperimentEditor/PortViewModel","../../../../DataLabClient/Model/Port","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f;(function(e){e.XOffset=200,e.YOffset=40,e.GraphNodeYOffset=45-e.YOffset,e.WidthBuffer=17,e.HeightOffset=45,e.LineHeight=20,e.MaxLinesToShow=3})(f=t.Comments||(t.Comments={}));var l;(function(e){e.Rate=75,e.Trigger=3})(l=t.Growth||(t.Growth={}));var c=function(e){function t(t,n){var r=this;e.call(this,n),this.portState=ko.observable(u.Constants.PortState.Default),this.iconClass="",this.isResizable=!1,this.minWidth=-Infinity,this.minHeight=-Infinity,this.maxWidth=Infinity,this.maxHeight=Infinity;if(!t)throw new Error("'graphNode' parameter is required to be non-null");this.category=2,this.graphNode=t,this.valid=ko.observable(!0),this.labelPosX=ko.computed(function(){return r.x()+i.Label.ModuleXOffset}),this.labelPosY=ko.computed(function(){return r.y()+i.Label.ModuleYOffset}),this.forceBalloon=new ko.subscribable,this.graphNode.height()===0&&this.graphNode.height(i.RectHeight),this.ports={},this.inputPorts={},this.outputPorts={},a.forEach(this.graphNode.ports,function(e){var t;if(e instanceof u.InputPort)t=r.inputPorts[e.name]=new o.InputPort(r,e);else{if(!(e instanceof u.OutputPort))throw new Error("Unknown port type");t=r.outputPorts[e.name]=new o.OutputPort(r,e)}r.ports[e.name]=t}),this.statusIconURL=ko.computed(function(){return"/Content/Images/icon-none.svg"}),Object.freeze(this.ports),Object.freeze(this.inputPorts),Object.freeze(this.outputPorts),this.relayout(),this.labelMaxWidth=i.Label.MaxWidth,this.tooltipPosX=ko.computed(function(){return r.labelPosX()}),this.tooltipPosY=ko.computed(function(){return r.labelPosY()-i.Tooltip.RectYOffset}),this.hasComment=ko.computed(function(){return r.graphNode.comment()!==""}),this.commentPosX=ko.computed(function(){var e=r.labelPosX();return e+"px"}),this.commentPosY=ko.computed(function(){var e=r.labelPosY()+i.Label.Height+f.GraphNodeYOffset;return e+"px"}),this.commentWidth=ko.computed(function(){return r.width()-i.Label.ModuleXOffset*2+"px"}),this.linesToShow=ko.computed(function(){if(r.graphNode.commentCollapsed())return 0;var e=1;while(e<=f.MaxLinesToShow&&r.commentLargerThanDiv(f.LineHeight*(e-1),r.comment()))e+=1;var t=a.values(r.outputPorts);return r.graphNode.height(i.RectHeight+f.LineHeight*(e-1)),r.relayoutPorts(t,r.width(),r.height()),e-1}),this.commentCollapsedExpandedIconURL=ko.computed(function(){return r.graphNode.commentCollapsed()?"/Libraries/Images/icon-chevron-collapsed.svg":"/Libraries/Images/icon-chevron-expanded.svg"});var l=s.GetIconSymbol("icon-properties_chevron_collapsed"),c=s.GetIconSymbol("icon-properties_chevron_expanded");this.commentCollapsedExpandedIconSymbol=ko.computed(function(){return r.graphNode.commentCollapsed()?l:c}),this.showHideComment=function(){var e=a.values(r.outputPorts);r.graphNode.commentCollapsed(!r.graphNode.commentCollapsed()),r.graphNode.height(i.RectHeight+f.LineHeight*r.linesToShow()),r.relayoutPorts(e,r.width(),r.height())},this.commentToShow=ko.computed(function(){if(!r.commentLargerThanDiv(f.LineHeight*f.MaxLinesToShow,r.comment()))return r.graphNode.comment();var e=0;while(!r.commentLargerThanDiv(f.LineHeight*f.MaxLinesToShow,r.comment().slice(0,e)+" ..."))e+=1;return r.comment().slice(0,e-1)+" ..."}),this.editingComment=ko.observable(!1),this.commentClass=ko.computed(function(){var e="nodeComment",t=r.graphNode.commentCollapsed()?" collapsed":"",n=r.selected()?" selected":"";return e+t+n}),this.iconPosX=ko.computed(function(){return r.x()+i.Icon.XOffset}),this.iconPosY=ko.computed(function(){return r.y()+(i.RectHeight-i.Icon.Height)/2}),this.textClassId=ko.computed(function(){return"staticText"}),this.icon="",this.iconSymbol=""}return __extends(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this.graphNode.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.graphNode.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.graphNode.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.graphNode.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientSideStorageId",{get:function(){return this.graphNode.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"comment",{get:function(){return this.graphNode.comment},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"balloonMessage",{get:function(){return this.graphNode.balloonMessage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){throw new Error("abstract property 'label' must be overriden")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){var e="";return e+=this.graphNode.name+". ",this.graphNode.description&&(e+=(e!==""?"\n":"")+this.graphNode.description),e},enumerable:!0,configurable:!0}),t.prototype.findClosestInputPort=function(e,t){return this.findClosestPort(this.inputPorts,e,t)},t.prototype.findClosestOutputPort=function(e,t){return this.findClosestPort(this.outputPorts,e,t)},t.prototype.remove=function(){e.prototype.remove.call(this),this.graphNode.remove()},t.prototype.hit=function(e,t,n,r){var i={x:this.x(),y:this.y()},s={x:this.x()+this.width(),y:this.y()+this.height()};return i.x<e?!1:i.y<t?!1:s.x>n?!1:s.y>r?!1:!0},t.prototype.entityAtPoint=function(e,t){if(this.boundingBoxContainsPoint(e,t)){for(var n in this.ports){var r=this.ports[n].entityAtPoint(e,t);if(r!==null)return r}return this.containsPoint(e,t)?this:null}return null},t.prototype.containsPoint=function(e,t){return e>=this.x()&&e<=this.x()+this.width()&&t>=this.y()&&t<=this.y()+this.height()},t.prototype.boundingBoxContainsPoint=function(e,t){var n=t+i.Port.HalfHeight,r=this.height()+i.Port.Height;return e>=this.x()&&e<=this.x()+this.width()&&n>=this.y()&&t<=this.y()+r},t.prototype.relayout=function(){var e=a.values(this.inputPorts),t=a.values(this.outputPorts),n=Math.max(e.length,t.length),r=Math.max(0,(n-l.Trigger)*l.Rate);(!this.isAnnotation||this.width()===0)&&this.width(i.RectWidth+r),this.relayoutPorts(e,this.width(),this.height()),this.relayoutPorts(t,this.width(),this.height())},t.prototype.getCompatibilityClass=function(){switch(this.portState()){case u.Constants.PortState.Compatible:return"compatible";case u.Constants.PortState.CompatibleSnapped:return"compatible snapped";case u.Constants.PortState.Incompatible:return"incompatible";case u.Constants.PortState.Default:return"idle";case u.Constants.PortState.Replaceable:return"replaceable";default:throw new Error("Unknown node compatibility type")}},t.prototype.findClosestPort=function(e,t,n){var r=function(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))},i=null,s=Number.MAX_VALUE;return a.forEach(e,function(e){var o=r(t,n,e.getCX(),e.getCY());o<s&&(s=o,i=e)}),i},t.prototype.relayoutPorts=function(e,t,n){var r=t/(e.length+1);e.forEach(function(e){var t=(e.portModel.ordinal+1)*r-i.Port.HalfWidth,s=e instanceof o.InputPort?0:n;e.hostRelativeX(t),e.hostRelativeY(s),e.labelMaxWidth(r*2-i.Port.HalfWidth*4)})},t.prototype.editComment=function(){this.editingComment(!0)},t.prototype.commentLargerThanDiv=function(e,t){var n=document.createElement("div");n.setAttribute("class","nodeComment"),n.style.width=this.commentWidth(),n.style.visibility="hidden";var r=document.createElement("pre");r.setAttribute("class","text"),n.appendChild(r),document.body.appendChild(n);if(t){$(r).text(t);if(n.clientHeight>e)return document.body.removeChild(n),!0}return document.body.removeChild(n),!1},t}(r.EntityBaseV1);t.GraphNodeViewModel=c}),define("generated/DataLabClient/Contracts/V1/DataGatewayBackend",["require","exports"],function(e,t){(function(e){e[e.None=0]="None",e[e.UpToDate=1]="UpToDate",e[e.NewVersionAvailable=2]="NewVersionAvailable",e[e.Expiring=3]="Expiring",e[e.Expired=4]="Expired",e[e.Other=5]="Other"})(t.gatewayVersionState||(t.gatewayVersionState={}));var n=t.gatewayVersionState;(function(e){e[e.None=0]="None",e[e.NeedRegistration=1]="NeedRegistration",e[e.Online=2]="Online",e[e.Offline=3]="Offline",e[e.UpdateAvailable=4]="UpdateAvailable",e[e.Other=5]="Other"})(t.gatewayState||(t.gatewayState={}));var r=t.gatewayState}),define("generated/editor/TS/View/CredentialsPivot",["require","exports","../../../DataLabClient/Constants","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Util"],function(e,t,n,r,i,s){var o=function(){function e(e,t){var n=this;this.renderArea=t,this.client=e,this.data=[],this.grid=$(this.renderArea).find("#grid").addClass("usersGrid").fxDataGrid({columns:[{name:r.type,field:"type"},{name:r.credential,field:"credential"}],data:this.data,selectable:!0,multiselect:!0,resizable:!0,rowSelect:function(e,t){n.removeCommand.setDisabled(n.grid.fxDataGrid("getSelectedRows").length===0)},noRows:r.credentialsNone})}return e.prototype.setRemoveCommand=function(e){this.removeCommand=e,this.removeCommand.setDisabled(this.grid.fxDataGrid("getSelectedRows").length===0)},e.prototype.keypartsToString=function(e){var t="";return s.forEach(e.Parts,function(e){t+=e.Name+"="+e.Value}),t},e.prototype.refreshFromService=function(){var e=this;Shell.UI.Spinner.show(),this.client.listCredentials().done(function(t){Shell.UI.Spinner.hide();var n=[];s.forEach(t,function(t){n.push({type:t.Type,credential:e.keypartsToString(t),keyParts:t})}),$.observable(e.data).refresh(n)})},e.prototype.removeCredentials=function(){var e=this,t=this.grid.fxDataGrid("getSelectedRows").length,n=new Shell.UI.Notifications.Confirmation(s.format(r.removeCredentialsConfirmation,t.toString()),"active");n.setActions([new Shell.UI.Notifications.Buttons.yes(function(){e.doRemoveCredentials(),i.customEvent({key:"RemoveCredentials_Yes",type:"ShellUICommands"})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(n),i.customEvent({key:"RemoveCredentials_No",type:"ShellUICommands"})})]),Shell.UI.Notifications.add(n)},e.prototype.doRemoveCredentials=function(){var e=this,t=this.grid.fxDataGrid("getSelectedRows"),n=[];s.forEach(t,function(t){var r=t.dataItem;n.push(e.client.deleteCredential(r.keyParts))}),Shell.UI.Spinner.show(),$.when.apply($,n).always(function(){e.refreshFromService()}),i.featureUsage({featureID:14,groupID:15,data:JSON.stringify({amount:t.length})})},e}();t.CredentialsPivot=o}),define("generated/DataLabClient/Trial",["require","exports","./Model/WorkspaceSettings","./Logging/Logging","./Features"],function(e,t,n,r,i){function f(e){a=e}function l(e){e&&(o=e)}function c(){var e=0;return a.environment&&(e=n.WorkspaceType[a.environment.workspaceType],typeof e!="number"&&(e=0,r.error("invalid workspace type","Trial.getWorkspaceType",a.environment.workspaceType))),e}function h(){return c()===1}function p(){return c()===2}function d(e){switch(e.Description){case"Sample 1: Download dataset from UCI: Adult 2 class dataset":case"Sample 2: Dataset Processing and Analysis: Auto Imports Regression Dataset":case"Sample 7: Train, Test, Evaluate for Multiclass Classification: Letter Recognition Dataset":case"Sample Experiment - Direct Marketing - Development – Training":case"Sample Experiment - Network Intrusion Detection - Development":case"Sample Experiment - News Categorization - Development":case"Sample Experiment - Student Performance - Development":return!1;default:return!0}}function v(){if(!i.trialLimitationsEnabled())return!0;var e=!p()||i.datasetUploadInTrialEnabled();return e}function m(){if(!i.trialLimitationsEnabled())return!0;var e=!p()||i.moduleUploadInTrialEnabled();return e}function g(e){if(!i.trialLimitationsEnabled())return!0;var t=!L(e);return t}function y(){if(!i.trialLimitationsEnabled())return!0;var e=!p()||i.publishWebServiceInTrialEnabled();return e}function b(){if(!i.trialLimitationsEnabled())return!0;var e=!p();return e}function w(){return!i.trialLimitationsEnabled()||x()<1?!0:n.WorkspaceTypeExtensions.isProduction(c())}function E(){return i.trialLimitationsEnabled()&&h()&&i.enableWorkspaceQuotasEnabled()}function S(){return i.trialLimitationsEnabled()&&h()}function x(){return o.maxModuleCount}function T(){return o.timeLimit}function N(){return o.moduleRunTimeLimit}function C(){return o.storageLimit}function k(){return p()&&o.maxDatasetUploadSize>0?o.maxDatasetUploadSize:Number.MAX_VALUE}function L(e){return u||(u=Object.create(null),o.restrictedModules.forEach(function(e){u[e]=!0})),!!u[e]}var s=function(){function e(e){this.feature=null,this.type=null,this.value=null;if(e.status===403&&e.responseText){var t=e.responseText,n=t.match(/^Feature:([^;]+);(\w+):(.*)$/);n&&n[1]&&n[2]&&n[3]&&(this.feature=n[1],this.type=n[2],this.value=this.type==="MaxLimit"?+n[3]:n[3])}}return e}();t.RestrictedFeatureError=s;var o={maxModuleCount:Number.MAX_VALUE,restrictedModules:[],timeLimit:-1,moduleRunTimeLimit:Number.MAX_VALUE,storageLimit:10737418240,maxDatasetUploadSize:-1},u=null,a=window;t.setContext=f,t.setUsageLimits=l,t.getWorkspaceType=c,t.isWorkspaceTypeFree=h,t.isWorkspaceTypeAnonymous=p,t.filterSample=d,t.isDatasetUploadEnabled=v,t.isModuleUploadEnabled=m,t.isModuleEnabledById=g,t.isWebServicePublishEnabled=y,t.isPublishToCommunityEnabled=b,t.isNumberOfModulesUnrestricted=w,t.isWorkspaceStorageLimited=E,t.isModuleRuntimeLimited=S,t.getMaxNumberOfModules=x,t.getTimeLimit=T,t.getModuleRunTimeLimit=N,t.getStorageLimit=C,t.getMaxDatasetUploadSize=k}),define("generated/editor/DataLabViews/ExperimentListView",["require","exports","../DataLabViews/ExperimentView","../../DataLabClient/Constants","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Logging/Performance","../../DataLabClient/Trial","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f){function c(e){return l.hasOwnProperty(e)?l[e]:e}function h(e){return e.getFullYear()<1970?new Date:e}function p(e,t){var n=t.rowMetadata.dataItem.ExperimentId;return"<span id='"+n+"'>"+f.encodeAsHtml(e)+"</span>"}var l={NotStarted:"Not Started",InDraft:"Draft",Running:"Running",Failed:"Failed",Finished:"Finished",Canceled:"Canceled"};t.formatExperimentStatusCode=c,t.dateTimeSortFormatter=h,t.formatExperimentName=p;var d=function(){function e(e,t,r,i,u){var a=this;this._renderArea=e,this._data=[],this.listedExperiments=[],this._workspace=t,this._client=r,this._userName=i,this._selectedRows=[],this._experimentCategory=u,this.formatCheckbox=function(e,t){var n=t.rowMetadata.dataItem.ExperimentId.split(".")[0]===a._workspace.id;return n?"<input type='checkbox' class='rowCheckbox' />":"<input type='checkbox' class='rowCheckbox' disabled='true' />"};var l=[{name:s.experimentGridHeaderName,field:"Description",formatter:p,sorted:u!=="user"?"ascending":undefined,cssClass:"navigationColumn"},{name:s.experimentGridHeaderCreator,field:"Creator",cssClass:"navigationColumn"},{name:s.experimentGridHeaderStatus,field:"StatusCode",formatter:c,cssClass:"navigationColumn"},{name:s.experimentGridHeaderModificationTime,field:"CreationTime",formatter:f.formatDate,sorted:u!=="user"?undefined:"descending",sortFormatter:h,cssClass:"navigationColumn"},{name:s.experimentGridHeaderStartTime,field:"StartTime",formatter:f.formatDate,sortFormatter:h,cssClass:"navigationColumn"},{name:s.experimentGridHeaderEndTime,field:"EndTime",formatter:f.formatDate,cssClass:"navigationColumn"}];if(u==="user"){var d={name:"",field:"Checkbox",formatter:this.formatCheckbox,cssClass:"checkboxColumn"};l=$.merge([d],l)}this._grid=$(e).find("#grid").wazDataGrid({columns:l,data:this._data,selectable:!0,multiselect:!0,resizable:!0,rowSelect:function(e,t){cdm.setActiveItem(a),a.deleteCommand&&a.deleteCommand.setDisabled(a._selectedRows.length===0)}}),this._grid.on("click",".navigationColumn",function(e){var t=$(e.target).closest("tr").view().data;if(t.rowMetadata){var r=t.rowMetadata.dataItem.ExperimentId;n.navigateToExperiment(r)}}),this._grid.on("click",".rowCheckbox",function(e){var t=$(e.target).closest("tr").view().data.rowMetadata,n=$(e.target).is(":checked");if(n)a._selectedRows.push(t),o.customEvent({key:"SelectRow",type:"ExperimentListView",data:JSON.stringify({selectedRow:t,allSelectedRows:a._selectedRows})});else{var r=a._selectedRows.indexOf(t);a._selectedRows.splice(r,1),o.customEvent({key:"UnselectRow",type:"ExperimentListView",data:JSON.stringify({selectedRow:t,allSelectedRows:a._selectedRows})})}}),cdm.setActiveItem(this)}return e.prototype.refreshFromService=function(){var t=this;Shell.UI.Spinner.show();var n={includeNonLeaf:!1,includeArchived:!1};f.then(this._workspace.listExperimentsAsync(n),function(n){cdm.currentActiveItem instanceof e&&(u.intervalEnd(),i.experimentListCategoriesEnabled()?t.filterExperimentsByCategory(n):t.filterExperiments(n),t._populateExperimentList(t.listedExperiments),Shell.UI.Spinner.hide())})},e.prototype.changeExperimentArchiveState=function(e){var t=this,n=function(e){for(var n=0;n<t.listedExperiments.length;n++)if(t.listedExperiments[n].ExperimentId===e){t.listedExperiments.splice(n,1);break}t.refreshFromLocal(t.listedExperiments),Shell.UI.Spinner.hide()};Shell.UI.Spinner.show(),f.forEach(this._selectedRows,function(r){e?f.then(t._workspace.archiveExperimentAsync(r.dataItem.ExperimentId),function(){n(r.dataItem.ExperimentId)},function(){Shell.UI.Spinner.hide()}):f.then(t._workspace.unarchiveExperimentAsync(r.dataItem.ExperimentId),function(){n(r.dataItem.ExperimentId)},function(){Shell.UI.Spinner.hide()})})},e.prototype.setCommands=function(){this._experimentCategory==="user"&&(this.deleteCommand=new Shell.UI.Commands.Command(s.deleteItem,Shell.UI.Icons["delete"],this.deleteConfirmation.bind(this),null,!0),Shell.UI.Commands.add([this.deleteCommand]))},e.prototype.filterExperiments=function(e){var t=this;this._experimentCategory!=="user"?(this.listedExperiments=$.grep(e,function(e){return t._isGlobalWorkspaceId(e.ExperimentId.split(".")[0])},!1),this.listedExperiments=this.listedExperiments.filter(function(e){return e.Description===r.GuidedExperimentDescription?!1:!0}),a.isWorkspaceTypeAnonymous()&&(this.listedExperiments=this.listedExperiments.filter(a.filterSample))):this.listedExperiments=$.grep(e,function(e){return t._isUserWorkspaceId(e.ExperimentId.split(".")[0])},!1)},e.prototype.filterExperimentsByCategory=function(e){var t=this;this.listedExperiments=e.filter(function(e){var n=t.getExperimentCategory(e);return n===t._experimentCategory}),a.isWorkspaceTypeAnonymous()&&this._experimentCategory!=="user"&&(this.listedExperiments=this.listedExperiments.filter(a.filterSample))},e.prototype.refreshFromLocal=function(e){Shell.UI.Spinner.show(),this._populateExperimentList(e),Shell.UI.Spinner.hide()},e.prototype.getExperimentCategory=function(e){return e.Category?e.Category:"user"},e.prototype._populateExperimentList=function(e){$.observable(this._data).refresh(e.map(function(e){return{ExperimentId:e.ExperimentId,Description:e.Description,Creator:e.Creator,CreationTime:e.Status.CreationTime,StartTime:e.Status.StartTime,EndTime:e.Status.EndTime,StatusCode:e.Status.StatusCode,etag:e.Etag,type:n.ExperimentType.name}}))},e.prototype.deleteConfirmation=function(){var e=this,t=this._grid.wazDataGrid("getSelectedRows").length>1?s.confirmDeleteSelectedExperiments:s.confirmDeleteSelectedExperiment,n=new Shell.UI.Notifications.Confirmation(t,"active");JSON.stringify(this._grid.wazDataGrid("getSelectedRows")[0].dataItem),n.setActions([new Shell.UI.Notifications.Buttons.yes(function(){o.customEvent({key:"DeleteSelectedExperimentYes",type:"ExperimentListView",data:JSON.stringify(e._selectedRows)}),e.delete()}),new Shell.UI.Notifications.Buttons.no(function(){o.customEvent({key:"DeleteSelectedExperimentNo",type:"ExperimentListView"}),Shell.UI.Notifications.remove(n)})]),Shell.UI.Notifications.add(n)},e.prototype.delete=function(){var e=this,t=[];this._selectedRows.forEach(function(n){t.push(n),f.first(e.listedExperiments,function(t,r){return e.listedExperiments[r].ExperimentId===n.dataItem.ExperimentId?(e.listedExperiments.splice(r,1),!0):!1},null)});var n=[],r=!1;t.forEach(function(t){n.push(e._workspace.deleteExperimentAndAncestorsAsync(t.dataItem.ExperimentId,t.dataItem.etag))}),$.when.apply($,n).fail(function(){r=!0}).always(function(){r?e.refreshFromService():e.refreshFromLocal(e.listedExperiments)}),this._selectedRows=[]},e.prototype._isGlobalWorkspaceId=function(e){return e&&e!==this._workspace.id},e.prototype._isUserWorkspaceId=function(e){return e&&e===this._workspace.id},e}();t.ExperimentListView=d}),define("generated/editor/DataLabViews/ExperimentLineageView",["require","exports","../DataLabViews/ExperimentListView","../DataLabViews/ExperimentView","../../DataLabClient/Contracts/V1/Constants","../../DataLabClient/LocalizedResources","../../DataLabClient/StateUtil","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=function(){function e(e,t,i){var o=this;this._data=[],this._workspace=t,this._experimentId=i;var a=[{name:s.name,field:"Description",formatter:n.formatExperimentName,cssClass:"navigationColumn"},{name:s.state,field:"State",cssClass:"navigationColumn"},{name:s.status,field:"StatusCode",formatter:n.formatExperimentStatusCode,cssClass:"navigationColumn"},{name:s.experimentGridHeaderStartTime,field:"StartTime",formatter:u.formatDate,sorted:"descending",sortFormatter:n.dateTimeSortFormatter,cssClass:"navigationColumn"},{name:s.experimentGridHeaderEndTime,field:"EndTime",formatter:u.formatDate,cssClass:"navigationColumn"}];this._grid=$(e).find("#grid").wazDataGrid({columns:a,data:this._data,selectable:!0,multiselect:!0,resizable:!0,rowSelect:function(e,t){cdm.setActiveItem(o)}}),this._grid.on("click",".navigationColumn",function(e){var t=$(e.target).closest("tr").view().data;if(t.rowMetadata){var n=t.rowMetadata.dataItem.ExperimentId;r.navigateToExperiment(n)}}),cdm.setActiveItem(this)}return e.prototype.setCommands=function(){this.backCommand=new Shell.UI.Commands.Command(s.backToExperiment,Shell.UI.Icons.previous,this.navigateToSource.bind(this),null,!1),Shell.UI.Commands.add([this.backCommand])},e.prototype.refreshFromService=function(){var e=this;Shell.UI.Spinner.show();var t,n=u.then(this._workspace.getExperimentInfoAsync(this._experimentId),function(t){document.querySelector("#tabcontainer .itemtitle").textContent=t.Description;if(t.IsLeaf)e.getLineage(t.ExperimentId,t);else{var n=/([^\.]*)\.s-id\.([^\.]*)\.\S*/;if(n.test(e._experimentId)){var r=e._experimentId.match(n);if(r.length===3)var i=r[1]+".f-id."+r[2],s=u.then(e._workspace.getExperimentInfoAsync(i),function(n){n&&n.IsLeaf?e.getLineage(t.ExperimentId,n):e.getLineage(t.ExperimentId)});else e.getLineage(t.ExperimentId)}else e.getLineage(t.ExperimentId)}})},e.prototype.navigateToSource=function(){r.navigateToExperiment(this._experimentId)},e.prototype.getLineage=function(t,a){var f=this;a===void 0&&(a=null),u.then(this._workspace.getExperimentLineageAsync(t),function(t){if(!(cdm.currentActiveItem instanceof e))return;f._populateExperimentList(t);if(a){var l={ExperimentId:a.ExperimentId,Description:a.Description,Creator:a.Creator,StartTime:a.Status.StartTime,EndTime:new Date(u.minDate),State:"Editable",StatusCode:n.formatExperimentStatusCode(a.Status.StatusCode)+(a.IsPartialRun?s.lineageExperimentStatusPartialRun:""),etag:a.Etag,type:r.ExperimentType.name};if(a.Status.StatusCode!==i.State.Running){if(a.Status.StatusCode===i.State.NotStarted)l.State="Locked";else if(o.isFinishedState(a.Status.StatusCode)||o.isFailedState(a.Status.StatusCode))l.EndTime=new Date(a.Status.EndTime);$.observable(f._data).insert(0,l)}}f._grid.wazDataGrid("option").data.forEach(function(e){if(e.ExperimentId===f._experimentId){var t=f._grid.wazDataGrid("option").rowMetadata;$.observable(t).insert(0,{dataItem:e,cssClass:"lineageSource"})}}),Shell.UI.Spinner.hide()})},e.prototype._populateExperimentList=function(e){$.observable(this._data).refresh(e.map(function(e){return{ExperimentId:e.ExperimentId,Description:e.Description,Creator:e.Creator,StartTime:e.Status.StartTime,EndTime:e.Status.EndTime,State:"Locked",StatusCode:n.formatExperimentStatusCode(e.Status.StatusCode)+(e.IsPartialRun?s.lineageExperimentStatusPartialRun:""),etag:e.Etag,type:r.ExperimentType.name}}))},e}();t.ExperimentLineageView=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/HelpSearchViewModel",["require","exports","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/Help","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o,u){function c(){var e=$(ExperimentEditorTemplates._helpSearchMarkup).prependTo(".fxs-drawertaskbar-tray");ko.applyBindings(new l(o.semanticHelpSearch()),e[0])}var a=function(){function e(e,t,n){this.moduleName=e,this.guid=t,this.position=n}return e}(),f;(function(e){e[e.Opening=0]="Opening",e[e.Closing=1]="Closing",e[e.Opened=2]="Opened",e[e.Closed=3]="Closed"})(f||(f={}));var l=function(e){function t(t){var n=this;e.call(this),this.helpSearchEnabled=ko.observable(t),this.queryInput=ko.observable(""),this.currentQuery=ko.observable(""),this.queuedQuery=ko.observable(null),this.searchResults=ko.observableArray([]),this.synonymResults=ko.observableArray([]),this.isLoading=ko.observable(!1),this.hasErrors=ko.observable(!1),this.isSearchResultsVisible=ko.observable(!1),this.isSearchResultsAnimating=ko.observable(!1),this.synonymResultClicked=this.synonymResultClicked.bind(this),this.searchResultClicked=this.searchResultClicked.bind(this),this.menuState=ko.computed(function(){return n.isLoading()?0:n.isSearchResultsAnimating()?n.isSearchResultsVisible()?0:1:n.isSearchResultsVisible()?2:3});var r=null;this.menuState.subscribe(function(){r!==n.menuState()&&n.onMenuStateChange(),r=n.menuState()}),this.queuedQuery.subscribe(function(e){e&&n.menuState()===2&&n.hideResults()})}return __extends(t,e),t.prototype.onMenuStateChange=function(){switch(this.menuState()){case 3:if(this.queuedQuery()){var e=this.queuedQuery();this.queuedQuery(null),this.submitQuery(e)}break;case 2:this.queuedQuery()&&this.hideResults();case 0:case 1:}},t.prototype.onKeyDownEvent=function(e,t){return t.which==13&&this.queryInput().length!=0&&(this.menuState()===3?this.submitQuery(this.queryInput()):this.queuedQuery(this.queryInput())),!0},t.prototype.hideResults=function(){this.isSearchResultsVisible(!1)},t.prototype.searchResultClicked=function(e,t){var n={searchQuery:this.currentQuery(),resultIndex:e.position,resultGUID:e.guid,moduleName:e.moduleName};u.featureUsage({featureID:41,groupID:39,data:n}),r.openHelpWindow(e.guid)},t.prototype.synonymResultClicked=function(e,t){var n={searchQuery:this.currentQuery(),semanticSynonym:e};u.featureUsage({featureID:42,groupID:39,data:n}),this.queryInput(e),this.queuedQuery(e)},t.prototype.submitQuery=function(e){var t=this,n={searchQuery:e};u.featureUsage({featureID:40,groupID:39,data:n}),this.isLoading(!0),this.searchResults.removeAll(),this.synonymResults.removeAll(),this.hasErrors(!1),$.ajax({url:"/api/helpsearch/search/?query="+encodeURIComponent(e)}).done(function(n){var r=0;n.QueryResults.map(function(e){t.searchResults.push(new a(e.ModuleName,e.GUID,r++))}),$.ajax({url:"/api/helpsearch/synonyms/?query="+encodeURIComponent(e)}).done(function(e){t.synonymResults(e)}).fail(function(){}).always(function(){t.isSearchResultsVisible(!0),t.isLoading(!1),t.currentQuery(e)})}).fail(function(){t.hasErrors(!0),t.currentQuery(e),t.isSearchResultsVisible(!0),t.isLoading(!1)})},t}(s.Disposable);t.Initialize=c});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/AnnotationNodeViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/Entity","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../TS/Global","../../../TS/ViewModel/PaletteControl/IconUtilities","../../../TS/ViewModel/ExperimentEditor/GraphNodeViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o,u,a){var f=function(e){function t(t){var n=this;e.call(this,t,r.EntityTypes[i.EntityType.Annotation]),this.minWidth=i.Annotation.minWidth,this.maxWidth=i.Annotation.maxWidth,this.minHeight=i.Annotation.minHeight,this.maxHeight=i.Annotation.maxHeight,this.annotationNode=t,this.graphNodeType=5,this.collapsedHeight=i.Annotation.collapsedHeight,this.collapsedWidth=i.Annotation.collapsedWidth,this.isResizable=!0,this.icon=s.GetIconForCategory("Annotation"),this.iconSymbol=s.GetIconSymbol(this.icon),this.category=4,this.classId=ko.computed(function(){var e=(n.hovered()?" hoveredEntity":"")+(n.searchMatched()?" highlightedEntityYellow":"")+(n.searchResultSelected()?" highlightedEntityOrange":"")+(n.selected()?" selectedEntity":"")+" "+n.getCompatibilityClass();return"rectEntity lightYellowFill"+e}),this.toggleIsCollapsed=function(){n.annotationNode.annotation.isCollapsed()?(n.annotationNode.width(n.annotationNode.annotation.clientData().width),n.annotationNode.height(n.annotationNode.annotation.clientData().height),n.annotationNode.annotation.isCollapsed(!n.annotationNode.annotation.isCollapsed()),a.featureUsage({featureID:197,groupID:194,data:n.annotationNode.annotation.id})):(n.annotationNode.annotation.isCollapsed(!n.annotationNode.annotation.isCollapsed()),n.annotationNode.width(i.Annotation.collapsedWidth),n.annotationNode.height(i.Annotation.collapsedHeight),a.featureUsage({featureID:196,groupID:194,data:n.annotationNode.annotation.id}))},this.toggleEditingComment=function(){n.editingComment(!n.editingComment())},this.contentPosX=ko.pureComputed(function(){return n.x()+i.Annotation.contentLeftMargin}),this.contentPosY=ko.pureComputed(function(){return n.y()+i.Annotation.contentVerticalMargin}),this.contentWidth=ko.pureComputed(function(){return n.width()-i.Annotation.contentLeftMargin-i.Annotation.contentRightMargin}),this.contentHeight=ko.pureComputed(function(){return n.height()-2*i.Annotation.contentVerticalMargin}),this.collapsedIcon=ko.pureComputed(function(){return n.selected()?"/Content/Images/comment_bubble_selected.svg":"/Content/Images/comment_bubble.svg"})}return __extends(t,e),t.prototype.isRunnable=function(){return!1},t}(o.GraphNodeViewModel);t.AnnotationNodeViewModel=f});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Connection",["require","exports","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../TS/ViewModel/ExperimentEditor/Entity","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/PortViewModel","../../../../DataLabClient/Model/Port","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=function(e){function t(t,r){var s=this;e.call(this,n.EntityTypes[i.EntityType.Connection]),this.inputPort=t,this.outputPort=r,this.category=1,this.ix=ko.computed(function(){return this.inputPort.x()+i.Port.HalfWidth},this),this.iy=ko.computed(function(){return this.inputPort.y()},this),this.ox=ko.computed(function(){return this.outputPort.x()+i.Port.HalfWidth},this),this.oy=ko.computed(function(){return this.outputPort.y()+i.Port.Height},this),this.controlPointDistance=ko.computed(function(){return Math.min(i.Connector.SplinePointMax,Math.max(i.Connector.SplinePointMin,Math.abs((this.inputPort.y()-(this.outputPort.y()+i.Port.Height))/2)))},this),this.path=ko.computed(function(){return"M"+(this.inputPort.x()+i.Port.HalfWidth-1)+","+this.inputPort.y()+"C "+(this.inputPort.x()+i.Port.HalfWidth-1)+","+(this.inputPort.y()-this.controlPointDistance())+","+(this.outputPort.x()+i.Port.HalfWidth-1)+","+(this.outputPort.y()+i.Port.Height+this.controlPointDistance())+","+(this.outputPort.x()+i.Port.HalfWidth-1)+","+(this.outputPort.y()+i.Port.Height)},this),this.classId=ko.computed(function(){var e="";return this.inputPort.portModel.connectionIsInCycle()&&(e+="error "),e+=this.selected()?"selectedConnection":"defaultConnection",e},this),this.hidden=ko.observable(!1),this.selected.subscribe(function(e){e&&s.inputPort.classId()==="port connectedPort"?(s.inputPort.portState(o.Constants.PortState.Selected),s.outputPort.portState(o.Constants.PortState.Selected)):(s.inputPort.portState(o.Constants.PortState.Default),s.outputPort.portState(o.Constants.PortState.Default))}),this.belongsToExperimentFlow=ko.computed(function(){return s.inputPort.parent.belongsToExperimentFlow()&&s.outputPort.parent.belongsToExperimentFlow()}),this.belongsToWebServiceFlow=ko.computed(function(){return s.inputPort.parent.belongsToWebServiceFlow()&&s.outputPort.parent.belongsToWebServiceFlow()})}return __extends(t,e),t.createFromPorts=function(e,n){if(e instanceof s.InputPort&&n instanceof s.OutputPort)return new t(e,n);if(e instanceof s.OutputPort&&n instanceof s.InputPort)return new t(n,e);throw new Error("Expected one InputPort and one OutputPort")},Object.defineProperty(t.prototype,"key",{get:function(){return t.getConnectionKeyForPorts(this.inputPort,this.outputPort)},enumerable:!0,configurable:!0}),t.getConnectionKeyForPorts=function(e,t){return u.tuple(e.portModel,t.portModel).id},Object.defineProperty(t.prototype,"x",{get:function(){return this.inputPort.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.inputPort.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientSideStorageId",{get:function(){return t.getConnectionKeyForPorts(this.inputPort,this.outputPort)},enumerable:!0,configurable:!0}),t.prototype.remove=function(){e.prototype.remove.call(this),this.inputPort.portModel.disconnectFrom(this.outputPort.portModel)},t.prototype.hit=function(e,t,n,r){var i={x:this.inputPort.x(),y:this.inputPort.y()},s={x:this.outputPort.x(),y:this.outputPort.y()};return i.x>=e&&s.x<=n&&i.y>=t&&s.y<=r&&s.x>=e&&i.x<=n&&s.y>=t&&i.y<=r?!0:!1},t}(n.EntityBaseV1);t.Connection=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Dataset",["require","exports","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/GraphNodeViewModel","../../../TS/ViewModel/PaletteControl/IconUtilities","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f=function(e){function t(t){var i=this;e.call(this,t,n.EntityTypes[r.EntityType.Dataset]),this.datasetNode=t,this.graphNodeType=1,this.path=ko.computed(function(){return"M"+(i.x()+13)+","+i.y()+"Q"+(i.x()-13)+","+(i.y()+30)+","+(i.x()+13)+","+(i.y()+60)+"L"+(i.x()+187)+","+(i.y()+60)+"Q"+(i.x()+213)+","+(i.y()+30)+","+(i.x()+187)+","+i.y()+"Z"}),this.classId=ko.computed(function(){var e=(i.hovered()?" hoveredEntity":"")+(i.searchMatched()?" highlightedEntityYellow":"")+(i.searchResultSelected()?" highlightedEntityOrange":"")+(i.selected()?" selectedEntity":"")+" "+i.getCompatibilityClass();return"rectEntity data"+e}),this.author=new o.StaticTextPropertyViewModel(this.datasetNode.author),this.size=new o.StaticTextPropertyViewModel(this.datasetNode.size),this.format=new o.StaticTextPropertyViewModel(this.datasetNode.format),this.createdOn=new o.StaticTextPropertyViewModel(this.datasetNode.createdOn),this.viewDataset=new o.EndpointPropertyViewModel(this.datasetNode.viewDataset),this.icon=s.GetIconForCategory(t.dataset.category),this.iconSymbol=s.GetIconSymbol(this.icon)}return __extends(t,e),Object.defineProperty(t.prototype,"datasetPort",{get:function(){return a.first(this.outputPorts,function(){return!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.datasetNode.dataset.name()},enumerable:!0,configurable:!0}),t.prototype.setHelp=function(e){e(this.datasetNode.dataset.description(),null,this.datasetNode.dataset.name())},t}(i.GraphNodeViewModel);t.Dataset=f});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/WebServicePort",["require","exports","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/GraphNodeViewModel","../../../TS/ViewModel/PaletteControl/IconUtilities","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Model/WebServicePortNode"],function(e,t,n,r,i,s,o,u,a){var f=function(e){function t(t){var i=this;e.call(this,t,n.EntityTypes[r.EntityType.WebServicePort]),this.webServicePortNode=t,this.graphNodeType=3,this.path=ko.computed(function(){return"M"+(i.x()+13)+","+i.y()+"Q"+(i.x()-13)+","+(i.y()+30)+","+(i.x()+13)+","+(i.y()+60)+"L"+(i.x()+187)+","+(i.y()+60)+"Q"+(i.x()+213)+","+(i.y()+30)+","+(i.x()+187)+","+i.y()+"Z"}),this.classId=ko.computed(function(){var e=(i.hovered()?" hoveredEntity":"")+(i.selected()?" selectedEntity":"")+" "+i.getCompatibilityClass();return"rectEntity data blueFill"+e}),t.type===0?this.iconSymbol=s.GetIconSymbol("icon-data_input"):this.iconSymbol=s.GetIconSymbol("icon-data_output"),this.iconClass="whiteFill",this.textClassId=ko.computed(function(){return"staticText whiteFill"})}return __extends(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this.webServicePortNode.type===0?u.webServiceInputNodeName:u.webServiceOutputNodeName},enumerable:!0,configurable:!0}),t.prototype.setHelp=function(e){e(this.webServicePortNode.description,null,this.webServicePortNode.name)},t}(i.GraphNodeViewModel);t.WebServicePort=f});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/ExperimentDataFlowWalker",["require","exports","../../../TS/ViewModel/ExperimentEditor/WebServicePort","../../../../DataLabClient/Disposable","../../../../DataLabClient/Util","../../../../DataLabClient/Model/WebServicePortNode"],function(e,t,n,r,i,s){var o=function(e){function t(t,n){var i=this;e.call(this),this.wsInputNodes=[],this.wsOutputNodes=[],this.portsMap={},this.nodes=t,this.connections=n,this.registerForDisposal(new r.DisposableSubscription(this.nodes.subscribe(function(){i.reloadNodes(),i.walk()})),new r.DisposableSubscription(this.connections.subscribe(function(){i.reloadConnections(),i.walk()}))),this.reloadNodes(),this.reloadConnections(),this.walk()}return __extends(t,e),t.prototype.walk=function(){var e=this,t=[];this.wsOutputNodes.forEach(function(n){e.findReachableNodes(n,t)}),t.length||(t=i.values(this.nodes())),t.length&&this.wsInputNodes.length&&this.wsInputNodes.forEach(function(n){var r=i.first(n.outputPorts);e.getPortMap(r).forEach(function(n){e.getPortMap(n).forEach(function(i){i!==r&&e.pruneInputNodes(i.parent,t,n)})})}),i.forEach(this.nodes(),function(e){e.belongsToExperimentFlow(!(e instanceof n.WebServicePort)),e.belongsToWebServiceFlow(t.indexOf(e)>=0)})},t.prototype.reloadNodes=function(){var e=this;this.wsInputNodes=[],this.wsOutputNodes=[],i.forEach(this.nodes(),function(t){if(t instanceof n.WebServicePort){var r=t;r.webServicePortNode.type===0?e.wsInputNodes.push(r):e.wsOutputNodes.push(r)}})},t.prototype.reloadConnections=function(){var e=this;this.portsMap={},i.forEach(this.connections(),function(t){e.putPortMap(t.inputPort,t.outputPort),e.putPortMap(t.outputPort,t.inputPort)})},t.prototype.findReachableNodes=function(e,t){var n=this;t.indexOf(e)<0&&(t.push(e),i.forEach(e.inputPorts,function(e){i.forEach(n.getPortMap(e),function(e){n.findReachableNodes(e.parent,t)})}))},t.prototype.putPortMap=function(e,t){var n=this.getPortId(e);this.portsMap[n]?this.portsMap[n].indexOf(t)<0&&this.portsMap[n].push(t):this.portsMap[n]=[t]},t.prototype.pruneInputNodes=function(e,t,n){var r=this,s=t.indexOf(e);if(s<0)return;var o=0;i.forEach(e.outputPorts,function(e){r.getPortMap(e).forEach(function(e){e!==n&&t.indexOf(e.parent)>=0&&o++})}),o||(t.splice(s,1),i.forEach(e.inputPorts,function(e){r.getPortMap(e).forEach(function(e){r.pruneInputNodes(e.parent,t,n)})}))},t.prototype.getPortMap=function(e){var t=this.getPortId(e);return this.portsMap[t]?this.portsMap[t]:[]},t.prototype.getPortId=function(e){return e.portModel.parent.id+":"+e.portModel.name},t}(r.Disposable);t.ExperimentDataFlowWalker=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Transform",["require","exports","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../DataLabViews/ExperimentView","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/GraphNodeViewModel","../../../TS/ViewModel/PaletteControl/IconUtilities","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){function t(t){var s=this;e.call(this,t,n.EntityTypes[i.EntityType.Transform]),this.transformNode=t,this.graphNodeType=4,this.path=ko.computed(function(){return"M"+(s.x()+13)+","+s.y()+"Q"+(s.x()-13)+","+(s.y()+30)+","+(s.x()+13)+","+(s.y()+60)+"L"+(s.x()+187)+","+(s.y()+60)+"Q"+(s.x()+213)+","+(s.y()+30)+","+(s.x()+187)+","+s.y()+"Z"}),this.classId=ko.computed(function(){var e=(s.hovered()?" hoveredEntity":"")+(s.selected()?" selectedEntity":"")+" "+s.getCompatibilityClass();return"rectEntity data"+e}),this.author=new u.StaticTextPropertyViewModel(this.transformNode.author),this.format=new u.StaticTextPropertyViewModel(this.transformNode.format),this.createdOn=new u.StaticTextPropertyViewModel(this.transformNode.createdOn),this.transformNode.transform.experimentId&&(this.transformNode.trainingExperiment.value(r.calculateNavigationPathToExperiment(this.transformNode.transform.experimentId)),this.trainingExperiment=new u.LinkPropertyViewModel(this.transformNode.trainingExperiment,function(e){r.navigateToExperiment(s.transformNode.transform.experimentId)})),this.icon=o.GetIconForCategory(this.transformNode.transform.category),this.iconSymbol=o.GetIconSymbol(this.icon)}return __extends(t,e),Object.defineProperty(t.prototype,"transformPort",{get:function(){return f.first(this.outputPorts,function(){return!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.transformNode.transform.name()},enumerable:!0,configurable:!0}),t}(s.GraphNodeViewModel);t.Transform=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/TrainedModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../DataLabViews/ExperimentView","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/GraphNodeViewModel","../../../TS/ViewModel/PaletteControl/IconUtilities","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){function t(t){var s=this;e.call(this,t,n.EntityTypes[i.EntityType.TrainedModel]),this.trainedModelNode=t,this.graphNodeType=2,this.path=ko.computed(function(){return"M"+(s.x()+13)+","+s.y()+"Q"+(s.x()-13)+","+(s.y()+30)+","+(s.x()+13)+","+(s.y()+60)+"L"+(s.x()+187)+","+(s.y()+60)+"Q"+(s.x()+213)+","+(s.y()+30)+","+(s.x()+187)+","+s.y()+"Z"}),this.classId=ko.computed(function(){var e=(s.hovered()?" hoveredEntity":"")+(s.selected()?" selectedEntity":"")+" "+s.getCompatibilityClass();return"rectEntity data"+e}),this.author=new u.StaticTextPropertyViewModel(this.trainedModelNode.author),this.format=new u.StaticTextPropertyViewModel(this.trainedModelNode.format),this.createdOn=new u.StaticTextPropertyViewModel(this.trainedModelNode.createdOn),this.trainedModelNode.trainedModel.experimentId&&(this.trainedModelNode.trainingExperiment.value(r.calculateNavigationPathToExperiment(this.trainedModelNode.trainedModel.experimentId)),this.trainingExperiment=new u.LinkPropertyViewModel(this.trainedModelNode.trainingExperiment,function(e){r.navigateToExperiment(s.trainedModelNode.trainedModel.experimentId)})),this.icon=o.GetIconForCategory(this.trainedModelNode.trainedModel.category),this.iconSymbol=o.GetIconSymbol(this.icon)}return __extends(t,e),Object.defineProperty(t.prototype,"trainedModelPort",{get:function(){return f.first(this.outputPorts,function(){return!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.trainedModelNode.trainedModel.name()},enumerable:!0,configurable:!0}),t}(s.GraphNodeViewModel);t.TrainedModel=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/ExperimentViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/AnnotationNodeViewModel","../../../TS/ViewModel/ExperimentEditor/Connection","../../../TS/ViewModel/ExperimentEditor/Dataset","../../../TS/ViewModel/ExperimentEditor/ExperimentDataFlowWalker","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/Module","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../TS/ViewModel/ExperimentEditor/Transform","../../../TS/ViewModel/ExperimentEditor/TrainedModel","../../../TS/ViewModel/Dialogs/TrialDialogs","../../../TS/ViewModel/ExperimentEditor/WebServicePort","../../../../DataLabClient/Model/AnnotationNode","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Constants","../../../../DataLabClient/Model/DatasetNode","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Logging/IfxScenarioStopWatch","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/ObservableMap","../../../../DataLabClient/Model/Property","../../../../DataLabClient/Model/TrainedModelNode","../../../../DataLabClient/Model/TransformNode","../../../../DataLabClient/Trial","../../../../DataLabClient/Util","../../../../DataLabClient/Model/WebServicePortNode"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A){var O=function(e){function t(t,n){var r=this;e.call(this),this.experimentRunningFlag=!1,this.displayFlowType=ko.observable(o.ExperimentDataFlowType.Experiment),this.experiment=t,this.experimentLoaded=ko.observable(!1),this.workspace=n,this.readOnlyMode=ko.observable(!1),this.connections=x.observableMap(),this.tempNodes=x.observableMap();if(y.experimentDescriptionEnabled()){this.summary=new a.EditableTextPropertyViewModel(this.experiment.summary);var i=new T.EditableTextProperty(b.experimentDetailedDescription,b.experimentDetailedDescriptionPlaceholder,ko.observable(""),null);this.details=new a.EditableTextPropertyViewModel(i);var f;this.experiment.experimentId()&&(this.isSampleExperiment()||n.getExperimentDetailsAsync(this.experiment.experimentId()).done(function(e){e&&(f=/^"?(.+?)?"?$/g.exec(e)[1],f=window.unescape(f),i.value(f))})),this.registerForDisposal(new g.DisposableSubscription(this.experiment.experimentId.subscribe(function(e){if(e&&i.value()){var t=i.value();t=window.escape(t),n.updateExperimentDetailsAsync(e,t)}}))),i.value.subscribe(function(e){if(f!==e&&r.experiment.experimentId()){f=e;var t=window.escape(e);n.updateExperimentDetailsAsync(r.experiment.experimentId(),t)}}),this.detailsLink=new a.LinkPropertyViewModel(this.experiment.originalExperimentDocumentation,function(e){window.open(r.detailsLink.property.value(),"_blank")}),this.displayFlowType.subscribe(function(e){w.featureUsage({featureID:e===o.ExperimentDataFlowType.Experiment?69:70,groupID:68,experimentID:r.experiment.experimentIdForLogging})})}this.registerForDisposal(new g.DisposableSubscription(this.experiment.connectionAdded.subscribe(function(e){r.addConnection(r.getViewModelForPort(e.input),r.getViewModelForPort(e.output));var t=r.getViewModelForNode(e.input.parent);t instanceof u.Module&&t.updateValidState()})),this.experimentNodes=t.nodes.transform(function(e){return r.createNodeViewModel(e)}),this.nodes=x.observableMapUnion(this.tempNodes,this.experimentNodes),this.webServiceParameters=t.parameters.transform(function(e){return a.ParameterViewModel.createParameterViewModel(e,{workspace:n})}),new g.DisposableSubscription(this.experiment.connectionRemoved.subscribe(function(e){r.removeConnection(r.getViewModelForPort(e.input),r.getViewModelForPort(e.output));var t=r.getViewModelForNode(e.input.parent);t instanceof u.Module&&(t.startValidating(),t.updateValidState())}))),this.experiment.forEachConnection(function(e,t){r.addConnection(r.getViewModelForPort(e),r.getViewModelForPort(t))}),this.registerForDisposal(this.selectableEntities=x.observableMapUnion(this.nodes,this.connections));var l=[];L.forEach(this.experiment.properties(),function(e){l.push(a.PropertyViewModel.experimentPropertyFactory(e))}),this.experimentProperties=ko.observableArray(l),this.experimentStateUpdateRunningTime=function(){if(r.experiment.statusCode()===d.State.Running&&r.experimentStateDisplay){var e=L.getElapsedTimeMilliseconds(new Date(r.experiment.startTime()),new Date);e>=0?r.experimentStateDisplay().statusLabel(b.experimentStateRunning+" ("+L.formatElapsedTime(e,0)+")"):r.experimentStateDisplay().statusLabel(b.experimentStateRunning)}else clearInterval(r.experimentStateIntervalID)},this.registerForDisposal(new g.DisposableSubscription(this.experiment.statusCode.subscribe(function(e){if(r.experimentRunningFlag&&(e===d.State.Finished||e===d.State.Failed)){var t=L.getElapsedTimeMilliseconds(new Date(r.experiment.startTime()),new Date);E.IfxScenario(7,1,{experimentId:r.experiment.experimentId(),tags:r.experiment.tags(),name:r.experiment.description()},e===d.State.Finished)}e===d.State.Running?r.experimentRunningFlag=!0:r.experimentRunningFlag&&(r.experimentRunningFlag=!1)}))),this.experimentStateDisplay=ko.computed(function(){if(r.readOnlyMode()&&r.experiment.statusCode()!==d.State.Running&&r.experiment.statusCode()!==d.State.NotStarted)return{statusLabel:ko.observable(b.experimentStateLocked),statusIconUrl:"/Content/Images/icon-locked_gray.svg",iconHoverBalloon:b.experimentStateLockedHover};switch(r.experiment.statusCode()){case d.State.InDraft:return clearInterval(r.experimentStateIntervalID),r.experiment.validate().length===0||r.experiment.nodes.length===0?{statusLabel:ko.observable(b.experimentStateInDraft),statusIconUrl:"/Content/Images/icon-none.svg",iconHoverBalloon:""}:{statusLabel:ko.observable(b.experimentStateInDraft),statusIconUrl:"/Content/Images/icon-validation-invalid.svg",iconHoverBalloon:b.experimentStateInDraftHoverErrors};case d.State.Finished:return clearInterval(r.experimentStateIntervalID),$(document).trigger("experimentFinishedRunning"),r.experiment.isPartialRun()?{statusLabel:ko.observable(b.experimentStateFinishedRunningPartialRun),statusIconUrl:"/Content/Images/icon-complete.svg",iconHoverBalloon:""}:{statusLabel:ko.observable(b.experimentStateFinishedRunning),statusIconUrl:"/Content/Images/icon-complete.svg",iconHoverBalloon:""};case d.State.Running:r.experimentStateIntervalID=setInterval(r.experimentStateUpdateRunningTime,1e3);var e=L.getElapsedTimeMilliseconds(new Date(r.experiment.startTime()),new Date);return e>=0?{statusLabel:ko.observable(b.experimentStateRunning+" ("+L.formatElapsedTime(e,0)+")"),statusIconUrl:"/Content/Images/processing.gif",iconHoverBalloon:b.experimentStateRunningHover}:{statusLabel:ko.observable(b.experimentStateRunning),statusIconUrl:"/Content/Images/processing.gif",iconHoverBalloon:b.experimentStateRunningHover};case d.State.Failed:return clearInterval(r.experimentStateIntervalID),r.experiment.isPartialRun()?{statusLabel:ko.observable(b.experimentStateFailedPartialRun+" "+r.experiment.endTime()),statusIconUrl:"/Content/Images/icon-error.svg",iconHoverBalloon:b.experimentStateFailedHover}:{statusLabel:ko.observable(b.experimentStateFailed+" "+r.experiment.endTime()),statusIconUrl:"/Content/Images/icon-error.svg",iconHoverBalloon:b.experimentStateFailedHover};case d.State.NotStarted:return{statusLabel:ko.observable(b.experimentStateQueued),statusIconUrl:"/Content/Images/ajax-loader.gif",iconHoverBalloon:b.experimentStateQueuedHover};default:return{statusLabel:ko.observable(""),statusIconUrl:"/Content/Images/icon-none.svg",iconHoverBalloon:""}}},this),this.isCompetitionExperiment=ko.computed(function(){return r.experiment&&r.experiment.getTag(o.CompetitionConstants.CompetitionUrlTagSearchRegex).length>0}),this.registerForDisposal(new s.ExperimentDataFlowWalker(this.nodes,this.connections))}return __extends(t,e),t.prototype.addPublishOutputPort=function(e){this.experiment.addPublishOutputPort(e.portModel)},t.prototype.addPublishInputPort=function(e){this.experiment.addPublishInputPort(e.portModel)},t.prototype.removePublishOutputPort=function(e){this.experiment.removePublishOutputPort(e.portModel)},t.prototype.removePublishInputPort=function(e){this.experiment.removePublishInputPort(e.portModel)},t.prototype.createModule=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);if(this.readOnlyMode())return null;var r=new S.ModuleNode(e,this.workspace);r.x(t),r.y(n);var i=new u.Module(r,this.workspace);return this.tempNodes.put(r.id,i),i},t.prototype.createDataset=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);if(this.readOnlyMode())return null;var r=new m(e);r.x(t),r.y(n);var s=new i.Dataset(r);return this.tempNodes.put(r.id,s),s},t.prototype.createTrainedModel=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);if(this.readOnlyMode())return null;var r=new N(e);r.x(t),r.y(n);var i=new l.TrainedModel(r);return this.tempNodes.put(r.id,i),i},t.prototype.createTransformModule=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);if(this.readOnlyMode())return null;var r=new C(e);r.x(t),r.y(n);var i=new f.Transform(r);return this.tempNodes.put(r.id,i),i},t.prototype.createWebServicePort=function(e,t,n){var r=this;t===void 0&&(t=0),n===void 0&&(n=0);if(this.readOnlyMode())return null;var i=new A.WebServicePortNode(e,null,function(e){return r.experiment.getWebServicePortNodes(e)},this.workspace.applicationCache.dataTypeRegistry);i.x(t),i.y(n);var s=new h.WebServicePort(i);return this.tempNodes.put(i.id,s),s},t.prototype.createAnnotation=function(e){if(this.readOnlyMode())return null;var t=new p(e),r=new n.AnnotationNodeViewModel(t);return this.tempNodes.put(t.id,r),r},t.prototype.addNode=function(e){this.tempNodes.remove(e.graphNode.id);if(y.trialLimitationsEnabled()&&e.graphNode instanceof S.ModuleNode){var t=e.graphNode.module_;if(!k.isNumberOfModulesUnrestricted()&&this.experiment.getNumberOfModules()>=k.getMaxNumberOfModules())return w.featureUsage({featureID:60,groupID:56,experimentID:this.experiment.experimentIdForLogging,moduleID:t.id,data:t.name()}),c.showExceededNumberOfModulesLimitDialog(),null;if(!k.isModuleEnabledById(t.familyId))return w.featureUsage({featureID:58,groupID:56,experimentID:this.experiment.experimentIdForLogging,moduleID:t.id,data:t.name()}),c.showDisabledModuleDialog(t.familyId,t.name()),null}return this.experiment.addNode(e.graphNode),this.getViewModelForNode(e.graphNode)},t.prototype.removeAnnotations=function(e){var t=this,n=[],r=[];e.forEach(function(e){var i=t.experiment.experimentId()?t.experiment.experimentId():t.experiment.parentExperimentId,s=t.workspace.deleteExperimentAnnotationsAsync(i,e.annotationNode.annotation.id);s.fail(function(t){r.push({item:e,error:t})}),s=L.then(s,$.noop,function(e){return L.when(null)}),n.push(s)});var i=$.when.apply($,n).done(function(){if(r.length>0){var t=b.someAnnotationsCouldNotBeDeleted,n=new Shell.UI.Notifications.Notification(t,"error");n.setActions([Shell.UI.Notifications.Buttons.ok()]),Shell.UI.Notifications.add(n),r.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].annotationNode.annotation.id===t.item.annotationNode.annotation.id)break;e.splice(n,1)});var i=r.map(function(e){return{error:e.error,item:e.item.annotationNode.annotation.id}});i.length>0&&w.customEvent({key:"DeleteAnnotationFailed",type:"DeleteAnnotation",data:i})}if(e.length>0){e.forEach(function(e){return e.annotationNode.annotation.deleted(!0)});var s=e.map(function(e){return e.annotationNode.annotation.id});w.customEvent({key:"DeleteAnnotationSucceeded",type:"DeleteAnnotation",data:s})}}).always(function(){e.forEach(function(e){e.annotationNode.annotation.deleted()&&e.remove()})})},t.prototype.removeSelected=function(){var e=this;if(this.readOnlyMode())return;this.connections.modify(function(){L.forEach(e.connections(),function(e){e.selected()&&e.remove()})});var t=[];this.connections.modify(function(){L.forEach(e.nodes(),function(e){e.selected()&&(e instanceof n.AnnotationNodeViewModel?t.push(e):e.remove())})}),this.removeAnnotations(t)},t.prototype.editSelected=function(){if(this.readOnlyMode())return;L.forEach(this.nodes(),function(e){if(e.selected()){e.editComment();return}})},t.prototype.findEntityAtPoint=function(e,t){var n=this.selectableEntities();for(var r in n){var i=n[r].entityAtPoint(e,t);if(i!==null&&i.containsPoint(e,t))return i}return null},t.prototype.getViewModelForNode=function(e){var t=this.nodes.lookup(e.id);if(t.graphNode!==e)throw new Error("Node viewmodel does not wrap the expected model");return t},t.prototype.getViewModelForPort=function(e){var t=this.getViewModelForNode(e.parent),n=t.ports[e.name];if(n.portModel!==e)throw new Error("Port viewmodel does not wrap the expected model");return n},t.prototype.isSampleExperiment=function(){var e=window.environment;if(e&&e.globalWorkspaceId){var t=new RegExp("^"+window.environment.globalWorkspaceId);return t.test(this.experiment.experimentId())}return!1},t.prototype.displayFlowToggle=function(){this.displayFlowType(this.displayFlowType()===o.ExperimentDataFlowType.Experiment?o.ExperimentDataFlowType.WebService:o.ExperimentDataFlowType.Experiment)},t.prototype.createNodeViewModel=function(e){if(e instanceof S.ModuleNode)return new u.Module(e,this.workspace);if(e instanceof m)return new i.Dataset(e);if(e instanceof N)return new l.TrainedModel(e);if(e instanceof C)return new f.Transform(e);if(e instanceof A.WebServicePortNode)return new h.WebServicePort(e);if(e instanceof p)return new n.AnnotationNodeViewModel(e);throw new Error("Unknown graph node type.")},t.prototype.addConnection=function(e,t){var n=new r.Connection(e,t);if(this.connections.lookup(n.key)!==undefined)throw new Error("Connection already exists for the given port pair");return this.connections.put(n.key,n),e.addConnection(n),t.addConnection(n),n},t.prototype.removeConnection=function(e,t){var n=r.Connection.getConnectionKeyForPorts(e,t),i=this.connections.lookup(n);if(i===undefined)throw new Error("Connection doest not exist for the given port pair");return this.connections.remove(n),e.removeConnection(i),t.removeConnection(i),i},t}(g.Disposable);t.ExperimentViewModel=O}),define("generated/editor/DataLabViews/WebServiceGroupView",["require","exports","../../DataLabClient/LocalizedResources"],function(e,t,n){t.webServiceGroupExtensionName="WebServiceGroups",t.WebServiceGroupType={name:"WebServiceGroup",displayName:n.webServiceGroupDisplayName,dataFunction:function(e,t,n){return{data:[{name:e.WebServiceGroup,displayName:e.WebServiceGroup}]}}};var r=function(){function e(e,t,n,r){this.Id=e,this.Url=t,this.Type=n,this.CreationTime=r}return e}();t.WebService=r}),define("generated/editor/TS/Common/WebServiceGroupUtilities",["require","exports","../../TS/Global","../../DataLabViews/WebServiceGroupView","../../../DataLabClient/Features","../../../DataLabClient/Util","../../../DataLabClient/Model/WorkspaceSettings"],function(e,t,n,r,i,s,o){function u(e,t,n){var r=c(e,t),i=r.length>0?r[0]:"";return i?i.substr(n.length).trim():""}function a(e){return u(e,n.CompetitionConstants.CompetitionUrlTagSearchRegex,n.CompetitionConstants.CompetitionUrlTagPrefix)}function f(e){return u(e,n.CompetitionConstants.CompetitionTenantIdSearchRegex,n.CompetitionConstants.CompetitionTenantIdTagPrefix)}function l(e){return u(e,n.CompetitionConstants.GalleryUriTagSearchRegex,n.CompetitionConstants.GalleryUriTagPrefix)}function c(e,t){if(!t)return[];var n=h(e);return n.filter(function(e){return t.test(e)})}function h(e){var t=e?e.Tags:null;return t?t:[]}function p(e){var t=Object.keys(e).reduce(function(t,n){return t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n])),t},[]).join("&");return t.length>0?"?"+t:""}function d(e,t,n,r){r===void 0&&(r={});var i=s.format("{0}/workspaces/{1}/webservices/{2}{3}",e,t,n,p(r));return i}function v(e,t){var n=window.environment.webServicesUxLocation;if(i.LinkToWebServicesUxEnabled()&&!i.belizeForSMV1Enabled()&&!!n&&n.length>0){var s=e.id;return e.createWebServicesUXApiKeyCookieAsync(n,s),d(n,s,t)}return Shell.UI.Navigation.calculateNavigationPath({extension:r.webServiceGroupExtensionName,type:r.WebServiceGroupType.name,name:t})}function m(e,t,n){n===void 0&&(n={});if(i.LinkToWebServicesUxEnabled()&&!i.belizeForSMV1Enabled()){var s=e.id,o=window.environment.webServicesUxLocation;e.createWebServicesUXApiKeyCookieAsync(o,s).always(function(e){window.location.href=d(o,s,t,n)})}else Shell.UI.Navigation.navigate({extension:r.webServiceGroupExtensionName,type:r.WebServiceGroupType.name,name:t})}function g(e){var t=e.Endpoints==null?0:e.Endpoints.length;return!(e.ProductionWebService||t>1)}function y(e){var t=window.environment.workspacesArmEnabledWhitelist;return t.indexOf(e.toLowerCase())!==-1}function b(e){var t=window.environment.workspaceType,n=o.WorkspaceType[t];return(i.deployToArmEnabled()&&this.isThisWorkspaceArmEnabled(e)||i.deployToArmAlwaysOnEnabled())&&n!==1&&n!==2}function w(e){return{Id:e.Id,Name:e.Name,CreationTime:null,Description:null,ModelPackages:null,StagingWebService:null,ProductionWebService:null,Endpoints:null,type:e.type,Tags:e.Tags}}t.getCompetitionUri=a,t.getCompetitionTenantId=f,t.getGalleryUri=l,t.getTag=c,t.getTags=h,t.queryFromObject=p,t.calculateNavigationPathToWebServiceUx=d,t.calculateNavigationPathToWebService=v,t.navigateToWebService=m,t.canDeleteWebserviceGroup=g,t.isThisWorkspaceArmEnabled=y,t.canDeployToArm=b,t.convertToWebServiceGroup=w});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/RecentWorkView",["require","exports","../DataLabViews/ExperimentView","../TS/ViewModel/ExperimentEditor/ExperimentViewModel","../TS/Common/WebServiceGroupUtilities","../../DataLabClient/Contracts/V1/Constants","../../DataLabClient/Contracts/V1/DataContractInterfaces-v1","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Logging/Performance","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function g(e,t,n){n===void 0&&(n="");var r=n?' class="'+n+'"':"",i=$("<div"+r+">"+e+"</div>");return function(e,n){return i.clone().click(function(e){n.dataItem&&t&&t(n.dataItem)})}}var d={Creator:"120px",Status:"100px",Date:"150px",Button:"70px"},v;(function(e){e[e.IExperimentInfo=0]="IExperimentInfo",e[e.IWebServiceGroup=1]="IWebServiceGroup"})(v||(v={}));var m={LastModified:"lastModified",LastRun:"lastRun",LastPublished:"lastPublished"},y='<img src="/Libraries/Images/preview_24.svg" alt="'+l.recentWorkPreview+'">',b=function(e){function t(t,r){var i=this;e.call(this),this._logEventTag="lastEdit",this._data=[];var s=g(y,function(e){c.featureUsage({featureID:33,groupID:0,experimentID:e&&e.ExperimentId}),(!r()||e!==r().dataItem)&&r({dataItem:e,Type:0})},"button"),o=t.wazDataGrid({columns:[{name:l.recentWorkPreview,formatter:s,sortable:!1,filterable:!1,width:d.Button,cssClass:"buttonColumn"},{name:l.experimentGridHeaderName,field:"Description",sortable:!1,filterable:!0,cssClass:"navigationColumn"},{name:l.experimentGridHeaderCreator,field:"Creator",sortable:!1,filterable:!0,width:d.Creator,cssClass:"navigationColumn"},{name:l.experimentGridHeaderStatus,field:"StatusCode",sortable:!1,filterable:!0,width:d.Status,cssClass:"navigationColumn"},{name:l.experimentGridHeaderSaveTime,field:"CreationTime",formatter:p.formatDate,sortable:!1,filterable:!1,width:d.Date,cssClass:"navigationColumn"}],data:this._data,selectable:!1,multiselect:!1,resizable:!0,noRows:l.recentWorkNoRows,pagerOptions:{pageSize:x.MAXRESULTS}});o.on("click",".navigationColumn",function(e){var t=$(e.target).closest("tr").view().data;if(t.rowMetadata){var r=t.rowMetadata.dataItem.ExperimentId;c.customEvent({key:i._logEventTag,type:"OpeningExperiment",experimentID:r}),n.navigateToExperiment(r)}})}return __extends(t,e),t.prototype.update=function(e){$.observable(this._data).refresh(e.map(function(e){return{ExperimentId:e.ExperimentId,Description:e.Description,Creator:e.Creator,CreationTime:e.Status.CreationTime,StatusCode:e.Status.StatusCode,etag:e.Etag}}))},t}(a.Disposable),w=function(e){function t(t,r){var i=this;e.call(this),this._logEventTag="lastRun",this._data=[];var s=g(y,function(e){c.featureUsage({featureID:33,groupID:0,experimentID:e&&e.ExperimentId}),(!r()||e!==r().dataItem)&&r({dataItem:e,Type:0})},"button"),o=t.wazDataGrid({columns:[{name:l.recentWorkPreview,formatter:s,sortable:!1,filterable:!1,width:d.Button,cssClass:"buttonColumn"},{name:l.experimentGridHeaderName,field:"Description",sortable:!1,filterable:!0,cssClass:"navigationColumn"},{name:l.experimentGridHeaderCreator,field:"Creator",sortable:!1,filterable:!0,width:d.Creator,cssClass:"navigationColumn"},{name:l.experimentGridHeaderStatus,field:"StatusCode",sortable:!1,filterable:!0,width:d.Status,cssClass:"navigationColumn"},{name:l.experimentGridHeaderStartTime,field:"StartTime",formatter:p.formatDate,sortable:!1,filterable:!1,width:d.Date,cssClass:"navigationColumn"},{name:l.experimentGridHeaderEndTime,field:"EndTime",formatter:p.formatDate,sortable:!1,filterable:!1,width:d.Date,cssClass:"navigationColumn"}],data:this._data,selectable:!1,multiselect:!1,resizable:!0,noRows:l.recentWorkNoRows,pagerOptions:{pageSize:x.MAXRESULTS}});o.on("click",".navigationColumn",function(e){var t=$(e.target).closest("tr").view().data;if(t.rowMetadata){var r=t.rowMetadata.dataItem.ExperimentId;c.customEvent({key:i._logEventTag,type:"OpeningExperiment",experimentID:r}),n.navigateToExperiment(r)}})}return __extends(t,e),t.prototype.update=function(e){$.observable(this._data).refresh(e.map(function(e){return{ExperimentId:e.ExperimentId,Description:e.Description,Creator:e.Creator,StartTime:e.Status.StartTime,EndTime:e.Status.EndTime,StatusCode:e.Status.StatusCode,etag:e.Etag}}))},t}(a.Disposable),E=function(e){function t(t,n,r){var s=this;e.call(this),this._logEventTag="lastPublished",this._data=[];var o=g(y,function(e){c.featureUsage({featureID:34,groupID:0,experimentID:e&&e.Id}),(!n()||e!==n().dataItem)&&n({dataItem:e,Type:1})},"button"),u=t.wazDataGrid({columns:[{name:l.recentWorkPreview,formatter:o,sortable:!1,filterable:!1,width:d.Button,cssClass:"buttonColumn"},{name:l.recentWorkLastPublishedHeaderName,field:"Name",sortable:!1,filterable:!0,cssClass:"navigationColumn"},{name:l.recentWorkLastPublishedHeaderCreationTime,field:"CreationTime",sortable:!1,filterable:!1,cssClass:"navigationColumn"}],data:this._data,selectable:!1,multiselect:!1,resizable:!0,noRows:l.recentWorkNoRows,pagerOptions:{pageSize:x.MAXRESULTS}});u.on("click",".navigationColumn",function(e){var t=$(e.target).closest("tr").view().data;if(t.rowMetadata){var n=t.rowMetadata.dataItem.Id;c.customEvent({key:s._logEventTag,type:"OpeningExperiment",data:n}),i.navigateToWebService(r,n)}})}return __extends(t,e),t.prototype.update=function(e){$.observable(this._data).refresh(e.map(function(e){return{Id:e.Id,Name:e.Name,CreationTime:p.formatDate(p.parseJsonDate(e.CreationTime))}}))},t}(a.Disposable),S=function(e){function t(t,n){e.call(this),this.classId="xe-surface";var i=new r.ExperimentViewModel(t,n);this.registerForDisposal(i),this.experimentViewModel=ko.observable(i)}return __extends(t,e),t}(a.Disposable);t.ExperimentThumbnail=S;var x=function(e){function t(n,r){var i=this;e.call(this),this.renderThumbnail=!0,this.loading=ko.observable(!1),this._renderArea=n.get(0),this._experiments=ko.observable([]),this._webServiceGroups=ko.observable([]),this._workspace=r,this.thumbnail=ko.observable(),this._selectedItem=ko.observable(),this.thumbnailSize=ko.observable("normal");var o;f.editorControl2Enabled()?o=ExperimentEditorTemplates._editorSurface2Markup:o=ExperimentEditorTemplates._editorSurfaceMarkup,this.registerForDisposal(new a.DisposableSetHTML(this._renderArea,o+ExperimentEditorTemplates._recentWorkMarkup)),this.setupFilterSelector(),this.setupThumbnailSizeSelector(n);var u=ko.computed(function(){return $.grep(i._experiments()||[],function(e){var t=e.ExperimentId.split(".")[0];return t===r.id},!1)}),l=ko.computed(function(){return u().slice(0).sort(t._compareEditDate)}),h=new b(n.find(t.LASTEDITCONTAINER),this._selectedItem);this.registerForDisposal(h),l.subscribe(function(e){h.update(e)});var p=ko.computed(function(){return $.grep(u(),function(e,t,n){return e.Status.StatusCode!=s.State.InDraft&&e.Status.StatusCode!=s.State.NotStarted},!1).sort(t._compareRunDate)}),d=new w(n.find(t.LASTRUNCONTAINER),this._selectedItem);this.registerForDisposal(d),p.subscribe(function(e){d.update(e)});var v=ko.computed(function(){return i._webServiceGroups()&&i._webServiceGroups().slice(0).sort(t._comparePublishDate)||[]}),g=new E(n.find(t.LASTPUBLISHEDCONTAINER),this._selectedItem,this._workspace);this.registerForDisposal(g),v.subscribe(function(e){g.update(e)}),ko.computed(function(){i._workspace.applicationCache.allPrefetched()&&i._selectedItem()&&i._renderThumbnail(i._selectedItem,i.thumbnail,n.find(t.THUMBNAIL))}),this.thumbnailTitle=ko.computed(function(){var e=i._selectedItem();if(e){if(e.Type===0)return e.dataItem.Description;if(e.Type===1)return e.dataItem.Name}return null});var y=ko.computed(function(){var e=[],t=0;switch(i.selectedFilter()){case m.LastModified:e=l();break;case m.LastRun:e=p();break;case m.LastPublished:e=v(),t=1}e[0]&&i._selectedItem({dataItem:e[0],Type:t})},this,{disposeWhen:function(){return i._selectedItem()}});c.info("applying bindings",null,JSON.stringify({viewModel:"recent"})),this.registerForDisposal(new a.DisposableKOApplyBindings(this,this._renderArea)),cdm.setActiveItem(this)}return __extends(t,e),t.prototype.thumbnailOnClick=function(){var e=this._selectedItem();if(e)switch(e.Type){case 0:n.navigateToExperiment(e.dataItem.ExperimentId);break;case 1:i.navigateToWebService(this._workspace,e.dataItem.Id);break;default:c.customEvent({key:"RecentWork",type:"Unknown GridItemType",data:e.Type})}},t.prototype.refreshFromService=function(){var e=this;Shell.UI.Spinner.show();var n={includeNonLeaf:!1,includeArchived:!1},r=p.then(this._workspace.listExperimentsAsync(n),function(n){cdm.currentActiveItem instanceof t&&e._experiments(n)}),i=p.then(this._workspace.listWebServiceGroupsAsync(),function(n){cdm.currentActiveItem instanceof t&&e._webServiceGroups(n)});$.when(r,i).fail(function(){c.customEvent({key:"RecentWork",type:"LoadingExperimentsFailed",workspaceID:e._workspace.id});var t=new Shell.UI.Notifications.Notification(l.recentWorkListExperimentsFailure,"error");t.setActions([new Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(t)})]),Shell.UI.Notifications.add(t)}).always(function(){cdm.currentActiveItem instanceof t&&(Shell.UI.Spinner.hide(),h.intervalEnd())})},t.prototype._isGlobalWorkspaceId=function(e){return e&&e!==this._workspace.id},t._compareEditDate=function(e,t){return e.Status.CreationTime>t.Status.CreationTime?-1:e.Status.CreationTime<t.Status.CreationTime?1:0},t._compareRunDate=function(e,t){return e.Status.StartTime>t.Status.StartTime?-1:e.Status.StartTime<t.Status.StartTime?1:0},t._comparePublishDate=function(e,t){return e.CreationTime>t.CreationTime?-1:e.CreationTime<t.CreationTime?1:0},t._fitSvg=function(e){var t=5;if(e){var n=e.find("svg"),r=n.find("g");if(r.length>0){var i=Shell.Utilities.getBBoxOrDefaultSVGRect(r[0]),s=(i.x-t).toString()+" "+(i.y-t)+" "+(i.width+2*t)+" "+(i.height+2*t);n[0].setAttribute("viewBox",s)}}},t.prototype._getExperimentIdAsync=function(e){var t=$.Deferred();if(!e)t.reject();else switch(e.Type){case 0:t.resolve(e.dataItem.ExperimentId);break;case 1:p.then(this._workspace.getWebServiceGroupAsync(e.dataItem.Id),function(e){e.ModelPackages.length>0?t.resolve(e.ModelPackages[0].LinkedExperimentId):t.reject()},function(){return t.reject()});break;default:c.customEvent({key:"RecentWork",type:"Unknown GridItemType",data:e.Type}),t.reject()}return t.promise()},t.prototype._renderThumbnail=function(e,n,r){var i=this,s=e();if(s){this.loading(!0);var o=function(){i.loading(!1)},u=p.then(this._getExperimentIdAsync(s),this._workspace.getExperimentAsync.bind(this._workspace),o);p.then(u,function(o){if(cdm.currentActiveItem instanceof t&&e()===s){var u=new S(o,i._workspace);i.registerForDisposal(u);var a=n();n(u),t._fitSvg(r),i.loading(!1),a&&(a.dispose(),a=null)}},o)}},t.prototype.setupFilterSelector=function(){var e=this,t=[{text:l.recentWorkLastEditedLabel,value:m.LastModified},{text:l.recentWorkLastRunLabel,value:m.LastRun},{text:l.recentWorkLastPublishedLabel,value:m.LastPublished}],n=t[0],r=function(t,n){c.customEvent({key:"RecentWork",type:"ExperimentFilterChanged",data:n.value.value}),$("#filterSelector").fxRadio("setOriginalValue"),e.selectedFilter(n.value.value)};$("#filterSelector").fxRadio({values:t,value:n,change:r}),this.selectedFilter=ko.observable(n.value)},t.prototype.setupThumbnailSizeSelector=function(e){var n=this,r=[{text:l.recentWorkSizeNormal,value:"sizeNormal"},{text:l.recentWorkSizeBig,value:"sizeBig"}],i=r[0],s=function(r,i){c.featureUsage({featureID:35,groupID:0,data:i.value.value}),$("#thumbnailSizeSelector").fxRadio("setOriginalValue"),n.thumbnailSize(i.value.value),t._fitSvg(e.find(t.THUMBNAIL))};$("#thumbnailSizeSelector").fxRadio({values:r,value:i,change:s}),this.thumbnailSize(i.value)},t.MAXRESULTS=12,t.LASTEDITCONTAINER="#gridLastEdited",t.LASTRUNCONTAINER="#gridLastRun",t.LASTPUBLISHEDCONTAINER="#gridLastPublished",t.THUMBNAIL="#thumbnail",t}(a.Disposable);t.RecentWorkView=x}),define("generated/DataLabClient/Contracts/V1/Common/WorkspaceManagement",["require","exports"],function(e,t){(function(e){e[e.Invited=0]="Invited",e[e.Active=1]="Active"})(t.InvitationStatus||(t.InvitationStatus={}));var n=t.InvitationStatus}),define("generated/editor/TS/View/UsersPivot",["require","exports","../../TS/Global","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Util","../../../DataLabClient/Contracts/V1/Common/WorkspaceManagement"],function(e,t,n,r,i,s,o){var u;(function(e){var t;(function(e){e.inviteText=r.enterAddresses,e.reinviteText=r.incorrectEmailPleaseCorrect,e.title=r.inviteUsers,e.userRoleDescription=r.userActions,e.ownerRoleDescription=r.ownerActions,e.invalidRowMarkupTemplate="<span class='invitationDialogInvalidAddress' onclick=\"$(this).removeClass('invitationDialogInvalidAddress')\">%%EMAIL%%</span>;&nbsp;",e.userActiveText=r.workspaceUserInviteActiveText,e.userInvitedText=r.workspaceUserInviteInvitedText,e.inviteDialogSize=[800,520]})(t=e.UsersPivot||(e.UsersPivot={}))})(u=t.Constants||(t.Constants={}));var a=function(){function e(){}return e}();t.InvitationDialogViewModel=a,function(e){e[e.User=0]="User",e[e.Invitation=1]="Invitation"}(t.EntityType||(t.EntityType={}));var f=t.EntityType,l=function(){function e(e,t){var n=this;this.client=e,this.renderArea=t,this.data=[],this.grid=$(this.renderArea).find("#grid").addClass("usersGrid").fxDataGrid({columns:[{name:r.name,field:"name"},{name:r.email,field:"email"},{name:r.role,field:"role"},{name:r.status,field:"status"}],data:this.data,selectable:!0,multiselect:!0,resizable:!0,rowSelect:function(e,t){n.removeCommand.setDisabled(n.grid.fxDataGrid("getSelectedRows").length===0)}})}return e.prototype.refreshFromService=function(){var e=this;Shell.UI.Spinner.show(),this.client.listUsersAndInvitationsAsync().done(function(t){Shell.UI.Spinner.hide(),e.ownersCount=0;var n=[];t.forEach(function(t){if(!t.User)throw r.userAndInvitationNull;var i=t.Status,s=0,a=u.UsersPivot.userActiveText;o.InvitationStatus[i]==0&&(s=1,a=u.UsersPivot.userInvitedText),n.push({entityType:s,id:t.User.UserId,name:t.User.Name,email:t.User.Email,role:t.User.Role,status:a}),s===0&&t.User.Role==="Owner"&&e.ownersCount++}),$.observable(e.data).refresh(n)})},e.prototype.removeEntity=function(e){if(e.entityType===0)return this.client.removeUser(e.id);if(e.entityType===1)return this.client.removeUser(e.email)},e.prototype.removeUsers=function(){var e=this,t=this.grid.fxDataGrid("getSelectedRows"),n=t.length,o=0;t.forEach(function(e){var t=e.dataItem;t.entityType===0&&t.role==="Owner"&&o++});if(o===this.ownersCount){this.addFailNotification(r.cannotRemoveAllOwners);return}var u=0,a;n>1?a=new Shell.UI.Notifications.Confirmation(s.format(r.removeUsers,n),"active"):a=new Shell.UI.Notifications.Confirmation(s.format(r.removeUser,t[0].dataItem.email),"active"),a.setActions([new Shell.UI.Notifications.Buttons.yes(function(){e.doRemoveUsers(t),i.customEvent({key:"RemoveUsers",type:"Settings",data:t.length})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(a),i.customEvent({key:"RemoveUsersAttemptCancelled",type:"Settings"})})]),Shell.UI.Notifications.add(a)},e.prototype.doRemoveUsers=function(e){var t=this,n=0,r=[];Shell.UI.Spinner.show(),e.forEach(function(e){r.push(t.removeEntity(e.dataItem).fail(function(){n++}))}),$.when.apply($,r).always(function(){t.refreshFromService(),n>0&&t.addFailNotification("Failed to remove "+n+" out of "+e.length+", Unknown error occured")})},e.prototype.launchInvitationDialog=function(e){var t=this,n=e?u.UsersPivot.reinviteText:u.UsersPivot.inviteText,r=$("<div/>"),i;r.fxsDialog({closing:function(e){e.completed&&i.text()&&t.sendInvitations(i.text())},size:u.UsersPivot.inviteDialogSize});var s=r.fxsDialog("getViewModel");s.title(u.UsersPivot.title),s.content(ExperimentEditorTemplates._invitationDialogMarkup),$(".fxs-modalpresenter").fxsModalPresenter("open",r),i=r.find(".invitationDialogAddressesBox"),i.html(e),i.focus(),this.viewModel=new a,this.viewModel.error=e!=="",this.viewModel.role=ko.observable(),this.viewModel.instructions=n,this.viewModel.roleDescription=ko.computed(function(){return t.viewModel.role()==="Owner"?u.UsersPivot.ownerRoleDescription:u.UsersPivot.userRoleDescription}),this.viewModel.pressHandler=function(e,t){if(t.keyCode===13){i.html(i.html()+"; ");var n=document.createRange();n.selectNodeContents(i.get(0)),n.collapse(!1);var r=window.getSelection();return r.removeAllRanges(),r.addRange(n),!1}return!0};var o=!1;r.on("dragstart",function(){o=!0}),r.on("drop",function(){return o?(o=!1,!1):!0}),ko.applyBindings(this.viewModel,r.find(".invitationDialogContent").get(0))},e.prototype.sendInvitations=function(e){var t=this;e.trim()||this.launchInvitationDialog(""),Shell.UI.Spinner.show();var n=this.viewModel.role(),o={Emails:e,Role:n},a;i.customEvent({key:"InviteUsers",type:"Settings",data:JSON.stringify(o)}),this.client.sendInvitation(o).done(function(e){var n=e,r=s.first(n,function(e){return e.Failed},!1);if(r){var i="";n.forEach(function(e){e.Failed?i+=u.UsersPivot.invalidRowMarkupTemplate.replace("%%EMAIL%%",s.encodeAsHtml(e.Email)):i+=s.encodeAsHtml(e.Email)+";&nbsp;"}),setTimeout(function(){t.launchInvitationDialog(i),Shell.UI.Spinner.hide()},500)}else t.refreshFromService()}).fail(function(t){Shell.UI.Spinner.hide();var n=s.format(r.invitationCouldNotSendInvitationTo,e),i=new Shell.UI.Notifications.Notification(n,"error");i.setActions([new Shell.UI.Notifications.Buttons.ok]),Shell.UI.Notifications.add(i)})},e.prototype.setRemoveCommand=function(e){this.removeCommand=e,this.removeCommand.setDisabled(this.grid.fxDataGrid("getSelectedRows").length===0)},e.prototype.addFailNotification=function(e){var t=new Shell.UI.Notifications.Notification(e,"error");t.setActions([new Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(t)})]),Shell.UI.Notifications.add(t)},e}();t.UsersPivot=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/GraphClient",["require","exports","./Util","./Logging/Logging","./AjaxClient"],function(e,t,n,r,i){function u(e){if(e&&e.status===401){var t=/Bearer authorization_uri="https?:\/\/[^"]+\/([^'"]+)"/,n=e.getResponseHeader("WWW-Authenticate");if(n){var r=n.match(t);if(r&&r[1])return r[1].toLowerCase()}}return null}var s=function(){function e(){this.serviceBaseAddress=environment.graphBaseAddress||"https://graph.windows.net/",this.authenticationManager=new window.AuthenticationManager(r)}return e.prototype.sendRequest=function(e,t,s,o){var a=this;return t===void 0&&(t={}),s===void 0&&(s={}),n.then2(this.authenticationManager.getGraphToken(o),function(f){s=$.extend(s,a.generateGeneralClientHeaders(f));var l=a.generateRequestArguments(a.serviceBaseAddress,e,t,s);return n.then2(i.sendRequest(l),function(e){return e},function(e){if(e instanceof n.AjaxError&&e.xmlHttpRequest){var t=u(e.xmlHttpRequest);t&&t!==o&&r.error("wrong tenant ID used in an GraphClient request",null,{tenantIdUsed:o,tenantIdInResponse:t})}return e})})},e.prototype.generateGeneralClientHeaders=function(e){var t=Object.create({});return t.Authorization="Bearer "+e,t},e.prototype.generateRequestArguments=function(e,t,n,r){return{url:e+t,loggedUrl:t,additionalHeaders:r,settings:n}},e}();t.GraphBaseClient=s;var o=function(e){function t(){e.call(this)}return __extends(t,e),t.prototype.getUserObjects=function(e,t){var r=this.getUserFilter(e),i="/"+t+"/users?api-version=1.5&"+r,s=this.sendRequest(i,{type:"GET"},{"x-ms-path-query":i},t);return n.then2(s,function(e){return e.value})},t.prototype.getUserFilter=function(e){return"$filter="+encodeURIComponent("accountEnabled eq true and (userPrincipalName eq '"+e+"' or mail eq '"+e+"' or otherMails")+"/any(e:"+encodeURIComponent("e eq '"+e+"'))")},t}(s);t.GraphClient=o}),define("generated/editor/TS/View/SharingPivot",["require","exports","../../TS/Global","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Util","../../../DataLabClient/ArmClient","../../../DataLabClient/GraphClient"],function(e,t,n,r,i,s,o,u){var a;(function(e){var t;(function(e){e.inviteText=r.enterAddresses,e.reinviteText=r.incorrectEmailPleaseCorrect,e.title=r.inviteUsers,e.userRoleDescription=r.userActions,e.ownerRoleDescription=r.ownerActions,e.invalidRowMarkupTemplate="<span class='invitationDialogInvalidAddress' onclick=\"$(this).removeClass('invitationDialogInvalidAddress')\">%%EMAIL%%</span>;&nbsp;",e.userActiveText=r.workspaceUserInviteActiveText,e.userInvitedText=r.workspaceUserInviteInvitedText,e.inviteDialogSize=[800,520]})(t=e.SharingPivot||(e.SharingPivot={}))})(a=t.Constants||(t.Constants={}));var f=function(){function e(){}return e}();t.InvitationDialogViewModel=f;var l=function(){function e(e,t,n){this.client=e,this.workspace=t,this.renderArea=n,this.graphClient=new u.GraphClient,this.armClient=new o.ArmClient,this.ibizaLink="https://portal.azure.com"}return e.prototype.launchInvitationDialog=function(e){var t=this,n=e?a.SharingPivot.reinviteText:a.SharingPivot.inviteText,r=$("<div/>"),i;r.fxsDialog({closing:function(e){e.completed&&i.text()&&t.sendInvitations(i.text())},size:a.SharingPivot.inviteDialogSize});var s=r.fxsDialog("getViewModel");s.title(a.SharingPivot.title),s.content(ExperimentEditorTemplates._invitationDialogMarkup),$(".fxs-modalpresenter").fxsModalPresenter("open",r),i=r.find(".invitationDialogAddressesBox"),i.html(e),i.focus(),this.viewModel=new f,this.viewModel.error=e!=="",this.viewModel.role=ko.observable(),this.viewModel.instructions=n,this.viewModel.roleDescription=ko.computed(function(){return t.viewModel.role()==="Owner"?a.SharingPivot.ownerRoleDescription:a.SharingPivot.userRoleDescription}),this.viewModel.pressHandler=function(e,t){if(t.keyCode===13){i.html(i.html()+"; ");var n=document.createRange();n.selectNodeContents(i.get(0)),n.collapse(!1);var r=window.getSelection();return r.removeAllRanges(),r.addRange(n),!1}return!0};var o=!1;r.on("dragstart",function(){o=!0}),r.on("drop",function(){return o?(o=!1,!1):!0}),ko.applyBindings(this.viewModel,r.find(".invitationDialogContent").get(0))},e.prototype.sendInvitations=function(e){var t=this;e.trim()||this.launchInvitationDialog(""),Shell.UI.Spinner.show();var n=this.viewModel.role(),o={Emails:e,Role:n};i.customEvent({key:"InviteUsers",type:"Settings",data:JSON.stringify(o)}),this.sendSharingInvitations(o).done(function(e){var n=s.first(e,function(e){return e.Failed},!1);if(n){var i="";e.forEach(function(e){if(e.Failed){i+=a.SharingPivot.invalidRowMarkupTemplate.replace("%%EMAIL%%",s.encodeAsHtml(e.Email));var t="";e.Information==="UserNotFoundInAD"&&(t=r.invitationCouldNotSendInvitationUserNotFoundInAD);var n=s.format(r.invitationCouldNotSendInvitationToBecause,e.Email,t),o=new Shell.UI.Notifications.Notification(n,"error");o.setActions([new Shell.UI.Notifications.Buttons.ok]),Shell.UI.Notifications.add(o)}else i+=s.encodeAsHtml(e.Email)+";&nbsp;"}),setTimeout(function(){t.launchInvitationDialog(i),Shell.UI.Spinner.hide()},500)}else{Shell.UI.Spinner.hide();var o=new Shell.UI.Notifications.Notification(r.invitationSuccessful,"information");o.setActions([new Shell.UI.Notifications.Buttons.ok]),Shell.UI.Notifications.add(o)}}).fail(function(t){Shell.UI.Spinner.hide();var n=s.format(r.invitationCouldNotSendInvitationTo,e),i=new Shell.UI.Notifications.Notification(n,"error");i.setActions([new Shell.UI.Notifications.Buttons.ok]),Shell.UI.Notifications.add(i)})},e.prototype.sendSharingInvitations=function(e){var t=this,n=e.Emails.split(";").map(function(e){return e.trim()}).filter(function(e){return e!=""}),r=[];return this.resolveUsersInAD(n).done(function(n){var r=n;t.assignUsersPermissionsInArm(r).done(function(n){var r=n,i="";r.forEach(function(e){e.Failed||(i=i+e.Email+";")});if(i!=""){var s={Emails:i,Role:e.Role};t.client.sendEmailInvitation(s).done(function(e){var t=e,n=0;r.forEach(function(e){e.Failed||(e.Failed=t[n].Failed,e.Information=t[n].Information,n++)})})}return r})})},e.prototype.resolveUsersInAD=function(e){var t=this,n=[],r=e.map(function(e){var r=t.resolveUserInAD(e).done(function(e){var t=e;n.push(t)});return r});return s.then(s.when.apply(null,r),function(){return n})},e.prototype.resolveUserInAD=function(e){return s.then(this.graphClient.getUserObjects(e,this.tenantId),function(t){var n=t.filter(function(t){return t.email==e||t.userPrincipalName==e||t.otherMails.some(function(t){return t==e})}),r={Email:e,Failed:!0,Information:"UserNotFoundInAD"};return n.length>0&&n[0].objectId!=null&&(r.Failed=!1,r.Information=n[0].objectId),r},function(t){var n={Email:e,Failed:!0,Information:t.message};return s.when(n)})},e.prototype.assignUsersPermissionsInArm=function(e){var t=this,n=this.viewModel.role(),r;n=="Owner"?r=environment.workspaceAdministratorRoleId:r=environment.workspaceUserRoleId;var i=e.filter(function(e){return!e.Failed}),o=e.filter(function(e){return e.Failed}),u=i.map(function(e){var n=t.assignUserPermissionInArm(r,e.Information,e.Email).done(function(e){var t=e;o.push(t)});return n});return s.then(s.when.apply(null,u),function(){return o})},e.prototype.assignUserPermissionInArm=function(e,t,n){return s.then(this.armClient.createResourceGroupRoleAssignment(this.subscriptionId,this.tenantId,e,this.resourceGroupName,t),function(e){var t={Email:n,Failed:!0,Information:"UserRoleAssignmentFailed"};return e!=null&&e.name!=null&&(t.Failed=!1,t.Information=null),t},function(e){var t={Email:n,Failed:!0,Information:e.message};return e.message.indexOf("Error 409 (Conflict)")>=0&&(t.Failed=!1,t.Information=null),s.when(t)})},e.prototype.refreshFromService=function(){var e=this;Shell.UI.Spinner.show(),this.workspace.getWorkspaceSettingsAsync().done(function(t){var n=window.environment,r=n.azurePortalUrl;e.subscriptionId=t.subscriptionId,e.tenantId=t.tenantId,e.resourceGroupName=t.resourceGroupName,e.ibizaLink=r+"/?redirecturl="+r+"/#resource/subscriptions/"+e.subscriptionId+"/resourceGroups/"+e.resourceGroupName+"/users";var i=$("#Sharing")[0];ko.applyBindings(e,i),Shell.UI.Spinner.hide()}).fail(function(){throw new Error("Load workspace settings failed.")})},e.prototype.addNotification=function(e,t){var n=new Shell.UI.Notifications.Notification(e,t);n.setActions([new Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(n)})]),Shell.UI.Notifications.add(n)},e}();t.SharingPivot=l}),define("generated/editor/TS/ViewModel/ExperimentEditor/Help",["require","exports","../../../TS/Global","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o){function u(e,n,r){n===void 0&&(n=null),r===void 0&&(r=""),t.currentHelpTopic(e),t.moduleTopicID(n),t.resourceName(r)}function T(e){var t=x;return e&&(e.match(/^machine/)?t=S+e:t=E+e),t}function N(e,t){t===void 0&&(t=""),s.featureUsage({featureID:22,groupID:0,data:JSON.stringify({topicId:e,anchor:t})});var n;e==null&&e=="",n=window.open(T(e),a,""),n&&n.focus()}function C(){e(["../../../TS/View/CredentialsPivot","../../../DataLabViews/ExperimentLineageView","../../../DataLabViews/ExperimentListView","../../../DataLabViews/ExperimentView","../../../TS/ViewModel/ExperimentEditor/HelpSearchViewModel","../../../DataLabViews/RecentWorkView","../../../TS/View/UsersPivot","../../../TS/View/SharingPivot"],function(e,t,r,i,o,u,a,f){o.Initialize();var d=function(){var n="",o="";return cdm.currentExtension&&cdm.currentExtension.name==="ListExperiments"?n=h:cdm.currentActiveItem instanceof u.RecentWorkView?n=l:cdm.currentActiveItem instanceof r.ExperimentListView?n=p:cdm.currentActiveItem instanceof t.ExperimentLineageView?n=b:cdm.currentActiveItem instanceof i.ExperimentView?n=c:cdm.currentExtension&&cdm.currentExtension.name==="Datasets"?n=w:cdm.currentExtension&&cdm.currentExtension.name==="Settings"?n=v:cdm.currentActiveItem instanceof e.CredentialsPivot?n=g:cdm.currentActiveItem instanceof a.UsersPivot?n=y:cdm.currentActiveItem instanceof f.SharingPivot?n=y:cdm.currentExtension&&cdm.currentExtension.name==="WebServiceGroups"&&(n=m),N(n,o),s.customEvent({key:o,type:"Help"}),!1};$(".helpSearch").children(".helpIcon").click(d),$("html").keydown(function(e){if(e.keyCode===112)return e.preventDefault(),e.stopPropagation(),d(),!1});if(n.CurrentBrowser===2||n.CurrentBrowser===3||n.CurrentBrowser===4)window.onhelp=d,document.onhelp=d})}function k(){N(t.moduleTopicID())}t.currentHelpTopic=ko.observable(""),t.moduleTopicID=ko.observable(null),t.resourceName=ko.observable(""),t.setHelpContent=u;var a=o.format(i.helpStudioHelpName,i.productName),f="c5ff103f-d6ef-44f5-a5aa-21fdaed12c77",l="6cfeb32e-6aa1-4bce-91e6-ed38a7b0c4df",c="e1a8c2a1-3a47-43a9-b228-20869cdf898b",h="057b7239-f796-40d1-b60c-dd721e35c3fc",p="6cfeb32e-6aa1-4bce-91e6-ed38a7b0c4df",d="e76c990c-bb44-4dea-b834-39d4c4e864ec",v="384efded-6c42-4c7f-968d-7993263a3269",m="631fbe7a-8e23-460f-892b-0d66bbd04b47",g="13a22b84-5132-47d7-9b93-9b2fd476b0ff",y="20ff2e97-6a44-4312-88b6-64457f0583d8",b="fd68e26d-66b0-4267-bbef-0378a8b367f4",w="4fe54478-1837-45ef-ae58-393d2cb4eeec",E=window.environment?window.environment.referenceHelpBaseURL:"https://sandboxmsdnstage.redmond.corp.microsoft.com/library/",S="http://azure.microsoft.com/en-us/documentation/articles/",x="http://go.microsoft.com/fwlink/?LinkId=524824";t.getTopicUrl=T,t.openHelpWindow=N,t.Initialize=C,t.QuickHelpMoreInfo=k}),define("generated/editor/TS/view/StrippedDialog",["require","exports"],function(e,t){var n={canCloseWithEscape:!0},r=function(){function e(e){e===void 0&&(e=null),this.dialog=null,this.options=$.extend(!0,n,e)}return e.prototype.show=function(e,t,n){n===void 0&&(n=null);var r=this,i=function(){Shell.UI.DialogPresenter.show({template:$.templates(t),init:function(){this.element.find(".fx-dialog-ok").css("display","none"),this.element.find(".fx-dialog-close").css("display","none"),this.element.css("padding-bottom",this.element.css("padding-top")),this.element.css("min-height","0"),ko.applyBindings(e,this.element.get(0)),r.dialog=this,r.autofocus(this.element.get(0));if(!r.options.canCloseWithEscape){var t=this.close;this.close=function(e){e.which!==$.ui.keyCode.ESCAPE&&t.call(this,e)}}},size:n})};this.closeAnyActiveDialog();var s=$(".fx-dialogpresenter-shield");s.promise().done(i)},e.prototype.close=function(e){e===void 0&&(e=null),this.dialog&&this.dialog.close(e||{preventDefault:$.noop}),this.dialog=null},e.prototype.closeAnyActiveDialog=function(){var e=$(".fx-dialog");if(e.length>0&&e.is(":data(fx-fxDialog)")){var t=document.createEvent("CustomEvent");t.initEvent("close",!0,!0),e.fxDialog("close",t)}},e.prototype.autofocus=function(e){var t=e.getElementsByClassName("autofocus")[0],n=e.getElementsByTagName("button")[0],r=t||n;r&&setTimeout(function(){return r.focus()})},e}();t.StrippedDialog=r}),define("generated/editor/TS/ViewModel/Dialogs/TrialDialogs",["require","exports","../../../TS/ViewModel/ExperimentEditor/Help","../../../TS/view/StrippedDialog","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Trial","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace","../../../../DataLabClient/Model/WorkspaceSettings"],function(e,t,n,r,i,s,o,u,a,f,l,c){function g(e){return $('<a target="_blank"></a>').attr("href",e.url).text(e.text).get(0).outerHTML}function y(e){var t=e.links||[],n=t.map(g),r=[$("<div />").text(e.text).html()].concat(n);return f.format.apply(null,r)}function w(){var e=new r.StrippedDialog({canCloseWithEscape:!1}),t=a.getTimeLimit(),n={descriptionHtml:f.format(o.trialDialogExpiredTrialDescription,t.toString(),f.format('<a href="{0}" target="_blank">{1}</a>',o.microsoftAccountUrl,o.microsoftAccount)),signIn:function(e,t){u.featureUsage({featureID:61,groupID:0}),window.open("/Home/Free","_self")},endTrial:function(t,n){u.featureUsage({featureID:62,groupID:0}),e&&e.close(n),window.open("/","_self")}};e.show(n,ExperimentEditorTemplates._expiredTrialDialogMarkup,["450px",null])}function E(){var e={title:o.trialDialogDisabledFeatureTitle,description:[{text:o.trialDialogDisabledFeatureDescription,links:[{text:o.microsoftAccount,url:o.microsoftAccountUrl}]}],link:{text:o.trialDialogSeeFeatures,url:o.trialDialogSeeFeaturesUrl}};(new b(e)).show()}function S(){var e=$.extend(!0,m);e.description[0].text=o.trialDialogDisabledDatasetUploadDescription,(new b(e,59)).show()}function x(){var e=$.extend(!0,m);e.description[0].text=o.trialDialogDisabledModuleUploadDescription,(new b(e,59)).show()}function T(e,t){e===void 0&&(e=null),t===void 0&&(t=null);var r=$.extend(!0,m);if(e&&!t){e=e.toLowerCase();var i=l.workspace.applicationCache.moduleCache.getLatestResourceInFamily(e);t=i&&i.name()}if(e&&t){var s=e.slice(e.indexOf(".")+1);r.description=[{text:o.trialDialogDisabledModuleDescriptionNamed,links:[{text:t,url:n.getTopicUrl(f.resurrectDashesInGUID(s))},{text:o.microsoftAccount,url:o.microsoftAccountUrl}]}]}else r.description[0].text=o.trialDialogDisabledModuleDescription;(new b(r,58)).show()}function N(){var e=$.extend(!0,m);e.description[0].text=o.trialDialogDisabledWebServicePublishDescription,(new b(e)).show()}function C(){var e=$.extend(!0,m);e.description[0].text=o.trialDialogDisabledPublishToCommunityDescription,(new b(e)).show()}function k(e){e===void 0&&(e=null),e=e||a.getMaxNumberOfModules();var t=null;a.getWorkspaceType()===1?(t={title:o.trialDialogOops,description:[{text:f.format(o.trialDialogExceededModuleCountLimitDescriptionForFree,e.toString(),"{0}","{1}"),links:[{text:o.azureSubscription,url:p},{text:o.standardWorkspace,url:d}]}],link:{text:o.trialDialogLearnMore,url:o.trialDialogLearnMoreUrl}},(new b(t,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup)).show()):(t={title:o.trialDialogOops,description:[{text:f.format(o.trialDialogExceededModuleCountLimitDescription,e.toString(),"{0}","{1}"),links:[{text:o.azureSubscription,url:p},{text:o.standardWorkspace,url:d}]}],link:{text:o.trialDialogLearnMore,url:o.trialDialogLearnMoreUrl}},(new b(t,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup)).show())}function L(e){e===void 0&&(e=null),e=typeof e=="number"&&e||a.getStorageLimit()/Math.pow(2,30);var t={title:o.trialDialogOops,description:[{text:f.format(a.isWorkspaceTypeAnonymous()?o.trialDialogExceededStorageLimitDescriptionAnonymous:o.trialDialogExceededStorageLimitDescription,e.toFixed(0),"{0}"),links:[{text:o.azureSubscription,url:p}]}],link:{text:o.trialDialogLearnMore,url:o.trialDialogLearnMoreUrl}};(new b(t,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup)).show()}function A(){var e={title:o.trialDialogOops,description:[{text:o.trialDialogExceededConcurrentRunLimit,links:[{text:o.azureSubscription,url:p},{text:o.standardWorkspace,url:d}]}],link:{text:o.trialDialogLearnMore,url:o.trialDialogLearnMoreUrl}};(new b(e,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup)).show()}function O(){var e=null;a.getWorkspaceType()===1?(e={title:o.trialDialogOops,description:[{text:o.trialDialogParallelRunDisabledDescriptionForFree,links:[{text:o.azureSubscription,url:p},{text:o.standardWorkspace,url:d}]}],link:{text:o.trialDialogLearnMore,url:o.trialDialogLearnMoreUrl}},(new b(e,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup)).show()):(e={title:o.trialDialogOops,description:[{text:o.trialDialogParallelRunDisabledDescription,links:[{text:o.microsoftAccount,url:o.microsoftAccountUrl}]}],link:{text:o.trialDialogLearnMore,url:o.trialDialogLearnMoreUrl}},(new b(e,65)).show())}function M(e){e===void 0&&(e=null),e=e||a.getModuleRunTimeLimit();var t=null;a.getWorkspaceType()===1?(t={title:o.trialDialogOops,description:[{text:f.format(o.trialDialogExceededModuleRuntimeLimitDescriptionForFree,e.toString(),"{0}","{1}"),links:[{text:o.azureSubscription,url:p},{text:o.standardWorkspace,url:d}]}],link:{text:o.trialDialogLearnMore,url:o.trialDialogLearnMoreUrl}},(new b(t,60,null,ExperimentEditorTemplates._limitedFeatureDialogMarkup)).show()):(t={title:o.trialDialogOops,description:[{text:f.format(o.trialDialogExceededModuleRuntimeLimitDescription,e.toString(),"{0}"),links:[{text:o.microsoftAccount,url:o.microsoftAccountUrl}]}],link:{text:o.trialDialogLearnMore,url:o.trialDialogLearnMoreUrl}},(new b(t,63)).show())}function _(e){if(e instanceof f.AjaxError){var t=e.xmlHttpRequest,r=new a.RestrictedFeatureError(t);switch(r.feature){case i.CancellationReason.ExceededStorageLimit:return u.featureUsage({featureID:64,groupID:56}),L(r.value),!0;case i.CancellationReason.ModulesRestriction:switch(r.type){case"MaxLimit":return u.featureUsage({featureID:60,groupID:56}),k(r.value),!0;case"Value":u.featureUsage({featureID:58,groupID:56});var s=r.value?(n.environment.globalWorkspaceId+"."+r.value).toLowerCase():null;return T(s),!0;default:}break;case i.CancellationReason.DatasetRestriction:case i.CancellationReason.CustomModulesRestriction:case i.CancellationReason.WebServicesRestriction:case i.CancellationReason.WorkspaceTypeRestriction:return u.featureUsage({featureID:66,groupID:56}),E(),!0;default:}return!1}return!1}function D(){var e={title:o.trialDialogDisabledFeatureTitle,description:[{text:o.onPremiseNotAvailable}],link:{text:o.trialDialogSeeFeatures,url:o.trialDialogSeeFeaturesUrl}},t={canCloseWithEscape:!0};(new b(e,207,t,ExperimentEditorTemplates._onPremiseDisabledMarkup)).show()}var h=s.FeatureId,p="http://go.microsoft.com/fwlink/?LinkId=524172",d="http://go.microsoft.com/fwlink/?LinkId=524173",v="http://go.microsoft.com/fwlink/?LinkId=524171",m={title:o.trialDialogDisabledFeatureTitle,description:[{text:"",links:[{text:o.microsoftAccount,url:o.microsoftAccountUrl}]}],link:{text:o.trialDialogLearnMore,url:o.trialDialogLearnMoreUrl}},b=function(){function e(e,t,n,i){var s=this;t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=ExperimentEditorTemplates._disabledFeatureDialogMarkup),this._signInFeatureId=61,this._closeFeatureId=62,this._signUpFeatureId=67,this.signIn=function(e,t){u.featureUsage({featureID:s._signInFeatureId,groupID:s._groupId}),window.open("/Home/Free","_self")},this.dismiss=function(e,t){u.featureUsage({featureID:s._closeFeatureId,groupID:s._groupId}),s._dialog&&s._dialog.close(t)},this.signUp=function(e,t){u.featureUsage({featureID:s._signUpFeatureId,groupID:s._groupId}),window.open(v,"_blank"),s._dialog&&s._dialog.close(t)},this.title=e.title,this.description=e.description.map(y),this.link=e.link,this._groupId=t,this._dialog=new r.StrippedDialog(n),this._templateMarkup=i}return e.prototype.show=function(){this._dialog.show(this,this._templateMarkup,["430px",null])},e}();t.showExpiredTrialDialog=w,t.showDisabledFeatureDialog=E,t.showDisabledDatasetUploadDialog=S,t.showDisabledModuleUploadDialog=x,t.showDisabledModuleDialog=T,t.showDisabledWebServicePublishDialog=N,t.showDisabledPublishToCommunityDialog=C,t.showExceededNumberOfModulesLimitDialog=k,t.showExceededStorageLimitDialog=L,t.showExceededConcurrentRunLimitDialog=A,t.showParallelRunDisabledDialog=O,t.showExceededRuntimeLimitDialog=M,t.tryShowDialogForTrialRestriction=_,t.showOnPremiseDisabledDialog=D});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Dialogs/DataGatewayDialogViewModels",["require","exports","../../../TS/Global","../../../../DataLabClient/Contracts/V1/DataGatewayBackend","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Validation","./TrialDialogs","../../../../DataLabClient/Features","../../../../DataLabClient/Model/WorkspaceSettings","../../../../DataLabClient/Trial"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function m(){if(n.CurrentBrowser===2||n.CurrentBrowser===3||n.CurrentBrowser===4||n.CurrentBrowser===5||window.navigator.userAgent.toUpperCase().indexOf(".NET CLR 3.5")>=0)return!0;var e=window.navigator.mimeTypes;for(var t=0;t<e.length;t++)if(e[t].type.ToUpperCase&&e[t].type.ToUpperCase()==="APPLICATION/X-MS-APPLICATION")return!0;return!1}var p=function(e){function t(t,n){var r=this;e.call(this),this.description=ko.observable(""),this.gatewayCreated=!1,this.nameEnabled=ko.observable(!0),this.gatewayRegistrationKey=ko.observable(""),this.backend=t,this.onClose=n,this.gatewayName=a.asyncValidatableObservable(ko.observable(""),function(e){return e.length<3?$.Deferred().resolve(s.nameTooShort).promise():e.length>150?$.Deferred().resolve(s.nameTooLong).promise():/^[a-zA-Z0-9\-\_]*$/.test(e)?r.backend.nameAvailable(e).then(function(e){return e?null:s.nameAlreadyInUse}):$.Deferred().resolve(s.dataGatewayNameInvalid).promise()});var i=new $.fxs.fxsWizard.WizardStep;i.contentTemplateOptions({name:u.initializeTemplateIfNecessary("NewDataGatewayStep1Template",ExperimentEditorTemplates._newDataGatewayStep1Markup),data:this}),i.title(s.newDataGatewayNameWizardTitle);var f=new d(this.backend,this.gatewayName,0,this.gatewayRegistrationKey);this.registerForDisposal(f);var l=f.createWizardStep();this.wizard=$("<div/>").fxsWizard({closing:function(e){return r.onClose&&r.onClose(r.gatewayCreated?r.gatewayName():null),r.dispose(),!0},stepMoveNext:function(e){return r.gatewayCreated?!0:(r.nameEnabled(!1),r.wizardViewModel.lockOrUnlockNextSteps(!0),r.gatewayName.startValidating(),r.gatewayName.completeValidation().then(function(){r.gatewayName.isValid()?r.backend.createGateway(r.gatewayName(),r.description()).then(function(e){r.gatewayCreated=!0,r.gatewayRegistrationKey(e.RegistrationKey),r.wizardViewModel.lockOrUnlockNextSteps(!1),r.wizard.fxsWizard("setCurrentStep",l)},function(e){r.nameEnabled(!0),r.wizardViewModel.lockOrUnlockNextSteps(!1),o.error("Gateway create failed. ",e.toString())}):(r.nameEnabled(!0),r.wizardViewModel.lockOrUnlockNextSteps(!1))},function(e){r.nameEnabled(!0),r.wizardViewModel.lockOrUnlockNextSteps(!1),o.error("Gateway name validation failed. ",e.toString())}),!1)},size:[500,600]}),this.wizardViewModel=this.wizard.fxsWizard("getViewModel");var c=[i,l];this.wizardViewModel.steps(c)}return __extends(t,e),t.prototype.show=function(){if(l.onPremiseSqlNotAvailablePopUpEnabled()&&!c.WorkspaceTypeExtensions.isProduction(h.getWorkspaceType())){f.showOnPremiseDisabledDialog(),this.onClose&&this.onClose(null),this.dispose();return}this.wizard.fxsWizard("open"),Impl.UI.Dialogs.ModalPresenter.open(this.wizard)},t}(i.Disposable);t.NewDataGatewayWizardViewModel=p;var d=function(e){function t(t,n,r,s){var u=this;e.call(this),this.refreshingStatusInternal=!1,this.isPolling=!1,this.backend=t,this.gatewayName=n,this.gatewayRegistrationKey=s?s:ko.observable(""),this.gatewayStatus=ko.observable(r),this.refreshingStatus=ko.observable(!1),this.registered=ko.computed(function(){return u.statusIsRegistered(u.gatewayStatus())}),this.gatewayHost=ko.observable(null),this.installLocalUrl=ko.observable(null),this.transitionedToRegistered=ko.observable(!1),this.registerForDisposal(new i.DisposableSubscription(this.gatewayStatus.subscribe(function(e){u.statusIsRegistered(e)&&(u.gatewayRegistrationKey()!==null&&u.transitionedToRegistered(!0),u.stopPolling())}))),this.regeneratingKey=ko.observable(!1),this.registerForDisposal(new i.DisposableSubscription(this.gatewayRegistrationKey.subscribe(function(e){u.installLocalUrl(null);if(!e||e==="")return;m()&&!1&&u.backend.getExpressInstallLink(u.gatewayName(),e).then(function(e){u.installLocalUrl(e)},function(e){o.error("Gateway get click once express install link failed. ",e.toString())}),u.ensurePolling()}))),!this.registered()&&!s&&this.regenerateKey()}return __extends(t,e),t.prototype.statusIsRegistered=function(e){return e===2||e===4||e===3},t.prototype.regenerateKey=function(){var e=this;this.regeneratingKey(!0),this.backend.generateRegistrationKey(this.gatewayName()).then(function(t){e.regeneratingKey(!1),e.gatewayStatus(1),e.gatewayRegistrationKey(t)})},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.stopPolling()},t.prototype.ensurePolling=function(){if(this.isPolling)return;this.isPolling=!0,this.refreshingStatusInternal||this.refreshStatusInternal()},t.prototype.stopPolling=function(){this.isPolling=!1},t.prototype.refreshDone=function(e){var t=this;this.gatewayStatus(e.Status),this.gatewayHost(e.Host),this.refreshingStatus(!1),this.refreshingStatusInternal=!1,this.isPolling&&(clearTimeout(this.refreshTimeoutID),this.refreshTimeoutID=setTimeout(function(){t.isPolling&&!t.refreshingStatusInternal&&t.refreshStatusInternal()},6e3))},t.prototype.refreshStatus=function(){this.refreshingStatus(!0),this.refreshStatusInternal()},t.prototype.refreshStatusInternal=function(){if(this.refreshingStatusInternal)return;this.refreshingStatusInternal=!0,clearTimeout(this.refreshTimeoutID),this.backend.getGateway(this.gatewayName()).then(this.refreshDone.bind(this))},t.prototype.createWizardStep=function(){var e=new $.fxs.fxsWizard.WizardStep,t="DataGatewayDownloadAndRegisterTemplate";return e.contentTemplateOptions({name:u.initializeTemplateIfNecessary(t,'<script type="text/ html" id="'+t+'">'+ExperimentEditorTemplates._dataGatewayDownloadAndRegisterMarkup+"</script>"),data:this}),e.title(s.dataGatewayDownloadAndRegisterTitle),e},t.prototype.dismissed=function(e){this.stopPolling(),this.afterDialogClose&&this.afterDialogClose()},t}(i.Disposable);t.DataGatewayDownloadAndRegisterViewModel=d;var v=function(){function e(e,t,n,r){this.backend=e,this.gatewayName=t,this.afterUpdate=r,this.gatewayDescription=ko.observable(n)}return e.prototype.dismissed=function(e){e.accepted&&(this.backend.updateGateway(this.gatewayName,this.gatewayDescription()),this.afterUpdate())},e}();t.DataGatewayDescriptionDialogViewModel=v,t.clickOnceApplicationLikelyToWork=m}),Object.defineProperty(Array.prototype,"stableSort",{enumerable:!1}),document.documentElement.setAttribute("style","height:100%"),define("monaco.config",function(){}),define("monacoadditions",["monaco.config","vs/editor/editor.main"],function(){var e;(function(e){var t;(function(t){var n={displayName:"Hive Query Language",name:"ml-hql",mimeTypes:["text/x-hql"],fileExtensions:["hql"],ignoreCase:!0,lineComment:"--",defaultToken:"invalid",autoClosingPairs:[['"','"'],["'","'"],["(",")"],["[","]"],["{","}"]],keywords:["TRUE","FALSE","ALL","AND","OR","NOT","LIKE","IF","EXISTS","ASC","DESC","ORDER","BY","GROUP","WHERE","FROM","AS","SELECT","DISTINCT","INSERT","OVERWRITE","OUTER","INNER","UNIQUEJOIN","PRESERVE","JOIN","LEFT","RIGHT","FULL","ON","PARTITION","PARTITIONS","TABLE","TABLES","FUNCTIONS","SHOW","MSCK","DIRECTORY","LOCAL","TRANSFORM","USING","CLUSTER","DISTRIBUTE","SORT","UNION","LOAD","DATA","INPATH","IS","NULL","CREATE","EXTERNAL","ALTER","DESCRIBE","DROP","RENAME","TO","COMMENT","DATE","DATETIME","ARRAY","STRUCT","MAP","REDUCE","PARTITIONED","CLUSTERED","SORTED","INTO","BUCKETS","ROW","FORMAT","DELIMITED","FIELDS","TERMINATED","ESCAPED","COLLECTION","ITEMS","KEYS","$KEY$","LINES","STORED","SEQUENCEFILE","TEXTFILE","RCFILE","INPUTFORMAT","OUTPUTFORMAT","LOCATION","TABLESAMPLE","BUCKET","OUT","OF","CAST","ADD","REPLACE","COLUMNS","RLIKE","REGEXP","TEMPORARY","FUNCTION","EXPLAIN","EXTENDED","SERDE","WITH","SERDEPROPERTIES","LIMIT","SET","TBLPROPERTIES","$VALUE$","$ELEM$","CASE","WHEN","THEN","ELSE","END","MAPJOIN","STREAMTABLE","CLUSTERSTATUS","UTC","UTC_TMESTAMP","LONG","DELETE","PLUS","MINUS","FETCH","INTERSECT","VIEW","IN","DATABASE","MATERIALIZED","SCHEMA","SCHEMAS","GRANT","REVOKE","SSL","UNDO","LOCK","UNLOCK","PROCEDURE","UNSIGNED","WHILE","READ","READS","PURGE","RANGE","ANALYZE","BEFORE","BETWEEN","BOTH","BINARY","CROSS","CONTINUE","CURSOR","TRIGGER","RECORDREADER","RECORDWRITER","REGEXP_REPLACE","COUNT","SUM","AVG","MIN","MAX","VARIANCE","VAR_POP","VAR_SAMP","STDDEV_POP","STDDEV_SAMP","COVAR_POP","COVAR_SAMP","CORR","PERCENTILE","PERCENTILE_APPROX","HISTOGRAM_NUMERIC","COLLECT_SET","EXPLODE","JSON_TUPLE"],autoComplete:[],typeKeywords:["TINYINT","SMALLINT","INT","BIGINT","BOOLEAN","FLOAT","DOUBLE","STRING","BINARY","TIMESTAMP"],operators:["=","<=>","==","<>","!=","<","<=",">",">="],symbols:"[=><!~?:&|+\\-*\\/\\^%]+",escapes:"\\\\(?:[abfnrtv\\\\'']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})",tokenizer:{root:[["[a-z_][\\w]*",{cases:{"@typeKeywords":"typeKeyword","@keywords":"keyword","@default":"identifier"}}],["[A-Z][\\w\\$]*","type.identifier"],{include:"@whitespace"},["[{}()\\[\\]]","@brackets"],["[<>](?!@symbols)","@brackets"],["@symbols",{cases:{"@operators":"operator","@default":""}}],["\\${hiveconf:(in|out).[a-zA-Z1-9_]*}",{token:"tablename"}],["\\d*\\.\\d+([eE][\\-+]?\\d+)?","number.float"],["0[xX][0-9a-fA-F]+","number.hex"],["\\d+","number"],["[;,.]","delimiter"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/'/,"string","@string.'"]],string:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]],whitespace:[[/[ \t\r\n]+/,"white"],[/--.*$/,"comment"]]}};Monaco.Editor.createCustomMode(n),window.MonacoExtensions=e})(t=e.Languages||(e.Languages={}))})(e||(e={}))}),define("generated/editor/TS/View/CustomBindingHandlers/Monaco",["require","exports","../../../TS/Global","../../../../DataLabClient/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o){function f(e){switch(e){case u.Hive:return a.Hive;default:return e}}var u;(function(e){e.R="text/x-r",e.Python="text/x-python",e.Hive="text/x-hql",e.Sql="text/x-sql",e.PlainText="text/plain",e.JavaScript="text/javascript",e.TypeScript="text/typescript"})(u=t.MonacoMimeTypes||(t.MonacoMimeTypes={}));var a;(function(e){e.Hive="ml-hql"})(a=t.MonacoModes||(t.MonacoModes={})),t.showCharacterCounterThreshold=500,ko.bindingHandlers.monaco={init:function(u,a,l,c,h){e(["monacoadditions"],function(){var l=ko.utils.unwrapObservable(a()),h=ko.utils.unwrapObservable(l.value),p=ko.utils.unwrapObservable(l.mimetype);h=h===null?"":h;var d;i.monacoVersionUpdateEnabled()?d=Monaco.Editor.EventType:d=e("vs/editor/core/constants").EventType;var v={value:h,mode:f(p),glyphMargin:!1,readOnly:!1,lineNumbersMinChars:2,automaticLayout:!0,scrollBeyondLastLine:!1,insertSpaces:l.insertSpaces},m=Monaco.Editor.create(u,v);ko.utils.domNodeDisposal.addDisposeCallback(u,function(){if(m){x();try{var e=m.getContribution("editor.contrib.contextmenu"),t=e&&e.contextViewService&&e.contextViewService.contextView;t&&t.isVisible&&t.isVisible()&&t.hide&&t.hide()}catch(n){o.exception("closing monaco context menu: "+String(n))}setTimeout(function(){try{m.destroy()}catch(e){o.exception("destroying monaco: "+String(e))}m=null},100)}}),$(u).find(".monaco-editor").css("background-color","transparent");var g=m.getModel(),y=g.getValue(),b=l.value.subscribe(function(e){y!=e&&(y=e,!g.isDisposed()&&g.getValue()!==e&&g.setValue(e))});ko.utils.domNodeDisposal.addDisposeCallback(u,function(){b.dispose()});var w=function(){var e=r.maxScriptSize-g.getValue().length;e<=t.showCharacterCounterThreshold?$(".characterCountMessage").show():$(".characterCountMessage").hide(),e<0?($(".maxCharacterCount").html(Math.abs(e).toString()),$(".characterCountMessage").addClass("overCharacterLimit"),$(".characterCountText").html(s.charactersOverLimit)):($(".maxCharacterCount").html(e.toString()),$(".characterCountMessage").removeClass("overCharacterLimit"),$(".characterCountText").html(s.charactersLeft))};w(),g.addListener(d.ModelContentChanged,function(e){w(),l.value(g.getValue())});var E=$(".propertyEditorContainer").parent().width(),S=n.rScriptEditorFocusWidth,x=function(){var e=$(".propertyEditorContainer").parent(),t=$(".experiment-container-right"),r=$(".quickHelpContainer"),i=u.parentElement.collapseResizeManager;if($.contains(u,Shell.Utilities.getDocumentActiveElement())){if(e.length>0&&t.length>0){E=e.width();if(E<n.rScriptEditorFocusWidth){var s=n.rScriptEditorFocusWidth;e.width(s);while(e[0].getBoundingClientRect().left<t[0].getBoundingClientRect().left){s-=10;if(s<E){e.width(E);break}e.width(s)}}S=e.width()}if(r.length>0&&i){var o=r[0].getBoundingClientRect().bottom-r[0].getBoundingClientRect().height-25,a=n.rScriptEditorFocusHeight;i.resize(a);var o=r[0].getBoundingClientRect().bottom-r[0].getBoundingClientRect().height;while(o<u.parentElement.getBoundingClientRect().bottom){a-=10;if(a<i.minSize){i.resize(i.minSize);break}i.resize(a)}}c.focus(!0)}else i&&i.resize(i.minSize),e.length>0&&e.width()===S&&e.width(E),c.focus(!1)};l.expandOnFocus&&(m.addListener("focus",function(){o.featureUsage({featureID:150,groupID:148}),x()}),m.addListener("blur",function(){x()})),$(u).closest(".scriptEditorDialogWindow").length&&$(u).find(".inputarea").focus()})},update:function(e,t){}}}),define("generated/editor/TS/View/ChatControl",["require","exports"],function(e,t){function n(){var e=document.querySelector(".chat-support");e&&ko.applyBindings(r.getInstance(),e);var t=document.querySelector(".chat-support-link-in-help-dropdown");t&&ko.applyBindings(r.getInstance(),t)}t.initChatControl=n;var r=function(){function e(){this.showChatButton=ko.observable(!0),this.isVisible=ko.observable(!1),this.chatbotUrl=ko.computed(function(){var e="";window.environment&&window.environment.chatbotPath&&(e=window.environment.chatbotPath);var t=window.getRefreshedWorkspaceModel(),n="",r="",i="";return t&&(n=encodeURIComponent(t.UserWorkspace.User.Name),r=encodeURIComponent(t.UserWorkspace.User.Email),i=t.ChatbotToken),"https://webchat.botframework.com/embed/"+e+"?t="+i+"&username="+n+"&userid="+r});if(e._instance)throw new Error("Chat view model can only be instatiated once, use getter to access singleton");$("#chat-control").html(ExperimentEditorTemplates._chatControlMarkup);var t=document.querySelector("#chat-control");ko.applyBindings(this,t)}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.toggle=function(){this.isVisible(!this.isVisible())},e}();t.ChatViewModel=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/ModuleErrorViewModel",["require","exports","../../../TS/View/ChatControl","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/Help","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/Util","../../../../DataLabClient/Features"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){function t(t,s,l){var c=this;e.call(this),this.errorInfo=ko.observable(new u.ErrorLogInfo),this.errorHelpLink=ko.observable(""),this.errorLinkLabel=ko.observable(""),this.showingDetails=ko.observable(!1),this.errorInfo().updateErrorLogInfo(t,s,l),this.dialogHeading=s+o.moduleErrorTitle,this.errorDetails=ko.observable(this.errorInfo().errorMessage()+"\n"+o.moduleErrorStartTime+this.errorInfo().startTime()+"\n"+o.moduleErrorEndTime+this.errorInfo().endTime()),this.errorDescription=ko.observable(this.errorInfo().trimmedErrorMessage()),this.chatVisible=ko.computed(function(){return f.chatSupportEnabled()}),this.errorInfo().errorId()!==""&&(this.errorLinkLabel(a.format(o.errorId,this.errorInfo().errorId())),this.errorHelpLink(r.errorHelpLinkGuidStart+this.errorInfo().errorId()+r.errorHelpLinkGuidEnd)),this.launchErrorHelp=function(){i.openHelpWindow(c.errorHelpLink())},this.toggleChat=function(){n.ChatViewModel.getInstance().toggle()},this.launchForum=function(){var e=window.open(o.errorForumLink,"_blank");e&&e.focus()}}return __extends(t,e),t}(s.Disposable);t.ModuleErrorViewModel=l}),define("generated/editor/TS/ViewModel/DataConnect/ParameterMap",["require","exports"],function(e,t){var n;(function(e){e.SqlSubscription="SQL Subscription",e.BlobSubscription="Blob Subscription",e.TableSubscription="Table Subscription",e.DatabaseServerName="Database Server Name",e.DatabaseName="Database Name",e.TableAccountName="Table Account Name",e.TableAccountKey="Table Account Key",e.BlobAccountName="Account Name",e.BlobAccountKey="Account Key",e.SpecifyDataSource="Please Specify Data Source",e.SpecifyBlobAuthentication="Please Specify Authentication Type",e.SpecifyTableAuthentication="Please Specify Table Authentication Type"})(n=t.ParameterNames||(t.ParameterNames={}));var r;(function(e){e.Http="Http",e.HiveQuery="HiveQuery",e.SqlAzure="SqlAzure",e.AzureTable="AzureTable",e.AzureBlobStorage="AzureBlobStorage",e.DataFeedProvider="PowerQuery",e.OnPremiseSqlDatabase="OnPremisesSqlDatabase",e.DocumentDB="DocumentDB"})(r=t.DataSourceNames||(t.DataSourceNames={})),t.DataSourceCustomDisplayNames={HiveQuery:"Hive",SqlAzure:"Database Query",AzureTable:"import from Azure Table",AzureBlobStorage:"import from Azure Blob",DocumentDB:"DocumentDB Query",OnPremisesSqlDatabase:"Database Query"},function(e){e[e.Subscription=0]="Subscription",e[e.AccountName=1]="AccountName",e[e.AccountKey=2]="AccountKey",e[e.Other=3]="Other"}(t.ParameterType||(t.ParameterType={}));var i=t.ParameterType,s;(function(e){e.SubscriptionEnterManually="Enter values manually...",e.MaskedValue="********"})(s=t.ParameterValues||(t.ParameterValues={})),t.ReaderParameterMap={parameters:{"SQL Subscription":{pageIndex:2,customParameterViewModel:!0},"Blob Subscription":{pageIndex:2,customParameterViewModel:!0},"Table Subscription":{pageIndex:2,customParameterViewModel:!0},"Please Specify Data Source":{pageIndex:2},URL:{pageIndex:2},"Data format":{pageIndex:2},"CSV or TSV has Header Row":{pageIndex:2},"Database Server Name":{pageIndex:2,armCacheDependency:n.SqlSubscription,customParameterViewModel:!0},"Database Name":{pageIndex:2,armCacheDependency:n.DatabaseServerName,customParameterViewModel:!0},"Server User Account Name":{pageIndex:2},"Server User Account Password":{pageIndex:2},"Trust Server Certificate":{pageIndex:2},"Database Query":{pageIndex:3},"Please Specify Authentication Type":{pageIndex:2},URI:{pageIndex:2},"Account Name":{pageIndex:2,armCacheDependency:n.BlobSubscription,customParameterViewModel:!0},"Account Key":{pageIndex:2,armCacheDependency:n.BlobAccountName,customParameterViewModel:!0},"Path to container or directory or blob":{pageIndex:2},"File format":{pageIndex:3},"Blob File format":{pageIndex:3},"Column delimiter":{pageIndex:3},"Encoding Format":{pageIndex:3},"Excel data format":{pageIndex:3},"Excel sheet or embedded table name":{pageIndex:3},"File has Header Row":{pageIndex:3},"URI file has Header Row":{pageIndex:3},"Please Specify Table Authentication Type":{pageIndex:2},"Table URI":{pageIndex:2},"Table Account Name":{pageIndex:2,armCacheDependency:n.TableSubscription,customParameterViewModel:!0},"Table Account Key":{pageIndex:2,armCacheDependency:n.TableAccountName,customParameterViewModel:!0},"Table name":{pageIndex:2},"Rows to scan for Property names":{pageIndex:3},"Rows count for TopN":{pageIndex:3},"Rows to scan for Property names via SAS":{pageIndex:3},"Rows count for TopN via SAS":{pageIndex:3},"Hive Database Query":{pageIndex:3},"HCatalog Server Uri":{pageIndex:2},"Hadoop User Account Name":{pageIndex:2},"Hadoop User Account Password":{pageIndex:2},"Location Of Output Data":{pageIndex:2},"HDFS Server Uri":{pageIndex:2},"Azure User Account Name":{pageIndex:3},"Azure Storage Key":{pageIndex:3},"Azure Container Name":{pageIndex:3},"Please Specify Data Content Type":{pageIndex:2},"Source URL":{pageIndex:2},"Data Gateway Name":{pageIndex:2},"Onprem Database Server Name":{pageIndex:2},"Onprem Database Name":{pageIndex:2},"User Name and Password":{pageIndex:2},"Onprem Database Query":{pageIndex:3},"DocumentDB Server":{pageIndex:2},"DocumentDB Key":{pageIndex:2},"Azure DocumentDB Server":{pageIndex:2},"Database ID":{pageIndex:2},"Collection ID":{pageIndex:2},"SQL Query":{pageIndex:3},"SQL Query parameters":{pageIndex:3},"Allow Inconsistent Schema":{pageIndex:3}}}}),define("generated/editor/TS/ViewModel/Dialogs/ScriptVersionChangeDialogViewModel",["require","exports","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Constants","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o){var u=function(){function e(e,t,r,i){this.parameter=e,this.oldVersion=r,this.newVersion=i,this.scriptType=t===n.ModuleParameterName.PythonVersion?"Python":"R",this.warningLabel=o.format(s.scriptVersionChangeWarning,this.scriptType,this.newVersion),this.dataToLog=JSON.stringify({scriptType:this.parameter.name,oldVersion:this.oldVersion,newVersion:this.newVersion})}return e.prototype.dismissed=function(e){e.accepted?(i.featureUsage({featureID:215,groupID:213,data:this.dataToLog}),this.parameter.parent.parent.setModuleVersionInGraph(this.parameter.name,this.newVersion)):(i.featureUsage({featureID:216,groupID:213,data:this.dataToLog}),this.parameter.silentlyUpdateValue(this.oldVersion))},e.prototype.canBeAccepted=function(){return!0},e}();t.ScriptVersionChangeDialogViewModel=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/TwoPaneColumnPickerViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/ColumnPickerViewModel","../../../../DataLabClient/Model/ColumnPickerQuery","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f=r.ColumnSelection,l=function(e){function t(r,i,u){var f=this;e.call(this,r,i,u),this.selectedColumns=ko.observableArray(),this.chosenSelectedColumns=ko.observableArray(),this.chosenAvailableColumns=ko.observableArray(),this.availableColumnsFilterText=ko.observable().extend({rateLimit:{timeout:500,method:"notifyWhenChangesStop"}}),this.selectedColumnsFilterText=ko.observable().extend({rateLimit:{timeout:500,method:"notifyWhenChangesStop"}}),this.disabledText=a.deferredPureComputed(function(){if(!f.hasSchema()||f.schemaIsInaccurate())return o.columnPickerByNameDisabledError;if(f.schema&&f.schema.columnAttributes.length>t.MAX_COLUMNS_SUPPORTED_BY_VIEW)return a.format(o.columnPickerTooLargeDatasetError,String(t.MAX_COLUMNS_SUPPORTED_BY_VIEW));if(f.allowDuplicates())return a.format(o.columnPickerByNameDisallowDuplicates,o.allowDuplicatesInSelectionLabel);return}),this.isEnabled=a.deferredPureComputed(function(){return!f.disabledText()}),this.rulesUsesSelectionByName=a.deferredPureComputed(function(){return f.rules().length===1&&n.RuleType.equals(n.RuleType.ColumnNames,f.rules()[0].ruleType())}),this.removeColumnsDisabled=a.deferredPureComputed(function(){return f.chosenSelectedColumns().length===0}),this.chooseColumnsDisabled=a.deferredPureComputed(function(){return f.singleColumnSelection()?f.selectedColumns().length>0||f.chosenAvailableColumns().length!==1:f.chosenAvailableColumns().length===0}),this.filterTextPlaceholder=ko.observable(o.columnPickerSearchColumns),this.availableTypesFromSchema=ko.observable(new a.StringSet),this.availableTypes=a.deferredPureComputed(function(){return["All Types"].concat(f.availableTypesFromSchema().toArray())}),this.availableColumnsFilterType=ko.observable(),this.selectedColumnsFilterType=ko.observable(),this.columnNameToAttributesMap=Object.create(null),this.availableColumnsStatusText=a.deferredPureComputed(function(){var e=f.availableColumns().length,t=f.availableColumnsAfterFiltering().length;return e===t?a.format(o.columnPickerColumnsAvailable,String(e)):a.format(o.columnPickerColumnsAvailableShowing,String(e),String(t))}),this.selectedColumnsStatusText=a.deferredPureComputed(function(){var e=f.selectedColumns().length,t=f.selectedColumnsAfterFiltering().length;return e===t?a.format(o.columnPickerColumnsSelected,String(e)):a.format(o.columnPickerColumnsSelectedShowing,String(e),String(t))}),this.setFromRule=function(e){if(e){var t=_.clone(e.selectedColumns());f.selectedColumns(t)}else f.selectedColumns([])},this.selectColumns=function(){var e=f.selectedColumns().concat(f.chosenAvailableColumns());f.selectedColumns(e)},this.unselectColumns=function(){var e=new a.StringSet(f.selectedColumns());e.exceptWith(f.chosenSelectedColumns()),f.selectedColumns(e.toArray())},u&&u.columnAttributes.forEach(function(e){f.columnNameToAttributesMap[e.name]=e,f.availableTypesFromSchema().add(e.type)});if(!r()){this.startingChoice(n.RuleType.NoColumns);var l=new n.ColumnPickerRule(n.RuleType.ColumnNames,this,[],[],[],[]);this.registerForDisposal(l),this.rules([l])}this.rule=a.deferredPureComputed(function(){var e=f.rules();return f.isEnabled()?e[0]:null}),this.wasSetWithRules=!this.isEnabled()||!this.rulesUsesSelectionByName()||!this._selectionIsValid()||this.uiData&&this.uiData.withRules,this.rule()&&!this.wasSetWithRules&&this.setFromRule(this.rule()),this.registerForDisposal(new s.DisposableSubscription(this.selectedColumns.subscribe(function(e){if(!f.isEnabled())return;var t=_.clone(f.selectedColumns());f.rule().selectedColumns(t)}))),this.selectedColumnsAfterFiltering=a.deferredPureComputed(function(){var e=_.clone(f.selectedColumns());f.selectedColumnsFilterText()&&(e=e.filter(function(e){return e.toLocaleLowerCase().indexOf(f.selectedColumnsFilterText().toLocaleLowerCase())!==-1}));var t=f.selectedColumnsFilterType();return t!=="All Types"&&(e=e.map(function(e){return f.columnNameToAttributesMap[e]}).filter(function(e){return e.type===t}).map(function(e){return e.name})),e}),this.availableColumns=a.deferredPureComputed(function(){var e=new a.StringSet(u.columnAttributes.map(function(e){return e.name}));return e.exceptWith(f.selectedColumns()),e.toArray()}),this.availableColumnsAfterFiltering=a.deferredPureComputed(function(){var e=_.clone(f.availableColumns()),t=f.availableColumnsFilterText();t&&(e=e.filter(function(e){return e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())!==-1}));var n=f.availableColumnsFilterType();return n!=="All Types"&&(e=e.map(function(e){return f.columnNameToAttributesMap[e]}).filter(function(e){return e.type===n}).map(function(e){return e.name})),e}),this.registerForDisposal(new s.DisposableKnockoutObject(this.rule),new s.DisposableKnockoutObject(this.selectedColumnsAfterFiltering),new s.DisposableKnockoutObject(this.availableColumns),new s.DisposableKnockoutObject(this.availableColumnsAfterFiltering),new s.DisposableKnockoutObject(this.disabledText),new s.DisposableKnockoutObject(this.isEnabled),new s.DisposableKnockoutObject(this.rulesUsesSelectionByName),new s.DisposableKnockoutObject(this.removeColumnsDisabled),new s.DisposableKnockoutObject(this.chooseColumnsDisabled),new s.DisposableKnockoutObject(this.availableTypes),new s.DisposableKnockoutObject(this.availableColumnsStatusText),new s.DisposableKnockoutObject(this.selectedColumnsStatusText))}return __extends(t,e),t.prototype.updateForSelectionByName=function(){try{this.rules.remove(function(e){return e.hasError()});var e=this.resolveRulesToColumnNames()}catch(t){e=[],u.error("error resolving column names: "+String(t),undefined,JSON.stringify({stack:t&&t.stack}))}var r=new n.ColumnPickerRule(n.RuleType.ColumnNames,this,e,[],[],[],this.schema);this.registerForDisposal(r),this.startingChoice(n.RuleType.NoColumns),this.rules.splice(0,this.rules().length,r),this.setFromRule(this.rule()),this.availableColumnsFilterType("All Types"),this.availableColumnsFilterText(""),this.selectedColumnsFilterType("All Types"),this.selectedColumnsFilterText("")},t.prototype.updateForSelectionWithRules=function(){this.rule()&&this.rule().currentColumn.validate()},t.prototype.resolveRulesToColumnNames=function(){var e=this;this.allowDuplicates(!1);var t=this.createRulesJSONString(),n=new f(t,this.schema),r=n.includedColumnIndexes.map(function(t){return e.schema.columnAttributes[t].name});return r},t.prototype.saveRulesAndClose=function(t){t||(this.shouldSaveUiData=!0,this.uiData={withRules:!0}),e.prototype.saveRulesAndClose.call(this),t&&(this.selectedColumns().length===0&&this.storedRules(""),u.featureUsage({featureID:193,groupID:27,data:JSON.stringify({selectedCount:this.selectedColumns().length,columnsTotal:this.schema.columnAttributes&&this.schema.columnAttributes.length})}))},t.prototype._selectionIsValid=function(){return this.rules().length===1&&this.rules()[0].invalidColumns().length===0},t.MAX_COLUMNS_SUPPORTED_BY_VIEW=1e4,t}(n.ColumnPickerViewModel);t.TwoPaneColumnPickerViewModel=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/ScriptEditorViewModel",["require","exports","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../../DataLabClient/Disposable"],function(e,t,n,r){var i=function(e){function t(t,r){e.call(this);var i=new n.ScriptEditorParameterViewModel(t,r);return i}return __extends(t,e),t}(r.Disposable);t.ScriptEditorViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/PropertyEditorControl/PropertyViewModel",["require","exports","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/ColumnPickerViewModel","../../../TS/ViewModel/ExperimentEditor/CustomUX","../../../TS/ViewModel/Dialogs/DataGatewayDialogViewModels","../../../TS/View/DialogViewFactories","../../../TS/View/CustomBindingHandlers/Monaco","../../../TS/ViewModel/ExperimentEditor/ModuleErrorViewModel","../../../TS/ViewModel/DataConnect/ParameterMap","../../../TS/ViewModel/Dialogs/ScriptVersionChangeDialogViewModel","../../../TS/ViewModel/ExperimentEditor/TwoPaneColumnPickerViewModel","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Contracts/V1/DataGatewayBackend","../../../../DataLabClient/Constants","../../../../DataLabClient/Model/DatasetNode","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/Model/ModuleParameterDescriptor","../../../../DataLabClient/Model/Parameter","../../../../DataLabClient/Model/Property","../../../../DataLabClient/Model/SchemaPropagationRule","../../../../DataLabClient/Util","../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){function q(e){return e!==u.MonacoMimeTypes.PlainText}function R(e){e=e.toLowerCase().trim();var t=e?(e.match(/\.[0-9a-z]+$/)||[""])[0]:"",n=null;switch(t){case".r":n=u.MonacoMimeTypes.R;break;case".py":n=u.MonacoMimeTypes.Python;break;case".hql":n=u.MonacoMimeTypes.Hive;break;case".ql":n=u.MonacoMimeTypes.Hive;break;case".sql":n=u.MonacoMimeTypes.Sql;break;case".js":n=u.MonacoMimeTypes.JavaScript;break;case".ts":n=u.MonacoMimeTypes.TypeScript;break;default:n=u.MonacoMimeTypes.PlainText}return n}(function(e){e[e.Textbox=0]="Textbox",e[e.Checkbox=1]="Checkbox",e[e.Textarea=2]="Textarea",e[e.Select=3]="Select",e[e.Link=4]="Link",e[e.Button=5]="Button",e[e.Credential=6]="Credential",e[e.ColumnPicker=7]="ColumnPicker",e[e.ParameterRange=8]="ParameterRange",e[e.EditableText=9]="EditableText",e[e.MultiSelect=10]="MultiSelect",e[e.DataGatewaySelector=11]="DataGatewaySelector"})(t.PropertyItemType||(t.PropertyItemType={}));var k=t.PropertyItemType,L=function(e){function t(t,n){n===void 0&&(n=null),e.call(this),this.childParameters=ko.observableArray(),this.property=t,this.originalPropertyValue=t.value(),t instanceof S.ModuleNodeParameter&&(this.originalValueType=t.valueType),this.isStaticContent=ko.observable(!1),this.type=null,this.currentError=ko.observable(""),this._isExperimentLevel=ko.observable(t instanceof S.WebServiceParameter);var r=t instanceof S.ModuleNodeParameter&&t.descriptor instanceof E.ModeModuleParameterDescriptor;this.isLinkable=!r,this.focus=ko.observable(!1),this.templateType=ko.observable(null),this.linkedParameterName=ko.computed(function(){if(t instanceof S.ModuleNodeParameter){var e=t.linkedWebServiceParameter();if(e)return e.name}return""}),this.readOnlyMode=n&&n.readOnlyMode||ko.observable(!1),this._menuBuilder=n&&n.menuBuilder||null,this._webServiceParameterMenuBuilder=n&&n.webServiceParameterMenuBuilder||null,this.focusLinkedWebServiceParameter=n&&n.focusLinkedWebServiceParameter||null}return __extends(t,e),Object.defineProperty(t.prototype,"isDisabled",{get:function(){throw new Error("PropertyViewModel is abstract.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isExperimentLevel",{get:function(){return this._isExperimentLevel},enumerable:!0,configurable:!0}),t.experimentPropertyFactory=function(e){if(e instanceof x.LinkProperty)return new z(e);if(e instanceof x.StaticProperty)return new J(e);if(e instanceof x.BooleanProperty)return new K(e);throw new Error("Unexpected property type on experiment")},t.prototype.getMenuBuilder=function(){return!this.isExperimentLevel()&&this.isLinkable?this._menuBuilder:this.isExperimentLevel()&&!this.readOnlyMode()?this._webServiceParameterMenuBuilder:null},t.prototype.dispose=function(){this.focusLinkedWebServiceParameter=null,this._menuBuilder=null,this._webServiceParameterMenuBuilder=null,this.readOnlyMode=ko.observable(!1),e.prototype.dispose.call(this)},t}(m.Disposable);t.PropertyViewModel=L;var A=function(e){function t(n,r){var i=this;e.call(this,n,r),this.onKeyReturn=function(e,t){return t.stopPropagation(),t.keyCode===13&&e.focus(!1),!0},this.shouldDisable=ko.observable(!1),this.toolTipText=ko.observable(""),this.autocompleteArray=n.autocompleteArray;if(n.descriptor instanceof E.BooleanModuleParameterDescriptor)this.type=1;else if(n.descriptor instanceof E.MultiChoiceModuleParameterDescriptor)this.type=10;else if(n.descriptor instanceof E.ChoiceModuleParameterDescriptor)this.type=3,g.synchronizeScriptsEnabled()&&n.isScriptVersionParameter&&this.handleScriptVersionParameter(n),n.descriptor instanceof E.ModeModuleParameterDescriptor&&n.childParameters&&N.forEach(n.childParameters,function(e){N.forEach(e,function(e){var n=t.createParameterViewModel(e,r);i.registerForDisposal(n),i.childParameters.push(n)})});else if(n.descriptor instanceof E.ScriptModuleParameterDescriptor){if(!(this instanceof F))throw new Error("Attempted to instantiate PropertyViewModel for Script directly. Use factory method createParameterViewModel instead.");this.type=2}else n.descriptor instanceof E.CredentialModuleParameterDescriptor?this.type=6:n.descriptor instanceof E.ColumnPickerModuleParameterDescriptor?this.type=7:n.descriptor instanceof E.ParameterRangeModuleParameterDescriptor?this.type=8:n.descriptor instanceof E.DataGatewayNameModuleParameterDescriptor?this.type=11:this.type=0;this.linkClass=ko.computed(function(){var e=i.property.isLinked()?"parameterIsLinked ":"parameterIsNotLinked ";return e+"linkStatus propertyEditorButton"}),this._isDisabled=ko.computed(function(){return i.shouldDisable()}),this.templateType(function(){switch(i.type){case 1:return"checkboxParameter";case 3:return"selectParameter";case 2:return"textAreaParameter";case 0:return"inputParameter";case 6:return"credentialParameter";case 7:return"columnPickerParameter";case 8:return"parameterRangeParameter";case 10:return"multiSelectParameter";case 11:return"DataGatewayNameParameter"}}())}return __extends(t,e),t.createParameterViewModel=function(e,n){return e.descriptor instanceof E.ScriptModuleParameterDescriptor?new I(e,n):e.descriptor instanceof E.ColumnPickerModuleParameterDescriptor?new M(e,n):e.descriptor instanceof E.ParameterRangeModuleParameterDescriptor?D.createParameterRangeViewModel(e,n):e.descriptor instanceof E.MultiChoiceModuleParameterDescriptor?new H(e,n):e.descriptor instanceof E.DataGatewayNameModuleParameterDescriptor?new Z(e,n):e.descriptor instanceof E.CredentialModuleParameterDescriptor&&e.name=="User Name and Password"&&e.descriptor.credentialDescriptor&&e.descriptor.credentialDescriptor.CredentialType==="SqlAzureCredential"?new et(e,n):n.dataIngestionWizard&&e.name in f.ReaderParameterMap.parameters&&f.ReaderParameterMap.parameters[e.name].customParameterViewModel?new O(e,n):new t(e,n)},Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._isDisabled},enumerable:!0,configurable:!0}),t.prototype.validate=function(){var e=this.property;return e.validate()},t.prototype.handleScriptVersionParameter=function(e){if(e.parent.parent===null)return;var t=e.parent.parent.getCreateRModules().length>0,n=e.parent.parent.getCustomModules(),r=!1,i=!1;N.forEach(n,function(e){e.module_.moduleLanguage.language==="R"?i=!0:e.module_.moduleLanguage.language==="Python"&&(r=!0)});var s=e.name===h.ModuleParameterName.PythonVersion,u=e.name===h.ModuleParameterName.RVersion;if(s&&r&&g.synchronizeScriptsCustomModulesEnabled()||u&&(i&&g.synchronizeScriptsCustomModulesEnabled()||t)){var a="";t&&i?a="Create R Model or custom":r||i?a="custom":t&&(a="Create R Model"),this.shouldDisable(!0),this.toolTipText(N.format(y.scriptVersionParameterDisabledTooltip,a)),b.featureUsage({featureID:217,groupID:213,data:{scriptType:e.name}});return}if(!e.hasScriptVersionSubscription&&!e.parent.isFromExistingExperiment){var f=e.parent.parent.getScriptVersionForParameter(e.name);f&&e.silentlyUpdateValue(f)}if(!e.hasScriptVersionSubscription){var c;e.value.subscribe(function(e){c=e},undefined,"beforeChange"),e.value.subscribe(function(t){var n=JSON.stringify({scriptType:e.name,oldVersion:c,newVersion:t});b.featureUsage({featureID:214,groupID:213,data:n});if(e.respectScriptVersionSubscription&&e.parent.parent.getScriptVersionParametersByName([e.name]).length>1){var r=new l.ScriptVersionChangeDialogViewModel(e,e.name,c,t);o.ScriptVersionChangeDialog.show(r)}}),e.hasScriptVersionSubscription=!0}},t}(L);t.ParameterViewModel=A;var O=function(e){function t(t,n){var r=this;e.call(this,t,n),this.subscriptionParameterNames=[f.ParameterNames.BlobSubscription,f.ParameterNames.SqlSubscription,f.ParameterNames.TableSubscription],this.linkedParameter=ko.observable(null),this.isCurrentlyPopulating=ko.observable(null),this.subscriptionParameterNames.indexOf(t.name)>=0?this.armParameterType=0:this.armParameterType=3,this.subscriptionParameterNames.indexOf(t.name)>=0&&this.templateType("selectParameter");var i=[new E.ChoiceParameterValue(null)];t.value()&&(t.valueType===h.ModuleParameterValueType.Placeholder?(i.push(new E.ChoiceParameterValue(t.value(),f.ParameterValues.MaskedValue)),t.value.subscribe(function(e){var n=_.find(t.descriptor.choices(),function(t){return t.value==e});n&&n.displayValue==f.ParameterValues.MaskedValue&&(t.valueType=h.ModuleParameterValueType.Placeholder)})):i.push(new E.ChoiceParameterValue(t.value()))),t.descriptor.choices=ko.observableArray(i),this.armParameterType===0&&(this.populatedPromise=this.populateParameter(this,n.workspace)),this.linkedParameter.subscribe(function(e){if(!e.property)return;r.populatedPromise=r.populateParameter(r,n.workspace),r.computeTemplateType=ko.computed(function(){var i=r.templateType();e.armParameterType===0?e.property.value()===f.ParameterValues.SubscriptionEnterManually?r.templateType("inputParameter"):r.templateType("selectParameter"):t.descriptor instanceof E.CredentialModuleParameterDescriptor&&e.templateType()==="inputParameter"?r.templateType("credentialParameter"):r.templateType(e.templateType()),r.templateType()!==i&&r.templateType()==="selectParameter"&&(r.populatedPromise=r.populateParameter(r,n.workspace))}),r.computedDisable=ko.computed(function(){if(r.templateType()==="selectParameter"){if(r.isCurrentlyPopulating()||e.isDisabled())return r.shouldDisable(!0);if(!e.property.value()&&!e.isCurrentlyPopulating())return t.value(""),r.shouldDisable(!0)}return r.shouldDisable(!1)}),e.property.value.subscribe(function(e){e&&r.templateType()==="selectParameter"&&(r.populatedPromise=r.populateParameter(r,n.workspace))})})}return __extends(t,e),t.prototype.populateParameter=function(e,t){var n=this;if(this.isCurrentlyPopulating())return this.populatedPromise;this.isCurrentlyPopulating(!0);var r=e.property,i=[],s=$.Deferred(),o=function(){s.resolve()};i.push(new E.ChoiceParameterValue(null)),r.valueType===h.ModuleParameterValueType.Placeholder&&i.push(new E.ChoiceParameterValue(r.value(),f.ParameterValues.MaskedValue));if(e.armParameterType===0)i.push(new E.ChoiceParameterValue(f.ParameterValues.SubscriptionEnterManually)),r.descriptor.choices(i),t.armCache.subscriptionList.done(function(e){!e||!e.length?r.value(f.ParameterValues.SubscriptionEnterManually):N.forEach(e,function(e){i.splice(i.length-1,0,new E.ChoiceParameterValue(e.subscriptionId,e.displayName))})}).always(o);else{var u=e.linkedParameter(),a,l=$.Deferred();u.populatedPromise.done(function(){u.armParameterType===0?(a=u.property.value(),a?l.resolve():n.setLinkedParameterValue(e,t).always(function(){a=u.property.value(),l.resolve()})):(a=e.linkedParameter().linkedParameter().property.value(),l.resolve())}).fail(o),l.done(function(){if(!a||a===f.ParameterValues.SubscriptionEnterManually)return s.resolve();var n=$.Deferred();[f.ParameterNames.BlobAccountName,f.ParameterNames.TableAccountName].indexOf(e.property.name)>=0?t.armCache.getStorageAccounts(a).done(function(e){var t={};e.forEach(function(e){t[e.name]=e.name}),n.resolve(t)}).fail(o):[f.ParameterNames.BlobAccountKey,f.ParameterNames.TableAccountKey].indexOf(e.property.name)>=0?t.armCache.getStorageAccounts(a).done(function(r){var i=_.find(r,function(t){return t.name===e.linkedParameter().property.value()});if(!i)return s.resolve();t.armCache.getKeysForStorageAccount(i).done(function(e){var t=!1,r={};r[e[0]]=y.dataIngestionPrimaryKey+e[0].substring(0,6)+f.ParameterValues.MaskedValue,r[e[1]]=y.dataIngestionSecondaryKey+e[1].substring(0,6)+f.ParameterValues.MaskedValue,n.resolve(r)}).fail(o)}).fail(o):e.property.name===f.ParameterNames.DatabaseServerName?t.armCache.getServers(a).done(function(e){var t={};e.forEach(function(e){t[e]=e}),n.resolve(t)}).fail(o):e.property.name===f.ParameterNames.DatabaseName?t.armCache.getDatabases(a,e.linkedParameter().property.value()).done(function(e){var t={};e.forEach(function(e){t[e.name]=e.name}),n.resolve(t)}).fail(o):s.resolve(),n.done(function(e){for(var t in e)i.push(new E.ChoiceParameterValue(t,e[t]||t))}).always(o)}).fail(o)}return s.always(function(){n.isCurrentlyPopulating(!1),r.descriptor.choices(i)})},t.prototype.setLinkedParameterValue=function(e,t){var n=$.Deferred(),r=e.property,i=e.linkedParameter();if(!e||!e.property.value()||e.armParameterType===0||!i)return n.resolve();var s=$.Deferred(),o={};return t.armCache.subscriptionList.done(function(e){N.forEach(e,function(e){[f.ParameterNames.BlobAccountName,f.ParameterNames.TableAccountName].indexOf(r.name)>=0?t.armCache.getStorageAccounts(e.subscriptionId).done(function(t){N.forEach(t,function(t){t.name===r.value()&&(o[e.subscriptionId]=!0)})}).always(function(){s.resolve()}):r.name===f.ParameterNames.DatabaseServerName&&t.armCache.getServers(e.subscriptionId).done(function(t){N.forEach(t,function(t){t===r.value()&&(o[e.subscriptionId]=!0)})}).always(function(){s.resolve()}),s.always(function(){o&&Object.keys(o).length===1?i.property.value(Object.keys(o)[0]):i.property.value(f.ParameterValues.SubscriptionEnterManually),n.resolve()})})}).fail(function(){n.resolve()}),n.always(function(){i.property.value()||i.property.value(f.ParameterValues.SubscriptionEnterManually)})},t}(A);t.ArmCacheParameterViewModel=O;var M=function(e){function t(t,n){var s=this;e.call(this,t,n),this.isLinkable=!1,this.launchDisabled=ko.observable(!1);var o=t.descriptor,u=decodeURIComponent(t.value());if(u[0]!=="{"&&u[0]!=="["&&t.descriptor.defaultValue&&t.descriptor.defaultValue!==""){t.setParameterValueWithoutDirtying(encodeURIComponent(JSON.stringify({rules:[]})));var a=new r.ColumnPickerViewModel(t.value,o.singleColumnSelection),f=[];a.rules.removeAll();var l=t.descriptor.defaultValue.split("|");l.forEach(function(e){var t=e.trim().replace(/([A-Z])/g,",$1").split(",").slice(1);t.length===1?t[0]==="All"&&f.push(new r.ColumnPickerRule(r.RuleType.AllColumns,a)):f.push(new r.ColumnPickerRule(r.RuleType.ColumnTypes,a,[],[],[t[0]],[t[1]]))}),f.length>0&&(a.rules(f),f=[]),a.rules().length>0&&t.setParameterValueWithoutDirtying(a.createRulesJSONString()),a.dispose()}this.openColumnPicker=function(){function u(n){if(e.isDisposed)return;Shell.UI.Spinner.hide();if(g.columnPickerRulesRedesignEnabled()){var s=new c.TwoPaneColumnPickerViewModel(t.value,o.singleColumnSelection,n),u=[new i.CustomUXView(ExperimentEditorTemplates._twoPaneColumnPickerMarkup,s,y.columnPickerByName,s.isEnabled,s.disabledText,function(){s.updateForSelectionByName()}),new i.CustomUXView(ExperimentEditorTemplates._columnPickerMarkup,s,y.columnPickerWithRules,undefined,undefined,function(){s.updateForSelectionWithRules()})];s.wasSetWithRules?i.openMultipleViews(u,"450px","900px",undefined,undefined,1):i.openMultipleViews(u,"450px","900px")}else{var a=new r.ColumnPickerViewModel(t.value,o.singleColumnSelection,n),f=ExperimentEditorTemplates._columnPickerOldDesignMarkup;i.open(f,a,"350px","710px")}}s.launchDisabled(!0),Shell.UI.Spinner.show();var e=s,a=null,f=null;t.parent&&(a=t.parent.ports[o.columnPickerFor],f=a.connectedOutputPort);var l=N.when(null);g.schemaPropagationEnabled()?a&&(l=T.computeSchemaOfInputPort(n.workspace,a)):f&&f.schemaEndpoint&&(f.parent instanceof v?l=n.workspace.getDatasetSchema(f.parent.dataset.id):f.parent instanceof w.ModuleNode&&(l=n.workspace.getModuleOutputSchema(f.parent.executedExperimentId,f.parent.id,f.name))),l.done(function(e){u(e)}).fail(function(e){u()}).always(function(){s.launchDisabled(!1)})}}return __extends(t,e),t}(A);t.ColumnPickerParameterViewModel=M;var D=function(e){function t(t,n){var r=this;e.call(this,t,n),this.type=8;var i=decodeURIComponent(this.property.value()),s=t.descriptor;this.title=t.descriptor.friendlyName,this.minLimit=s.minLimit,this.maxLimit=s.maxLimit,this.sliderMin=s.sliderMin,this.sliderMax=s.sliderMax,this.logCapable=s.isLog,this.hasIndexRuleError=ko.observable(!1);if(i[0]!=="{"&&i[0]!=="["&&t.descriptor.defaultValue&&t.descriptor.defaultValue!==""){var o=s.sliderMax-s.sliderMin;s.isInt?(this.minValue=ko.observable(Math.round(s.sliderMin+.1*o)),this.maxValue=ko.observable(Math.round(s.sliderMax-.1*o))):(this.minValue=ko.observable(s.sliderMin+.1*o),this.maxValue=ko.observable(s.sliderMax-.1*o)),this.count="3",this.isLogarithmic=ko.observable(!1),this.defaultLiteralValue=s.defaultValue.replace(/;/g,","),this.useRangeBuilder=ko.observable(!1)}else{var u=JSON.parse(i);this.minValue=ko.observable(u.minValue),this.maxValue=ko.observable(u.maxValue),this.count=u.count,this.isLogarithmic=ko.observable(u.isLogarithmic),this.defaultLiteralValue=u.literal,this.useRangeBuilder=ko.observable(u.useRangeBuilder)}this.sliderMin<=0&&this.logCapable?this.logMinLimit=1e-4:this.logMinLimit=Math.log(this.sliderMin),this.logMaxLimit=Math.log(this.sliderMax),this.makeJsonString=function(){var e=encodeURIComponent(JSON.stringify({ParameterType:r.parameterType,useRangeBuilder:r.useRangeBuilder(),literal:r.literalList(),isLogarithmic:r.isLogarithmic(),minValue:r.minValue(),maxValue:r.maxValue(),count:r.countValidatable()}));r.property.value(e)}}return __extends(t,e),t.createParameterRangeViewModel=function(e,t){var n=e.descriptor,r;return n.isInt?r=new B(e,t):r=new j(e,t),r.finishConstruction(),r},t.prototype.finishConstruction=function(){var e=this,t=new RegExp("^\\s*(\\d+)\\s*$");this.validateCount=function(n){var r;if(t.test(e.countValidatable())){var i=t.exec(e.countValidatable())[1],s=1+e.maxValue()-e.minValue();Number(i)>=s&&e.parameterType=="Integer"?r=N.format(y.parameterRangeErrorTooManyPoints,s.toString()):Number(i)<1&&(r=y.parameterRangeCountMustBeInteger)}else r=y.parameterRangeCountMustBeInteger;return r?e.hasIndexRuleError(!0):e.hasIndexRuleError(!1),r},this.countValidatable=C.validatableObservable(this.count,this.validateCount),this.countValidatable.startValidating(),this.countValidatable.validate(),this.validateItems=function(t){var n=e.literalList().split(","),r;return n.forEach(function(t){if(e.literalItemRegExp.test(t)){var n=e.literalItemRegExp.exec(t)[1];if(Number(n)<e.minLimit){r=N.format(y.parameterRangeErrorMustBeGreaterThan,e.minLimit.toString());return}if(Number(n)>e.maxLimit){r=N.format(y.parameterRangeErrorMustBeLessThan,e.maxLimit.toString());return}}else{if(!e.literalRangeRegExp.test(t)){e.parameterType==="Integer"?r=y.parameterRangeInputMustBeIntegersOrRanges:e.parameterType==="Double"&&(r=y.parameterRangeInputMustBeDoubles);return}var i=e.literalRangeRegExp.exec(t);if(Number(i[1])<e.minLimit){r=N.format(y.parameterRangeErrorMustBeGreaterThan,e.minLimit.toString());return}if(Number(i[2])>e.maxLimit){r=N.format(y.parameterRangeErrorMustBeLessThan,e.maxLimit.toString());return}if(Number(i[2])<Number(i[1])){r=y.parameterRangeInvalidRange;return}}}),r?e.hasIndexRuleError(!0):e.hasIndexRuleError(!1),r},this.literalList=C.validatableObservable(this.defaultLiteralValue,this.validateItems),this.literalList.startValidating(),this.literalList.validate(),this.rangeString=ko.computed(function(){var t;if(e.parameterType==="Integer")t=""+e.minValue()+" - "+e.maxValue();else{var n=e.minValue()<1?e.minValue().toExponential(2):e.minValue().toPrecision(3),r=e.maxValue()<1?e.maxValue().toExponential(2):e.maxValue().toPrecision(3);t=""+n+" - "+r}return t},this),this.minValue.subscribe(function(){e.countValidatable.validate()}),this.maxValue.subscribe(function(){e.countValidatable.validate()}),this.countValidatable.subscribe(function(){e.makeJsonString()}),this.literalList.subscribe(function(){e.makeJsonString()}),this.minValue.subscribe(function(){e.makeJsonString()}),this.maxValue.subscribe(function(){e.makeJsonString()}),this.useRangeBuilder.subscribe(function(){e.makeJsonString()}),this.isLogarithmic.subscribe(function(){e.makeJsonString()})},t}(A);t.ParameterRangeViewModel=D;var P=function(){function e(e,t,n){var r=this;this.value=e,this.displayValue=t,this.isSelected=ko.observable(n),this.classString=ko.computed(function(){return r.isSelected()?"multiselectSelected":"multiselectNotSelected"},this)}return e}();t.EnumItemViewModel=P;var H=function(e){function t(t,n){var r=this;e.call(this,t,n),t.value.validate=function(){return[]};var i=decodeURIComponent(this.property.value());this.type=10;var s=t.descriptor;this.enumItems=ko.observableArray([]);if(i[0]!=="{"&&i[0]!=="["&&t.descriptor.defaultValue)s.choices().forEach(function(e){r.enumItems().push(new P(e.value,e.displayValue,e.value===s.defaultValue))});else{var o=JSON.parse(i);o.enumItems.forEach(function(e){r.enumItems.push(new P(e.value,e.displayValue,e.selected))})}this.buttonLabel=ko.computed(function(){var e=[];return r.enumItems().forEach(function(t){t.isSelected()&&e.push(t.displayValue)}),e.length===0?y.MultiselectLabelNoneSelected:e.length===1?e[0]:N.format(y.MultiselectLabelManySelected,e.length.toString())}),this.JSONString=ko.computed(function(){var e=[];r.enumItems().forEach(function(t){e.push({value:t.value,displayValue:t.displayValue,selected:t.isSelected()})});var t=encodeURIComponent(JSON.stringify({enumItems:e}));return r.property.value(t),t})}return __extends(t,e),t}(A);t.EnumSweepViewModel=H;var B=function(e){function t(t,n){var r=this;e.call(this,t,n),this.logMin=ko.computed({read:function(){return Math.log(r.minValue())},write:function(e){r.minValue(Math.round(Math.exp(e)))},owner:this}),this.logMax=ko.computed({read:function(){return Math.log(r.maxValue())},write:function(e){r.maxValue(Math.round(Math.exp(e)))},owner:this}),this.linSliderStep=1,this.logSliderStep=(this.logMaxLimit-this.logMinLimit)*.005,this.parameterType="Integer",this.literalItemRegExp=new RegExp("^\\s*(-?\\d+)\\s*$"),this.literalRangeRegExp=new RegExp("^\\s*(-?\\d+)\\s*-\\s*(-?\\d+)\\s*$")}return __extends(t,e),t}(D);t.IntegerParameterRangeViewModel=B;var j=function(e){function t(t,n){var r=this;e.call(this,t,n),this.logMin=ko.computed({read:function(){return Math.log(r.minValue())},write:function(e){r.minValue(Math.exp(e))},owner:this}),this.logMax=ko.computed({read:function(){return Math.log(r.maxValue())},write:function(e){r.maxValue(Math.exp(e))},owner:this}),this.linSliderStep=(this.sliderMax-this.sliderMin)*.005,this.logSliderStep=(this.logMaxLimit-this.logMinLimit)*.005,this.parameterType="Double",this.literalItemRegExp=new RegExp("^\\s*((-?\\d+\\.?\\d*((e|E)-?\\d+))|(-?\\d*\\.?\\d+))\\s*$"),this.literalRangeRegExp=new RegExp("^\\s*((-?\\d+\\.?\\d*((e|E)-?\\d+))|(-?\\d*\\.?\\d+))\\s*$")}return __extends(t,e),t}(D);t.DoubleParameterRangeViewModel=j;var F=function(e){function t(t,n){e.call(this,t,n);if(!(t.descriptor instanceof E.ScriptModuleParameterDescriptor))throw new Error("MonacoParameterViewModel must be passed a ScriptModuleParameterDescriptor");var r=t.descriptor.scriptName;this.monacoMimeType=R(r),this.untabify=q(this.monacoMimeType),this.shouldExpandOnFocus=!n.dataIngestionWizard}return __extends(t,e),t}(A);t.MonacoParameterViewModel=F;var I=function(t){function n(n,r){function o(){var e=n.value(),t=this.views[0].viewModel.temporaryPropertyValue();if(e!==t){var r=confirm(y.scriptEditorHasChangesConfirmation);if(!r)return!0}}var s=this;t.call(this,n,r),this.launchDisabled=ko.observable(!1),this.showPopupIcon=ko.observable(!1),this.temporaryPropertyValue=C.validatableObservable(n.value(),n.validateValue),!this.isExperimentLevel()&&g.enableScriptEditorPopup()&&!r.dataIngestionWizard&&this.showPopupIcon(!0),this.openScriptEditor=function(){e(["../../../TS/ViewModel/ExperimentEditor/ScriptEditorViewModel"],function(e){b.featureUsage({featureID:149,groupID:148}),s.launchDisabled(!0);var t=new e.ScriptEditorViewModel(n,r);i.open(ExperimentEditorTemplates._scriptEditorMarkup,t,"90%","90%",o,null,!0,"scriptEditorDialogWindow")})},this.closeDialogAndSave=function(){return s.launchDisabled(!1),n.value(s.temporaryPropertyValue()),i.close(),!0}}return __extends(n,t),n}(F);t.ScriptEditorParameterViewModel=I,t.isUntabifyNeeded=q,t.getMimeTypeForScriptName=R;var U=function(e){function t(t){e.call(this,t),this.isStaticContent(!0),this._isDisabled=ko.computed(function(){return!0})}return __extends(t,e),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._isDisabled},enumerable:!0,configurable:!0}),t}(L);t.StaticContentPropertyViewModel=U;var z=function(e){function t(t,n){e.call(this,t),this.type=4,this.templateType("linkProperty"),n?this.onClick=function(e,t){t.preventDefault(),n(t)}:this.onClick=function(e,t){}}return __extends(t,e),t}(U);t.LinkPropertyViewModel=z;var W=function(e){function t(t,n){var r=this;n?e.call(this,t,function(e){r.endpoint()&&r.endpoint().Size!==-1&&n.download(r.endpoint())}):e.call(this,t),this.endpoint=t.endpoint}return __extends(t,e),Object.defineProperty(t.prototype,"endpointDownloader",{set:function(e){var t=this;this.onClick=function(n,r){r.preventDefault(),t.endpoint()&&t.endpoint().Size!==-1&&e.download(t.endpoint())}},enumerable:!0,configurable:!0}),t}(z);t.EndpointPropertyViewModel=W;var X=function(e){function t(t,n){e.call(this,t),this.type=5,this.templateType("buttonProperty"),n?this.onClick=function(e,t){t.preventDefault(),n(t)}:this.onClick=function(e,t){}}return __extends(t,e),t}(U);t.ButtonPropertyViewModel=X;var V=function(e){function t(t,n,r,s,o){var u=this;e.call(this,t),this.endpoint=t.endpoint,this.moduleName=n,this.clickDisabled=ko.observable(!1),this.onClick=function(e,t){if(u.clickDisabled())return;u.clickDisabled(!0),t&&t.preventDefault(),u.endpoint()&&u.endpoint().Size>0?u.property.id===0?(Shell.UI.Spinner.show(),b.customEvent({key:"TryingToLoadModuleErrorMessageOnUserClick",type:"ModuleErrorMessageLoad"}),N.then(s.getModuleErrorLog(o,r),function(e){Shell.UI.Spinner.hide();if(!i.isOpen()&&!u.isDisposed){var t=new a.ModuleErrorViewModel(e,n,r),s=t.errorInfo().containsAdditionalInformation()?"330px":"190px";i.open(ExperimentEditorTemplates._moduleErrorMarkup,t,s,"550px")}}).fail(function(){Shell.UI.Spinner.hide();var e=new Shell.UI.Notifications.Notification(y.moduleErrorDialogCouldNotLoad,"error");e.setActions([Shell.UI.Notifications.Buttons.close(function(){})]),Shell.UI.Notifications.add(e),b.customEvent({key:"FailedToLoadModuleErrorMessageOnUserClick",type:"ModuleErrorMessageLoadFailed"})}).always(function(){u.clickDisabled(!1)})):u.clickDisabled(!1):u.clickDisabled(!1)}}return __extends(t,e),t}(X);t.EndpointDialogPropertyViewModel=V;var J=function(e){function t(t){e.call(this,t),this.type=0,this.templateType("staticTextProperty")}return __extends(t,e),t}(U);t.StaticTextPropertyViewModel=J;var K=function(e){function t(t){e.call(this,t),this.type=1,this.templateType("checkboxProperty")}return __extends(t,e),t}(L);t.CheckboxPropertyViewModel=K;var Q=function(e){function t(t){e.call(this,t),this.type=9,this.templateType("editableTextAreaProperty")}return __extends(t,e),t}(L);t.EditableTextPropertyViewModel=Q;var G="++++",Y=[];Y[1]=y.notRegistered,Y[3]=y.offline,Y[2]=y.online,Y[4]=y.online;var Z=function(e){function t(t,n){var r=this;e.call(this,t,n),this.addNewChoice=new E.ChoiceParameterValue(G,y.addNewDataGatewayChoice),this.refreshingGateways=!1,this.isPollingGateways=!1,this.includeAddNewChoice=!0,this.dataGatewayBackend=n.workspace.getDataGatewayBackend(),this.property.value()===this.addNewChoice.value&&this.property.value(""),n.dataIngestionWizard&&n.dataIngestionWizard==1&&(this.includeAddNewChoice=!1),this.existingChoice=new E.ChoiceParameterValue(this.property.value(),this.property.value()),this.includeAddNewChoice?this.choices=ko.observableArray([this.existingChoice,this.addNewChoice]):this.choices=ko.observableArray([this.existingChoice]),this.gatewayListFresh=!1,this.dataGatewayBackend.getGatewaysCached().then(this.refreshChoices.bind(this)),t.value.validate=function(){if(t instanceof S.ModuleNodeParameter){var e=t.descriptor.validate(r.property.value());if(e)return[e]}return r.gatewayListFresh?r.gatewayIsValid(r.property.value(),r.choices())?[]:[y.validationInvalidDataGateway]:[]},this.type=11,this.templateType("dataGatewayNameParameter"),this.registerForDisposal(new m.DisposableSubscription(this.property.value.subscribe(function(e){r.oldValue=e},null,"beforeChange"))),this.registerForDisposal(new m.DisposableSubscription(this.property.value.subscribe(function(e){if(e===r.addNewChoice.value){var t=new s.NewDataGatewayWizardViewModel(r.dataGatewayBackend,function(e){if(e){r.gatewayListFresh=!1,r.ensurePollingGateways();var t=r.existingChoice;r.existingChoice=new E.ChoiceParameterValue(e,e),r.choices.unshift(r.existingChoice),r.property.value(e),t&&r.choices.remove(t)}else r.existingChoice?r.property.value(r.existingChoice.value):r.oldValue&&r.oldValue!==r.addNewChoice.value&&r.gatewayIsValid(r.oldValue,r.choices())?r.property.value(r.oldValue):r.choices().length>1&&r.property.value(r.choices()[0].value)});t.show()}else r.existingChoice&&r.property.value()&&r.property.value().toUpperCase()!==r.existingChoice.value.toUpperCase()&&(r.choices.remove(r.existingChoice),r.existingChoice=null)})))}return __extends(t,e),t.prototype.gatewayIsValid=function(e,t){if(e)for(var n=0;n<t.length;n++)if(t[n].value&&t[n]!==this.existingChoice&&t[n]!==this.addNewChoice&&t[n].value.toUpperCase()===e.toUpperCase())return!0;return!1},t.prototype.refreshChoices=function(e){var t=e.map(function(e){return new E.ChoiceParameterValue(e.GatewayName,e.GatewayName+(Y[e.Status]?" ("+Y[e.Status]+")":""))});this.gatewayIsValid(this.property.value(),t)?this.existingChoice=null:(this.existingChoice||(this.existingChoice=new E.ChoiceParameterValue(this.property.value(),this.property.value())),t.push(this.existingChoice)),this.includeAddNewChoice&&t.push(this.addNewChoice),this.choices(t),this.gatewayListFresh=!0},t.prototype.ensurePollingGateways=function(){if(this.isPollingGateways)return;this.isPollingGateways=!0,this.refreshingGateways||this.refreshGateways()},t.prototype.stopPollingGateways=function(){this.isPollingGateways=!1},t.prototype.refreshDone=function(e){var t=this;this.refreshChoices(e),this.refreshingGateways=!1,this.isPollingGateways&&(clearTimeout(this.refreshGatewaysTimeoutID),this.refreshGatewaysTimeoutID=setTimeout(function(){t.isPollingGateways&&!t.refreshingGateways&&t.refreshGateways()},1e4))},t.prototype.refreshGateways=function(){if(this.refreshingGateways)return;this.refreshingGateways=!0,clearTimeout(this.refreshGatewaysTimeoutID),this.dataGatewayBackend.getGateways().then(this.refreshDone.bind(this))},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.stopPollingGateways()},t}(A);t.DataGatewayNameParameterViewModel=Z;var et=function(e){function t(t,n){var r=this;e.call(this,t,n),this.dataGatewayBackend=n.workspace.getDataGatewayBackend(),this.generatingLink=ko.observable(!1),this.showClickOnceWarning=!s.clickOnceApplicationLikelyToWork(),this.clickOnceWarning=y.clickOnceWarningNotSupported;var i=!!window.chrome&&!!window.chrome.webstore;if(i){var o=document.createElement("a");o.href="//go.microsoft.com/fwlink/?LinkID=734744&clcid=0x409",o.text=y.clickOnceChromePlugIn,o.target="_blank",this.clickOnceWarning=N.format(y.clickOnceWarningChrome,o.outerHTML)}this.templateType("dataGatewayCredentialParameter"),this.canEnterValue=ko.pureComputed(function(){return!r.generatingLink()&&r.gatewayName&&r.gatewayName()&&r.serverName&&r.serverName()&&r.databaseName&&r.databaseName()?!0:!1}),this.invalidClass=ko.pureComputed(function(){return r.property.value()?"":"fx-validation-invalid"});var u=t.credentialKeyParts;if(u)for(var a=0;a<u.length;a++){var f=u[a];f.parameterType===h.ModuleParameterType.DataGatewayName?this.gatewayName=f.value:this.serverName?this.databaseName=f.value:this.serverName=f.value}this.gatewayName&&this.registerForDisposal(new m.DisposableSubscription(this.gatewayName.subscribe(function(e){e!==G&&r.keyChanged()}))),this.serverName&&this.registerForDisposal(new m.DisposableSubscription(this.serverName.subscribe(function(e){r.keyChanged()}))),this.databaseName&&this.registerForDisposal(new m.DisposableSubscription(this.databaseName.subscribe(function(e){r.keyChanged()})))}return __extends(t,e),t.prototype.keyChanged=function(){this.property.value(""),clearTimeout(this.pollingTimeout)},t.prototype.currentKey=function(){return this.gatewayName()+this.serverName()+this.databaseName()},t.prototype.enterValue=function(){var e=this,t=this.currentKey();if(t===this.requestKey&&!this.property.value()){this.launchClickOnce();return}this.requestKey=t,this.generatingLink(!0);var n=this.dataGatewayBackend.getCredentialEntryRequest(this.gatewayName(),this.serverName(),this.databaseName());n.then(function(t){e.generatingLink(!1),e.request=t,e.property.value(""),e.launchClickOnce()}),n.fail(function(t){e.requestKey=null,e.generatingLink(!1),N.showErrorNotification({title:y.dataGatewayFailedGetEnterCredsURL}),b.warn("Getting Data Gateway credential entry click-once URL failed.","DataGatewayUI",t)})},t.prototype.launchClickOnce=function(){window.open(this.request.ClickOnceUrl,"_blank"),clearTimeout(this.pollingTimeout),this.pollingTimeout=setTimeout(this.checkForEnteredValue.bind(this),5e3)},t.prototype.checkForEnteredValue=function(){var e=this;clearTimeout(this.pollingTimeout);if(this.currentKey()!==this.requestKey)return;this.dataGatewayBackend.getAreCredentialsEntered(this.request.Id).then(function(t){t?e.dataGatewayBackend.getEnteredCredentials(e.request.Id).then(function(t){if(e.currentKey()!==e.requestKey)return;e.property.value(t)}):e.pollingTimeout=setTimeout(e.checkForEnteredValue.bind(e),4e3)})},t}(A);t.DataGatewayCredentialParameterViewModel=et;var tt=function(e){function t(t){e.call(this,t),this.onKeyReturn=function(e,t){return t.stopPropagation(),t.keyCode===13&&e.focus(!1),!0},this.autocompleteArray=t.autocompleteArray,this.isLinkable=!1,this.templateType("inputParameter"),this._isDisabled=ko.computed(function(){return!1})}return __extends(t,e),t.prototype.validate=function(){var e=this.property;return e.validate()},Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._isDisabled},enumerable:!0,configurable:!0}),t}(L);t.WebServicePortParameter=tt});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Module",["require","exports","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/GraphNodeViewModel","../../../TS/ViewModel/PaletteControl/IconUtilities","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Constants","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/ModuleParameterDescriptor","../../../../DataLabClient/Model/Property","../../../../DataLabClient/StateUtil","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=function(e){function t(t,i){var a=this;e.call(this,t,n.EntityTypes[r.EntityType.Module]),this.moduleNode=t,this.graphNodeType=0,this.statusIconURL=ko.computed(function(){return a.valid()?a.moduleNode.statusCode.value()===u.State.NotStarted&&a.moduleNode.parent&&a.moduleNode.parent.statusCode()!==u.State.InDraft&&a.moduleNode.parent.statusCode()!==u.State.Canceled?"/Content/Images/icon-notstarted.svg":a.moduleNode.statusCode.value()===u.State.Running?"/Content/Images/Processing.gif":h.isFinishedState(a.moduleNode.statusCode.value())?"/Content/Images/icon-complete.svg":h.isFailedState(a.moduleNode.statusCode.value())?"/Content/Images/icon-error.svg":"/Content/Images/icon-none.svg":"/Content/Images/icon-validation-invalid.svg"}),this.classId=ko.computed(function(){var e=a.moduleNode.statusCode.value(),t=(a.hovered()?" hoveredEntity":"")+(a.searchMatched()?" highlightedEntityYellow":"")+(a.searchResultSelected()?" highlightedEntityOrange":"")+(a.selected()?" selectedEntity":"")+" "+a.getCompatibilityClass();return"rectEntity module "+e+t}),this.subscribeToParameters(this.moduleNode.parameters),this.startTime=new o.StaticTextPropertyViewModel(this.moduleNode.startTime),this.endTime=new o.StaticTextPropertyViewModel(this.moduleNode.endTime),this.elapsedTime=new o.StaticTextPropertyViewModel(this.moduleNode.elapsedTime),this.statusCode=new o.StaticTextPropertyViewModel(this.moduleNode.statusCode),this.statusDetails=new o.StaticTextPropertyViewModel(this.moduleNode.statusDetails),this.outputLog=new o.EndpointPropertyViewModel(this.moduleNode.outputLog),this.errorLog=new o.EndpointDialogPropertyViewModel(this.moduleNode.errorLog,this.moduleNode.name,this.moduleNode.id,i,this.moduleNode.executedExperimentId),this.usePreviousResults=new o.CheckboxPropertyViewModel(new c.BooleanProperty("name","LABEL","TOOLTIP",t.usePreviousResults,undefined)),this.isDeterministic=t.isDeterministic,this.outputEndpoints=[],p.forEach(this.moduleNode.outputEndpoints,function(e,t){a.outputEndpoints.push(new o.EndpointPropertyViewModel(e))}),this.nodeIconClicked=function(e,t){h.isFailedState(a.moduleNode.statusCode.value())&&a.valid()&&a.errorLog.onClick(a.errorLog,t)},this.icon=s.GetIconForCategory(this.moduleNode.module_.category),this.iconSymbol=s.GetIconSymbol(this.icon),ko.computed(function(){f.featureUsage({featureID:151,groupID:151,data:a.usePreviousResults.property.value()})}),this.moduleNode.schemaError.subscribe(function(){a.updateValidState()})}return __extends(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this.moduleNode.module_.name()},enumerable:!0,configurable:!0}),t.prototype.isRunnable=function(){return!0},t.prototype.startValidating=function(){this.moduleNode.startValidating()},t.prototype.updateValidState=function(){var e=this.moduleNode.validate();e.length>0?e[0].errorMessages.length>0?(this.moduleNode.balloonMessage(e[0].errorMessages[0]),this.valid(!1)):f.error("An error object had no error messages."):(h.isFailedState(this.moduleNode.statusCode.value())&&this.moduleNode.balloonMessage(""),this.valid(!0))},t.prototype.setHelp=function(e){var t=null;this.moduleNode.module_.category!=="Custom"&&(t=p.resurrectDashesInGUID(this.moduleNode.module_.id.split(".")[1])),e(this.moduleNode.module_.description(),t,this.moduleNode.module_.name())},t.prototype.subscribeToParameters=function(e){var t=this;p.forEach(e,function(e){e.value.errorMessage.subscribe(function(){t.updateValidState()}),e.descriptor instanceof l.ModeModuleParameterDescriptor&&(e.value.subscribe(function(){t.updateValidState()}),p.forEach(e.childParameters,function(e){t.subscribeToParameters(e)}))})},t}(i.GraphNodeViewModel);t.Module=d});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/Common/MouseCapture",["require","exports","../../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t,r,i,s){var o=this;s===void 0&&(s=null),e.call(this),this.mouseMoveHandler=r,this.mouseUpHandler=i,this.buttonsDown=0,this.mouseDownOrigin=t;var u=function(){o.buttonsDown++};s=s||this,this.beginCapture=function(){o.buttonsDown===0&&!s.isDisposed&&(s.registerForDisposal(o.mouseMoveDisposableListener=new n.DisposableEventListener(document,"mousemove",o.mouseMoveHandler,!0),o.mouseUpDisposableListener=new n.DisposableEventListener(document,"mouseup",o.mouseUpHandler,!0),o.endCapturesDisposableListener=new n.DisposableEventListener(document,"mouseup",o.endCapture,!0),o.countMouseDownsDisposableListener=new n.DisposableEventListener(document,"mousedown",u,!0)),o.buttonsDown++)},this.endCapture=function(){o.buttonsDown--,o.buttonsDown===0&&(o.mouseMoveDisposableListener.dispose(),o.mouseUpDisposableListener.dispose(),o.endCapturesDisposableListener.dispose(),o.countMouseDownsDisposableListener.dispose())},this.registerForDisposal(new n.DisposableEventListener(this.mouseDownOrigin,"mousedown",this.beginCapture,!0))}return __extends(t,e),t}(n.Disposable);t.MouseCapture=r,ko.bindingHandlers.mouseCapture={init:function(e,t,i,s){var o=t();if(!o.mouseMove||!o.mouseUp)throw new Error("MouseCapture requires mouseMove and mouseUp handlers in binding");var u=function(e){o.mouseMove(s,e)},a=function(e){o.mouseUp(s,e)},f=new r(e,u,a,o.owner);n.Disposable.exemptFromDiposablesInContextAssertion(f),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){f.dispose()})},update:function(){}}}),define("generated/editor/TS/View/PanHelper",["require","exports","../../../DataLabClient/LocalizedResources"],function(e,t,n){var r=function(){function e(e,t){var r=document.createElement("div");r.setAttribute("class","xe-zoomIcon panButton"),r.setAttribute("title",n.clickToPan),e.appendChild(r),r.addEventListener("click",function(e){t(e)}),r.addEventListener("mousedown",function(e){e.stopPropagation()})}return e}();t.PanHelper=r}),define("generated/editor/TS/View/ScrollControl",["require","exports"],function(e,t){var n;(function(e){e.ScrollbarSizeTestDimensions=100})(n=t.Constants||(t.Constants={})),function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(t.ScrollOrientation||(t.ScrollOrientation={}));var r=t.ScrollOrientation,i=function(){function e(e,t,n,r){var i=this;this.scrollDiv=e,this.positionReference=t,this.viewScrolled=ko.observable(),this.orientation=n,this.scrollRange=document.createElement("div"),n===1?(this.scrollDiv.setAttribute("class","horizontalScroll scrollUI"),this.scrollRange.setAttribute("class","horizontalScrollRange"),this.scrollDiv.style.right=r.verticalScrollbarWidth.toFixed()+"px",this.clientLength="clientWidth",this.clientOffset="scrollLeft",this.styleLength="width"):(this.scrollDiv.setAttribute("class","verticalScroll scrollUI"),this.scrollRange.setAttribute("class","verticalScrollRange"),this.scrollDiv.style.bottom=r.horizontalScrollbarHeight.toFixed()+"px",this.clientLength="clientHeight",this.clientOffset="scrollTop",this.styleLength="height"),this.scrollDiv.appendChild(this.scrollRange),this.scrollDiv.addEventListener("scroll",function(e){i.suppressScrollEvent?i.suppressScrollEvent=!1:i.viewScrolled.notifySubscribers(i.scrollDiv[i.clientOffset]/i.scrollRange[i.clientLength])}),this.sizeUpdated()}return e.prototype.sizeUpdated=function(){var e,t=this.positionReference(this.orientation);e=this.scrollDiv[this.clientLength]/t.elevatorLength,this.scrollRange.style[this.styleLength]=e.toFixed()+"px",this.suppressScrollEvent=!0,$(this.scrollDiv)[this.clientOffset](e*t.elevatorOffset)},e.computeDimensions=function(){var e=document.createElement("div"),t=document.createElement("div");e.setAttribute("style","width: "+n.ScrollbarSizeTestDimensions.toFixed()+"px;height: "+n.ScrollbarSizeTestDimensions.toFixed()+"px;overflow: scroll;position: absolute;opacity: 0;"),t.setAttribute("style","width:100%;height: 100%;position: absolute;top: 0px;left: 0px;"),document.body.appendChild(e),e.appendChild(t);var r=n.ScrollbarSizeTestDimensions-t.clientWidth,i=n.ScrollbarSizeTestDimensions-t.clientHeight;return document.body.removeChild(e),{verticalScrollbarWidth:r,horizontalScrollbarHeight:i}},e}();t.ScrollControl=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/XEStateMachine",["require","exports","../../../TS/ViewModel/ExperimentEditor/Entity","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/Help","../../../../DataLabClient/Disposable"],function(e,t,n,r,i,s){var o;(function(e){e.PanMode="panMode ",e.Panning="panning ",e.Idle="idle ",e.MovingEntities="movingEntities ",e.MakingConnection="makingConnection ",e.MultiSelecting="multiSelecting "})(o=t.XEInteractionClasses||(t.XEInteractionClasses={})),function(e){e[e.MouseDown=0]="MouseDown",e[e.MouseUp=1]="MouseUp",e[e.MouseMove=2]="MouseMove",e[e.PanButtonClicked=3]="PanButtonClicked",e[e.DeleteKeyPressed=4]="DeleteKeyPressed",e[e.EscapeKeyPressed=5]="EscapeKeyPressed",e[e.ShiftAPressed=6]="ShiftAPressed",e[e.F2KeyPressed=7]="F2KeyPressed",e[e.ControlXPressed=8]="ControlXPressed",e[e.SpacebarDown=9]="SpacebarDown",e[e.SpacebarUp=10]="SpacebarUp"}(t.XEInteractionAction||(t.XEInteractionAction={}));var u=t.XEInteractionAction;(function(e){e[e.None=0]="None",e[e.Entities=1]="Entities",e[e.Connection=2]="Connection",e[e.SelectionRect=3]="SelectionRect"})(t.DraggingMode||(t.DraggingMode={}));var a=t.DraggingMode;(function(e){e[e.None=0]="None",e[e.SEResize=1]="SEResize",e[e.SResize=2]="SResize",e[e.EResize=3]="EResize"})(t.ResizingMode||(t.ResizingMode={}));var f=t.ResizingMode,l;(function(e){var t;(function(e){e.ConnectionPendingThreshhold=5})(t=e.XEStateMachine||(e.XEStateMachine={}))})(l=t.Constants||(t.Constants={}));var c=function(e){function t(t){var n=this;e.call(this),this.viewModel=t,this.lastMouseCoords={x:0,y:0,matrixTransform:null},this.lastDomainCoords={x:0,y:0,matrixTransform:null},this.mouseDownCoords={x:0,y:0,matrixTransform:null},this.mouseDownEvent=null,this.panModeOn=ko.observable(!1),this.leftMousePanning=ko.observable(!1),this.centerMousePanning=ko.observable(!1),this.spacebarHeld=ko.observable(!1),this.dragging=ko.observable(0),this.resizingNode=ko.observable(0),this.connectionDragPending=ko.observable(!1),this.atRest=ko.computed(function(){return n.centerMousePanning()===!1&&n.dragging()===0&&n.resizingNode()===0&&n.leftMousePanning()===!1}),this.classes=ko.computed(function(){var e=(n.panModeOn()||n.spacebarHeld()?o.PanMode:"")+(n.centerMousePanning()||n.leftMousePanning()?o.Panning:"");switch(n.dragging()){case 1:e+=o.MovingEntities;break;case 2:e+=o.MakingConnection;break;case 3:e+=o.MultiSelecting;break;default:e+=o.Idle}return e})}return __extends(t,e),t.prototype.handleAction=function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var r,s,o,u,a;t&&(r=this.viewModel.domainCoordinatesHelper.clientToDomainCoordinates(t.clientX,t.clientY),s=t.clientX-this.lastMouseCoords.x,o=t.clientY-this.lastMouseCoords.y,u=r.x-this.lastDomainCoords.x,a=r.y-this.lastDomainCoords.y);var f=n?n.category:null;switch(e){case 0:t.target&&t.target.getAttribute("outputlabel")&&t.button===0&&!this.panModeOn()&&!this.spacebarHeld()?this.connectionDragPending(!0):this.connectionDragPending(!1);if(t.button===1)this.centerMousePanning(!0);else if(t.button===0){n?n.setHelp(i.setHelpContent):i.setHelpContent("");if(this.panModeOn()||this.spacebarHeld())this.leftMousePanning(!0);else if(this.dragging()===0)if(n===null)t.shiftKey||this.viewModel.resetSelection(),this.viewModel.beginMultiSelect(r),this.dragging(3);else switch(f){case 3:this.viewModel.startConnection(n),this.dragging(2);break;case 1:case 2:case 4:(t.ctrlKey?!t.shiftKey:t.shiftKey)?this.viewModel.toggleEntitySelection(n):(this.viewModel.selectSingleEntity(n),$(t.target).hasClass("nodeSEResize")?this.resizingNode(1):$(t.target).hasClass("nodeEResize")?this.resizingNode(3):$(t.target).hasClass("nodeSResize")&&this.resizingNode(2)),this.resizingNode()===0&&this.dragging(1)}}else{if(t.button!==2)return;(f===1||f===2)&&this.viewModel.selectSingleEntity(n,!0),n?n.setHelp(i.setHelpContent):i.setHelpContent("")}this.mouseDownCoords=r,this.mouseDownEvent=t,this.mouseDownEntity=n;break;case 1:if(t.button===1)this.centerMousePanning(!1);else{if(t.button!==0)return;if(this.leftMousePanning())this.leftMousePanning(!1);else if(this.dragging()!==0){switch(this.dragging()){case 2:this.viewModel.endConnection(n,r);break;case 3:this.viewModel.endMultiSelect(r);break;case 1:if(f===4){var c=this.mouseDownEvent.clientX-t.clientX,h=this.mouseDownEvent.clientY-t.clientY,p=c*c+h*h>0;p||(this.viewModel.toggleAnnotationCollapse(n,t.target.getAttribute("id")==="collapseNodeIcon"),t.target.getAttribute("id")==="annotationTextRect"&&this.viewModel.editAnnotation(n))}}this.dragging(0)}else this.resizingNode()!==0&&this.resizingNode(0)}break;case 3:this.panModeOn(!this.panModeOn());break;case 2:if(this.leftMousePanning()||this.centerMousePanning()||this.spacebarHeld()){this.viewModel.pan(s,o);break}if(this.connectionDragPending()){var c=this.mouseDownEvent.clientX-t.clientX,h=this.mouseDownEvent.clientY-t.clientY;Math.sqrt(c*c+h*h)>l.XEStateMachine.ConnectionPendingThreshhold&&(this.connectionDragPending(!1),this.viewModel.startConnection(this.mouseDownEntity),this.dragging(2))}switch(this.dragging()){case 1:this.viewModel.moveEntities(u,a);break;case 2:this.viewModel.moveConnection(r);break;case 3:this.viewModel.updateMultiSelect(r)}switch(this.resizingNode()){case 1:this.viewModel.resizeNode(this.mouseDownEntity,u,a);break;case 3:this.viewModel.resizeNode(this.mouseDownEntity,u,0);break;case 2:this.viewModel.resizeNode(this.mouseDownEntity,0,a)}break;case 5:switch(this.dragging()){case 3:this.viewModel.cancelRectSelection(),this.dragging(0);break;case 2:this.viewModel.cancelConnection(),this.dragging(0);break;case 1:var d={x:this.mouseDownCoords.x-this.lastDomainCoords.x,y:this.mouseDownCoords.y-this.lastDomainCoords.y,matrixTransform:null};this.viewModel.moveEntities(d.x,d.y),this.dragging(0);break;default:this.viewModel.resetSelection()}break;case 6:this.viewModel.selectAll();break;case 4:this.atRest()&&this.viewModel.removeSelected();break;case 7:this.atRest()&&this.viewModel.editSelected();break;case 8:this.atRest()&&this.viewModel.cut();break;case 9:this.spacebarHeld(!0);break;case 10:this.spacebarHeld(!1);break;default:}t&&(r=this.viewModel.domainCoordinatesHelper.clientToDomainCoordinates(t.clientX,t.clientY),this.lastMouseCoords={x:t.clientX,y:t.clientY,matrixTransform:null},this.lastDomainCoords={x:r.x,y:r.y,matrixTransform:null})},t}(s.Disposable);t.XEInteractionStateMachine=c}),define("generated/editor/TS/Common/FeatureDetection",["require","exports"],function(e,t){function n(e){var t=document.createElement("input");return t.setAttribute("type",e),t.type!=="text"}t.isInputSupported=n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/ZoomControl",["require","exports","../../TS/Common/FeatureDetection","../../TS/Global","../../TS/Common/MouseCapture","../../../DataLabClient/Disposable","../../../DataLabClient/LocalizedResources"],function(e,t,n,r,i,s,o){var u;(function(e){var t;(function(e){e.SliderZoomIncrement=.25})(t=e.ZoomControl||(e.ZoomControl={}))})(u=t.Constants||(t.Constants={}));var a=function(e){function t(t,a,f,l){var c=this;e.call(this),this.containerDiv=t,this.canvasDiv=a,this.minScale=f!==undefined?f:.2;if(this.minScale<=0)throw new Error("Minimum zoom value must be positive");this.maxScale=l!==undefined?l:4;if(this.maxScale<=this.minScale)throw new Error("Maximum zoom value must be greater than the minimum");this.zoomSteps=0,this.scale=1,this.zoomFactor=1.1,this.minZoomSteps=Math.log(this.minScale)/Math.log(this.zoomFactor),this.maxZoomSteps=Math.log(this.maxScale)/Math.log(this.zoomFactor),this.zoomWithoutAnimation=new ko.subscribable,this.zoomWithAnimation=new ko.subscribable,this.zoomToFit=new ko.subscribable;var h=this.canvasDiv.querySelector(".customElements");h.addEventListener(h.onmousewheel===undefined?"DOMMouseScroll":"mousewheel",function(e){return c.handleMouseWheelZoom(e)});var p=function(e,t,r,i,a,f){if($(".xe-zoomControl").length!=0)throw new Error("Element with class .xe-zoomControl exists before it is created!, possible of name collision ");var l="&nbsp;";n.isInputSupported("range")&&(l="<input class='xe-zoomControlSlider' type='range' min='"+t+"' max='"+r+"' value='1.0' step='"+u.ZoomControl.SliderZoomIncrement+"'></input>");var h="<div class='xe-zoomOut xe-zoomIcon' title='"+o.zoomOut+"'></div>"+l+"<div class='xe-zoomIn xe-zoomIcon' title='"+o.zoomIn+"'></div>"+"<div class='xe-actualSize xe-zoomIcon' title='"+o.zoomToActualSize+"'></div>"+"<div class='xe-zoomToFit xe-zoomIcon' title='"+o.zoomToFit+"'></div>";c.registerForDisposal(new s.DisposableSetHTML(e,h))};p(t,this.minZoomSteps,this.maxZoomSteps,this.zoomInImage,this.zoomOutImage,this.actualSizeImage),this.zoominButton=this.containerDiv.querySelector(".xe-zoomIn"),this.zoomoutButton=this.containerDiv.querySelector(".xe-zoomOut"),this.actualSizeButton=this.containerDiv.querySelector(".xe-actualSize"),this.zoomSlider=this.containerDiv.querySelector(".xe-zoomControlSlider"),this.zoomToFitButton=this.containerDiv.querySelector(".xe-zoomToFit"),this.actualSizeButton.addEventListener("click",function(e){e.preventDefault(),c.handleReset()}),this.zoominButton.addEventListener("click",function(e){e.preventDefault(),c.handleZoomIn()}),this.zoomoutButton.addEventListener("click",function(e){e.preventDefault(),c.handleZoomOut()}),this.zoomToFitButton.addEventListener("click",function(e){e.preventDefault(),c.handleZoomToFit()});if(this.zoomSlider!==null){var d=!1,v=new i.MouseCapture(this.zoomSlider,function(){},function(){d=!1});this.registerForDisposal(v),this.zoomSlider.addEventListener("change",function(e){e.preventDefault();var t=parseFloat(e.currentTarget.value),n=t-c.zoomSteps,r=c.calculateNewZoom(n);d?(c.zoomWithoutAnimation.notifySubscribers({scale:r}),c.scale=r):(c.zoomWithAnimation.notifySubscribers({scale:r}),d=!0)})}this.registerForDisposal(new s.DisposableEventListener(this.canvasDiv,"keydown",function(e){switch(e.keyCode){case r.Key.Minus:case 109:c.handleZoomOut();break;case r.Key.Equals:case 107:c.handleZoomIn();break;case 48:case 96:c.handleZoomToFit();break;case 57:case 105:c.handleReset();break;default:}}))}return __extends(t,e),t.prototype.getClosestValidScale=function(e){var t=this.computeZoomStepForScale(e);return Math.pow(this.zoomFactor,t)},t.prototype.setScale=function(e,t,n){var r=this.computeZoomStepForScale(e),i=Math.pow(this.zoomFactor,r);return this.zoomSlider&&(this.zoomSlider.value=r.toString()),this.zoomSteps=r,this.scale=i,i},t.prototype.getScale=function(){return this.scale},t.prototype.computeZoomStepForScale=function(e){var t;t=e>this.maxScale?this.maxScale:e,t=e<this.minScale?this.minScale:t;var n=Math.log(t)/Math.log(this.zoomFactor);return n},t.prototype.handleReset=function(){this.zoomWithAnimation.notifySubscribers({scale:this.calculateNewZoom(-this.zoomSteps)})},t.prototype.handleZoomIn=function(){this.zoomWithoutAnimation.notifySubscribers({scale:this.calculateNewZoom(1)})},t.prototype.handleZoomOut=function(){this.zoomWithoutAnimation.notifySubscribers({scale:this.calculateNewZoom(-1)})},t.prototype.handleMouseWheelZoom=function(e){var t;e.detail?t=-e.detail/3:t=e.wheelDelta/120,this.zoomWithoutAnimation.notifySubscribers({scale:this.calculateNewZoom(t),x:e.clientX,y:e.clientY})},t.prototype.handleZoomToFit=function(){this.zoomToFit.notifySubscribers(!0)},t.prototype.calculateNewZoom=function(e){var t=Math.max(this.minZoomSteps,Math.min(this.zoomSteps+e,this.maxZoomSteps));return Math.pow(this.zoomFactor,t)},t}(s.Disposable);t.ZoomControl=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/ZoomHelper",["require","exports","../../TS/ViewModel/ExperimentEditor/Animation","../../TS/Global","../../../DataLabClient/Disposable"],function(e,t,n,r,i){var s=function(){function e(e,t,n,r,i,s,o,u,a,f,l,c){this._svgRoot=e,this._coordinateHelper=t,this._zoomControl=n,this._getViewDimensions=r,this._changeCallback=i,this._getTopLeft=s,this._animationComplete=o,this._svgTransformElement=u,this._updateScrollbars=a,this._overlayDivs=f,this._getBounds=l,this._matrixTransform=c}return Object.defineProperty(e.prototype,"svgRoot",{get:function(){return this._svgRoot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinateHelper",{get:function(){return this._coordinateHelper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomControl",{get:function(){return this._zoomControl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getViewDimensions",{get:function(){return this._getViewDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeCallback",{get:function(){return this._changeCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getTopLeft",{get:function(){return this._getTopLeft},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationComplete",{get:function(){return this._animationComplete},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"svgTransformElement",{get:function(){return this._svgTransformElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateScrollbars",{get:function(){return this._updateScrollbars},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlayDivs",{get:function(){return this._overlayDivs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getBounds",{get:function(){return this._getBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matrixTransform",{get:function(){return this._matrixTransform},enumerable:!0,configurable:!0}),e}(),o=function(e){function t(t,n,r,o,u,a,f,l,c,h,p){e.call(this);var d=t.transform.baseVal,v=d.appendItem(n.createSVGTransform());this.initOnly=new s(n,r,o,u,a,f,l,t,c,h,p,v),this.currentPanZoomAnimation=null,this.lastAnimatedScale=this.initOnly.zoomControl.getScale(),this.topLeftDest=null;var m=this,g=this.initOnly.zoomControl.zoomWithoutAnimation.subscribe(function(e){m.zoomToEventWithoutAnimation(e)});this.registerForDisposal(new i.DisposableKnockoutObject(g));var y=this.initOnly.zoomControl.zoomWithAnimation.subscribe(function(e){m.zoomToEventWithAnimation(e)});this.registerForDisposal(new i.DisposableKnockoutObject(y));var b=this.initOnly.zoomControl.zoomToFit.subscribe(function(){m.zoomToFitWithAnimation()});this.registerForDisposal(new i.DisposableKnockoutObject(b))}return __extends(t,e),Object.defineProperty(t.prototype,"currentAnimation",{get:function(){return this.currentPanZoomAnimation},enumerable:!0,configurable:!0}),t.prototype.getPanLimits=function(e){e===void 0&&(e=this.initOnly.zoomControl.getScale());var t=this.initOnly.getBounds(),n=this.initOnly.getViewDimensions(),i=n.width/e,s=n.height/e;return t.width===0&&t.height===0?{x:this.initOnly.getTopLeft().x/e,y:this.initOnly.getTopLeft().y/e,width:i,height:s}:{x:Math.min(t.x-(i-r.RectWidth),this.initOnly.getTopLeft().x/e),y:Math.min(t.y-(s-r.RectHeight),this.initOnly.getTopLeft().y/e),width:Math.max(t.width+(i-r.RectWidth)*2,i),height:Math.max(t.height+(s-r.RectHeight)*2,s)}},t.prototype.zoom=function(e){var t=this.initOnly.coordinateHelper.clientToDomainCoordinates(this.viewCenter.x,this.viewCenter.y);this.zoomToPoint(e,t.x,t.y)},t.prototype.zoomToEventWithoutAnimation=function(e){var t=e.x?e.x:this.viewCenter.x,n=e.y?e.y:this.viewCenter.y,r=this.initOnly.coordinateHelper.clientToDomainCoordinates(t,n);this.zoomToPointWithoutAnimation(e.scale,r.x,r.y)},t.prototype.zoomToEventWithAnimation=function(e){var t=e.x?e.x:this.viewCenter.x,n=e.y?e.y:this.viewCenter.y,r=this.initOnly.coordinateHelper.clientToDomainCoordinates(t,n);this.zoomToPointWithAnimation(e.scale,r.x,r.y)},Object.defineProperty(t.prototype,"viewCenter",{get:function(){var e=this.initOnly.getViewDimensions();return{x:e.x+e.width/2,y:e.y+e.height/2,matrixTransform:null}},enumerable:!0,configurable:!0}),t.prototype.animateToLocation=function(e,t,i){var s=this;i===void 0&&(i=this.initOnly.zoomControl.getScale());var o=this.initOnly.zoomControl.getScale();this.topLeftDest={x:e,y:t,matrixTransform:null},this.currentPanZoomAnimation&&!this.currentPanZoomAnimation.animationStopped&&(this.currentPanZoomAnimation.stop(),o=this.lastAnimatedScale);var u=new Object;u.x={start:this.initOnly.getTopLeft().x,end:e},u.y={start:this.initOnly.getTopLeft().y,end:t},u.scale={start:o,end:i},this.currentPanZoomAnimation=new n.Animation(function(e){s.setOriginAndZoom(e.x,e.y,e.scale),s.lastAnimatedScale=e.scale,s.initOnly.zoomControl.setScale(e.scale)},u,r.ExperimentEditorControlConstants.AnimatedZoomDuration),this.currentPanZoomAnimation.start();var a=this.currentPanZoomAnimation.animationEnded.subscribe(function(e){s.initOnly.zoomControl.setScale(e.scale),s.initOnly.animationComplete(),a.dispose()})},t.prototype.getDestinationOrigin=function(){return this.currentPanZoomAnimation&&!this.currentPanZoomAnimation.animationStopped?this.topLeftDest:this.initOnly.getTopLeft()},t.prototype.zoomToPointWithoutAnimation=function(e,t,n){var r=this.zoomToPoint(e,t,n);this.currentPanZoomAnimation&&!this.currentPanZoomAnimation.animationStopped&&this.currentPanZoomAnimation.stop(),this.setOriginAndZoom(r.x,r.y,r.scale),this.initOnly.zoomControl.setScale(r.scale),this.initOnly.updateScrollbars()},t.prototype.zoomToPointWithAnimation=function(e,t,n){var r=this.zoomToPoint(e,t,n);this.animateToLocation(r.x,r.y,r.scale)},t.prototype.zoomToPoint=function(e,t,n){var r=this.initOnly.getBounds(),i=this.initOnly.svgRoot.createSVGPoint();i.x=Math.min(r.x+r.width,Math.max(r.x,t)),i.y=Math.min(r.y+r.height,Math.max(r.y,n));var s=i.matrixTransform(this.initOnly.matrixTransform.matrix),o=-(s.x-i.x*e),u=-(s.y-i.y*e);return{scale:e,x:o,y:u}},t.prototype.zoomToFitWithAnimation=function(){var e=this.computeZoomToFitLocation();this.animateToLocation(e.domainX,e.domainY,e.scale)},t.prototype.computeZoomToFitLocation=function(){var e=this.initOnly.getBounds(),t=this.initOnly.getViewDimensions(),n=(t.width-2*r.Layout.zoomToFitPadding)/e.width,i=(t.height-2*r.Layout.zoomToFitPadding)/e.height,s=this.initOnly.zoomControl.getClosestValidScale(Math.min(n,i)),o=e.x*s-(t.width-e.width*s)/2,u=e.y*s-(t.height-e.height*s)/2;return{domainX:o,domainY:u,scale:s}},t.prototype.setOriginAndZoom=function(e,t,n,r){n===void 0&&(n=this.initOnly.zoomControl.getScale()),r===void 0&&(r=!1);var i=e,s=t,o=this.initOnly.getViewDimensions(),u=this.getPanLimits(n);i=n*Math.max(i/n,u.x),s=n*Math.max(s/n,u.y),i=n*Math.min((i+o.width)/n,u.x+u.width)-o.width,s=n*Math.min((s+o.height)/n,u.y+u.height)-o.height;var a=this.initOnly.svgRoot.createSVGMatrix().translate(-i,-s).scale(n);this.initOnly.getTopLeft().x=i,this.initOnly.getTopLeft().y=s,this.initOnly.matrixTransform.setMatrix(a);var f=this.initOnly.svgTransformElement.getCTM(),l="matrix("+f.a+","+f.b+","+f.c+","+f.d+","+f.e+","+f.f+")";for(var c=0;c<this.initOnly.overlayDivs.length;c++)$(this.initOnly.overlayDivs.item(c)).css("-webkit-transform",l),$(this.initOnly.overlayDivs.item(c)).css("transform",l),$(this.initOnly.overlayDivs.item(c)).css("-ms-transform",l),$(this.initOnly.overlayDivs.item(c)).css("-moz-transform",l);r||this.initOnly.updateScrollbars(),$(this.initOnly.svgRoot).trigger("originAndZoomChangedEvent"),this.initOnly.changeCallback({domainX:e,domainY:t,scale:n})},t.prototype.pan=function(e,t){this.setOriginAndZoom(this.initOnly.getTopLeft().x-e,this.initOnly.getTopLeft().y-t)},t.prototype.fitExperimentWithoutAnimation=function(){var e=this.computeZoomToFitLocation();e.scale>1&&(e.scale=1,e.domainX=this.initOnly.getBounds().x-(this.initOnly.getViewDimensions().width-this.initOnly.getBounds().width)/2,e.domainY=this.initOnly.getBounds().y-r.ExperimentEditorControlConstants.InitialZoomToFitYOffSet),this.setOriginAndZoom(e.domainX,e.domainY,e.scale,!0),this.initOnly.zoomControl.setScale(e.scale)},t}(i.Disposable);t.ZoomHelper=o}),define("generated/DataLabClient/TestMessaging",["require","exports"],function(e,t){function r(e){window.testMessagingEnabled&&window.postMessage(e,"*")}var n;(function(e){e.AnimationComplete="AnimationComplete"})(n=t.Constants||(t.Constants={})),t.postMessage=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/ExperimentEditorControl",["require","exports","../../TS/ViewModel/ExperimentEditor/Animation","../../TS/View/CoordinateHelper","../../TS/Global","../../TS/ViewModel/ExperimentEditor/LocalStorageCache","../../TS/ViewModel/ExperimentEditor/MiniMap","../../TS/View/DagSearchControl","../../TS/ViewModel/ExperimentEditor/Module","../../TS/Common/MouseCapture","../../TS/View/PanHelper","../../TS/View/ScrollControl","../../TS/ViewModel/Dialogs/TrialDialogs","../../TS/ViewModel/ExperimentEditor/XEStateMachine","../../TS/View/ZoomControl","../../TS/View/ZoomHelper","../../../DataLabClient/Constants","../../../DataLabClient/Disposable","../../../DataLabClient/Features","../../../DataLabClient/Logging/Logging","../../../DataLabClient/TestMessaging"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E=function(){function e(e,t,n,r,i,s){this._svgTransformElement=e,this._svgRoot=t,this._coordinateHelper=n,this._zoomControl=r,this._overlayDivs=i,this._zoomHelper=s}return Object.defineProperty(e.prototype,"svgTransformElement",{get:function(){return this._svgTransformElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"svgRoot",{get:function(){return this._svgRoot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinateHelper",{get:function(){return this._coordinateHelper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomControl",{get:function(){return this._zoomControl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomHelper",{get:function(){return this._zoomHelper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlayDivs",{get:function(){return this._overlayDivs},enumerable:!0,configurable:!0}),e}(),S=function(e){function t(t,n){var a=this;e.call(this);var f=this;if(!t)throw new Error("Experiment editor control must have a div for its view.");this.rootContainerDiv=t;var h;y.editorControl2Enabled()?h=ExperimentEditorTemplates._editorSurface2Markup:h=ExperimentEditorTemplates._editorSurfaceMarkup,this.registerForDisposal(new g.DisposableSetHTML(this.rootContainerDiv,h)),this.experimentCanvasDiv=this.rootContainerDiv.querySelector(".experimentEditorContainer"),this.registerForDisposal(new g.DisposableKOApplyBindings(n,this.experimentCanvasDiv));if(!this.experimentCanvasDiv)throw new Error("Experiment editor control's root container div is missing experiment editor container");this.canvasEventDiv=this.experimentCanvasDiv.querySelector(".customElements");var p=this.experimentCanvasDiv.querySelector("svg");if(p===null)throw new Error("The required root <svg> element does not exist");var m=p.querySelector("g");if(m===null)throw new Error("The required root <svg><g> element does not exist");this.registerForDisposal(new g.DisposableSubscription(n.needsAnimationToNode.subscribe(function(e){a.animateToGraphNode(e)})),new g.DisposableSubscription(n.needsAnimationToContent.subscribe(function(e){a.bringRectIntoView(e)}))),this.viewModel=n,this.viewModel.domainCoordinatesHelper=this,this.topLeft=p.createSVGPoint(),this.viewModel.experimentView=this,this.controlPanelDiv=this.rootContainerDiv.querySelector("#controlPanel");if(!this.controlPanelDiv)throw new Error("Required control panel div does not exist.");var b=new d.ZoomControl(this.controlPanelDiv,this.rootContainerDiv);this.registerForDisposal(b);var S=this.experimentCanvasDiv.querySelectorAll(".xe-overlay"),x=new l.PanHelper(this.controlPanelDiv,function(e){f._viewModel.panButtonClicked(e)}),T=function(){return f.getViewDimensions()},N=new r.CoordinateHelper(p,T,m),C=function(e){f.viewModel.experimentOrViewPerturbed.notifySubscribers(null),f.rememberPositionForExperiment(e,f.viewModel.experiment.experimentId())},k=function(){return f.topLeft},L=function(){f.viewModel.animationComplete.notifySubscribers(null),w.postMessage({type:w.Constants.AnimationComplete})},A=function(){f.updateScrollbars()},O=function(){return f.getExperimentBounds()},M=new v.ZoomHelper(m,p,N,b,T,C,k,L,A,S,O);if(y.dagSearchEnabled()){var _=ExperimentEditorTemplates._dagSearchMarkup;this.registerForDisposal(new g.DisposableSetHTML($(".dagSearchAnchorDiv").get(0),_));var D=$(".dagSearchIconAndContainerDiv").get(0);this.dagSearchControl=new u.DagSearchControl(this.rootContainerDiv,n),this.registerForDisposal(new g.DisposableKOApplyBindings(this.dagSearchControl,D))}if(y.miniMapInExperimentEditorEnabled()){var P=function(){return f.getGraphTransform()},H=function(e,t){return f.pan(e,t)};this.miniMapControl=new o.XEMiniMap(this.rootContainerDiv,P,T,O,H,this.viewModel.experimentOrViewBoundsChanged,this.viewModel.experimentOrViewPerturbed,this.viewModel.newExperimentLoaded),this.registerForDisposal(this.miniMapControl);var B=ExperimentEditorTemplates._miniMapMarkup;this.registerForDisposal(new g.DisposableSetHTML($(".miniMapAnchorDiv").get(0),B));var j=document.querySelector(".miniMapAndLauncherContainer");this.registerForDisposal(new g.DisposableKOApplyBindings(this.miniMapControl,j)),this.controlPanelDiv.parentElement.classList.add("marginToAllowForMiniMap")}this.initOnly=new E(m,p,N,b,S,M),this.viewModel.panResponder=this.initOnly.zoomHelper;var F=this.rootContainerDiv.querySelector(".xe-surface").appendChild(document.createElement("div")),I=this.rootContainerDiv.querySelector(".xe-surface").appendChild(document.createElement("div")),q=this.rootContainerDiv.querySelector(".xe-surface").appendChild(document.createElement("div"));q.setAttribute("class","scrollSpacer scrollUI");var R=c.ScrollControl.computeDimensions();q.style.width=R.verticalScrollbarWidth.toFixed()+"px",q.style.height=R.horizontalScrollbarHeight.toFixed()+"px",this.calculateScrollPosition=function(e){var t=e==0?"y":"x",n=e==0?"height":"width",r=a.viewModel.experimentView.getViewInfo(),i=a.getViewDimensions(),s=i[n]/f.initOnly.zoomControl.getScale(),o=f.initOnly.zoomHelper.getPanLimits(),u=r.topLeft[t]/f.initOnly.zoomControl.getScale()-o[t];return{elevatorLength:s/o[n],elevatorOffset:u/o[n]}},this.scrollVertical=new c.ScrollControl(I,this.calculateScrollPosition,0,R),this.scrollVertical.viewScrolled.subscribe(function(e){var t=f.initOnly.zoomHelper.getPanLimits();f.initOnly.zoomHelper.setOriginAndZoom(f.topLeft.x,(e*t.height+t.y)*f.initOnly.zoomControl.getScale(),f.initOnly.zoomControl.getScale(),!0)}),this.scrollHorizontal=new c.ScrollControl(F,this.calculateScrollPosition,1,R),this.scrollHorizontal.viewScrolled.subscribe(function(e){if(!a.viewModel.isBeingResized()){var t=f.initOnly.zoomHelper.getPanLimits();f.initOnly.zoomHelper.setOriginAndZoom((e*t.width+t.x)*f.initOnly.zoomControl.getScale(),f.topLeft.y,f.initOnly.zoomControl.getScale(),!0)}}),this.registerForDisposal(new g.DisposableEventListener(window,"resize",function(){f.updateScrollbars()}),new g.DisposableSubscription(this.viewModel.isBeingResized.subscribe(function(e){f.scrollHorizontal.sizeUpdated()})),new g.DisposableSubscription(this.viewModel.experimentOrViewBoundsChanged.subscribe(function(){f.scrollHorizontal.sizeUpdated()}))),this.setupEventHandlers(this.canvasEventDiv),this.isDraggingNewEntity=!1,this.experimentPositionCache=new s.LocalStorageCache("experimentPosition",i.ExperimentEditorControlConstants.NumberOfCacheLines),this.registerForDisposal(new g.DisposableSubscription(this.viewModel.newExperimentLoaded.subscribe(function(){var e=a.experimentPositionCache.fetch(f.viewModel.experimentViewModel().experiment.experimentId());if(e)f.initOnly.zoomControl.setScale(e.scale),f.initOnly.zoomHelper.setOriginAndZoom(e.domainX,e.domainY);else{var t=a.experimentPositionCache.fetch(f.viewModel.experiment.parentExperimentId);t?(f.initOnly.zoomControl.setScale(t.scale),f.initOnly.zoomHelper.setOriginAndZoom(t.domainX,t.domainY)):f.initOnly.zoomHelper.fitExperimentWithoutAnimation()}})),new g.DisposableSubscription(this.viewModel.setLastPositionForExperiment.subscribe(function(e){f.rememberPositionForExperiment({domainX:f.topLeft.x,domainY:f.topLeft.y,scale:f.initOnly.zoomControl.getScale()},e)})))}return __extends(t,e),t.prototype.clearPositionCache=function(){this.experimentPositionCache.clear()},t.prototype.updateScrollbars=function(){this.scrollHorizontal.sizeUpdated(),this.scrollVertical.sizeUpdated()},Object.defineProperty(t.prototype,"currentPanZoomAnimation",{get:function(){return this.initOnly.zoomHelper.currentAnimation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewModel",{get:function(){return this._viewModel},set:function(e){this._viewModel!==e&&(this._viewModel=e,this.viewModelDisposable&&this.viewModelDisposable.dispose(),this.registerForDisposal(this.viewModelDisposable=new g.Disposable),this.viewModelDisposable.registerForDisposal(new g.DisposableSubscription(this.viewModel.experimentDirty.subscribe(function(e){if(e){if(!window.isExperimentEditorTestPage){var t="You have unsaved changes in this experiment, which will be lost if you leave this page.";Shell.UI.Navigation.setConfirmNavigateAway(t),$(window).bind("onbeforeunload",function(){return t})}}else Shell.UI.Navigation.removeConfirmNavigateAway(),$(window).unbind("onbeforeunload")}))))},enumerable:!0,configurable:!0}),t.prototype.getPanLimits=function(e){return e===void 0&&(e=this.initOnly.zoomControl.getScale()),this.initOnly.zoomHelper.getPanLimits(e)},t.prototype.getScale=function(){return this.initOnly.zoomControl.getScale()},t.prototype.rememberPositionForExperiment=function(e,t){this.experimentPositionCache.add(e,t)},t.prototype.paletteDragMoved=function(e){e.preventDefault();var t=this.getViewDimensions(),n=this.initOnly.coordinateHelper.clientToDomainCoordinates(e.clientX,e.clientY);e.clientX>=t.x&&e.clientY>=t.y&&e.clientX<t.x+t.width&&e.clientY<t.y+t.height?this.isDraggingNewEntity===!1?(this.isDraggingNewEntity=!0,this.viewModel.paletteDragEnter(n)):this.viewModel.paletteDragMove(n):this.paletteDragCancel()},t.prototype.paletteDragStart=function(e,t){this.viewModel.paletteDragStart(t)},t.prototype.paletteDragEnd=function(e){this.isDraggingNewEntity=!1;var t=this.viewModel.paletteDragEnd(),n=this.initOnly.coordinateHelper.clientToDomainCoordinates(e.clientX,e.clientY),r=this.initOnly.svgTransformElement.getCTM(),i="matrix("+r.a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")";for(var s=0;s<this.initOnly.overlayDivs.length;s++)$(this.initOnly.overlayDivs.item(s)).css("-webkit-transform",i),$(this.initOnly.overlayDivs.item(s)).css("transform",i),$(this.initOnly.overlayDivs.item(s)).css("-ms-transform",i),$(this.initOnly.overlayDivs.item(s)).css("-moz-transform",i);if(t){var o=this.initOnly.zoomControl.getScale(),u=(t.x()-(n.x-this.topLeft.x/o-t.width()/2))*o,a=(t.y()-(n.y-this.topLeft.y/o-t.height()/2))*o;this.initOnly.zoomHelper.animateToLocation(u,a),this.viewModel.selectionManager.resetSelection(),this.viewModel.selectionManager.selectEntity(t)}},t.prototype.paletteDragCancel=function(){this.viewModel.paletteDragLeave(),this.isDraggingNewEntity=!1},t.prototype.zoom=function(e){this.initOnly.zoomHelper.zoom(e)},t.prototype.pan=function(e,t){this.initOnly.zoomHelper.pan(e,t)},t.prototype.getViewDimensions=function(){var e=null;try{e=this.experimentCanvasDiv.getBoundingClientRect()}catch(t){e=null,b.customEvent({key:"ExceptionTelemetry",type:"getBoundingClientRectThrewException",data:JSON.stringify(t)})}var n={x:e?e.left:0,y:e?e.top:0,width:this.experimentCanvasDiv.clientWidth,height:this.experimentCanvasDiv.clientHeight},r=document.querySelector(".experiment-header");return r&&(n.height-=r.clientHeight),n},Object.defineProperty(t.prototype,"viewCenter",{get:function(){return this.initOnly.zoomHelper.viewCenter},enumerable:!0,configurable:!0}),t.prototype.addEntityToCenter=function(e,t){var r=this,s=this.viewModel.experimentViewModel().experiment.getDatasetNode(e.id()),o=this.viewModel.experimentViewModel().experiment.getTrainedModelNode(e.id()),u=this.viewModel.experimentViewModel().experiment.getTransformNode(e.id()),f=function(e){var t=r.viewModel.experimentViewModel().getViewModelForNode(e);r.animateToGraphNode(t),r.viewModel.selectionManager.resetSelection(),r.viewModel.selectionManager.selectEntity(t)};if(s){f(s);return}if(o){f(o);return}if(u){f(u);return}var l=this.initOnly.zoomHelper.viewCenter,c=this.initOnly.coordinateHelper.clientToDomainCoordinates(t.clientX,t.clientY),h=this.viewModel.createNode(e.type(),e.id(),c.x,c.y),p=this.initOnly.coordinateHelper.clientToDomainCoordinates(l.x-h.width()/2,l.y-h.height()/2);p=this.viewModel.calculatePlacement(p);var d=new Object;d.x={start:c.x,end:p.x},d.y={start:c.y,end:p.y};var v=new n.Animation(function(e){h.x(e.x),h.y(e.y)},d,i.ExperimentEditorControlConstants.ModuleFromPaletteAnimationDuration),m=v.animationEnded.subscribe(function(){var e=r.viewModel.experimentViewModel().addNode(h);if(e){var t=!0;h instanceof a.Module?t&&b.featureUsage({featureID:37,groupID:38,experimentID:r._viewModel.experiment.experimentIdForLogging,moduleID:h.moduleNode.module_.id,data:h.moduleNode.module_.name()}):t&&b.featureUsage({featureID:229,groupID:38,experimentID:r._viewModel.experiment.experimentIdForLogging,data:{label:h.label,type:h.graphNodeType,id:h.graphNode.id}}),r.viewModel.selectionManager.resetSelection(),r.viewModel.selectionManager.selectEntity(e)}r.bringRectIntoView({x:p.x,y:p.y,width:h.width(),height:h.height()}),w.postMessage({type:w.Constants.AnimationComplete}),m.dispose()});v.start()},t.prototype.clientToDomainCoordinates=function(e,t){return this.initOnly.coordinateHelper.clientToDomainCoordinates(e,t)},t.prototype.getExperimentBounds=function(){var e=_.clone(Shell.Utilities.getBBoxOrDefaultSVGRect(this.initOnly.svgTransformElement)),t=this.experimentCanvasDiv.querySelectorAll(".customElements div.nodeComment");for(var n=0;n<t.length;n++){var r=t.item(n).getBoundingClientRect().bottom,i=this.initOnly.coordinateHelper.clientToDomainCoordinates(0,r);i.y>e.y+e.height&&(e.height=i.y-e.y)}return e},t.prototype.zoomToFitWithAnimation=function(){this.initOnly.zoomHelper.zoomToFitWithAnimation()},t.prototype.getViewInfo=function(){return{topLeft:this.topLeft,experimentBounds:this.getExperimentBounds()}},t.prototype.getGraphTransform=function(){return this.initOnly.svgTransformElement.getCTM()},t.prototype.getDestinationOrigin=function(){return this.initOnly.zoomHelper.getDestinationOrigin()},t.prototype.animateToGraphNode=function(e){this.bringRectIntoView({x:e.x(),y:e.y(),width:e.width(),height:e.height()})},t.prototype.setupEventHandlers=function(e){var t=this,n=function(e){t.viewModel.entityMouseUp(null,e)};e.addEventListener("mouseup",n);var r=function(e){n(e)};e.addEventListener("mousedown",function(e){t.viewModel.entityMouseDown(null,e)});var i=function(e){t.viewModel.onMouseMove(e)},s=function(e){e.preventDefault(),$(e.target).closest(".experimentCanvas").length===0&&(e.stopPropagation(),r(e))};this.registerForDisposal(new f.MouseCapture(e,i,s)),e.addEventListener("mousedown",function(e){t.rootContainerDiv.focus()},!0),this.registerForDisposal(new g.DisposableEventListener(this.rootContainerDiv,"keydown",function(e){switch(e.keyCode){case 46:t.viewModel.stateMachine.handleAction(4),e.stopImmediatePropagation(),e.preventDefault();break;case 65:e.shiftKey&&t.viewModel.stateMachine.handleAction(6);break;case 27:t.viewModel.stateMachine.handleAction(5);break;case 113:t.viewModel.stateMachine.handleAction(7);break;case 67:e.ctrlKey&&(e.preventDefault(),t.viewModel.copy());break;case 83:e.ctrlKey&&(e.preventDefault(),t.viewModel.draftStateMachine.validateForSaveDraft()||t.viewModel.draftStateMachine.saveDraft().fail(function(e){y.trialLimitationsEnabled()&&h.tryShowDialogForTrialRestriction(e)}));break;case 88:e.ctrlKey&&(e.preventDefault(),t.viewModel.stateMachine.handleAction(8));break;case 86:if(e.ctrlKey){e.preventDefault();var n=t.initOnly.zoomControl.getScale(),r={x:t.topLeft.x/n,y:t.topLeft.y/n,matrixTransform:null};t.viewModel.paste()}break;case 32:!e.altKey&&!e.shiftKey&&!e.ctrlKey&&t.viewModel.stateMachine.handleAction(9)}}),new g.DisposableEventListener(this.rootContainerDiv,"keyup",function(e){e.keyCode===32&&t.viewModel.stateMachine.handleAction(10)}))},t.prototype.bringRectIntoView=function(e){var t=this.getViewDimensions(),n=this.initOnly.zoomControl.getScale();t.x=this.topLeft.x/n,t.y=this.topLeft.y/n,t.width/=n,t.height/=n;if(e){var r=this.topLeft.x/n,i=this.topLeft.y/n,s=!1;e.width=Math.min(t.width,e.width),e.height=Math.min(t.height,e.height),e.x<t.x?(r=e.x,s=!0):e.x+e.width>t.x+t.width&&(r+=e.x+e.width-(t.x+t.width),s=!0),e.y<t.y?(i=e.y,s=!0):e.y+e.height>t.y+t.height&&(i+=e.y+e.height-(t.y+t.height),s=!0),s?this.initOnly.zoomHelper.animateToLocation(r*n,i*n,n):this.viewModel.animationComplete.notifySubscribers(null)}},t}(g.Disposable);t.ExperimentEditorControl=S});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/PaletteControl",["require","exports","../../TS/Global","../../../DataLabClient/Disposable"],function(e,t,n,r){var i=function(e){function t(t,n){var i=this;e.call(this);if(!t)throw new Error("Palette control has no backing div.");this.rootContainerDiv=t;if(!n)throw new Error("Palette control must have a backing view model.");this.paletteViewModel=n;var s;this.registerForDisposal(new r.DisposableSetHTML(this.rootContainerDiv,ExperimentEditorTemplates._paletteMarkup),new r.DisposableKOApplyBindings(this.paletteViewModel,this.rootContainerDiv),new r.DisposableSubscription(this.paletteViewModel.isDragging.subscribe(function(e){e?i.registerForDisposal(s=new r.DisposableEventListener(document.body,"keydown",function(e){e.keyCode===27&&(i.paletteViewModel.cancelDrag(),s.dispose())})):s&&s.dispose()})))}return __extends(t,e),t}(r.Disposable);t.PaletteControl=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/PropertyEditorControl",["require","exports","../../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t,r){e.call(this);if(!t)throw new Error("Property editor root div does not exist");this.rootContainerDiv=t;if(!r)throw new Error("argument: viewModel cannot be undefined or null");this.viewModel=r,this.registerForDisposal(new n.DisposableSetHTML(this.rootContainerDiv,ExperimentEditorTemplates._propertyEditorMarkup),new n.DisposableKOApplyBindings(r,this.rootContainerDiv))}return __extends(t,e),t}(n.Disposable);t.PropertyEditorControl=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/ExperimentEditorContainer",["require","exports","../../TS/View/Balloon","../../TS/View/ExperimentEditorControl","../../TS/View/PaletteControl","../../TS/View/PropertyEditorControl","../../../DataLabClient/Disposable"],function(e,t,n,r,i,s,o){var u;(function(e){var t;(function(e){e.Id="#propertyEditorRoot"})(t=e.PropertyEditor||(e.PropertyEditor={}))})(u=t.Constants||(t.Constants={}));var a=function(e){function t(t,n){e.call(this),this.shield=null,this.parentDiv=t,this.experimentEditorContainerViewModel=n,t.experimentEditorContainer=this,this.registerForDisposal(new o.DisposableSetHTML(t,ExperimentEditorTemplates._experimentEditorMarkup),new o.DisposableKOApplyBindings(n,t.querySelector(".headerExperimentEditorContainer")),new o.DisposableKOApplyBindings(n,t.querySelector(".xe-utilityPanelRoot"))),this.registerForDisposal(this.xeControl=new r.ExperimentEditorControl(t.querySelector(".experimentEditorRoot"),n.experimentEditorViewModel),this.paletteView=new i.PaletteControl(t.querySelector(".xe-utilityPanel"),n.paletteViewModel),this.propertyEditorControl=new s.PropertyEditorControl(t.querySelector(".propertyEditorRoot"),n.propertyEditorViewModel)),n.paletteViewModel.registerActivationEvent(this.xeControl.addEntityToCenter.bind(this.xeControl)),n.paletteViewModel.dragResponder=this.xeControl}return __extends(t,e),t.prototype.zoomToFitIfSample=function(){this.experimentEditorContainerViewModel.userWorkspaceExperiment()||this.xeControl.zoomToFitWithAnimation()},t.prototype.zoomToFitWithAnimation=function(){var e=$.Deferred();this.xeControl.zoomToFitWithAnimation();var t=this.xeControl.viewModel.animationComplete.subscribe(function(){e.resolve()});return e.promise().done(function(){t.dispose()})},t.prototype.dispose=function(){n.hide(),delete this.parentDiv.experimentEditorContainer,e.prototype.dispose.call(this)},t.prototype.block=function(){Shell.UI.Spinner.show();if(!this.shield){this.shield=$('<div class="shield" />');var e=$(this.parentDiv).find(".experiment-container");e.length===1&&(e.append(this.shield),this.shield.focus())}},t.prototype.unblock=function(){this.shield&&(this.shield.remove(),this.shield=null),Shell.UI.Spinner.hide()},t}(o.Disposable);t.ExperimentEditorContainer=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/ExperimentSaveAsViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/CustomUX","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/Help","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o,u,a){var f=function(e){function t(t,s){var f=this;e.call(this),this.hasErrors=ko.observable(!0),this.name=a.validatableObservable(s+o.copyForNewExperimentName,function(e){return/\S/.test(e)?(f.hasErrors(!1),null):(f.hasErrors(!0),o.experimentNameError)}),this.name.subscribe(function(){f.name.startValidating(),f.name.validate()}),this.launchSaveAsHelp=function(){i.openHelpWindow(r.saveAsHelpLinkGuid)},this.save=function(){t(f.name())},this.saveNameAndClose=function(){f.name.startValidating(),f.name.validate(),f.hasErrors()||(f.save(),n.close(),u.customEvent({key:"Close",type:"SaveAs",data:t()}))}}return __extends(t,e),t}(s.Disposable);t.ExperimentSaveAsViewModel=f}),define("generated/editor/TS/View/MarkdownEditor/MarkdownEditor",["require","exports","../../../TS/Global"],function(e,t,n){function a(e,t){return new u(e.value,e.placeholder,t.element,e.idPostfix||null)}var r="wmd-button-bar",i="wmd-input",s="wmd-preview",o;(function(e){e[e.EDIT=0]="EDIT",e[e.PREVIEW=1]="PREVIEW"})(o||(o={}));var u=function(){function e(e,t,n,o){this.inPreview=ko.observable(!1),this.value=e,this.placeholder=ko.observable(t),o=o||"",this.inPreview.forEditing=ko.computed({read:function(){return this.inPreview().toString()},write:function(e){this.inPreview(e==="true")},owner:this}),this.buttonBarId=ko.observable(r+o),this.inputAreaId=ko.observable(i+o),this.previewAreaId=ko.observable(s+o),this.textareaElement=$(n).find("textarea")[0],this.previewElement=$(n).find(".wmd-preview")[0],this.textareaElement&&this.previewElement&&(this.textareaElement.addEventListener("scroll",_.throttle(this.syncScrolling.bind(this,0),200)),this.textareaElement.addEventListener("keydown",this.handleTabKey.bind(this)),this.previewElement.addEventListener("scroll",_.throttle(this.syncScrolling.bind(this,1),200))),this.setupMarkdown()}return e.prototype.handleTabKey=function(e){if(e.keyCode===9){var t="    ",n=this.textareaElement,r=n.selectionStart,i=n.selectionEnd;if(r>i){var s=r;r=i,i=s}var o=n.value;n.value=o.substring(0,r)+t+o.substring(i),n.selectionStart=n.selectionEnd=r+t.length,e.preventDefault()}},e.prototype.syncScrolling=function(e){var t=this;requestAnimationFrame(function(){var n=e===0?t.textareaElement:t.previewElement,r=e===0?t.previousEditorScrollPosition:t.previousPreviewScrollPosition,i=e===0?t.previewElement:t.textareaElement,s=n.scrollHeight,o=n.scrollTop,u,a=i.scrollHeight,f=n.clientHeight;o!==r&&s>f&&a>f&&(u=0|o/(s-f)*(a-f),i.scrollTop=u,e===0?(t.previousEditorScrollPosition=o,t.previousPreviewScrollPosition=u):(t.previousPreviewScrollPosition=o,t.previousEditorScrollPosition=u))})},e.prototype.setupMarkdown=function(){var e=this;this.converter=window.Markdown.getSanitizingConverter(),this.editor=new window.Markdown.Editor(this.converter,"",{strings:{linkdialog:"<p><b>Insert Hyperlink</b></p><p>http://example.com/</p>",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg</p>"}}),setTimeout(function(){e.editor.run()},0)},e}();t.MarkdownEditor=u,t.createMarkdownEditorViewModel=a,t.markdownEditorRegisterInfo={componentName:"markdown-editor",viewModel:{createViewModel:a},template:ExperimentEditorTemplates._markdownEditorMarkup}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/PauseUserWithSpinnerViewModel",["require","exports","../../../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t){e.call(this),this.title=t}return __extends(t,e),t}(n.Disposable);t.PauseUserWithSpinnerViewModel=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/AddWebServicePortAnimationOperation",["require","exports","../../../TS/ViewModel/Operations/AsyncOperation","../../../TS/ViewModel/Operations/MoveNodesAnimationOperation","../../../../DataLabClient/Util","../../../../DataLabClient/Model/WebServicePortNode"],function(e,t,n,r,i,s){var o=function(e){function t(){e.apply(this,arguments),this.webServiceInputPorts=[],this.webServiceOutputPorts=[],this.webServiceInputPortNodes=[],this.webServiceOutputPortNodes=[]}return __extends(t,e),t.prototype.initialize=function(e,t){this.experiment=e,this.workspace=t},t.prototype.runInternalAsync=function(){var e=this,t=new r.MoveNodesAnimationOperation;return t.initialize(i.values(this.experiment.nodes())),i.forEach(this.webServiceInputPorts,function(n){if(n){var r=e.experiment.addWebServicePort(0,n.parent.x(),n.parent.y(),null,e.workspace.applicationCache.dataTypeRegistry,n);t.AddMovement({node:r,direction:0}),e.webServiceInputPortNodes.push(r)}}),i.forEach(this.webServiceOutputPorts,function(n){if(n){var r=e.experiment.addWebServicePort(1,n.parent.x(),n.parent.y(),null,e.workspace.applicationCache.dataTypeRegistry,n);t.AddMovement({node:r,direction:1}),e.webServiceOutputPortNodes.push(r)}}),t.runAsync()},t}(n.AsyncOperation);t.AddWebServicePortAnimationOperation=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/PrepareWebServiceOperation",["require","exports","../../../TS/ViewModel/Operations/AddWebServicePortAnimationOperation","../../../TS/ViewModel/Operations/AsyncOperation","../../../TS/Global","../../../TS/ViewModel/Operations/GuideTours","../../../TS/ViewModel/Operations/ModelHelpers","../../../../DataLabClient/Constants","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/Port","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e){function t(t,n){e.call(this),this.inputPort=null,this.outputPorts=[],this.nodes=[],this.inputPortDepth=Number.MAX_VALUE,this.outputPortDepth=0,this.inputToOutputDepth=0,t&&this.initialize(t,n)}return __extends(t,e),t.prototype.reset=function(){this.inputPort=null,this.outputPorts=[],this.inputPortDepth=Number.MAX_VALUE,this.outputPortDepth=0,this.inputToOutputDepth=0},t.prototype.initialize=function(e,t){this.experimentContainerViewModel=e,this.experiment=e.experiment,this.experimentEditorViewModel=e.experimentEditorViewModel,this.workspace=e.workspace,this.nodes=l.values(this.experiment.nodes()),this.xeControlContainer=t,this.reset()},t.prototype.runAsync=function(){var t=this;return a.featureUsage({featureID:68,groupID:68,experimentID:this.experiment.experimentIdForLogging}),e.prototype.runAsync.call(this).fail(function(e){a.featureUsage({featureID:71,groupID:68,experimentID:t.experiment.experimentIdForLogging,data:e&&e.message})})},t.prototype.runInternalAsync=function(){var e=this;this.reset();if(!this.searchTrainingModule())return s.GuideTours.showMultipleTrainModuleSelectionTour(),l.fail(new Error("There are more than one train module in the training experiment. Please select one and retry."));this.searchGraph(),this.addTrainModulePort();var t=new n.AddWebServicePortAnimationOperation;return t.initialize(this.experiment,this.workspace),this.inputPort&&t.webServiceInputPorts.push(this.inputPort),this.outputPorts.length&&[].push.apply(t.webServiceOutputPorts,this.outputPorts),this.experiment.isWebServiceExperiment(!0),this.experimentEditorViewModel.experimentViewModel().displayFlowType(i.ExperimentDataFlowType.WebService),t.runAsync().then(function(){return e.xeControlContainer.zoomToFitWithAnimation()}).then(function(){var n=null;return t.webServiceInputPortNodes.length?n=t.webServiceInputPortNodes[0]:t.webServiceOutputPortNodes.length&&(n=t.webServiceOutputPortNodes[0]),s.GuideTours.showPrepareWebServiceTourAsync(n,e.experimentContainerViewModel.paletteViewModel,u.ResourceCategory.WebService)})},t.prototype.searchTrainingModule=function(){this.trainModuleNode=null;var e=o.ModelHelpers.getTrainingModuleNodes(this.experiment);if(e.length>1){var t=l.values(this.experimentEditorViewModel.selectionManager.selectedGraphNodes());if(!(t&&t.length===1&&e.indexOf(t[0].graphNode)>=0))return!1;this.trainModuleNode=t[0].graphNode}else e.length===1&&(this.trainModuleNode=e[0]);return!0},t.prototype.addTrainModulePort=function(){if(this.trainModuleNode){if(this.outputPorts.length===1){var e=this.outputPorts[0];(!e||e.isTrainModulePort())&&delete this.outputPorts[0]}var t=null;l.forEach(this.trainModuleNode.outputPorts,function(e){e instanceof f.OutputPort&&(t=e)}),this.outputPorts.push(t)}},t.prototype.searchGraph=function(){var e=this;l.forEach(this.nodes,function(t){e.isRoot(t)&&e.searchTree(t)})},t.prototype.searchTree=function(e,t,n,r){var i=this;t===void 0&&(t=null),n===void 0&&(n=0),r===void 0&&(r=0),t||l.forEach(e.inputPorts,function(e){return e.isConnected()&&e.isDatasetDataType()?(t=e,r=1,!1):!0});var s=null;l.forEach(e.outputPorts,function(e){return e.isDatasetDataType()||e.isTrainModulePort()?(s=e,!1):!0}),t&&s?r>this.inputToOutputDepth&&(this.inputPort=t,this.outputPorts[0]=s,this.inputToOutputDepth=r):this.inputToOutputDepth||(t&&r===1&&n<this.inputPortDepth&&(this.inputPort=t,this.inputPortDepth=n,this.outputPorts[0]=null,this.outputPortDepth=0),!this.inputPort&&s&&n+1>this.outputPortDepth&&(this.outputPorts[0]=s,this.outputPortDepth=n+1)),r&&r++,l.forEach(e.outputPorts,function(e){l.forEach(e.connectedNonWebServicePorts(),function(e){i.searchTree(e.parent,t,n+1,r)})})},t.prototype.isRoot=function(e){var t=l.values(e.inputPorts);return t.length?t.every(function(e){return!e.isConnected()}):!0},t}(r.AsyncOperation);t.PrepareWebServiceOperation=c}),define("generated/editor/TS/ViewModel/ExperimentEditor/PublishToCommunityOnCompleteViewModel",["require","exports","../../../../DataLabClient/Model/CommunityExperiment","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Constants"],function(e,t,n,r,i,s,o){var u=function(){function e(e,t,n){var s=this;this.goToGalleryImage=ko.observable("/Content/Images/rightArrowLink.png"),n?(this.header=ko.observable(r.publishModuleToCommunityPublishedModuleHeader),this.description=ko.observable(r.publishModuleToCommunityPublishedModuleVisitGalleryLabel),this.linkLabel=ko.observable(r.publishModuleToCommunityPublishedModuleLinkLabel)):(this.header=ko.observable(r.publishExperimentToCommunityPublishedExperimentHeader),this.description=ko.observable(r.publishExperimentToCommunityPublishedExperimentVisitGalleryLabel),this.linkLabel=ko.observable(r.publishExperimentToCommunityPublishedExperimentLinkLabel)),this.catalogExperimentUrl=ko.observable(e),this.publishVisibility=t,this.publishVisibilityIsPublic=ko.pureComputed(function(){return s.publishVisibility===1}),this.defaultPromotionTitle=ko.observable(r.publishExperimentToCommunitySharePromotionTitle),this.defaultPromotionText=ko.observable(i.format(r.publishExperimentToCommunitySharePromotionText,r.productNameMedium)),this.twitterButtonOptions=ko.computed(function(){return{url:s.catalogExperimentUrl(),text:s.defaultPromotionText(),hashtags:"AzureML",title:r.publishExperimentToCommunityTwitterButtonTitle}}),this.emailBody=ko.computed(function(){return s.defaultPromotionText()+"\n\n"+s.catalogExperimentUrl()}),this.emailSubject=ko.computed(function(){return s.defaultPromotionTitle()}),this.emailLink=ko.computed(function(){return"mailto:?"+i.param({Subject:s.emailSubject(),Body:s.emailBody()})})}return e.prototype.setLinkHoverImage=function(){this.goToGalleryImage("/Content/Images/rightArrowLinkOnHover.png")},e.prototype.setLinkNoHoverImage=function(){this.goToGalleryImage("/Content/Images/rightArrowLink.png")},e.prototype.logEvent=function(e){var t={twitter:222,email:224,gallery:223};return!t[e]||s.featureUsage({featureID:t[e],groupID:0,data:{catalogExperimentUrl:this.catalogExperimentUrl()}}),!0},e.prototype.dismissed=function(e){},e}();t.PublishToCommunityOnCompleteViewModel=u}),define("generated/editor/TS/ViewModel/ExperimentEditor/CommunityStockImages",["require","exports"],function(e,t){var n=function(){function e(){}return e}();t.StockImage=n;var r=function(){function e(){}return e.init=function(t){e.Gallery.forEach(function(e){e.url=t+"/"+e.url})},e.Gallery=[{category:"1",url:"Gallery_StockImages_AdTargeting.svg"},{category:"1",url:"Gallery_StockImages_Aerospace.svg"},{category:"1",url:"Gallery_StockImages_Agriculture.svg"},{category:"1",url:"Gallery_StockImages_AnomalyDetection.svg"},{category:"1",url:"Gallery_StockImages_BinaryClassification.svg"},{category:"1",url:"Gallery_StockImages_Construction.svg"},{category:"1",url:"Gallery_StockImages_CustomerChurnAnalysis.svg"},{category:"1",url:"Gallery_StockImages_DecisionForest.svg"},{category:"1",url:"Gallery_StockImages_DecisionTree.svg"},{category:"1",url:"Gallery_StockImages_Education.svg"},{category:"1",url:"Gallery_StockImages_EnergyUtility.svg"},{category:"1",url:"Gallery_StockImages_EquipmentMonitoring.svg"},{category:"1",url:"Gallery_StockImages_Finance.svg"},{category:"1",url:"Gallery_StockImages_Forecasting.svg"},{category:"1",url:"Gallery_StockImages_FraudDetection.svg"},{category:"1",url:"Gallery_StockImages_General.svg"},{category:"1",url:"Gallery_StockImages_GeneralStats.svg"},{category:"1",url:"Gallery_StockImages_GovernmentPublicService.svg"},{category:"1",url:"Gallery_StockImages_Healthcare.svg"},{category:"1",url:"Gallery_StockImages_HypothesisTesting.svg"},{category:"1",url:"Gallery_StockImages_ImageRecognition.svg"},{category:"1",url:"Gallery_StockImages_KMeanClustering.svg"},{category:"1",url:"Gallery_StockImages_LinearRegression.svg"},{category:"1",url:"Gallery_StockImages_LogisticRegression.svg"},{category:"1",url:"Gallery_StockImages_Manufacturer.svg"},{category:"1",url:"Gallery_StockImages_MarketingAdvertising.svg"},{category:"1",url:"Gallery_StockImages_Media.svg"},{category:"1",url:"Gallery_StockImages_MulticlassClassification.svg"},{category:"1",url:"Gallery_StockImages_NeuralNetwork.svg"},{category:"1",url:"Gallery_StockImages_Pharma.svg"},{category:"1",url:"Gallery_StockImages_Recommendations.svg"},{category:"1",url:"Gallery_StockImages_Retail.svg"},{category:"1",url:"Gallery_StockImages_SentimentAnalysis.svg"},{category:"1",url:"Gallery_StockImages_SpamFiltering.svg"},{category:"1",url:"Gallery_StockImages_Sports.svg"},{category:"1",url:"Gallery_StockImages_SupportVectorMachine.svg"},{category:"1",url:"Gallery_StockImages_Technology.svg"},{category:"1",url:"Gallery_StockImages_TextAnalysis.svg"},{category:"1",url:"Gallery_StockImages_TravelLeisure.svg"}],e}();t.CommunityStockImages=r}),define("generated/DataLabClient/UtilFile",["require","exports","./LocalizedResources","./Util"],function(e,t,n,r){function i(e){var t=$.Deferred(),i=!1,s=new FileReader;s.onload=function(e){if(!i){var n=e.target.result;t.resolve(n)}},s.onerror=s.onabort=function(){i||(i=!0,t.reject(this.error))};try{s.readAsDataURL(e)}catch(o){return r.fail(new Error(n.imageUploadError_GenericLoading))}return r.when(t.promise())}t.readDataUrlFromBlob=i}),define("generated/DataLabClient/ImageContent",["require","exports","./Util"],function(e,t,n){var r=function(){function e(e,t){this.dataUrl=e;if(typeof t=="string"){var r=t;this.type=r,this.size=n.getBytesEncodedInBase64String(this.base64Text)}else{var i=t;this.size=i.size,this.type=i.type}}return Object.defineProperty(e.prototype,"base64Text",{get:function(){return this.dataUrl.replace(/^.*?base64,/,"")},enumerable:!0,configurable:!0}),e}();return r}),define("generated/DataLabClient/UtilImages",["require","exports","./LocalizedResources","./Util","./UtilFile","./ImageContent"],function(e,t,n,r,i,s){function o(e,n,o){var f=r.then(i.readDataUrlFromBlob(e),function(i){return r.then(u(i),function(o){try{var u=n.maxHeight&&o.naturalHeight>n.maxHeight||n.maxWidth&&o.naturalWidth>n.maxWidth;if(u){var f=a(o,e.type,n);return r.succeed(new s(f,e.type))}return r.succeed(new s(i,e))}catch(l){return r.fail(new Error(t.FileSelectionErrors.errorLoadingIntoImage))}})});return r.then(f,function(e){if(o&&e.size>r.megaBytesToBytes(o)){var n=r.format(t.FileSelectionErrors.fileTooLarge,o.toString());return r.fail(new Error(n))}return r.succeed(e)})}function u(e){var n=$.Deferred(),i=new Image;i.onload=function(e){var t=e.target;n.resolve(t)},i.onerror=function(e){n.reject(new Error(t.FileSelectionErrors.errorLoadingIntoImage))};try{i.src=e}catch(s){return r.fail(new Error(t.FileSelectionErrors.errorLoadingIntoImage))}return r.when(n.promise())}function a(e,t,n){var r=e.naturalWidth,i=e.naturalHeight;if(!n.maxHeight&&!n.maxWidth)throw new Error("Need to specify at least one max dimension");n.maxHeight&&i>n.maxHeight&&(r*=n.maxHeight/i,i=n.maxHeight),n.maxWidth&&r>n.maxWidth&&(i*=n.maxWidth/r,r=n.maxWidth);var s=document.createElement("canvas"),o=s.getContext("2d");return s.width=r,s.height=i,o.drawImage(e,0,0,r,i),s.toDataURL(t)}t.FileSelectionErrors={fileTooLarge:n.imageUploadError_FileTooLarge,errorLoadingIntoImage:n.imageUploadError_GenericLoading},t.resizeFileIfNecessary=o}),define("generated/editor/TS/ViewModel/ExperimentEditor/ImageUploadViewModel",["require","exports","../../../../DataLabClient/UtilImages"],function(e,t,n){var r=function(){function e(e,t){var n=this;this.maxSizeInMegabytes=e,this.imageResizeOptions=t,this.finalImageContent=ko.observable(),this.selectedImage=ko.observable(),this.errorMessage=ko.observable(),this.isProcessingSelectedImage=ko.observable(!1),this.selectedImage.subscribe(function(e){e&&n.processSelectedImage(e)})}return e.prototype.clearImage=function(){this.finalImageContent(null),this.selectedImage(null),this.errorMessage(null)},e.prototype.processSelectedImage=function(e){var t=this;return this.isProcessingSelectedImage(!0),this.finalImageContent(null),this.errorMessage(null),n.resizeFileIfNecessary(e,this.imageResizeOptions,this.maxSizeInMegabytes).done(function(e){t.finalImageContent(e)}).fail(function(e){t.errorMessage(e.message)}).always(function(e){t.isProcessingSelectedImage(!1)})},e}();t.ImageUploadViewModel=r}),define("generated/editor/TS/ViewModel/ExperimentEditor/ImageSelectorViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/CommunityStockImages","../../../TS/ViewModel/ExperimentEditor/ImageUploadViewModel"],function(e,t,n,r){var i=function(){function e(){var e=this;this.imageUploadViewModel=new r.ImageUploadViewModel(.5,{maxWidth:960,maxHeight:640}),this.selectedStockImgUrl=ko.observable(""),this.stockImages=[],this.PlaceHolderImageURL="/Content/Images/image-placeholder.svg",this.selectedImageThumbnailSrc=ko.computed(function(){return e.imageUploadViewModel.finalImageContent()?e.imageUploadViewModel.finalImageContent().dataUrl:e.selectedStockImgUrl()?e.selectedStockImgUrl():e.PlaceHolderImageURL}),this.hasImage=ko.computed(function(){return Boolean(e.selectedImageThumbnailSrc()!=e.PlaceHolderImageURL)}),this.selectStockImage=function(t,n){e.selectedStockImgUrl(t.url),$(".imgGallery").removeClass("imgGallerySelected"),$(n.currentTarget).addClass("imgGallerySelected"),e.imageUploadViewModel.clearImage()},this.fillStockImages()}return e.prototype.fillStockImages=function(){var e=this;n.CommunityStockImages.Gallery.forEach(function(t){e.stockImages.push(t)})},e}();t.ImageSelectorViewModel=i}),define("generated/editor/TS/ViewModel/ExperimentEditor/TagTextBoxViewModel",["require","exports","../../../../DataLabClient/UtilString","../../../../DataLabClient/Validation"],function(e,t,n,r){var i=function(){function e(e){var t=this;this.tags=e,this.nameInputFocused=ko.observable(!1),this.setNameInputFocused=function(){t.nameInputFocused(!0)},this.removeTag=function(e){t.tags.remove(e)},this.currentTag=r.validatableObservable("",$.noop),this.currentTag.subscribe(function(){if(t.currentTag()!==""){var e=n.getArrayFromCommaSeparatedString(t.currentTag());e.forEach(function(e){e!==""&&t.tags().indexOf(e)===-1&&t.tags.push(e)})}t.currentTag.startValidating(),t.currentTag.validate(),t.currentTag("")}),this.hasTags=ko.computed(function(){return t.tags().length>0})}return e}();t.TagTextBoxViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/PublishToCommunityWizardViewModel",["require","exports","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/ImageSelectorViewModel","../../../TS/ViewModel/ExperimentEditor/TagTextBoxViewModel","../../../../DataLabClient/Model/CommunityExperiment","../../../TS/ViewModel/ExperimentEditor/CommunityHelpers","../../../../DataLabClient/Disposable","../../../../DataLabClient/Model/Experiment","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=s.CommunityExperimentVisibility,d=s.CommunityExperimentAuthor,v=s.Owner,m=function(e){function t(n,s){var u=this;s===void 0&&(s=null),e.call(this),this.experimentViewModel=n,this.tagTextBoxViewModel=i,this.summary=ko.observable(""),this.description=ko.observable(""),this.tags=ko.observableArray(),this.hasConsentedCredentials=ko.observable(!1),this.hasConsentedCustomModules=ko.observable(!1),this.uploadImageOption=ko.observable(0),this.localUploadImageOptions=t.uploadImageOptions,this.hasAcceptedTermsOfUse=ko.observable(!1),this.onWizardClosingEvent=new ko.subscribable,this.onWizardCompleted=ko.observable(!1),this.isRepublish=!!s,this.detailsFromGallery=ko.observable(this.isRepublish&&s.galleryExperimentName!==""),this.previousPublishTypeHidden=this.isRepublish?s.hidden:!1,this.publishTypeString=ko.observable(null),this.publishAuthorString=ko.observable(null),this.isRepublish&&(this.previousPublishTypeHidden?this.publishTypeString(0..toString()):this.publishTypeString(1..toString()),this.publishAuthorString(s.galleryExperimentAuthor!=null&&s.galleryExperimentOwner!=null&&s.galleryExperimentAuthor.id!==s.galleryExperimentOwner.id?1..toString():0..toString())),this.imageViewModel=new r.ImageSelectorViewModel,this.imageFromGallery=ko.observable(this.isRepublish&&s.galleryExperimentImageUrl!==""),this.experimentEditorExperimentName=n.experiment.description(),this.experimentName=h.validatableObservable(this.experimentEditorExperimentName,a.Experiment.validateDescription),this.experimentName.startValidating(),f.experimentDescriptionEnabled()&&(this.summary(n.summary.property.value()),this.description(n.details.property.value())),this.detailsFromGallery()&&(this.experimentEditorDescription=this.description(),this.experimentEditorExperimentName=this.experimentName(),this.experimentEditorSummary=this.summary(),this.experimentEditorTags=[],this.experimentName(s.galleryExperimentName),this.description(s.galleryExperimentDescription),this.summary(s.galleryExperimentSummary),this.tags(s.galleryExperimentTags),this.detailsFromGallery.subscribe(function(e){e?(u.experimentEditorDescription=u.description(),u.experimentEditorExperimentName=u.experimentName(),u.experimentEditorSummary=u.summary(),u.experimentEditorTags=u.tags(),u.description(u.galleryDescription),u.experimentName(u.galleryExperimentName),u.summary(u.gallerySummary),u.tags(u.galleryTags)):(u.galleryDescription=u.description(),u.galleryExperimentName=u.experimentName(),u.gallerySummary=u.summary(),u.galleryTags=u.tags(),u.description(u.experimentEditorDescription),u.experimentName(u.experimentEditorExperimentName),u.summary(u.experimentEditorSummary),u.tags(u.experimentEditorTags))})),this.imageFromGallery()&&(this.imageViewModel.selectedStockImgUrl(s.galleryExperimentImageUrl),this.imageFromGallery.subscribe(function(e){e?u.imageViewModel.selectedStockImgUrl(s.galleryExperimentImageUrl):u.imageViewModel.selectedStockImgUrl(null)})),this.isValid=ko.computed(function(){return u.experimentName.isValid()}),this.hasCredentials=n.experiment.firstModuleWithCredentials()?!0:!1,this.hasCustomModules=n.experiment.firstCustomModule()?!0:!1,this.useMarkdownEditor=!!f.markdownInPublishDialogEnabled(),this.areNextStepsDisabled=ko.computed(function(){return!u.isValid()||u.imageViewModel.imageUploadViewModel.isProcessingSelectedImage()||u.hasCredentials&&!u.hasConsentedCredentials()||u.hasCustomModules&&f.publishCustomModulesToGalleryEnabled()&&!u.hasConsentedCustomModules()}),this.arePreviousStepsDisabled=ko.computed(function(){return!1}),this.publishType=ko.computed(function(){var e=null;return u.publishTypeString()&&(e=Number(u.publishTypeString())),e}),this.isPublishAuthorEnabled=ko.observable(o.canPublishOnBehalfOfCompany),this.publishAuthorType=ko.computed(function(){var e=null;return u.publishAuthorString()&&(e=Number(u.publishAuthorString())),e}),this.publishAuthorId=ko.computed(function(){return o.getAuthorId(u.publishAuthorType())}),this.publishAuthorName=ko.computed(function(){return o.getAuthorName(u.publishAuthorType())}),this.isCompleteButtonEnabled=ko.computed(function(){return(u.isPublishAuthorEnabled()?u.publishType()!==null&&u.publishAuthorType()!=null:u.publishType()!==null)&&u.hasAcceptedTermsOfUse()})}return __extends(t,e),t.prototype.getPublishableExperiment=function(){if(!this.onWizardCompleted())throw new Error("Cannot generate a PublishableExperiment if the Publish To Community Wizard was not completed.");if(!this.isValid())throw new Error("Cannot generate a PublishableExperiment with validation errors still present.");return new s.PublishableExperiment(this.experimentViewModel.experiment,this.experimentName(),this.summary(),this.description(),this.publishType(),new v(this.publishAuthorType(),this.publishAuthorId(),this.publishAuthorName()),this.tags(),this.imageViewModel.imageUploadViewModel.finalImageContent(),this.imageViewModel.imageUploadViewModel.finalImageContent()?"":this.imageViewModel.selectedStockImgUrl())},t.prototype.onWizardClosing=function(e){return this.onWizardCompleted(!0),e.completed?c.customEvent({key:"WizardCompleted",type:"PublishToCommunity",data:JSON.stringify({publishType:this.publishType()})}):c.customEvent({key:"WizardCanceled",type:"PublishToCommunity"}),!0},t.uploadImageOptions=[{text:l.publishExperimentToCommunityWizardImageSelectionCustomImageTab,value:0},{text:l.publishExperimentToCommunityWizardImageSelectionStockImagesTab,value:1}],t}(u.Disposable);t.PublishToCommunityWizardViewModel=m}),define("generated/editor/TS/ViewModel/Dialogs/SynchronizeScriptVersionDialogViewModel",["require","exports","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(){function e(e,t,n){t===void 0&&(t=[]),n===void 0&&(n=[]),this.pythonScriptSelection=null,this.shouldShowPythonDropdown=!1,this.rScriptSelection=null,this.shouldShowRDropdown=!1,this.experiment=e,this.pythonScriptOptions=ko.observableArray(t),this.rScriptOptions=ko.observableArray(n),t!=null&&t.length>0&&(this.shouldShowPythonDropdown=!0,this.pythonScriptSelection=t[0]),n!=null&&n.length>0&&(this.shouldShowRDropdown=!0,this.rScriptSelection=n[0]);var s,o=!1;this.shouldShowPythonDropdown&&this.shouldShowRDropdown?(s="Python/R",o=!0):this.shouldShowPythonDropdown?s="Python":s="R",this.warningLabel=i.format(r.SynchronizeScriptVersionDialogLabel,s,o?"s":"")}return e.prototype.dismissed=function(e){this.shouldShowRDropdown&&this.experiment.setModuleVersionInGraph(n.ModuleParameterName.RVersion,this.rScriptSelection),this.shouldShowPythonDropdown&&this.experiment.setModuleVersionInGraph(n.ModuleParameterName.PythonVersion,this.pythonScriptSelection)},e.prototype.canBeAccepted=function(){return!0},e}();t.SynchronizeScriptVersionDialogViewModel=s}),define("generated/editor/TS/View/WizardView",["require","exports","../../../DataLabClient/Disposable"],function(e,t,n){var r=function(){function e(e,t,r){var i=this;this.wizardContentViewModel=e,this.onWizardClosingEvent=new ko.subscribable,this.enableOrDisableNextSteps=function(e){i.wizardInternalViewModel.lockOrUnlockNextSteps(e)},this.enableOrDisablePreviousSteps=function(e){i.wizardInternalViewModel.lockOrUnlockPreviousSteps(e)},this.enableOrDisableCompleteButton=function(e){i.wizardInternalViewModel.completeButtonEnabled(e)};var s=t;r.closing=function(t){var n=e.onWizardClosing(t);return n&&i.onWizardClosingEvent.notifySubscribers(t),n},this.wizard=$("<div/>").fxsWizard(r),this.wizardInternalViewModel=this.wizard.fxsWizard("getViewModel"),r.size&&this.wizard.find(".fxs-wizard-steptitle").css("width",r.size[0]-60+"px"),e.registerForDisposal(new n.DisposableSubscription(e.areNextStepsDisabled.subscribe(this.enableOrDisableNextSteps)),new n.DisposableSubscription(e.arePreviousStepsDisabled.subscribe(this.enableOrDisablePreviousSteps)),new n.DisposableSubscription(e.isCompleteButtonEnabled.subscribe(this.enableOrDisableCompleteButton))),s.forEach(function(e){i.wizardInternalViewModel.steps.push(e)}),r.startStepIndex?this.wizardInternalViewModel.currentStep(s[r.startStepIndex]):this.wizardInternalViewModel.currentStep(s[0]),this.enableOrDisableNextSteps(e.areNextStepsDisabled()),this.enableOrDisablePreviousSteps(e.arePreviousStepsDisabled()),this.enableOrDisableCompleteButton(e.isCompleteButtonEnabled())}return e.prototype.show=function(){this.wizard.fxsWizard("open"),Impl.UI.Dialogs.ModalPresenter.open(this.wizard)},e}();t.WizardView=r}),define("generated/editor/TS/Common/CallbackCommand",["require","exports"],function(e,t){var n=function(){function e(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null),this.executeCallback=e,this.canExecute=t||ko.observable(!0),this.target=n}return e.prototype.execute=function(e,t){this.executeCallback(e,t)},e}();t.CallbackCommand=n}),define("generated/editor/TS/ViewModel/Dialogs/CreateWebServiceFromTrainedModelDialogViewModel",["require","exports"],function(e,t){var n=function(){function e(e,t){this.name=ko.observable(),this.description=ko.observable(),this.name(e),this.handler=t}return e.prototype.canBeAccepted=function(){return!0},e.prototype.dismissed=function(e){e.accepted&&this.handler(this.name(),this.description())},e}();t.CreateWebServiceFromTrainedModelDialogViewModel=n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/PlotViewModel",["require","exports","../../../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t,n){e.call(this),this.falsePositiveRate="fpr",this.truePositiveRate="tpr",this.precision="precision",this.yRate="yrate",this.truePositive="truepositive",this.data=ko.observable(t),this.label=ko.observable(n),this.rocChartsFull=this.constructChart(t,this.falsePositiveRate,this.truePositiveRate),this.precisionRecallChartsFull=this.constructChart(t,this.truePositiveRate,this.precision),this.liftChartsFull=this.constructChart(t,this.yRate,this.truePositive)}return __extends(t,e),t.prototype.getCurrentChart=function(e){var t;return e==="lift"?t=this.liftChartsFull:t=e==="roc"?this.rocChartsFull:this.precisionRecallChartsFull,t},t.prototype.constructChart=function(e,t,n){var r=e.chart?e.chart:e.charts[0],i=r.data,s=[],o=i.length;for(var u=0;u<o;u++){var a=i[u];s.push([a[t],a[n]])}var f={data:s,label:this.label()};return f},t}(n.Disposable);t.PlotViewModel=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/TableViewModel",["require","exports","../../../../DataLabClient/Disposable","../../../../DataLabClient/Util"],function(e,t,n,r){var i=function(){function e(e){this.cells=ko.observableArray(e)}return e}();t.Row=i;var s=function(e){function t(t,n){var s=this;n===void 0&&(n=null),e.call(this),this.rows=ko.observableArray(),r.forEach(t,function(e){s.rows.push(new i(e))}),this.headerRow=ko.observable(new i(n))}return __extends(t,e),t}(n.Disposable);t.TableViewModel=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/BinaryClassificationUX",["require","exports","./PlotViewModel","./TableViewModel","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=function(e){function t(t){e.call(this),this.precision=3,this.loaded=ko.observable(!1),t&&this.initializeFromParsedJson(t)}return __extends(t,e),t.initializeFromEndpoint=function(e,n,r,i){var s=new t;return u.then(i.getModuleOutput(e,n,r),function(e){s.initializeFromParsedJson(e)}),s},t.prototype.initializeFromParsedJson=function(e){var t=this;this.data=e,this.name=ko.observable(this.getReportName(this.data.reportName)),this.plotViewModel=new n.PlotViewModel(this.data,this.name()),this.threshold=ko.observable(.5);var i=this.data.chart!==undefined?this.data.chart:this.data.charts[0],s=i.auc.roc!==undefined?i.auc.roc:i.auc,a=i.min!==undefined?i.min:0,f=i.max!==undefined?i.max:1;this.rawThreshold=ko.computed(function(){var e=a+t.threshold()*(f-a);return e.toFixed?u.reduceToFixedPrecision(e,t.precision):e}),this.confusionMatrixViewModel=ko.computed(function(){var e=t.getBucket(i,t.rawThreshold());return new r.TableViewModel([[e.confusionMatrix.tp.toString(),e.confusionMatrix.fn.toString()],[e.confusionMatrix.fp.toString(),e.confusionMatrix.tn.toString()]])}),this.precisionRecallViewModel=ko.computed(function(){var e=t.getBucket(i,t.rawThreshold());return new r.TableViewModel([[e.accuracy.toFixed(t.precision),e.precision.toFixed(t.precision)],[e.recall.toFixed(t.precision),e.f1.toFixed(t.precision)]])}),this.binDataViewModel=this.initializeBinData(i.coarseData);var l=s.toFixed?s.toFixed(this.precision):s.toString();this.auc=ko.observable(l),this.positiveLabel=ko.observable(i.positiveLabel),this.negativeLabel=ko.observable(i.negativeLabel),this.currentCmData=ko.observable(),this.setCurrentCmData=function(e){t.currentCmData(e)},this.threshold.subscribe(function(){o.customEvent({key:"ThresholdChanged",type:"Visualize",data:t.threshold()}),t.threshold()>1?t.threshold(1):t.threshold()<0&&t.threshold(0)}),this.loaded(!0)},t.prototype.getReportName=function(e){return e==="Scored dataset"||e==="scoredData"?s.binaryClassificationScoredDataset:e==="Scored dataset to compare"||e==="scoredDataToCompare"?s.binaryClassificationScoredDatasetToCompare:s.binaryClassificationScoredDatasetDefault},t.prototype.getBucket=function(e,t){var n=this.getIndex(e,t),r=e.data[n];return r},t.prototype.getIndex=function(e,t){var n=e.data,r=n.length,i=0;for(var s=0;s<r;s++){var o=n[s].probability;if(!(o<=t))break;i=s}return i},t.prototype.initializeBinData=function(e){var t=this,n=[],i=s,o=[i.binaryClassificationScoreBin,i.binaryClassificationNumberOfPositiveExamples,i.binaryClassificationNumberOfNegativeExamples,i.binaryClassificationFractionAboveThreshold,i.binaryClassificationAccuracy,i.binaryClassificationF1Score,i.binaryClassificationPrecision,i.binaryClassificationRecall,i.binaryClassificationNegativePrecision,i.binaryClassificationNegativeRecall,i.binaryClassificationCumulativeAuc];return e=e.sort(function(e,t){return t.BinStart-e.BinStart}),u.forEach(e,function(e){var r=[];r.push("("+e.BinStart.toFixed(3)+","+e.BinEnd.toFixed(t.precision)+"]"),r.push(e.numPos),r.push(e.numNeg);var i=(e.tp+e.fp)/(e.tp+e.fp+e.fn+e.tn);r.push(i.toFixed(t.precision)),r.push(e.accuracy.toFixed(t.precision)),r.push(e.f1.toFixed(t.precision)),r.push(e.precision.toFixed(t.precision)),r.push(e.recall.toFixed(t.precision)),r.push(e.negPrecision.toFixed(t.precision)),r.push(e.negRecall.toFixed(t.precision)),r.push(e.AUC.toFixed(t.precision)),n.push(r)}),new r.TableViewModel(n,o)},t}(i.Disposable);t.BinaryClassificationUXViewModel=a}),define("generated/editor/TS/ViewModel/CustomUX/Constants",["require","exports"],function(e,t){t.DarkBlue="#3C679A",t.DarkRed="#9D3D3A",t.Green="#7D9844",t.Turquoise="#668C83",t.Blue="#388CA2",t.BurntOrange="#CB7833",t.Red="#BE4B48",t.DarkGreen="#98B984",t.Purple="#7D60A0",t.Teal="#46AAC5",t.Orange="#F69240",t.LightBlue="#A5B6D3",t.LightRed="#D5A5A4",t.LightGreen="#C1D2A7",t.LightPurple="#B6ABC5",t.Grey="#F0F0F0",t.ColorTable=[t.DarkBlue,t.DarkRed,t.Green,t.Turquoise,t.Blue,t.BurntOrange,t.Red,t.DarkGreen,t.Purple,t.Teal,t.Orange,t.LightBlue,t.LightRed,t.LightGreen,t.LightPurple]});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/PlotContainerViewModel",["require","exports","../../../TS/ViewModel/CustomUX/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){var o=function(e){function t(t){var r=this;e.call(this),this.rocPlot={plotName:i.rocPlotName,xAxisLabel:i.rocPlotXAxis,yAxisLabel:i.rocPlotYAxis,xScale:null,yScale:null},this.prPlot={plotName:i.prPlotName,xAxisLabel:i.prPlotXAxis,yAxisLabel:i.prPlotYAxis,xScale:null,yScale:null},this.liftPlot={plotName:i.liftPlotName,xAxisLabel:i.liftPlotXAxis,yAxisLabel:i.liftPlotYAxis,xScale:null,yScale:null},this.padding=50,this.plotAreaWidth=500,this.plotAreaHeight=500,this.plotViewModels=t;var o=[this.rocPlot,this.prPlot,this.liftPlot];this.chartNames=ko.observableArray(o.map(function(e){return e.plotName})),this.colors=ko.observableArray(n.ColorTable),this.chartNameToDescription={};for(var u=0;u<o.length;u++)this.chartNameToDescription[o[u].plotName]=o[u];this.currentChart=ko.observable(this.rocPlot.plotName),this.xAxisLabel=ko.computed(function(){return r.chartNameToDescription[r.currentChart()].xAxisLabel}),this.yAxisLabel=ko.computed(function(){return r.chartNameToDescription[r.currentChart()].yAxisLabel});var a=function(e){return r.plotViewModels.map(function(t){return t.getCurrentChart(e)})};this.plotData=ko.computed(function(){return a(r.currentChart())}),this.height=ko.observable(this.plotAreaHeight),this.width=ko.observable(this.plotAreaWidth),s.forEach(o,function(e){var t=a(e.plotName),n=function(e){return t.map(function(t){return t.data.map(function(t){return t[e]})}).reduce(function(e,t){return e.concat(t)})},i=n(0),s=n(1),o,u;e===r.liftPlot?(o=[d3.min(i),d3.max(i)],u=[d3.min(s),d3.max(s)]):(o=[0,1],u=[0,1]),e.xScale=d3.scale.linear().domain(o).range([r.padding,r.width()-r.padding]),e.yScale=d3.scale.linear().domain(u).range([r.height()-r.padding,r.padding])}),this.xScale=ko.computed(function(){return r.chartNameToDescription[r.currentChart()].xScale}),this.yScale=ko.computed(function(){return r.chartNameToDescription[r.currentChart()].yScale}),this.setCurrentChart=function(e){r.currentChart(e)},this.setCurrentChart(this.rocPlot.plotName),this.svgLineFunction=ko.computed(function(){return d3.svg.line().x(function(e){return r.xScale()(e[0])}).y(function(e){return r.yScale()(e[1])}).interpolate("linear")})}return __extends(t,e),t.prototype.drawAxes=function(e,t,n){var r=d3.select(".chartArea");r.selectAll(".axis").remove(),r.selectAll(".gridLine").remove();var i=d3.svg.axis().scale(e).orient("bottom"),s=d3.svg.axis().scale(t).orient("left");r.insert("g",":first-child").attr("class","axis").attr("id","xAxis").attr("transform","translate(0,"+(this.height()-this.padding)+")").call(i),r.insert("g",":first-child").attr("class","axis").attr("id","yAxis").attr("transform","translate("+this.padding+",0)").call(s),r.insert("g",":first-child").attr("class","gridLine").attr("transform","translate(0,"+(this.height()-this.padding)+")").call(i.tickSize(-(this.height()-2*this.padding),0,0).tickFormat("")),r.insert("g",":first-child").attr("class","gridLine").attr("transform","translate("+this.padding+",0)").call(s.tickSize(-(this.width()-2*this.padding),0,0).tickFormat("")),n==="roc"&&r.insert("path",":first-child").attr("class","gridLine diagonalGridLine").attr("d","M "+e.range()[0]+" "+t.range()[0]+" L "+e.range()[1]+" "+t.range()[1])},t}(r.Disposable);t.PlotContainerViewModel=o,ko.bindingHandlers.d3Axes={init:function(){},update:function(e,t,n,r,i){var s=i.$data;s.drawAxes(t().xScale,t().yScale,s.currentChart())}}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/BinaryClassificationComparisonUX",["require","exports","../../../TS/ViewModel/CustomUX/BinaryClassificationUX","../../../TS/View/CoordinateHelper","../../../TS/View/PanHelper","../../../TS/ViewModel/CustomUX/PlotContainerViewModel","../../../TS/View/ZoomControl","../../../TS/View/ZoomHelper","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){function t(t,r){var i=this;e.call(this),this.buttonDragMode=!1,this.spaceDragMode=!1,this.miniMapProportion=.8,this.loaded=ko.observable(!1);var o=t.reports;this.viewModels=[];for(var u=0;u<o.length;u++)this.viewModels.push(new n.BinaryClassificationUXViewModel(o[u]));this.currentViewModelIndex=ko.observable(0),this.currentViewModel=ko.computed(function(){return i.viewModels[i.currentViewModelIndex()]}),this.setCurrentViewModelIndex=function(e){i.currentViewModelIndex(e)};var a=this.viewModels.map(function(e){return e.plotViewModel});this.plotContainer=ko.observable(new s.PlotContainerViewModel(a)),r&&(this.experimentViewInfo=r.experimentViewInfo,this.nodeId="node-"+r.moduleId),this.loaded(!0)}return __extends(t,e),t.prototype.getViewDimensions=function(){var e=$("#evaluateMiniMap").get(0);return{x:e.getBoundingClientRect().left,y:e.getBoundingClientRect().top,width:e.clientWidth,height:e.clientHeight}},t.prototype.setPanning=function(e){e===!1?($("#evaluateMiniMap").draggable("disable"),$("#evaluateMiniMap").removeClass("ui-state-disabled"),$("#evaluateMiniMapContainer").css("cursor","auto")):($("#evaluateMiniMap").draggable("enable"),$("#evaluateMiniMapContainer").css("cursor","all-scroll")),this.draggable=e},t.prototype.togglePanning=function(){this.setPanning(!this.draggable)},t.prototype.setUpMiniMapElement=function(){var e=$(".customElements").children(".svgRoot"),t=$("#evaluateMiniMap").children(".customElements");e.clone().appendTo(t);if(f.editorControl2Enabled()){var n=$(".customElements .xe-overlay");n.clone().appendTo(t)}var r=t.children(".svgRoot");this.svgRoot=t.children(".svgRoot").get(0),this.svgTransformElement=r.children().get(0),r.find("tspan").show(),d3.select("#evaluateMiniMap").selectAll(".selectedEntity").classed("selectedEntity",!1),d3.select("#evaluateMiniMap").selectAll("#"+this.nodeId).classed("selectedEntity",!0),d3.select("#evaluateMiniMap").selectAll(".portTextLabel").remove(),d3.select("#evaluateMiniMap").selectAll(".outputPortNumber").remove(),d3.select("#evaluateMiniMap").selectAll(".outputPortNumberCircle").remove(),this.svgTransformElement.transform.baseVal.clear()},t.prototype.setUpZoomControl=function(){var e=$("#zoomControlPanelContainer").get(0);this.zoomControl=new o.ZoomControl(e,$("#evaluateMiniMap").get(0));var t=this,n;$("#evaluateMiniMap").draggable({start:function(e,t){n={x:e.pageX,y:e.pageY}},drag:function(e,r){var i=e.pageX-n.x,s=e.pageY-n.y;n={x:e.pageX,y:e.pageY},t.zoomHelper.pan(i,s),r.position.left=0,r.position.top=0}}),this.setPanning(!1);var s=new i.PanHelper(e,function(e){if(t.spaceDragMode===!0)return;t.buttonDragMode=!t.buttonDragMode,t.togglePanning()});this.registerForDisposal(this.zoomControl);var a=function(){return t.getViewDimensions()},f=new r.CoordinateHelper(this.svgRoot,a,this.svgTransformElement),l=this.svgRoot.createSVGPoint(),c=function(){return l},h=function(){},p=document.querySelectorAll("#evaluateMiniMap .customElements .xe-overlay"),d=function(){return Shell.Utilities.getBBoxOrDefaultSVGRect(this.svgTransformElement)};this.zoomHelper=new u.ZoomHelper(this.svgTransformElement,this.svgRoot,f,this.zoomControl,a,h,c,h,h,p,d)},t.prototype.zoomToModule=function(){var e=this.plotContainer().height()*this.miniMapProportion,t=this.plotContainer().width()*this.miniMapProportion,n=40;if(f.editorControl2Enabled()){var r=$("#"+this.nodeId),i=r.width(),s=r.height(),o=r.position().left,u=r.position().top,a=(t-2*n)/i,l=(e-2*n)/s,c=Math.min(a,l),h=-o+(t-i)/2,p=-u+(e-s)/2,d=this.svgRoot.createSVGMatrix().translate(h,p).scale(c);this.svgTransformElement.transform.baseVal.getItem(0).setMatrix(d);var v=this.svgTransformElement.getCTM(),m="matrix("+v.a+","+v.b+","+v.c+","+v.d+","+v.e+","+v.f+")";$("#evaluateMiniMap .customElements .xe-overlay").css("-webkit-transform",m),$("#evaluateMiniMap .customElements .xe-overlay").css("transform",m),$("#evaluateMiniMap .customElements .xe-overlay").css("-ms-transform",m),$("#evaluateMiniMap .customElements .xe-overlay").css("-moz-transform",m)}else{var g=d3.select("#"+this.nodeId),y=Number(g.attr("width")),b=Number(g.attr("height")),w=Number(g.attr("x")),E=Number(g.attr("y")),S=(t-2*n)/y,x=(e-2*n)/b,T=Math.min(S,x),N=-w*T+(t-y*T)/2,C=-E*T+(e-b*T)/2,k=this.svgRoot.createSVGMatrix().translate(N,C).scale(T);this.svgTransformElement.transform.baseVal.getItem(0).setMatrix(k)}},t.prototype.initialize=function(){f.miniMapInEvaluateVisualizationEnabled()&&this.experimentViewInfo&&(this.setUpMiniMapElement(),this.setUpZoomControl(),this.zoomToModule())},t}(a.Disposable);t.BinaryClassificationComparisonUXViewModel=l}),define("generated/editor/TS/View/CustomBindingHandlers/D3Graphing/D3Common",["require","exports"],function(e,t){var n;(function(e){e.numericAxisLabelPrecision=2,e.defaultBinCount=10,e.defaultCategoryCount=5})(n=t.Constants||(t.Constants={}));var r;(function(e){function t(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=new Object;r.name=n,r.value=e[n],t.push(r)}return t}function r(e,t){var n=e.reduce(function(e,n){var r=e[t(n)];return r?r.push(n):e[t(n)]=[n],e},{});return n}function i(e){return e.toString().length>=5?d3.format("0."+n.numericAxisLabelPrecision+"g")(e):e}function s(e){return e.toString().length>=11?e.toString().slice(0,8)+"...":e}function o(e,t,n,r,i){t&&e.append("g").attr("class","axis").attr("id","xAxis").attr("transform","translate(0,"+(r-i)+")").call(t).selectAll("text").style("text-anchor","end").attr("dy",".65em").attr("transform",function(e){return"rotate(-35)"}),n&&e.append("g").attr("class","axis").attr("id","yAxis").attr("transform","translate("+i+",0)").call(n)}function u(e,t,n,r,i,s,o){e.append("text").attr("text-anchor","middle").attr("x",s+(i-s-o)/2).attr("y",r-s/20).attr("class","graphText").text(t),e.append("text").attr("text-anchor","middle").attr("x",s/4).attr("y",r/2-o/2).attr("transform","rotate(-90 "+s/4+","+(r/2-o/2)+")").attr("class","graphText").text(n)}function a(e,t){return t.label.replace("{0}",e.name)}function f(e,n,i,s){var o=n.index,u=t(r(e,function(e){return e[o]}));u=u.sort(function(e,t){return t.value.length-e.value.length});var a=[];for(var f=0;f<u.length;f++)if(f===i&&s){var l=new Object;l.x="Other",l.dx="",l.y=u[f].value.length,l.name="Other",l.data=u[f].value,a.push(l)}else{if(f===i&&!s)break;if(f>i)a[i].y+=u[f].value.length,a[i].data.concat(u[f].value);else{var c=new Object;c.x=u[f].name,c.dx="",c.y=u[f].value.length,c.name=u[f].name,c.data=u[f].value,a.push(c)}}return a}function l(e){var t=d3.scale.quantile().domain(e).range([0,1,2,3]),n=t.quantiles(),r=n[0],i=n[1],s=n[2],o=s-r,u=s+1.5*o,a=r-1.5*o,f=[],l=e.sort(d3.ascending),c=0;while(l[c]<a)f.push(l[c]),c++;var h=l[c];c=l.length-1;while(l[c]>u)f.push(l[c]),c--;var p=l[c],d=new Object;return d.median=i,d.boxBottom=r,d.boxTop=s,d.whiskerBottom=h,d.whiskerTop=p,d.outliers=f,d}function c(e,t,n,r,i,s,o){var u=o?"minimizedBoxplot":"boxplot",a=n(t.boxTop),f=o?0:500;e.append("line").attr("class",u).attr("x1",r).attr("y1",a).attr("x2",r).attr("y2",a).transition().attr("y1",n(t.whiskerBottom)).attr("y2",n(t.whiskerTop)).duration(f),e.append("line").attr("class",u).attr("x1",r-s/2).attr("y1",a).attr("x2",r+s/2).attr("y2",a).transition().attr("y1",n(t.whiskerBottom)).attr("y2",n(t.whiskerBottom)).duration(f),e.append("line").attr("class",u).attr("x1",r-s/2).attr("y1",a).attr("x2",r+s/2).attr("y2",a).transition().attr("y1",n(t.whiskerTop)).attr("y2",n(t.whiskerTop)).duration(f),e.append("rect").attr("class",u).attr("x",r-i/2).attr("y",n(t.boxTop)).attr("width",i).attr("height",0).transition().attr("height",n(t.boxBottom)-n(t.boxTop)).duration(f),e.append("line").attr("class",u).attr("x1",r-i/2).attr("y1",a).attr("x2",r+i/2).attr("y2",a).transition().attr("y1",n(t.median)).attr("y2",n(t.median)).duration(f),e.selectAll("circle").data(t.outliers).enter().append("circle").attr("class","scatterplotPoint").attr("cx",r).attr("cy",function(e){return n(e)}).attr("r",0).transition().attr("r",o?1:3).duration(f).delay(o?0:300)}e.Scales=[{name:"linear",index:0,label:"{0}",func:function(e){return e}},{name:"log",index:1,label:"log({0})",func:function(e){return Math.log(e)}}],e.ObjectToArray=t,e.UniqueValueCounts=r,e.NumericAxisFormatter=i,e.CategoricalAxisFormatter=s,e.AddAxes=o,e.AddAxisLabels=u,e.GenerateAxisLabel=a,e.CategoricalHistogramBins=f,e.BoxplotLayout=l,e.CreateBoxplotElements=c;var h=function(){function e(e,n,i){var s=t(r(e,function(e){return e[n.index]})),o=t(r(e,function(e){return e[i.index]})),u=s.map(function(n){return{xValueName:n.name,yValues:t(r(n.value,function(e){return e[i.index]})).map(function(t){return{xValueName:n.name,yValueName:t.name,count:t.value.length,percentOfTotal:t.value.length/e.length}})}});this.instances=u.reduce(function(e,t){return e.concat(t.yValues)},[]);var a=function(e){return e.name};this.xCategories=s.map(a),this.yCategories=o.map(a),this.numberOfXCategories=s.length,this.numberOfYCategories=o.length}return e}();e.CrosstabLayout=h})(r=t.D3Graph||(t.D3Graph={}))});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/ClusteringViewModel",["require","exports","../../../TS/ViewModel/CustomUX/Constants","../../../TS/View/CustomBindingHandlers/D3Graphing/D3Common","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o){var u=function(e){function t(t){var n=this;e.call(this),this.width=500,this.height=500,this.padding=50;var r=t.clusters;this.computeScales(r);var i=t.clusters.map(function(e){return new a(e,n.xScale,n.yScale)});this.clusterViewModels=ko.observableArray(i)}return __extends(t,e),t.prototype.drawAxes=function(){var e=d3.select(".clusterSvg"),t=d3.svg.axis().scale(this.xScale).orient("bottom"),n=d3.svg.axis().scale(this.yScale).orient("left");e.insert("g",":first-child").attr("class","axis").attr("id","xAxis").attr("transform","translate(0,"+(this.height-this.padding)+")").call(t),e.insert("g",":first-child").attr("class","axis").attr("id","yAxis").attr("transform","translate("+this.padding+",0)").call(n);var i=s.clusterPrincipalComponent+" 1",o=s.clusterPrincipalComponent+" 2";r.D3Graph.AddAxisLabels(e,i,o,this.height,this.width,this.padding,this.padding)},t.prototype.computeScales=function(e){var t=function(e,t){var n=e["centroid"+t],r=e["majorAxis"+t],i=e["minorAxis"+t];return[n+r,n-r,n+i,n-i]},n=e.map(function(e){return t(e,"X")}),r=e.map(function(e){return t(e,"Y")}),i=function(e,t){var n=[].concat.apply([],e);return t(n)},s=n.concat(r),o=i(s,d3.min),u=i(s,d3.max);this.xScale=d3.scale.linear().domain([o,u]).range([this.padding,this.width-this.padding]),this.yScale=d3.scale.linear().domain([o,u]).range([this.height-this.padding,this.padding])},t}(i.Disposable);t.ClusteringViewModel=u;var a=function(){function e(e,t,r){var i=this;this.label=ko.observable(s.clusterLabel+" "+e.label),this.color=ko.observable(n.ColorTable[e.label%n.ColorTable.length]),this.centroidX=ko.observable(t(e.centroidX)),this.centroidY=ko.observable(r(e.centroidY)),this.majorAxisX=e.majorAxisX,this.majorAxisY=e.majorAxisY,this.minorAxisX=e.minorAxisX,this.minorAxisY=e.minorAxisY,this.unscaledCentroidX=e.centroidX,this.unscaledCentroidY=e.centroidY,this.angleOfRotation=e.angleOfRotation,this.ellipseRotation=ko.computed(function(){var e=i.angleOfRotation/(Math.PI/180);return o.format("rotate({0} {1} {2})",e.toString(),i.centroidX().toString(),i.centroidY().toString())}),this.majorAxisLength=ko.computed(function(){return i.computeDistance("majorAxis",t,r)}),this.minorAxisLength=ko.computed(function(){return i.computeDistance("minorAxis",t,r)})}return e.prototype.computeDistance=function(e,t,n){var r=3,i=this[e+"X"],s=this[e+"Y"];if(i==0&&s==0)return r;var o=t(this.unscaledCentroidX+i),u=n(this.unscaledCentroidY+s),a=Math.pow(o-this.centroidX(),2),f=Math.pow(u-this.centroidY(),2);return Math.sqrt(a+f)},e}();t.ClusterViewModel=a,ko.bindingHandlers.clusteringAxes={init:function(){},update:function(e,t,n,r,i){var s=i.$data;s.drawAxes()}}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/GenericMimeViewModel",["require","exports","../../../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t){e.call(this);var n=t.sections.map(function(e){return new i(e)});this.mimeSections=ko.observableArray(n)}return __extends(t,e),t.prototype.getSectionTemplateByMimeType=function(e){var t=this.startsWith.bind(null,e);return t("image/png")||t("img/png")?"mimePngEntry":t("image/jpeg")?"mimeJpgEntry":t("image/svg+xml")?"mimeSvgEntry":"mimeTextEntry"},t.prototype.startsWith=function(e,t){return e.indexOf(t)===0},t}(n.Disposable);t.GenericMimeViewModel=r;var i=function(e){function t(t){e.call(this),this.title=ko.observable(t.title),this.show=ko.observable(!0);var n=t.values.map(function(e){return new s(e)});this.values=ko.observableArray(n)}return __extends(t,e),t}(n.Disposable);t.MimeSectionViewModel=i;var s=function(e){function t(t){e.call(this),this.dataType=ko.observable(t.dataType),this.data=ko.observable(t.data)}return __extends(t,e),t}(n.Disposable);t.MimeSubSectionViewModel=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/JSONViewModel",["require","exports","../../../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t){e.call(this),this.text=t.object}return __extends(t,e),t}(n.Disposable);t.JSONViewModel=r}),define("generated/editor/TS/ViewModel/Visualization/Constants",["require","exports"],function(e,t){t.transitionDuration=500,t.maxPrecision=6,t.maxPrecisionOfStats=4,t.bigSize=[100,100],t.smallSize=[50,30],t.hugeSize=[300,300],t.blockSize=[50,20],t.cachedPages=4096,t.typesToNotReducePrecision=["System.Int32","System.Int64"],t.maxDivPixelSize=15e5});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/LearnerViewModel",["require","exports","../Visualization/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){var o=function(e){function t(t){e.call(this);var n=t.learner;this.learnerName=ko.observable(s.addSpaceAfterCapitals(n.name));var r=[];if(n.settings){var o;this.isDataTable(n.settings)?o=this.constructLearnerTableViewModelFromDataTable(n.settings,i.learnerSettings,s.addSpaceAfterCapitals,null):o=this.constructLearnerTableViewModelFromObject(n.settings,i.learnerSettings,i.learnerSettingsName,i.learnerSettingsValue,s.addSpaceAfterCapitals,null),r.push(o)}if(n.weights){var u;this.isDataTable(n.weights)?u=this.constructLearnerTableViewModelFromDataTable(n.weights,i.learnerFeatureWeights,null,this.reducePrecisionWithTypeCheck):u=this.constructLearnerTableViewModelFromObject(n.weights,i.learnerFeatureWeights,i.learnerFeatureWeightsName,i.learnerFeatureWeightsValue,null,this.reducePrecisionWithTypeCheck),r.push(u)}this.tables=ko.observableArray(r)}return __extends(t,e),t.prototype.constructLearnerTableViewModelFromDataTable=function(e,t,n,r){var i=this;n&&s.forEach(e.records,function(e){e[0]=n(e[0].toString())}),r&&s.forEach(e.records,function(e){for(var t=1;t<e.length;t++)e[t]=r(e[t])});var o=e.features.map(function(e){return i.getLocalizedColumnName(e.name)});return new u(e.records,t,o)},t.prototype.constructLearnerTableViewModelFromObject=function(e,t,n,r,i,o){var a=s.getAllPropertyNames(e);return new u(a.map(function(t){var n={name:i?i(t):t,value:o?o(e[t]):e[t]};return[n.name,n.value]}),t,[n,r])},t.prototype.isDataTable=function(e){return e.records!==undefined&&e.features!==undefined&&e.records instanceof Array&&e.features instanceof Array},t.prototype.getLocalizedColumnName=function(e){return e==="Setting"?i.learnerSettingsName:e==="Value"?i.learnerSettingsValue:e==="Feature"?i.learnerFeatureWeightsName:e==="Weight Mean"?i.learnerWeightMean:e==="Weight Standard Deviation"?i.learnerWeightStandardDeviation:e},t.prototype.reducePrecisionWithTypeCheck=function(e){return typeof e=="number"?s.reducePrecision(e,n.maxPrecision):e},t}(r.Disposable);t.LearnerViewModel=o;var u=function(e){function t(t,n,r){e.call(this),this.table=t,this.headerLabel=ko.observable(n),this.columnNames=ko.observableArray(r)}return __extends(t,e),t}(r.Disposable);t.LearnerTableViewModel=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/MulticlassConfusionMatrixViewModel",["require","exports","../../View/CustomBindingHandlers/D3Graphing/D3Common","../../../../DataLabClient/Disposable","../../../../DataLabClient/Util","../../../../DataLabClient/LocalizedResources"],function(e,t,n,r,i,s){var o=function(e){function t(t){var n=this;e.call(this),this.sideLength=60,this.superHeaderPadding=80,this.headerPadding=100,this.rightPadding=80,this.degreeOfRotation=35,this.precision=6;var r=t.averageAccuracy!==undefined;r&&this.createMetricsTable(t),this.showMetrics=ko.observable(r),this.metricsIsCollapsed=ko.observable(!1),this.confusionMatrixIsCollapsed=ko.observable(!1);var i=this.superHeaderPadding+this.headerPadding+this.rightPadding,o=ko.computed(function(){return i+n.sideLength*t.classLabels.length});this.height=o,this.width=o,this.xAxisScale=d3.scale.ordinal().domain(t.classLabels).rangePoints([this.headerPadding+this.superHeaderPadding,this.width()-this.rightPadding-this.sideLength]),this.yAxisScale=d3.scale.ordinal().domain(t.classLabels).rangePoints([this.headerPadding+this.superHeaderPadding,this.height()-this.rightPadding-this.sideLength]),this.xClassLabels=ko.observableArray(t.classLabels.map(function(e){return new a(e,0,0,"translate("+(n.xAxisScale(e)-n.headerPadding/4)+","+n.superHeaderPadding+") rotate("+n.degreeOfRotation+")",!0)})),this.yClassLabels=ko.observableArray(t.classLabels.map(function(e){return new a(e,n.superHeaderPadding,n.yAxisScale(e),"",!0)})),this.instances=this.convertFrequencyMatrixToInstances(t.frequencyMatrix,t.classLabels),this.superHeaders=ko.observableArray([new a(s.multiclassPredictedClass,this.width()/2,this.superHeaderPadding/2,"",!1),new a(s.multiclassActualClass,0,0,"translate("+this.superHeaderPadding/2+","+this.height()/2+") rotate(-90)",!1)])}return __extends(t,e),t.prototype.convertFrequencyMatrixToInstances=function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r],s=i.reduce(function(e,t){return e+t});for(var o=0;o<i.length;o++){var a=i[o];if(a!==0||r===o){var f=t[r],l=t[o],c=new u(f,l,a,s!==0?a/s:0,this.xAxisScale(l)-this.sideLength/2,this.yAxisScale(f)-this.sideLength/2,this.sideLength);n.push(c)}}}return ko.observableArray(n)},t.prototype.createMetricsTable=function(e){var t=this,n=function(e){return e.toFixed?i.reduceToFixedPrecision(e,t.precision):e};this.metrics=[[s.multiclassOverallAccuracy,n(e.overallAccuracy)],[s.multiclassAverageAccuracy,n(e.averageAccuracy)],[s.multiclassMicroAveragedPrecision,n(e.microAveragedPrecision)],[s.multiclassMacroAveragedPrecision,n(e.macroAveragedPrecision)],[s.multiclassMicroAveragedRecall,n(e.microAveragedRecall)],[s.multiclassMacroAveragedRecall,n(e.macroAveragedRecall)]]},t}(r.Disposable);t.MulticlassConfusionMatrixViewModel=o;var u=function(){function e(e,t,n,r,i,s,o){this.trueLabel=ko.observable(e),this.predictedLabel=ko.observable(t),this.frequency=ko.observable(n),this.fractionOfActualClass=ko.observable(r),this.percentOfActualClass=ko.observable((r*100).toFixed(1)+"%"),this.isMainDiagonalEntry=ko.observable(e===t),this.xCoordinate=ko.observable(i),this.yCoordinate=ko.observable(s),this.sideLength=ko.observable(o)}return e}();t.MulticlassConfusionMatrixInstanceViewModel=u;var a=function(){function e(e,t,r,i,s){this.fullLabel=ko.observable(e),this.label=ko.observable(s?n.D3Graph.CategoricalAxisFormatter(e):e),this.xCoordinate=ko.observable(t),this.yCoordinate=ko.observable(r),this.transform=ko.observable(i)}return e}();t.LabelViewModel=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/MulticlassClassificationUX",["require","exports","../../../TS/ViewModel/CustomUX/MulticlassConfusionMatrixViewModel","../../../../DataLabClient/Disposable"],function(e,t,n,r){var i=function(e){function t(t){e.call(this),this.loaded=ko.observable(!1);var r=t.matrices,i=r.map(function(e){return new n.MulticlassConfusionMatrixViewModel(e)});this.viewModels=ko.observableArray(i),this.loaded(!0)}return __extends(t,e),t}(r.Disposable);t.MulticlassClassificationUXViewModel=i}),define("generated/DataLabClient/Contracts/V1/Common/VisualizationContracts",["require","exports"],function(e,t){function n(e){return e.lastIndexOf("Numeric",0)===0}t.isNumericFeature=n}),define("generated/editor/TS/ViewModel/Visualization/D3GraphViewModel",["require","exports","../../../TS/Global","../../../../DataLabClient/Contracts/V1/Common/VisualizationContracts"],function(e,t,n,r){var i=function(){function e(e,t,n,i,s,o,u,a,f,l,c,h){var p=this;h===void 0&&(h=null),this._graphType=ko.observable(0),this.graphType=ko.computed({write:function(e){e===1?p._graphType(r.isNumericFeature(f.featureType)?1:0):p._graphType(e)},read:function(){return p._graphType()}}),this.graphType(e),this.xlog=t,this.ylog=n,this.binCount=i,this.categoryCount=s,this.cumulativeDistibution=o,this.probabilityDensity=u,this.datatable=a,this.feature=f,this.crossCompareFeature=l,this.layout=c,this.index=h,this.subscribed=!1}return e}();t.D3GraphViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/RegressionEvaluationViewModel",["require","exports","../Visualization/D3GraphViewModel","../../Global","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o){var u=function(e){function t(t){e.call(this);var n=t.evaluationResults,r=n.map(function(e){return new a(e)});this.viewModels=ko.observableArray(r)}return __extends(t,e),t}(i.Disposable);t.RegressionEvaluationContainerViewModel=u;var a=function(e){function t(t){e.call(this),this.metricsIsCollapsed=ko.observable(!1),this.histogramIsCollapsed=ko.observable(!1),this.precision=6,this.metrics=this.convertMetricsToTable(t.metrics);var r={name:s.regressionError,index:0,elementType:null,featureType:"Numeric"},i=t.errorHistogram;this.errorHistogram=i==null?null:new n.D3GraphViewModel(0,ko.observable(!1),ko.observable(!1),ko.observable(10),ko.observable(0),ko.observable(!1),ko.observable(!1),null,r,ko.observable(null),i,0)}return __extends(t,e),t.prototype.convertMetricsToTable=function(e){function r(e){return e.toFixed?o.reduceToFixedPrecision(e,n):e}var t=this,n=this.precision,i=e.features.map(function(n,i){var s=t.getMetricName(n.name),o=e.records[0][i];return[s,r(o)]});return i},t.prototype.getMetricName=function(e){var t=s;switch(e){case"Mean Absolute Error":return t.regressionMetricMeanAbsoluteError;case"Root Mean Squared Error":return t.regressionMetricRootMeanSquaredError;case"Relative Absolute Error":return t.regressionMetricRelativeAbsoluteError;case"Relative Squared Error":return t.regressionMetricRelativeSquaredError;case"Coefficient of Determination":return t.regressionMetricCoefficientOfDetermination;default:return e}},t}(i.Disposable);t.RegressionEvaluationResult=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/ROutputViewModel",["require","exports","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources"],function(e,t,n,r){var i=function(e){function t(t){var n=this;e.call(this),this.pngSrcBase="data:image/png;base64,";var i={label:r.rOutputStandardOutput,content:t["Standard Output"],show:!0},o={label:r.rOutputStandardError,content:t["Standard Error"],show:!1};this.showGraphicsDevice=ko.observable(!0),this.outputLogs=ko.observableArray([new s(i),new s(o)]),this.pngSrcs=ko.observableArray(t["Graphics Device"].map(function(e){return n.pngSrcBase+e}))}return __extends(t,e),t}(n.Disposable);t.ROutputViewModel=i;var s=function(e){function t(t){e.call(this),this.label=ko.observable(t.label),this.content=ko.observable(t.content),this.show=ko.observable(t.show)}return __extends(t,e),t}(n.Disposable);t.OutputLogViewModel=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/CustomUX/TreeEnsembleViewModel",["require","exports","../../View/CoordinateHelper","../../View/PanHelper","../../View/Bubble/ViewPort","../../View/ZoomControl","../../View/ZoomHelper","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f){function l(e,t){return e.isLeaf()?t.isLeaf()?e.getLeaf().offset==t.getLeaf().offset:!1:t.isLeaf()?!1:e.getInterior().offset==t.getInterior().offset}var c=function(){function e(e){this.index=e}return e.fromLeaf=function(t){return new e(~t.offset)},e.fromInterior=function(t){return new e(t.offset)},e.interiorRoot=function(){return new e(0)},e.leafRoot=function(){return new e(-1)},e.prototype.isLeaf=function(){return this.index<0},e.prototype.getLeaf=function(){if(!this.isLeaf())throw new Error("node is not leaf");return{offset:~this.index}},e.prototype.getInterior=function(){if(this.isLeaf())throw new Error("node is not interior");return{offset:this.index}},e}();t.NodeIdentifier=c;var h=function(){function e(e,t,n,r,i,s){this.xScalingFactor=80,this.yScalingFactor=100,this.radius=40,this.comparisonTolerance=1e-4,this.almostTwoPi=(1-this.comparisonTolerance)*2*Math.PI,this.selectTreeNode=function(e){e.tree.selectNode(e.index)},this.index=e,this.x=this.xScalingFactor*t,this.y=this.yScalingFactor*n,this.tree=r,this.highlight=ko.observable(!1),this.feature=ko.observable(null),this.predicate=ko.observable(null),this.fullFeatureName=ko.observable(null),this.isLeaf=ko.observable(e.isLeaf()),this.classPercentage=ko.observable(null),this.showClassPercentage=ko.observable(!1),this.arcPath=ko.observable(null),this.nodeStatistics=i,this.isPlaceholder=ko.observable(s);if(this.isLeaf()){this.computeClassPercentageAndArcPath(i);return}var o=this.index.getInterior().offset;this.feature(this.tree.featureLabels[o]),this.predicate(this.tree.predicateLabels[o]),this.fullFeatureName(this.tree.fullFeatureNames[o]),this.tree.isNodeLoaded(e)||(this.feature(a.treeEnsembleExpand),this.predicate(null))}return e.prototype.computeClassPercentageAndArcPath=function(e){var t,n;if(e["Prediction Type"]==="Histogram"){var r=e.graph.yPredictionValues.reduce(function(e,t){return e+t});n=e.graph.yPredictionValues[0]/r,t=n*2*Math.PI,this.showClassPercentage(!0)}else n=1,t=2*Math.PI;Math.abs(2*Math.PI-t)<this.comparisonTolerance&&(t=this.almostTwoPi);var i=this.computeArcPath(t);this.arcPath(i);var s=this.computeLeafNodeFeatureName(e),o=this.tree.formatFeatureLabel(s);this.feature(o),this.fullFeatureName(s);var u=(n*100).toFixed(0);this.classPercentage(u+"%")},e.prototype.computeArcPath=function(e){var t=this.x,n=this.y-this.radius,r=this.radius*Math.sin(e),i=this.radius*Math.cos(e),s=this.x+r,o=this.y-i,u=e>Math.PI?1:0,a=f.format("M {0},{1} A {2},{3} 0 {4} 1 {5} {6}",t.toString(),n.toString(),this.radius.toString(),this.radius.toString(),u.toString(),s.toString(),o.toString());return a},e.prototype.computeLeafNodeFeatureName=function(e){var t;if(e["Prediction Type"]==="Histogram")t=0;else{var n=e.graph.yPredictionValues;if(n.length===2){var r=1/(1+Math.exp(n[1]));n[0]=1-r,n[1]=r}var i=n.indexOf(Math.max.apply(Math,n));t=i}return e.graph.xValues[t]},e}();t.TreeNode=h;var p=function(){function e(e,t){this.start=e,this.end=t,this.highlight=ko.observable(!1),this.text=ko.observable(null)}return e}();t.TreeEdge=p;var d=function(e){function t(t,n){var r=this;e.call(this),this.isLoadingNodes=!1,this.edgeCaptions=!1,this.buttonDragMode=!1,this.spaceDragMode=!1,this.maxFeatureNameLength=14,this.predicatePrecision=4;var i=this;this.nodeProvider={getInteriorNodeStatistics:function(e){return n.getInteriorNodeStatistics(i.serverInteriorIds[e.offset])},getLeafNodeStatistics:function(e){return n.getLeafNodeStatistics(i.serverLeafIds[e.offset])},getSubtree:function(e,t){n.getSubtree(i.serverInteriorIds[e.offset],t)}},this.interiorNodes=ko.observableArray([]),this.featureLabels=[],this.predicateLabels=[],this.fullFeatureNames=[],this.leftChild=[],this.rightChild=[],this.leafNodes=ko.observableArray([]),this.leftEdges=ko.observableArray([]),this.rightEdges=ko.observableArray([]),this.serverInteriorIds=[],this.serverLeafIds=[],this.nodeStatisticsForHighlightedPath=ko.observableArray([]);if(t.interiorXs.length===0){var s=c.fromLeaf({offset:0}),o=this.nodeProvider.getLeafNodeStatistics(s.getLeaf());o.done(function(e){r.leafNodes.push(new h(s,t.leafXs[0],t.leafYs[0],r,e))});return}this.featureLabels.push(null),this.predicateLabels.push(null),this.leftChild.push(null),this.rightChild.push(null),this.interiorNodes.push(new h(c.fromInterior({offset:0}),0,0,this,null,!0)),this.serverInteriorIds.push(null),this.replaceNodeWithTree({offset:0},t,!0)}return __extends(t,e),t.prototype.nodeToParentMap=function(e){return e.isLeaf()?{offset:this.leafNodeToParentNode[e.getLeaf().offset]}:{offset:this.interiorNodeToParentNode[e.getInterior().offset]}},t.prototype.updateTreeViewHeight=function(){var e=$("#treeViewContainer").innerHeight();$("#treeView").height(e)},t.prototype.isRoot=function(e){var t=this.interiorNodes().length==0;return t?l(e,c.leafRoot()):l(e,c.interiorRoot())},t.prototype.updateTreeViewWidth=function(){var e=$("#treeEnsembleViewContainer").innerWidth(),t=$("#treeThumbnailSidebar").outerWidth(),n=e-t;$("#treeViewContainer").width(n)},t.prototype.updateTreeViewLayout=function(){this.updateTreeViewHeight(),this.updateTreeViewWidth()},t.prototype.getViewDimensions=function(){var e=$("#treeView").get(0);return{x:e.getBoundingClientRect().left,y:e.getBoundingClientRect().top,width:e.clientWidth,height:e.clientHeight}},t.prototype.setPanning=function(e){e===!1?($("#treeInterface").draggable("disable"),$("#treeInterface").removeClass("ui-state-disabled"),$("#treeViewContainer").css("cursor","auto")):($("#treeInterface").draggable("enable"),$("#treeViewContainer").css("cursor","all-scroll")),this.draggable=e},t.prototype.togglePanning=function(){this.setPanning(!this.draggable)},t.prototype.updateCaptions=function(){var e=this,t="",n="";this.edgeCaptions&&(t=a.treeEnsembleTrue,n=a.treeEnsembleFalse),e.leftEdges().forEach(function(e,n,r){e.text(t)}),e.rightEdges().forEach(function(e,t,r){e.text(n)})},t.prototype.loadSubtree=function(e){var t=this;Shell.UI.Spinner.show(),this.nodeProvider.getSubtree(e,function(n){t.replaceNodeWithTree(e,n,!1)})},t.prototype.initialize=function(){var e=$("#treeToolbar").get(0);if(!e)return;this.zoomControl=new s.ZoomControl(e,$("#treeInterface").get(0));var t=this,a;$("#treeInterface").draggable({start:function(e,t){a={x:e.pageX,y:e.pageY}},drag:function(e,n){var r=e.pageX-a.x,i=e.pageY-a.y;a={x:e.pageX,y:e.pageY},t.zoomHelper.pan(r,i),n.position.left=0,n.position.top=0}}),this.setPanning(!1);var f=new r.PanHelper(e,function(e){if(t.spaceDragMode===!0)return;t.buttonDragMode=!t.buttonDragMode,t.togglePanning()});$("#viewMode").on("change",function(e){t.edgeCaptions=e.currentTarget.checked,t.updateCaptions()}),$("#treeInterface").keydown(function(e){e.which===32&&t.buttonDragMode===!1&&(t.setPanning(!0),t.spaceDragMode=!0)}),$("#treeInterface").keyup(function(e){e.which===32&&t.spaceDragMode===!0&&(t.setPanning(!1),t.spaceDragMode=!1)}),this.registerForDisposal(this.zoomControl);var l=$("#treeSvg").get(0),c=$("#transformElement").get(0),h=function(){return t.getViewDimensions()},p=new n.CoordinateHelper(l,h,c),d=l.createSVGPoint(),v=function(e){t.updateTreeViewLayout()},m=function(){return d},g=function(){},y={length:0,item:function(e){throw new Error("out of range")}},b=function(){return Shell.Utilities.getBBoxOrDefaultSVGRect(c)};this.zoomHelper=new o.ZoomHelper(c,l,p,this.zoomControl,h,v,m,g,g,y,b),this.registerForDisposal(new u.DisposableKnockoutObject(i.ViewPort.getInstance().refreshed.subscribe(function(){t.updateTreeViewLayout()}))),this.updateTreeViewLayout(),this.zoomHelper.fitExperimentWithoutAnimation()},t.prototype.assignParentNodes=function(e,t,n){for(var r=0;r<e.length;++r){var i=e[r];if(i==null)continue;if(i.isLeaf()){t[i.getLeaf().offset]=r;continue}n[i.getInterior().offset]=r}},t.prototype.setupNodeToParentMap=function(e,t){this.leafNodeToParentNode=new Array(e.length),this.interiorNodeToParentNode=new Array(t.length),this.assignParentNodes(e,this.leafNodeToParentNode,this.interiorNodeToParentNode),this.assignParentNodes(t,this.leafNodeToParentNode,this.interiorNodeToParentNode)},t.prototype.nodePairToEdgeWithCollection=function(e,t){var n=l(this.leftChild[t.offset],e),r=l(this.rightChild[t.offset],e),i=n&&r,s=!n&&!r;if(i||s)throw new Error("expected child to be exclusively either left or right not both");return n?{edge:this.leftEdges()[t.offset],collection:this.leftEdges,splits:this.leftChild}:{edge:this.rightEdges()[t.offset],collection:this.rightEdges,splits:this.rightChild}},t.prototype.nodePairToEdge=function(e,t){return this.nodePairToEdgeWithCollection(e,t).edge},t.prototype.addNodes=function(e,t,n,r,i,s){for(var o=e;o<t.length;o++){var u=i(o),a=new h(u,t[o],n[o],this,s[o]);r.push(a)}},t.prototype.createEdgeFromNodeSplit=function(e,t){var n=this.interiorNodes()[e.offset],r={x:n.x,y:n.y},i=t[e.offset];if(i==null)return null;var s=i.isLeaf()?this.leafNodes()[i.getLeaf().offset]:this.interiorNodes()[i.getInterior().offset],o={x:s.x,y:s.y},u=new p(r,o);return u},t.prototype.addEdges=function(e,t,n,r){for(var i=e;i.offset<=t.offset;i={offset:i.offset+1}){var s=this.createEdgeFromNodeSplit(i,n);if(s==null)continue;r.push(s)}},t.prototype.setHighlightInteriorNode=function(e,t){this.interiorNodes()[e.offset].highlight(t)},t.prototype.setHighlightLeafNode=function(e,t){this.leafNodes()[e.offset].highlight(t)},t.prototype.setHighlightEdge=function(e,t,n){var r=this.nodePairToEdge(e,t);r&&r.highlight(n)},t.prototype.setHighlightNodesUpToRoot=function(e,t){var n=e,r;if(e.isLeaf()){this.setHighlightLeafNode(e.getLeaf(),t);if(this.interiorNodes().length===0)return;r=this.nodeToParentMap(e),this.setHighlightEdge(n,r,t)}else r=e.getInterior();var i;while(!this.isRoot(c.fromInterior(r)))this.setHighlightInteriorNode(r,t),i=r,r=this.nodeToParentMap(c.fromInterior(i)),this.setHighlightEdge(c.fromInterior(i),r,t);this.setHighlightInteriorNode(r,t)},t.prototype.switchHighlightingToNodeToRoot=function(e){this.previouslyHighlighted&&this.setHighlightNodesUpToRoot(this.previouslyHighlighted,!1),this.setHighlightNodesUpToRoot(e,!0),this.previouslyHighlighted=e},t.prototype.clearSelection=function(){this.previouslyHighlighted&&this.setHighlightNodesUpToRoot(this.previouslyHighlighted,!1),this.previouslyHighlighted=null,this.nodeStatisticsForHighlightedPath([])},t.prototype.populateStatistics=function(e){var t=[];while(e.length>0){var n=e.pop(),r;if(n.isLeaf()){var i=n.getLeaf().offset;r=this.leafNodes()[i]}else{var s=n.getInterior().offset;r=this.interiorNodes()[s]}t.push(r.nodeStatistics)}this.nodeStatisticsForHighlightedPath(t)},t.prototype.selectNode=function(e){if(this.isLoadingNodes)return;if(this.buttonDragMode||this.spaceDragMode)return;if(this.isNodeLoaded(e)){this.switchHighlightingToNodeToRoot(e);var t=[];t.push(e);if(!this.isRoot(e)){e=c.fromInterior(this.nodeToParentMap(e));while(!this.isRoot(e))t.push(e),e=c.fromInterior(this.nodeToParentMap(e));t.push(e)}this.populateStatistics(t)}else this.clearSelection(),this.loadSubtree(e.getInterior())},t.prototype.isNodeLoaded=function(e){if(e.isLeaf())return!0;var t=this.leftChild[e.getInterior().offset];return!!t},t.prototype.graphToPreview=function(e){var t={columnWidth:5,labels:e.xValues,predictValues:e.yPredictionValues,trainValues:e.yTrainingValues};return t},t.prototype.replaceNodeWithTree=function(e,t,n){var r=this;this.isLoadingNodes=!0;var i=this.interiorNodes().length,s=this.leafNodes().length,o=function(e){return e.isLeaf()?c.fromLeaf({offset:e.getLeaf().offset+s}):c.fromInterior({offset:e.getInterior().offset+i-1})},u=e.offset;this.replaceNodeWithSubtreeRoot(u,t,o);var a=t.leftChild.length;for(var l=1;l<a;++l)this.predicateLabels.push(this.formatPredicateLabel(t.predicate[l])),this.featureLabels.push(this.formatFeatureLabel(t.feature[l])),this.fullFeatureNames.push(t.feature[l]),this.serverInteriorIds.push((new c(t.interiorIds[l])).getInterior()),t.leftChild[l]==null?(this.leftChild.push(null),this.rightChild.push(null)):(this.leftChild.push(o(new c(t.leftChild[l]))),this.rightChild.push(o(new c(t.rightChild[l]))));for(var l=0;l<t.leafXs.length;++l)this.serverLeafIds.push((new c(t.leafIds[l])).getLeaf());this.setupNodeToParentMap(this.leftChild,this.rightChild);var p=function(e){return o(c.fromInterior({offset:e}))},d=function(e){return o(c.fromLeaf({offset:e}))},v=[];for(var l=0;l<t.leafIds.length;l++){var m=d(l).getLeaf();v[l]=this.nodeProvider.getLeafNodeStatistics(m)}var g=[];for(var l=0;l<t.interiorIds.length;l++){var m=p(l).getInterior();g[l]=this.nodeProvider.getInteriorNodeStatistics(m)}f.when.apply(null,v).done(function(){var i=[].slice.apply(arguments);i=i.map(function(e){return r.formatNodeStatistics(e)}),f.when.apply(null,g).done(function(){var s=[].slice.apply(arguments);s=s.map(function(e){return r.formatNodeStatistics(e)}),r.interiorNodes.replace(r.interiorNodes()[u],new h(new c(u),t.interiorXs[0],t.interiorYs[0],r,s[0])),r.addNodes(1,t.interiorXs,t.interiorYs,r.interiorNodes,p,s),r.addNodes(0,t.leafXs,t.leafYs,r.leafNodes,d,i),r.addEdges(e,e,r.leftChild,r.leftEdges),r.addEdges(e,e,r.rightChild,r.rightEdges);var o=a-1,f={offset:r.leftChild.length-1},l={offset:f.offset-o+1};r.addEdges(l,f,r.leftChild,r.leftEdges),r.addEdges(l,f,r.rightChild,r.rightEdges);if(!r.isRoot(c.fromInterior(e))){var v=c.fromInterior(e),m=r.nodeToParentMap(v),g=r.nodePairToEdgeWithCollection(v,m);g.collection.replace(g.edge,r.createEdgeFromNodeSplit(m,g.splits))}r.isLoadingNodes=!1;try{n&&r.zoomHelper.fitExperimentWithoutAnimation()}catch(y){}finally{Shell.UI.Spinner.hide()}})})},t.prototype.replaceNodeWithSubtreeRoot=function(e,t,n){this.predicateLabels[e]=this.formatPredicateLabel(t.predicate[0]),this.featureLabels[e]=this.formatFeatureLabel(t.feature[0]),this.fullFeatureNames[e]=t.feature[0],this.leftChild[e]=n(new c(t.leftChild[0])),this.rightChild[e]=n(new c(t.rightChild[0])),this.serverInteriorIds[e]=(new c(t.interiorIds[0])).getInterior()},t.prototype.formatPredicateLabel=function(e){var t="≤",n=e.split(t);if(n.length<=1)return e;var r=n[1],i=parseFloat(r),s=f.reduceToFixedPrecision(i,this.predicatePrecision);return f.format("{0}{1}",t,s.toString())},t.prototype.formatNodeStatistics=function(e){function s(t){var n=e[t];n&&(e[t]=f.reduceToFixedPrecision(parseFloat(n),i))}var t=e.graph;if(t){var n=e.graph.yPredictionValues;if(n){var r=n.reduce(function(e,t){return e+t});t.yValueSum=r}}var i=6;return s("Split Gain"),s("Gain P-Value"),e},t.prototype.formatFeatureLabel=function(e){var t=e;return e.length>this.maxFeatureNameLength&&(t=e.slice(0,this.maxFeatureNameLength)+"..."),t},t}(u.Disposable);t.Tree=d;var v=function(e){function t(t){e.call(this),this.numberOfTreesToLoadOnInitialize=15,this.numberOfTreesToLoadPerRequest=5,this.scrollBottomToTriggerAdditionalThumbnails=100,this.showLoadMore=ko.observable(!0),this.loadMore=function(e){var t=e.treeThumbnailUrls().length,n=Math.min(t+this.numberOfTreesToLoadPerRequest,e.treeCount);e.loadTrees(t,n),e.loadThumbnails(t,n)},this.onScroll=function(e){var t=e.treeCount==e.treeThumbnailUrls().length;if(t)return;e.isAlmostScrolledToBottom()&&e.loadMore(e)},this.treeCount=t.learner.treeCount,this.dataProvider=t.dataProvider,this.treeThumbnailUrls=ko.observableArray([]),this.selectedTreeIndex=ko.observable(0),this.tree=ko.observable(null)}return __extends(t,e),t.prototype.unloadedTreesRemaining=function(){return this.treeCount>this.treeThumbnailUrls().length},t.prototype.isAlmostScrolledToBottom=function(){var e=$("#treeThumbnailSidebar"),t=e[0].scrollHeight-e.height()-e.scrollTop();return t<this.scrollBottomToTriggerAdditionalThumbnails},t.prototype.dispose=function(){e.prototype.dispose.call(this),Shell.UI.Spinner.hide(),this.tree()&&this.tree().dispose(),$(window).off("resize","*",this.resizeHandler)},t.prototype.loadTrees=function(e,t){var n=this;for(var r=e;r<t;r++){var i={index:r,thumbnailUrl:ko.observable(""),select:function(e){Shell.UI.Spinner.show(),n.selectedTreeIndex(e.index),n.dataProvider.getRootSubTreeStructure(e.index,function(t){Shell.UI.Spinner.show(),n.tree()&&n.tree().dispose();var r={getInteriorNodeStatistics:function(t){return n.dataProvider.getInteriorNodeStatistics(e.index,t)},getLeafNodeStatistics:function(t){return n.dataProvider.getLeafNodeStatistics(e.index,t)},getSubtree:function(t,r){n.dataProvider.getSubTreeStructure(e.index,t,r)}};n.tree(new d(t,r)),n.tree().initialize()})}};this.treeThumbnailUrls.push(i)}this.showLoadMore(this.unloadedTreesRemaining())},t.prototype.loadThumbnails=function(e,t){function r(e,t){n.dataProvider.getTreeThumbnail(e,function(e){t.thumbnailUrl("data:image/png;base64,"+e)})}var n=this;f.forEach(this.treeThumbnailUrls(),function(e){r(e.index,e)})},t.prototype.initialize=function(){var e=Math.min(this.treeCount,this.numberOfTreesToLoadOnInitialize);this.loadTrees(0,e);while(this.isAlmostScrolledToBottom()&&this.unloadedTreesRemaining())this.loadMore(this);if(this.treeThumbnailUrls().length>0){var t=this.treeThumbnailUrls()[0];t.select(t)}this.loadThumbnails(0,e)},t}(u.Disposable);t.TreeEnsembleViewModel=v}),define("generated/editor/TS/ViewModel/Visualization/VisualizationDataProvider",["require","exports"],function(e,t){var n=function(){function e(e){this.workspace=e.workspace,this.portModel=e.portModel,this.isModule=e.isModule}return e.prototype.getData=function(e,t,n,r){var i=this.portModel.parent.executedExperimentId;return this.workspace.getPaginatedModuleVisualizationData(i,this.portModel.parent.id,this.portModel.name,e,t,n,r)},e}();t.VisualizationDataProvider=n}),define("generated/editor/TS/ViewModel/Visualization/Util",["require","exports","./Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Contracts/V1/Common/VisualizationContracts","../../../../DataLabClient/Util","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o){function f(e){return e.replace(a,function(e){return"&"+u[e]+";"})}function l(e,t){return typeof e=="number"?t&&n.typesToNotReducePrecision.indexOf(t)===-1?s.reduceToFixedPrecision(e,n.maxPrecision):e:typeof e=="string"?f(e):e?e.isInf?r.visualizationInfinity:e.isNan?r.visualizationNaN:e:""}function c(e,t){return typeof e=="number"?s.reduceToFixedPrecision(e,n.maxPrecisionOfStats):typeof e=="string"?f(e):e?e.isInf?r.visualizationInfinity:e.isNan?i.isNumericFeature(t)?r.visualizationNaN:"":e:""}function h(e){return r["visualizationStatistic"+e.replace(/ /g,"")]||e}function p(e){var t=e.features;for(var n=0;n<t.length;n++)t[n].name=f(t[n].name);e.records.forEach(function(e){return e.forEach(function(n,r){return e[r]=l(n,t[r].elementType)})})}function d(e){var t=s.format(r.errorGettingVisualizationData,s.getErrorDetails(e));s.showErrorNotification({title:"Pagination Failure",details:t}),o.customEvent({key:"PaginationFailed",type:"Visualization",data:t}),o.exception(e,"Failure in getting pagination data","PaginationFailed",t)}function v(e,t,n,r,i,s,o,u){return e>=i&&t>=s&&e+n<=i+o&&t+r<=s+u}var u={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},a=new RegExp("["+Object.keys(u).join("")+"]","g");t.getDataValue=l,t.getStatisticValue=c,t.getStatisticName=h,t.setViewableRecordsByFeatures=p,t.handlePaginationError=d,t.vertical={dim:0,offsetLow:function(e){return e[0].offsetTop},size:function(e,t){return t===undefined?e.height():e.height(t)},outerSize:function(e){return e.outerHeight()},scrollLow:function(e,t){return t===undefined?e.scrollTop():e.scrollTop(t)}},t.horizontal={dim:1,offsetLow:function(e){return e[0].offsetLeft},size:function(e,t){return t===undefined?e.width():e.width(t)},outerSize:function(e){return e.outerWidth()},scrollLow:function(e,t){return t===undefined?e.scrollLeft():e.scrollLeft(t)}},t.axes=[t.vertical,t.horizontal],t.rectInRect=v}),define("generated/editor/TS/ViewModel/Visualization/LRUList",["require","exports"],function(e,t){var n=function(){function e(e){this.head=null,this.tail=null,this.length=0,this.maxLength=e}return e.prototype.addItem=function(e){++this.length>this.maxLength&&this.delItem(this.tail),this.head&&(this.head.prev=e),this.head=e,this.tail||(this.tail=e)},e.prototype.delItem=function(e){this.tail===e&&(this.tail=e.prev),this.head===e&&(this.head=e.next),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.length-=1},e.prototype.itemToFront=function(e){if(this.head===e)return;this.tail===e&&(this.tail=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.prev=null,e.next=this.head,this.head.prev=e,this.head=e},e}();t.List=n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Visualization/CachedData",["require","exports","./Constants","./Util","./LRUList","../../../../DataLabClient/Constants","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o){var u=function(e){function t(t,i,s){s===void 0&&(s={}),s=$.extend({},n,s),e.call(this,s.cachedPages),this.options=s,this.size=[t.numberOfRows,t.numberOfColumns],this.provider=i,this.map={},this.totalFetches=0,this.reqFetches=0,r.setViewableRecordsByFeatures(t),this.setPages(0,0,t,!0),t.records.length>n.hugeSize[0]&&(t.records=t.records.slice(0,n.hugeSize[0]));if(t.features.length>n.hugeSize[1]){t.features=t.features.slice(0,n.hugeSize[1]);for(var o=0;o<t.records.length;o++)t.records[o]=t.records[o].slice(0,n.hugeSize[1])}this.initTable=t,this.initDataWasWholeData=this.size[0]==t.records.length&&this.size[1]==t.records[0].length}return __extends(t,e),t.prototype.fetch=function(e,t,n){var i=this,s=this.actualSize(e,t);if(s[0]==0){setTimeout(n);return}var u=this.cellToBlockCoords(e,s),a=u[0],f=u[1],l=function(){return(f[0]-a[0])*(f[1]-a[1])};this.totalFetches+=l();var c=this.shaveEdges(a,f);this.reqFetches+=l();var h=function(){return c.forEach(function(e){e.count=c.length,e.callback=n})};if(a[0]>=f[0]||a[1]>=f[1]){if(c.length==0)return n();h();return}var p=a.map(function(e,t){return e*i.options.blockSize[t]}),d=a.map(function(e,t){return Math.min(i.size[t]-p[t],(f[t]-e)*i.options.blockSize[t])}),v={count:1,callback:n};for(var m=a[0];m<f[0];m++)for(var g=a[1];g<f[1];g++)this.makePage(m,g).job=v;c.push(v),h();var y=null,b=(new Date).getTime();this.provider.getData(p[0],d[0],p[1],d[1]).done(function(e){o.featureUsage({groupID:19,featureID:211,data:{req:""+d[0]+"x"+d[1]+"@"+p[0]+","+p[1],time:(new Date).getTime()-b}});try{e=JSON.parse(e).data,r.setViewableRecordsByFeatures(e),i.setPages(a[0],a[1],e),--v.count<=0&&v.callback()}catch(t){y=t}}).fail(function(e){y=e}).always(function(){y!==null&&r.handlePaginationError(y)})},t.prototype.reportStats=function(){o.featureUsage({groupID:19,featureID:212,data:{total:this.totalFetches,hits:this.totalFetches-this.reqFetches}})},t.prototype.maybeRenderHTML=function(e,t){var n=this,r=this.actualSize(e,t);if(r[0]==0)return null;var i=this.options.blockSize,s=this.cellToBlockCoords(e,r),o=s[0],u=s[1],a=[];for(var f=o[0];f<u[0];f++){var l=[];for(var c=o[1];c<u[1];c++){var h=this.map[""+f+","+c];if(!h||!h.data)return null;l.push(h)}a.push(l)}a.forEach(function(e){return e.forEach(function(e){return n.itemToFront(e)})});var p=[],d=i[0]*i[1],v=(e[0]-o[0]*i[0])*i[1],m=e[1]-o[1]*i[1],g=0;for(var y=r[0];y>0;y--){var l=[],b=v+i[1];a[g].forEach(function(e){for(var t=v;t<b;t++)l.push(e.data[t])}),p.push("<td>"+l.slice(m,m+r[1]).join("</td><td>")+"</td>"),v=b,v>=d&&(v-=d,g++)}var w="<tr>"+p.join("</tr><tr>")+"</tr>",E=[].concat.apply([],a[0].map(function(e){return e.meta})).slice(m,m+r[1]);return[w,E]},t.prototype.renderInitialHTML=function(e){var t=this.initTable;delete this.initTable,e[0]=t.records.length,e[1]=t.records[0].length;var n="<tr>"+t.records.map(function(e){return"<td>"+e.join("</td><td>")+"</td>"}).join("</tr><tr>")+"</tr>";return[n,t.features]},t.prototype.cellToBlockCoords=function(e,t){var n=this;return[e.map(function(e,t){return Math.floor(e/n.options.blockSize[t])}),e.map(function(e,r){return Math.floor((e+t[r]-1)/n.options.blockSize[r])+1})]},t.prototype.actualSize=function(e,t){var n=t.slice();for(var r=0;r<2;r++)if(e[r]+n[r]>this.size[r]){n[r]=this.size[r]-e[r];if(n[r]<=0)return[0,0]}return n},t.prototype.shaveEdges=function(e,t){var n=this,r=[],i=function(i,s){var o=[];for(var u=e[s];u<t[s];u++){var a=n.map[s==0?""+u+","+i:""+i+","+u];if(!a)return!1;n.itemToFront(a),a.job&&a.job.count>0&&o.push(a.job)}for(var u=0;u<o.length;u++)r.indexOf(o[u])==-1&&r.push(o[u]);return!0};e:for(var s=0;s<2;s++){while(i(e[s],1-s))if(++e[s]>=t[s])break e;while(i(t[s]-1,1-s))if(e[s]>=--t[s])break e}return r},t.prototype.setPages=function(e,t,n,r){var i=this;r===void 0&&(r=!1);var s=n.records,o=n.features,u=this.options.blockSize,a=u[0]*u[1],f=new Array,l=function(n,r){var l=new Array(a),c=0,h=n*u[0],p=r*u[1];for(var d=0;d<u[0];d++){var v=s[h+d];if(!v)break;for(var m=0;m<u[1];m++)l[c++]=v[p+m]}var g=i.makePage(e+n,t+r);g.data=l;if(f[r])g.meta=f[r];else{g.meta=new Array(u[1]);for(var d=0;d<Math.min(u[1],o.length-p);d++)g.meta[d]=o[p+d];f[r]=g.meta}delete g.job},c=s.length/u[0],h=s[0].length/u[1];c=r&&e+s.length<this.size[0]?Math.floor(c):Math.ceil(c),h=r&&t+s[0].length<this.size[1]?Math.floor(h):Math.ceil(h);for(var p=0;p<c;p++)for(var d=0;d<h;d++)l(p,d)},t.prototype.makePage=function(t,n){var r=""+t+","+n,i=this.map[r];if(i)return this.itemToFront(i),i;var s={key:r,next:this.head,prev:null};return this.map[r]=s,e.prototype.addItem.call(this,s),s},t.prototype.delPage=function(t){delete this.map[t.key],e.prototype.delItem.call(this,t)},t}(i.List);t.CachedData=u}),define("generated/editor/TS/ViewModel/Visualization/DataTableViewModel",["require","exports","./Constants","./Util","./CachedData","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){function u(e,t,i,u){function C(e,t){t===void 0&&(t=!1),S=!0;if(t&&r.rectInRect(y[0].scrollLeft(),y[0].scrollTop(),y[0].width(),y[0].height(),d[1],d[0],w[0].width(),w[0].height())){Shell.UI.Spinner.hide();return}var n=_(e);if(n.every(function(e,t){return e==h[t]}))return;var i=a.maybeRenderHTML(n,e);if(!i){S=!1;return}Shell.UI.Spinner.hide(),p=e,n.forEach(function(e,t){return h[t]=e}),L(i),j()}function k(){h=[0,0],p=[0,0],S=!0,L(a.renderInitialHTML(p))}function L(e){E[0][0].innerHTML=e[0];var t=e[1].map(function(e,t){return O(e,h[1]+t)}),n=new Array(t[0].length);for(var r=0;r<n.length;r++)n[r]="<tr>"+t.map(function(e){return e[r]}).join("")+"</tr>";ko.cleanNode(E[1][0]),E[1][0].innerHTML=n.join("")+'<tr><td><div class="selectedColumnIndicator"></div></td></tr>',ko.applyBindings(i,E[1][0]);var s="";for(var r=0;r<p[0];r++)s+='<tr><th class="tableIndexNumbers">'+(h[0]+r+1)+"</th></tr>";E[2][0].innerHTML=s,B(),I()}function O(e,t){return['<th><span class="tableIndexNumbers">'+(t+1)+".</span>&nbsp;"+e.name+"</th>",t>=A?'<td class="graphCell"><div class="noGraphIndicator"></div></td>':'<td class="graphCell" data-bind="d3graph: { data: $root.minimizedGraphs['+t+'].minimizedGraph, minWidth: 44, height: 30, padding: 0, minimized: true }"></td>']}function M(e,t){S||Shell.UI.Spinner.show(),a.fetch(_(e),e,t)}function _(e){return m.map(function(t,n){return Math.max(0,Math.min(Math.round(t-e[n]/2),a.size[n]-e[n]))})}function H(e){e.target==D?D=null:e.target==P?P=null:e.target==y[1][0]?(D=y[0][0],y[0].scrollLeft(y[1].scrollLeft())):e.target==y[2][0]?(D=y[0][0],y[0].scrollTop(y[2].scrollTop())):(D=y[1][0],P=y[2][0],y[1].scrollLeft(y[0].scrollLeft()),y[2].scrollTop(y[0].scrollTop()))}function B(){r.axes.forEach(function(e){var t=e===r.horizontal?[0,1].map(function(e){return E[e].children().eq(0).children()}):[0,2].map(function(e){return E[e].children()});for(var n=0;n<t[0].length;n++){var i=t[0].eq(n),s=t[1].eq(n),o=Math.max(e.size(i),e.size(s)),u=e.offsetLow(i)-e.offsetLow(s);e.size(i,u>=0?o:o-u),e.size(s,u<=0?o:o+u)}})}function j(){var e=E[0][0];r.axes.forEach(function(t){v[t.dim]=c[t.dim]==0?0:t.scrollLow(y[0])/c[t.dim];var n=v[t.dim]*a.size[t.dim],r=n==a.size[t.dim]?n-1:Math.floor(n);m[t.dim]=r,g[t.dim]=n-r,e&&h[t.dim]<=r&&r<h[t.dim]+p[t.dim]?e=e.children[r-h[t.dim]]:e=null});if(!e)return;var t=$(e);r.axes.forEach(function(e){var n=d[e.dim]+e.offsetLow(t)+e.outerSize(t)*g[e.dim],i=Math.round(l[e.dim]*v[e.dim]-n);if(i!=0){var s=d[e.dim]+=i;w[0].css(["top","left"][e.dim],s),e===r.horizontal?w[1].css("left",s):e===r.vertical&&w[2].css("top",s)}})}function F(e){var t=$(e.target).closest("td,th").index(),n=t<0?t:t+h[1];e.ctrlKey||(x=n,R(t)),u(n,e.ctrlKey)}function I(){q=-1,h[1]<=x&&x<h[1]+p[1]&&R(x-h[1])}function R(e){if(q==e)return;var t=E[1].children(),n=t.eq(0).children(),r=t.last().children().eq(0).children();q>=0&&n.eq(q).removeClass("selected");if(e<0)r.css({display:"none"});else{q<0&&r.css({display:"block"});var i=n.eq(e);i.addClass("selected"),r.width(i.outerWidth()-2),r.css({left:i.position().left})}q=e}var a,f,l,c,h,p,d,v=[0,0],m=[0,0],g=[0,0],y,b,w,E,S=!1,x=-1;a=new o(e,t),f=t&&!a.initDataWasWholeData,$("#numberRows").text(a.size[0].toString()),$("#numberColumns").text(a.size[1].toString()),w=[$("#dataTable"),$("#headerTable"),$("#rownumTable")],b=w.map(function(e){return e.parent()}),y=b.map(function(e){return e.parent()}),E=w.map(function(e){return e.find("tbody")}),k(),l=[0,0];var T=[0,0];r.axes.forEach(function(e){T[e.dim]=f?e.size(w[0])/p[e.dim]*a.size[e.dim]:e.size(w[0]),l[e.dim]=Math.min(n.maxDivPixelSize,T[e.dim]),e.size(b[0],l[e.dim]);var t=e===r.horizontal?1:e===r.vertical?2:null;e.size(b[t],l[e.dim]+100);var i=e.size(b[t])-100;i<l[e.dim]&&(e.size(b[0],i),l[e.dim]=i)}),r.axes.forEach(function(e){return e.scrollLow(y[0],l[e.dim])}),c=r.axes.map(function(e){return e.scrollLow(y[0])}),r.axes.forEach(function(e){return e.scrollLow(y[0],0)}),w.forEach(function(e){return e.css({position:"relative",left:0,top:0})}),d=[0,0],[0,1].forEach(function(e){return w[e].click(function(e){return F(e)})});var N=f?s.jobPipeline(function(){return H(N.event)},function(){return j()},50,function(){return C(n.smallSize,!0)},function(){return S?1e3:500},function(e){return M(n.bigSize,e)},function(){return!S&&C(n.smallSize,!0)},800,function(){return C(n.bigSize)},1500,function(e){return M(n.hugeSize,e)}):s.jobPipeline(function(){return H(N.event)});this.dispose=function(){N.abort(),a.reportStats()},y[0].one("scroll",function(){return y[0].on("scroll",N)}),y[1].on("scroll",H),y[2].on("scroll",H);var A=e.features.length,D=null,P=null,q=-1}var o=i.CachedData;t.DataTableViewModel=u}),define("generated/editor/TS/ViewModel/Visualization/GraphControlViewModel",["require","exports","../../../TS/ViewModel/Visualization/D3GraphViewModel","../../../TS/Global","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Contracts/V1/Common/VisualizationContracts"],function(e,t,n,r,i,s,o,u,a){var f=function(){function e(e,t,n){this.visible=ko.observable(!1),this.value=ko.observable(!1),this.label=ko.observable("")}return e.prototype.refresh=function(e,t){this.visible(e),this.label(t)},e}();t.ScaleBoxViewModel=f;var l=function(){function e(e,t,i,s){var o=this;this.isNull=t===null,this.compareToFeatures=e,this.crossCompareFeature=ko.observable("None"),this.isNull||(this.crossCompareFeatureContract=ko.computed(function(){return u.first(t.features,function(e){return e.name===o.crossCompareFeature()},null)}),this.crossCompareFeatureContract.subscribe(function(e){e?a.isNumericFeature(i.featureType)&&a.isNumericFeature(e.featureType)?o.graphType(2):!a.isNumericFeature(i.featureType)&&!a.isNumericFeature(e.featureType)?o.graphType(4):o.graphType(3):o.graphType(o.mainGraphType)}),this.feature=i.name),this.featureContract=i,this.mainGraphType=0,this.graphType=ko.observable(this.mainGraphType),this.binCount=ko.observable(10),this.categoriesCount=ko.observable(5),this.categoriesVisible=ko.observable(!0),this.binCountVisible=ko.observable(!0),this.xScaleCheckbox=new f(!0,!0,""),this.yScaleCheckbox=new f(!0,!0,""),this.probabilityDensity=ko.observable(!1),this.cumulativeDistribution=ko.observable(!1),this.probabilityFunctionsVisible=ko.observable(!0),this.scaleCheckboxesVisible=ko.computed(function(){return o.xScaleCheckbox.visible()||o.yScaleCheckbox.visible()}),this.parametersVisible=ko.computed(function(){return o.scaleCheckboxesVisible()||o.binCountVisible()||o.categoriesVisible()||o.probabilityFunctionsVisible()}),this.binCount.subscribe(this.logGraphControlEvent("BinCountChanged")),this.categoriesCount.subscribe(this.logGraphControlEvent("CategoriesCountChanged")),this.probabilityDensity.subscribe(this.logGraphControlEvent("ProbabilityDensityChanged")),this.cumulativeDistribution.subscribe(this.logGraphControlEvent("CumulativeDistributionChanged")),this.xScaleCheckbox.value.subscribe(this.logGraphControlEvent("XScaleCheckboxChanged")),this.yScaleCheckbox.value.subscribe(this.logGraphControlEvent("YScaleCheckboxChanged")),this.isNull?this.graph=null:(this.graph=new n.D3GraphViewModel(this.graphType(),this.xScaleCheckbox.value,this.yScaleCheckbox.value,this.binCount,this.categoriesCount,this.cumulativeDistribution,this.probabilityDensity,t,i,this.crossCompareFeatureContract,s),this.graphType.subscribe(function(e){o.graph.graphType(e)}),this.createInputsUI(),this.graphTypeString=ko.computed(function(){return r.GraphType[o.graph.graphType()]}))}return e.prototype.setCrossCompareFeature=function(e){u.first(this.compareToFeatures,function(t){return t===e},!1)&&this.crossCompareFeature(e)},e.prototype.setGraphType=function(e){(this.graphType()===0||this.graphType()===1)&&this.graphType(e),this.mainGraphType=e},e.prototype.logGraphControlEvent=function(e){return function(t){o.featureUsage({featureID:23,groupID:24,data:JSON.stringify({name:e,value:t})})}},e.prototype.createInputsUI=function(){var e=this;ko.computed(function(){var t=a.isNumericFeature(e.featureContract.featureType);switch(e.graph.graphType()){case 0:e.xScaleCheckbox.refresh(t?!0:!1,u.format(s.featureLogScale,e.feature)),e.yScaleCheckbox.refresh(!0,s.frequencyLogScale),e.binCountVisible(!0),e.categoriesVisible(!1),e.probabilityFunctionsVisible(t);break;case 1:e.xScaleCheckbox.refresh(!0,u.format(s.featureLogScale,e.feature)),e.yScaleCheckbox.refresh(!1,""),e.binCountVisible(!1),e.categoriesVisible(!1),e.probabilityFunctionsVisible(!1);break;case 2:e.xScaleCheckbox.refresh(!0,u.format(s.featureLogScale,e.feature)),e.yScaleCheckbox.refresh(!0,u.format(s.featureLogScale,e.crossCompareFeature())),e.binCountVisible(!1),e.categoriesVisible(!1),e.probabilityFunctionsVisible(!1);break;case 4:e.xScaleCheckbox.refresh(!1,""),e.yScaleCheckbox.refresh(!1,""),e.binCountVisible(!1),e.categoriesVisible(!1),e.probabilityFunctionsVisible(!1);break;case 3:e.xScaleCheckbox.refresh(!t,u.format(s.featureLogScale,e.crossCompareFeature())),e.yScaleCheckbox.refresh(t,u.format(s.featureLogScale,e.feature)),e.binCountVisible(!1),e.categoriesVisible(!0),e.probabilityFunctionsVisible(!1);break;default:throw new Error("Unknown Graph type requested: "+e.graphTypeString())}})},e}();t.GraphControlViewModel=l,t.NullGraph=new l([],null,null,null)});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Visualization/VisualizationViewModel",["require","exports","./Constants","./Util","./DataTableViewModel","./D3GraphViewModel","../../Global","./GraphControlViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=i.DataTableViewModel,p=s.D3GraphViewModel,d=f.Disposable,v=function(){function e(e,t,n,r,i){this.name=e,this.elementType=t,this.graphControl=n||u.NullGraph,this.minimizedGraph=r||null,this.columnStatistics=ko.observableArray(i)}return e}();t.ColumnViewModel=v;var m=function(){function e(e){this.feature=e,this.visible=ko.observable(!0),this.animationDuration=n.transitionDuration}return e}();t.SnapshotViewModel=m;var g=function(e){function t(t,n,r,i){var s=this;e.call(this),this.datatable=t,this.snapshots=ko.observableArray(),this.entireDatasetIsPresent=!0,this.statsDataTable=n,this.dataProvider=i&&i.isModule?i:null,this.statsAndGraphsIsCollapsed=ko.observable(!1),this.statsIsCollapsed=ko.observable(!1),this.visualizationIsCollapsed=ko.observable(!1),this.statsAndGraphsIsCollapsed.subscribe(this.createHeightOfResizeBarSubscription(0,function(e){return e?0:null})),this.statsIsCollapsed.subscribe(this.createHeightOfResizeBarSubscription(0)),this.visualizationIsCollapsed.subscribe(this.createHeightOfResizeBarSubscription(0)),r.records.some(function(e){return!e.every(function(e){return e===null})})&&(this.entireDatasetIsPresent=!1),this.layout=this.entireDatasetIsPresent?null:r,this.featureNames=t.features.map(function(e){return e.name}),this.featureNames.unshift("None"),this.minimizedGraphsTypeEnum=ko.observable(0),this.minimizedGraphsType=ko.computed(function(){return o.GraphType[s.minimizedGraphsTypeEnum()]});var a=t.features.map(function(e){return e.featureType});this.addFeatureTypeToStatsTable(a),this.setMinimizedGraphs(t.features),this.currentSelectedColumnIndex=ko.observable(-1),this.noSelectionExplanation=ko.observable(l.VisualizationToViewSelectAColumnInTheTable),this.columnIsSelected=ko.computed(function(){return s.currentSelectedColumnIndex()>=0}),this.currentSelectedColumnViewModel=ko.computed(function(){return s.columnIsSelected()?s.minimizedGraphs[s.currentSelectedColumnIndex()]:null}),this.graphControl=ko.computed(function(){return s.columnIsSelected()?s.minimizedGraphs[s.currentSelectedColumnIndex()].graphControl:u.NullGraph}),this.parametersAreVisible=ko.computed(function(){return s.entireDatasetIsPresent&&s.graphControl().parametersVisible()&&s.columnIsSelected()})}return __extends(t,e),t.prototype.initialize=function(){var e=this;this.dataTableViewModel=new h(this.datatable,this.dataProvider,this,function(t,n){return e.selectColumn(t,n)})},t.prototype.dispose=function(){this.dataTableViewModel&&this.dataTableViewModel.dispose&&this.dataTableViewModel.dispose(),e.prototype.dispose.call(this),Shell.UI.Spinner.hide()},t.prototype.setMinimizedGraphs=function(e){var t=this;this.minimizedGraphs=e.map(function(e){var n=new u.GraphControlViewModel(t.featureNames,t.datatable,t.datatable.features[e.index],t.layout);n.crossCompareFeature.subscribe(t.createHeightOfResizeBarSubscription(0));var r=t.constructMinimizedGraphViewModel(e.index),i=t.constructColumnStatistics(e.index);return new v(e.name,e.elementType,n,r,i)})},t.prototype.constructMinimizedGraphViewModel=function(e){var t=new p(this.minimizedGraphsTypeEnum(),ko.observable(!1),ko.observable(!1),ko.observable(10),ko.observable(0),ko.observable(!1),ko.observable(!1),this.datatable,this.datatable.features[e],ko.observable(null),this.layout,e);return this.minimizedGraphsTypeEnum.subscribe(function(e){t.graphType(e)}),t},t.prototype.constructColumnStatistics=function(e){var t=this.statsDataTable.features.map(function(e){return e.name}),n=this.datatable.features[e].featureType,i=this.statsDataTable.records[e];return i.map(function(e,i){return{name:r.getStatisticName(t[i]),value:r.getStatisticValue(e,n)}})},t.prototype.selectColumn=function(e,t){this.setHeightOfResizeBar(n.transitionDuration),this.statsAndGraphsIsCollapsed(!1);var r=0<=e&&e<this.datatable.features.length;t?r&&this.entireDatasetIsPresent&&this.columnIsSelected()&&(c.customEvent({key:"CtrlClickOnColumnToCompareTo",type:"Visualize",data:e}),this.graphControl().setCrossCompareFeature(this.datatable.features[e].name)):(c.customEvent({key:"ClickOnColumnToSelect",type:"Visualize",data:e}),this.currentSelectedColumnIndex(r?e:-1),this.noSelectionExplanation(r?null:l.VisualizationNotAvailableBeyondTheFirst100Columns))},t.prototype.setHeightOfResizeBar=function(e,t){t===void 0&&(t=null),setTimeout(function(){var e=t===null?Math.max($(".statsAndGraphs .statsAndGraphsContent").height()+$(".statsAndGraphs .statsAndGraphsExpander").height(),$(".statsAndGraphs").height()):t;$(".statsAndGraphs .resize").height(e)},e)},t.prototype.createHeightOfResizeBarSubscription=function(e,t){var n=this;return t===void 0&&(t=null),function(r){return n.setHeightOfResizeBar(e,t!==null?t(r):null)}},t.prototype.setGraphType=function(e){this.minimizedGraphsTypeEnum(e),this.minimizedGraphs.forEach(function(t){return t.graphControl.setGraphType(e)})},t.prototype.setHistogramMode=function(){this.setGraphType(0),c.featureUsage({featureID:25,groupID:24})},t.prototype.setBoxchartMode=function(){this.setGraphType(1),c.featureUsage({featureID:26,groupID:24})},t.prototype.takeSnapshot=function(){this.snapshots.unshift(new m(this.graphControl().feature)),c.customEvent({key:"TakeSnapshot",type:"Visualize"})},t.prototype.closeSnapshot=function(e,t){e.visible(!1),this.snapshots.remove(e),c.customEvent({key:"CloseSnapshot",type:"Visualize"})},t.prototype.addFeatureTypeToStatsTable=function(e){var t=this.statsDataTable;t.records.forEach(function(t,n){return t.push(e[n])}),t.features.push({featureType:"String",name:"Feature Type",elementType:"",index:t.features.length})},t}(d);t.VisualizationViewModel=g});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Visualization/VisualizationViewModelOld",["require","exports","../../../TS/ViewModel/Visualization/D3GraphViewModel","../../../TS/Global","../../../TS/ViewModel/Visualization/GraphControlViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Contracts/V1/Common/VisualizationContracts"],function(e,t,n,r,i,s,o,u,a,f,l){var c;(function(e){e.placeholderWidth="200px",e.placeholderHeight="155px",e.graphControlWidth="500px",e.graphControlheight="448px",e.transitionDuration=500,e.maxPrecision=6,e.maxPrecisionOfStats=4,e.maxNumberOfRowsToDisplay=100,e.typesToNotReducePrecision=["System.Int32","System.Int64"]})(c=t.Constants||(t.Constants={}));var h;(function(e){function h(e,t){return e&&e.toFixed?parseFloat(e.toFixed(t)):e}var t=function(){function e(e,t,n,r){this.selected=ko.observable(!1),this.name=e,this.graphControl=t?t:i.NullGraph,this.minimizedGraph=n,this.columnStatistics=ko.observableArray(r)}return e}();e.ColumnViewModel=t;var s=function(){function e(e){this.feature=e,this.visible=ko.observable(!0),this.animationDuration=c.transitionDuration}return e}();e.SnapshotViewModel=s,e.reduceToFixedPrecision=h;var p=function(){function e(e,t){this.numberOfColumns=e.numberOfColumns,this.numberOfRows=e.numberOfRows;var n=Math.min(e.records.length,c.maxNumberOfRowsToDisplay);this.initializeRecords(e,n,t),this.initializeComputedRowColumnCounts()}return e.prototype.initializeRecords=function(e,t,n){var r=new Array(t),i=e.features;for(var s=0;s<t;s++){var o=e.records[s],u=Math.min(n,o.length),a=new Array(u);for(var f=0;f<u;f++){var l=o[f],c=i[f].elementType,h=this.parseCellValue(l,c);a[f]=h}r[s]=ko.observableArray(a)}this.records=ko.observableArray(r)},e.prototype.initializeComputedRowColumnCounts=function(){var e=this;this.numberOfDisplayedRows=ko.computed(function(){return e.records().length}),this.numberOfDisplayedColumns=ko.computed(function(){var t=e.records()[0];return t?t().length:0})},e.prototype.parseCellValue=function(e,t){var n;if(!e)n=e;else if(e.isNan)n=u.visualizationNaN;else if(e.isInf)n=u.visualizationInfinity;else{var r=t&&typeof e=="number"&&c.typesToNotReducePrecision.indexOf(t)===-1;n=r?h(e,c.maxPrecision):e}return n},e}();e.DataTableViewModel=p;var d=function(e){function o(t,n,s,o,u){var a=this;e.call(this),this.datatable=t,this.snapshots=ko.observableArray(),this.entireDatasetIsPresent=!0,this.statsDataTable=n,this.statsAndGraphsIsCollapsed=ko.observable(!1),this.statsIsCollapsed=ko.observable(!1),this.visualizationIsCollapsed=ko.observable(!1),this.statsAndGraphsIsCollapsed.subscribe(this.createHeightOfResizeBarSubscription(0,function(e){return e?0:null})),this.statsIsCollapsed.subscribe(this.createHeightOfResizeBarSubscription(0)),this.visualizationIsCollapsed.subscribe(this.createHeightOfResizeBarSubscription(0)),f.first(s.records,function(e){return e.filter(function(e){return e!=null}).length>0},null)&&(this.entireDatasetIsPresent=!1),this.layout=this.entireDatasetIsPresent?null:s;var c=f.map(f.filter(t.features,function(e){return l.isNumericFeature(e.featureType)}),function(e){return e.name});c.unshift("None"),this.featureNames=f.map(t.features,function(e){return e.name}),this.featureNames.unshift("None");var h=f.map(t.features,function(e){return e.featureType});this.minimizedGraphsTypeEnum=ko.observable(0),this.minimizedGraphsType=ko.computed(function(){return r.GraphType[a.minimizedGraphsTypeEnum()]}),this.addFeatureTypeToStatsTable(h);var d=this.entireDatasetIsPresent?this.datatable.numberOfColumns:this.layout.records.length;this.columns=ko.observableArray(this.constructColumnViewModels(d)),this.dataTableViewModel=new p(t,d),this.graphControl=ko.observable(i.NullGraph),this.currentSelectedColumnIndex=ko.observable(-1),this.columnIsSelected=ko.computed(function(){return a.currentSelectedColumnIndex()>=0}),this.currentSelectedColumnViewModel=ko.computed(function(){return a.columnIsSelected()?a.columns()[a.currentSelectedColumnIndex()]:null}),this.parametersAreVisible=ko.computed(function(){return a.entireDatasetIsPresent&&a.graphControl().parametersVisible()&&a.columnIsSelected()})}return __extends(o,e),o.prototype.initialize=function(){return},o.prototype.constructColumnViewModels=function(e){var n=this,r=[];return this.datatable.features.forEach(function(s){if(!n.entireDatasetIsPresent&&s.index>=e)return;var o=new i.GraphControlViewModel(n.featureNames,n.datatable,n.datatable.features[s.index],n.layout);o.crossCompareFeature.subscribe(n.createHeightOfResizeBarSubscription(0));var u=n.constructMinimizedGraphViewModel(s.index),a=n.constructColumnStatistics(s.index);r.push(new t(s.name,o,u,a))}),r},o.prototype.constructMinimizedGraphViewModel=function(e){var t=new n.D3GraphViewModel(this.minimizedGraphsTypeEnum(),ko.observable(!1),ko.observable(!1),ko.observable(10),ko.observable(0),ko.observable(!1),ko.observable(!1),this.datatable,this.datatable.features[e],ko.observable(null),this.layout,e);return this.minimizedGraphsTypeEnum.subscribe(function(e){t.graphType(e)}),t},o.prototype.constructColumnStatistics=function(e){var t=this,n=this.statsDataTable.features.map(function(e){return e.name}),r=this.datatable.features[e].featureType,i=this.statsDataTable.records[e];return i.map(function(e,i){var s=t.getStatisticValue(e,r),o=t.getStatisticName(n[i]);return{name:o,value:s}})},o.prototype.getStatisticName=function(e){var t=u;switch(e){case"Mean":return t.visualizationStatisticMean;case"Median":return t.visualizationStatisticMedian;case"Min":return t.visualizationStatisticMin;case"Max":return t.visualizationStatisticMax;case"Standard Deviation":return t.visualizationStatisticStandardDeviation;case"Unique Values":return t.visualizationStatisticUniqueValues;case"Missing Values":return t.visualizationStatisticMissingValues;case"Feature Type":return t.visualizationStatisticFeatureType;default:return e}},o.prototype.getStatisticValue=function(e,t){return e===undefined?"":e.isNan?l.isNumericFeature(t)?u.visualizationNaN:"":e.isInf?u.visualizationInfinity:h(e,c.maxPrecisionOfStats)},o.prototype.selectColumn=function(e,t){this.setHeightOfResizeBar(c.transitionDuration);var n=$(t.target).closest("td,th"),r=n.parent().find("td,th").index(n)-1;if(r!==undefined&&r>=0){this.statsAndGraphsIsCollapsed(!1);if(!t.ctrlKey){a.customEvent({key:"ClickOnColumnToSelect",type:"Visualize",data:this.columns()[r].name}),this.columns().forEach(function(e){e.selected(!1)}),this.columns()[r].selected(!0),this.graphControl(this.columns()[r].graphControl);var i=this.currentSelectedColumnIndex();this.currentSelectedColumnIndex(r),r!==i&&this.setSelectedColumnStyle(r,i)}else this.columnIsSelected()&&(a.customEvent({key:"CtrlClickOnColumnToCompareTo",type:"Visualize",data:this.datatable.features[r].name}),this.entireDatasetIsPresent&&this.graphControl().setCrossCompareFeature(this.datatable.features[r].name))}},o.prototype.setSelectedColumnStyle=function(e,t){var n=1,r=this.columns().length+n,i=function(e){var t=(e+n+1)%r;return f.format("#dataTable td:nth-of-type({0})",r+"n+"+t)},s=i(e),o=i(t);$(s).addClass("selected"),$(o).removeClass("selected")},o.prototype.setHeightOfResizeBar=function(e,t){t===void 0&&(t=null),setTimeout(function(){var e=t===null?Math.max($(".statsAndGraphs .statsAndGraphsContent").height()+$(".statsAndGraphs .statsAndGraphsExpander").height(),$(".statsAndGraphs").height()):t;$(".statsAndGraphs .resize").height(e)},e)},o.prototype.createHeightOfResizeBarSubscription=function(e,t){var n=this;return t===void 0&&(t=null),function(r){return n.setHeightOfResizeBar(e,t!==null?t(r):null)}},o.prototype.setGraphType=function(e){this.minimizedGraphsTypeEnum(e),this.columns().forEach(function(t){t.graphControl.setGraphType(e)})},o.prototype.setHistogramMode=function(){this.setGraphType(0),a.featureUsage({featureID:25,groupID:24})},o.prototype.setBoxchartMode=function(){this.setGraphType(1),a.featureUsage({featureID:26,groupID:24})},o.prototype.takeSnapshot=function(){this.snapshots.unshift(new s(this.graphControl().feature)),a.customEvent({key:"TakeSnapshot",type:"Visualize"})},o.prototype.closeSnapshot=function(e,t){e.visible(!1),this.snapshots.remove(e),a.customEvent({key:"CloseSnapshot",type:"Visualize"})},o.prototype.addFeatureTypeToStatsTable=function(e){var t=this.statsDataTable;for(var n=0;n<t.records.length;n++)t.records[n].push(e[n]);t.features.push({featureType:"String",name:"Feature Type",elementType:"",index:t.features.length})},o.prototype.dispose=function(){e.prototype.dispose.call(this),Shell.UI.Spinner.hide()},o}(o.Disposable);e.VisualizationViewModel=d})(h=t.Visualization||(t.Visualization={}))}),define("generated/editor/TS/ViewModel/CustomUX/VisualizationViewModelFactory",["require","exports","./BinaryClassificationComparisonUX","./ClusteringViewModel","./GenericMimeViewModel","./JSONViewModel","./LearnerViewModel","./MulticlassClassificationUX","./RegressionEvaluationViewModel","./ROutputViewModel","./TreeEnsembleViewModel","../Visualization/VisualizationDataProvider","../Visualization/VisualizationViewModel","../Visualization/VisualizationViewModelOld","../../../../DataLabClient/AjaxClient","../../../../DataLabClient/Features"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=h.VisualizationViewModel,g=p.Visualization.VisualizationViewModel,y=function(){function e(){}return e.prototype.createViewModelWithMarkup=function(e,t,h){var p=e.visualizationType,y,b,w=t.portModel,E=t.workspace;switch(p){case"default":var S=e.data,x=e.statistics,T=e.layout;if(v.visualizationPagination()){y=ExperimentEditorTemplates._visualizationMarkup;var N=new c.VisualizationDataProvider(t);b=new m(S,x,T,N)}else{y=ExperimentEditorTemplates._visualizationOldMarkup;var C=null;if(t.isModule){var k=w.parent.executedExperimentId,L=w.parent.id,A=w.name;C=t.workspace.getModuleOutputSchema(k,L,A)}else{var O=w.parent.dataset.id;C=t.workspace.getDatasetSchema(O)}var N=new c.VisualizationDataProvider(t);b=new g(S,x,T,N,C)}break;case"binaryClassifierEvaluation":y=ExperimentEditorTemplates._binaryClassificationComparisonMarkup;var M={moduleId:w.parent.id,experimentViewInfo:h};b=new n.BinaryClassificationComparisonUXViewModel({visualizationType:null,reports:[e]},M);break;case"binaryClassifierEvaluationComparison":y=ExperimentEditorTemplates._binaryClassificationComparisonMarkup;var M={moduleId:w.parent.id,experimentViewInfo:h};b=new n.BinaryClassificationComparisonUXViewModel(e,M);break;case"multiclassClassifierEvaluation":y=ExperimentEditorTemplates._multiclassClassificationMarkup,b=new u.MulticlassClassificationUXViewModel(e);break;case"regressionEvaluationResults":if(v.visualizeRegressionHistogram()){y=ExperimentEditorTemplates._regressionEvaluationMarkup,b=new a.RegressionEvaluationContainerViewModel(e);break}throw new Error("Regression evaluation visualization data encountered but not enabled");case"rOutput":y=ExperimentEditorTemplates._rOutputMarkup,b=new f.ROutputViewModel(e);break;case"genericMime":y=ExperimentEditorTemplates._genericMimeMarkup,b=new i.GenericMimeViewModel(e);break;case"learner":y=ExperimentEditorTemplates._learnerMarkup,b=new o.LearnerViewModel(e);break;case"json":y=ExperimentEditorTemplates._jSONMarkup,b=new s.JSONViewModel(e);break;case"treeEnsemble":if(!v.treeVisualizationEnabled()){var _={learner:e.learner.defaultLearner,visualizationType:"learner"};y=ExperimentEditorTemplates._learnerMarkup,b=new o.LearnerViewModel(_);break}y=ExperimentEditorTemplates._treeEnsembleMarkup;var k=w.parent.executedExperimentId,L=w.parent.id,A=w.name,D={getTreeThumbnail:function(e,t){E.getModuleVisualizationDataItem(k,L,A,"tree"+e.toString()+"-thumbnail","text","plain",d.ResponseType.Text).done(function(e){t(e)})},getRootSubTreeStructure:function(e,t){E.getModuleVisualizationDataItem(k,L,A,"tree"+e.toString()+"-layout","application","json",d.ResponseType.JSON).done(function(e){t(e)})},getSubTreeStructure:function(e,t,n){var r="tree"+e.toString()+"-layout"+t.offset;E.getModuleVisualizationDataItem(k,L,A,r,"application","json",d.ResponseType.JSON).done(function(e){n(e)})},getInteriorNodeStatistics:function(e,t){var n="tree"+e.toString()+"-node"+t.offset.toString()+"-statistics";return E.getModuleVisualizationDataItem(k,L,A,n,"application","json",d.ResponseType.JSON)},getLeafNodeStatistics:function(e,t){var n=l.NodeIdentifier.fromLeaf(t),r="tree"+e.toString()+"-node"+n.index.toString()+"-statistics";return E.getModuleVisualizationDataItem(k,L,A,r,"application","json",d.ResponseType.JSON)}},P={learner:e.learner,dataProvider:D};b=new l.TreeEnsembleViewModel(P);break;case"clustering":y=ExperimentEditorTemplates._clusteringMarkup,b=new r.ClusteringViewModel(e);break;default:throw new Error("Unknown visualization type requested: "+p)}return{viewModel:b,markup:y}},e}();t.VisualizationViewModelFactory=y}),define("generated/editor/TS/Common/EntityDataDownloader",["require","exports","../../TS/ViewModel/ExperimentEditor/CustomUX","../../TS/ViewModel/CustomUX/VisualizationViewModelFactory","../../../DataLabClient/Constants","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=function(){function e(){this.endpointTooBig=new ko.subscribable}return e.prototype.download=function(e){var t=e.BaseUri+e.Location+e.AccessCredential;window.open(t)},e.prototype.visualize=function(e,t,i,a){var f=null;Shell.UI.Spinner.show();var l;i?(f=e.parent.executedExperimentId,l=t.getModuleVisualizationData(f,e.parent.id,e.name)):(f=e.parent.parent.experimentId(),l=t.getDatasetVisualizationData(e.parent.dataset.id)),o.featureUsage({featureID:19,groupID:0,experimentID:f,data:JSON.stringify({port:e.name,isModule:i,nodeName:e.parent.name})}),l.done(function(u){try{var f={experimentName:e.parent.parent.description(),moduleName:e.parent.name,portName:e.friendlyName},l={portModel:e,workspace:t,isModule:i},c=new r.VisualizationViewModelFactory,h=c.createViewModelWithMarkup(u,l,a);n.open(h.markup,h.viewModel,"90%","90%",null,f)}catch(p){var d=s.errorParsingVisualizationFile,v=new Shell.UI.Notifications.Notification(d,"error");v.setActions([Shell.UI.Notifications.Buttons.close()]),Shell.UI.Notifications.add(v);var m=d+" "+p.message;o.customEvent({key:"Visualization_Failed",type:"Visualization",data:m})}}).fail(function(e){var t=s.errorGettingVisualizationData,n=u.getErrorDetails(e),r=new Shell.UI.Notifications.Notification(u.format(t,n),"error");r.setActions([Shell.UI.Notifications.Buttons.close()]),Shell.UI.Notifications.add(r);var i=t+" "+n;o.customEvent({key:"Visualization_Failed",type:"Visualization",data:i})}).always(function(){Shell.UI.Spinner.hide()})},e}();t.EndpointDownloader=a}),define("generated/editor/TS/ViewModel/Dialogs/ApiCodeDialogViewModel",["require","exports","../../../TS/View/DialogViewFactories","../../../TS/ViewModel/ExperimentEditor/Help","../../../../DataLabClient/Model/Dataset","../../../../DataLabClient/Model/DatasetNode","../../../../DataLabClient/Features","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/Model/Port","../../../../DataLabClient/Model/User","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l){var c=_.template("from azureml import Workspace\nws = Workspace(\n    workspace_id='<%= workspaceId %>',\n    authorization_token='<%= authorizationToken %>',\n    endpoint='<%= endpoint %>'\n)\nds = ws.datasets['<%= datasetName %>']\nframe = ds.to_dataframe()"),h=_.template("from azureml import Workspace\nws = Workspace(\n    workspace_id='<%= workspaceId %>',\n    authorization_token='<%= authorizationToken %>',\n    endpoint='<%= endpoint %>'\n)\nexperiment = ws.experiments['<%= experimentId %>']\nds = experiment.get_intermediate_dataset(\n    node_id='<%= nodeId %>',\n    port_name='<%= portName %>',\n    data_type_id='<%= typeId %>'\n)\nframe = ds.to_dataframe()"),p=_.template('library("AzureML")\n\nws <- workspace(\n  id = "<%= workspaceId %>",\n  auth = "<%= authorizationToken %>",\n  api_endpoint = "<%= endpoint %>"\n)\nds <- download.datasets(\n  dataset = ws,\n  name = "<%= datasetName %>"\n)\nhead(ds)\n'),d=_.template('library("AzureML")\n\nws <- workspace(\n  id = "<%= workspaceId %>",\n  auth = "<%= authorizationToken %>",\n  api_endpoint = "<%= endpoint %>"\n)\nds <- download.intermediate.dataset(\n  ws = ws,\n  node_id = "<%= nodeId %>",\n  experiment = "<%= experimentId %>",\n  port_name = "<%= portName %>",\n  data_type_id = "<%= typeId %>"\n) \nhead(ds)\n'),v=function(){function e(e,t,n){var v=this;this.languages=["Python"],this.language=ko.observable(),this.useSecondaryToken=ko.observable(),this.workspaceTokenToUse=l.deferredComputed(function(){var e=f.user.isWorkspaceOwner;return e?v.useSecondaryToken()?v.workspaceToken.secondary:v.workspaceToken.primary:"Unavailable"}),this.datasetName=l.deferredComputed(function(){var e;if(v.targetObject instanceof a.OutputPort){var t=v.targetObject;t.parent instanceof s?e=t.parent.name:t.parent instanceof u.ModuleNode&&(e=t.descriptor.name)}else v.targetObject instanceof i&&(e=v.targetObject.name());if(!e)throw new Error("No dataset name found");return e}),this.longCodeTemplates_DataOutputPort={Python:l.deferredComputed(function(){return c({workspaceId:v.workspaceId,authorizationToken:v.workspaceTokenToUse(),endpoint:r.environment.esServiceBaseUrl,datasetName:v.datasetName()})}),R:l.deferredComputed(function(){return p({workspaceId:v.workspaceId,authorizationToken:v.workspaceTokenToUse(),endpoint:r.environment.esServiceBaseUrl,datasetName:v.datasetName()})})},this.moduleOutputAccessTemplateData=l.deferredComputed(function(){var e=v.targetObject,t=e.parent.parent.experimentId();t===null&&e.parent.parent.parentExperimentId!==null&&(t=e.parent.parent.parentExperimentId);var n=e.parent.id,i=e.descriptor.allowedDataTypes[0].dataTypeId;return{workspaceId:v.workspaceId,authorizationToken:v.workspaceTokenToUse(),endpoint:r.environment.esServiceBaseUrl,experimentId:t,nodeId:n,portName:v.datasetName(),typeId:i}}),this.longCodeTemplates_InterOutputPort={Python:l.deferredComputed(function(){return h(v.moduleOutputAccessTemplateData())}),R:l.deferredComputed(function(){return d(v.moduleOutputAccessTemplateData())})},this.longCode=l.deferredComputed(function(){var e=v.language(),t;if(v.targetObject instanceof a.OutputPort){var n=v.targetObject;v.showLongCode&&(n.parent instanceof s?t=v.longCodeTemplates_DataOutputPort[e]():n.parent instanceof u.ModuleNode&&(t=v.longCodeTemplates_InterOutputPort[e]()))}else if(v.targetObject instanceof i)var t=v.longCodeTemplates_DataOutputPort[e]();if(!t)throw new Error("Could not compute longCode");return t});if(!(e instanceof a.OutputPort||e instanceof i))throw new TypeError("Unsupported type");this.targetObject=e,this.showLongCode=n!=undefined,this.workspaceId=t,this.showExtraHelp=!f.user.isWorkspaceOwner,this.workspaceToken={primary:n.primary(),secondary:n.secondary()},this.showPreviewTag=o.enableOutputPortApiCodeExperience().match(/\bPreview\b/)!=null,this.language(this.languages[0]),o.dataAccessCodeSupportRLanguageEnabled()&&this.languages.push("R")}return e.prototype.canBeAccepted=function(){return!0},e.prototype.dismissed=function(e){},e.prototype.showDialog=function(){var e=n.ShowApiCode.show(this);return $("#long-code-text").click(function(){$(this).select()}),e},e}();t.ApiCodeDialogViewModel=v}),define("generated/editor/TS/ViewModel/ExperimentEditor/Clipboard",["require","exports"],function(e,t){var n;(function(e){e.ClipboardName="DataLabClipboard"})(n=t.Constants||(t.Constants={}));var r;(function(e){function r(e){t[n.ClipboardName]=e}function i(){return t[n.ClipboardName]}function s(){delete t[n.ClipboardName]}var t=Shell.Utilities.isLocalStorageAvailable()?localStorage:new Object;e.write=r,e.read=i,e.clear=s})(r=t.Clipboard||(t.Clipboard={}))}),define("generated/editor/TS/ViewModel/ExperimentEditor/ConnectorBase",["require","exports","../../../TS/Global"],function(e,t,n){var r=function(){function e(){var e=this;this.x1=ko.observable(0),this.y1=ko.observable(0),this.x2=ko.observable(0),this.y2=ko.observable(0),this.counter=ko.observable(0),this.visible=ko.observable(!1),this.isPreview=ko.observable(!0),this.translation=ko.computed(function(){return"translate("+(this.x2()-n.Port.HalfWidth)+","+this.y2()+")"},this),this.controlPointDistance=ko.computed(function(){var t=Math.min(n.Connector.SplinePointMax,Math.max(n.Connector.SplinePointMin,Math.abs((e.y2()-e.y1())/2)));return e.isSnappedOnOutputPort()?-t:t},this),this.path=ko.computed(function(){return"M"+e.x2()+","+e.y2()+"C "+e.x2()+","+(e.y2()-e.controlPointDistance())+","+e.x1()+","+(e.y1()+e.controlPointDistance())+","+e.x1()+","+e.y1()},this),this.p0=null,this.p1=null}return e.prototype.onMouseMove=function(e,t,n){throw new Error("abstract method must be implemented")},e.prototype.reset=function(){throw new Error("abstract method must be implemented")},e.prototype.startConnection=function(e){throw new Error("abstract method must be implemented")},e.prototype.endConnection=function(e,t,n){throw new Error("abstract method must be implemented")},e.prototype.isSnappedOnOutputPort=function(){throw new Error("abstract method must be implemented")},e}();t.ConnectorBase=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Connector",["require","exports","../../../TS/ViewModel/ExperimentEditor/ConnectorBase","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/GraphNodeViewModel","../../../TS/ViewModel/ExperimentEditor/PortViewModel","../../../../DataLabClient/Model/Port","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=function(e){function t(){e.call(this),this.hiddenConnection=null,this.snappedPort=null}return __extends(t,e),t.prototype.isSnappedOnOutputPort=function(){return this.snappedPort instanceof s.OutputPort},t.prototype.onMouseMove=function(e,t,n){var a=this;if(n){var f=null;if(n instanceof i.GraphNodeViewModel)f=this.p0 instanceof s.InputPort?n.findClosestOutputPort(e,t):n.findClosestInputPort(e,t);else if(n instanceof s.InputPort||n instanceof s.OutputPort)f=n;this.lastCandidatePort&&this.lastCandidatePort!==f&&this.lastCandidatePort.balloonMessage(null);if(f&&f.portModel.isCompatible(this.p0.portModel)){this.snapToPort(f),f.parent.portState(o.Constants.PortState.CompatibleSnapped);return}f&&(this.setCandidatePort(f),f.portModel.parent===this.p0.portModel.parent||f instanceof s.OutputPort&&this.p0 instanceof s.OutputPort||f instanceof s.InputPort&&this.p0 instanceof s.InputPort?f.balloonMessage(null):(f.parent.portState(o.Constants.PortState.Incompatible),f.balloonMessage("Cannot connect "+this.p0.portTypes+" to "+f.portTypes+".")))}else{this.snappedPort&&this.snappedPort.parent.portState(o.Constants.PortState.Compatible);if(this.lastCandidatePort){var l=u.first(this.lastCandidatePort.parent.ports,function(e){return a.p0.portModel.compatibilityWithPort(e.portModel)===o.Constants.PortState.Compatible},null);l?this.lastCandidatePort.parent.portState(o.Constants.PortState.Compatible):this.lastCandidatePort.parent.portState(o.Constants.PortState.Default)}this.setCandidatePort(null)}this.unsnap(),this.x2(e),this.y2(t-r.Port.HalfHeight),this.isPreview(!1)},t.prototype.reset=function(){this.p0=null,this.p1=null,this.visible(!1),this.x1(0),this.y1(0),this.x2(0),this.y2(0),this.counter(0),this.isPreview(!0),this.showHiddenConnection(),this.setCandidatePort(null),this.lastCandidatePort=null},t.prototype.startConnection=function(e){if(!e)throw new Error("Source port isn't a port view model.");this.p0=e,this.x1(e.getCX()),this.y1(e.getCY()),this.x2(e.getCX()),this.y2(e.getCY()),this.visible(!0),this.counter(this.counter()+1),this.snappedPort=null,this.showHiddenConnection(),this.setCandidatePort(null)},t.prototype.endConnection=function(e,t,n){if(e instanceof i.GraphNodeViewModel||e instanceof s.PortViewModel){e instanceof i.GraphNodeViewModel?this.p1=this.p0 instanceof s.InputPort?e.findClosestOutputPort(t,n):e.findClosestInputPort(t,n):this.p1=e;if(this.p1){var r=this.p0,u=this.p1,a=r.portModel.compatibilityWithPort(u.portModel);if(r.portModel.isWebServicePort||u.portModel.isWebServicePort){var f=r.portModel.isWebServicePort?r:u,l=f===r?u:r;if(a===o.Constants.PortState.Compatible||a===o.Constants.PortState.Replaceable)f.portModel.disconnect(f.portModel.connectedNonWebServicePorts()),l.portModel.disconnect(l.portModel.connectedWebServicePorts()),f.portModel.connectTo(l.portModel)}else a===o.Constants.PortState.Compatible?(this.p0 instanceof s.InputPort&&r.portModel.isConnected()&&r.portModel.disconnect(r.portModel.connectedNonWebServicePorts()),r.portModel.connectTo(u.portModel)):a===o.Constants.PortState.Replaceable&&(u.portModel.disconnect(u.portModel.connectedNonWebServicePorts()),r.portModel.connectTo(u.portModel))}}this.reset()},t.prototype.snapToPort=function(e){this.snappedPort=e,this.x2(this.snappedPort.getCX()),this.y2(this.snappedPort.getCY()),this.isPreview(!0);if(this.p0.portModel.isWebServicePort||e.portModel.isWebServicePort)return;var t=null;this.snappedPort instanceof s.InputPort?t=this.snappedPort.connections()[0]:t=this.p0.connections()[0],t?this.hideConnection(t):this.showHiddenConnection()},t.prototype.unsnap=function(){this.snappedPort=null,this.showHiddenConnection()},t.prototype.showHiddenConnection=function(){this.hiddenConnection&&(this.hiddenConnection.hidden(!1),this.hiddenConnection=null)},t.prototype.hideConnection=function(e){this.showHiddenConnection(),this.hiddenConnection=e,this.hiddenConnection.hidden(!0)},t.prototype.setCandidatePort=function(e){this.lastCandidatePort&&this.lastCandidatePort.balloonMessage(null),this.lastCandidatePort=e},t}(n.ConnectorBase);t.Connector=a}),define("generated/editor/TS/View/MenuControl",["require","exports","../../../DataLabClient/Util"],function(e,t,n){var r;(function(e){function t(){n.initializeTemplateIfNecessary("datalab-contextMenuTemplate",ExperimentEditorTemplates._menuMarkup)}function r(t,n){var r={menu:null,of:null,zIndex:0};if(!t)throw new Error("menu is undefined or null.");r.menu=t;if(r.menu.items().length==0)return!1;r.of=n,r.zIndex=window&&window.fx&&window.fx.utilities?window.fx.utilities.getNextZIndex():2e3;var i=$("<div></div>").appendTo("body");ko.renderTemplate("datalab-contextMenuTemplate",r,null,i,"replaceNode");var s={my:"left top",at:"right bottom",of:n,offset:"0 0",collision:"fit fit"};$(".datalab-contextMenu").position(s),e.menuIsOpen=!0}e.menuIsOpen,e.targetViewModel=null,e.initialize=t,e.removeContextMenu=function(){e.menuIsOpen&&($(".datalab-contextMenu").remove(),e.menuIsOpen=!1)},e.spawnMenu=r})(r=t.MenuControl||(t.MenuControl={})),r.initialize()}),define("generated/editor/TS/ViewModel/ContextMenuControl/MenuViewModel",["require","exports","../../../TS/View/MenuControl","../../../TS/ViewModel/ExperimentEditor/PortViewModel"],function(e,t,n,r){var i=function(){function e(e,t,n,r){r===void 0&&(r=null);if(!e)throw new Error("menuData cannot be null.");this.classId=ko.observable("datalab-contextMenu"),this.items=ko.observableArray(),this.targetViewModel=t,this.mouseEvent=n,this.parentMenu=r,this.items([]);for(var i=0;i<e.items.length;++i){var o=e.items[i];this.items.push(new s(o,this.targetViewModel,this.mouseEvent,this))}}return e.prototype.contextMenuMouseUp=function(e,t){t.preventDefault()},e}();t.MenuViewModel=i;var s=function(){function e(e,t,s,o){var u=this;this.menuItem={label:ko.observable(e.label||""),divider:ko.observable(e.divider||!1),iconClass:ko.observable(e.iconClass||""),enabledTooltip:ko.observable(e.enabledTooltip||""),disabledTooltip:ko.observable(e.disabledTooltip||""),command:e.command,items:ko.observableArray(e.items||[]),subMenuTargetViewModel:ko.observable(e.subMenuTargetViewModel),onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut},this.parentMenu=o,this.targetViewModel=t,this.mouseEvent=s,this.onSubMenuDisplayed=$.noop,e.items&&e.items.length>0?(this.subMenu=new i({items:e.items},e.subMenuTargetViewModel||t,s,o),e.subMenuTargetViewModel instanceof r.OutputPort&&(this.onSubMenuDisplayed=function(t){e.subMenuTargetViewModel.highlighted(t)})):this.subMenu=null,this.onMouseDown=function(e,t){t.preventDefault(),t.stopPropagation()},this.onMouseOverFct=null,e.onMouseOver&&(this.onMouseOverFct=function(e,t){u.menuItem.onMouseOver.execute(u.targetViewModel,u.mouseEvent)}),this.onMouseOutFct=null,this.menuItem.onMouseOut&&(this.onMouseOutFct=function(e,t){u.menuItem.onMouseOut.execute(u.targetViewModel,u.mouseEvent)}),this.onActivated=function(e,t){t.preventDefault(),t.stopPropagation(),u.enabled()&&u.menuItem.command&&(n.MenuControl.removeContextMenu(),u.menuItem.command.execute(u.targetViewModel,u.mouseEvent))},this.enabled=ko.computed(function(){return u.subMenu!==null||u.menuItem.command&&u.menuItem.command.canExecute()})}return e}();t.MenuItemViewModel=s}),define("generated/editor/TS/View/CustomBindingHandlers/ContextMenu",["require","exports","../../../TS/Global","../../../TS/View/MenuControl","../../../TS/ViewModel/ContextMenuControl/MenuViewModel"],function(e,t,n,r,i){function s(e,t,n){e.preventDefault(),e.stopPropagation(),$(".datalab-contextMenu").remove();var s=n.build(t);if(s){var o=new i.MenuViewModel(s,t,e);function u(e){if($(e.target).closest(".blockingDiv").length>=1)return;$(e.target).closest(".datalab-contextMenu").length===0?(r.MenuControl.removeContextMenu(),h()):$(e.target).closest(".datalab-contextMenu .enabled").length>0&&$(e.target).closest(".datalab-contextMenu .hasSubmenu").length===0&&e.type==="mouseup"&&h()}function a(){r.MenuControl.removeContextMenu(),h()}function f(e){e.keyCode===27&&(r.MenuControl.removeContextMenu(),h())}function l(){return!1}function c(){$("body").on("contextmenu","div.datalab-contextMenu",l),document.addEventListener("mousedown",u,!0),document.addEventListener("mouseup",u,!0),document.addEventListener("keydown",f),window.addEventListener("hashchange",a)}function h(){$("body").off("contextmenu","div.datalab-contextMenu",l),document.removeEventListener("mousedown",u,!0),document.removeEventListener("mouseup",u,!0),document.removeEventListener("keydown",f),window.removeEventListener("hashchange",a)}o&&(c(),r.MenuControl.spawnMenu(o,e))}return!1}t.ContextMenuEventHandler=s,ko.bindingHandlers.contextMenu={init:function(e,t,n,r){$(e).on("contextmenu",function(e){var n=ko.utils.unwrapObservable(t());s(e,r,n)})}},ko.bindingHandlers.subMenu={init:function(e,t){var n=ko.utils.unwrapObservable(t());if(ko.utils.unwrapObservable(n.activate)){var r=ko.utils.unwrapObservable(n.width);$(e).find(".datalab-contextMenu").hide(),$(e).hover(function(){var t=$(e).find(".datalab-contextMenu").first();t.toggle().position({my:"left top-10",at:"right top",offset:"-2 0",of:e,collision:"flip flip"}),n.displayCallback&&n.displayCallback(t[0].style.display!=="none")})}}}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/CustomDomEvent",["require","exports","./Disposable"],function(e,t,n){var r=function(e){function t(t,n,r){n===void 0&&(n="AzureML"),r===void 0&&(r=$(document)),e.call(this),this.eventSource=r;if(!t||!n)throw new Error("Neither eventId nor eventIdNamespace can be null or empty string");this.eventId=t+"."+n}return __extends(t,e),t.prototype.dispose=function(){this.unhandleAll(),e.prototype.dispose.call(this)},t.prototype.trigger=function(e){this.eventSource.trigger(this.eventId,e)},t.prototype.handle=function(e){this.eventSource.on(this.eventId,e)},t.prototype.unhandle=function(e){this.eventSource.off(this.eventId,e)},t.prototype.unhandleAll=function(){this.eventSource.off(this.eventId)},t}(n.Disposable);t.CustomDomEvent=r}),define("generated/editor/TS/Events/ModuleEvents",["require","exports","../../../DataLabClient/CustomDomEvent"],function(e,t,n){t.customModulePublishedToGallery=new n.CustomDomEvent("customModulePublishedToGallery")}),define("generated/DataLabClient/Model/CommunityCustomModule",["require","exports"],function(e,t){var n=function(){function e(e,t,n,r,i,s,o,u,a,f){this.sourceExperiment=e,this.sourceModule=t,this.moduleName=n,this.summary=r,this.description=i,this.visibility=s,this.owner=o,this.tags=u,this.thumbnail=a,this.imageUrl=f}return e}();t.PublishableCustomModule=n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/PublishCustomModuleToGalleryWizardViewModel",["require","exports","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/ImageSelectorViewModel","../../../TS/ViewModel/ExperimentEditor/TagTextBoxViewModel","../../../../DataLabClient/Model/CommunityCustomModule","../../../../DataLabClient/Model/CommunityExperiment","../../../TS/ViewModel/ExperimentEditor/CommunityHelpers","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=o.CommunityExperimentVisibility,p=o.Owner,d=function(e){function t(n,s,o){var a=this;o===void 0&&(o=null),e.call(this),this.experimentViewModel=n,this.moduleViewModel=s,this.tagTextBoxViewModel=i,this.moduleDetailHeaders=ko.observableArray(),this.moduleDetailValues=ko.observableArray(),this.summary=ko.observable(""),this.description=ko.observable(""),this.tags=ko.observableArray(),this.hasConsentedPublishSampleExperiment=ko.observable(!1),this.uploadImageOption=ko.observable(0),this.localUploadImageOptions=t.uploadImageOptions,this.onWizardClosingEvent=new ko.subscribable,this.onWizardCompleted=ko.observable(!1),this.isRepublish=!!o,this.previousPublishTypeHidden=this.isRepublish?o.hidden:!1,this.isPublicPublishOnly=!0,this.publishTypeString=ko.observable(this.isPublicPublishOnly?"1":null),this.publishAuthorString=ko.observable(null),this.imageViewModel=new r.ImageSelectorViewModel,this.imageFromGallery=ko.observable(!1),this.buildModuleDetails(),this.useMarkdownEditor=!!f.markdownInPublishDialogEnabled(),this.areNextStepsDisabled=ko.computed(function(){return a.imageViewModel.imageUploadViewModel.isProcessingSelectedImage()||!a.hasConsentedPublishSampleExperiment()}),this.arePreviousStepsDisabled=ko.computed(function(){return!1}),this.publishType=ko.computed(function(){var e=null;return a.publishTypeString()&&(e=Number(a.publishTypeString())),a.isPublicPublishOnly?1:e}),this.isPublishAuthorEnabled=ko.observable(u.canPublishOnBehalfOfCompany),this.publishAuthorType=ko.computed(function(){var e=null;return a.publishAuthorString()&&(e=Number(a.publishAuthorString())),e}),this.publishAuthorId=ko.computed(function(){return u.getAuthorId(a.publishAuthorType())}),this.publishAuthorName=ko.computed(function(){return u.getAuthorName(a.publishAuthorType())}),this.isCompleteButtonEnabled=ko.computed(function(){return a.isPublishAuthorEnabled()?a.publishType()!==null&&a.publishAuthorType()!=null:a.publishType()!==null})}return __extends(t,e),t.prototype.getPublishableCustomModule=function(){if(!this.onWizardCompleted())throw new Error("Cannot generate a PublishableCustomModule if the Publish To Community Wizard was not completed.");return new s.PublishableCustomModule(this.experimentViewModel.experiment,this.moduleViewModel.moduleNode.module_,this.moduleViewModel.moduleNode.name,this.summary(),this.description(),this.publishType(),new p(this.publishAuthorType(),this.publishAuthorId(),this.publishAuthorName()),this.tags(),this.imageViewModel.imageUploadViewModel.finalImageContent(),this.imageViewModel.imageUploadViewModel.finalImageContent()?"":this.imageViewModel.selectedStockImgUrl())},t.prototype.onWizardClosing=function(e){return this.onWizardCompleted(!0),e.completed?c.customEvent({key:"WizardCompleted",type:"PublishToCommunity",data:JSON.stringify({publishType:this.publishType()})}):c.customEvent({key:"WizardCanceled",type:"PublishToCommunity"}),!0},t.prototype.buildModuleDetails=function(){this.moduleDetailHeaders.push(l.customModuleDescriptionLabel+": "),this.moduleDetailValues.push(this.moduleViewModel.moduleNode.description);var e=_.values(this.moduleViewModel.inputPorts),t=_.values(this.moduleViewModel.outputPorts);e.length&&(this.moduleDetailHeaders.push(l.customModuleInputPortsLabel+": "),this.moduleDetailValues.push(this.buildPortStrings(e))),t.length&&(this.moduleDetailHeaders.push(l.customModuleOutputPortsLabel+": "),this.moduleDetailValues.push(this.buildPortStrings(t)));var n=_.values(this.moduleViewModel.moduleNode.parameters);if(n.length>0){this.moduleDetailHeaders.push(l.customModuleParametersLabel+": ");var r="";for(var i=0;i<n.length;i++){var s=n[i].descriptor;r+=s.friendlyName+" ("+s.parameterType()+")",i!==n.length-1&&(r+=", ")}this.moduleDetailValues.push(r)}},t.prototype.buildPortStrings=function(e){var t="";for(var n=0;n<e.length;n++){var r=e[n].portModel.descriptor;t+=r.friendlyName+" ("+r.allowedDataTypeIdList.join(", ")+")",n!==e.length-1&&(t+=", ")}return t},t.uploadImageOptions=[{text:l.publishExperimentToCommunityWizardImageSelectionCustomImageTab,value:0},{text:l.publishExperimentToCommunityWizardImageSelectionStockImagesTab,value:1}],t}(a.Disposable);t.PublishCustomModuleToGalleryWizardViewModel=d}),define("generated/editor/TS/ViewModel/ExperimentEditor/Commands/Command",["require","exports"],function(e,t){var n=function(){function e(e){if(!e)throw new Error("Commands must operate on an experiment");this.experimentEditorViewModel=e,this.experiment=this.experimentEditorViewModel.experimentViewModel().experiment}return e.prototype.run=function(){throw new Error("Command doesn't have a defined run function")},e.prototype.undo=function(){throw new Error("Command doesn't have a defined undo function")},e}();t.Command=n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Commands/DeleteConnectionCommand",["require","exports","../../../../TS/ViewModel/ExperimentEditor/Commands/Command","../../../../TS/ViewModel/ExperimentEditor/Connection"],function(e,t,n,r){var i=function(e){function t(t,n,r){e.call(this,r),this.inputPort=t,this.outputPort=n}return __extends(t,e),t.prototype.run=function(){this.inputPort.isConnectedTo(this.outputPort)&&this.inputPort.disconnectFrom(this.outputPort)},t.prototype.undo=function(){this.inputPort.connectTo(this.outputPort);var e=this.experimentEditorViewModel.experimentViewModel(),t=r.Connection.getConnectionKeyForPorts(e.getViewModelForPort(this.inputPort),e.getViewModelForPort(this.outputPort));this.experimentEditorViewModel.selectionManager.selectEntity(e.connections.lookup[t])},t}(n.Command);t.DeleteConnectionCommand=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Commands/DeleteNodesCommand",["require","exports","../../../../TS/ViewModel/ExperimentEditor/Commands/Command","../../../../TS/ViewModel/ExperimentEditor/Commands/DeleteConnectionCommand","../../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(e){function t(t,n){var s=this;e.call(this,n),this.deletedNodes=[],this.deleteConnectionCommands=[],t.forEach(function(e){i.forEach(e.inputPorts,function(e){i.forEach(e.connectedPorts(),function(t){s.deleteConnectionCommands.push(new r.DeleteConnectionCommand(e,t,s.experimentEditorViewModel))})}),i.forEach(e.outputPorts,function(e){i.forEach(e.connectedPorts(),function(t){s.deleteConnectionCommands.push(new r.DeleteConnectionCommand(t,e,s.experimentEditorViewModel))})}),s.deletedNodes.push(e)})}return __extends(t,e),t.prototype.run=function(){this.deleteConnectionCommands.forEach(function(e){e.run()}),this.deletedNodes.forEach(function(e){e.remove()})},t.prototype.undo=function(){var e=this;this.deletedNodes.forEach(function(t){e.experiment.addNode(t)}),this.deleteConnectionCommands.forEach(function(e){e.undo()})},t}(n.Command);t.DeleteNodesCommand=s}),define("generated/DataLabClient/PromiseQueue",["require","exports","./Util"],function(e,t,n){var r=function(){function e(e){e===void 0&&(e=!1),this.queue=[],this.failCallback=null,this.rejectOnException=!1,this.rejectOnException=e}return e.prototype.enqueue=function(e){var t=this,r=$.Deferred(),i=n.then(r,function(){if(!t.rejectOnException)return e();try{return e()}catch(r){return n.fail(r)}});return this.failCallback&&i.fail(this.failCallback),i.always(function(){setTimeout(function(){t.onCurrentQueueItemCompleted()},0)}),this.queue.push(r),this.queue.length===1&&r.resolve(),i},e.prototype.onCurrentQueueItemCompleted=function(){this.queue.shift(),this.queue.length>=1&&this.queue[0].resolve()},e.prototype.size=function(){return this.queue.length},e.prototype.setFailureHandler=function(e){this.failCallback=e},e.prototype.clear=function(){this.queue.length=0},e}();return r}),define("generated/editor/TS/ViewModel/GuidedTour/GuidedTourUtil",["require","exports","../../../TS/View/Bubble/PositionLocators","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/PromiseQueue","../../../../DataLabClient/StateUtil","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f=function(){function e(){}return e.isElementOnScreen=function(e,t){var n=e.offset().top,r=n+e.height(),i=t.offset().top,s=i+t.height();return i>n&&s<r},e.closeExistingDialogs=function(){var e=$(".fx-dialog");e.get(0)&&e.is(":data(fx-fxDialog)")&&e.fxDialog("close",document.createEvent("CustomEvent"))},e.showElementHighlight=function(t,r){var i=function(){return r},o=new n.JQuerySelectorPositionLocator(i),u=o.getRect();u||s.warn("there is no rect to highlight"),t.elementHightlightRect(u),t.showElementHighlight(!0),t.showOverlay(!1),e.getFakeCursorElement().hide()},e.removeElementHighlight=function(t){t.showElementHighlight(!1),t.showOverlay(!0),e.resetFakeCursorPosition()},e.showThenRemoveElementHighlight=function(e,t,n){var r=this,i=$.Deferred();return this.showElementHighlight(e,t),this.wait(n).then(function(){r.removeElementHighlight(e),i.resolve()}),i.promise()},e.getFakeCursorElement=function(){return $(".tourCursor")},e.setFakeCursorMouseDown=function(){this.getFakeCursorElement().toggleClass("down",!0)},e.setFakeCursorMouseUp=function(){this.getFakeCursorElement().toggleClass("down",!1)},e.resetFakeCursorPosition=function(){var t=e.getFakeCursorElement();return t.css({top:"50%",left:"100%"}),t.show(),$.Deferred().resolve()},e.wait=function(e){var t=$.Deferred();return setTimeout(function(){t.resolve()},e),t},e.fillOutColumnPickerAutocomplete=function(t,n){var r=$.Deferred();return e.enterTextInInput(t,n,500).then(function(){t.data("ui-autocomplete")._trigger("select","autocompleteselect",{item:{value:t.val()}}),t.autocomplete("close"),t.autocomplete("close"),r.resolve()}),r},e.scrollHorizontalScrollbar=function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=3);var r=$.Deferred();this.getFakeCursorElement().hide();var i=e.scrollLeft(),s=i,o=10,u=window.setInterval(function(){i+=n,e.scrollLeft(i);if(e.scrollLeft()===s||t!=null&&t())window.clearInterval(u),r.resolve();s=e.scrollLeft()},o);return this.resetFakeCursorPosition(),r},e.scrollVerticalScrollbar=function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=3);var r=$.Deferred();if(t!=null&&t())return $.Deferred().resolve();this.getFakeCursorElement().hide();var i=e.scrollTop(),s=i,o=10,u=window.setInterval(function(){i+=n,e.scrollTop(i);if(e.scrollTop()===s||t!=null&&t())window.clearInterval(u),r.resolve();s=e.scrollTop()},o);return this.resetFakeCursorPosition(),r},e.waitForElementToBeVisible=function(e,t){t===void 0&&(t=15e3);var n=$.Deferred();return this.waitFor(function(){return e=$(e.selector),e.is(":visible")},function(r){r||s.warn("waitForElementToBeVisible timed out",null,JSON.stringify({selector:e&&e.selector,timeout:t})),n.resolve(r)},t),n},e.waitForElementToBeNotVisible=function(e,t){var n=$.Deferred();return this.waitFor(function(){return e=$(e.selector),e.is(":visible")===!1},function(e){n.resolve(e)},t),n},e.waitForExperimentToBeOutOfDraft=function(){var e=$.Deferred();return this.waitFor(function(){if(!cdm||!cdm.currentActiveItem||!cdm.currentActiveItem.xeViewModel)return!1;var e=cdm.currentActiveItem.xeViewModel.experimentEditorViewModel._experiment.statusCode();return e!==r.State.InDraft},function(t){e.resolve(t)},12e4),e},e.waitForExperimentToFinishRunning=function(){var e=$.Deferred();return this.waitFor(function(){if(!cdm||!cdm.currentActiveItem||!cdm.currentActiveItem.xeViewModel)return!1;var e=cdm.currentActiveItem.xeViewModel.experimentEditorViewModel._experiment.statusCode();return e===r.State.Canceled||u.isFailedState(e)||u.isFinishedState(e)},function(t){e.resolve(t)},12e4),e},e.moveMouseToElement=function(t,n,r,i,s){var o=this;i===void 0&&(i=.5),s===void 0&&(s=.5);var u=$.Deferred(),a=e.getFakeCursorElement(),f=t.offset(),l=f.left+t.width()*i-this.cursorXOffset,c=f.top+t.height()*s-this.cursorYOffset;return a.animate({top:c,left:l},n,"linear",function(){o.wait(r).then(function(){u.resolve()})}),u},e.enterTextInInput=function(e,t,n){var r=$.Deferred(),i=function(n,r){n<t.length?(e.val(e.val()+t[n]).trigger("keyup"),setTimeout(function(){i(++n,r)},75)):r()};return e.val("").trigger("keyup"),i(0,function(){setTimeout(function(){r.resolve()},n)}),r},e.getPaletteItem=function(e){return $(".xe-paletteItem").filter(function(){return $.trim($(this).text())===e}).last()},e.dragPaletteItemToCanvas=function(t,n,r,i,s,u){var a=this;u===void 0&&(u=!0);var f=cdm.currentActiveItem.xeViewModel.experimentEditorViewModel,l,c,h=new o;return $(window).bind("hashchange.guidedTour",function(){h.clear(),$(window).unbind("hashchange.guidedTour")}),u&&(h.enqueue(function(){return a.moveMouseToElement($(".xe-searchBox"),r,500)}),h.enqueue(function(){return a.enterTextInInput($("#ExperimentEditor .xe-searchBox input"),t,0)})),h.enqueue(function(){return a.waitForElementToBeVisible($(".xe-paletteItem[id*='"+n+"']"),5e3)}),h.enqueue(function(){return e.wait(200)}),h.enqueue(function(){return c=$(".xe-paletteItem[id*='"+n+"']"),a.wait(300)}),h.enqueue(function(){return l=ko.dataFor(c.get(0)),f.paletteDragStart(l),a.moveMouseToElement(c,500,250)}),h.enqueue(function(){var t=$.Deferred(),n=e.getFakeCursorElement(),o=$(".experimentCanvas");e.setFakeCursorMouseDown();var u={left:o.offset().left+o.width()*i,top:o.offset().top+o.height()*s},a=!1;return n.animate(u,{duration:r,step:function(){if(n.offset().left>=o.offset().left){if(a===!1){var e=cdm.currentActiveItem.xeControlContainer.xeControl.clientToDomainCoordinates(n.offset().left,n.offset().top);f.paletteDragEnter(e),a=!0}f.paletteDragMove(cdm.currentActiveItem.xeControlContainer.xeControl.clientToDomainCoordinates(n.offset().left,n.offset().top))}},easing:"linear",complete:function(){l=f.paletteDragItem,f.paletteDragEnd();var n=$(".customElements [id='node-"+l.graphNode.id+"']");e.setFakeCursorMouseUp(),$(window).unbind("hashchange.guidedTour"),t.resolve({viewModel:l,element:n})}}),t})},e.connectGraphNodes=function(t,n,r,i,s,o){var u=cdm.currentActiveItem.xeViewModel.experimentEditorViewModel,a=e.getFakeCursorElement(),f=$(".customElements [id='node-"+n.graphNode.id+"']").children("[data-portname='"+Object.keys(n.outputPorts)[r]+"']");f.length===0&&(f=$(".customElements [id='node-"+n.graphNode.id+"']").siblings("[data-portname='"+Object.keys(n.outputPorts)[r]+"']"));var l=ko.dataFor(f.get(0)),c=$(".customElements [id='node-"+i.graphNode.id+"']").children("[data-portname='"+Object.keys(i.inputPorts)[s]+"']");c.length===0&&(c=$(".customElements [id='node-"+i.graphNode.id+"']").siblings("[data-portname='"+Object.keys(i.inputPorts)[s]+"']"));var h=ko.dataFor(c.get(0)),p=$.Deferred();return this.moveMouseToElement(f,t,0).then(function(){u.startConnection(l),e.setFakeCursorMouseDown(),a.animate(c.offset(),{duration:t,step:function(){var e=a.offset();u.moveConnection(cdm.currentActiveItem.xeControlContainer.xeControl.clientToDomainCoordinates(e.left,e.top))},easing:"linear",complete:function(){u.endConnection(h,cdm.currentActiveItem.xeControlContainer.xeControl.clientToDomainCoordinates(500,500)),e.setFakeCursorMouseUp(),setTimeout(function(){p.resolve({outputPort:l,inputPort:h})},o)}})}),p},e.moveMouseToElementAndClick=function(t,n,r,i,s,o){s===void 0&&(s=.5),o===void 0&&(o=.5);var u=$.Deferred();return this.moveMouseToElement(t,n,r,s,o).then(function(){e.setFakeCursorMouseDown(),setTimeout(function(){t.first().click(),e.setFakeCursorMouseUp(),setTimeout(function(){u.resolve()},i)},250)}),u},e.drawerAnimationDone=function(){var e=$.Deferred(),t=$(".fxs-drawer-inner").height(),n=window.setInterval(function(){var r=$(".fxs-drawer-inner").height();r===t?(window.clearInterval(n),e.resolve()):t=r},100);return a.when(e.promise())},e.waitFor=function(e,t,n){var r=200,i=Math.ceil(n/r),s=window.setInterval(function(){var n=e();if(n||i--<0)window.clearInterval(s),t(n)},r)},e.blankExperimentCardVisible=function(){var t=$.Deferred();return Shell.UI.Drawer.open(),e.waitFor(function(){var n=$(".fxs-drawer-open").length>0;return n&&e.drawerAnimationDone().done(function(){e.waitFor(function(){return $(e.getBlankExperimentSelector()).length>0},function(e){t.resolve()},2e4)}),n},function(e){e||t.resolve()},5e3),a.when(t.promise())},e.closeDrawer=function(){var t=$.Deferred();return Shell.UI.Drawer.close(),window.setTimeout(function(){e.drawerAnimationDone().done(function(){t.resolve()})},100),a.when(t.promise())},e.openDrawer=function(){var t=$.Deferred();return Shell.UI.Drawer.open(),window.setTimeout(function(){e.drawerAnimationDone().done(function(){t.resolve()})},100),a.when(t.promise())},e.getBlankExperimentSelector=function(){return i.galleryInPlusNewInterimEnabled()?".blankExperimentCard:visible":".experiment-tile:first"},e.cursorXOffset=13,e.cursorYOffset=13,e}();t.GuidedTourUtil=f}),define("generated/editor/TS/ViewModel/GuidedTour/AnimatedExperiment",["require","exports","../../../TS/View/Bubble/Bubble","../../../TS/ViewModel/ExperimentEditor/Commands/DeleteNodesCommand","../../../TS/ViewModel/GuidedTour/GuidedTourUtil","../../../../DataLabClient/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/PromiseQueue","../../../../DataLabClient/Trial","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(){function e(){}return e.launch=function(t){var r=this;t===void 0&&(t=!0),i.GuidedTourUtil.closeExistingDialogs(),n.showAsync(e.getOption(t)).then(function(e){$(window).bind("hashchange.animatedExperiment",function(){r.expectedHashChange||(r.currentPromiseQueue&&r.currentPromiseQueue.clear(),e.dismiss(),i.GuidedTourUtil.getFakeCursorElement().hide())}),$("#bubble-root .bubble-button.right:contains('Close')").css({background:"none",color:"#509abd",border:"1px solid"})})},e.setStepDefaults=function(e){e.forEach(function(e){e.loadHandlerAsync=function(){return $(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!0),i.GuidedTourUtil.resetFakeCursorPosition(),$.Deferred().resolve()}})},e.getOption=function(e){var t=this,s=new n.Options("AnimatedExperiment");s.dismissOnScroll=!1,s.dismissOnResize=!1,s.dismissOnClick=!1,s.alwaysShow=!0,s.canSkipSteps=!1,s.attachBubbleToElement=!1;if(s.userSettings.shouldShowBubble("RetirementNotification")){this.expectedHashChange=!0;var f="<br><br><input class='retirementDontShowAgainCheckbox' type = 'checkbox'> "+u.animatedExperimentDontShowAgain,p;p=s.addStepAtCenter("<span class='warning'></span>"+u.retirementNotificationTitle,""+u.retirementNotificationContent1+"<br><br>\n                "+u.retirementNotificationContent2+"<br><br>\n                "+c.format(u.retirementNotificationContent3,"https://aka.ms/studio-classic-migration")+f,n.Options.retirementDimensions.width,n.Options.retirementDimensions.height),p.shouldShowLeftButton=!1,p.shouldShowFinishButton=!1,p.shouldShowMidRightButton=!0,p.shouldShowRightButton=!0,p.isProgressStep=!1,p.midRightButtonText="Go to Azure Machine Learning",p.midRightButtonAsync=function(e){return t.expectedHashChange=!1,$(".retirementDontShowAgainCheckbox").is(":checked")&&s.userSettings.neverShowAgain("RetirementNotification"),e.close(),$("#retirement-messagebar").css("display","flex"),window.open("https://azure.microsoft.com/services/machine-learning/","_blank"),$.Deferred().resolve()},p.rightButtonText="Close",p.nextHandlerAsync=function(e){t.expectedHashChange=!1,$(".retirementDontShowAgainCheckbox").is(":checked")&&s.userSettings.neverShowAgain("RetirementNotification");var n=s.userSettings.shouldShowBubble("AnimatedExperiment");return n||e.close(),$("#retirement-messagebar").css("display","flex"),$.Deferred().resolve()},p.beforeLoadHandlerAsync=function(e){return $(".bubble-close.animatedTour").bind("click.showRetirementMessageBar",function(){$("#retirement-messagebar").css("display","flex"),$(".bubble-close.animatedTour").unbind("click.showRetirementMessageBar")}),$.Deferred().resolve()}}if(s.userSettings.shouldShowBubble("AnimatedExperiment")){var d=!1;s.userSettings&&(d=s.userSettings.shouldShowBubble(s.id));var v=d?"<br><input class='dontShowAgainCheckbox' type = 'checkbox'> "+u.animatedExperimentDontShowAgain:"",m;e?(m=s.addStepAtCenter(u.animatedExperimentStep0Title,u.animatedExperimentStep0Content+v,n.Options.threeLineDimensions.width,n.Options.threeLineDimensions.height),m.shouldShowLeftButton=!1,m.shouldShowRightButton=!0,m.shouldShowMidLeftButton=!1,m.shouldShowMidRightButton=!1,m.rightButtonText="Get Started"):(m=s.addStepAtCenter(u.animatedExperimentAlternateStep0Title,u.animatedExperimentAlternateStep0Content+v,n.Options.fourLineDimensions.width,n.Options.fourLineDimensions.height),m.shouldShowLeftButton=!1,m.shouldShowRightButton=!1,m.shouldShowMidLeftButton=!0,m.shouldShowMidRightButton=!0,m.midLeftButtonText="Take Tour",m.midRightButtonAsync=function(e){return $(".dontShowAgainCheckbox").is(":checked")&&e.setDontShowAgain(),a.featureUsage({featureID:161,groupID:154}),i.GuidedTourUtil.openDrawer(),$(".bubble-close.animatedTour").unbind("click.animatedExperimentDrawerOpen"),e.close(),$.Deferred().resolve()},m.beforeLoadHandlerAsync=function(e){return $("#bubble-root .bubble-button.right").css({background:"",color:"",border:""}),$(".bubble-close.animatedTour").bind("click.animatedExperimentDrawerOpen",function(){i.GuidedTourUtil.openDrawer(),$(".bubble-close.animatedTour").unbind("click.animatedExperimentDrawerOpen")}),$.Deferred().resolve()},m.midRightButtonText="Not now",m.midLeftButtonAsync=function(e){return e.nextAsync()}),m.isProgressStep=!1,m.nextHandlerAsync=function(e){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1),$(".bubble-close.animatedTour").unbind("click.animatedExperimentDrawerOpen"),$(".dontShowAgainCheckbox").is(":checked")&&e.setDontShowAgain();var n=t.createPromiseQueue(e),r;n.enqueue(function(){return i.GuidedTourUtil.closeDrawer()}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".fxs-drawertaskbar-newbutton"),1e3,500,0)}),n.enqueue(function(){return i.GuidedTourUtil.drawerAnimationDone()}),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".icon.NewExperimentMenuItem"),1e5)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".icon.NewExperimentMenuItem"),1e3,250,250,.5,.3)}),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".blank-icon:last"),1e5)}),n.enqueue(function(){return r=cdm.currentActiveItem.xeViewModel&&cdm.currentActiveItem.xeViewModel.experiment&&cdm.currentActiveItem.xeViewModel.experiment.dirtyStatus.isDirty(),t.expectedHashChange=!0,i.GuidedTourUtil.moveMouseToElementAndClick($(".blank-icon:last"),1e3,500,0)});var s=n.enqueue(function(){return r&&cdm.currentActiveItem.xeViewModel.experiment.dirtyStatus.isDirty()?(e.dismiss(),i.GuidedTourUtil.resetFakeCursorPosition(),$.Deferred().resolve(!1)):(t.expectedHashChange=!1,i.GuidedTourUtil.drawerAnimationDone())});return s.then(function(t){return t===!1?(e.dismiss(),$.Deferred().resolve()):(n.enqueue(function(){return c.whenTrue(h.workspace.applicationCache.allPrefetched)}),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".xe-utilityPanel"),1e4)}),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".experiment-description"),1e4)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElement($(".experiment-description"),1e3,500)}),n.enqueue(function(){return i.GuidedTourUtil.enterTextInInput($(".experiment-description"),"Income Prediction",0)}))})};var g,y,b=s.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentStep1Title,u.animatedExperimentStep1Content,n.Options.twoLineDimensions.width,n.Options.twoLineDimensions.height);b.shouldShowLeftButton=!1,b.rightButtonText=u.bubbleNextButtonTextNew,b.nextHandlerAsync=function(e){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var n=t.createPromiseQueue(e),r,s=n.enqueue(function(){return i.GuidedTourUtil.dragPaletteItemToCanvas("Income","506153734175476c4f62416c57734963.72eb09476cd64015b9d1d2129b4a0ecc",1e3,.6,.2)});return n.enqueue(function(){return s.then(function(e){return g=e.viewModel,r=e.element,i.GuidedTourUtil.wait(500)})}),n.enqueue(function(){return y=r.find(".outputPort"),y.length===0&&(y=r.siblings("g").find(".portNoHighlight")),i.GuidedTourUtil.moveMouseToElement(y,100,0)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick(y,0,100,250)}),n.enqueue(function(){var e=jQuery.Event("mouseup");return e.pageX=y.offset().left,e.pageY=y.offset().top,e.clientY=e.pageY,e.clientX=e.pageX,y.trigger(e),i.GuidedTourUtil.waitForElementToBeVisible($(".datalab-contextMenuItem.enabled:contains('Visualize')"),5e3)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElement($(".datalab-contextMenuItem.enabled:contains('Visualize')"),200,0)}),n.enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").toggleClass("hoverEffect",!0),i.GuidedTourUtil.wait(200)}),n.enqueue(function(){return i.GuidedTourUtil.setFakeCursorMouseDown(),i.GuidedTourUtil.wait(200)}),n.enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").trigger("mouseup"),i.GuidedTourUtil.setFakeCursorMouseUp(),i.GuidedTourUtil.waitForElementToBeVisible($(".numberRowsColumnsHeader:contains('rows')"),1e4)}),n.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(e,$(".numberRowsColumnsHeader:contains('rows')"),2e3)}),n.enqueue(function(){return i.GuidedTourUtil.scrollHorizontalScrollbar($(".dataTableContainer"))}),n.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(e,$(".tableHeader:contains('income')"),2e3)})},b.undoStepAsync=function(){var e=new r.DeleteNodesCommand([g.graphNode],cdm.currentActiveItem.xeViewModel.experimentEditorViewModel);return e.run(),$(".icon.close").trigger("mousedown"),$("#ExperimentEditor .xe-searchBox input").val("").trigger("keyup"),$.Deferred().resolve()};var w,E,S=s.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentStep2Title,u.animatedExperimentStep2Content,n.Options.oneLineDimensions.width,n.Options.oneLineDimensions.height);S.rightButtonText=u.bubbleNextButtonTextNew,S.nextHandlerAsync=function(e){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var n=t.createPromiseQueue(e);n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".icon.close"),500,250,500)}),n.enqueue(function(){return $(".icon.close").trigger("mousedown"),i.GuidedTourUtil.waitForElementToBeNotVisible($(".icon.close"),5e3)});var r=n.enqueue(function(){return i.GuidedTourUtil.dragPaletteItemToCanvas("Split","506153734175476c4f62416c57734963.70530644c97a4ab685f788bf30a8be5f",1e3,.6,.35)}),s=n.enqueue(function(){return r.then(function(e){return w=e.viewModel,i.GuidedTourUtil.connectGraphNodes(500,g,0,w,0,500)})});return n.enqueue(function(){return s.then(function(e){return E=e.outputPort.connections()[0],i.GuidedTourUtil.moveMouseToElement($(".propertyEditor-textAreaItem:contains('Fraction')").find(".ui-autocomplete-input"),500,500)})}),n.enqueue(function(){return i.GuidedTourUtil.enterTextInInput($(".propertyEditor-textAreaItem:contains('Fraction')").find(".ui-autocomplete-input"),"0.7",250)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElement($(".propertyEditor-textAreaItem:contains('Random')").find(".ui-autocomplete-input"),250,500)}),n.enqueue(function(){return i.GuidedTourUtil.enterTextInInput($(".propertyEditor-textAreaItem:contains('Random')").find(".ui-autocomplete-input"),"12345",250)})},S.undoStepAsync=function(){var e=$.Deferred();E.remove();var t=new r.DeleteNodesCommand([w.graphNode],cdm.currentActiveItem.xeViewModel.experimentEditorViewModel);t.run(),$("#ExperimentEditor .xe-searchBox input").val("").trigger("keyup");var n=jQuery.Event("mouseup");return n.pageX=y.offset().left,n.pageY=y.offset().top,n.clientY=n.pageY,n.clientX=n.pageX,y.trigger(n),$(".datalab-contextMenuItem.enabled:contains('Visualize')").trigger("mouseup"),i.GuidedTourUtil.waitForElementToBeVisible($(".dataTableContainer"),5e3).then(function(){i.GuidedTourUtil.scrollHorizontalScrollbar($(".dataTableContainer"),null,1e6).then(function(){e.resolve()})}),e};var x,T,N,C,k,L=s.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentStep3Title,u.animatedExperimentStep3Content,n.Options.twoLineDimensions.width,n.Options.twoLineDimensions.height);L.rightButtonText=u.bubbleNextButtonTextNew,L.nextHandlerAsync=function(e){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var n=i.GuidedTourUtil.getFakeCursorElement(),r,s=t.createPromiseQueue(e);$(".xe-utilityPanelRoot.transitionWidth").animate({width:$(".xe-utilityPanelRoot.transitionWidth").width()+.1+"px"}),s.enqueue(function(){return i.GuidedTourUtil.moveMouseToElement($(".xe-searchBox"),1e3,500)}),s.enqueue(function(){return i.GuidedTourUtil.enterTextInInput($("#ExperimentEditor .xe-searchBox input"),"Two Class",0)}),s.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".xe-paletteItem:contains('Two-Class Boosted Decision Tree'):last"),5e3)}),s.enqueue(function(){return i.GuidedTourUtil.wait(500)}),s.enqueue(function(){return i.GuidedTourUtil.moveMouseToElement($(".xe-utilityPanelRoot .resize"),1e3,0,0,.5)}),s.enqueue(function(){return n.toggleClass("resize",!0),i.GuidedTourUtil.wait(250)}),s.enqueue(function(){i.GuidedTourUtil.setFakeCursorMouseDown();var e=$.Deferred(),t=i.GuidedTourUtil.getPaletteItem("Two-Class Boosted Decision Tree").children(".xe-paletteItemText")[0];k=$(".xe-utilityPanelRoot.transitionWidth").width();var r=t.scrollWidth-t.offsetWidth;return $(".xe-utilityPanelRoot.transitionWidth").animate({width:k+r+"px"},{easing:"linear",duration:500,complete:function(){e.resolve()},step:function(){n.offset({top:n.offset().top,left:$(".xe-utilityPanelRoot .resize").offset().left-i.GuidedTourUtil.cursorXOffset})}}),e});var o=s.enqueue(function(){return n.toggleClass("resize",!1),i.GuidedTourUtil.setFakeCursorMouseUp(),i.GuidedTourUtil.dragPaletteItemToCanvas("","506153734175476c4f62416c57734963.e3c522f853d948298ea45c6a6b75330c",1e3,.2,.35,!1)}),u=s.enqueue(function(){return o.then(function(e){return x=e.viewModel,i.GuidedTourUtil.dragPaletteItemToCanvas("Train Model","506153734175476c4f62416c57734963.5cc7053eaa30450d96c0dae4be720977",1e3,.4,.5)})}),a=s.enqueue(function(){return u.then(function(e){return T=e.viewModel,r=e.element,i.GuidedTourUtil.connectGraphNodes(500,x,0,T,0,250)})}),f=s.enqueue(function(){return a.then(function(e){return N=e.outputPort.connections()[0],i.GuidedTourUtil.connectGraphNodes(500,w,0,T,1,250)})});return s.enqueue(function(){return f.then(function(e){C=e.outputPort.connections()[0];var t=r.find(".graphNode-icon");return t.length===0&&(t=r.siblings("svg")),i.GuidedTourUtil.moveMouseToElementAndClick(t,250,250,500)})}),s.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".propertyEditor-right .propertyEditor-textAreaItem input[type='button']"),1e3,500,1e3)}),s.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".columnPicker .ruleTable .itemTextBoxInput",3e4))}),s.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".columnPicker .ruleTable .itemTextBoxInput"),1e3,500,1e3)}),s.enqueue(function(){return i.GuidedTourUtil.fillOutColumnPickerAutocomplete($(".columnPicker .ruleTable .itemTextBoxInput"),"income")}),s.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".columnPicker .icon.tick"),1e3,500,500)}),s.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeNotVisible($(".columnPicker .icon.tick"),5e3)})},L.undoStepAsync=function(){N.selected(!0),N.remove(),C.selected(!0),C.remove();var e=new r.DeleteNodesCommand([T.graphNode,x.graphNode],cdm.currentActiveItem.xeViewModel.experimentEditorViewModel);return e.run(),$(".xe-utilityPanelRoot.transitionWidth").width(k),$("#ExperimentEditor .xe-searchBox input").val("").trigger("keyup"),T.moduleNode.parameters["Label column"].value(""),$.Deferred().resolve()};var A,O,M,_,D,P,H,B=s.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentStep4Title,u.animatedExperimentStep4Content,n.Options.oneLineDimensions.width,n.Options.oneLineDimensions.height);B.rightButtonText=u.bubbleNextButtonTextNew,B.nextHandlerAsync=function(e){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var n=t.createPromiseQueue(e),r=n.enqueue(function(){return i.GuidedTourUtil.dragPaletteItemToCanvas("Score Model","506153734175476c4f62416c57734963.401b4f92e7244d5abe81d5b0ff9bdb33",1e3,.6,.65)}),s=n.enqueue(function(){return r.then(function(e){return A=e.viewModel,M=e.element,i.GuidedTourUtil.dragPaletteItemToCanvas("Evaluate","506153734175476c4f62416c57734963.927d65ac3b504694990320f6c1672089",1e3,.6,.8)})}),o=n.enqueue(function(){return s.then(function(e){return O=e.viewModel,_=e.element,i.GuidedTourUtil.connectGraphNodes(500,w,1,A,1,250)})}),u=n.enqueue(function(){return o.then(function(e){return D=e.outputPort.connections()[0],i.GuidedTourUtil.connectGraphNodes(500,T,0,A,0,250)})}),a=n.enqueue(function(){return u.then(function(e){return P=e.outputPort.connections()[0],i.GuidedTourUtil.connectGraphNodes(500,A,0,O,0,250)})});return n.enqueue(function(){return a.then(function(e){H=e.outputPort.connections()[0]})})},B.undoStepAsync=function(){D.selected(!0),D.remove(),P.selected(!0),P.remove(),H.selected(!0),H.remove(),A.selected(!0),A.remove();var e=new r.DeleteNodesCommand([A.graphNode,O.graphNode],cdm.currentActiveItem.xeViewModel.experimentEditorViewModel);return e.run(),$("#ExperimentEditor .xe-searchBox input").val("").trigger("keyup"),$.Deferred().resolve()};var j=!l.isWorkspaceTypeAnonymous()&&o.animatedTourWebServiceEnabled(),F=s.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentStep5Title,u.animatedExperimentStep5Content,n.Options.twoLineDimensions.width,n.Options.twoLineDimensions.height);F.rightButtonText=u.bubbleNextButtonTextNew,F.shouldShowFinishButton=!1,F.nextHandlerAsync=function(e){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var r=t.createPromiseQueue(e),s;r.enqueue(function(){return $(".miniMapContainer ").is(":visible")?i.GuidedTourUtil.moveMouseToElementAndClick($(".miniMapLauncher"),1e3,250,250):$.Deferred().resolve()}),r.enqueue(function(){return t.expectedHashChange=!0,i.GuidedTourUtil.moveMouseToElementAndClick($(".fxs-command-action-play"),750,500,0)}),r.enqueue(function(){return i.GuidedTourUtil.waitForExperimentToBeOutOfDraft()}),r.enqueue(function(){return t.expectedHashChange=!1,i.GuidedTourUtil.getFakeCursorElement().hide(),i.GuidedTourUtil.waitForExperimentToFinishRunning()}),r.enqueue(function(){return i.GuidedTourUtil.wait(500)}),r.enqueue(function(){return i.GuidedTourUtil.resetFakeCursorPosition(),M=$(M.selector),s=M.children(".outputPort"),s.length===0&&(s=M.siblings("g[data-portname='Scored dataset']").find(".portNoHighlight")),i.GuidedTourUtil.moveMouseToElement(s,500,0)}),r.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick(s,0,100,250)}),r.enqueue(function(){var e=jQuery.Event("mouseup");return e.pageX=s.offset().left,e.pageY=s.offset().top,e.clientY=e.pageY,e.clientX=e.pageX,s.trigger(e),i.GuidedTourUtil.waitForElementToBeVisible($(".datalab-contextMenuItem.enabled:contains('Visualize')"),5e3)}),r.enqueue(function(){return i.GuidedTourUtil.moveMouseToElement($(".datalab-contextMenuItem.enabled:contains('Visualize')"),200,0)}),r.enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").toggleClass("hoverEffect",!0),i.GuidedTourUtil.wait(200)}),r.enqueue(function(){return i.GuidedTourUtil.setFakeCursorMouseDown(),i.GuidedTourUtil.wait(200)}),r.enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").trigger("mouseup"),i.GuidedTourUtil.setFakeCursorMouseUp(),i.GuidedTourUtil.waitForElementToBeVisible($(".smallHeader:contains('rows')"),t.visualizeModuleOutputTimeout)}),r.enqueue(function(){return i.GuidedTourUtil.scrollHorizontalScrollbar($(".dataTableContainer"))}),r.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(e,$(".tableHeader:contains('Scored Labels')"),2e3)}),r.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(e,$(".tableHeader:contains('Scored Probabilities')"),2e3)}),r.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".icon.close"),500,0,750)}),r.enqueue(function(){return $(".icon.close").trigger("mousedown"),i.GuidedTourUtil.waitForElementToBeNotVisible($(".icon.close"),5e3)}),r.enqueue(function(){return i.GuidedTourUtil.wait(500)}),r.enqueue(function(){return _=$(_.selector),s=_.children(".outputPort"),s.length===0&&(s=_.siblings("g[data-portname='Evaluation results']").find(".portNoHighlight")),i.GuidedTourUtil.moveMouseToElement(s,500,0)}),r.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick(s,0,200,250)}),r.enqueue(function(){var e=jQuery.Event("mouseup");return e.pageX=s.offset().left,e.pageY=s.offset().top,e.clientY=e.pageY,e.clientX=e.pageX,s.trigger(e),i.GuidedTourUtil.waitForElementToBeVisible($(".datalab-contextMenuItem.enabled:contains('Visualize')"),5e3)}),r.enqueue(function(){return i.GuidedTourUtil.moveMouseToElement($(".datalab-contextMenuItem.enabled:contains('Visualize')"),200,0)}),r.enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").toggleClass("hoverEffect",!0),i.GuidedTourUtil.wait(200)}),r.enqueue(function(){return i.GuidedTourUtil.setFakeCursorMouseDown(),i.GuidedTourUtil.wait(200)}),r.enqueue(function(){return $(".datalab-contextMenuItem.enabled:contains('Visualize')").trigger("mouseup"),i.GuidedTourUtil.setFakeCursorMouseUp(),i.GuidedTourUtil.waitForElementToBeVisible($(".graphContainer"),t.visualizeModuleOutputTimeout)}),r.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(e,$(".graphContainer"),2e3)}),r.enqueue(function(){return i.GuidedTourUtil.scrollVerticalScrollbar($(".visualizationContentWrapper"))}),r.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(e,$(".confusionMatrixTable:contains('True Positive')"),2e3)}),r.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(e,$(".confusionMatrixTable:contains('Accuracy')"),2e3)}),r.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(e,$(".numeric-box:contains('AUC')"),2e3)});var o=r.enqueue(function(){return i.GuidedTourUtil.getFakeCursorElement().hide(),$.Deferred().resolve()});return j?r.enqueue(function(){return e.close(),i.GuidedTourUtil.wait(500).then(function(){n.showAsync(t.getOptionForOperationalize())}),$.Deferred().resolve()}):o};if(!j){var I=s.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentAlternateStep6Title,u.animatedExperimentAlternateStep6Content,n.Options.threeLineDimensions.width,n.Options.threeLineDimensions.height);I.finishButtonText=u.bubbleFinishedButtonTextNew,I.shouldShowLeftButton=!1,I.isProgressStep=!1,this.setStepDefaults([I])}this.setStepDefaults([m,b,S,L,B,F])}return s},e.getOptionForOperationalize=function(){var e=this,t=new n.Options("AnimatedExperimentWebService");t.dismissOnScroll=!1,t.dismissOnResize=!1,t.dismissOnClick=!1,t.alwaysShow=!0,t.canSkipSteps=!1,t.attachBubbleToElement=!1;var r;r=t.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentWebServiceStep0Title,u.animatedExperimentWebServiceStep0Content,n.Options.threeLineDimensions.width,n.Options.threeLineDimensions.height),r.rightButtonText=u.bubbleNextButtonTextNew,r.shouldShowFinishButton=!1,r.shouldShowLeftButton=!1,r.isProgressStep=!1,r.rightButtonText="Setup a web service",r.nextHandlerAsync=function(t){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var n=e.createPromiseQueue(t);return n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".icon.close"),500,250,500)}),n.enqueue(function(){return $(".icon.close").trigger("mousedown"),i.GuidedTourUtil.waitForElementToBeNotVisible($(".icon.close"),5e3)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElement($(".fxs-command-action-publish"),750,100)}),n.enqueue(function(){return $(".fxs-command-action-publish").trigger("mouseenter"),i.GuidedTourUtil.wait(250)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".fxs-command-flyout li:contains('Predictive Web Service') a"),250,250,250)}),n.enqueue(function(){var e=$.Deferred();return cdm.currentActiveItem.xeControlContainer.xeControl.viewModel.animationComplete.subscribe(function(){i.GuidedTourUtil.wait(200).then(function(){e.resolve()})}),e}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".fxs-progressbox-content:contains('Creating predictive') .fxs-progressbox-button:contains('Close') .sprite"),500,250,250)}),n.enqueue(function(){return i.GuidedTourUtil.wait(250)}),n.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(t,$(".project-experiments-tabs li:contains('Predictive experiment')"),2e3)})};var s=t.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentWebServiceStep1Title,u.animatedExperimentWebServiceStep1Content,n.Options.threeLineDimensions.width,n.Options.threeLineDimensions.height);s.rightButtonText=u.bubbleNextButtonTextNew,s.shouldShowLeftButton=!1,s.nextHandlerAsync=function(t){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var n=e.createPromiseQueue(t);return n.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(t,$(".customElements .rectEntity:contains('Income Prediction [trained model]')"),1500)}),n.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(t,$(".customElements .rectEntity:contains('Web service input')"),1500)}),n.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(t,$(".customElements .rectEntity:contains('Web service output')"),1500)})};var a=t.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentWebServiceStep2Title,u.animatedExperimentWebServiceStep2Content,n.Options.twoLineDimensions.width,n.Options.twoLineDimensions.height);a.rightButtonText=u.bubbleNextButtonTextNew,a.shouldShowLeftButton=!1,a.nextHandlerAsync=function(t){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var n=e.createPromiseQueue(t),r=n.enqueue(function(){return i.GuidedTourUtil.dragPaletteItemToCanvas("Project Columns","506153734175476c4f62416c57734963.1ec722fab6234e26a44ea50c6d726223",500,.2,.4)}),s,a;n.enqueue(function(){return r.then(function(e){return a=e.viewModel,s=e.element,i.GuidedTourUtil.wait(500)})});var f=ko.dataFor($(".customElements .rectEntity:contains('Adult Census')").get(0)),l=ko.dataFor($(".customElements .rectEntity:contains('Score Model')").get(0));return n.enqueue(function(){return i.GuidedTourUtil.connectGraphNodes(500,f,0,a,0,500)}),n.enqueue(function(){return i.GuidedTourUtil.connectGraphNodes(500,a,0,l,1,500)}),n.enqueue(function(){var e=s.find(".graphNode-icon");return e.length===0&&(e=s.siblings("svg")),i.GuidedTourUtil.moveMouseToElementAndClick(e,500,250,250)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".propertyEditor-right .propertyEditor-textAreaItem input[type='button']"),1e3,500,1e3)}),o.columnPickerRulesRedesignEnabled()&&(n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".customUXSections > ul > li > a"),3e4)}),n.enqueue(function(){return $(".columnPicker").is(":visible")?c.succeed(null):i.GuidedTourUtil.moveMouseToElementAndClick($('.customUXSections > ul > li > a:contains("'+u.columnPickerWithRules+'")'),500,250,250)})),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".columnPicker .ruleTable .itemTextBoxInput"),3e4)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($("#RulesStartingChoice"),500,250,250)}),n.enqueue(function(){var e=ko.dataFor($("#RulesStartingChoice").get(0));return e.startingChoice(e.startingChoices().filter(function(e){return e.name==="All columns"})[0]),i.GuidedTourUtil.moveMouseToElementAndClick($(".ruleCategoryChoice"),500,250,250)}),n.enqueue(function(){var e=ko.dataFor($(".ruleCategoryChoice").get(0));return e.ruleCategory(!0),i.GuidedTourUtil.moveMouseToElementAndClick($(".columnPicker .ruleTable .itemTextBoxInput"),1e3,500,1e3)}),n.enqueue(function(){return i.GuidedTourUtil.fillOutColumnPickerAutocomplete($(".columnPicker .ruleTable .itemTextBoxInput"),"income")}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".columnPicker .icon.tick"),1e3,500,500)}),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeNotVisible($(".columnPicker .icon.tick"),5e3)})};var f=t.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentWebServiceStep3Title,u.animatedExperimentWebServiceStep3Content,n.Options.threeLineDimensions.width,n.Options.threeLineDimensions.height);f.rightButtonText=u.bubbleNextButtonTextNew,f.shouldShowLeftButton=!1,f.nextHandlerAsync=function(t){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var n=e.createPromiseQueue(t),r=ko.dataFor($(".customElements .rectEntity:contains('Score Model')").get(0)),s=ko.dataFor($(".customElements .rectEntity:contains('Web service output')").get(0)),a=n.enqueue(function(){return i.GuidedTourUtil.dragPaletteItemToCanvas("Project Columns","506153734175476c4f62416c57734963.1ec722fab6234e26a44ea50c6d726223",500,.2,.78,!1)}),f,l;return n.enqueue(function(){return a.then(function(e){return l=e.viewModel,f=e.element,i.GuidedTourUtil.wait(500)})}),n.enqueue(function(){return i.GuidedTourUtil.connectGraphNodes(500,r,0,l,0,500)}),n.enqueue(function(){return i.GuidedTourUtil.connectGraphNodes(500,l,0,s,0,500)}),n.enqueue(function(){var e=f.find(".graphNode-icon");return e.length===0&&(e=f.siblings("svg")),i.GuidedTourUtil.moveMouseToElementAndClick(e,500,250,250)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".propertyEditor-right .propertyEditor-textAreaItem input[type='button']"),1e3,500,1e3)}),o.columnPickerRulesRedesignEnabled()&&(n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".customUXSections > ul > li > a"),3e4)}),n.enqueue(function(){return $(".columnPicker").is(":visible")?c.succeed(null):i.GuidedTourUtil.moveMouseToElementAndClick($('.customUXSections > ul > li > a:contains("'+u.columnPickerWithRules+'")'),500,250,250)})),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".columnPicker .ruleTable .itemTextBoxInput"),3e4)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".columnPicker .ruleTable .itemTextBoxInput"),500,250,250)}),n.enqueue(function(){return i.GuidedTourUtil.fillOutColumnPickerAutocomplete($(".columnPicker .ruleTable .itemTextBoxInput"),"Scored Labels")}),n.enqueue(function(){return i.GuidedTourUtil.fillOutColumnPickerAutocomplete($(".columnPicker .ruleTable .itemTextBoxInput"),"Scored Probabilities")}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".columnPicker .icon.tick"),1e3,500,500)}),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeNotVisible($(".columnPicker .icon.tick"),5e3)}),n.enqueue(function(){return e.expectedHashChange=!0,i.GuidedTourUtil.moveMouseToElementAndClick($(".fxs-command-action-play"),1e3,500,0)}),n.enqueue(function(){return i.GuidedTourUtil.waitForExperimentToBeOutOfDraft()}),n.enqueue(function(){return e.expectedHashChange=!1,i.GuidedTourUtil.getFakeCursorElement().hide(),i.GuidedTourUtil.waitForExperimentToFinishRunning()}),n.enqueue(function(){return i.GuidedTourUtil.wait(500)})};var l=t.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentWebServiceStep4Title,u.animatedExperimentWebServiceStep4Content,n.Options.oneLineDimensions.width,n.Options.oneLineDimensions.height);l.rightButtonText=u.bubbleNextButtonTextNew,l.shouldShowLeftButton=!1,l.nextHandlerAsync=function(t){$(".bubble-transparent-overlay.blockingDiv.animatedTour").toggleClass("darkerOverlay",!1);var n=e.createPromiseQueue(t);return n.enqueue(function(){return e.expectedHashChange=!0,i.GuidedTourUtil.moveMouseToElementAndClick($(".fxs-command-action-deployWebService"),500,250,250)}),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($("a:contains('REQUEST/RESPONSE')"),3e4)}),n.enqueue(function(){return e.expectedHashChange=!1,i.GuidedTourUtil.wait(250)}),n.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(t,$("a:contains('REQUEST/RESPONSE')"),2e3)}),n.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(t,$("a:contains('BATCH EXECUTION')"),2e3)}),n.enqueue(function(){return i.GuidedTourUtil.showThenRemoveElementHighlight(t,$(".WebServiceTestLink"),2e3)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".WebServiceTestLink"),500,250,250)}),n.enqueue(function(){var n=e.createPromiseQueue(t),r=[{id:"age",value:"25"},{id:"workclass",value:"State-gov"},{id:"fnlwgt",value:"77516"},{id:"education",value:"Bachelors"},{id:"education-num",value:"13"},{id:"marital-status",value:"Divorced"},{id:"occupation",value:"Adm-clerical"},{id:"relationship",value:"Not-in-family"},{id:"race",value:"White"},{id:"sex",value:"Female"},{id:"capital-gain",value:"1000"},{id:"capital-loss",value:"0"},{id:"hours-per-week",value:"40"},{id:"native-country",value:"United-States"}],s,o=function(e){return n.enqueue(function(){return i.GuidedTourUtil.scrollVerticalScrollbar($("#scoreDialogContent"),function(){return i.GuidedTourUtil.isElementOnScreen($("#scoreDialogContent"),$(".field-group:contains("+e.id+")"))})}),n.enqueue(function(){return $(".field-group #"+e.id).val(e.value).change(),i.GuidedTourUtil.wait(250)})};for(var u=0;u<r.length;u++)s=o(r[u]);return s}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".dlwux-fx-dialog-ok"),500,250,250)}),n.enqueue(function(){return i.GuidedTourUtil.wait(250)}),n.enqueue(function(){return i.GuidedTourUtil.waitForElementToBeVisible($(".fxs-progressbox-content:contains('Income Prediction [Predictive Exp.]') .fxs-progressbox-button:contains('Details') .sprite"),2e4)}),n.enqueue(function(){return i.GuidedTourUtil.moveMouseToElementAndClick($(".fxs-progressbox-content:contains('Income Prediction [Predictive Exp.]') .fxs-progressbox-button:contains('Details') .sprite"),500,250,250)})};var h=t.addStepByJquerySelector("#controlPanelContainer",u.animatedExperimentWebServiceStep5Title,u.animatedExperimentWebServiceStep5Content,n.Options.fourLineDimensions.width,n.Options.fourLineDimensions.height);return h.shouldShowLeftButton=!1,h.isProgressStep=!1,h.finishButtonText=u.bubbleFinishedButtonTextNew,this.setStepDefaults([r,s,a,f,l,h]),t},e.createPromiseQueue=function(e){var t=new f(!0);return t.setFailureHandler(function(n){a.error("animated tour failure",null,JSON.stringify({TourId:e&&e.id,Step:e&&e.currentIndex(),Error:String(n),Stack:n&&n.stack})),e.dismiss(),i.GuidedTourUtil.resetFakeCursorPosition(),c.showErrorNotification({title:u.animatedTourFailed}),t.clear()}),this.currentPromiseQueue=t,t},e.visualizeModuleOutputTimeout=2e4,e.expectedHashChange=!1,e}();t.AnimatedExperiment=p}),define("generated/editor/TS/Common/ProjectUtilities",["require","exports","../../../DataLabClient/Features","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Util","../../../DataLabClient/Validation"],function(e,t,n,r,i,s){function o(){Shell.UI.Navigation.navigate({extension:t.projectsExtensionName,type:"ListProjects",name:""})}function u(e,n){Shell.UI.Navigation.navigate({extension:t.projectsExtensionName,type:t.ProjectType.name,name:e,displayName:n})}function a(e){if(e.length===0)return"<div class='noneProjectElement'>"+r.noProjectsInGridItem+"</div>";if(e.length===1)return Shell.Utilities.htmlEncode(e[0]);var t=i.format(r.projectNumberText,e.length.toString()),n=Shell.Utilities.attributeEncodeProperlyQuotedAttribute(e.join(", "));return"<div class='multiProjectElement' title='"+n+"'>"+t+"</div>"}function f(e,t){return n.enableProjectBasedAssetsGroupingEnabled()&&e.push({name:r.projectTitleInOtherGrids,field:"Project",formatter:a,width:t}),e}function l(e){return e===void 0&&(e=""),s.validatableObservable(e,function(e){if(!/\S/.test(e))return r.projectNameError;var t=140;return e.length>t?i.format(r.projectNameLengthError,t.toString()):null})}t.projectsExtensionName="Projects",t.ProjectType={name:"Project",displayName:r.ProjectDisplayName,dataFunction:function(e,t,n){return{data:[{name:e.Project,displayName:e.Project}]}}},t.navigateToProjectList=o,t.navigateToProject=u,t.formatProjectDisplay=a,t.appendProjectColumn=f,t.getProjectNameValidator=l}),define("generated/DataLabClient/Contracts/V1/Common/ProjectCollection",["require","exports"],function(e,t){(function(e){e[e.Experiment=0]="Experiment",e[e.Notebook=1]="Notebook",e[e.WebService=2]="WebService",e[e.DataSource=3]="DataSource",e[e.Module=4]="Module",e[e.TrainedModel=5]="TrainedModel",e[e.Transform=6]="Transform"})(t.AssetType||(t.AssetType={}));var n=t.AssetType,r=function(){function e(){}return e.AddAsset=function(e,t){return e.Contents[n[t.assetType]].push(t.id),e},e.IsProjectEmpty=function(e){for(var t in e.Contents)if(e.Contents.hasOwnProperty(t)&&e.Contents[t].length!==0)return!1;return!0},e}();t.ProjectCollection=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/AddToProjectDialogViewModel",["require","exports","../../../TS/Common/ProjectUtilities","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../../../DataLabClient/Model/User","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f=r.FeatureId,l=Shell.UI.Notifications,c=function(){function e(t,n,r){var i=this;this._isNewProject=!1,this.IsSelected=ko.observable(!1),this.IsVisible=ko.observable(!0),this.Name=ko.observable(t),this.Id=n,this.IsEnabled=!r,this.applyFilter=function(t){if(!t||i._isNewProject){i.IsVisible(!0);return}var n=e.normalizeFilterText(t),r=e.normalizeFilterText(i.Name()),s=r.indexOf(n)!==-1;i.IsVisible(s)}}return e.normalizeFilterText=function(t){return t?t.toLowerCase().replace(e.filterTextNormalizationRegex," "):""},Object.defineProperty(e.prototype,"IsNewProject",{get:function(){return this._isNewProject},enumerable:!0,configurable:!0}),e.filterTextNormalizationRegex=/[^A-Za-z0-9 ]/g,e}(),h=function(e){function t(){var t=this;e.call(this,"","",!1),this.IsInEditMode=ko.observable(!1),this._isNewProject=!0,this.NewProjectName=n.getProjectNameValidator(),this.NewProjectName.subscribe(function(e){t.Name(e)}),this.NameIsEmpty=ko.computed(function(){return t.Name().length===0})}return __extends(t,e),t}(c),p=function(){function e(e,t,n,r){var f=this;this.workspace=e,this.assets=t,this.successCallback=r,this.selectedProject=ko.observable(null),this.Projects=[],this.searchString=ko.observable(""),this.successCallback||(this.successCallback=$.noop),n.sort(function(e,t){return e.Name<t.Name?-1:e.Name>t.Name?1:0}),n.forEach(function(e){var n=t.every(function(t){var n=o.AssetType[t.assetType],r=e.Contents[n];return r===null||r===undefined?!1:r.indexOf(t.id)!=-1});f.Projects.push(new c(e.Name,e.ContainerId,n))}),this.Projects.push(new h),this.canBeAccepted=ko.computed(function(){if(f.selectedProject()===null)return!1;if(!f.selectedProject().IsNewProject)return!0;var e=f.selectedProject();return e.NewProjectName.isValid()}),this.searchString.extend({rateLimit:{timeout:400,method:"notifyWhenChangesStop"}}).subscribe(function(e){s.featureUsage({featureID:17,groupID:171,data:e}),f.applyFiltering(e)}),this.selectOrEditNewProject=function(e){var t=f.selectedProject();e!==t?(t!==null&&t.IsSelected(!1),e.IsSelected(!0),e.NameIsEmpty()&&e.IsInEditMode(!0)):e.IsInEditMode(!0),f.selectedProject(e)},this.onSelection=function(e){var t=f.selectedProject();if(t!==null&&t.IsNewProject){var n=t;n.NewProjectName.startValidating(),n.IsInEditMode(!1)}if(e!==t){t!==null&&t.IsSelected(!1),e.IsSelected(!0),f.selectedProject(e);if(e.IsNewProject&&e.Name().length===0){var n=e;n.IsInEditMode(!0)}}},this.applyFiltering=function(e){f.Projects.forEach(function(t){t.applyFilter(e)});var t=f.selectedProject();t!==null&&!t.IsVisible()&&f.deselectProject()},this.dismissed=function(e){if(e.accepted&&f.selectedProject()!==null){var t={};t[o.AssetType[f.assets[0].assetType]]=f.assets.map(function(e){return e.id});var n=f.selectedProject().Name(),r=f.formatAssetString(f.assets),c=a.format(i.addToProjectProgressMessage,r,n),h=new l.Progress(c,"active",!0),p=a.format(i.addProjectDialogFailedToAdd,n);h.setDismissable(!0),h.setActions([l.Buttons.close()]),l.add(h);var d=a.format(i.addToProjectCompleteMessage,r,n);if(!f.selectedProject().IsNewProject)f.workspace.addToProjectAsync(f.selectedProject().Id,t).done(function(e){s.featureUsage({featureID:175,groupID:171,data:JSON.stringify(f.assets)}),h.setTitle(d),h.setStatus("success"),f.successCallback(e)}).fail(function(e){h.setTitle(p),h.setStatus("error"),a.showErrorNotification({title:p,details:e.message}),s.featureUsage({featureID:176,groupID:179,data:JSON.stringify(f.assets)})});else{var v=f.selectedProject(),m={ContainerId:"",CreatedTime:"",Name:v.Name(),Creator:u.user?u.user.name:"",Description:"",ChangedTime:"",Contents:t,EntityTag:""};f.workspace.createProjectAsync(m,!0).done(function(e){s.featureUsage({featureID:177,groupID:171,data:JSON.stringify(f.assets)}),h.setTitle(d),h.setStatus("success"),f.successCallback(e)}).fail(function(e){h.setTitle(p),h.setStatus("error"),s.featureUsage({featureID:178,groupID:179,data:JSON.stringify(f.assets)}),s.error(e.message)})}}}}return e.prototype.formatAssetString=function(e){return e.length===1?i.addToProjectSingleItem:a.format(i.addToProjectPluralItem,e.length.toString())},e}();t.AddToProjectViewModel=p}),define("generated/editor/DataLabViews/AddToProjectDialogView",["require","exports","../TS/ViewModel/ProjectCollection/AddToProjectDialogViewModel","../TS/View/DialogView","../../DataLabClient/Constants","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){function l(e,t,n){n===void 0&&(n=null),c(e,[t],n)}function c(e,t,i){i===void 0&&(i=null),Shell.UI.Spinner.show(),a.then(e.getProjectsAsync(),function(s){var a=new n.AddToProjectViewModel(e,t,s,i),f=new r.DialogView(ExperimentEditorTemplates._addAssetToProjectMarkup,a,{size:["872px","440px"]});f.show(),o.featureUsage({featureID:174,groupID:171,data:u.AssetType[t[0].assetType]})}).fail(function(e){a.showErrorNotification({title:s.addProjectDialogError,details:e.message}),o.featureUsage({featureID:182,groupID:179}),o.error(e.message)}).always(function(){Shell.UI.Spinner.hide()})}var f=i.FeatureId;t.openAddToProjectDialog=l,t.openAddToProjectDialogWithMultipleAssets=c}),define("generated/editor/TS/ViewModel/ExperimentEditor/UserWorkspaceHelpers",["require","exports","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r){var i=function(){function e(){}return e.getUserWorkspaces=function(){return e.userWorkspacesPromise?e.userWorkspacesPromise:(e.userWorkspacesPromise=n.then(r.workspace.listWorkspacesAsync(),function(e){return e.sort(function(e,t){return e.FriendlyName.localeCompare(t.FriendlyName)})}),e.userWorkspacesPromise)},e.getUserWorkspacesFromRegion=function(e,t){return n.then(r.workspace.listUserWorkspacesAsync(e,t),function(e){return e.sort(function(e,t){return e.FriendlyName.localeCompare(t.FriendlyName)})})},e.getWorkspacesPermissionsFromRegion=function(e,t){return n.then(r.workspace.listWorkspacesPermissionsAsync(e,t),function(e){var t=e.Values;return t.sort(function(e,t){return e.Workspace.FriendlyName.localeCompare(t.Workspace.FriendlyName)})})},e}();t.UserWorkspacesHelper=i}),define("generated/editor/TS/ViewModel/Dialogs/CopyExperimentDialogViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/ExperimentEditorContainerViewModel","../../../DataLabViews/ExperimentView","../../../TS/ViewModel/ExperimentEditor/PackagePollingHelpers","../../../TS/ViewModel/ExperimentEditor/UserWorkspaceHelpers","../../../TS/ViewModel/Dialogs/TrialDialogs","../../../../DataLabClient/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Validation","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function v(e){return e.WorkspaceId===p.workspace.id}function m(e){return{FriendlyName:e.FriendlyName,WorkspaceId:e.WorkspaceId,DisplayText:e.FriendlyName,IsEncrypted:!!e.KeyVaultKeyIdentifier}}var d=function(){function e(e,t){var r=this;this.sourceWorkspaceSetting=ko.observable(null),t instanceof n.ExperimentEditorContainerViewModel?(this.xeViewModel=t,this.experimentId=this.xeViewModel.experiment.experimentId()):(this.xeViewModel=null,this.experimentId=t),this.experimentName=h.validatableObservable(e,function(e){return/\S/.test(e)?null:f.experimentNameError}),this.experimentName.subscribe(function(){r.experimentName.startValidating(),r.experimentName.validate()}),this.workspaceOptions=ko.observableArray([]),this.acceptAction=this._copyExperimentToDifferentWorkspace,s.UserWorkspacesHelper.getUserWorkspaces().done(function(e){e.map(m).forEach(function(e){v(e)?r.sourceWorkspaceSetting(e):r.workspaceOptions.push(e)})}).fail(function(){}),this.workspaceInfoAvailable=ko.computed(function(){return r.workspaceOptions().length>0}),this.destinationWorkspace=ko.observable(null),this.validatedFields=[this.experimentName],this.copyFromEncryptedToUnencryptedWorkspace=ko.computed(function(){var e=r.destinationWorkspace(),t=r.sourceWorkspaceSetting()&&r.sourceWorkspaceSetting().IsEncrypted&&e&&!e.IsEncrypted;return t})}return e.prototype.canBeAccepted=function(){return this.validatedFields.forEach(function(e){return e.startValidating()}),this.workspaceInfoAvailable()&&!this.copyFromEncryptedToUnencryptedWorkspace()&&this.validatedFields.every(function(e){return e.isValid()})},e.prototype.dismissed=function(e){e.accepted?(l.customEvent({key:"CopyExperimentStarted",type:"CopyExperiment",data:JSON.stringify({experimentId:this.experimentId,experimentName:this.experimentName(),destinationWorkspaceId:this.destinationWorkspace().WorkspaceId})}),l.featureUsage({featureID:81,groupID:3,data:JSON.stringify({experimentId:this.experimentId,experimentName:this.experimentName,destinationWorkspaceId:this.destinationWorkspace().WorkspaceId})}),this.acceptAction()):l.customEvent({key:"CopyExperimentDialogClosed",type:"AllExperimentsView"})},e.prototype.getSourceWorkspaceOptionViewModel=function(){return this.sourceWorkspaceSetting},e.prototype._copyExperimentToDifferentWorkspace=function(){var e=this,t=new Shell.UI.Notifications.Progress(c.format(f.copyExperimentDialogCopyExperimentStarted,this.experimentName(),this.destinationWorkspace().FriendlyName),"active",!1);Shell.UI.Notifications.add(t),t.setValue(10);var n;this.xeViewModel?n=this.xeViewModel.save().done(function(){e.experimentId=e.xeViewModel.experiment.experimentId()}).fail(function(e){a.trialLimitationsEnabled()&&o.tryShowDialogForTrialRestriction(e)}):n=$.Deferred().resolve().promise();var s=c.then(n,function(){return p.workspace.createExperimentStoragePackageAsync(e.experimentId,!0,e.experimentName())}),u=c.then(s,function(n){return e.pollOnPackage(n,t)}),h=c.then(u,function(t){return p.workspace.createExperimentFromStoragePackageAsync(e.destinationWorkspace().WorkspaceId,t.Location)}),d=c.then(h,function(e){return i.pollOnUnpack(e)});d.done(function(n){t.setValue(100);var i="/Home/ViewWorkspace/"+e.destinationWorkspace().WorkspaceId,s=Shell.UI.Navigation.calculateNavigationPath({extension:r.experimentExtensionName,type:"Experiment",name:n.ExperimentId,view:"ViewExperiment"}),o=i+s;t.setTitle(c.format(f.copyExperimentDialogCopyExperimentSucceeded,e.experimentName(),e.destinationWorkspace().FriendlyName)),t.setActions([{text:f.copyExperimentDialogLinkToCopy,class_:"dlwux-icon-behavior-arrow-link",click:function(){window.location.href=o}},Shell.UI.Notifications.Buttons.close(function(){})]),t.setStatus("success"),l.customEvent({key:"CopyExperimentSucceeded",type:"CopyExperiment",data:JSON.stringify({experimentId:e.experimentId,experimentName:e.experimentName(),destinationWorkspaceId:e.destinationWorkspace().WorkspaceId,destinationURL:o})})}).fail(function(n){t.setTitle(c.format(f.copyExperimentDialogCopyExperimentFailed,e.experimentName(),e.destinationWorkspace().FriendlyName,n.message)),t.setActions([Shell.UI.Notifications.Buttons.close(function(){})]),t.setStatus("error"),l.customEvent({key:"CopyExperimentFailed",type:"CopyExperiment",data:JSON.stringify({experimentId:e.experimentId,experimentName:e.experimentName(),destinationWorkspaceId:e.destinationWorkspace().WorkspaceId})})})},e.prototype.pollOnPackage=function(e,t){var n=$.Deferred();return this.pollOnPackageHandler(e,0,n,t),c.when(n.promise())},e.prototype.pollOnPackageHandler=function(e,t,n,r){var i=this;p.workspace.getExperimentStoragePackageAsync(e.ActivityId).done(function(e){var s=e.ItemsComplete===0?0:e.ItemsComplete/(e.ItemsComplete+e.ItemsPending)*80;r.setValue(10+Math.floor(s));if(e.Status==="Pending"){t>16&&n.reject(new Error("Exceeded retry count"));var o=Math.pow(2,t)*50;setTimeout(function(){i.pollOnPackageHandler(e,t+1,n,r)},o)}else e.Status==="Complete"?n.resolve(e):n.reject(new Error("Unknown status returned for package"))}).fail(function(e){return n.reject(e)})},e}();t.CopyExperimentDialogViewModel=d,t.isCurrentWorkspace=v,t.createWorkspaceOption=m});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionEntryValidationEngine",["require","exports","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(){function e(e,t,n,r,i,s){this.errors=e,this.warnings=t,this.workspace=n,this.webServiceGroup=r,this.competitionUri=i,this.competitionTenantId=s,this.linkedExperiment=null,this.webServiceSchema=null,this.submissionAllowedStatus=null}return e}();t.CompetitionEntryValidationContext=s;var o=function(e){function t(t,n){e.call(this),this.errorRules=t,this.warningRules=n}return __extends(t,e),t.prototype.runValidation=function(e,t,n,s){var o=this,u=this.getLinkedExperimentId(e);e.workspace.getExperimentAsync(u).done(function(a){if(!a){s({name:"FetchingLinkedExperimentFailure",message:"Failed to find linked experiment: "+u});return}e.linkedExperiment=a;var f=r.competitionEntrySchemaValidationEnabled()?e.workspace.getCompetitionSchemaDefinitionAsync(e.competitionUri,e.competitionTenantId).done(function(t){e.webServiceSchema=t}):i.succeed(null),l=r.competitionSubmissionAllowedValidationEnabled()?e.workspace.getCompetitionSubmissionAllowedStatusAsync(e.competitionUri,e.competitionTenantId).done(function(t){e.submissionAllowedStatus=t}):i.succeed(null);i.all(f,l).done(function(){o.executeRules(e,t,n)}).fail(function(e){s(e)})}).fail(function(e){s(e)})},t.prototype.getLinkedExperimentId=function(e){var t=e.webServiceGroup,n=t.StagingWebService.ModelPackageId,r=t.ModelPackages.filter(function(e){return e.Id===n})[0];return r.LinkedExperimentId},t.prototype.executeRules=function(e,t,n){var r,i;for(r=0;r<this.errorRules.length;r++)i=this.errorRules[r].runValidation(e),i&&e.errors.push(i);for(r=0;r<this.warningRules.length;r++)i=this.warningRules[r].runValidation(e),i&&e.warnings.push(i);e.errors().length>0||e.warnings().length>0?n():t()},t}(n.Disposable);t.CompetitionEntryValidationEngine=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/Step2ViewModel",["require","exports","../../../TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionEntryValidationEngine","../../../TS/Common/WebServiceGroupUtilities","../../../../DataLabClient/Disposable"],function(e,t,n,r,i){(function(e){e[e.Unstarted=0]="Unstarted",e[e.Validating=1]="Validating",e[e.ValidationFailed=2]="ValidationFailed",e[e.ValidationPassed=3]="ValidationPassed",e[e.Submitting=4]="Submitting",e[e.Submitted=5]="Submitted",e[e.SubmissionFailed=6]="SubmissionFailed",e[e.ErrorEncountered=7]="ErrorEncountered"})(t.SubmissionStatus||(t.SubmissionStatus={}));var s=t.SubmissionStatus,o=function(e){function t(t,n,r,i){var s=this;e.call(this),this.workspace=t,this.webServiceGroup=n,this.competitionUri=r,this.validationEngine=i,this.status=ko.observable(0),this.errors=ko.observableArray(),this.warnings=ko.observableArray(),this.isInProgress=ko.pureComputed(function(){return s.status()===0||s.status()===1}),this.isValidating=ko.pureComputed(function(){return s.status()===1}),this.validationPassed=ko.pureComputed(function(){return s.status()===3&&s.warnings().length===0}),this.validationFailed=ko.pureComputed(function(){return s.status()===7||s.status()===2||s.status()===3&&s.warnings().length>0}),this.onlyWarningsFound=ko.pureComputed(function(){return s.errors().length===0&&s.status()!==7})}return __extends(t,e),t.prototype.startValidation=function(){var e=this;if(this.status()!==0)return;this.status(1);var t=r.getCompetitionTenantId(this.webServiceGroup),i=new n.CompetitionEntryValidationContext(this.errors,this.warnings,this.workspace,this.webServiceGroup,this.competitionUri,t);this.validationEngine.runValidation(i,function(){e.onValidationSucceeded()},function(){e.onValidationFailed()},function(t){e.onError(t)})},t.prototype.onValidationSucceeded=function(){this.status(3)},t.prototype.onValidationFailed=function(){this.errors().length===0?this.status(3):this.status(2)},t.prototype.onError=function(e){this.status(7),this.errors.push({summary:e.name,details:e.message})},t}(i.Disposable);t.Step2ViewModel=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/SubmitCompetitionEntryWizardViewModel",["require","exports","../../../TS/ViewModel/SubmitCompetitionEntryWizard/Step2ViewModel","../../../../DataLabClient/Disposable","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i){var s=function(e){function t(t,n,r){var i=this;e.call(this),this.termAcceptanceViewModel=t,this.step1ViewModel=n,this.step2ViewModel=r,this.onWizardCompleted=ko.observable(!1),this.currentStep=ko.observable(0),this.areNextStepsDisabled=ko.computed(function(){var e=i.currentStep();switch(e){case 0:return!i.termAcceptanceViewModel.isTermAccepted();case 1:return!i.step1ViewModel.isValid();case 2:return i.step2ViewModel.status()!==3;default:return!1}}),this.arePreviousStepsDisabled=ko.computed(function(){return!0}),this.isCompleteButtonEnabled=ko.computed(function(){return i.currentStep()===2&&i.step2ViewModel.status()===3})}return __extends(t,e),t.prototype.onWizardClosing=function(e){return e.completed?(this.onWizardCompleted(!0),i.customEvent({key:"WizardCompleted",type:t.traceEventType})):i.customEvent({key:"WizardCanceled",type:t.traceEventType}),!0},t.prototype.stepActivate=function(e){if(!e||!e.currentStep)return;e.currentStep.id===e.wizard.steps()[0].id&&this.currentStep(0),e.currentStep.id===e.wizard.steps()[1].id&&this.currentStep(1);if(e.currentStep.id===e.wizard.steps()[2].id){this.currentStep(2),this.step2ViewModel.startValidation();return}},t.traceEventType="SubmitCompetitionEntry",t.CompetitionSubmittedTag="ComptitionEntrySubmitted",t}(r.Disposable);t.SubmitCompetitionEntryWizardViewModel=s}),define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionSubmissionUtilities",["require","exports","../../../TS/ViewModel/SubmitCompetitionEntryWizard/SubmitCompetitionEntryWizardViewModel","../../../TS/Common/WebServiceGroupUtilities","../../../../DataLabClient/Contracts/V1/DataContractInterfaces-v1","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){function f(e){if(!e||!e.StagingWebService)return null;var t=e.StagingWebService.ModelPackageId,n=e.ModelPackages.filter(function(e){return e.Id===t});return n.length>0?n[0]:null}function l(e){var t=f(e);return t?t.LinkedExperimentId:null}function c(e,t){var n=l(t);return e.getExperimentAsync(n)}function h(e,t,n,r,i,s,o,a){var f={CompetitionId:t,TenantId:n,UserWebServiceGroupId:r,Description:s,ScoringExperimentId:o},l=u.then(e.startSubmitCompetitionEntryAsync(f,a),function(e){return e});return l}function p(e){switch(e.AllowedStatus.toString()){case i.SubmissionAllowedStatusCode[1]:return s.competitionSubmissionErrorCompetitionEnded;case i.SubmissionAllowedStatusCode[2]:return s.competitionSubmissionErrorCompetitionNotStarted;case i.SubmissionAllowedStatusCode[5]:var t=d(e.TimeToSubmissionAllowed);return u.format(s.competitionSubmissionErrorExceededDailySubmissionLimit,e.SubmissionsToday.toString(),t);case i.SubmissionAllowedStatusCode[3]:return u.format(s.competitionSubmissionErrorExceededTotalSubmissionLimit.toString(),e.TotalSubmissions.toString());case i.SubmissionAllowedStatusCode[6]:var t=d(e.TimeToSubmissionAllowed);return u.format(s.competitionSubmissionErrorInCoolDownPeriod,t);default:return s.competitionSubmissionErrorUnknown}}function d(e){return(new Date(Date.parse("1 1 1970 "+e)+Date.now())).toLocaleString()}function v(e,t){var n=e.message;if(e instanceof a)var r=e,n=p(r.submissionAllowedStatus);else n=s.competitionSubmissionErrorUnknown;var i=u.format(s.competitionSubmissionErrorNotificationDetailsFormat,n);t.setTitle(i),t.setActions([Shell.UI.Notifications.Buttons.close()]),t.setStatus("error"),o.error("submitCompetitionEntryFailed","ExperimentEditor.CompetitionSubmission.CompetitionSubmissionUtilities",JSON.stringify(e))}function m(e,t,r,i,o){t.Tags.push(n.SubmitCompetitionEntryWizardViewModel.CompetitionSubmittedTag);var u=e.updateWebServiceGroupAsync(t.Id,t.Name,t.Description,!1,t.Tags);u.done(function(){c(e,t).done(function(t){var u=t.tags();u.push(n.SubmitCompetitionEntryWizardViewModel.CompetitionSubmittedTag),t.tags(u),e.updateDraftAsync(t).done(function(){i.setTitle(s.competitionSubmissionNotificationSuccessTitle),i.setStatus("success"),i.setActions([{text:s.goToCompetitionSubmissionText,class_:"dlwux-icon-behavior-arrow-link",click:function(){window.location.href=r}},Shell.UI.Notifications.Buttons.close(function(){})]),o&&o()}).fail(function(e){v(e,i)})}).fail(function(e){v(e,i)})}).fail(function(e){v(e,i)})}function g(e,t,n,o,u,f,c){var p=new Shell.UI.Notifications.Progress(s.competitionSubmissionNotificationSubmittingTitle,"active",!0);Shell.UI.Notifications.add(p);var d=r.getCompetitionTenantId(t),g=h(e,o,d,t.Id,t.StagingWebService.Id,n,l(t),c);g.done(function(n){var r=n.SubmissionStatus.toString();if(r===i.EntrySubmissionStatusCode[0])m(e,t,u,p,f);else if(r===i.EntrySubmissionStatusCode[1]){var s=new a(null,null,n.UserSubmissionStatus);v(s,p)}else if(r===i.EntrySubmissionStatusCode[2]){var o=new Error(n.SubmissionFailedReason);v(s,p)}}).fail(function(e){v(e,p)})}function y(e){var t="",n=e.SubmissionsLeftToday+e.SubmissionsToday;if(e.SubmissionsLeftToday<=0){var r=d(e.TimeToSubmissionAllowed);t=u.format(s.competitionSubmissionErrorExceededDailySubmissionLimit,n.toString(),r)}else t=u.format(s.competitionSubmissionInformationDailyLimit,e.SubmissionsToday.toString(),n.toString());return t}function b(e){var t="",n=e.TotalSubmissionsLeft+e.TotalSubmissions;return e.TotalSubmissionsLeft<=0?t=u.format(s.competitionSubmissionErrorExceededTotalSubmissionLimit,n.toString()):t=u.format(s.competitionSubmissionInformationTotalLimit,e.TotalSubmissions.toString(),n.toString()),t}function S(e){return w.indexOf(e.toLowerCase())!==-1}var a=function(){function e(e,t,n){this.name=e,this.message=t,this.submissionAllowedStatus=n}return e}();t.CompetitionEntrySubmissionError=a,t.getStagingWebServiceModelPackage=f,t.getExperimentIdForStagingWebService=l,t.getExperimentForStagingWebServiceAsync=c,t.getErrorSpecificSubmissionStatusMessage=p,t.notifyAndLogOnError=v,t.startSubmitCompetition=g,t.getSubmissionInformationDaily=y,t.getSubmissionInformationTotal=b,t.competitionEnabledRegionWhitelist=window.environment?window.environment.competitionEnabledRegionWhitelist:[];var w=[];_.forEach(t.competitionEnabledRegionWhitelist,function(e){return w.push(e.toLowerCase())});var E="South Central US";w.indexOf(E.toLowerCase())===-1&&w.push(E.toLowerCase()),t.competitionEnabledRegionWhitelist.indexOf(E)===-1&&t.competitionEnabledRegionWhitelist.push(E),t.isSupportedCompetitionRegion=S});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/NotebookNameValidationUtils",["require","exports","./Constants","./Disposable","./LocalizedResources","./Model/Notebook","./Model/UnsavedResource","./Util"],function(e,t,n,r,i,s,o,u){function f(e,t){var r=n.NotebookName,s;return function(n){return e.checkForCollision(n)?u.format(i.assetNameExistsErrorMessgage,r):h(n,t)?u.format(i.assetNameBeingUploadedErrorMessage,r):c(n)?u.format(i.assetNameEmptyErrorMessage,r):(s=l(n))?u.format(i.resourceNameContainsInvalidCharacters,r,s):n.length>o.Constants.maxResourceNameLength?u.format(i.assetNameLengthErrorMessage,r,String(o.Constants.maxResourceNameLength)):null}}function l(e){var t=' / \\ ? : # " < > |',n=/[:\/#\?\\"<>|\t\n\r]/;return n.test(e)?t:null}function c(e){return e=s.simplifyName(e),/^\s*$/.test(e)}function h(e,t){var e=p(e);return u.first(t(),function(t){return t=p(t),e===t},null)!==null}function p(e){return s.simplifyName(e).toLowerCase()}var a=function(e){function t(t){var n=this;e.call(this),this._existingNames=new u.StringSetWithTransform(u.values(t.items()).map(function(e){return e.name()}),p);var i=t.items.subscribe(function(e){n._existingNames.add(e.name())});this.registerForDisposal(new r.DisposableSubscription(i))}return __extends(t,e),t.prototype.checkForCollision=function(e){return this._existingNames.has(e)},t}(r.Disposable);t.NotebookNameCollisionChecker=a,t.createNotebookNameValidator=f,t.checkNotebookNameForIllegalChars=l,t.isNotebookNameEmpty=c}),define("generated/editor/TS/ViewModel/ExperimentEditor/NotebookHelpers",["require","exports","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Contracts/V1/Common/Notebook","../../../../DataLabClient/NotebookNameValidationUtils","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u,a){var f;(function(e){function p(e){var t=new RegExp(h,"g");return e&&(e=e.replace(t,"_")),e}function d(e){var t=n.PythonNotebookSuffix;return e.indexOf(t,e.length-t.length)===-1&&(e+=t),e}function v(e){var t=new RegExp(h);if(o.isNotebookNameEmpty(e))return r.notebookNameWhitespaceError;if(t.test(e)){var n=c.join(", ");return u.format(r.notebookNameIllegalCharacterError,n)}return null}function m(e){typeof Shell!="undefined"&&(e?Shell.UI.Spinner.show():Shell.UI.Spinner.hide())}function g(e,t,o){m(!0),i.featureUsage({featureID:131,groupID:126}),e.Notebook.Name=p(e.Notebook.Name);var f=a.workspace;o=o||window.open("","_blank"),u.addSpinnerToBlankWindow(o),f.createNotebookAsync(e,t).always(function(){}).done(function(e){i.featureUsage({featureID:132,groupID:126,data:e.FamilyId}),f.applicationCache.notebookCache.setItem(e.FamilyId,s.deserializeNotebook(e)),y(e.FamilyId,o),t.stop()}).fail(function(s){t.error(s,n.SystemError,!0),o&&!o.closed&&(o.close(),o=null),m(!1);var a=S(s,r.createNotebookFailed,e.Notebook.Name);u.showErrorNotification(a),s instanceof u.AjaxError&&s.xmlHttpRequest&&s.xmlHttpRequest.status===409&&f.applicationCache.notebookCache.loadNewItems(),i.featureUsage({featureID:133,groupID:126,data:a.details}),i.error("Call to Create new notebook Failed. "+JSON.stringify(e))})}function y(e,t,s){return t=t||window.open("","_blank"),m(!0),i.featureUsage({featureID:128,groupID:126,data:e}),a.workspace.openNotebookAsync(e,s).always(function(){m(!1)}).done(function(n){i.featureUsage({featureID:129,groupID:126,data:e}),t?t.closed||(t.location.href=n,t=null):window.open(n,"_blank")}).fail(function(o){t&&!t.closed&&t!==window&&(t.close(),t=null);var a=S(o,r.openNotebookFailed,e);u.showErrorNotification(a),s&&s.error(o,n.SystemError,!0),i.error("Call to open notebook failed. "+JSON.stringify(e)),i.featureUsage({featureID:130,groupID:126,data:JSON.stringify({notebookID:e,error:a.details})})})}function b(e){var t=a.workspace,n=s.serializeNotebookForUpdate(e);return u.then(t.updateNotebookAsync(e.familyId,n),function(e){var n=s.deserializeNotebook(e);t.applicationCache.notebookCache.setItem(n.familyId,n)},function(t){return i.error("Call to upate notebook failed. "+t.message+" "+JSON.stringify(e.familyId)),t})}function w(e){var t=a.workspace,n=s.serializeNotebookForUpdate(e);return t.updateNotebookAsync(e.familyId,n)}function E(e){e=e.split("-").join("");var t=e.slice(32);return t+e.slice(t.length,32)}function S(e,n){var i=[];for(var s=2;s<arguments.length;s++)i[s-2]=arguments[s];var o="",a="",f=e.message;return e instanceof t&&e.xmlHttpRequest&&(f=f+" "+e.xmlHttpRequest.responseText,e.xmlHttpRequest.status===404&&e.xmlHttpRequest.statusText==="OK"?a=r.notebookServiceUnavailable:e.xmlHttpRequest.status===404?a=r.notebookErrorNotFound:e.xmlHttpRequest.status===409&&(a=r.notebookErrorNameConflict)),i.push(a),o=u.format.apply(null,[n||"{0}"].concat(i)),{title:o,details:f}}function x(e){switch(e){case 0:return l.BlankNotebookTemplate;case 1:return l.ExampleNotebookTemplate;case 2:return l.DatasetNotebookTemplate;case 3:return l.ModuleRunResultsNotebookTemplate}throw new Error("unknown notebook type: "+String(e))}function T(e,t,r){var i=e.match(n.ExperimentIdRegExp)[3],s=E(t);return u.format(n.NotebookParentModulePortFormatString,i,s,r)}function N(e,t,n,r){var i=T(t,n,r);return L(e,i)}function C(e){var t=e.split("-").join("");return u.format(n.NotebookParentDatasetFormatString,t)}function k(e,t){var n=C(t);return L(e,n)}function L(e,t){var n=a.workspace;return u.first(n.applicationCache.notebookCache.items(),function(n){return n.tags&&n.language===e&&n.tags.indexOf(t)!==-1},null)}var t=u.AjaxError,f=n.NotebookType,l=n.NotebookCreationTemplate,c=["#","%","&","+",":","\\","/","*","?",'"',"<",">","|","Tab"],h='[#%&+:\\\\/*?"<>|	]';e.sanitizeNotebookName=p,e.tryAddFileExtension=d,e.validateNotebookName=v,e.createAndOpenNotebook=g,e.openNotebookById=y,e.updateNotebook=b,e.updateNotebookNoCache=w,e.ModuleResultNotebookGuidGenerator=E,e.getErrorMessage=S,e.getNotebookCreationTemplate=x,e.createTagForNotebookFromModulePort=T,e.getNotebookForModulePort=N,e.createTagForNotebookFromDataset=C,e.getNotebookForDataset=k,e.getFirstNotebookWithMatchingTagAndLanguage=L})(f=t.NotebookHelpers||(t.NotebookHelpers={}))});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Dialogs/CopyExperimentFromGalleryDialogViewModel",["require","exports","../ExperimentEditor/CommunityHelpers","../SubmitCompetitionEntryWizard/CompetitionSubmissionUtilities","../../View/DialogView","../ExperimentEditor/NotebookHelpers","../ExperimentEditor/UserWorkspaceHelpers","../../../../DataLabClient/Disposable","../../../../DataLabClient/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function y(t,r,i,o,u,a,f,v){c.featureUsage({featureID:105,groupID:0,data:JSON.stringify({packageUri:i,communityUri:o,destinationWorkspaceId:u.WorkspaceId,locationUri:f,entityType:t})});switch(t){case d.Notebook:Shell.UI.Spinner.show();var m=n.copyGalleryNotebook(i,o,r),g=h.then(m,function(e){return s.NotebookHelpers.openNotebookById(e,window)});return g.always(function(){Shell.UI.Spinner.hide()}).fail(function(e){h.showErrorNotification({title:h.format(l.newNotebookMenuOpenCallFailed,o)}),c.error("Call to open gallery notebook failed. "+o)}),g;case d.Experiment:return n.copyCommunityExperimentToWorkspaceAndNavigateToExperiment(u.WorkspaceId,u.FriendlyName,i,o,null,a,f,v);case d.Module:Shell.UI.Spinner.show();var y=n.importGalleryModule(u.WorkspaceId,i,o,r,!0).always(function(){return Shell.UI.Spinner.hide()});y=h.then2(y,function(e){return e},function(e){var t=n.launchNameConflictDialog(e);return t?h.then2(t,function(e){return e?(Shell.UI.Spinner.show(),n.importGalleryModule(u.WorkspaceId,i,o,r,!0,e).always(function(){return Shell.UI.Spinner.hide()})):null}):e});var b=h.then(y,function(e){return e&&e[1]});return b.done(function(t){t&&e(["../../../DataLabViews/ExperimentView"],function(e){Shell.UI.Spinner.hide();var n=u.WorkspaceId.toLowerCase()===p.workspace.id.toLowerCase();e.navigateToExperiment(t,n?undefined:u.WorkspaceId)})}).fail(function(e){Shell.UI.Spinner.hide(),h.showErrorNotification({title:h.format(l.copyGalleryModuleFailed,o),details:String(e)}),c.error("Call to open gallery module failed. "+o,null,{error:h.errorToSerializableObject(e)})}),b;default:throw c.error("unsupported gallery entity type","copyGalleryEntity",JSON.stringify({entityType:t,galleryUri:o})),new Error("unsupported gallery entity type")}}var d=a.GalleryEntityTypes,v=function(){function e(e,t,n){this.workspace=e,this.displayName=t,this.role=n,this.displayName||(this.displayName=e.FriendlyName),this.role||(this.role="Owner")}return e}();t.WorkspaceWithDisplayName=v;var m=function(){function e(e){var t=e.split(";");this.location=t[0],this.uri=t[1]}return e}();t.LocationWithDisplayName=m;var g=function(){function e(e){var t=this;e===void 0&&(e=""),this.entityType=e,this.updateWorkspaceList=function(){t.loadingWorkspaces(!0),t.workspaces([]);var e;n.workspacePermissionsFoof=="True"&&t.entityType=="notebook"?e=o.UserWorkspacesHelper.getWorkspacesPermissionsFromRegion(t.selectedLocation().location,p.workspace.activeUserId):(e=f.multiGeoNavigationEnabled()?o.UserWorkspacesHelper.getUserWorkspacesFromRegion(t.selectedLocation().location,f.enableArmWorkspaceSharingEnabled()):o.UserWorkspacesHelper.getUserWorkspaces(),e=h.then(e,function(e){var t=[];return _.forEach(e,function(e){t.push({Workspace:e,UserId:null,Role:"Owner"})}),t})),e.done(function(e){t.appendWorkspacesToPermissionsList(e)}).fail(function(e){c.error("Failed to get workspace list: "+String(e),undefined,JSON.stringify({stack:e&&e.stack}))}).always(function(){t.loadingWorkspaces(!1)})},this.workspaces=ko.observableArray([]),this.selectedLocation=ko.observable({location:null,uri:null}),this.locations=null,this.loadingWorkspaces=ko.observable(!1),this.locations=ko.observableArray(n.multiGeoRegionsList.map(function(e){return new m(e)})),this.selectedLocation=ko.observable(this.locations().filter(function(e){return e.location===n.multiGeoRegion})[0]),this.updateWorkspaceList(),this.workspaceInfoAvailable=ko.computed(function(){return t.workspaces().length>0}),this.destinationWorkspace=ko.observable(null),this.selectedLocation.subscribe(function(){t.updateWorkspaceList()})}return e.prototype.appendWorkspacesToPermissionsList=function(e){var t=this;e.forEach(function(n){var r=n.Workspace.WorkspaceId===p.workspace.id,i;e.length>1&&r?i=h.format(l.workspaceWithCurrentLabel,n.Workspace.FriendlyName):i=n.Workspace.FriendlyName;var s=new v(n.Workspace,i,n.Role);t.workspaces.push(s),r&&t.destinationWorkspace(s)})},e}();t.WorkspaceSelectorViewModel=g,t.copyGalleryEntity=y;var b=function(e){function t(t,n,s,o,a,f){var c=this;a===void 0&&(a=null),f===void 0&&(f=null),e.call(this),this.packageUri=s,this.communityUri=o,this.competitionUri=a,this.competitionTenantId=f,this.isWarningAcknowledged=ko.observable(!1),this._selectionStateChanged=new ko.subscribable,this._entityType=t,this._entityId=n,this.workspaceSelector=new g(t);var p=this.isCompetitionSpecific();t===d.Notebook?this.title=l.copyNotebookFromGalleryConfirmationTitle:t===d.Module?this.title=l.copyModuleFromGalleryConfirmationTitle:p?this.title=l.copyCompetitionExperimentFromGalleryConfirmationTitle:this.title=l.copyExperimentFromGalleryConfirmationTitle,this.showWarning=ko.computed(function(){if(!p)return!1;var e=c.workspaceSelector.selectedLocation();return e&&!r.isSupportedCompetitionRegion(e.location)&&!c.workspaceSelector.loadingWorkspaces()&&c.workspaceSelector.workspaceInfoAvailable()}),this.warningMessage=ko.pureComputed(function(){return p?h.format(l.workspaceSelectorRestrictOneRegionForCompetitionWarning,_(r.competitionEnabledRegionWhitelist).join(",").toString()):""}),p&&(this.registerForDisposal(new u.DisposableSubscription(this._selectionStateChanged.subscribe(function(){i.DialogView.enableOk(c.canBeAccepted())}))),this.registerForDisposal(new u.DisposableSubscription(this.isWarningAcknowledged.subscribe(function(){c.clearInitViewStateTimeout(),c._selectionStateChanged.notifySubscribers()}))),this.registerForDisposal(new u.DisposableSubscription(this.workspaceSelector.loadingWorkspaces.subscribe(function(){c.clearInitViewStateTimeout(),c.isWarningAcknowledged(!1),c._selectionStateChanged.notifySubscribers()}))))}return __extends(t,e),t.prototype.dismissed=function(e){var t=this.workspaceSelector.selectedLocation(),r=this.workspaceSelector.destinationWorkspace();if(e.accepted){var i=f.multiGeoNavigationEnabled()&&t.location!==n.multiGeoRegion,s=r.workspace.WorkspaceId.toLowerCase()!==p.workspace.id.toLowerCase(),o=this._entityType===a.GalleryEntityTypes.Notebook,u=this._entityType===a.GalleryEntityTypes.Module;if(i||s&&(o||u)){var l=t.uri+"/Home/ViewWorkspace/"+r.workspace.WorkspaceId+h.format("?unpackConfirmation=false&packageUri={0}&communityUri={1}&entityType={2}&entityId={3}",encodeURIComponent(this.packageUri),encodeURIComponent(this.communityUri),encodeURIComponent(this._entityType),encodeURIComponent(this._entityId));this.competitionUri&&this.competitionTenantId&&(l+=h.format("&competitionUri={0}&competitionTenantId={1}",encodeURIComponent(this.competitionUri),encodeURIComponent(this.competitionTenantId))),window.location.href=l}else y(this._entityType,this._entityId,this.packageUri,this.communityUri,r.workspace,this.competitionUri,t.uri,this.competitionTenantId)}else c.customEvent({key:"CopyExperimentFromGalleryDialogClosed",type:"AllExperimentsView"})},t.prototype.canBeAccepted=function(){return this.workspaceSelector.workspaceInfoAvailable()&&!this.workspaceSelector.loadingWorkspaces()&&(!this.isCompetitionSpecific()||!this.showWarning()||this.isWarningAcknowledged())},t.prototype.viewBound=function(){var e=this;this.isCompetitionSpecific()&&(this._initViewStateTimeout=setTimeout(function(){i.DialogView.enableOk(e.canBeAccepted())},300))},t.prototype.clearInitViewStateTimeout=function(){this._initViewStateTimeout&&(clearTimeout(this._initViewStateTimeout),this._initViewStateTimeout=undefined)},t.prototype.isCompetitionSpecific=function(){return f.competitionExperimentSupportEnabled()&&!!this.competitionTenantId&&!!this.competitionUri},t}(u.Disposable);t.CopyExperimentFromGalleryDialogViewModel=b}),define("generated/editor/TS/ViewModel/ExperimentEditor/CopyExperimentHelpers",["require","exports","../../../TS/ViewModel/ExperimentEditor/Help","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){function o(e){var t=$.Deferred();return e.done(function(e){t.resolve(e.storageUsedByDatasets)}).fail(function(e){t.reject(e)}),t.promise()}function u(e){var t=$.Deferred(),u,a,f,l=s.isPromise(e)?e:$.Deferred().resolve(e).promise(),c;return l.done(function(e){c=e}),n.environment.copyToWorkspaceDatasetStorageLimit>0?o(l).done(function(e){e>n.environment.copyToWorkspaceDatasetStorageLimit?(t.reject(),u=s.format(r.copyExperiment_LargeDataset_Title,s.formatDataSize(n.environment.copyToWorkspaceDatasetStorageLimit)),f=new Shell.UI.Notifications.Notification(u,"error"),f.setActions([Shell.UI.Notifications.Buttons.close()]),Shell.UI.Notifications.add(f),i.customEvent({key:"CopyExperimentExceedsMaxDatasetStorage",type:"CopyExperimentDialogViewModel",experimentID:c.experimentIdForLogging,data:JSON.stringify({spaceUsed:e})})):t.resolve()}).fail(function(e){u=s.format(r.copyExperiment_ValidationFailure_Title),a=s.format(r.copyExperiment_ValidationFailure_Details,e.message),f=new Shell.UI.Notifications.Notification(u,"error"),f.setDetailsText(a),f.setActions([Shell.UI.Notifications.Buttons.close()]),Shell.UI.Notifications.add(f),i.error("CopyExperimentValidationFailed","CopyExperimentDialogViewModel",JSON.stringify({experimentId:c.experimentId(),message:e.message})),t.reject()}):t.resolve(),t.promise()}t.validateForCopyAsync=u}),define("generated/editor/DataLabViews/ListViewHelper",["require","exports","../TS/Global","../../DataLabClient/LocalizedResources","../../DataLabClient/Util"],function(e,t,n,r,i){function s(e,t){t===void 0&&(t=!1);var n=$("<ol />");return e.forEach(function(e){var i=$("<span />").text(e.name);if(t){var s=$("<a />",{href:e.urlHash}).text(r.link);i.append(" [").append(s).append("]")}n.append($("<li />").append(i))}),n}function o(e,t){var s=e.error.message;if(e.error instanceof i.AjaxError){var o=e.error.xmlHttpRequest.responseText;s=o||s}var u="",a="";switch(t){case n.ResourceType.Experiment:u=r.errorDeletingExperiment,a=e.item.Description;break;case n.ResourceType.Notebook:u=r.errorDeletingNotebook,a=e.item.Name;break;default:}return i.format(u,a,s)}t.createListOfDependants=s,t.formatListItemDeleteError=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/Common/SharedSpinner",["require","exports","../../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(){e.call(this),this._numberOfUsers=0,this._disposed=!1}return __extends(t,e),t.create=function(e){var n=new t;return e.registerForDisposal(n),n},t.prototype.dispose=function(){this._numberOfUsers>0&&!this._disposed&&Shell.UI.Spinner.hide(),this._disposed=!0,e.prototype.dispose.call(this)},t.prototype.showFor=function(e){var t=this;if(this._disposed)return;e.state()==="pending"&&(this.start(),e.always(function(){t.end()}))},t.prototype.start=function(){if(this._disposed)return;this._numberOfUsers+=1,this._numberOfUsers===1&&Shell.UI.Spinner.show()},t.prototype.end=function(){if(this._disposed)return;this._numberOfUsers-=1,this._numberOfUsers===0&&Shell.UI.Spinner.hide()},t}(n.Disposable);t.SharedSpinner=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/WazGridAdapter",["require","exports","../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t,n,r){var i=this;r===void 0&&(r=!0),e.call(this),this.options=t,this.renderArea=n,this._grid=null,this.checkboxColEnabledFormat="<input type='checkbox' class='rowCheckbox' />",this.checkboxColDisabledFormat="<input type='checkbox' class='rowCheckbox' disabled='true' />";if(!this.options)throw new Error("options are not provided for creating WazGrid");if(!this.renderArea)throw new Error("renderArea is not providded for creating WazGrid");this.selectedItems=ko.observableArray([]),this.isSingleItemSelected=ko.pureComputed(function(){return i.selectedItems.length===1});if(this.options.includeMultiselectCheckbox){var s={name:"",field:"Checkbox",formatter:function(e,t){return i.formatCheckbox(e,t)},cssClass:"checkboxColumn",sortable:!1,filterable:!1};this.options.columns=$.merge([s],this.options.columns)}if(this.options.rowSelect){var o=this.options.rowSelect;this.options.rowSelect=function(e,t){i.rowSelect(e,t),o(e,t)}}else this.options.rowSelect=function(e,t){i.rowSelect(e,t)};r&&this.createGrid()}return __extends(t,e),t.prototype.dispose=function(){this.renderArea=null,this._grid=null,e.prototype.dispose.call(this)},t.prototype.createGrid=function(){var e=this;this._grid||(this._grid=this.renderArea.wazDataGrid(this.options),this._grid.on("click","tbody .checkboxColumn",function(t){e._grid.wazDataGrid("option","multiselect",!0)}),this.options.extendWazGrid&&this.options.extendWazGrid(this._grid))},t.prototype.formatCheckbox=function(e,t){return this.options.enableMultiselectCheckbox?this.options.enableMultiselectCheckbox(e,t)?this.checkboxColEnabledFormat:this.checkboxColDisabledFormat:this.checkboxColEnabledFormat},t.prototype.rowSelect=function(e,t){if(!this._grid)return;if(this.options.includeMultiselectCheckbox){this._grid.wazDataGrid("option","multiselect",!1);var n=this._grid.find(".rowCheckbox"),r=this._grid.find("tbody.fx-grid-groupdata tr").toArray().map(function(e){return $.view(e).data.rowMetadata}),i=(t.unselected||[]).map(function(e){return r.indexOf(e)});t.unselected&&t.unselected.length===1&&!t.selected&&n[i[0]].checked&&$.observable(t.unselected[0]).setProperty("selected",!0),t.selected&&i.push(r.indexOf(t.selected)),i.filter(function(e){return e>=0&&e<n.length}).forEach(function(e){r[e].selected||(n[e].checked=r[e].selected)}),n.filter(function(e){return n[e].checked}).length>0&&r.filter(function(e,t){return!n[t].checked&&r[t].selected}).forEach(function(e){$.observable(e).setProperty("selected",!1)})}var s=this._grid.wazDataGrid("getSelectedRows");this.selectedItems(s.map(function(e){return e.dataItem}))},t}(n.Disposable);t.WazGridAdapter=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/AllExperimentsView",["require","exports","../DataLabViews/AddToProjectDialogView","../TS/ViewModel/ExperimentEditor/CommunityHelpers","../TS/ViewModel/Dialogs/CopyExperimentDialogViewModel","../TS/ViewModel/Dialogs/CopyExperimentFromGalleryDialogViewModel","../TS/ViewModel/ExperimentEditor/CopyExperimentHelpers","../TS/View/DialogViewFactories","../DataLabViews/ExperimentListView","../DataLabViews/ExperimentView","../TS/Global","../DataLabViews/ListViewHelper","../DataLabViews/RecentWorkView","../TS/Common/ProjectUtilities","../TS/Common/SharedSpinner","../TS/ViewModel/ExperimentEditor/UserWorkspaceHelpers","../DataLabViews/WazGridAdapter","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Logging/Performance","../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../DataLabClient/Trial","../../DataLabClient/Util","../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){function A(){Shell.UI.Navigation.navigate({extension:f.experimentExtensionName,type:"ListExperiments",name:""})}var k=g.GalleryEntityTypes;t.azureMLDomainSuffix="";var L=function(e){function x(t,n,r,i,s){var o=this;s===void 0&&(s=!1),e.call(this),this.renderThumbnail=!0,this._renderArea=t,this._data=[],this.listedExperiments=[],this._workspace=n,this._client=r,this._userName=i,this._samplesOnly=s,this.pageLoaded=ko.observable(!1),this._sharedSpinner=d.SharedSpinner.create(this),this.registerForDisposal(new y.DisposableSetHTML(this._renderArea.get(0),ExperimentEditorTemplates._editorSurfaceMarkup+ExperimentEditorTemplates._allExperimentsMarkup)),this.enableMultiselectCheckbox=function(e,t){return t.rowMetadata.dataItem.ExperimentId.split(".")[0]===o._workspace.id};var u=[{name:"<div class='icon'></div>",field:"Tags",formatter:x.formatExperimentSource,width:x._GRID_COLUMN_WIDTHS.Source,cssClass:"iconColumn"},{name:w.experimentGridHeaderName,field:"Description",sorted:s?"ascending":undefined,type:"navigationLink",navigationField:"ExperimentId",width:x._GRID_COLUMN_WIDTHS.Description},{name:w.experimentGridHeaderCreator,field:"Creator",width:x._GRID_COLUMN_WIDTHS.Creator},{name:w.experimentGridHeaderStatus,field:"StatusCode",formatter:a.formatExperimentStatusCode,width:x._GRID_COLUMN_WIDTHS.Status},{name:w.experimentGridHeaderModificationTime,field:"CreationTime",formatter:N.formatDate,sorted:s?undefined:"descending",sortFormatter:a.dateTimeSortFormatter,width:x._GRID_COLUMN_WIDTHS.Date}];s||(u=p.appendProjectColumn(u,x._GRID_COLUMN_WIDTHS.Project)),this._gridAdapterOptions={columns:u,data:this._data,selectable:!0,selectFirstRowByDefault:!0,multiselect:!1,includeMultiselectCheckbox:!0,enableMultiselectCheckbox:function(e,t){return o.enableMultiselectCheckbox(e,t)},resizable:!0,noRows:w.allExperimentsNoRows,rowSelect:function(e,t){return o.rowSelect(e,t)},pagerOptions:{pageSize:x._PAGE_SIZE},filterQueryDelay:x._GRID_SEARCH_DELAY,extendWazGrid:function(e){e.on("click",".waz-grid-navigation-link a",function(e){var t=$(e.target).closest("tr").view().data;if(t.rowMetadata){var n=t.rowMetadata.dataItem.ExperimentId;E.customEvent({key:"experimentList",type:"OpeningExperiment",experimentID:n})}})}},this._gridAdapter=new m.WazGridAdapter(this._gridAdapterOptions,$(this._renderArea).find("#grid"),!1),this.selectedItems=this._gridAdapter.selectedItems,this.itemsSelectedMessage=ko.computed(function(){return N.format(w.experimentListItemsSelectedMessage,o._gridAdapter.selectedItems().length.toString())}),this._selectedExperiment=ko.observable(),this.thumbnail=ko.observable(),this.loading=ko.observable(!1),this.registerForDisposal(new y.DisposableSubscription(this._selectedExperiment.subscribe(function(e){o._previousSelectedExperiment=e},null,"beforeChange"))),this.registerForDisposal(new y.DisposableSubscription(this._selectedExperiment.subscribe(function(e){if(!e)o.thumbnail(null),o._getSelectedExperimentPromise=null;else if(e!==o._previousSelectedExperiment){E.featureUsage({featureID:33,groupID:0,experimentID:e.ExperimentId}),o.loading(!0);var t=function(){cdm.currentActiveItem===o&&o.loading(!1)},n=e.Description;o._getSelectedExperimentPromise=N.whenTrue(o._workspace.applicationCache.allPrefetched,o).pipe(function(){return o._workspace.getExperimentAsync(e.ExperimentId)},t),o._getSelectedExperimentPromise.done(function(t){if(cdm.currentActiveItem===o&&o._selectedExperiment()===e&&o._renderArea)try{var n=new h.ExperimentThumbnail(t,o._workspace);o.registerForDisposal(n),o.thumbnail(n),o.fitSvg()}catch(r){E.exception(r,"Preview of experiment failed","AllExperimentsView.constructor",{id:e.ExperimentId})}}).fail(function(e){o._renderArea&&e instanceof N.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status===404&&o._handleMissingExperiment(e,n)}).always(t)}o._previousSelectedExperiment=null})));var f=this._renderArea.get(0);N.checkForExistingKOBindings(f),E.info("applying bindings",null,JSON.stringify({viewModel:"experiments"})),this.registerForDisposal(new y.DisposableKOApplyBindings(this,f)),cdm.setActiveItem(this),this.registerForDisposal(new y.DisposableEventListener(window,"resize",function(){o.thumbnail()&&o.fitSvg()}));if(b.enableProjectBasedAssetsGroupingEnabled()){var l=this._workspace.projectCache.cacheUpdated.subscribe(function(){o._populateExperimentList(o.listedExperiments)});this.registerForDisposal(new y.DisposableSubscription(l))}}return __extends(x,e),x.formatExperimentSource=function(e){var t="Unknown";if(b.competitionExperimentSupportEnabled()&&e){var n=e.filter(function(e){return l.CompetitionConstants.CompetitionUrlTagSearchRegex.test(e)});n&&n.length>0&&(t="Competition")}return"<div class='experiment-source iconColumn'><div class='icon "+t+"'></div></div>"},x.prototype.refreshExperimentListFromService=function(e){var t=this,n={includeNonLeaf:!1,includeArchived:!1},r=this._workspace.listExperimentsAsync(n,e);N.then(r,function(n){cdm.currentActiveItem===t&&(e&&setTimeout(function(){e.stop()},0),S.intervalEnd(),t._samplesOnly?(t.listedExperiments=$.grep(n,function(e){return t._isGlobalWorkspaceId(e.ExperimentId.split(".")[0])},!1),t.listedExperiments=t.listedExperiments.filter(function(e){return e.Description===g.GuidedExperimentDescription?!1:!0})):t.listedExperiments=$.grep(n,function(e){return t._isUserWorkspaceId(e.ExperimentId.split(".")[0])},!1),t._populateExperimentList(t.listedExperiments),t._gridAdapter.createGrid(),t.pageLoaded(!0))}),this._sharedSpinner.showFor(r)},x.prototype.refreshFromService=function(e){var t=this;this.refreshExperimentListFromService(e),this._workspace.applicationCache.allPrefetched()||this._workspace.applicationCache.prefetch(),this._workspace.initialIntroMessageComplete.done(function(){setTimeout(function(){t.handleExperimentUnpackIfNecessary()},0)})},x.prototype.handleExperimentUnpackIfNecessary=function(){var e=window.location.href,n=N.getQueryParamValueAndRemoveIfPresent("unpackConfirmation"),i=N.getQueryParamValueAndRemoveIfPresent("packageUri"),o=N.getQueryParamValueAndRemoveIfPresent("communityUri"),a=b.competitionExperimentSupportEnabled()?N.getQueryParamValueAndRemoveIfPresent("competitionUri"):null,f=b.competitionExperimentSupportEnabled()?N.getQueryParamValueAndRemoveIfPresent("competitionTenantId"):null,l=N.getQueryParamValueAndRemoveIfPresent("entityId")||r.getEntityIdFromCommunityUri(o),c=N.getQueryParamValueAndRemoveIfPresent("entityType")||k.Experiment;c=c.toLowerCase();var h=new RegExp(t.azureMLDomainSuffix+"$"),p=$("<a>",{href:document.referrer})[0],d=p.hostname,m="";environment.possibleGalleryBaseUrls.forEach(function(e){var t=$("<a>",{href:e})[0],n=t.hostname.replace(/\./g,"\\.");m&&(m+="|"),m+="^(https?://)?"+n});var g=new RegExp(m,"i");if(i&&o){var y=T.isWorkspaceTypeAnonymous()||n==="false"&&d.match(h);i=decodeURIComponent(i),o=decodeURIComponent(o),a=a?decodeURIComponent(a):null,f=f?decodeURIComponent(f):null;if(!g.test(o)){E.error("invalid community uri: "+o);return}if(c===k.Notebook&&!b.jupyterNotebooksInGalleryEnabled()){E.error("opening gallery notebook with foof disabled");return}if(c===k.Module&&!b.openModuleFromGalleryEnabled()){E.error("opening gallery module with foof disabled");return}if(y){var w=s.copyGalleryEntity(c,l,i,o,{WorkspaceId:C.workspace.id,FriendlyName:C.workspace.friendlyName},a,null,f);this._sharedSpinner.showFor(w)}else{window.__unpacking=!0;var S=v.UserWorkspacesHelper.getUserWorkspaces().done(function(){var e=new s.CopyExperimentFromGalleryDialogViewModel(c,l,i,o,a,f);E.featureUsage({featureID:209,groupID:105,data:{communityUri:o,competitionUri:a}}),u.CopyExperimentFromGallery.show(e)});this._sharedSpinner.showFor(S)}}},x.prototype.setCommands=function(){var e=this;if(!this._samplesOnly&&this._renderArea){this.deleteCommand=new Shell.UI.Commands.Command(w.deleteItem,Shell.UI.Icons["delete"],this.deleteConfirmation.bind(this),null,!0),Shell.UI.Commands.add([this.deleteCommand]);if(b.copyExperimentAcrossWorkspaceEnabled()){this.copyCommand=new Shell.UI.Commands.Command(w.copyExperimentCommandName,Shell.UI.Icons.copy,this.copyDialog.bind(this),null,!0);var t=this.copyCommand;v.UserWorkspacesHelper.getUserWorkspaces().done(function(n){n.length>1&&e.copyCommand===t&&e._gridAdapter&&(e.copyCommand.setDisabled(!e._gridAdapter.isSingleItemSelected()),Shell.UI.Commands.add([e.copyCommand]))}).fail(function(){})}b.enableProjectBasedAssetsGroupingEnabled()&&(this.addToProjectCommand=new Shell.UI.Commands.Command(w.AddToProjectCommand,Shell.UI.Icons.addToProject,function(){var t=e._gridAdapter.selectedItems().map(function(e){return{assetType:0,id:e.ExperimentId}});n.openAddToProjectDialogWithMultipleAssets(e._workspace,t)},null,!1),Shell.UI.Commands.add([this.addToProjectCommand]))}},x.prototype.dispose=function(){this._renderArea=null,this._gridAdapter.dispose(),this._gridAdapter=null,e.prototype.dispose.call(this)},x.isDeleteBlockedByDependencies=function(e){if(e.error instanceof N.AjaxError){var t=e.error;return t.xmlHttpRequest.status===409}return!1},x.formatExperimentDeleteError=function(e){return x.isDeleteBlockedByDependencies(e)?N.format(w.cantDeleteExperimentPartOfAWebService,e.item.Description):c.formatListItemDeleteError(e,l.ResourceType.Experiment)},x.prototype.refreshFromLocal=function(e){this._populateExperimentList(e)},x.prototype._populateExperimentList=function(e){var t=this;$.observable(this._data).refresh(e.map(function(e){return{ExperimentId:e.ExperimentId,Description:e.Description,Tags:e.Tags,Creator:e.Creator,CreationTime:e.Status.CreationTime,StatusCode:e.Status.StatusCode,etag:e.Etag,Project:t._workspace.getProjectListForAsset(e.ExperimentId),type:f.ExperimentType.name}}))},x.prototype.copyDialog=function(){var e=this;if(this._gridAdapter.selectedItems().length===0)return;o.validateForCopyAsync(this._getSelectedExperimentPromise).done(function(){if(cdm.getActiveItem()!==e)return;var t=e._gridAdapter.selectedItems()[0],n=new i.CopyExperimentDialogViewModel(t.Description,t.ExperimentId);E.featureUsage({featureID:210,groupID:81,data:{experimentId:t.ExperimentId}}),u.CopyExperiment.show(n)})},x.prototype.deleteConfirmation=function(){var e=this,t=$("<div />",{"class":"dependants-list"}),n=this._gridAdapter.selectedItems(),r=n.map(function(e){return{name:e.Description}});t.append(c.createListOfDependants(r));var i=n.length>1?N.format(w.confirmDeleteSelectedExperiments,n.length.toString()):w.confirmDeleteSelectedExperiment,s=new Shell.UI.Notifications.Confirmation(i,"active");s.setDetailsUseHtml(!0),s.setDetailsText(t.get(0).outerHTML),s.setActions([new Shell.UI.Notifications.Buttons.yes(function(){E.customEvent({key:"DeleteSelectedExperimentYes",type:"AllExperimentsView",data:JSON.stringify(n)}),e.delete(n)}),new Shell.UI.Notifications.Buttons.no(function(){E.customEvent({key:"DeleteSelectedExperimentNo",type:"AllExperimentsView"}),Shell.UI.Notifications.remove(s)})]),Shell.UI.Notifications.add(s)},x.prototype.delete=function(e){var t=this,n=[];e.forEach(function(e){n.push(e),N.first(t.listedExperiments,function(n,r){return t.listedExperiments[r].ExperimentId===e.ExperimentId?(t.listedExperiments.splice(r,1),!0):!1},null)});var r=[],i=[];n.forEach(function(e){var n=t._workspace.deleteExperimentAndAncestorsAsync(e.ExperimentId,e.etag);n.fail(function(t){i.push({item:e,error:t})}),n=N.then(n,$.noop,function(e){return N.when(null)}),r.push(n)});var s=$.when.apply($,r).done(function(){if(i.length>0){var e=n.length>1?N.format(w.failedToDeleteExperiments,i.length.toString(),n.length.toString()):w.failedToDeleteExperiment,t=new Shell.UI.Notifications.Notification(e,"error");t.setActions([Shell.UI.Notifications.Buttons.ok()]);var r=$("<ul/>").addClass("bound-height");i.map(function(e){return x.formatExperimentDeleteError(e)}).forEach(function(e){$("<li/>").text(e).appendTo(r)}),t.setDetailsUseHtml(!0),t.setDetailsText(r.get(0).outerHTML),Shell.UI.Notifications.add(t)}}).always(function(){cdm.getActiveItem()===t&&(t._gridAdapter.selectedItems.removeAll(),i.length>0?t.refreshFromService():t.refreshFromLocal(t.listedExperiments))});this._sharedSpinner.showFor(s)},x.prototype._isGlobalWorkspaceId=function(e){return e&&e!==this._workspace.id},x.prototype._isUserWorkspaceId=function(e){return e&&e===this._workspace.id},x.prototype.setPreviewMinimumHeight=function(){var e=$(x._PREVIEW_PANE_ID),t=e.offset();if(t){var n=$("#aux-body"),r=100,i=$(window).height()-t.top-r;i=Math.max(i,0),e.css("min-height",i.toString()+"px")}},x.prototype.fitSvg=function(){if(!this._renderArea)return;var e=$(this._renderArea).find(x._SVG_CONTAINER_ID);if(e.length>0){this.setPreviewMinimumHeight();var t=e.find("svg"),n=t.width(),r=t.height(),i=t.find("g");if(i.length>0&&n>0&&r>0){var s=Shell.Utilities.getBBoxOrDefaultSVGRect(i[0]);if(s&&s.width&&s.height){var o=this.computeShrinkToFitViewBox(n,r,s,x._SVG_MAX_ZOOM_IN_FACTOR);t[0].setAttribute("viewBox",o)}}}},x.prototype.previewExperiment=function(e){this._selectedExperiment(e)},x.prototype.computeShrinkToFitViewBox=function(e,t,n,r){var i=n.x,s=n.y,o=n.width,u=n.height,a=Math.min(e/o,t/u);if(a>r){var f=a/r;o*=f,u*=f,i-=(o-n.width)/2,s-=(u-n.height)/2}return i.toString()+" "+s+" "+o+" "+u},x.prototype.rowSelect=function(e,t){var n=this._gridAdapter.selectedItems();this.deleteCommand&&this.deleteCommand.setDisabled(n.length===0),this.copyCommand&&this.copyCommand.setDisabled(n.length!==1),this.addToProjectCommand&&this.addToProjectCommand.setDisabled(n.length===0||n.some(function(e){return e.Project.length!==0})),n.length===1?this.previewExperiment(n[0]):this.previewExperiment(null)},x.prototype._handleMissingExperiment=function(e,t){var n=this,r=N.format(w.ErrorNamedExperimentNotFound,t),i=new Shell.UI.Notifications.Confirmation(r,"active");i.setActions([Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(i),n._renderArea&&n.refreshExperimentListFromService()})]),Shell.UI.Notifications.add(i),E.error("experiment not found","AllExperimentsView",e&&e.message)},x._SVG_CONTAINER_ID="#thumbnailContainer",x._PREVIEW_PANE_ID="#previewPane",x._SVG_MAX_ZOOM_IN_FACTOR=1,x._PAGE_SIZE=20,x._GRID_COLUMN_WIDTHS={Source:"",Description:"",Creator:"",Status:"",Date:"",Project:"",Button:""},x._GRID_SEARCH_DELAY=160,x}(y.Disposable);t.AllExperimentsView=L,t.navigateToExperimentList=A});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/View/ExperimentEditorControl",["require","exports","../../../TS/ViewModel/ExperimentEditor/Animation","../../../TS/View/CoordinateHelper","../../../TS/Global","../../../TS/Common/MouseCapture","../../../TS/ViewModel/ExperimentEditor/XEStateMachine","../../../../DataLabClient/Disposable","../../../../DataLabClient/Logging/Logging","../../../TS/ViewModel/ExperimentEditor/Entity"],function(e,t,n,r,i,s,o,u,a,f){var l;(function(e){e.ModuleFromPaletteAnimationDuration=350,e.AnimatedZoomDuration=400,e.InitialZoomToFitYOffSet=50,e.NumberOfCacheLines=50})(l||(l={}));var c=function(){function e(e,t,n,r){this._svgTransformElement=e,this._svgRoot=t,this._coordinateHelper=n,this._overlayDivs=r}return Object.defineProperty(e.prototype,"svgTransformElement",{get:function(){return this._svgTransformElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"svgRoot",{get:function(){return this._svgRoot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinateHelper",{get:function(){return this._coordinateHelper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlayDivs",{get:function(){return this._overlayDivs},enumerable:!0,configurable:!0}),e}(),h=function(e){function t(t,n){var i=this;e.call(this),this.viewModel=n;if(!t)throw new Error("Experiment editor control must have a div for its view.");this.rootContainerDiv=t,this.registerForDisposal(new u.DisposableSetHTML(this.rootContainerDiv,ExperimentEditorTemplates._editorSurfaceV2Markup)),this.experimentCanvasDiv=this.rootContainerDiv.querySelector(".experimentEditorContainer");if(!this.experimentCanvasDiv)throw new Error("Experiment editor control's root container div is missing experiment editor container");this.registerForDisposal(new u.DisposableKOApplyBindings(n,this.experimentCanvasDiv)),this.canvasEventDiv=this.experimentCanvasDiv.querySelector(".customElements");var s=this.experimentCanvasDiv.querySelector("svg");if(s===null)throw new Error("The required root <svg> element does not exist");var o=s.querySelector("g");if(o===null)throw new Error("The required root <svg><g> element does not exist");this.registerForDisposal(new u.DisposableSubscription(n.needsAnimationToNode.subscribe(function(e){i.animateToGraphNode(e)}))),this.viewModel.domainCoordinatesHelper=this;var a=this.experimentCanvasDiv.querySelectorAll(".xe-overlay"),f=function(){return i.getViewDimensions()},l=new r.CoordinateHelper(s,f,o);this.initOnly=new c(o,s,l,a),this.setupEventHandlers(this.canvasEventDiv)}return __extends(t,e),t.prototype.getPanLimits=function(e){throw e===void 0&&(e=1),"to be implemented"},t.prototype.paletteDragStart=function(e,t){this.viewModel.paletteDragStart(t)},t.prototype.paletteDragMoved=function(e){e.preventDefault();var t=this.getViewDimensions(),n=this.initOnly.coordinateHelper.clientToDomainCoordinates(e.clientX,e.clientY);e.clientX>=t.x&&e.clientY>=t.y&&e.clientX<t.x+t.width&&e.clientY<t.y+t.height?this.isDraggingNewEntity===!1?(this.isDraggingNewEntity=!0,this.viewModel.paletteDragEnter(n)):this.viewModel.paletteDragMove(n):this.paletteDragCancel()},t.prototype.paletteDragEnd=function(e){this.isDraggingNewEntity=!1,this.viewModel.paletteDragEnd();var t=this.initOnly.svgTransformElement.getCTM(),n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";for(var r=0;r<this.initOnly.overlayDivs.length;r++)$(this.initOnly.overlayDivs.item(r)).css("-webkit-transform",n),$(this.initOnly.overlayDivs.item(r)).css("transform",n),$(this.initOnly.overlayDivs.item(r)).css("-ms-transform",n),$(this.initOnly.overlayDivs.item(r)).css("-moz-transform",n)},t.prototype.paletteDragCancel=function(){this.viewModel.paletteDragLeave(),this.isDraggingNewEntity=!1},t.prototype.getViewDimensions=function(){var e=null;try{e=this.experimentCanvasDiv.getBoundingClientRect()}catch(t){e=null,a.customEvent({key:"ExceptionTelemetry",type:"getBoundingClientRectThrewException",data:JSON.stringify(t)})}var n={x:e?e.left:0,y:e?e.top:0,width:this.experimentCanvasDiv.clientWidth,height:this.experimentCanvasDiv.clientHeight},r=document.querySelector(".experiment-header");return r&&(n.height-=r.clientHeight),n},Object.defineProperty(t.prototype,"viewCenter",{get:function(){var e=this.getViewDimensions();return{x:e.x+e.width/2,y:e.y+e.height/2,matrixTransform:null}},enumerable:!0,configurable:!0}),t.prototype.addEntityToCenter=function(e,t){var r=this,i=e.id(),s=this.viewCenter,o=this.initOnly.coordinateHelper.clientToDomainCoordinates(t.clientX,t.clientY),u=this.viewModel.createFunctionNodeViewModel(i,o.x,o.y),a=this.initOnly.coordinateHelper.clientToDomainCoordinates(s.x-u.width()/2,s.y-u.height()/2);a=this.viewModel.calculatePlacement(a);var f=new Object;f.x={start:o.x,end:a.x},f.y={start:o.y,end:a.y};var c=new n.Animation(function(e){u.x(e.x),u.y(e.y)},f,l.ModuleFromPaletteAnimationDuration),h=c.animationEnded.subscribe(function(){var e=r.viewModel.experimentViewModel().addFunctionNode(u);e&&(r.viewModel.selectionManager.resetSelection(),r.viewModel.selectionManager.selectEntity(e)),r.bringRectIntoView({x:a.x,y:a.y,width:u.width(),height:u.height()}),h.dispose()});c.start()},t.prototype.clientToDomainCoordinates=function(e,t){return this.initOnly.coordinateHelper.clientToDomainCoordinates(e,t)},t.prototype.animateToGraphNode=function(e){if(e.category===2){var t=e;this.bringRectIntoView({x:t.x(),y:t.y(),width:t.width(),height:t.height()})}},t.prototype.setupEventHandlers=function(e){var t=this,n=function(e){t.viewModel.entityMouseUp(null,e)};e.addEventListener("mouseup",n);var r=function(e){n(e)};e.addEventListener("mousedown",function(e){t.viewModel.entityMouseDown(null,e)});var i=function(e){t.viewModel.onMouseMove(e)},o=function(e){e.preventDefault(),$(e.target).closest(".experimentCanvas").length===0&&(e.stopPropagation(),r(e))};this.registerForDisposal(new s.MouseCapture(e,i,o)),e.addEventListener("mousedown",function(e){t.rootContainerDiv.focus()},!0),this.registerForDisposal(new u.DisposableEventListener(this.rootContainerDiv,"keydown",function(e){switch(e.keyCode){case 46:t.viewModel.stateMachine.handleAction(4),e.stopImmediatePropagation(),e.preventDefault();break;case 65:e.shiftKey&&t.viewModel.stateMachine.handleAction(6);break;case 27:t.viewModel.stateMachine.handleAction(5);break;case 113:t.viewModel.stateMachine.handleAction(7);break;case 67:e.ctrlKey&&(e.preventDefault(),t.viewModel.copy());break;case 83:e.ctrlKey&&e.preventDefault();break;case 88:e.ctrlKey&&(e.preventDefault(),t.viewModel.stateMachine.handleAction(8));break;case 86:e.ctrlKey&&(e.preventDefault(),t.viewModel.paste());break;case 32:!e.altKey&&!e.shiftKey&&!e.ctrlKey&&t.viewModel.stateMachine.handleAction(9)}}),new u.DisposableEventListener(this.rootContainerDiv,"keyup",function(e){e.keyCode===32&&t.viewModel.stateMachine.handleAction(10)}))},t.prototype.bringRectIntoView=function(e){return},t}(u.Disposable);t.ExperimentEditorControl=h});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/View/PropertyPane/PropertyEditorControl",["require","exports","../../../../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t,r){e.call(this);if(!t)throw new Error("Property editor root div does not exist");this.rootContainerDiv=t;if(!r)throw new Error("argument: viewModel cannot be undefined or null");this.viewModel=r,this.registerForDisposal(new n.DisposableSetHTML(this.rootContainerDiv,ExperimentEditorTemplates._propertyEditorV2Markup),new n.DisposableKOApplyBindings(r,this.rootContainerDiv))}return __extends(t,e),t}(n.Disposable);t.PropertyEditorControl=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/View/ExperimentEditorContainer",["require","exports","./ExperimentEditorControl","../../../TS/View/PaletteControl","./PropertyPane/PropertyEditorControl","../../../../DataLabClient/Disposable"],function(e,t,n,r,i,s){var o;(function(e){var t;(function(e){e.Id="#propertyEditorRoot"})(t=e.PropertyEditor||(e.PropertyEditor={}))})(o=t.Constants||(t.Constants={}));var u=function(e){function t(t,o){e.call(this),this.shield=null,this.parentDiv=t,this.experimentEditorContainerViewModel=o,t.experimentEditorContainer=this,this.registerForDisposal(new s.DisposableSetHTML(t,ExperimentEditorTemplates._experimentEditorV2Markup),new s.DisposableKOApplyBindings(o,t.querySelector(".headerExperimentEditorContainer")),new s.DisposableKOApplyBindings(o,t.querySelector(".xe-utilityPanelRoot"))),this.registerForDisposal(this.xeControl=new n.ExperimentEditorControl(t.querySelector(".experimentEditorRoot"),o.experimentEditorViewModel),this.paletteView=new r.PaletteControl(t.querySelector(".xe-utilityPanel"),o.paletteViewModel),this.propertyEditorControl=new i.PropertyEditorControl(t.querySelector(".propertyEditorRoot"),o.propertyEditorViewModel)),o.paletteViewModel.registerActivationEvent(this.xeControl.addEntityToCenter.bind(this.xeControl)),o.paletteViewModel.dragResponder=this.xeControl}return __extends(t,e),t.prototype.dispose=function(){delete this.parentDiv.experimentEditorContainer,e.prototype.dispose.call(this)},t.prototype.block=function(){Shell.UI.Spinner.show();if(!this.shield){this.shield=$('<div class="shield" />');var e=$(this.parentDiv).find(".experiment-container");e.length===1&&(e.append(this.shield),this.shield.focus())}},t.prototype.unblock=function(){this.shield&&(this.shield.remove(),this.shield=null),Shell.UI.Spinner.hide()},t}(s.Disposable);t.ExperimentEditorContainer=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/PaletteControl/PaletteViewModel",["require","exports","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/Help","../../../TS/ViewModel/PaletteControl/IconUtilities","../../../../DataLabClient/Constants","../../../../DataLabClient/Model/Dataset","../../../../DataLabClient/Disposable","../../../../DataLabClient/Model/Module","../../../../DataLabClient/Model/TrainedModel","../../../../DataLabClient/Model/Transform","../../../../DataLabClient/Util","../../../../DataLabClient/Model/WebServicePortNode"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(){function e(e,t,n,r){var i=this;this.isVisible=ko.observable(!0),this.classId=ko.observable("xe-paletteItem xe-"+r+"PaletteItem"),this.id=ko.observable(e),this.name=ko.observable(t),this.description=ko.observable(n),this.type=ko.observable(r),this.tooltip=ko.computed(function(){var e=i.name();return i.description()&&(e=e+"\n"+i.description()),e})}return e}();t.PaletteItem=p;var d=function(e){function t(n,r,o,a){var f=this;a===void 0&&(a=null),e.call(this),this.name=ko.observable(null),this.type=r,this.items=ko.observableArray(),this.childCategories=ko.observableArray(),this.resourceCache=o,this.hasVisibleItems=ko.computed(function(){return f.items().some(function(e){return e.isVisible()})}),this.hasVisibleChildCategories=ko.computed(function(){return f.childCategories().some(function(e){return!e.isEmpty()})}),this.isEmpty=ko.computed(function(){return!f.hasVisibleItems()&&!f.hasVisibleChildCategories()}),this.path=n;if(!this.path)this.name(s.ResourceCategory.Uncategorized);else{var l=n.split("\\");this.name(l[l.length-1])}this.currentSearchFilter="",this.isCollapsed=ko.observable(!0),this.isCollapsedWhenSearchEmpty=!0,this.isCollapsed.subscribe(function(e){f.currentSearchFilter||(f.isCollapsedWhenSearchEmpty=e)});if(a){var c=a.keys().sort();c.forEach(function(e){f.childCategories.push(new t(e,f.type,f.resourceCache,a.lookup(e)))})}o&&(this.registerForDisposal(new u.DisposableSubscription(this.resourceCache.resourceFamilyUpdated.subscribe(function(){f.updatePaletteItemsFromResourceCache()})),new u.DisposableSubscription(this.resourceCache.items.subscribe(function(){f.updatePaletteItemsFromResourceCache()}))),this.updatePaletteItemsFromResourceCache()),this.path?this.path.split("\\").length===1?this.icon=i.GetIconForCategory(this.path):this.icon=null:this.icon=i.GetIconForCategory(this.name())}return __extends(t,e),t.prototype.applyPaletteSearch=function(e){this.currentSearchFilter=e;var t=!1;return this.childCategories().forEach(function(n){n.applyPaletteSearch(e)&&(t=!0)}),this.applyCurrentSearchFilterToItems(this.items()),this.currentSearchFilter?this.isCollapsed(this.isEmpty()):this.isCollapsed(this.isCollapsedWhenSearchEmpty),!this.isEmpty()},t.prototype.applyCurrentSearchFilterToItems=function(e){var t=this,n=/[^A-Za-z0-9 ]/g,r=this.currentSearchFilter.toLowerCase().replace(n," ");e.forEach(function(e){if(e.name()===null)throw new Error(t.name()+" palette item: name is null.");var i=e.name().toLowerCase().replace(n," "),s=e.description()===null?"":e.description();s=s.toLowerCase().replace(n," ");var o=t.path===null?"":t.path;o=o.toLowerCase().replace(n," ");var u=t.name().toLowerCase().replace(n," ");i.indexOf(r)!==-1||s.indexOf(r)!==-1||o.indexOf(r)!==-1||u.indexOf(r)!==-1?e.isVisible(!0):e.isVisible(!1)})},t.prototype.updatePaletteItemsFromResourceCache=function(){var e=this,t=null,n=null;this.path===s.ResourceCategory.WebService&&(t=_.find(this.items(),function(e){return e.id()===h.WebServicePortType[0]}),n=_.find(this.items(),function(e){return e.id()===h.WebServicePortType[1]}));var r=c.filter(this.resourceCache.items(),function(t){return t.category===e.path&&t.isLatest()}).map(function(t){return e.createPaletteItemForResource(t)});r.sort(function(e,t){return e.name().localeCompare(t.name())}),this.applyCurrentSearchFilterToItems(r),this.items(r),t&&this.items.push(t,n)},t.prototype.createPaletteItemForResource=function(e){return new p(e.id,e.name(),e.description(),this.getEntityTypeOfResource(e))},t.prototype.getEntityTypeOfResource=function(e){if(e instanceof a)return n.EntityType.Module;if(e instanceof o)return n.EntityType.Dataset;if(e instanceof f)return n.EntityType.TrainedModel;if(e instanceof l)return n.EntityType.Transform;throw new Error("EntityType is unknown for resource")},t}(u.Disposable);t.PaletteCategory=d;var v=function(e){function t(){var t=this;e.call(this),this.canceled=!1,this.firstModuleCategoryIndex=0,this.categories=ko.observableArray([]),this.isDragging=ko.observable(!1),this.mouseDown=function(e,i){if(i.button===0){var s=null,o=e.type()===n.EntityType.Module,u=window&&window.environment&&window.environment.globalWorkspaceId;u&&(o=o&&e.id().split(".")[0]===u),o&&(s=c.resurrectDashesInGUID(e.id().split(".")[1])),r.setHelpContent(e.description(),s,e.name()),t.isDragging(!0),t.dragResponder.paletteDragStart(i,e),t.canceled=!1}},this.mouseUp=function(e,n){n.button===0&&(t.dragResponder.paletteDragEnd(n),t.isDragging(!1))},this.mouseMove=function(e,n){t.isDragging()&&(n.preventDefault(),n.stopPropagation(),t.canceled||t.dragResponder.paletteDragMoved(n))},this.activate=function(e,n){t.activationAction&&t.activationAction(e,n)},this.applyPaletteSearch("")}return __extends(t,e),t.prototype.resetCategories=function(e){this.categories.valueWillMutate(),this.categories(e||[]),this.categories.valueHasMutated()},t.prototype.registerActivationEvent=function(e){this.activationAction=e},t.prototype.applyPaletteSearch=function(e){this.categories().forEach(function(t){t.applyPaletteSearch(e)})},t.prototype.cancelDrag=function(){this.canceled=!0,this.dragResponder.paletteDragCancel()},t}(u.Disposable);t.PaletteViewModel=v});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/PropertyEditorViewModel",["require","exports","../../../../TS/ViewModel/ExperimentEditor/Help","../../../../../DataLabClient/Disposable"],function(e,t,n,r){var i=function(e){function t(t,r){var i=this;r===void 0&&(r=$.noop),e.call(this),this.tabs=t,this.getHelp=r,this.help=n,this.tabs.forEach(function(e){i.registerForDisposal(e),e.setContainer(i),e.bindView()}),this.drawerIsCollapsed=ko.observable(!1),this.tabs[0].selected(!0),this.animatingDrawer=ko.observable(!1),this.openCloseAnimationEnded=new ko.subscribable,this.quickHelpCollapsed=ko.observable(!1)}return __extends(t,e),t.prototype.dispose=function(){this.tabs.forEach(function(e){e instanceof r.Disposable&&e.dispose(),e=null}),e.prototype.dispose.call(this)},t.prototype.selectTab=function(e){this.tabs.forEach(function(t){t.selected(e===t.id)})},t.prototype.toggleDrawer=function(){this.animatingDrawer(!0),this.drawerIsCollapsed(!this.drawerIsCollapsed())},t}(r.Disposable);t.PropertyEditorViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/PollingUtility",["require","exports","./Util","./Disposable"],function(e,t,n,r){var i=function(){function e(e,t,n){this.response=e,this.name=t,this.message=n}return e}();t.ActivityError=i,function(e){e[e.Succeed=0]="Succeed",e[e.Fail=1]="Fail",e[e.Retry=2]="Retry",e[e.Cancel=3]="Cancel"}(t.PollingAction||(t.PollingAction={}));var s=t.PollingAction,o=function(){function e(e,t){this.intervalInMillisec=e,this.maxRetry=t;if(e<=0)throw new Error("The polling interval must be a positive integer");this.remaining=this.maxRetry}return e.prototype.nextRetryInterval=function(){return this.isPollingInfinitely()?this.intervalInMillisec:this.remaining>0?(this.remaining--,this.intervalInMillisec):-1},e.prototype.isPollingInfinitely=function(){return!this.maxRetry||this.maxRetry<=0},e}();t.ConstantInterval=o;var u=function(e){function t(t,n){e.call(this),this.activity=t,this.retryAlg=n,this.deferred=null,this.disposed=!1,this.promiseResolved=!1}return __extends(t,e),t.prototype.dispose=function(){if(this.disposed||!this.deferred)return;this.deferred.resolve(null),this.deferred=null,e.prototype.dispose.call(this)},t.prototype.start=function(){this.promiseResolved=!1,this.deferred=$.Deferred();var e;return this.pollActivity(this.deferred),n.when(this.deferred.promise())},t.prototype.pollActivity=function(e){var t=this;if(this.disposed||this.promiseResolved)return;n.then(this.activity.runOnce(),function(n){var r=t.activity.processResponse(n),s;switch(r){case 0:e.resolve(n),t.promiseResolved=!0;break;case 1:e.reject(new i(n,"ActivityFailed")),t.promiseResolved=!0;break;case 2:s=t.retryAlg.nextRetryInterval();if(s<0){e.reject(new i(n,"RetryExceeded"));break}setTimeout(t.pollActivity.bind(t,e),s);break;case 3:e.resolve(null),t.promiseResolved=!0;break;default:e.reject(new i(n,"UnknownResponse")),t.promiseResolved=!0}}).fail(function(n){e.reject(n),t.promiseResolved=!0})},t}(r.Disposable);t.PollingUtil=u}),define("generated/DataLabClient/Model/V2/Interfaces",["require","exports"],function(e,t){var n;(function(e){(function(e){e[e.Standard=0]="Standard",e[e.WebService=1]="WebService"})(e.ConnectionType||(e.ConnectionType={}));var t=e.ConnectionType})(n=t.Models||(t.Models={}));var r;(function(e){(function(e){e[e.WorkspaceSummaryService=0]="WorkspaceSummaryService",e[e.ExperimentService=1]="ExperimentService",e[e.FunctionService=2]="FunctionService",e[e.RuntimeDefinitionService=3]="RuntimeDefinitionService",e[e.RuntimeDescriptionService=4]="RuntimeDescriptionService"})(e.WorkspaceServiceType||(e.WorkspaceServiceType={}));var t=e.WorkspaceServiceType})(r=t.Services||(t.Services={}))}),define("generated/DataLabClient/Contracts/V2/Constants",["require","exports"],function(e,t){var n;(function(e){e.String="String",e.Boolean="Boolean",e.Enumerated="Enumerated",e.Script="Script",e.Credential="Credential",e.ColumnPicker="ColumnPicker",e.ParameterRange="ParameterRange"})(n=t.UxControls||(t.UxControls={}));var r;(function(e){e.Int="Int",e.Float="Float",e.Boolean="Boolean",e.Required="Required",e.Max="Max",e.Min="Min"})(r=t.ConstraintMethods||(t.ConstraintMethods={}));var i;(function(e){e.Literal="Literal",e.Password="Password",e.Placeholder="Placeholder",e.GraphParameterName="GraphParameterName"})(i=t.ModuleParameterValueType||(t.ModuleParameterValueType={}))}),define("generated/DataLabClient/Model/V2/Validation",["require","exports","../../Contracts/V2/Constants"],function(e,t,n){function r(e,t){if(!t[e])throw new Error("Failed to find ID "+e+" in dictionary.");return t[e]}function i(e){e.Functions.forEach(function(e){e.Parameters.forEach(function(e){e.Constraints&&e.Constraints.forEach(function(e){if(!(e.Method in n.ConstraintMethods))throw new Error("Error validating runtime definition: Unknown parameter constraint encountered")});if(!(e.UxControl in n.UxControls))throw new Error("Error validating runtime definition: Unknown parameter control encountered")})})}t.tryGetDescriptionById=r,t.validateRuntimeDefinition=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/V2/TypeDictionary",["require","exports","./Validation","../../Logging/Logging"],function(e,t,n,r){(function(e){e[e.Atomic=0]="Atomic",e[e.Collection=1]="Collection",e[e.Function=2]="Function",e[e.Enumeration=3]="Enumeration"})(t.TypeVariety||(t.TypeVariety={}));var i=t.TypeVariety;(function(e){e[e.Incompatible=0]="Incompatible",e[e.Compatible=1]="Compatible"})(t.ConnectionCompatibility||(t.ConnectionCompatibility={}));var s=t.ConnectionCompatibility,o=function(){function e(e,t,n){this.definition=e,this.detailedDescription=t,this.typeDictionary=n,this._compatibilityCache={};return}return Object.defineProperty(e.prototype,"name",{get:function(){return this.detailedDescription.Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.detailedDescription.Description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.definition.Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"referenceName",{get:function(){return this.definition.ReferenceName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableActions",{get:function(){return this.definition.AvailableActions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transformationMethod",{get:function(){return this.definition.TransformationMethod},enumerable:!0,configurable:!0}),e.prototype.canConnectAsType=function(e){return e in this._compatibilityCache||(this._compatibilityCache[e]=this.canConnectHelper(e)),this._compatibilityCache[e]},e.prototype.getFlattenedBaseTypeIds=function(){throw"Not implemented on abstract base class"},e.prototype.getFlattenedBaseTypeNames=function(){throw"Not implemented on abstract base class"},e.prototype.canConnectHelper=function(e){return 0},e}();t.BaseType=o;var u=function(e){function t(t,n,r){e.call(this,t,n,r),this.typeVariety=0}return __extends(t,e),t.prototype.getFlattenedBaseTypeIds=function(){return this.typeDictionary.getFlattenedBaseTypes(this.id)},t.prototype.getFlattenedBaseTypeNames=function(){var e=this;return this.getFlattenedBaseTypeIds().map(function(t){return e.typeDictionary.getType(t).name})},t.prototype.canConnectHelper=function(e){if(this.typeDictionary.getType(e).typeVariety!==0)return 0;var t=this.typeDictionary.getFlattenedBaseTypes(this.id);return t.indexOf(e)>-1?1:0},t}(o),a=function(e){function t(t,n,r){e.call(this,t,n,r),this.typeVariety=1,this.collectedType=t.CollectedType,this.dimensionality=t.Dimensionality}return __extends(t,e),t.prototype.getFlattenedBaseTypeIds=function(){return[this.id]},t.prototype.getFlattenedBaseTypeNames=function(){return[this.name]},t.prototype.canConnectHelper=function(e){var t=this.typeDictionary.getType[e];if(t.typeVariety!==1||this.dimensionality!==t.dimensionality)return 0;var n=this.typeDictionary.getFlattenedBaseTypes(this.collectedType);return n.indexOf(t.collectedType)>-1?1:0},t}(o),f=function(e){function t(t,n,r){e.call(this,t,n,r),this.typeVariety=2,this.inputTypes=_.values(t.InputTypes),this.outputTypes=_.values(t.OutputTypes)}return __extends(t,e),t.prototype.getFlattenedBaseTypeIds=function(){return[this.id]},t.prototype.getFlattenedBaseTypeNames=function(){return[this.name]},t.prototype.canConnectHelper=function(e){return 0},t}(o),l=function(e){function t(t,r,i,s){e.call(this,t,r,s),this.typeVariety=3,this._values=t.Values.map(function(e){return[e,n.tryGetDescriptionById(e,i)]}).sort(function(e,t){return e[1].Order-t[1].Order}).map(function(e){return{internal:e[0],display:e[1].Name}})}return __extends(t,e),Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),t.prototype.getFlattenedBaseTypeIds=function(){return[this.id]},t.prototype.getFlattenedBaseTypeNames=function(){return[this.name]},t.prototype.canConnectHelper=function(e){return 0},t}(o);t.EnumerationType=l;var c=function(){function e(e,t){var r=this;this.bidirectionalClassHierarchy={},this.dictionary={},e.AtomicTypes.forEach(function(e){var i=n.tryGetDescriptionById(e.Id,t.TypeDescriptions);r.dictionary[e.Id]=new u(e,i,r),r.bidirectionalClassHierarchy[e.Id]={parents:e.BaseTypes||[],children:[]}}),this.populateChildrenInHierarchy(),e.CollectionTypes.forEach(function(e){r.dictionary[e.Id]=new a(e,t.TypeDescriptions[e.Id],r)}),e.FunctionTypes.forEach(function(e){r.dictionary[e.Id]=new f(e,t.TypeDescriptions[e.Id],r)}),e.EnumerationTypes.forEach(function(e){var i=t.TypeDescriptions[e.Id],s=n.tryGetDescriptionById(e.Id,t.EnumerationValueDescriptions);r.dictionary[e.Id]=new l(e,i,s,r)})}return e.prototype.getType=function(e){return this.dictionary[e]},e.prototype.getFlattenedBaseTypes=function(e){var t=this,n=[e];return this.bidirectionalClassHierarchy[e].parents.forEach(function(e){n.push.apply(n,t.getFlattenedBaseTypes(e))}),n},e.prototype.getFlattenedDerivedTypes=function(e){var t=this,n=[e];return this.bidirectionalClassHierarchy[e].children.forEach(function(e){n.push.apply(n,t.getFlattenedDerivedTypes(e))}),n},e.prototype.populateChildrenInHierarchy=function(){var e=this;for(var t in this.bidirectionalClassHierarchy)this.bidirectionalClassHierarchy[t].parents.forEach(function(n){if(!e.bidirectionalClassHierarchy[n]){r.exception(new Error("Invalid type definitions for runtime"));return}e.bidirectionalClassHierarchy[n].children.push(t)})},e}();t.TypeDictionary=c}),define("generated/DataLabClient/Model/V2/ConnectionModel",["require","exports","./Interfaces","../../Util"],function(e,t,n,r){var i=function(){function e(e,t){this._inputPort=e,this._outputPort=t,this.isPartOfCycle=ko.observable(!1),this._clientId=r.createGuid(),this._removalCallbacks=[],this._connectionType=0,this._inputPort.addConnection(this),this._outputPort.addConnection(this)}return Object.defineProperty(e.prototype,"clientId",{get:function(){return this._clientId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputPort",{get:function(){return this._inputPort},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputPort",{get:function(){return this._outputPort},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectionType",{get:function(){return this._connectionType},enumerable:!0,configurable:!0}),e.prototype.remove=function(){this._removalCallbacks.forEach(function(e){e()})},e.prototype.onRemove=function(e){this._removalCallbacks.push(e)},e}();t.ConnectionModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/ExperimentEditor/Connector",["require","exports","../../../ViewModel/ExperimentEditor/ConnectorBase","../../../ViewModel/ExperimentEditor/Entity","../../../../../DataLabClient/Model/V2/TypeDictionary","../../../../TS/Global","../../../../../DataLabClient/Model/V2/ConnectionModel"],function(e,t,n,r,i,s,o){var u=function(e){function t(t){e.call(this),this.experimentViewModel=t,this.hiddenConnection=null,this.snappedPort=null}return __extends(t,e),t.prototype.isSnappedOnOutputPort=function(){return this.snappedPort&&!this.snappedPort.isInput},t.prototype.onMouseMove=function(e,t,n){if(n){var r=null,i=this.p0;n.category===2?r=i.isInput?n.findClosestOutputPort(e):n.findClosestInputPort(e):n.category===3&&(r=n),this.lastCandidatePort&&this.lastCandidatePort!==r&&this.lastCandidatePort.balloonMessage(null);if(r&&r.getCompatibility(i)===1){this.snapToPort(r);return}r&&(this.setCandidatePort(r),r.shareSameParent(i)||r.isInput&&i.isInput||!r.isInput&&!i.isInput?r.balloonMessage(null):r.balloonMessage("Cannot connect "+i.portTypeName+" to "+r.portTypeName+"."))}else this.setCandidatePort(null);this.unsnap(),this.x2(e),this.y2(t-s.Port.HalfHeight),this.isPreview(!1)},t.prototype.reset=function(){this.p0=null,this.p1=null,this.visible(!1),this.x1(0),this.y1(0),this.x2(0),this.y2(0),this.counter(0),this.isPreview(!0),this.showHiddenConnection(),this.setCandidatePort(null),this.lastCandidatePort=null},t.prototype.startConnection=function(e){if(!e)throw new Error("Source port isn't a port view model.");this.p0=e,this.x1(e.getCX()),this.y1(e.getCY()),this.x2(e.getCX()),this.y2(e.getCY()),this.visible(!0),this.counter(this.counter()+1),this.snappedPort=null,this.showHiddenConnection(),this.setCandidatePort(null)},t.prototype.endConnection=function(e,t,n){if(e&&(e.category===2||e.category===3)){var r=this.p0;e.category===2?this.p1=r&&r.isInput?e.findClosestOutputPort(t):e.findClosestInputPort(t):this.p1=e;if(this.p1){var i=this.p1,s=r.getCompatibility(i);if(s===1){var u=r.isInput?r:i,a=r.isInput?i:r;this.experimentViewModel().experiment.addConnection(new o.ConnectionModel(u.portModel,a.portModel))}}}this.reset()},t.prototype.snapToPort=function(e){this.snappedPort=e,this.x2(this.snappedPort.getCX()),this.y2(this.snappedPort.getCY()),this.isPreview(!0);var t=null;t?this.hideConnection(t):this.showHiddenConnection()},t.prototype.unsnap=function(){this.snappedPort=null,this.showHiddenConnection()},t.prototype.showHiddenConnection=function(){this.hiddenConnection&&(this.hiddenConnection.hidden(!1),this.hiddenConnection=null)},t.prototype.hideConnection=function(e){this.showHiddenConnection(),this.hiddenConnection=e,this.hiddenConnection.hidden(!0)},t.prototype.setCandidatePort=function(e){this.lastCandidatePort&&this.lastCandidatePort.balloonMessage(null),this.lastCandidatePort=e},t}(n.ConnectorBase);t.Connector=u}),define("generated/editor/TS/V2/ViewModel/ExperimentEditor/GraphEntities/CommentViewModel",["require","exports","../../../../Global","../../../../ViewModel/PaletteControl/IconUtilities"],function(e,t,n,r){var i;(function(e){e.XOffset=200,e.YOffset=40,e.FunctionNodeYOffset=45-e.YOffset,e.WidthBuffer=17,e.HeightOffset=45,e.LineHeight=20,e.MaxLinesToShow=3})(i=t.Comments||(t.Comments={}));var s=function(){function e(e){var t=this;this.functionNodeViewModel=e,this.editingComment=ko.observable(!1),this.hasComment=ko.computed(function(){return t.comment()!==""}),this.commentPosX=ko.computed(function(){var e=t.functionNodeViewModel.labelPosX();return e+"px"}),this.commentPosY=ko.computed(function(){var e=t.functionNodeViewModel.labelPosY()+n.Label.Height+i.FunctionNodeYOffset;return e+"px"}),this.commentWidth=ko.computed(function(){return t.functionNodeViewModel.width()-n.Label.ModuleXOffset*2+"px"}),this.commentClass=ko.computed(function(){var e="nodeComment",n=t.commentCollapsed()?" collapsed":"",r=t.functionNodeViewModel.selected()?" selected":"";return e+n+r}),this.linesToShow=ko.computed(function(){if(t.commentCollapsed())return 0;var e=1;while(e<=i.MaxLinesToShow&&t.commentLargerThanDiv(i.LineHeight*(e-1),t.comment()))e+=1;return t.functionNodeViewModel.height(n.RectHeight+i.LineHeight*(e-1)),t.functionNodeViewModel.relayoutPorts(t.functionNodeViewModel.outputPorts,t.functionNodeViewModel.width(),t.functionNodeViewModel.height()),e-1}),this.showHideComment=function(){t.functionNodeViewModel.functionNodeModel.commentCollapsed(!t.commentCollapsed()),t.functionNodeViewModel.height(n.RectHeight+i.LineHeight*t.linesToShow()),t.functionNodeViewModel.relayoutPorts(t.functionNodeViewModel.outputPorts,t.functionNodeViewModel.width(),t.functionNodeViewModel.height())},this.commentToShow=ko.computed(function(){if(!t.commentLargerThanDiv(i.LineHeight*i.MaxLinesToShow,t.comment()))return t.comment();var e=0;while(!t.commentLargerThanDiv(i.LineHeight*i.MaxLinesToShow,t.comment().slice(0,e)+" ..."))e+=1;return t.comment().slice(0,e-1)+" ..."}),this.commentCollapsedExpandedIconURL=ko.computed(function(){return t.commentCollapsed()?"/Libraries/Images/icon-chevron-collapsed.svg":"/Libraries/Images/icon-chevron-expanded.svg"});var s=r.GetIconSymbol("icon-properties_chevron_collapsed"),o=r.GetIconSymbol("icon-properties_chevron_expanded");this.commentCollapsedExpandedIconSymbol=ko.computed(function(){return t.commentCollapsed()?s:o})}return Object.defineProperty(e.prototype,"comment",{get:function(){return this.functionNodeViewModel.functionNodeModel.comment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commentCollapsed",{get:function(){return this.functionNodeViewModel.functionNodeModel.commentCollapsed},enumerable:!0,configurable:!0}),e.prototype.editComment=function(){this.editingComment(!0)},e.prototype.commentLargerThanDiv=function(e,t){var n=document.createElement("div");n.setAttribute("class","nodeComment"),n.style.width=this.commentWidth(),n.style.visibility="hidden";var r=document.createElement("pre");r.setAttribute("class","text"),n.appendChild(r),document.body.appendChild(n);if(t){$(r).text(t);if(n.clientHeight>e)return document.body.removeChild(n),!0}return document.body.removeChild(n),!1},e}();t.CommentViewModel=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/ExperimentEditor/GraphEntities/EntityBaseV2",["require","exports","../../../../ViewModel/ExperimentEditor/Entity"],function(e,t,n){var r=function(e){function t(t){e.call(this),this.category=t}return __extends(t,e),t}(n.Entity);t.EntityBaseV2=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/ExperimentEditor/GraphEntities/Port",["require","exports","../../../../../TS/Global","./EntityBaseV2","../../../../ViewModel/ExperimentEditor/Entity","../../../../../../DataLabClient/Model/V2/TypeDictionary","../../../../../../DataLabClient/Model/Port"],function(e,t,n,r,i,s,o){var u=function(e){function t(t,r,i){var s=this;e.call(this,3),this._portModel=t,this._index=r,this._parentNodeViewModel=i,this.balloonMessage=ko.observable(""),this.portState=ko.observable(o.Constants.PortState.Default),this.parentOffsetX=ko.observable(0),this.parentOffsetY=ko.observable(0),this.labelMaxWidth=ko.observable(0),this._width=ko.observable(n.Port.Width),this._height=ko.observable(n.Port.Height),this._x=ko.computed(function(){return s._parentNodeViewModel.x()+s.parentOffsetX()}),this._y=ko.computed(function(){return s._parentNodeViewModel.y()+s.parentOffsetY()}),this._connectionTypes=ko.computed(function(){return[]}),this.isConnected=ko.computed(function(){return!!s.portModel.connections.length})}return __extends(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInput",{get:function(){throw"abstract method must be implemented"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classId",{get:function(){var e=this;return ko.computed(function(){var t=o.Constants.PortClass,n=e.portState();if(e.isConnected()){t+=" "+o.Constants.PortState.Connected;if(n===o.Constants.PortState.Default)return t}return t+" "+n})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translation",{get:function(){var e=this;return ko.computed(function(){return"translate("+e.x()+","+e.y()+")"})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"portModel",{get:function(){return this._portModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typeModel",{get:function(){return this._portModel.portReference.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"portTypeName",{get:function(){return this._portModel.portReference.type.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeInstanceId",{get:function(){return this._parentNodeViewModel.clientSideStorageId},enumerable:!0,configurable:!0}),t.prototype.addConnection=function(e){this.portModel.addConnection(e.model)},Object.defineProperty(t.prototype,"connections",{get:function(){return this.portModel.connections},enumerable:!0,configurable:!0}),t.prototype.getCompatibility=function(e){throw"abstract method must be implemented"},t.prototype.setPortState=function(e){this===e?this.portState(o.Constants.PortState.Selected):!e||this.isInput===e.isInput?this.portState(o.Constants.PortState.Default):this.portState(this.getCompatibility(e)===1?o.Constants.PortState.Compatible:o.Constants.PortState.Incompatible)},t.prototype.shareSameParent=function(e){return this.nodeInstanceId===e.nodeInstanceId},t.prototype.findFirstCompatiblePortOnParent=function(e){return null},t.prototype.getCX=function(){return this._x()+n.Port.HalfWidth},t.prototype.getCY=function(){return this._y()+n.Port.HalfHeight},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.entityAtPoint=function(e,t){return this.containsPoint(e,t)?this:null},t.prototype.containsPoint=function(e,t){var r=this.x(),i=this.y();return e>=r&&e<r+n.Port.Width&&t>=i&&t<i+n.Port.Height},Object.defineProperty(t.prototype,"clientSideStorageId",{get:function(){return""},enumerable:!0,configurable:!0}),t.prototype.removeConnection=function(e){var t=this.connections[e.model.connectionType];for(var n=0;n<t().length;n++)if(t()[n].clientSideStorageId===e.clientSideStorageId){t().splice(n,1),t.notifySubscribers(null);return}},t.prototype.removeAllConnections=function(){this.connections.forEach(function(e,t){e.remove()})},t}(r.EntityBaseV2);t.Port=u;var a=function(e){function t(t,n,r){e.call(this,t,n,r),this._connectionTypes=this.portModel.connectionTypes}return __extends(t,e),Object.defineProperty(t.prototype,"isInput",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.getCompatibility=function(e){return this.isInput===e.isInput||this.shareSameParent(e)?0:e.typeModel.canConnectAsType(this._portModel.portReference.type.id)},Object.defineProperty(t.prototype,"portTypeName",{get:function(){return this._portModel.portReference.type.getFlattenedBaseTypeNames().join(", ")},enumerable:!0,configurable:!0}),t}(u);t.InputPort=a;var f=function(e){function t(t,n,r){e.call(this,t,n,r),this.highlighted=ko.observable(!1)}return __extends(t,e),Object.defineProperty(t.prototype,"isInput",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.getCompatibility=function(e){return this.isInput===e.isInput||this.shareSameParent(e)?0:this._portModel.portReference.type.canConnectAsType(e.typeModel.id)},t}(u);t.OutputPort=f}),define("generated/DataLabClient/Contracts/V2/ParameterDefinition",["require","exports"],function(e,t){(function(e){e[e.ParameterValueEquality=0]="ParameterValueEquality",e[e.InputTypeAssignability=1]="InputTypeAssignability"})(t.RelevancyConditionType||(t.RelevancyConditionType={}));var n=t.RelevancyConditionType}),define("generated/DataLabClient/Model/V2/ParameterModel",["require","exports","../../Validation","../../Contracts/V2/Constants","../../Contracts/V2/ParameterDefinition"],function(e,t,n,r,i){function f(e,t){switch(e.Type.toString()){case i.RelevancyConditionType[0]:return new u(e,t);case i.RelevancyConditionType[1]:return new a(e,t);default:throw new Error("unknown condition type")}}function l(e,t){if(!e.relevancy)return ko.computed(function(){return!0});var n=e.relevancy.map(function(e){var n=e.map(function(e){return f(e,t)});return ko.pureComputed(function(){return n.every(function(e){return e.isPassing()})})});return ko.pureComputed(function(){return n.some(function(e){return e()})})}var s=r.ConstraintMethods,o=function(){function e(e,t){var r=this;t===void 0&&(t=null),this._parameterReference=e,t=t||e.defaultValue||"",this._initializeValidators(),this._value=n.validatableObservable(t,function(e){return r._validators.validate(e)}),this._value.startValidating(),this._useRelevancy=ko.observable(!1),this._isRelevant=ko.pureComputed(function(){return r._useRelevancy()?r._isRelevantComputed():!0})}return e.prototype.initializeRelevancyLogic=function(e){this._isRelevantComputed=l(this._parameterReference,e),this._useRelevancy(!0)},Object.defineProperty(e.prototype,"parameter",{get:function(){return this._parameterReference},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRelevant",{get:function(){return this._isRelevant},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._parameterReference.referenceName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._parameterReference.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._parameterReference.description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parameterType",{get:function(){var e=this._parameterReference.uxControl;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueType",{get:function(){return r.ModuleParameterValueType.Literal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return this._validators},enumerable:!0,configurable:!0}),e.prototype._initializeValidators=function(){var e=this;this._validators=new n.ValidatorList;var t=this._parameterReference.constraints;t.forEach(function(t){var r,i;switch(t.Method){case s.Int:e._validators.push(new n.IntegerValidator);break;case s.Float:e._validators.push(new n.FloatValidator);break;case s.Boolean:break;case s.Required:e._validators.push(new n.RequiredValueValidator);break;case s.Max:i=t.Arguments.Value;if(typeof i!="number"||!_.isFinite(i))throw new Error("max constraint value is not a finite number");e._validators.push(new n.PropertyMaxValidator(i));break;case s.Min:r=t.Arguments.Value;if(typeof r!="number"||!_.isFinite(r))throw new Error("min constraint value is not a finite number");e._validators.push(new n.PropertyMinValidator(r));break;default:throw new Error("unknown parameter constraint")}})},e}();t.ParameterModel=o;var u=function(){function e(e,t){var n=t.parameters[e.VariableId],r=e.Values;this._isPassing=ko.computed(function(){return n.isRelevant()&&r.indexOf(n.value())!==-1})}return Object.defineProperty(e.prototype,"isPassing",{get:function(){return this._isPassing},enumerable:!0,configurable:!0}),e}(),a=function(){function e(e,t){var n=t.inputPorts[e.VariableId],r=e.Values;this._isPassing=ko.computed(function(){return r.forEach(function(e){if(n.connectionTypes().indexOf(e)!==-1)return!0}),!1})}return Object.defineProperty(e.prototype,"isPassing",{get:function(){return this._isPassing},enumerable:!0,configurable:!0}),e}()});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/V2/PortModel",["require","exports","../../ObservableMap","./TypeDictionary","../../Util"],function(e,t,n,r,i){var s=function(){function e(e,t){this._portReference=e,this._parentNodeModel=t,this._connections=n.observableMap(),this._portId=this.createPortId()}return Object.defineProperty(e.prototype,"portReference",{get:function(){return this._portReference},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"portId",{get:function(){return this._portId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){return this._connections},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectionTypes",{get:function(){return this._connectionTypes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentNodeModel",{get:function(){return this._parentNodeModel},enumerable:!0,configurable:!0}),e.prototype.addConnection=function(e){var t=this;e.onRemove(function(){t._connections.remove(e.clientId)}),this._connections.put(e.clientId,e)},e.prototype.removeConnection=function(e){this._connections.lookup(e).remove()},e.prototype.createPortId=function(){return i.format("{0} - {1}",this._portReference.referenceName,this._parentNodeModel.clientId)},e}();t.PortModel=s;var o=function(e){function t(t,n){var r=this;e.call(this,t,n),this._connectionTypes=ko.computed(function(){var e=[];return r._connections.forEach(function(t,n){e.push.apply(e,t.outputPort.portReference.type.getFlattenedBaseTypeIds())}),e})}return __extends(t,e),t.prototype.addConnection=function(t){this.portReference.type.typeVariety!==1&&this.connections.forEach(function(e,t){e.remove()}),e.prototype.addConnection.call(this,t)},t}(s);t.InputPortModel=o;var u=function(e){function t(t,n){var r=this;e.call(this,t,n),this._connectionTypes=ko.computed(function(){var e=[];return r._connections.forEach(function(t,n){e.push.apply(e,t.inputPort.portReference.type.getFlattenedBaseTypeIds())}),e})}return __extends(t,e),t}(s);t.OutputPortModel=u}),define("generated/DataLabClient/Contracts/V2/NotificationServiceTypes",["require","exports"],function(e,t){(function(e){e[e.NotStarted=0]="NotStarted",e[e.Pending=1]="Pending",e[e.Loading=2]="Loading",e[e.Running=3]="Running",e[e.Finished=4]="Finished",e[e.Failed=5]="Failed",e[e.Cancelled=6]="Cancelled"})(t.TaskStatusCode||(t.TaskStatusCode={}));var n=t.TaskStatusCode;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Pending=1]="Pending",e[e.Running=2]="Running",e[e.Finished=3]="Finished",e[e.Failed=4]="Failed",e[e.Canceled=5]="Canceled"})(t.JobDriverStatusCode||(t.JobDriverStatusCode={}));var r=t.JobDriverStatusCode;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(t.FunctionMessageType||(t.FunctionMessageType={}));var i=t.FunctionMessageType}),define("generated/DataLabClient/Model/V2/FunctionNodeModel",["require","exports","../../Contracts/V2/Constants","./ParameterModel","../../Util","./PortModel","../../Contracts/V2/NotificationServiceTypes"],function(e,t,n,r,i,s,o){var u=function(){function e(e,t){var o=this;t===void 0&&(t=null),this._functionReference=e,this.x=ko.observable(0),this.y=ko.observable(0),this.width=ko.observable(0),this.height=ko.observable(0),this.comment=ko.observable(""),this.commentCollapsed=ko.observable(!0),this.standardOutPath=ko.observable(""),this.standardErrorPath=ko.observable(""),this.status=ko.observable(0),this._clientId=t||i.createGuid(),this._parametersMap={},this._inputPortsMap={},this._outputPortsMap={},this._functionReference.parameters.forEach(function(e){o._parametersMap[e.id]=new r.ParameterModel(e)}),this._functionReference.inputs.forEach(function(e){var t=new s.InputPortModel(e,o);o._inputPortsMap[e.id]=t}),this._functionReference.outputs.forEach(function(e){var t=new s.OutputPortModel(e,o);o._outputPortsMap[e.id]=t}),this.comment.subscribe(function(){o.comment(o.comment().trim())});for(var u in this._parametersMap)this._parametersMap[u].initializeRelevancyLogic(this);this.statusDetails={label:"Status Details",name:"Status Details",parameterType:n.ModuleParameterValueType.Literal,tooltip:"Test tooltip",value:ko.observable("")}}return e.prototype.isRelevant=function(e){return!0},Object.defineProperty(e.prototype,"referenceId",{get:function(){return this._functionReference.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientId",{get:function(){return this._clientId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputPorts",{get:function(){return this._inputPortsMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputPorts",{get:function(){return this._outputPortsMap},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parameters",{get:function(){return this._parametersMap},set:function(e){this._parametersMap=e;for(var t in this._parametersMap)this._parametersMap[t].initializeRelevancyLogic(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"functionReference",{get:function(){return this._functionReference},enumerable:!0,configurable:!0}),e.prototype.getInputPortById=function(e){return this._inputPortsMap[e]},e.prototype.getOutputPortById=function(e){return this._outputPortsMap[e]},e}();t.FunctionNodeModel=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/ExperimentEditor/GraphEntities/FunctionNodeViewModel",["require","exports","./CommentViewModel","../../../../ViewModel/ExperimentEditor/Entity","./EntityBaseV2","../../../../Global","./Port","../../../../../../DataLabClient/Model/Port","../../../../../../DataLabClient/Model/V2/FunctionNodeModel","../../../../../../DataLabClient/Util","../../../../../../DataLabClient/Contracts/V2/NotificationServiceTypes"],function(e,t,n,r,i,s,o,u,a,f,l){var c;(function(e){e.PixelsPerPort=75,e.MinPorts=3})(c=t.PortWidthConstants||(t.PortWidthConstants={}));var h;(function(e){e.Compatible="compatible",e.Incompatible="incompatible",e.Idle="idle"})(h=t.FunctionCompatibilityTypes||(t.FunctionCompatibilityTypes={}));var p=function(e){function t(t,r,i){var u=this;i===void 0&&(i=null),e.call(this,2),this._functionReference=t,this.labelMaxWidth=s.Label.MaxWidth,this.iconSymbol="",this.iconClass="",this.forceBalloon=new ko.subscribable,i?this._functionNodeModel=i:(this._functionNodeModel=new a.FunctionNodeModel(t),this._functionNodeModel.height(s.RectHeight)),this.inputPorts={},f.forEach(this._functionReference.inputs,function(e,t){var n=u._functionNodeModel.getInputPortById(e.id);u.inputPorts[e.id]=new o.InputPort(n,t,u)}),this.outputPorts={},f.forEach(this._functionReference.outputs,function(e,t){var n=u._functionNodeModel.getOutputPortById(e.id);u.outputPorts[e.id]=new o.OutputPort(n,t,u)}),this.ports=_.values(this.inputPorts).concat(_.values(this.outputPorts)),this.labelPosX=ko.computed(function(){return u.x()+s.Label.ModuleXOffset}),this.labelPosY=ko.computed(function(){return u.y()+s.Label.ModuleYOffset}),this._classId=ko.pureComputed(function(){var e="rectEntity module "+u.getCompatabilityType();return e+=(u.hovered()?" hoveredEntity":"")+(u.selected()?" selectedEntity":""),e}),this.statusIconURL=ko.pureComputed(function(){switch(u.functionNodeModel.status().toString()){case l.TaskStatusCode[4]:return"/Content/Images/icon-complete.svg";case l.TaskStatusCode[3]:return"/Content/Images/processing.gif";default:return"/Content/Images/icon-none.svg"}}),this.iconPosX=ko.computed(function(){return u.x()+s.Icon.XOffset}),this.iconPosY=ko.computed(function(){return u.y()+(s.RectHeight-s.Icon.Height)/2}),this.resizeNode(),this.commentViewModel=new n.CommentViewModel(this)}return __extends(t,e),Object.defineProperty(t.prototype,"classId",{get:function(){return this._classId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){var e="";return e+=this._functionReference.name+". ",this._functionReference.description&&(e+=(e!==""?"\n":"")+this._functionReference.description),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textClassId",{get:function(){return ko.computed(function(){return"staticText"})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._functionReference.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.functionNodeModel.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.functionNodeModel.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.functionNodeModel.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.functionNodeModel.height},enumerable:!0,configurable:!0}),t.prototype.entityAtPoint=function(e,t){if(this.boundingBoxContainsPoint(e,t)){for(var n in this.inputPorts){var r=this.inputPorts[n].entityAtPoint(e,t);if(r!==null)return r}for(n in this.outputPorts){r=this.outputPorts[n].entityAtPoint(e,t);if(r!==null)return r}return this.containsPoint(e,t)?this:null}return null},t.prototype.containsPoint=function(e,t){return e>=this.x()&&e<this.x()+this.width()&&t>=this.y()&&t<this.y()+this.height()},t.prototype.boundingBoxContainsPoint=function(e,t){var n=t+s.Port.HalfHeight,r=this.height()+s.Port.Height;return e>=this.x()&&e<this.x()+this.width()&&n>=this.y()&&t<this.y()+r},Object.defineProperty(t.prototype,"clientSideStorageId",{get:function(){return this._functionNodeModel.clientId},enumerable:!0,configurable:!0}),t.prototype.findClosestOutputPort=function(e){return this.findClosestPort(this.outputPorts,e)},t.prototype.findClosestInputPort=function(e){return this.findClosestPort(this.inputPorts,e)},t.prototype.getCompatabilityType=function(){var e=h.Idle;for(var t=0;t<this.ports.length;t++){var n=this.ports[t];n.portState()===u.Constants.PortState.Incompatible&&(e=h.Incompatible);if(n.portState()===u.Constants.PortState.Selected)return h.Idle;if(n.portState()===u.Constants.PortState.Compatible)return h.Compatible}return e},t.prototype.remove=function(){f.forEach(this.ports,function(e){e.removeAllConnections()})},Object.defineProperty(t.prototype,"balloonMessage",{get:function(){return ko.observable("")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"statusDetails",{get:function(){return{statusDetails:{property:{value:ko.observable("")}}}},enumerable:!0,configurable:!0}),t.prototype.relayoutPorts=function(e,t,n){var r=t/(Object.keys(e).length+1);for(var i in e){var o=e[i],u=(o.index+1)*r-s.Port.HalfWidth,a=o.isInput?0:n;o.parentOffsetX(u),o.parentOffsetY(a),o.labelMaxWidth(2*(r-2*s.Port.HalfWidth))}},t.prototype.resizeNode=function(){var e=Math.max(Object.keys(this.inputPorts).length,Object.keys(this.outputPorts).length),t=Math.max(0,(e-c.MinPorts)*c.PixelsPerPort);this.width()===0&&this.width(s.RectWidth+t),this.relayoutPorts(this.inputPorts,this.width(),this.height()),this.relayoutPorts(this.outputPorts,this.width(),this.height())},t.prototype.findClosestPort=function(e,t){var n=null,r=Number.MAX_VALUE;return f.forEach(e,function(e){var i=Math.abs(e.getCX()-t);i<r&&(r=i,n=e)}),n},Object.defineProperty(t.prototype,"functionNodeModel",{get:function(){return this._functionNodeModel},enumerable:!0,configurable:!0}),t}(i.EntityBaseV2);t.FunctionNodeViewModel=p});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/ExperimentEditor/GraphEntities/ConnectionViewModel",["require","exports","./EntityBaseV2","../../../../ViewModel/ExperimentEditor/Entity","../../../../../TS/Global"],function(e,t,n,r,i){var s=function(e){function t(t,n,r){var s=this;e.call(this,1),this.inputPort=t,this.outputPort=n,this._model=r,this.hidden=ko.observable(!1),this._x=ko.observable(0),this._y=ko.observable(0),this._width=ko.observable(0),this._height=ko.observable(0),this.controlPointDistance=ko.computed(function(){return Math.min(i.Connector.SplinePointMax,Math.max(i.Connector.SplinePointMin,Math.abs((this.inputPort.y()-(this.outputPort.y()+i.Port.Height))/2)))},this),this.path=ko.pureComputed(function(){return"M"+(s.inputPort.x()+i.Port.HalfWidth-1)+","+s.inputPort.y()+"C "+(s.inputPort.x()+i.Port.HalfWidth-1)+","+(s.inputPort.y()-s.controlPointDistance())+","+(s.outputPort.x()+i.Port.HalfWidth-1)+","+(s.outputPort.y()+i.Port.Height+s.controlPointDistance())+","+(s.outputPort.x()+i.Port.HalfWidth-1)+","+(s.outputPort.y()+i.Port.Height)})}return __extends(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"category",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classId",{get:function(){var e=this;return ko.computed(function(){var t=e._model.isPartOfCycle()?"error ":"";return t+=e.selected()?"selectedConnection":"defaultConnection",t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientSideStorageId",{get:function(){return this._model.clientId},enumerable:!0,configurable:!0}),t}(n.EntityBaseV2);t.ConnectionViewModel=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/ExperimentEditor/ExperimentViewModel",["require","exports","../../../../../DataLabClient/LocalizedResources","../../../../../DataLabClient/Disposable","../../../../../DataLabClient/Util","../../../../../DataLabClient/ObservableMap","../../../../TS/V2/ViewModel/ExperimentEditor/GraphEntities/FunctionNodeViewModel","../../../Global","../../../../TS/V2/ViewModel/ExperimentEditor/GraphEntities/ConnectionViewModel","../../../../../DataLabClient/Contracts/V2/NotificationServiceTypes"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){function t(t,r){var i=this;e.call(this),this.experiment=t,this.functionService=r,this.connections=s.observableMap(),this.experimentNodes=s.observableMap(),this.tempNodes=s.observableMap(),this.readOnlyMode=ko.observable(!1),this.displayFlowType=ko.observable(u.ExperimentDataFlowType.Experiment),this.experimentLoaded=ko.observable(!0),this.experiment.getFunctions().forEach(function(e){var t=new o.FunctionNodeViewModel(e.functionReference,r,e);i.experimentNodes.put(t.clientSideStorageId,t)}),this.experiment.connections.forEach(function(e,t){i.addConnection(e)}),this.experiment.connections.subscribeToCollectionChanges(function(e){i.updateConnections(e)}),this.registerForDisposal(this.nodes=s.observableMapUnion(this.tempNodes,this.experimentNodes),this.selectableEntities=s.observableMapUnion(this.nodes,this.connections)),this.experimentStateDisplay=ko.computed(function(){if(i.readOnlyMode()&&i.experiment.statusCode()!==2&&i.experiment.statusCode()!==0)return{statusLabel:ko.observable(n.experimentStateLocked),statusIconUrl:"/Content/Images/icon-locked_gray.svg",iconHoverBalloon:n.experimentStateLockedHover};var e=i.experiment.statusCode().toString();return e===f.JobDriverStatusCode[0]?{statusLabel:ko.observable(n.experimentStateInDraft),statusIconUrl:"/Content/Images/icon-none.svg",iconHoverBalloon:""}:e===f.JobDriverStatusCode[3]?{statusLabel:ko.observable(n.experimentStateFinishedRunning),statusIconUrl:"/Content/Images/icon-complete.svg",iconHoverBalloon:""}:e===f.JobDriverStatusCode[2]?{statusLabel:ko.observable(n.experimentStateRunning),statusIconUrl:"/Content/Images/processing.gif",iconHoverBalloon:n.experimentStateRunningHover}:e===f.JobDriverStatusCode[1]?{statusLabel:ko.observable(n.experimentStateQueued),statusIconUrl:"/Content/Images/ajax-loader.gif",iconHoverBalloon:n.experimentStateQueuedHover}:{statusLabel:ko.observable(""),statusIconUrl:"/Content/Images/icon-none.svg",iconHoverBalloon:""}},this)}return __extends(t,e),t.prototype.createFunctionNodeViewModel=function(e,t,n){if(this.readOnlyMode())return null;var r=new o.FunctionNodeViewModel(e,this.functionService);return r.x(t),r.y(n),this.tempNodes.put(r.clientSideStorageId,r),r},t.prototype.addFunctionNode=function(e){return this.tempNodes.remove(e.clientSideStorageId),this.experiment.addFunction(e.functionNodeModel),this.experimentNodes.put(e.clientSideStorageId,e),e},t.prototype.editSelected=function(){if(this.readOnlyMode())return;i.forEach(this.nodes(),function(e){if(e.selected()){e.commentViewModel.editComment();return}})},t.prototype.removeSelected=function(){var e=this;if(this.readOnlyMode())return;var t=[];this.connections.forEach(function(e,n){e.selected()&&t.push(e.clientSideStorageId)}),this.experiment.removeConnectionBatch(t),i.forEach(this.nodes(),function(t){t.selected()&&(i.forEach(t.ports,function(e){e.removeAllConnections()}),t.remove(),e.experimentNodes.contains(t.clientSideStorageId)?(e.experimentNodes.remove(t.clientSideStorageId),e.experiment.removeFunction(t.clientSideStorageId)):e.tempNodes.contains(t.clientSideStorageId)&&(e.tempNodes.remove(t.clientSideStorageId),e.experiment.removeFunction(t.clientSideStorageId)))})},t.prototype.findEntityAtPoint=function(e,t){var n=this.selectableEntities();for(var r in n){var i=n[r].entityAtPoint(e,t);if(i&&i.containsPoint(e,t))return i}return null},t.prototype.refreshViewModelAfterContextChange=function(){var e=this;this.connections.clear(),this.experimentNodes.clear(),this.functionService.populateDictionaryAsync().done(function(){e.experiment.getFunctions().forEach(function(t){var n=new o.FunctionNodeViewModel(t.functionReference,e.functionService,t);e.experimentNodes.put(n.clientSideStorageId,n)}),e.experiment.connections.forEach(function(t,n){e.addConnection(t)})})},t.prototype.addConnection=function(e){var t=this.experimentNodes.lookup(e.inputPort.parentNodeModel.clientId).inputPorts[e.inputPort.portReference.id],n=this.experimentNodes.lookup(e.outputPort.parentNodeModel.clientId).outputPorts[e.outputPort.portReference.id];this.connections.put(e.clientId,new a.ConnectionViewModel(t,n,e))},t.prototype.updateConnections=function(e){switch(e.type){case 0:this.addConnection(e.newValue);break;case 2:this.connections.remove(e.key)}},t}(r.Disposable);t.ExperimentViewModel=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Commands/AddNodesCommand",["require","exports","../../../../TS/ViewModel/ExperimentEditor/Commands/Command"],function(e,t,n){var r=function(e){function t(t,n){e.call(this,n),this.nodesToAdd=t}return __extends(t,e),t.prototype.run=function(){var e=this;this.experiment.nodes.modify(function(){e.nodesToAdd.forEach(function(t){e.experiment.addNode(t,t.x(),t.y())})})},t.prototype.undo=function(){var e=this;this.experiment.nodes.modify(function(){e.nodesToAdd.forEach(function(e){e.remove()})})},t}(n.Command);t.AddNodesCommand=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Commands/AddConnectionsCommand",["require","exports","../../../../TS/ViewModel/ExperimentEditor/Commands/Command","../../../../TS/ViewModel/ExperimentEditor/Connection"],function(e,t,n,r){var i=function(e){function t(t,n){e.call(this,n),this._connections=t}return __extends(t,e),Object.defineProperty(t.prototype,"connections",{get:function(){return this._connections},enumerable:!0,configurable:!0}),t.prototype.run=function(){var e=this,t=this.experimentEditorViewModel.experimentViewModel();t.connections.modify(function(){e._connections.forEach(function(t){t.inputPort.connectTo(t.outputPort);var n=e.experimentEditorViewModel.experimentViewModel(),i=r.Connection.getConnectionKeyForPorts(n.getViewModelForPort(t.inputPort),n.getViewModelForPort(t.outputPort))})})},t.prototype.undo=function(){var e=this,t=this.experimentEditorViewModel.experimentViewModel();t.connections.modify(function(){e._connections.forEach(function(e){e.inputPort.disconnectFrom(e.outputPort)})})},t}(n.Command);t.AddConnectionsCommand=i}),define("generated/DataLabClient/Contracts/V1/Deserializer-v2",["require","exports","../../Util","../../Constants","../../Model/DatasetNode","../../Model/ModuleNode","../../Model/TrainedModelNode","../../Model/TransformNode","../../Model/ModuleParameterDescriptor","../../Model/WebServicePortNode"],function(e,t,n,r,i,s,o,u,a,f){function l(e,t,r,a,l,c,p,d){function g(e,t){e.x(t.X),e.y(t.Y),e.usePreviousResults(t.UsePreviousResults),v.nodesToContract[e.id]=t,v.contractToNodes[t.Id]=e}var v={nodesToContract:Object.create(null),contractToNodes:Object.create(null)},m=[];return e.Nodes.forEach(function(e){if(e.NodeType===1){var n=r.getItem(e.Guid);n.done(function(t){var n=new i(t,p(e));g(n,e)}).fail(function(){c(e)}),m.push(n)}else if(e.NodeType===0){var v=t.getItem(e.Guid);v.done(function(t){var n=new s.ModuleNode(t,d,p(e));g(n,e);var r=e;h(n.parameters,r.Parameters),n.comment(e.Comment)}).fail(function(){c(e)}),m.push(v)}else if(e.NodeType===2){var y=a.getItem(e.Guid);y.done(function(t){var n=new o(t,p(e));g(n,e)}).fail(function(){c(e)}),m.push(y)}else if(e.NodeType===4){var b=l.getItem(e.Guid);b.done(function(t){var n=new u(t,p(e));g(n,e)}).fail(function(){c(e)}),m.push(b)}else if(e.NodeType===3){var w=e,E=new f.WebServicePortNode(w.PortType,p(e),null,d.applicationCache.dataTypeRegistry);g(E,e),m.push($.Deferred().resolve())}else c(e)}),n.then(n.when.apply(m),function(){return v})}function c(e,t){var r=[];return n.forEach(e.nodesToContract,function(n){var i=e.contractToNodes[n.Id];n.InputPorts.forEach(function(n){if(n.Connection){var s=i.inputPorts[n.PortName],o=e.contractToNodes[n.Connection.OutputNodeId],u=null;o&&(u=o.outputPorts[n.Connection.OutputPortName],u&&r.push({inputPort:s,outputPort:u})),(!o||!u)&&t(n,n.Connection)}})}),r}function h(e,t){n.forEach(e,function(e,r){var i=t[r];e.value(i.Value),e.valueType=i.ValueType,e.descriptor instanceof a.ModeModuleParameterDescriptor&&n.forEach(e.childParameters,function(e,t){h(e,i.ChildParameters[t])})})}t.createNodes=l,t.createConnections=c});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/Commands/PasteCommand",["require","exports","../../../../TS/ViewModel/ExperimentEditor/Commands/AddNodesCommand","../../../../TS/ViewModel/ExperimentEditor/Commands/AddConnectionsCommand","../../../../TS/ViewModel/ExperimentEditor/Commands/Command","../../../../TS/ViewModel/ExperimentEditor/Connection","../../../../TS/Global","../../../../../DataLabClient/Model/AnnotationNode","../../../../../DataLabClient/Constants","../../../../../DataLabClient/Model/DatasetNode","../../../../../DataLabClient/Contracts/V1/Deserializer-v2","../../../../../DataLabClient/Features","../../../../../DataLabClient/LocalizedResources","../../../../../DataLabClient/Logging/Logging","../../../../../DataLabClient/Model/TrainedModelNode","../../../../../DataLabClient/Model/TransformNode","../../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g;(function(e){e.PasteCascadeX=o.RectWidth/5,e.PasteCascadeY=o.RectHeight*2/4,e.PasteBoundary=o.RectWidth*2})(g=t.Constants||(t.Constants={}));var y=function(e){function t(t,n,r,i,s,o){var u=this;o===void 0&&(o=null),e.call(this,n),this.clipboard=t,this.pastedItemCount=0,this.viewTopLeft=i,this.experimentBounds=r,this.addConnectionsCommand=null,this.addNodesCommand=null,this.itemsPasted=new ko.subscribable,this.selectedNonModuleResourceIds={},this.nodesAddedPromise=l.createNodes(t,n.moduleCache,n.datasetCache,n.trainedModelCache,n.transformModulesCache,function(e){return},function(e){return u.experimentEditorViewModel.experiment.nodes.lookup(e.Id)?null:e.Id},s);var a=t.Nodes.filter(function(e){return e.NodeType===5}).map(function(e){return e.Annotation});if(a&&a.length>0){var f=this.experimentEditorViewModel.experiment.experimentId()?this.experimentEditorViewModel.experiment.experimentId():this.experimentEditorViewModel.experiment.parentExperimentId;this.annotationsAddedPromise=s.addSerializedExperimentAnnotationsAsync(f,a)}else this.annotationsAddedPromise=m.when([]);c.trialLimitationsEnabled()&&o&&(this.validate=o)}return __extends(t,e),t.prototype.run=function(){var e=this;this.nodesAddedPromise.done(function(t){if(e.validate&&!e.validate(t))return;var n=[];e.annotationsAddedPromise.done(function(e){e.forEach(function(e){n.push(new u(e))})}).fail(function(e){p.customEvent({key:"AddAnnotationsFailed",type:"addNewAnnotationsFromPaste",data:e}),p.exception(e,"AddAnnotationsFailed","addNewAnnotationFromPaste");var t={title:h.annotationCouldNotBeAdded,details:e.message};e instanceof m.AjaxError&&e.xmlHttpRequest&&(t.details=t.details+" "+e.xmlHttpRequest.responseText),m.showErrorNotification(t)}).always(function(){e.addNodesCommand||e.createAddNodesCommand(t,n),e.addNodesCommand.run(),e.addConnectionsCommand||e.createAddConnectionsCommand(t),e.addConnectionsCommand.run(),e.selectPastedContent(),e.addNodesCommand.nodesToAdd.length>0?e.itemsPasted.notifySubscribers(e.placementRect):e.itemsPasted.notifySubscribers(null)})})},t.prototype.undo=function(){this.addConnectionsCommand&&this.addNodesCommand&&(this.addConnectionsCommand.undo(),this.addNodesCommand.undo())},t.prototype.calculatePlacement=function(e){var t=null,n=null,r=Infinity;e.forEach(function(e){e.y()<r&&(r=e.y(),n=e)});var i={x:this.experimentBounds.x-g.PasteBoundary,y:this.experimentBounds.y-g.PasteBoundary,width:this.experimentBounds.width+2*g.PasteBoundary,height:this.experimentBounds.height+2*g.PasteBoundary};i.x<this.clipboard.X+this.clipboard.Width&&i.y<this.clipboard.Y+this.clipboard.Height&&i.x+i.width>=this.clipboard.X&&i.y+i.height>=this.clipboard.Y?t={x:this.clipboard.X,y:this.clipboard.Y,matrixTransform:null}:t={x:this.viewTopLeft.x,y:this.viewTopLeft.y,matrixTransform:null},t.x+=n.x(),t.y+=n.y();var s=this.experimentEditorViewModel.calculatePlacement(t);return{x:s.x-n.x(),y:s.y-n.y(),width:this.clipboard.Width,height:this.clipboard.Height}},t.prototype.createAddNodesCommand=function(e,t){function s(t){var n=e.nodesToContract[t.id].Id;i.selectedNonModuleResourceIds[n]=!0,delete e.nodesToContract[t.id],delete e.contractToNodes[n]}var r=this,i=this;m.forEach(e.contractToNodes,function(e){var t;e instanceof f?(t=e.dataset.id,r.experiment.getDatasetNode(t)&&s(e)):e instanceof d?(t=e.trainedModel.id,r.experiment.getTrainedModelNode(t)&&s(e)):e instanceof v&&(t=e.transform.id,r.experiment.getTransformNode(t)&&s(e))});var o=m.values(e.contractToNodes);o=o.concat(t),o.length>0&&(this.placementRect=this.calculatePlacement(o),m.forEach(o,function(e){var t=e.x(),n=e.y();e.x(t+r.placementRect.x),e.y(n+r.placementRect.y)})),this.addNodesCommand=new n.AddNodesCommand(o,this.experimentEditorViewModel)},t.prototype.createAddConnectionsCommand=function(e){function i(e){return e&&n.selectedNonModuleResourceIds[e.id]}var t=this,n=this,s=[],o=l.createConnections(e,function(n,r){var o=e.contractToNodes[r.InputNodeId],u=t.experiment.nodes.lookup(r.OutputNodeId);if(i(u)&&n.IsInput){var a=o.inputPorts[n.PortName],f=u.outputPorts[r.OutputPortName];f&&s.push({inputPort:a,outputPort:f})}});this.clipboard.EgressConnections.forEach(function(n){var r=e.contractToNodes[n.OutputNodeId];if(r){var o=r.outputPorts[n.OutputPortName],u=t.experiment.nodes.lookup(n.InputNodeId);if(i(u)){var a=u.inputPorts[n.InputPortName];a&&!a.isConnected()&&s.push({inputPort:a,outputPort:o})}}}),this.addConnectionsCommand=new r.AddConnectionsCommand(s.concat(o),this.experimentEditorViewModel)},t.prototype.selectPastedContent=function(){var e=this,t=this.experimentEditorViewModel.experimentViewModel();this.experimentEditorViewModel.selectionManager.resetSelection(),this.addNodesCommand.nodesToAdd.forEach(function(n){var r=t.getViewModelForNode(n);e.experimentEditorViewModel.selectionManager.selectEntity(r)}),this.addConnectionsCommand.connections.forEach(function(n){var r=t.getViewModelForPort(n.inputPort),i=t.getViewModelForPort(n.outputPort),o=s.Connection.getConnectionKeyForPorts(r,i),u=t.connections.lookup(o);e.experimentEditorViewModel.selectionManager.selectEntity(u)})},t}(i.Command);t.PasteCommand=y}),define("generated/editor/TS/V2/ExperimentEditorDomEvents",["require","exports","../../../DataLabClient/CustomDomEvent"],function(e,t,n){t.canvasSelectionChanged=new n.CustomDomEvent("EditorCanvas_FunctionNodeSelection_Changed")});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/SelectionManager",["require","exports","../../../TS/ViewModel/ExperimentEditor/Entity","../../../../DataLabClient/Disposable","../../../../DataLabClient/ObservableMap","../../../../DataLabClient/Util","../../../TS/V2/ExperimentEditorDomEvents"],function(e,t,n,r,i,s,o){var u=function(e){function t(t){function s(e){switch(e.type){case 2:this.deselectEntity(e.oldValue)}}function o(e){switch(e.type){case 0:e.newValue.selected(!0);break;case 2:e.oldValue.selected(!1)}}var n=this;e.call(this),this.visible=ko.observable("hidden"),this.startX=ko.observable(0),this.startY=ko.observable(0),this.curX=ko.observable(0),this.curY=ko.observable(0),this.width=ko.observable(0),this.height=ko.observable(0),this.startCapture=!1,this._selectedGraphNodes=i.observableMap(),this._selectedConnections=i.observableMap(),this.registerForDisposal(this._selectedEntities=i.observableMapUnion(this._selectedGraphNodes,this._selectedConnections)),this.selectionChangeCallback=null,this.experimentViewModel=t,this.registerForDisposal(new r.DisposableSubscription(t.subscribe(function(e){e.selectableEntities.subscribeToCollectionChanges(s.bind(n))}))),this._selectedEntities.subscribeToCollectionChanges(o.bind(this))}return __extends(t,e),t.prototype.isVisible=function(){return this.visible()==="visible"},Object.defineProperty(t.prototype,"selectedGraphNodes",{get:function(){return this._selectedGraphNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedConnections",{get:function(){return this._selectedConnections},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedEntities",{get:function(){return this._selectedEntities},enumerable:!0,configurable:!0}),t.prototype.deselectEntity=function(e){var t=e.clientSideStorageId;this._selectedConnections.remove(t)},t.prototype.selectAll=function(){var e=this;this.experimentViewModel().connections.forEach(function(t){e._selectedConnections.put(t.clientSideStorageId,t)}),this.experimentViewModel().experimentNodes.forEach(function(t){e._selectedGraphNodes.put(t.clientSideStorageId,t)}),this.raiseNodeSelectionChangedEvent()},t.prototype.resetSelection=function(){var e=this;this._selectedConnections.modify(function(){e._selectedConnections.clear(),e._selectedGraphNodes.clear()}),this.raiseNodeSelectionChangedEvent()},t.prototype.modifySelection=function(e){this.selectedEntities.modify(function(){e()})},t.prototype.selectEntity=function(e){e.category===1?this._selectedConnections.put(e.clientSideStorageId,e):(this._selectedGraphNodes.put(e.clientSideStorageId,e),this.raiseNodeSelectionChangedEvent())},t.prototype.toggleEntitySelection=function(e){e.selected()?this.deselectEntity(e):this.selectEntity(e)},t.prototype.beginRectSelection=function(e,t){this.startCapture=!0,this.width(0),this.height(0),this.startX(e),this.startY(t),this.curX(e),this.curY(t),this.visible("visible")},t.prototype.endRectSelection=function(e,t,n){var r=this;return this.updateRectSelection(e,t),this.startCapture&&(this.visible("hidden"),this.modifySelection(function(){s.forEach(n,function(e){e.hit(r.curX(),r.curY(),r.curX()+r.width(),r.curY()+r.height())&&r.selectEntity(e)})}),this.width(0),this.height(0),this.startX(e),this.startY(t),this.curX(e),this.curY(t),this.startCapture=!1),this.selectedEntities.count()>0},t.prototype.cancelRectSelection=function(){this.visible("hidden"),this.width(0),this.height(0),this.startCapture=!1},t.prototype.updateRectSelection=function(e,t){this.width(Math.abs(e-this.startX())),this.height(Math.abs(t-this.startY()));if(this.width()===0||this.height()===0)return;e>this.startX()&&t>this.startY()||(e>this.startX()&&t<this.startY()?this.curY(t):e<this.startX()&&t<this.startY()?(this.curX(e),this.curY(t)):this.curX(e))},t.prototype.raiseNodeSelectionChangedEvent=function(){var e=this._selectedGraphNodes.keys();o.canvasSelectionChanged.trigger({keys:e})},t}(r.Disposable);t.SelectionManager=u}),define("generated/editor/TS/ViewModel/ExperimentEditor/EntitySelectionHelper",["require","exports"],function(e,t){var n=function(){function e(e,t,n){this.experimentOrViewPerturbed=e,this.selectionManager=t,this.getSelectableEntities=n}return e.prototype.selectAll=function(){this.selectionManager.selectAll()},e.prototype.resetSelection=function(){this.selectionManager.resetSelection()},e.prototype.toggleEntitySelection=function(e){this.selectionManager.toggleEntitySelection(e)},e.prototype.beginMultiSelect=function(e){this.selectionManager.beginRectSelection(e.x,e.y),this.experimentOrViewPerturbed.notifySubscribers(null)},e.prototype.endMultiSelect=function(e){this.selectionManager.endRectSelection(e.x,e.y,this.getSelectableEntities()),this.experimentOrViewPerturbed.notifySubscribers(null)},e.prototype.updateMultiSelect=function(e){this.selectionManager.updateRectSelection(e.x,e.y)},e.prototype.selectSingleEntity=function(e,t){var n=this;e.selected()?t||this.selectionManager.selectEntity(e):this.selectionManager.modifySelection(function(){n.selectionManager.resetSelection(),n.selectionManager.selectEntity(e)})},e.prototype.cancelRectSelection=function(){this.selectionManager.cancelRectSelection()},e}();t.EntitySelectionHelper=n}),define("generated/DataLabClient/Model/V2/ExperimentModel",["require","exports","../../Util","../../LocalizedResources","../../Contracts/V2/NotificationServiceTypes","../../Validation","../../ObservableMap"],function(e,t,n,r,i,s,o){var u=function(){function e(){this.startTime=ko.observable(new Date),this.endTime=ko.observable(new Date),this.statusCode=ko.observable(0),this.statusDetails=ko.observable("None"),this.isValid=ko.observable(!0),this.functionNodeModels=[],this._connections=o.observableMap(),this.id="",this.parentId="",this.familyId="";var t=this.getDefaultExperimentName();this.name=s.validatableObservable(t,e.validateDescription)}return e.validateDescription=function(e){return/\S/.test(e)?null:r.ErrorExperimentNameMustContainAtLeastOneNonWhitespaceCharacter},e.prototype.getFunctions=function(e){return e===void 0&&(e=null),e?_.filter(this.functionNodeModels,function(t){return _.contains(e,t.clientId)}):this.functionNodeModels},e.prototype.addFunction=function(e){this.functionNodeModels.push(e)},e.prototype.removeFunction=function(e){for(var t=0;t<this.functionNodeModels.length;t++)if(this.functionNodeModels[t].clientId===e){this.functionNodeModels.splice(t,1);break}},e.prototype.addConnection=function(e){var t=this;e.onRemove(function(){t._connections.remove(e.clientId),t.validate()}),this._connections.put(e.clientId,e),this.validate()},e.prototype.validate=function(){this.findCycles()},e.prototype.removeConnection=function(e){this._connections.lookup(e).remove()},e.prototype.removeConnectionBatch=function(e){var t=this;this._connections.modify(function(){e.forEach(function(e){t._connections.lookup(e).remove()})})},Object.defineProperty(e.prototype,"connections",{get:function(){return this._connections},enumerable:!0,configurable:!0}),e.prototype.getDefaultExperimentName=function(){var e=new Date,t=e.toLocaleDateString();return n.format(r.ExperimentDefaultTitle,t)},e.prototype.findCycles=function(){var e=[];this._connections.forEach(function(t,n){e.push(t)});var t={listOfNodes:e,getNodeId:function(e){return e.clientId},getDownstreamNodesFunction:function(e){var t=e.inputPort.parentNodeModel.outputPorts,n=[];for(var r in t)t[r].connections.forEach(function(e,t){n.push(e)});return n}},r=n.findNodesInCyclesFromDirectedGraph(t).map(function(e){return e.clientId});return e.forEach(function(e){var t=r.indexOf(e.clientId)!==-1;e.isPartOfCycle(t)}),r.length===0?"":"Cycles exist in graph"},e}();t.ExperimentModel=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/ExperimentEditor/ExperimentEditorViewModel",["require","exports","../../../../TS/V2/ViewModel/ExperimentEditor/Connector","../../../../TS/ViewModel/ExperimentEditor/Entity","../../../../TS/V2/ViewModel/ExperimentEditor/ExperimentViewModel","../../../../TS/Global","../../../../TS/ViewModel/ExperimentEditor/Commands/PasteCommand","../../../../TS/ViewModel/ExperimentEditor/SelectionManager","../../../../TS/ViewModel/ExperimentEditor/EntitySelectionHelper","../../../../TS/ViewModel/ExperimentEditor/XEStateMachine","../../../../../DataLabClient/Constants","../../../../../DataLabClient/Disposable","../../../../../DataLabClient/Logging/Logging","../../../../../DataLabClient/Util","../../../../../DataLabClient/Model/V2/ExperimentModel"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){(function(e){e[e.IsMultiSelecting=0]="IsMultiSelecting",e[e.IsMovingEntity=1]="IsMovingEntity",e[e.IsConnecting=2]="IsConnecting",e[e.None=3]="None"})(t.UserActionState||(t.UserActionState={}));var v=t.UserActionState,m=function(e){function t(t){var r=this;e.call(this),this.functionService=t,this.needsAnimationToNode=new ko.subscribable,this.experimentOrViewPerturbed=new ko.subscribable,this.DraggingMode=f.DraggingMode,this.experimentOrViewBoundsChanged=new ko.subscribable,this.cloneHandler=$.noop,this.paletteDragItem=null,this.lastMouseCoords={x:0,y:0,matrixTransform:null},this._experiment=new d.ExperimentModel,this.experimentViewModel=ko.observable(new i.ExperimentViewModel(this._experiment,t)),this.registerForDisposal(this.selectionManager=new u.SelectionManager(this.experimentViewModel),this.stateMachine=new f.XEInteractionStateMachine(this)),this.connector=new n.Connector(this.experimentViewModel),this.entitySelectionHelper=new a.EntitySelectionHelper(this.experimentOrViewPerturbed,this.selectionManager,function(){return r.experimentViewModel().selectableEntities()}),this.classId=ko.computed(function(){var e="xe-surface";return r.experimentViewModel().readOnlyMode()&&(e+=" readOnly"),e+=" "+r.stateMachine.classes(),e}),this.entityMouseUp=function(e,t){t.preventDefault(),t.stopPropagation(),e&&e.category===3,r.stateMachine.handleAction(1,t,e)},this.entityMouseDown=function(e,t){t.preventDefault(),t.stopPropagation(),($(t.target).closest(".expanded .text").length!==1||!e||!e.selected())&&r.stateMachine.handleAction(0,t,e)},this.onMouseMove=function(e){e.preventDefault(),r.stateMachine.handleAction(2,e)},this.entityDoubleClick=function(e,t){e.category===2&&!r.experimentViewModel().readOnlyMode()&&e.commentViewModel.editComment()}}return __extends(t,e),Object.defineProperty(t.prototype,"experiment",{get:function(){return this._experiment},set:function(e){if(this._experiment!==e){this._experiment=e;var t=new i.ExperimentViewModel(e,this.functionService);this.experimentViewModel(t)}this.experimentOrViewPerturbed.notifySubscribers(null)},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){this.entitySelectionHelper.selectAll()},t.prototype.resetSelection=function(){this.entitySelectionHelper.resetSelection()},t.prototype.toggleEntitySelection=function(e){this.entitySelectionHelper.toggleEntitySelection(e)},t.prototype.beginMultiSelect=function(e){this.entitySelectionHelper.beginMultiSelect(e)},t.prototype.endMultiSelect=function(e){this.entitySelectionHelper.endMultiSelect(e)},t.prototype.updateMultiSelect=function(e){this.entitySelectionHelper.updateMultiSelect(e)},t.prototype.selectSingleEntity=function(e,t){this.entitySelectionHelper.selectSingleEntity(e,t)},t.prototype.cancelRectSelection=function(){this.entitySelectionHelper.cancelRectSelection()},t.prototype.editSelected=function(){this.experimentViewModel().editSelected(),this.experimentOrViewPerturbed.notifySubscribers(null)},t.prototype.cut=function(){throw"to be implemented"},t.prototype.copy=function(){throw"to be implemented"},t.prototype.paste=function(){throw"to be implemented"},t.prototype.removeSelected=function(){if(this.experimentViewModel().readOnlyMode())return;this.experimentViewModel().removeSelected(),this.selectionManager.resetSelection(),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentOrViewPerturbed.notifySubscribers(null)},t.prototype.moveEntities=function(e,t){if(this.experimentViewModel().readOnlyMode())return;var n=this.experimentViewModel().nodes();p.forEach(n,function(n){n.selected()&&n.translate(e,t)}),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentOrViewPerturbed.notifySubscribers(null)},t.prototype.startConnection=function(e){if(this.experimentViewModel().readOnlyMode()||e.category!==3)return;this.highlightNodesAndPorts(e),this.connector.startConnection(e),this.experimentOrViewPerturbed.notifySubscribers(null)},t.prototype.moveConnection=function(e){if(this.experimentViewModel().readOnlyMode())return;var t=this.experimentViewModel().findEntityAtPoint(e.x,e.y);this.connector.onMouseMove(e.x,e.y,t)},t.prototype.cancelConnection=function(){this.connector.reset(),this.highlightNodesAndPorts(null)},t.prototype.endConnection=function(e,t){if(this.experimentViewModel().readOnlyMode())return;this.connector.endConnection(e,t.x,t.y),this.highlightNodesAndPorts(null),this.experimentOrViewPerturbed.notifySubscribers(null)},t.prototype.toggleAnnotationCollapse=function(e,t){throw"to be implemented"},t.prototype.editAnnotation=function(e){throw"to be implemented"},t.prototype.pan=function(e,t){throw"to be implemented"},t.prototype.resizeNode=function(e,t,n){throw"to be implemented"},t.prototype.registerCloneHandler=function(e){this.cloneHandler=e},t.prototype.createFunctionNodeViewModel=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=this.functionService.getFunction(e);if(!r)throw new Error("Unknown function with function id: "+e);return this.experimentViewModel().createFunctionNodeViewModel(r,t,n)},t.prototype.calculatePlacement=function(e){var t;do t=!0,this.experimentViewModel().experimentNodes.forEach(function(n){e.x===n.x()&&e.y===n.y()&&(e.x+=o.Constants.PasteCascadeX,e.y+=o.Constants.PasteCascadeY,t=!1)});while(!t);return{x:e.x,y:e.y,matrixTransform:null}},t.prototype.paletteDragStart=function(e){this.paletteItem=e,this.experimentOrViewPerturbed.notifySubscribers(null)},t.prototype.paletteDragEnter=function(e){if(this.paletteItem){var t=e.x-s.RectWidth/2,n=e.y-s.RectHeight/2;this.paletteDragItem=this.createFunctionNodeViewModel(this.paletteItem.id(),t,n)}this.lastMouseCoords=e},t.prototype.paletteDragMove=function(e){if(this.paletteDragItem){var t=e.x-this.lastMouseCoords.x,n=e.y-this.lastMouseCoords.y;this.paletteDragItem.translate(t,n)}this.lastMouseCoords=e,this.experimentOrViewBoundsChanged.notifySubscribers(null)},t.prototype.paletteDragLeave=function(){this.paletteDragItem&&(this.experimentViewModel().tempNodes.remove(this.paletteDragItem.clientSideStorageId),this.paletteDragItem.remove(),this.paletteDragItem=null,this.experimentOrViewBoundsChanged.notifySubscribers(null))},t.prototype.paletteDragEnd=function(){if(this.paletteDragItem){h.featureUsage({featureID:36,groupID:38,experimentID:this._experiment&&this._experiment.id,moduleID:this.paletteDragItem.functionNodeModel.referenceId,data:this.paletteDragItem.functionNodeModel.functionReference.name});var e=this.experimentViewModel().addFunctionNode(this.paletteDragItem);e&&(this.selectionManager.resetSelection(),this.selectionManager.selectEntity(e)),this.experimentOrViewBoundsChanged.notifySubscribers(null)}this.paletteDragItem=null,this.experimentOrViewPerturbed.notifySubscribers(null)},t.prototype.highlightNodesAndPorts=function(e){p.forEach(this.experimentViewModel().nodes(),function(t){p.forEach(t.ports,function(t){t.setPortState(e)})})},t}(c.Disposable);t.ExperimentEditorViewModel=m});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PaletteControl/PaletteCategoryViewModel",["require","exports","../../../../../DataLabClient/Disposable","../../../../../DataLabClient/Util","../../../../../DataLabClient/Constants","../../../../TS/ViewModel/PaletteControl/IconUtilities"],function(e,t,n,r,i,s){function u(e){return e?r.then(e.getFunctionsByCategoryAsync(),function(e){return e.map(function(e){return new o(e)})}):r.when([])}var o=function(e){function t(n,r){var o=this;r===void 0&&(r=""),e.call(this),this.itemIdSeed=0;var u=n.description?n.description.Name:i.ResourceCategory.Uncategorized;u||(u=i.ResourceCategory.Uncategorized),this.name=ko.observable(u),this.type=u,this.path=r+"\\"+u,this.items=ko.observableArray(this.hydratePaletteItems(n.functions)),this.childCategories=ko.observableArray(n.children.map(function(e){return new t(e,o.path)})),this.hasVisibleItems=ko.computed(function(){return o.items().some(function(e){return e.isVisible()})}),this.hasVisibleChildCategories=ko.computed(function(){return o.childCategories().some(function(e){return!e.isEmpty()})}),this.isEmpty=ko.computed(function(){return!o.hasVisibleItems()&&!o.hasVisibleChildCategories()}),this.currentSearchFilter="",this.isCollapsed=ko.observable(!0),this.isCollapsedWhenSearchEmpty=!0,this.isCollapsed.subscribe(function(e){o.currentSearchFilter||(o.isCollapsedWhenSearchEmpty=e)}),r===""?this.icon=s.GetIconForCategory(this.name()):this.icon=null}return __extends(t,e),t.prototype.applyPaletteSearch=function(e){this.currentSearchFilter=e;var t=!1;return this.childCategories().forEach(function(n){n.applyPaletteSearch(e)&&(t=!0)}),this.applyCurrentSearchFilterToItems(this.items()),this.currentSearchFilter?this.isCollapsed(this.isEmpty()):this.isCollapsed(this.isCollapsedWhenSearchEmpty),!this.isEmpty()},t.prototype.applyCurrentSearchFilterToItems=function(e){var t=this,n=/[^A-Za-z0-9 ]/g,r=this.currentSearchFilter.toLowerCase().replace(n," ");e.forEach(function(e){if(e.name()===null)throw new Error(t.name()+" palette item: name is null.");var i=e.name().toLowerCase().replace(n," "),s=e.description()===null?"":e.description();s=s.toLowerCase().replace(n," ");var o=t.path===null?"":t.path;o=o.toLowerCase().replace(n," ");var u=t.name().toLowerCase().replace(n," ");i.indexOf(r)!==-1||s.indexOf(r)!==-1||o.indexOf(r)!==-1||u.indexOf(r)!==-1?e.isVisible(!0):e.isVisible(!1)})},t.prototype.hydratePaletteItems=function(e){var t=this;return e.map(function(e){return t.itemIdSeed++,{id:ko.observable(e.Id),name:ko.observable(e.Description.Name),description:ko.observable(e.Description.Description),type:ko.observable("todo"),classId:ko.observable("xe-paletteItem xe-todoPaletteItem"),tooltip:ko.observable(e.Description.Description),isVisible:ko.observable(!0)}})},t}(n.Disposable);t.PaletteCategoryViewModel=o,t.hydratePaletteCategoriesAsync=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/V2/Property",["require","exports","../../Contracts/V2/Constants"],function(e,t,n){var r=function(){function e(e,t){this.value=t,this.name=e,this.label=e,this.tooltip=e,this.parameterType=n.UxControls.String}return e}();t.StaticProperty=r;var i=function(e){function t(t,n,r){e.call(this,t,r),this.placeholderText=n}return __extends(t,e),t}(r);t.EditableTextProperty=i;var s=function(e){function t(t,n){e.call(this,t,ko.observable(n))}return __extends(t,e),t}(r);t.LinkProperty=s;var o=function(e){function t(t,n){e.call(this,t,ko.observable(n))}return __extends(t,e),t}(r);t.ButtonProperty=o;var u=function(){function e(e,t,n,r){this.value=r,this.name=e,this.label=t,this.tooltip=n}return e}();t.BooleanProperty=u}),define("generated/DataLabClient/Model/V2/WorkspaceContext",["require","exports","../../CustomDomEvent"],function(e,t,n){function s(){return i||(i=new r),i}var r=function(){function e(){this.allRuntimes={},this.defaultContext={Name:"",MajorVersion:"",MinorVersion:"",DescriptionVersion:""},this._currentContext=this.defaultContext,this._contextChangedEvent=new n.CustomDomEvent("WorkspaceContextChanged")}return Object.defineProperty(e.prototype,"contextChangedEvent",{get:function(){return this._contextChangedEvent},enumerable:!0,configurable:!0}),e.prototype.getCurrentContext=function(){return this._currentContext},e.prototype.setCurrentContext=function(e,t){var n=this._currentContext.Name!==e||this._currentContext.MajorVersion!==t;if(!n)return;this._currentContext=this.allRuntimes[e];if(!this._currentContext)throw new Error("Unknown palette/runtime name");this._currentContext.MajorVersion!==t&&(this._currentContext.MajorVersion=t,this._currentContext.MinorVersion=null),this.contextChangedEvent.trigger(this._currentContext)},e}();t.WorkspaceContext=r;var i=null;t.getWorkspaceContext=s}),define("generated/DataLabClient/Model/V2/ExperimentService",["require","exports","../../Util","./Interfaces","./WorkspaceContext"],function(e,t,n,r,i){var s=r.Services.WorkspaceServiceType,o=function(){function e(e,t,n){this._experimentClient=e,this._notificationClient=t,this._experimentSerializer=n,this.serviceType=1,this._serviceProvider=null}return e.prototype.initialize=function(e){this._serviceProvider=e},e.prototype.listExperimentsAsync=function(){return n.then(this._experimentClient.listExperiments(this._context.Name),function(e){return e.Values})},e.prototype.getExperimentAsync=function(e){var t=this;return n.then(this._experimentClient.getDraft(e),function(e){return n.then(t.getExperimentFamilyAsync(e.FamilyId),function(r){var i=t.hydrateExperimentWithoutName(e);return i.name(r.Name),n.succeed(i)})})},e.prototype.setRuntimeType=function(e){this._context=e},e.prototype.createExperimentFamily=function(e){return n.then(this._experimentClient.insertExperimentFamily({Name:e}),function(e){return e.Id})},e.prototype.getExperimentFamilyAsync=function(e){return this._experimentClient.getExperimentFamily(e)},e.prototype.saveExperimentDraft=function(e){var t=i.getWorkspaceContext(),r=this._experimentSerializer.serializeExperiment(t,e);return n.then(this._experimentClient.saveDraft(e.familyId,r),function(e){return{id:e.Id,parentId:e.ParentId,familyId:e.FamilyId}})},e.prototype.executeExperimentDraft=function(e,t){return t===void 0&&(t=!1),this._experimentClient.executeDraft(e,t)},e.prototype.getExperimentStatus=function(e){return this._notificationClient.getExperimentStatus(e)},e.prototype.hydrateExperimentWithoutName=function(e){var t=this._serviceProvider.getService(2);return this._experimentSerializer.deserializeExperiment(t,e)},e}();t.ExperimentService=o}),define("generated/DataLabClient/Model/V2/Parameter",["require","exports"],function(e,t){var n=function(){function e(e,t,n){this.definition=e,this.detailedDescription=t,this.type=n.getType(this.definition.Type)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.detailedDescription.Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.detailedDescription.Description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"order",{get:function(){return this.detailedDescription.Order},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.definition.Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"referenceName",{get:function(){return this.definition.ReferenceName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this.definition.DefaultValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uxControl",{get:function(){return this.definition.UxControl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uxControlArguments",{get:function(){return this.definition.UxControlArguments},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relevancy",{get:function(){return this.definition.Relevancy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"constraints",{get:function(){return this.definition.Constraints||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueGenerationMethod",{get:function(){return this.definition.ValueGenerationMethod},enumerable:!0,configurable:!0}),e}();t.Parameter=n}),define("generated/DataLabClient/Model/V2/Port",["require","exports"],function(e,t){var n=function(){function e(e,t,n){this.definition=e,this.detailedDescription=t,this.type=n.getType(this.definition.Type)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.detailedDescription.Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.detailedDescription.Description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.definition.Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"referenceName",{get:function(){return this.definition.ReferenceName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptional",{get:function(){return this.definition.IsOptional},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueGenerationMethod",{get:function(){return this.definition.ValueGenerationMethod},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"order",{get:function(){return this.detailedDescription.Order},enumerable:!0,configurable:!0}),e}();t.Port=n}),define("generated/DataLabClient/Model/V2/FunctionService",["require","exports","../../Util","./TypeDictionary","./Parameter","./Port","./Validation","./Interfaces"],function(e,t,n,r,i,s,o,u){var a=function(){function e(e){this._client=e,this.serviceType=2,this._serviceProvider=null,this._categoryList=null,this._dictionary=null}return e.prototype.initialize=function(e){this._serviceProvider=e},e.prototype.populateDictionaryAsync=function(){var e=this;if(this._populateDictionaryPromise)return this._populateDictionaryPromise;var t,i,s=this.definitionService.getRuntimeDefinition().done(function(e){t=e}),u=this.descriptionService.getRuntimeDescription().done(function(e){i=e});return this._populateDictionaryPromise=n.when(s,u).done(function(){e._dictionary||(e._typeDictionary=new r.TypeDictionary(t,i),e.populateDictionary(t.Functions,i.FunctionDescriptions),o.validateRuntimeDefinition(t))}),this._populateDictionaryPromise},e.prototype.getFunction=function(e){var t=this._dictionary[e];return t?new f(t,this._typeDictionary):null},e.prototype.getFunctionsByCategoryAsync=function(){var e=this;return this._categoryList?n.when(this._categoryList):(this._listCategoryPromise||(this._listCategoryPromise=n.then(this.descriptionService.getRuntimeDescription(),function(t){return e._categoryList?n.when(e._categoryList):e.populateCategoryList(t)}).always(function(){e._listCategoryPromise=null})),this._listCategoryPromise)},e.prototype.setRuntimeType=function(e){this._context=e,this._categoryList=null,this._dictionary=null,this._listCategoryPromise=null,this._typeDictionary=null,this._populateDictionaryPromise=null},Object.defineProperty(e.prototype,"descriptionService",{get:function(){return this._serviceProvider.getService(4)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"definitionService",{get:function(){return this._serviceProvider.getService(3)},enumerable:!0,configurable:!0}),e.prototype.createFunctionCategory=function(e,t){var n=this,r=[],i=[];return e.Children&&e.Children.length&&(r=e.Children.map(function(e){return n.createFunctionCategory(e,t)})),e.FunctionIds&&e.FunctionIds.length&&e.FunctionIds.forEach(function(e){var n=o.tryGetDescriptionById(e,t.FunctionDescriptions);n.Id=e,i.push(n)}),{description:e.Description,children:r.sort(function(e,t){return e.description.Order-t.description.Order}),functions:i.sort(function(e,t){return e.Description.Order-t.Description.Order})}},e.prototype.populateCategoryList=function(e){var t=this;return this._categoryList=e.FunctionCategories.map(function(n){return t.createFunctionCategory(n,e)}),this._categoryList},e.prototype.populateDictionary=function(e,t){var n=this;this._dictionary={},e.forEach(function(e){var r=o.tryGetDescriptionById(e.Id,t);n._dictionary[e.Id]={definition:e,description:r}})},e}();t.FunctionService=a;var f=function(){function e(e,t){this.value=e,this.typeDictionary=t,this._parameters=null,this._inputs=null,this._outputs=null}return Object.defineProperty(e.prototype,"id",{get:function(){return this.value.definition.Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.value.description.Description.Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entryPoint",{get:function(){return this.value.definition.EntryPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.value.description.Description.Description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exposure",{get:function(){return this.value.definition.Exposure},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parameters",{get:function(){var e=this;return this._parameters?this._parameters:(this._parameters=[],this.value.definition.Parameters.forEach(function(t){var n=o.tryGetDescriptionById(t.Id,e.value.description.ParameterDescriptions);e._parameters.push(new i.Parameter(t,n,e.typeDictionary))}),this._parameters.sort(function(e,t){return e.order-t.order}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){var e=this;return this._inputs?this._inputs:(this._inputs=[],this.value.definition.Inputs.forEach(function(t){var n=o.tryGetDescriptionById(t.Id,e.value.description.InputDescriptions);e._inputs.push(new s.Port(t,n,e.typeDictionary))}),this._inputs.sort(function(e,t){return e.order-t.order}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var e=this;return this._outputs?this._outputs:(this._outputs=[],this.value.definition.Outputs.forEach(function(t){var n=o.tryGetDescriptionById(t.Id,e.value.description.OutputDescriptions);e._outputs.push(new s.Port(t,n,e.typeDictionary))}),this._outputs.sort(function(e,t){return e.order-t.order}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dependencies",{get:function(){return this.value.definition.Dependencies},enumerable:!0,configurable:!0}),e}()}),define("generated/DataLabClient/Model/V2/WorkspaceSummaryService",["require","exports","./Interfaces"],function(e,t,n){var r=function(){function e(e,t){this.workspaceId=e,this.friendlyName=t,this.serviceType=0}return e.prototype.initialize=function(e){},e.prototype.setRuntimeType=function(e){},e}();t.WorkspaceSummaryService=r}),define("generated/DataLabClient/Model/V2/RuntimeDefinitionService",["require","exports","./Interfaces"],function(e,t,n){var r=function(){function e(e){this._client=e,this.serviceType=3}return e.prototype.initialize=function(e){},e.prototype.getRuntimeDefinition=function(){return this._client.getRuntimeDefinition(this._currentContext.Name,this._currentContext.MajorVersion,this._currentContext.MinorVersion)},e.prototype.setRuntimeType=function(e){this._currentContext=e},e.prototype.getRuntimeMajorVersions=function(){return this._client.getRuntimeMajorVersions(this._currentContext.Name)},e}();t.RuntimeDefinitionService=r}),define("generated/DataLabClient/Model/V2/RuntimeDescriptionService",["require","exports","./Interfaces"],function(e,t,n){var r=function(){function e(e){this._client=e,this.serviceType=4}return e.prototype.initialize=function(e){},e.prototype.getRuntimeDescription=function(){return this._client.getRuntimeDescription(this._currentContext.Name,this._currentContext.DescriptionVersion)},e.prototype.setRuntimeType=function(e){this._currentContext=e},e}();t.RuntimeDescriptionService=r}),define("generated/DataLabClient/Contracts/V2/Experiment/IExperimentGraph",["require","exports"],function(e,t){(function(e){e[e.Function=0]="Function",e[e.Dataset=1]="Dataset",e[e.Transform=2]="Transform",e[e.TrainedModel=3]="TrainedModel"})(t.NodeType||(t.NodeType={}));var n=t.NodeType;(function(e){e[e.None=0]="None",e[e.Metadata=1]="Metadata",e[e.Data=2]="Data"})(t.OutputResults||(t.OutputResults={}));var r=t.OutputResults}),define("generated/DataLabClient/Model/V2/ExperimentSerializer",["require","exports","../../Contracts/V2/Experiment/IExperimentGraph","./ExperimentModel","./FunctionNodeModel","./ParameterModel","./ConnectionModel","../../Util"],function(e,t,n,r,i,s,o,u){function a(e,t){var n={Id:t.id,ParentId:t.parentId,FamilyId:t.familyId,NodeStates:h(t),Graph:b(e,t),ClientData:l(t)};return n}function f(e,t){var n=new r.ExperimentModel;return n.id=t.Id,n.parentId=t.ParentId,n.familyId=t.FamilyId,w(e,t.Graph,n),p(t.NodeStates,n),c(t.ClientData,n),n}function l(e){var t=e.getFunctions(),n={nodes:{}};return _.forEach(t,function(e){n.nodes[e.clientId]={layout:{x:e.x(),y:e.y(),width:e.width(),height:e.height()},comment:e.comment(),commentCollapsed:e.commentCollapsed()}}),JSON.stringify(n)}function c(e,t){if(!e)return;var n=JSON.parse(e);if(n&&n.nodes){var r=t.getFunctions(Object.keys(n.nodes)),i=_.indexBy(r,"clientId");u.forEach(n.nodes,function(e,t){var n=i[t];n.x(e.layout.x),n.y(e.layout.y),n.height(e.layout.height),n.width(e.layout.width),n.comment(e.comment||""),n.commentCollapsed(e.commentCollapsed)})}}function h(e){return{}}function p(e,t){return}function d(e){var t={};return _.forEach(e,function(e){var n=e.parameter.id,r=e.value()||"";t[n]={Value:r,ExternalName:"",IsSensitive:!1}}),t}function v(e,t){var n={};return u.forEach(e,function(e,r){var i=_.filter(t.parameters,function(e){return e.id===r});if(i.length===0)throw new Error("Cannot find parameter definition with id: "+r);n[r]=new s.ParameterModel(i[0],e.Value)}),n}function m(e,t){var n={};return u.forEach(e.inputPorts,function(e){n[e.portReference.id]||(n[e.portReference.id]=[]),n[e.portReference.id]=_.union(n[e.portReference.id],g(e))}),n}function g(e){var t=[];return u.forEach(e.connections(),function(e){t.push(e.outputPort.portId)}),t}function y(e,t){var n={};for(var r in e.outputPorts){var i=e.outputPorts[r];n[i.portReference.id]={Symbol:i.portId,ExplicitResults:0}}return n}function b(e,t){var n=[],r=t.getFunctions();_.forEach(r,function(e){var r={NodeId:e.clientId,Type:0,ReferenceId:e.referenceId,Parameters:d(e.parameters),Inputs:m(e,t),Outputs:y(e,t)};n.push(r)});var i=e.getCurrentContext(),s={RuntimeName:i.Name,RuntimeMajorVersion:i.MajorVersion,Nodes:n};return s}function w(e,t,n){var r={};_.forEach(t.Nodes,function(t){if(t.Type.toString()!=="Function"&&t.Type!==0)throw new Error("graph node type other than Function is not supported yet");var s=e.getFunction(t.ReferenceId),o=new i.FunctionNodeModel(s,t.NodeId);o.parameters=v(t.Parameters,s),n.addFunction(o),u.forEach(o.outputPorts,function(e,t){r[e.portId]=e})}),_.forEach(t.Nodes,function(e){var t=n.getFunctions([e.NodeId])[0];u.forEach(e.Inputs,function(e,i){var s=t.getInputPortById(i);_.forEach(e,function(e){var t=r[e];if(!t)throw new Error(u.format("Cannot find output port by symbol name '{0}'",e));var i=new o.ConnectionModel(s,t);n.addConnection(i)})})})}t.Instance={serializeExperiment:a,deserializeExperiment:f},t.serializeClientData=l,t.deserializeClientData=c,t.serializeNodeStates=h,t.deserializeNodeStates=p,t.serializeParameters=d,t.deserializeParameters=v,t.serializeInputs=m,t.serializeInput=g,t.serializeOutputs=y,t.serializeGraph=b,t.deserializeGraph=w}),define("generated/DataLabClient/Model/V2/WorkspaceServiceProvider",["require","exports","./Interfaces","./ExperimentService","./FunctionService","./WorkspaceSummaryService","./RuntimeDefinitionService","./RuntimeDescriptionService","./ExperimentSerializer"],function(e,t,n,r,i,s,o,u,a){function c(e){return l?l:e?(l=new f([new s.WorkspaceSummaryService(e.workspaceId,e.workspaceFriendlyName),new o.RuntimeDefinitionService(e),new u.RuntimeDescriptionService(e),new i.FunctionService(null),new r.ExperimentService(e,e,a.Instance)]),l):null}var f=function(){function e(e){var t=this;this.workspaceServices={},e.forEach(function(e){if(t.workspaceServices[e.serviceType])throw new Error("Adding two services with the same key: "+n.Services.WorkspaceServiceType[e.serviceType]);t.workspaceServices[e.serviceType]=e}),Object.freeze(this.workspaceServices),this.initializeServices()}return e.prototype.getService=function(e){var t=e;if(!this.workspaceServices[t])throw new Error("Unsupported service: "+n.Services.WorkspaceServiceType[e]);return this.workspaceServices[t]},e.prototype.setRuntimeType=function(e){for(var t in this.workspaceServices)this.workspaceServices[t].setRuntimeType(e)},e.prototype.initializeServices=function(){for(var e in this.workspaceServices)this.workspaceServices[e].initialize(this)},e}();t.WorkspaceServiceProvider=f;var l=null;t.getWorkspaceServiceProvider=c});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/PropertyViewModel",["require","exports","../../../../../DataLabClient/Disposable","../../../../../DataLabClient/Model/V2/ParameterModel"],function(e,t,n,r){(function(e){e[e.Textbox=0]="Textbox",e[e.Checkbox=1]="Checkbox",e[e.Textarea=2]="Textarea",e[e.Select=3]="Select",e[e.Link=4]="Link",e[e.Button=5]="Button",e[e.Credential=6]="Credential",e[e.ColumnPicker=7]="ColumnPicker",e[e.ParameterRange=8]="ParameterRange",e[e.EditableText=9]="EditableText",e[e.MultiSelect=10]="MultiSelect",e[e.DataGatewaySelector=11]="DataGatewaySelector"})(t.PropertyItemType||(t.PropertyItemType={}));var i=t.PropertyItemType,s=function(e){function t(t){e.call(this),this.property=t,this.isStaticContent=ko.observable(!1),this.type=null,this.currentError=ko.observable(""),this._isExperimentLevel=ko.observable(!1);var n=t instanceof r.ParameterModel&&t.parameter.uxControl==="Mode";this.isLinkable=!n,this.focus=ko.observable(!1),this.templateType=function(){throw new Error("PropertyViewModel is abstract.")},this.linkedParameterName=ko.computed(function(){return""})}return __extends(t,e),Object.defineProperty(t.prototype,"isDisabled",{get:function(){throw new Error("PropertyViewModel is abstract.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isExperimentLevel",{get:function(){return this._isExperimentLevel},enumerable:!0,configurable:!0}),t}(n.Disposable);t.PropertyViewModel=s;var o=function(e){function t(t){e.call(this,t),this.isStaticContent(!0),this._isDisabled=ko.computed(function(){return!0})}return __extends(t,e),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._isDisabled},enumerable:!0,configurable:!0}),t}(s);t.StaticContentPropertyViewModel=o;var u=function(e){function t(t,n){e.call(this,t),this.type=4,this.templateType=function(){return"linkProperty"},n?this.onClick=function(e,t){t.preventDefault(),n(t)}:this.onClick=$.noop}return __extends(t,e),t}(o);t.LinkPropertyViewModel=u;var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(u);t.EndpointPropertyViewModel=a;var f=function(e){function t(t,n){e.call(this,t),this.type=5,this.templateType=function(){return"buttonProperty"},n?this.onClick=function(e,t){t.preventDefault(),n(t)}:this.onClick=$.noop}return __extends(t,e),t}(o);t.ButtonPropertyViewModel=f;var l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(f);t.EndpointDialogPropertyViewModel=l;var c=function(e){function t(t){e.call(this,t),this.type=0,this.templateType=function(){return"staticTextProperty"}}return __extends(t,e),t}(o);t.StaticTextPropertyViewModel=c;var h=function(e){function t(t){e.call(this,t),this.type=1,this.templateType=function(){return"checkboxProperty"}}return __extends(t,e),t}(s);t.CheckboxPropertyViewModel=h;var p=function(e){function t(t){e.call(this,t),this.type=9,this.templateType=function(){return"editableTextAreaProperty"}}return __extends(t,e),t}(s);t.EditableTextPropertyViewModel=p;var d=function(e){function t(t){e.call(this,t),this.parameter=t,this.isLinkable=!1,this.templateType=function(){return"inputParameter"},this._isDisabled=ko.computed(function(){return!1})}return __extends(t,e),t.prototype.validate=function(){return this.parameter.value.validate()},Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._isDisabled},enumerable:!0,configurable:!0}),t}(s);t.WebServicePortParameter=d});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/ParameterViewModel",["require","exports","./PropertyViewModel"],function(e,t,n){var r=function(e){function t(t){var n=this;e.call(this,t),this.parameter=t,this.shouldDisable=ko.observable(!1),this.toolTipText=ko.observable(""),this.readOnlyMode=ko.observable(!1),this.hasDefaultValue=!0,t.parameter.uxControl==="MultiChoice"?this.type=10:t.parameter.uxControl==="Credential"?this.type=6:this.type=0,this.linkClass=ko.computed(function(){return"parameterIsNotLinked linkStatus propertyEditorButton"}),this._isDisabled=ko.computed(function(){return n.shouldDisable()}),this.templateType=function(){switch(n.type){case 0:return"inputParameter";case 6:return"credentialParameter"}},this.hidden=ko.computed(function(){return!t.isRelevant()})}return __extends(t,e),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._isDisabled},enumerable:!0,configurable:!0}),t.prototype.validate=function(){return this.parameter.value.validate()},t}(n.PropertyViewModel);t.ParameterViewModel=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/BooleanParameterViewModel",["require","exports","./PropertyViewModel","./ParameterViewModel"],function(e,t,n,r){var i=function(e){function t(t){e.call(this,t),this.type=1,this.templateType=function(){return"checkboxParameter"},this.boolValue=ko.observable(t.value()==="True"),this.boolValue.subscribe(function(e){t.value(e?"True":"False")})}return __extends(t,e),t}(r.ParameterViewModel);t.BooleanParameterViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/ChoiceParameterViewModel",["require","exports","./PropertyViewModel","./ParameterViewModel"],function(e,t,n,r){var i=function(e){function t(t){e.call(this,t),this.type=3,this.templateType=function(){return"selectParameter"};var n=t.parameter.type;this.choices=n.values}return __extends(t,e),t}(r.ParameterViewModel);t.ChoiceParameterViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/ColumnPickerParameterViewModel",["require","exports","../../../../TS/ViewModel/ExperimentEditor/ColumnPickerViewModel","../../../../TS/ViewModel/ExperimentEditor/TwoPaneColumnPickerViewModel","../../../../../DataLabClient/Features","../../../../../DataLabClient/LocalizedResources","./ParameterViewModel","./PropertyViewModel","../../../ViewModel/ExperimentEditor/CustomUX","../../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){function t(t){var o=this;e.call(this,t),this.type=7,this.templateType=function(){return"columnPickerParameter"},this.isLinkable=!1,this.launchDisabled=ko.observable(!1);var u=!1,l="",c=ko.observable(t.value()),h=f.validatableObservable(c,function(){return""}),p=decodeURIComponent(t.value());if(p[0]!=="{"&&p[0]!=="["&&l&&l!==""){var d=new n.ColumnPickerViewModel(h,u),v=[];d.rules.removeAll();var m=l.split("|");m.forEach(function(e){var t=e.trim().replace(/([A-Z])/g,",$1").split(",").slice(1);t.length===1?t[0]==="All"&&v.push(new n.ColumnPickerRule(n.RuleType.AllColumns,d)):v.push(new n.ColumnPickerRule(n.RuleType.ColumnTypes,d,[],[],[t[0]],[t[1]]))}),v.length>0&&(d.rules(v),v=[]),d.rules().length>0&&c(d.createRulesJSONString()),d.dispose()}this.openColumnPicker=function(){function f(o){if(e.isDisposed)return;Shell.UI.Spinner.hide();if(i.columnPickerRulesRedesignEnabled()){var f=new r.TwoPaneColumnPickerViewModel(h,u,o),l=[new a.CustomUXView(ExperimentEditorTemplates._twoPaneColumnPickerMarkup,f,s.columnPickerByName,f.isEnabled,f.disabledText,function(){f.updateForSelectionByName()}),new a.CustomUXView(ExperimentEditorTemplates._columnPickerMarkup,f,s.columnPickerWithRules,undefined,undefined,function(){f.updateForSelectionWithRules()})],p=function(){t.value()!==c()&&t.value(c())};f.wasSetWithRules?a.openMultipleViews(l,"450px","900px",p,undefined,1):a.openMultipleViews(l,"450px","900px",p)}else{var d=new n.ColumnPickerViewModel(h,u,o),v=ExperimentEditorTemplates._columnPickerOldDesignMarkup;a.open(v,d,"350px","710px")}}o.launchDisabled(!0),Shell.UI.Spinner.show();var e=o;f(),o.launchDisabled(!1)}}return __extends(t,e),t}(o.ParameterViewModel);t.ColumnPickerParameterViewModel=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/ScriptEditorParameterViewModel",["require","exports","../../../../TS/ViewModel/ExperimentEditor/CustomUX","../../../../TS/View/CustomBindingHandlers/Monaco","../../../../../DataLabClient/Constants","../../../../../DataLabClient/Features","../../../../../DataLabClient/LocalizedResources","../../../../../DataLabClient/Logging/Logging","./ParameterViewModel","./PropertyViewModel","../../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o,u,a,f,l){function p(e){return e!==r.MonacoMimeTypes.PlainText}function d(e){e=e.toLowerCase().trim();var t=e?(e.match(/\.[0-9a-z]+$/)||[""])[0]:"",n=null;switch(t){case".r":n=r.MonacoMimeTypes.R;break;case".py":n=r.MonacoMimeTypes.Python;break;case".hql":n=r.MonacoMimeTypes.Hive;break;case".ql":n=r.MonacoMimeTypes.Hive;break;case".sql":n=r.MonacoMimeTypes.Sql;break;case".js":n=r.MonacoMimeTypes.JavaScript;break;case".ts":n=r.MonacoMimeTypes.TypeScript;break;default:n=r.MonacoMimeTypes.PlainText}return n}var c=function(e){function t(t){e.call(this,t);var n=t.parameter.uxControlArguments,r=n&&n.ScriptName||"default.txt";this.monacoMimeType=d(r),this.untabify=p(this.monacoMimeType)}return __extends(t,e),t}(a.ParameterViewModel);t.MonacoParameterViewModel=c;var h=function(e){function t(t){var r=this;e.call(this,t),this.launchDisabled=ko.observable(!1),this.showPopupIcon=ko.observable(!1),this.type=2,this.templateType=function(){return"textAreaParameter"},this.temporaryPropertyValue=l.validatableObservable("",t.validator.validate.bind(t.validator)),!this.isExperimentLevel()&&s.enableScriptEditorPopup()&&this.showPopupIcon(!0),this.closeDialogAndSave=function(){return r.launchDisabled(!1),t.value(r.temporaryPropertyValue()),n.close(),!0};var i=function(){var e=t.value(),n=r.temporaryPropertyValue();if(e!==n){var i=confirm(o.scriptEditorHasChangesConfirmation);if(!i)return!0}};this.openScriptEditor=function(){u.featureUsage({featureID:149,groupID:148}),r.launchDisabled(!0),r.temporaryPropertyValue(t.value()),n.open(ExperimentEditorTemplates._scriptEditorMarkup,r,"90%","90%",i,null,!0,"scriptEditorDialogWindow")}}return __extends(t,e),t}(c);t.ScriptEditorParameterViewModel=h,t.isUntabifyNeeded=p,t.getMimeTypeForScriptName=d});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/ParameterRangeViewModel",["require","exports","./ParameterViewModel","./PropertyViewModel","../../../../../DataLabClient/Validation"],function(e,t,n,r,i){var s=function(e){function t(t,n){var r=this;n===void 0&&(n=null),e.call(this,t),this.type=8,this.templateType=function(){return"parameterRangeParameter"};var i=t.parameter.uxControlArguments;this.title=t.parameter.name,this.minLimit=i.MinLimit,this.maxLimit=i.MaxLimit,this.sliderMin=i.SliderMin,this.sliderMax=i.SliderMax,this.logCapable=i.IsLog,this.hasIndexRuleError=ko.observable(!1),this._roundFn=n||function(e){return e};var s=decodeURIComponent(this.property.value());if(s[0]!=="{"&&s[0]!=="["&&t.parameter.defaultValue){var o=this.sliderMax-this.sliderMin;this.minValue=ko.observable(this._roundFn(this.sliderMin+.1*o)),this.maxValue=ko.observable(this._roundFn(this.sliderMax-.1*o)),this.count="3",this.isLogarithmic=ko.observable(!1),this.defaultLiteralValue=t.parameter.defaultValue.replace(/;/g,","),this.useRangeBuilder=ko.observable(!1)}else{var u=JSON.parse(s);this.minValue=ko.observable(u.minValue),this.maxValue=ko.observable(u.maxValue),this.count=u.count,this.isLogarithmic=ko.observable(u.isLogarithmic),this.defaultLiteralValue=u.literal,this.useRangeBuilder=ko.observable(u.useRangeBuilder)}this.sliderMin<=0&&this.logCapable?this.logMinLimit=1e-4:this.logMinLimit=Math.log(this.sliderMin),this.logMaxLimit=Math.log(this.sliderMax),this.makeJsonString=function(){var e=encodeURIComponent(JSON.stringify({ParameterType:r.parameterType,useRangeBuilder:r.useRangeBuilder(),literal:r.literalList(),isLogarithmic:r.isLogarithmic(),minValue:r.minValue(),maxValue:r.maxValue(),count:r.countValidatable()}));r.property.value(e)},this.logMin=ko.computed({read:function(){return Math.log(r.minValue())},write:function(e){r.minValue(r._roundFn(Math.exp(e)))}}),this.logMax=ko.computed({read:function(){return Math.log(r.maxValue())},write:function(e){r.maxValue(r._roundFn(Math.exp(e)))}})}return __extends(t,e),t.createParameterRangeViewModel=function(e){var t,n=e.parameter.uxControlArguments;return n.ElementType==="Integer"?t=new o(e):t=new u(e),t.finishConstruction(),t},t.prototype.finishConstruction=function(){var e=this,t=new i.RangeCountValidator(this.minValue,this.maxValue,this.parameterType==="Integer");this.validateCount=function(n){var r=t.validate(n);return r?e.hasIndexRuleError(!0):e.hasIndexRuleError(!1),r},this.countValidatable=i.validatableObservable(this.count,this.validateCount),this.countValidatable.startValidating(),this.countValidatable.validate();var n=new i.RangeLimitsValidator(this.minLimit,this.maxLimit,this.parameterType==="Integer");this.validateItems=function(t){var r=n.validate(t);return r?e.hasIndexRuleError(!0):e.hasIndexRuleError(!1),r},this.literalList=i.validatableObservable(this.defaultLiteralValue,this.validateItems),this.literalList.startValidating(),this.literalList.validate(),this.minValue.subscribe(function(){e.countValidatable.validate()}),this.maxValue.subscribe(function(){e.countValidatable.validate()}),this.countValidatable.subscribe(function(){e.makeJsonString()}),this.literalList.subscribe(function(){e.makeJsonString()}),this.minValue.subscribe(function(){e.makeJsonString()}),this.maxValue.subscribe(function(){e.makeJsonString()}),this.useRangeBuilder.subscribe(function(){e.makeJsonString()}),this.isLogarithmic.subscribe(function(){e.makeJsonString()})},t}(n.ParameterViewModel);t.ParameterRangeViewModel=s;var o=function(e){function t(t){var n=this;e.call(this,t,Math.round),this.linSliderStep=1,this.logSliderStep=(this.logMaxLimit-this.logMinLimit)*.005,this.parameterType="Integer",this.rangeString=ko.computed(function(){return""+n.minValue()+" - "+n.maxValue()})}return __extends(t,e),t}(s);t.IntegerParameterRangeViewModel=o;var u=function(e){function t(t){var n=this;e.call(this,t),this.parameterType="Double",this.linSliderStep=(this.sliderMax-this.sliderMin)*.005,this.logSliderStep=(this.logMaxLimit-this.logMinLimit)*.005,this.rangeString=ko.computed(function(){var e=n.minValue()<1?n.minValue().toExponential(2):n.minValue().toPrecision(3),t=n.maxValue()<1?n.maxValue().toExponential(2):n.maxValue().toPrecision(3);return""+e+" - "+t})}return __extends(t,e),t}(s);t.DoubleParameterRangeViewModel=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/CredentialParameterViewModel",["require","exports","./PropertyViewModel","./ParameterViewModel"],function(e,t,n,r){var i=function(e){function t(t){e.call(this,t),this.type=6,this.templateType=function(){return"credentialParameter"}}return __extends(t,e),t}(r.ParameterViewModel);t.CredentialParameterViewModel=i}),define("generated/editor/TS/V2/ViewModel/PropertyPane/ParameterViewModelFactory",["require","exports","../../../../../DataLabClient/Contracts/V2/Constants","./ParameterViewModel","./BooleanParameterViewModel","./ChoiceParameterViewModel","./ColumnPickerParameterViewModel","./ScriptEditorParameterViewModel","./ParameterRangeViewModel","./CredentialParameterViewModel"],function(e,t,n,r,i,s,o,u,a,f){function l(e){switch(e.parameterType){case n.UxControls.Boolean:return new i.BooleanParameterViewModel(e);case n.UxControls.Script:return new u.ScriptEditorParameterViewModel(e);case n.UxControls.ColumnPicker:return new o.ColumnPickerParameterViewModel(e);case n.UxControls.ParameterRange:return a.ParameterRangeViewModel.createParameterRangeViewModel(e);case n.UxControls.Enumerated:return new s.ChoiceParameterViewModel(e);case n.UxControls.Credential:return new f.CredentialParameterViewModel(e);case n.UxControls.String:return new r.ParameterViewModel(e);default:return new r.ParameterViewModel(e)}}t.createParameterViewModel=l;var c=function(){function e(){this.knownParameterToConstructorMap={};if(e._instance)throw new Error("use instance")}return Object.defineProperty(e,"instance",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.register=function(e,t){if(!e)throw new Error("no key given");if(e in this.knownParameterToConstructorMap)throw new Error("class already registered");this.knownParameterToConstructorMap[e]=t},e.prototype.unregister=function(e){if(!e)throw new Error("no parameterType given");delete this.knownParameterToConstructorMap[e]},e.prototype.create=function(e){var t=e.parameterType,n=this.knownParameterToConstructorMap[t]||r.ParameterViewModel;return typeof n=="function"?n(e):new n(e)},e._instance=new e,e}();t.ParameterViewModelFactory=c,function(){var t=c.instance;t.register(n.UxControls.Boolean,i.BooleanParameterViewModel),t.register(n.UxControls.Enumerated,s.ChoiceParameterViewModel),t.register(n.UxControls.ColumnPicker,o.ColumnPickerParameterViewModel),t.register(n.UxControls.Script,u.ScriptEditorParameterViewModel),t.register(n.UxControls.ParameterRange,a.ParameterRangeViewModel.createParameterRangeViewModel)}()});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/PropertyPane/ExperimentV2PropertyTabViewModel",["require","exports","../../../../../DataLabClient/Disposable","../../../../../DataLabClient/Features","../../../../../DataLabClient/LocalizedResources","../../../../../DataLabClient/Model/V2/Interfaces","../../../../../DataLabClient/Contracts/V2/NotificationServiceTypes","../../../../../DataLabClient/Model/V2/Property","../../../../../DataLabClient/Model/V2/WorkspaceServiceProvider","../../../../../DataLabClient/Model/V2/WorkspaceContext","../../../../../DataLabClient/Util","../../../../TS/V2/ExperimentEditorDomEvents","./PropertyViewModel","./ParameterViewModelFactory"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=[],v=function(e){function t(t,n){var s=this;e.call(this),this.experimentViewModel=t,this._runtimeService=n,this.id="ExperimentEditor.ExperimentV2PropertyTab",this.title=i.drawerTitle,this.selected=ko.observable(!1),this.readOnlyMode=ko.observable(!1),this.selectedFunctionNodeModelName=ko.observable(""),this.properties=ko.observableArray([]),this.entityParamsCollapsed=ko.observable(!1),this.functionNodeModel=ko.observable(null),this.nodeHasNoParameters=ko.pureComputed(function(){return s.nodeParameters().length===0&&(!s.functionNodeModel()||!s.functionNodeModel().statusDetails.value())}),this.stdOut=ko.pureComputed(function(){return s.functionNodeModel().standardOutPath()}),this.stdError=ko.pureComputed(function(){return s.functionNodeModel().standardOutPath()}),this.hasStandardOut=ko.pureComputed(function(){return s.functionNodeModel().standardOutPath()!==""}),this.runtimeVersion=ko.observable(""),this.availableRuntimes=ko.observableArray([]),this.experimentPropertiesCollapsed=ko.observable(!1),this.nodeParameters=ko.observableArray(),this.canvasSelectionChangedEventHandler=this.handleCanvasSelectionChange.bind(this),c.canvasSelectionChanged.handle(this.canvasSelectionChangedEventHandler),this.functionService=a.getWorkspaceServiceProvider().getService(2),this.experimentLevelPropertiesVisible=ko.pureComputed(function(){return!r.experimentDescriptionEnabled()||!s.functionNodeModel()}),this.experimentProperties=ko.observableArray(this._createViewModelsForExperimentStatusProperties()),this.availableRuntimeSetup()}return __extends(t,e),t.prototype.dispose=function(){this.disposeAllNodeParameters(),c.canvasSelectionChanged.unhandle(this.canvasSelectionChangedEventHandler),e.prototype.dispose.call(this)},t.prototype.setContainer=function(e){this.tabContainer=e},t.prototype.bindView=function(){this.registerKoComponents()},t.prototype.setFunctionProperties=function(e){this.functionNodeModel(e);if(e){this.selectedFunctionNodeModelName(e.functionReference.name);var t=l.map(e.parameters,function(e){return p.createParameterViewModel(e)});this.disposeAllNodeParameters(),this.nodeParameters(t)}else this.resetBindingProperties()},t.prototype.resetBindingProperties=function(){this.selectedFunctionNodeModelName(""),this.disposeAllNodeParameters()},t.prototype.handleCanvasSelectionChange=function(e,t){if(t&&t.keys&&t.keys.length===1){var n=this.experimentViewModel().experiment.getFunctions(t.keys);n=n.filter(function(e){return t.keys.indexOf(e.clientId)>=0}),n&&n.length===1?this.setFunctionProperties(n[0]):this.setFunctionProperties(null)}else this.setFunctionProperties(null)},t.prototype.disposeAllNodeParameters=function(){this.nodeParameters().forEach(function(e){e.dispose()}),this.nodeParameters.removeAll()},t.prototype.registerKoComponents=function(){ko.components.unregister("experiment-v2-property-tab"),ko.components.register("experiment-v2-property-tab",{viewModel:{instance:this},template:ExperimentEditorTemplates._experimentV2PropertyTabMarkup}),d.forEach(function(e){ko.components.register(e[0],{template:e[1]})})},t.prototype.availableRuntimeSetup=function(){var e=this;this._runtimeService.getRuntimeMajorVersions().done(function(t){e.availableRuntimes(t);var n=f.getWorkspaceContext(),r=n.getCurrentContext();t.forEach(function(t){t===r.MajorVersion&&e.runtimeVersion(t)}),e.runtimeVersion.subscribe(function(t){n.setCurrentContext("PySpark",t),e.experimentViewModel().refreshViewModelAfterContextChange()})})},t.prototype._createViewModelsForExperimentStatusProperties=function(){var e=this,t=ko.pureComputed(function(){return e.experimentViewModel().experiment.startTime()}),r=ko.pureComputed(function(){return e.experimentViewModel().experiment.endTime()}),s=ko.pureComputed(function(){return e.experimentViewModel().experiment.statusCode()}),a=ko.pureComputed(function(){return e.experimentViewModel().experiment.statusDetails()});[t,r,s,a].forEach(function(t){return e.registerForDisposal(new n.DisposableKnockoutObject(t))});var f=[new u.StaticProperty(i.PropertyPanelStartTime,ko.pureComputed(function(){return t()?l.formatDate(t()):""})),new u.StaticProperty(i.PropertyPanelEndTime,ko.pureComputed(function(){return r()?l.formatDate(r()):""})),new u.StaticProperty(i.PropertyPanelStatusCode,ko.pureComputed(function(){return o.JobDriverStatusCode[s()]})),new u.StaticProperty(i.PropertyPanelStatusDetails,a)].map(function(e){return new h.StaticTextPropertyViewModel(e)});return f},t}(n.Disposable);t.ExperimentV2PropertyTabViewModel=v}),define("generated/editor/TS/V2/ViewModel/ExperimentEditor/ExperimentStatusPollingActivity",["require","exports","../../../../../DataLabClient/PollingUtility","../../../../../DataLabClient/Contracts/V2/NotificationServiceTypes"],function(e,t,n,r){var i=function(){function e(e,t,n){this.experimentService=e,this.correlationId=t,this.experimentModel=n}return e.prototype.runOnce=function(){return this.experimentService.getExperimentStatus(this.correlationId)},e.prototype.processResponse=function(e){var t,n=e.JobStatus.toString();if(n===r.JobDriverStatusCode[0]||n===r.JobDriverStatusCode[1])t=2;else if(n===r.JobDriverStatusCode[2])this.updateExperimentWithStatus(e),t=2;else if(n===r.JobDriverStatusCode[3])this.updateExperimentWithStatus(e),t=0;else if(n===r.JobDriverStatusCode[4])this.updateExperimentWithStatus(e),t=1;else{if(n!==r.JobDriverStatusCode[5])throw new Error("Unknown job status code");this.updateExperimentWithStatus(e),t=3}return this.experimentModel.statusCode(e.JobStatus),t},e.prototype.updateExperimentWithStatus=function(e){var t=this;e.NodeStatus.forEach(function(e){var n=t.experimentModel.getFunctions([e.NodeId])[0];n.status(e.NodeStatusCode)})},e}();t.ExperimentStatusPollingActivity=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/V2/ViewModel/ExperimentEditor/ExperimentEditorContainerViewModel",["require","exports","../../../../TS/ViewModel/PaletteControl/PaletteViewModel","../../../../TS/V2/ViewModel/PropertyPane/PropertyEditorViewModel","../../../../../DataLabClient/Constants","../../../../../DataLabClient/Disposable","../../../../../DataLabClient/Logging/Logging","../../../../../DataLabClient/Util","../../../../../DataLabClient/PollingUtility","../../../../../DataLabClient/Model/V2/Interfaces","./ExperimentEditorViewModel","../PaletteControl/PaletteCategoryViewModel","../../../../TS/V2/ViewModel/PropertyPane/ExperimentV2PropertyTabViewModel","../../../../../DataLabClient/Contracts/V2/NotificationServiceTypes","../../../../TS/V2/ViewModel/ExperimentEditor/ExperimentStatusPollingActivity"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=function(e){function t(t,i){var s=this;e.call(this),this.serviceProvider=t,this.searchText=ko.observable(""),this.descriptionFocus=ko.observable(!0),this.paletteIsCollapsed=ko.observable(!0);var u=this.serviceProvider.getService(2);this.registerForDisposal(this.experimentEditorViewModel=new l.ExperimentEditorViewModel(u),this.paletteViewModel=new n.PaletteViewModel);var a=[new h.ExperimentV2PropertyTabViewModel(this.experimentEditorViewModel.experimentViewModel,this.serviceProvider.getService(3))];this.registerForDisposal(this.propertyEditorViewModel=new r.PropertyEditorViewModel(a)),this.buildPaletteCategoriesAsync().then(function(e){s.paletteViewModel.resetCategories(e)}),this.paletteIsCollapsed=ko.observable(!1),this.experimentId=ko.observable(i),this.readOnlyMode=ko.computed(function(){return!1}),this.searchText.extend({rateLimit:{timeout:400,method:"notifyWhenChangesStop"}}).subscribe(function(e){o.featureUsage({featureID:17,groupID:16,experimentID:i,data:e}),s.paletteViewModel.applyPaletteSearch(e)})}return __extends(t,e),Object.defineProperty(t.prototype,"experimentModel",{get:function(){return this.experimentEditorViewModel?this.experimentEditorViewModel.experimentViewModel().experiment:null},enumerable:!0,configurable:!0}),t.prototype.loadFromService=function(e){var t=this,n=$.Deferred();if(this.experimentId()){var r=this.serviceProvider.getService(1);r.getExperimentAsync(this.experimentId()).done(function(e){t.descriptionFocus(!0),t.experimentEditorViewModel.experiment=e,n.resolve()}).fail(function(e){n.reject(e)})}else n.resolve();return u.when(n)},t.prototype.submit=function(e){var t=this,n=this.experimentEditorViewModel.experimentViewModel().experiment;return u.then(this.experimentService.executeExperimentDraft(n.familyId),function(e){Shell.UI.Spinner.hide();var r=Object.keys(e.Execution.Nodes),i=n.getFunctions(r);i.forEach(function(t){var n=e.Execution.Nodes[t.clientId];t.standardErrorPath(n.StdErrLocation),t.standardOutPath(n.StdOutLocation),t.status(0)});var s=new d.ExperimentStatusPollingActivity(t.experimentService,e.Execution.CorrelationId,n),o=new a.ConstantInterval(3e3),u=new a.PollingUtil(s,o);return t.registerForDisposal(u),u.start()})},t.prototype.save=function(e){var t=this;e===void 0&&(e=!1);var n=this.experimentEditorViewModel.experimentViewModel().experiment,r=n.familyId?u.succeed(n.familyId):this.experimentService.createExperimentFamily(n.name());return u.then(r,function(e){return n.familyId=e,t.experimentService.saveExperimentDraft(n)})},Object.defineProperty(t.prototype,"experimentService",{get:function(){return this.serviceProvider.getService(1)},enumerable:!0,configurable:!0}),t.prototype.buildPaletteCategoriesAsync=function(){var e=this.serviceProvider.getService(2);return c.hydratePaletteCategoriesAsync(e)},t}(s.Disposable);t.ExperimentEditorContainerViewModel=v});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/DraftStateMachine",["require","exports","../Util","../LocalizedResources","../Logging/Logging","../Disposable","../PromiseQueue","../Features","../StateUtil","../Shell/Button","../Shell/ButtonFactory","../Shell/NotificationControl"],function(e,t,n,r,i,s,o,u,a,f,l,c){(function(e){e[e.None=0]="None",e[e.Saved=1]="Saved",e[e.Saving=2]="Saving",e[e.SaveFailed=3]="SaveFailed"})(t.DraftSaveState||(t.DraftSaveState={}));var h=t.DraftSaveState,p=function(e){function t(t,n){var r=this;e.call(this),this.workspace=t,this.experiment=n,this.queuedSave=null,this.queuedSubmit=null,this.discardTriggered=ko.observable(!1),this.saveStatus=ko.observable({state:0,lastSave:null}),this.postedVersion=ko.observable(this.experiment.editVersion()),this.queuedAnnotationSave=null,this.dirty=ko.computed(function(){return r.experiment.dirtyAnnotationStatus.isDirty()||r.experiment.editVersion()!==r.postedVersion()&&(r.experiment.isDraft()||u.dirtyLabelsInDirtyablesEnabled()&&a.isFinishedState(r.experiment.statusCode()))&&!r.discardTriggered()}),this.promiseQueue=new o,this.annotationPromiseQueue=new o,this.timedSave=function(){r.discardTriggered()||(r.experiment.dirtyStatus.isDirty()&&r.saveDraft(),r.experiment.dirtyAnnotationStatus.isDirty()&&r.updateAnnotations())},this.timer=new s.DisposableTimer(1e4,this.timedSave),this.dirty.subscribe(function(e){e&&!r.timer.isCountingDown()&&r.timer.start()})}return __extends(t,e),t.prototype.dirtyAnnotations=function(e){e.forEach(function(e){e.dirtyAnnotationStatus.dirty()})},t.prototype.updateAnnotations=function(e){var t=this;e===void 0&&(e=!1);if(this.queuedAnnotationSave)return this.queuedAnnotationSave;var s=n.filter(n.values(this.experiment.annotations),function(e){return e&&e.annotation.dirtyAnnotationStatus.isDirty()&&!e.annotation.deleted()}),o=s.map(function(e){return e.annotation}),u=o.map(function(e){return e.id}),a=this.annotationPromiseQueue.enqueue(function(){t.queuedAnnotationSave=null;var e=$.Deferred();return t.saveStatus({state:2,lastSave:null}),t.experiment.dirtyAnnotationStatus.clean(),e=t.workspace.updateExperimentAnnotationsAsync(t.experiment.experimentId(),o),e}).done(function(e){i.customEvent({key:"UpdateSucceeded",type:"UpdateAnnotation",data:u}),e.forEach(function(e){var n=t.experiment.getAnnotationNode(e.id);n&&(n.annotation.etag=e.etag)}),!t.experiment.dirtyStatus.isDirty()&&!t.experiment.dirtyAnnotationStatus.isDirty()?(t.saveStatus({state:1,lastSave:new Date}),t.timer.cancel()):t.timer.isCountingDown()||t.timer.start()}).fail(function(s){if(s instanceof n.AjaxError&&s.xmlHttpRequest){var a={state:3,lastSave:null},f=s.xmlHttpRequest.status>=400&&s.xmlHttpRequest.status<500;if(f){var l={title:r.annotationCouldNotBeUpdated,details:s.xmlHttpRequest.responseText};s.xmlHttpRequest.status===412?(i.customEvent({key:"EtagConflict",type:"UpdateAnnotation",data:u}),i.exception(s,"EtagConflictUpdatingAnnotation","UpdateAnnotation",u),a.state=0,l.title=r.annotationCannotUpdateAlreadyUpdated):s.xmlHttpRequest.status===404&&(i.customEvent({key:"NotFound",type:"UpdateAnnotation",data:u}),i.exception(s,"NotFoundUpdatingAnnotation","UpdateAnnotation",u)),n.showErrorNotification(l)}f&&!t.experiment.dirtyStatus.isDirty()||e?t.timer.cancel():(a.isRetrying=!0,t.dirtyAnnotations(o)),t.saveStatus(a)}});return this.annotationPromiseQueue.size()>1&&(this.queuedAnnotationSave=a),a},t.prototype.validateForSaveDraft=function(){var e=null;return!this.experiment.isDraft()&&(!u.dirtyLabelsInDirtyablesEnabled()||!a.isFinishedState(this.experiment.statusCode()))?e=r.modelCannotSaveExp:this.discardTriggered()&&(e=r.modelCannotQueueSave),e},t.prototype.saveDraft=function(){var e=this,t=this.validateForSaveDraft();if(t)return n.fail(new Error(t));if(this.queuedSave)return this.queuedSave;var s=this.promiseQueue.enqueue(function(){e.queuedSave=null,e.savingVersion=e.experiment.editVersion();var t=$.Deferred();return e.experiment.saveError()?(e.experiment.dirtyStatus.clean(),t.resolve(null)):(e.saveStatus({state:2,lastSave:null}),e.experiment.dirtyStatus.clean(),e.experiment.persistedOnService()?t=e.workspace.updateDraftAsync(e.experiment):t=e.workspace.saveDraftAsync(e.experiment),t)}).done(function(t){t&&(e.experiment.persistedOnService()?i.customEvent({key:"Succeeded",type:"SaveDraft",experimentID:t.ExperimentId}):(i.customEvent({key:"Succeeded",type:"SaveDraft",experimentID:t.ExperimentId,data:{tempId:e.experiment.temporaryId}}),e.experiment.experimentId(t.ExperimentId)),e.experiment.etag(t.Etag),e.saveStatus({state:1,lastSave:new Date}),e.postedVersion(e.savingVersion),e.experiment.editVersion()===e.postedVersion()&&!e.experiment.dirtyStatus.isDirty()&&!e.experiment.dirtyAnnotationStatus.isDirty()?e.timer.cancel():e.timer.isCountingDown()||e.timer.start())}).fail(function(t){if(t instanceof n.AjaxError&&t.xmlHttpRequest){var s;if(t.xmlHttpRequest.status===412){i.customEvent({key:"EtagConflict",type:"SaveDraft",data:undefined}),s={state:0,lastSave:null};var o=c.notificationControl.createConfirmation(r.modelCannotSaveDraftAlreadyUpdated,c.NotificationStatus.Active),u=l.createButtonFactory();o.setActions([u.createButton(0)]),c.notificationControl.add(o)}else t.xmlHttpRequest.status===404?(i.customEvent({key:"NotFound",type:"SaveDraft",data:undefined}),s={state:3,lastSave:null}):s={state:3,lastSave:null};var a=t.xmlHttpRequest.status>=400&&t.xmlHttpRequest.status<500;a?e.timer.cancel():(s.isRetrying=!0,e.timer.start()),e.saveStatus(s)}});return this.promiseQueue.size()>1&&(this.queuedSave=s),s},t.prototype.discardDraft=function(){var e=this;return this.experiment.isDraft()?this.experiment.persistedOnService()?this.discardTriggered()?n.fail(new Error(r.modelCannotQueueDiscard)):this.promiseQueue.enqueue(function(){return e.discardTriggered(!0),e.workspace.deleteExperimentAsync(e.experiment.experimentId(),e.experiment.etag()).fail(function(){e.discardTriggered(!1)})}):this.promiseQueue.enqueue(function(){return e.discardTriggered(!0),n.when(null)}):n.fail(new Error(r.modelCannotDiscardQueued))},t.prototype.submitExperiment=function(e){var t=this;if(this.discardTriggered())return n.fail(new Error(r.modelCannotQueueSubmit));if(this.queuedSubmit)return this.queuedSubmit;var s=this.promiseQueue.enqueue(function(){return t.queuedSubmit=null,t.workspace.submitExperimentAsync(t.experiment,e)}).done(function(e){t.experiment.experimentId(e.ExperimentId),t.experiment.etag(e.Etag),i.customEvent({key:"Succeeded",type:"SubmitExperiment",experimentID:e.ExperimentId})}).fail(function(e){if(e instanceof n.AjaxError&&e.xmlHttpRequest.status===412){var s=c.notificationControl.createConfirmation(r.modelExperimentCannotRun,c.NotificationStatus.Active),o=l.createButtonFactory();s.setActions([o.createButton(0)]),c.notificationControl.add(s),i.customEvent({key:"Timeout",type:"SubmitExperiment",data:undefined}),t.timer.cancel()}else t.experiment.experimentId()&&t.workspace.getExperimentAsync(t.experiment.experimentId()).done(function(e){t.experiment.etag(e.etag())})});return this.promiseQueue.size()>1&&(this.queuedSubmit=s),s},t.prototype.updateExperiment=function(){var e=this;return this.workspace.updateDraftAsync(this.experiment).done(function(e){i.customEvent({key:"Succeeded",type:"UpdateExperiment",experimentID:e.ExperimentId})}).fail(function(t){i.customEvent({key:"Failed",type:"UpdateExperiment",experimentID:e.experiment.experimentIdForLogging})})},t.prototype.dispose=function(){this.timer!==null&&this.timer.dispose(),e.prototype.dispose.call(this)},t}(s.Disposable);t.DraftStateMachine=p});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/ExperimentViewV2",["require","exports","../DataLabViews/AllExperimentsView","../TS/ViewModel/ExperimentEditor/CustomUX","../DataLabViews/DataLabView","../TS/V2/View/ExperimentEditorContainer","../TS/V2/ViewModel/ExperimentEditor/ExperimentEditorContainerViewModel","../TS/ViewModel/Dialogs/TrialDialogs","../../DataLabClient/Constants","../../DataLabClient/Features","../../DataLabClient/Shell/NotificationControl","../../DataLabClient/Shell/Button","../../DataLabClient/Shell/ButtonFactory","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Util","../../DataLabClient/Model/Workspace","../../DataLabClient/Logging/IfxScenarioStopWatch","../../DataLabClient/Model/DraftStateMachine"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){function b(e,n,r){n===void 0&&(n=null),r===void 0&&(r=null);if(typeof n=="string"&&n.toLowerCase()!==m.workspace.id.toLowerCase()){var i=r||"";i=i+"/Home/ViewWorkspace/"+n;var s=Shell.UI.Navigation.calculateNavigationPath({extension:t.experimentExtensionName,type:t.ExperimentType.name,name:e,view:"ViewExperiment"}),o=i+s;return o}return Shell.UI.Navigation.calculateNavigationPath({extension:t.experimentExtensionName,type:t.ExperimentType.name,name:e})}function w(e,n,r){n===void 0&&(n=null),r===void 0&&(r=null);if(n||r){var i=b(e,n,r);window.location.href=i}else Shell.UI.Navigation.navigate({extension:t.experimentExtensionName,type:t.ExperimentType.name,name:e})}t.experimentExtensionName="ExperimentV2",t.ExperimentType={name:"ExperimentV2",displayName:p.experiment,dataFunction:function(e,t,n){return{data:[{name:e.ExperimentV2,displayName:e.ExperimentV2}]}},draftExperimentId:"Draft"},t.calculateNavigationPathToExperiment=b,t.navigateToExperiment=w;var E=function(e){function i(n,r,i){e.call(this,t.experimentExtensionName),this.experimentId=r,this.serviceProvider=i,d.info("Opening the experiment viewer","ExperimentView",r),this._renderArea=n,this.commandsDisabled=ko.observable(!1);var u=this._renderArea.querySelector("#ExperimentEditor");this.registerForDisposal(this.xeViewModel=new o.ExperimentEditorContainerViewModel(i,r===t.ExperimentType.draftExperimentId?null:r),this.xeControlContainer=new s.ExperimentEditorContainer(u,this.xeViewModel)),cdm.setActiveItem(this),document.querySelector("#tabcontainer .itemtitle").textContent=""}return __extends(i,e),i.prototype.open=function(e){var t=this,n=this.xeViewModel.loadFromService(e);Shell.UI.Spinner.show(),this.commandsDisabled(!0),n.done(function(){t.isViewExtensionStillActive()&&t._renderArea&&(Shell.UI.Spinner.hide(),t.xeViewModel.experimentEditorViewModel.experimentViewModel().experimentLoaded(!0),cdm.setActiveItem(t),window.newExperimentGeneration&&(window.newExperimentGeneration.numTimesNavigateCalled>1?window.newExperimentGeneration.numTimesNavigateCalled--:(t.xeViewModel.experimentId()===window.newExperimentGeneration.id&&window.newExperimentGeneration.createCopy(),window.newExperimentGeneration=null)),t.commandsDisabled(!1),$(document).trigger("experimentLoaded")),e.stop({experimentIdFinal:t.xeViewModel.experimentId()})}).fail(function(n){e.error(n,"",!0);if(n instanceof v.AjaxError&&n.xmlHttpRequest.status===404){t._handleMissingExperiment(n);return}v.when(v.fail(n))})},i.prototype._handleMissingExperiment=function(e){var t=v.format(p.ErrorExperimentNotFound,this.xeViewModel.experimentId()),r=new Shell.UI.Notifications.Confirmation(t,"active");r.setActions([Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(r),n.navigateToExperimentList()})]),Shell.UI.Notifications.add(r),d.error("experiment not found","ExperimentView",e&&e.message)},i.prototype.setCommands=function(){function t(e,t){return function(){var n=cdm.currentActiveItem;if(!(n instanceof i))throw"Expected an ExperimentView to handle command";d.featureUsage({featureID:t,groupID:0,exerimentID:n.xeViewModel.experimentId()}),e.call(n)}}var e=this,n=new Shell.UI.Commands.Command(p.commandsSave,Shell.UI.Icons.save,t(i.prototype.save,108),null,this.commandsDisabled()||this.xeViewModel.readOnlyMode()),r=new Shell.UI.Commands.Command(p.commandsRun,Shell.UI.Icons.play,t(i.prototype.submit,112),null,this.commandsDisabled()||this.xeViewModel.readOnlyMode()),s=[n,r];Shell.UI.Commands.clear(),Shell.UI.Commands.add(s),ko.computed(function(){e.commandsDisabled()||e.xeViewModel.readOnlyMode()?(n.setDisabled(!0),r.setDisabled(!0)):(n.setDisabled(!1),r.setDisabled(!1))})},i.prototype.dispose=function(){this._renderArea=null,r.isOpen()&&r.close(),e.prototype.dispose.call(this)},i.prototype.save=function(){var e=this;this.commandsDisabled(!0);var t=this.xeViewModel.experimentEditorViewModel.experimentViewModel(),n=t?{experimentId:t.experiment.id||"unknown"}:{};d.featureUsage({featureID:8,groupID:3,exerimentID:this.xeViewModel.experimentId(),data:n});var r=new g.IfxScenarioStopWatch(13,n);r.start(),this.xeViewModel.save().fail(function(e){r.error(e,"",!0);if(f.trialLimitationsEnabled())u.tryShowDialogForTrialRestriction(e);else if(e instanceof v.AjaxError&&e.xmlHttpRequest){var t=e;if(t.xmlHttpRequest.status===412){d.customEvent({key:"EtagConflict",type:"SaveDraft",data:undefined});var n=l.notificationControl.createConfirmation(p.modelCannotSaveDraftAlreadyUpdated,l.NotificationStatus.Active),i=h.createButtonFactory();n.setActions([i.createButton(0)]),l.notificationControl.add(n)}else d.customEvent({key:t.xmlHttpRequest.status===404?"NotFound":"GeneralFailure",type:"SaveDraft",data:undefined}),v.showErrorNotification({title:p.DraftState_SaveFailedRetrying,details:e.message})}}).done(function(t){r.stop();var n=e.xeViewModel.experimentEditorViewModel.experiment;n.id=t.id,n.parentId=t.parentId,n.familyId=t.familyId,w(t.familyId)}).always(function(){e.commandsDisabled(!1)})},i.prototype.submit=function(){var e=this,t=this.xeViewModel.experimentEditorViewModel.experiment.familyId?v.succeed(null):this.xeViewModel.save();t.done(function(t){if(t){var n=e.xeViewModel.experimentEditorViewModel.experiment;n.id=t.id,n.parentId=t.parentId,n.familyId=t.familyId}var r=(new Date).getTime(),i=e.xeViewModel.experimentEditorViewModel.experimentViewModel(),s=i?{experimentId:i.experiment.id||"unknown",name:i.experiment.name||"unknown"}:{};g.IfxScenario(7,0,s);var o=new g.IfxScenarioStopWatch(6,s);o.start(),d.info("Submitting experiment","ExperimentView:submit",i.experiment.id);var u=window.location.hash;if(e.validateExperiment()){var a=i.experiment.familyId;e.commandsDisabled(!0),d.featureUsage({featureID:4,groupID:3,experimentID:e.xeViewModel.experimentId()});var f=function(){(window.location.hash===u||t)&&w(a)};Shell.UI.Spinner.show(),e.xeViewModel.submit(f).done(function(t){e.commandsDisabled(!1),o.stop()}).fail(function(t){o.error(t);if(t instanceof v.AjaxError&&t.xmlHttpRequest){var n=t;d.customEvent({key:n.xmlHttpRequest.status===404?"NotFound":"GeneralFailure",type:"SubmitExperiment",data:undefined}),v.showErrorNotification({title:v.format(p.experimentSubmissionFailedNoRequestId,""),details:t.message})}e.commandsDisabled(!1)}).always(function(){Shell.UI.Spinner.hide()})}else o.error({name:"invalid experiment",message:"invalid experiment"})})},i.prototype.validateExperiment=function(){return!0},i}(i.ViewBase);t.ExperimentView=E}),define("generated/editor/TS/ViewModel/DrawerMenu/NewDrawerMenu",["require","exports","../../../DataLabViews/ExperimentView","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){function o(){var e=$(".fxs-drawerdetails-details-box");e.children().each(function(e,t){var n=ko.dataFor(t);n instanceof r.Disposable?n.dispose():n=null}),e.empty()}function u(){e(["../../../TS/ViewModel/DrawerMenu/NewExperimentMenuFromCatalogViewModel"],function(e){var t=$(".fxs-drawerdetails-details-box");t.children().each(function(t,n){var r=ko.dataFor(n);r instanceof e.NewAbstractCatalogMenuViewModel&&r.setViewMoreLabelMargin()})})}function a(e,t,r){var o=window.newExperimentGeneration?++window.newExperimentGeneration.numTimesNavigateCalled:1;window.newExperimentGeneration={id:e,numTimesNavigateCalled:o,createCopy:function(){var e=cdm.getActiveItem();e.xeViewModel.copy(s.format(i.newExperimentMenuTemplateCopyName,t)),r&&r()}},n.navigateToExperiment(e)}t.NewDrawerMenuDestroy=o,t.NewDrawerMenuRecalculateSize=u,t.openSampleAsCopy=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DrawerMenu/NewExperimentMenuViewModel",["require","exports","../../../DataLabViews/ExperimentView","../../../TS/ViewModel/DrawerMenu/NewDrawerMenu","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Trial","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l){function v(){r.NewDrawerMenuDestroy();var e=new d,t=$(ExperimentEditorTemplates._newExperimentMenuMarkup).prependTo(".fxs-drawerdetails-details-box");ko.applyBindings(e,t[0]);if(h.templateList&&h.templateList.length>0)e.sampleExperimentTemplates(h.templateList);else{var n=h.initialize(window.Workspace);n.done(function(){e.sampleExperimentTemplates(h.templateList)}).always(function(){})}}var c=function(){function e(t,r){this.experimentId=t,this.description=r,this.isGuidedExperiment=!1;if(t===n.ExperimentType.draftExperimentId)this.experimentIcon="/Content/SampleExperimentIcons/PlusBlankExperiment.svg",this.title=this.description;else if(r===i.GuidedExperimentDescription)this.title=this.description,this.experimentIcon="/Content/SampleExperimentIcons/GuidedExperimentShortTile.svg",this.isGuidedExperiment=!0;else{this.title=this.description.replace(/^Sample Experiment(:\s|\s-\s)/,"");if(e.numberedSampleRegEx.test(this.description)){var s=this.description.match(e.numberedSampleRegEx)[1];this.experimentIcon=Number(s)<=7?"/Content/SampleExperimentIcons/Sample"+s+".svg":"/Content/SampleExperimentIcons/MachineLearningSample.svg"}else this.experimentIcon="/Content/SampleExperimentIcons/MachineLearningSample.svg"}}return e.templateSortFunction=function(t,r){if(t.experimentId===r.experimentId)return 0;if(t.experimentId===n.ExperimentType.draftExperimentId)return-1;if(r.experimentId===n.ExperimentType.draftExperimentId)return 1;if(e.numberedSampleRegEx.test(t.description)&&!e.numberedSampleRegEx.test(r.description))return-1;if(!e.numberedSampleRegEx.test(t.description)&&e.numberedSampleRegEx.test(r.description))return 1;if(e.numberedSampleRegEx.test(t.description)&&e.numberedSampleRegEx.test(r.description)){var i=t.description.match(e.numberedSampleRegEx)[1],s=r.description.match(e.numberedSampleRegEx)[1];return i<s?-1:1}return 0},e.numberedSampleRegEx=/^\sSample ([1-9][0-9]*):.*/,e}();t.NewExperimentTemplate=c;var h=function(){function e(){}return e.initializeTutorialTemplate=function(t){if(!t||!t.listExperimentsAsync)return;var n={includeNonLeaf:!1,includeArchived:!1};return l.then(t.listExperimentsAsync(n),function(n){n.forEach(function(n){var r=n.ExperimentId.split(".")[0],i=new c(n.ExperimentId,n.Description);r&&r!==t.id&&i.isGuidedExperiment&&!e.guidedExperimentTemplate&&(e.guidedExperimentTemplate=i)})})},e.initialize=function(t){if(!t||!t.listExperimentsAsync)return;var n={includeNonLeaf:!1,includeArchived:!1},r=e.currentInitializationPromise&&e.currentInitializationPromise.state()==="pending";return r||(e.currentInitializationPromise=l.then(t.listExperimentsAsync(n),function(n){e.templateList=[],f.isWorkspaceTypeAnonymous()&&(n=n.filter(f.filterSample)),n.forEach(function(n){var r=n.ExperimentId.split(".")[0];if(r&&r!==t.id){var i=new c(n.ExperimentId,n.Description);i.isGuidedExperiment?e.guidedExperimentTemplate=i:e.templateList.push(i)}}),e.templateList.sort(c.templateSortFunction),o.guidedExperimentEnabled()&&e.guidedExperimentTemplate&&e.templateList.unshift(e.guidedExperimentTemplate)})),e.currentInitializationPromise},e.templateList=[],e.guidedExperimentTemplate=null,e.currentInitializationPromise=null,e}();t.NewExperimentTemplateList=h;var p=function(){function e(e,t){var r=this;this.id=e.experimentId,this.title=e.title,this.description=e.description,this.icon=e.experimentIcon,this.isBlankTemplate=e.experimentId===n.ExperimentType.draftExperimentId,this.isGuidedExperiment=e.isGuidedExperiment,this.isVisible=ko.computed(function(){var e=new RegExp(l.escapeRegExpString(t()),"ig");return e.test(r.title)})}return e}();t.NewExperimentMenuTemplateViewModel=p;var d=function(t){function i(){var i=this;t.call(this),this.sampleExperimentTemplates=ko.observable([]),this.searchText=ko.observable(""),this.sampleExperiments=ko.computed(function(){var e=[];i.sampleExperimentTemplates().forEach(function(t){e.push(new p(t,i.searchText))});var t=new c(n.ExperimentType.draftExperimentId,u.newExperimentMenuBlankExperiment);return e.unshift(new p(t,i.searchText)),e},this),this.onExperimentSelected=function(t){if(t.isGuidedExperiment){e(["../../../TS/ViewModel/GuidedTour/GuidedExperiment"],function(e){a.featureUsage({featureID:92,groupID:84}),e.GuidedExperiment.launch()});return}if(t.id===n.ExperimentType.draftExperimentId){a.featureUsage({featureID:226,groupID:225}),Shell.UI.Drawer.close(),n.navigateToExperiment(n.ExperimentType.draftExperimentId);return}Shell.UI.Drawer.close(),r.openSampleAsCopy(t.id,t.description)}}return __extends(i,t),i}(s.Disposable);t.NewExperimentMenuViewModel=d,t.NewExperimentMenuInitialize=v}),define("generated/editor/TS/ViewModel/GuidedTour/GuidedExperiment",["require","exports","../../../TS/View/Bubble/Bubble","../../../DataLabViews/ExperimentView","../../../TS/ViewModel/DrawerMenu/NewDrawerMenu","../../../TS/ViewModel/DrawerMenu/NewExperimentMenuViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Model/DatasetNode","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(){function e(){}return e.getOption=function(){var t=this,i=f.guidedExperimentExperimentDescriptionContent,s='<img class="guidedExperimentDatasetGif" src="/Libraries/Images/GuidedExperiment/DragAnimation.gif"/><span>'+f.guidedExperimentDatasetContent+"</span>",o=f.guidedExperimentTransformationsContent,a=f.guidedExperimentSplitContent,l=f.guidedExperimentMachineLearningModulesContent,h=f.guidedExperimentRunContent,p='<img class="guidedExperimentDatasetGif" src="/Libraries/Images/GuidedExperiment/Visualize.gif"/><div class="guidedExperimentContentText">'+f.guidedExperimentVisualizeContent+"</div>";if(cdm.currentActiveItem instanceof r.ExperimentView){cdm.getActiveItem().xeControlContainer.xeControl.initOnly.zoomHelper.fitExperimentWithoutAnimation&&cdm.getActiveItem().xeControlContainer.xeControl.initOnly.zoomHelper.fitExperimentWithoutAnimation();var d=cdm.currentActiveItem.xeViewModel.experiment,v="506153734175476c4f62416c57734963.d2c5ca2f732341a39b7eda917c99f0c4",m="",g="506153734175476c4f62416c57734963.1ec722fab6234e26a44ea50c6d726223",y="",b="506153734175476c4f62416c57734963.70530644c97a4ab685f788bf30a8be5f",w="",E="506153734175476c4f62416c57734963.e3c522f853d948298ea45c6a6b75330c",S="",x="506153734175476c4f62416c57734963.5cc7053eaa30450d96c0dae4be720977",T="",N="506153734175476c4f62416c57734963.401b4f92e7244d5abe81d5b0ff9bdb33",C="",k="506153734175476c4f62416c57734963.72eb09476cd64015b9d1d2129b4a0ecc",L="";d.nodes.forEach(function(t){if(t instanceof c.ModuleNode){var n=t;switch(n.module_.familyId){case v:m=e.getNodeSelector(n.id);break;case g:y=e.getNodeSelector(n.id);break;case b:w=e.getNodeSelector(n.id);break;case E:S=e.getNodeSelector(n.id);break;case x:T=e.getNodeSelector(n.id);break;case N:C=e.getNodeSelector(n.id);break;default:}}else if(t instanceof u){var r=t;switch(r.dataset.familyId){case k:L=e.getNodeSelector(r.id);break;default:}}}),e.options=new n.Options("GuidedExperiment"),e.options.dismissOnScroll=!1,e.options.dismissOnResize=!1,e.options.dismissOnClick=!1,e.options.alwaysShow=!0;var A=[e.options.addStepByJquerySelector(".experiment-description",f.guidedExperimentExperimentDescriptionTitle,i,400,150),e.options.addStepByJquerySelector(L,f.guidedExperimentThisIsADatasetTitle,s,400,380),e.options.addStepByJquerySelector([m,y],f.guidedExperimentTransformationsTitle,o,400,170),e.options.addStepByJquerySelector(w,f.guidedExperimentSplitTitle,a,400,170),e.options.addStepByJquerySelector([S,T],f.guidedExperimentMachineLearningModulesTitle,l,410,200),e.options.addStepByJquerySelector(".fxs-command-action-play",f.guidedExperimentRunTitle,h,400,150),e.options.addStepByJquerySelector(C,f.guidedExperimentVisualizeTitle,p,400,380)];return A.forEach(function(e,n){t.addLoggingLoadHandlerToStep(e,n+1)}),e.options}return null},e.logGuidedExperimentStep=function(e){l.featureUsage({featureID:o.FeatureId["GuidedExperimentStep"+e],groupID:84})},e.addLoggingLoadHandlerToStep=function(e,t){var n=this;e.beforeLoadHandlerAsync=function(e){return n.logGuidedExperimentStep(t),h.when(null)}},e.getNodeSelector=function(e){return'rect[id^="node-'+e+'"]'},e.launch=function(){if(!a.guidedExperimentEnabled())return;Shell.UI.Drawer.close(),i.openSampleAsCopy(s.NewExperimentTemplateList.guidedExperimentTemplate.experimentId,s.NewExperimentTemplateList.guidedExperimentTemplate.description,function(){$(document).one("experimentLoaded",function(){var t=window.setInterval(function(){$(".fxshell-navpane-collapsed").get(0)&&(window.clearInterval(t),$(".fxs-drawer-open").get(0)||n.showAsync(e.getOption()))},100)})})},e}();t.GuidedExperiment=p});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DrawerMenu/NewExperimentMenuFromCatalogViewModel",["require","exports","../../../TS/ViewModel/GuidedTour/AnimatedExperiment","../../../TS/ViewModel/ExperimentEditor/CommunityHelpers","../../../DataLabViews/ExperimentView","../../../DataLabViews/ExperimentViewV2","../../../TS/ViewModel/GuidedTour/GuidedExperiment","../../../TS/ViewModel/DrawerMenu/NewDrawerMenu","../../../TS/ViewModel/DrawerMenu/NewExperimentMenuViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Features","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Logging/IfxScenarioStopWatch","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace","../../../../DataLabClient/Model/V2/WorkspaceServiceProvider","../../../../DataLabClient/Model/V2/Interfaces"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){function k(){u.NewDrawerMenuDestroy();var e=new C,t=$(ExperimentEditorTemplates._newExperimentMenuWithCommunityMarkup).prependTo(".fxs-drawerdetails-details-box");e.setViewMoreLabelMargin(),ko.applyBindings(e,t[0]),e.loadCards()}var b=function(){function e(){}return e.galleryTopNSamplesFilterTemplate=function(e){e===void 0&&(e=!1);var t=r.msftAuthorId;return e?"$skip=0&$orderby=trending desc&$filter=author/id eq '"+t+"'":"$skip=0&$top={0}&$orderby=trending desc&$filter=author/id eq '"+t+"'"},e.getTopSamples=function(t){return t?r.GalleryQueryUtil.queryCatalogByFilter(v.format(e.galleryTopNSamplesFilterTemplate(),t.toString())):r.GalleryQueryUtil.queryCatalogByFilter(e.galleryTopNSamplesFilterTemplate(!0))},e.getTopExperiments=function(t){return r.GalleryQueryUtil.queryCatalogByFilter(v.format(e.galleryTopNFilterTemplate,t.toString()))},e.searchCatalog=function(t,n){var i=encodeURIComponent(t);return r.GalleryQueryUtil.searchCatalog("experiment",v.format(e.searchFilterTemplate,i,n.toString()))},e.sortSamplesResult=function(e,t){if(e&&e.total_count!=null&&e.value)return new r.CatalogQueryByFilterResult(e.total_count,e.value.sort(t))},e.getTopSampleNotebooks=function(){return r.GalleryQueryUtil.queryCatalogCollection("notebook")},e.getSampleCustomModules=function(){var e=environment.catalogListModulesFilter;return e=e.replace(/{msftid}/g,r.msftAuthorId),r.GalleryQueryUtil.queryCatalogEntities("module",e)},e.galleryTopNFilterTemplate="$skip=0&$top={0}",e.searchFilterTemplate="$search='{0}'&$orderby=trending&$skip=0&$top={1}",e}();t.NewExperimentMenuFromCatalogUtil=b;var w=function(){function e(e){this.title=c.newExperimentMenuBlankExperiment,this.templateName="blank-experiment-card-template",this.isVisible=ko.computed(function(){return!e().trim()})}return e.prototype.onSelect=function(){p.featureUsage({featureID:226,groupID:225}),i.navigateToExperiment(i.ExperimentType.draftExperimentId)},e}(),E=function(e){function t(t){e.call(this,t),this.title="Blank Experiment PySpark"}return __extends(t,e),t.prototype.onSelect=function(){var e=null,t=g.getWorkspaceServiceProvider();if(t){var n=t.getService(0);n&&(e=n.workspaceId)}s.navigateToExperiment(s.ExperimentType.draftExperimentId,e)},t}(w),S=function(){function e(e,t){this.templateName="tour-experiment-card-template",this.isVisible=ko.computed(function(){return!t().trim()}),this.id=e}return e.prototype.onSelect=function(){h.animatedTourEnabled()?(p.featureUsage({featureID:157,groupID:154}),n.AnimatedExperiment.launch()):(p.featureUsage({featureID:92,groupID:84}),o.GuidedExperiment.launch())},e}(),x=function(){function e(e,t){var n=this;this.DEFAULT_AVATAR="/Content/Images/fxs.avatarbar.default-avatar-large.png",this.catalogEntity=t,this.templateName=null,this.isVisible=ko.computed(function(){if(!n.catalogEntity)return!1;var t=new RegExp(v.escapeRegExpString(e().trim()),"ig");return t.test(n.catalogEntity.name)}),this.authorAvatarUrl=ko.observable(this.DEFAULT_AVATAR);if(t.author.avatar_url){var i=new Image;i.onload=function(){n.authorAvatarUrl(t.author.avatar_url)},i.src=t.author.avatar_url}this.algorithmList=(t.algorithms||[]).join(", "),this.tagList=t.tags||[],this.isMsft=t.author.id===r.msftAuthorId;var s=Math.floor((Date.now()-Date.parse(t.updated_at))/864e5);this.daysAgoText=s+" day"+(s>1?"s":"")+" ago",this.overlayIsActive=ko.observable(!1),this.viewInGalleryLink=r.galleryBaseUrl+"/Details/"+t.id}return e.prototype.onSelect=function(){},e}();t.GalleryEntityCardViewModel=x;var T=function(e){function t(t,n){e.call(this,t,n),this.templateName="experiment-card-template"}return __extends(t,e),t.prototype.onSelect=function(){p.featureUsage({featureID:227,groupID:225,data:{communityId:this.catalogEntity.community_id,id:this.catalogEntity.id,name:this.catalogEntity.name}}),r.copyCommunityExperimentToThisWorkspaceAndNavigateToExperiment(this.catalogEntity.content.package_link,this.viewInGalleryLink,this.catalogEntity.id)},t}(x),N=function(e){function t(t){var n=this;e.call(this),this.disabled=ko.observable(!1),this.disabledReason=ko.observable(""),this._scenarioStopwatch=new d.IfxScenarioStopWatch(8),this._loadTime=(new Date).getTime(),this._scenarioStopwatch.start(),this.searchBoxPlaceholder=t,this.loading=ko.observable(!1),this.searchTextInstantValue=ko.observable(""),this.searchTextDelayedValue=this.searchTextInstantValue.extend({rateLimit:{timeout:300,method:"notifyWhenChangesStop"}}),this.viewMoreSamplesMargin=ko.observable("0px"),this.setViewMoreLabelMargin=function(){var e=230,t=24,r=$(".fxs-menu-menu").eq(1).width(),i=$(".experiment-card-list").width()+r,s=i%(e+t),o=s+t;n.viewMoreSamplesMargin(o+"px")},this.viewMoreSamplesLink=r.galleryBaseUrl,this.showHeaderLinks=ko.pureComputed(function(){return!n.searchTextDelayedValue().trim()})}return __extends(t,e),t.prototype.onCardSelected=function(e){Shell.UI.Drawer.close(),e.onSelect()},t.prototype.loadCards=function(){var e=this;this.loading(!0),this.loadCardsImpl().always(function(){e.loading(!1),e.setViewMoreLabelMargin(),e._scenarioStopwatch.stop()})},t.prototype.loadCardsImpl=function(){throw new Error("abstract method not implemented")},t}(l.Disposable);t.NewAbstractCatalogMenuViewModel=N;var C=function(e){function t(){var t=this;e.call(this,c.newExperimentMenuSearchPlaceholder),this.samplesQueryResults=ko.observable(null),this.tourExperimentTemplate=ko.observable(null);var n=function(e){var n=[];return e&&e.value&&e.value.forEach(function(e){var r=new T(t.searchTextDelayedValue,e);n.push(r)}),n};this.cards=ko.computed(function(){var e=n(t.samplesQueryResults());if(t.tourExperimentTemplate()){var r=new S(t.tourExperimentTemplate().experimentId,t.searchTextDelayedValue);e.unshift(r)}var i=new w(t.searchTextDelayedValue);return e.unshift(i),h.mLStudioV2Enabled()&&h.blankV2InNewMenuEnabled()&&e.unshift(new E(t.searchTextDelayedValue)),e},this)}return __extends(t,e),t.prototype.loadCardsImpl=function(){var e=this;if(b.newExperimentMenuSamplesCache&&(a.NewExperimentTemplateList.guidedExperimentTemplate||!h.guidedExperimentEnabled()))return h.guidedExperimentEnabled()&&this.tourExperimentTemplate(a.NewExperimentTemplateList.guidedExperimentTemplate),this.samplesQueryResults(b.newExperimentMenuSamplesCache),v.when(null);var t=a.NewExperimentTemplateList.guidedExperimentTemplate?v.when(a.NewExperimentTemplateList.guidedExperimentTemplate):a.NewExperimentTemplateList.initializeTutorialTemplate(m.workspace);return v.when(b.getTopSamples().done(function(t){var n=b.sortSamplesResult(t,r.CatalogEntity.CatalogExperimentSampleSortFunction);b.newExperimentMenuSamplesCache=n,e.samplesQueryResults(n)}),t.done(function(){e.tourExperimentTemplate(a.NewExperimentTemplateList.guidedExperimentTemplate)})).fail($.noop)},t}(N);t.NewExperimentCatalogMenuViewModel=C,t.NewExperimentCatalogMenuInitialize=k});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DrawerMenu/NewModuleMenuViewModel",["require","exports","../../../TS/ViewModel/DrawerMenu/NewDrawerMenu","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources"],function(e,t,n,r,i){function o(){n.NewDrawerMenuDestroy();var e=$(ExperimentEditorTemplates._newModuleMenuMarkup).prependTo(".fxs-drawerdetails-details-box");ko.applyBindings(new s,e[0])}var s=function(e){function t(){e.call(this),this.detailMessage=ko.observable(i.newModuleMenuHeader)}return __extends(t,e),t}(r.Disposable);t.NewModuleMenuViewModel=s,t.NewModuleMenuInitialize=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/NotebookPublishCompletedViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/PublishToCommunityOnCompleteViewModel","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(e){function t(t,n){e.call(this,t,n),this.header(r.notebookPublishCompletedHeader),this.description(r.notebookPublishCompletedDescription),this.linkLabel(r.notebookPublishCompletedLinkLabel),this.defaultPromotionTitle(r.notebookPublishCompletedEmailTitle),this.defaultPromotionText(i.format(r.notebookPublishCompletedEmailText,r.productNameMedium))}return __extends(t,e),t}(n.PublishToCommunityOnCompleteViewModel);t.NotebookPublishCompletedViewModel=s}),define("generated/DataLabClient/Model/GalleryNotebook",["require","exports"],function(e,t){var n=function(){function e(e,t,n,r,i,s,o,u,a){this.source=e,this.name=t,this.summary=n,this.description=r,this.visibility=i,this.owner=s,this.tags=o,this.thumbnail=u,this.imageUrl=a}return e}();t.PublishableNotebook=n});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/PublishNotebookToGalleryWizardViewModel",["require","exports","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/ImageSelectorViewModel","../../../TS/View/MarkdownEditor/MarkdownEditor","../../../TS/ViewModel/ExperimentEditor/NotebookHelpers","../../../TS/ViewModel/ExperimentEditor/PublishToCommunityWizardViewModel","../../../TS/ViewModel/ExperimentEditor/TagTextBoxViewModel","../../../TS/View/WizardView","../../../../DataLabClient/Model/CommunityExperiment","../../../TS/ViewModel/ExperimentEditor/CommunityHelpers","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/Model/GalleryNotebook","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=f.CommunityExperimentVisibility,b=f.CommunityExperimentAuthor,w=f.Owner,E=function(e){function t(t,n){var i=this;n===void 0&&(n=null),e.call(this),this.notebook=t,this.summary=ko.observable(""),this.description=ko.observable(""),this.tags=ko.observableArray([]),this.tagTextBoxViewModel=u,this.publishToCommunityWizardViewModel=o,this.uploadImageOption=ko.observable(0),this.onWizardClosingEvent=new ko.subscribable,this.onWizardCompleted=ko.observable(!1),this.isRepublish=!!n,this.detailsFromGallery=ko.observable(this.isRepublish&&n.name!==""),this.previousPublishTypeHidden=this.isRepublish?n.hidden:!1,this.publishTypeString=ko.observable(null),this.publishAuthorString=ko.observable(null),this.isRepublish&&(this.previousPublishTypeHidden?this.publishTypeString(0..toString()):this.publishTypeString(1..toString()),this.publishAuthorString(n.author!=null&&n.owner!=null&&n.author.id!==n.owner.id?1..toString():0..toString())),this.imageViewModel=new r.ImageSelectorViewModel,this.imageFromGallery=ko.observable(this.isRepublish&&n.imageUrl!==""),this.name=g.validatableObservable(this.notebook.friendlyName,s.NotebookHelpers.validateNotebookName),this.name.startValidating(),this.description(this.notebook.description()),this.detailsFromGallery()&&(this._galleryStep1Details={description:n.description,name:n.name,summary:n.summary,tags:n.tags},this.updateDetailsFromSelectedSource(!0),this.detailsFromGallery.subscribe(function(e){i.updateDetailsFromSelectedSource(e)})),this.imageFromGallery()&&(this.imageViewModel.selectedStockImgUrl(n.imageUrl),this.imageFromGallery.subscribe(function(e){e?i.imageViewModel.selectedStockImgUrl(n.imageUrl):i.imageViewModel.selectedStockImgUrl(null)})),this.isValid=ko.computed(function(){return i.name.isValid()}),this.useMarkdownEditor=!!h.markdownInPublishDialogEnabled(),this.areNextStepsDisabled=ko.computed(function(){return!i.isValid()||i.imageViewModel.imageUploadViewModel.isProcessingSelectedImage()}),this.arePreviousStepsDisabled=ko.computed(function(){return!1}),this.publishType=ko.computed(function(){var e=null;return i.publishTypeString()&&(e=Number(i.publishTypeString())),e}),this.isPublishAuthorEnabled=ko.observable(l.canPublishOnBehalfOfCompany),this.publishAuthorType=ko.computed(function(){var e=null;return i.publishAuthorString()&&(e=Number(i.publishAuthorString())),e}),this.publishAuthorId=ko.computed(function(){return l.getAuthorId(i.publishAuthorType())}),this.publishAuthorName=ko.computed(function(){return l.getAuthorName(i.publishAuthorType())}),this.isCompleteButtonEnabled=ko.computed(function(){return i.isPublishAuthorEnabled()?i.publishType()!==null&&i.publishAuthorType()!=null:i.publishType()!==null}),this.includeDataset=ko.observable(!1)}return __extends(t,e),t.prototype.getPublishable=function(){if(!this.onWizardCompleted())throw new Error("Cannot generate a PublishableNotebook if the Publish To Community Wizard was not completed.");if(!this.isValid())throw new Error("Cannot generate a PublishableNotebook with validation errors still present.");return new p.PublishableNotebook(this.notebook,this.name(),this.summary(),this.description(),this.publishType(),new w(this.publishAuthorType(),this.publishAuthorId(),this.publishAuthorName()),this.tags(),this.imageViewModel.imageUploadViewModel.finalImageContent(),this.imageViewModel.imageUploadViewModel.finalImageContent()?"":this.imageViewModel.selectedStockImgUrl())},t.prototype.onWizardClosing=function(e){return this.onWizardCompleted(!0),e.completed?v.customEvent({key:"WizardCompleted",type:"PublishNotebook",data:JSON.stringify({publishType:this.publishType()})}):v.customEvent({key:"WizardCanceled",type:"PublishNotebook"}),!0},t.prototype.updateDetailsFromSelectedSource=function(e){e?(this._localStep1Details={description:this.description(),name:this.name(),summary:this.summary(),tags:this.tags()},this.description(this._galleryStep1Details.description),this.summary(this._galleryStep1Details.summary),this.name(this._galleryStep1Details.name),this.tags(this._galleryStep1Details.tags)):(this._galleryStep1Details={description:this.description(),name:this.name(),summary:this.summary(),tags:this.tags()},this.description(this._localStep1Details.description),this.summary(this._localStep1Details.summary),this.name(this._localStep1Details.name),this.tags(this._localStep1Details.tags))},t.prototype.launch=function(){var e=this,t=$.Deferred(),n=[];m.initializeTemplateIfNecessary("TagTextBox",ExperimentEditorTemplates._tagTextBoxMarkup),[{templateId:"PublishNotebookStep1Template",markup:ExperimentEditorTemplates._publishNotebookStep1Markup,dependency:h.markdownInPublishDialogEnabled()&&[i.markdownEditorRegisterInfo],title:d.publishNotebookDescriptionTitle},{templateId:"PublishNotebookStep2Template",markup:ExperimentEditorTemplates._publishNotebookStep2Markup,dependency:null,title:d.publishExperimentToCommunityWizardImageSelectionTitle},{templateId:"PublishNotebookStep3Template",markup:ExperimentEditorTemplates._publishNotebookStep3Markup,dependency:null,title:d.publishExperimentToCommunityWizardSettingsTitle}].forEach(function(t){var r=new $.fxs.fxsWizard.WizardStep;r.contentTemplateOptions({name:m.initializeTemplateIfNecessary(t.templateId,t.markup,t.dependency),data:e}),r.title(t.title),n.push(r)});var r=this.isRepublish?d.republishExperimentToCommunityWizardTitle:d.publishExperimentToCommunityWizardTitle,s={size:[680,725],autoLock:!1,title:r},o=new a.WizardView(this,n,s);return o.onWizardClosingEvent.subscribe(function(n){n.completed?t.resolve(e.getPublishable()):t.resolve(null)}),o.show(),m.when(t.promise())},t.uploadImageOptions=[{text:d.publishExperimentToCommunityWizardImageSelectionCustomImageTab,value:0},{text:d.publishExperimentToCommunityWizardImageSelectionStockImagesTab,value:1}],t}(c.Disposable);t.PublishNotebookToGalleryWizardViewModel=E}),define("generated/editor/TS/ViewModel/Dialogs/SpinnerDialogViewModel",["require","exports"],function(e,t){var n=function(){function e(e){this.title=ko.observable(e)}return e.prototype.dismissed=function(e){},e}();t.SpinnerDialogViewModel=n}),define("generated/editor/TS/ViewModel/ExperimentEditor/GalleryNotebooksHelpers",["require","exports","../../../TS/ViewModel/ExperimentEditor/CommunityHelpers","../../../TS/View/DialogViewFactories","../../../TS/ViewModel/DrawerMenu/NewExperimentMenuFromCatalogViewModel","../../../TS/ViewModel/ExperimentEditor/NotebookHelpers","../../../TS/ViewModel/ExperimentEditor/NotebookPublishCompletedViewModel","../../../TS/ViewModel/ExperimentEditor/PackagePollingHelpers","../../../TS/ViewModel/ExperimentEditor/PublishNotebookToGalleryWizardViewModel","../../../TS/ViewModel/Dialogs/SpinnerDialogViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){function g(e,t,n){var r=v.workspace;return d.then(r.startGetCommunityNotebookIdAsync(r.id,e,t,n),function(e){return u.pollOnNotebookUnpack(e)})}function y(e){var t=null,r=function(e){p.error("Publishing notebook failed","publishNotebook",{}),d.showErrorNotification({title:h.publishNotebookErrorTitle,details:e.message}),t&&t.close()},i=null;if(c.republishNotebookToGalleryEnabled()){var s=null,o=e.tags||[];o.forEach(function(e){l.GalleryUriTagRegExp.test(e)&&(s=e.match(l.GalleryUriTagRegExp)[1])});if(s)var i=n.getEntityIdFromCommunityUri(s)}var u=w(i,e);Shell.UI.Spinner.show(),u.always(function(){return Shell.UI.Spinner.hide()});var f=d.then(u,function(t){var n=new a.PublishNotebookToGalleryWizardViewModel(e,t);return n.launch()});return d.then(f,function(n){if(n){p.featureUsage({featureID:168,groupID:167,data:JSON.stringify({notebookId:e.familyId,galleryId:i})}),t=E();var r=d.then(T(e),function(){return x(n,s)});return d.then(r,function(r){r=JSON.parse(r);var i=t.close();t=null;var s=d.then(i,function(){return S(e,r,n.visibility)});return s})}}).fail(r)}function b(){return i.NewExperimentMenuFromCatalogUtil.getTopSampleNotebooks()}function w(e,t){if(e){var r=d.then(n.GalleryQueryUtil.queryCatalogEntityById("notebook",e),function(e){return{description:e.description,name:e.name,summary:e.summary,imageUrl:e.image_url,tags:e.tags,hidden:e.hidden,author:e.author,owner:e.owner}},function(n){p.error("failed to obtain details for gallery entity with id "+e+"; "+n.message);if(n instanceof d.AjaxError&&n.xmlHttpRequest&&n.xmlHttpRequest.status===404){var r=t.tags||[];return _.remove(r,function(e){return l.GalleryUriTagRegExp.test(e)}),t.tags=r,s.NotebookHelpers.updateNotebook(t).fail(function(e){}),d.when(null)}return n});return r}return d.when(null)}function E(){var e=new f.SpinnerDialogViewModel(h.publishExperimentToCommunityPauseOnPublishingMessage),t=new r.Spinner(e);return t.show(),t}function S(e,t,n){if(c.republishNotebookToGalleryEnabled()){var i=e.tags||[];d.findStringMatchingRegEx(i,l.GalleryUriTagRegExp)||(i.push(d.format(l.GalleryUriTagFormatString,t)),e.tags=i,s.NotebookHelpers.updateNotebook(e).fail(function(e){p.error("notebook update for republish failed",null,{message:String(e)})}))}var u=new o.NotebookPublishCompletedViewModel(t,n);r.PublishToCommunityStepOnComplete.show(u)}function x(e,t){t===void 0&&(t=null);var n=v.workspace,r=d.then(n.createNotebookStoragePackageForCommunityAsync(e.source.id,e.name),u.pollOnNotebookPack),i=d.then(r,function(r){return n.createCommunityNotebookAsync(e,r.Location,t)});return i}function T(e){var t=$.Deferred(),n=t.promise();return e.author?t.resolve():(e.author=v.workspace.getUserName(),s.NotebookHelpers.updateNotebookNoCache(e).always(function(){return t.resolve()}).fail(function(e){p.error("notebook update for publish failed",null,{message:String(e)})})),n}var m=l.FeatureId;t.importGalleryNotebook=g,t.runPublishNotebookWizard=y,t.getGalleryNotebookSamples=b});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Dialogs/RenameNotebookDialogViewModel",["require","exports","../../../TS/Common/DialogInterfaces","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/NotebookHelpers","../../../../DataLabClient/NotebookNameValidationUtils","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Validation","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){function t(t,n){var r=this;n===void 0&&(n=null),e.call(this),this.dialogDismissed=ko.observable(!1),this.resultAccepted=ko.observable(!1),this.title=n?u.renameNotebookDialogRenameTitle:u.renameNotebookDialogNameTitle,this.nameChecker=new s.NotebookNameCollisionChecker(f.workspace.applicationCache.notebookCache),this.registerForDisposal(this.nameChecker),this.newNotebookName=a.validatableObservable(t,function(e){var t=i.NotebookHelpers.validateNotebookName(e);if(t)return t;var n=null;return f.workspace.applicationCache.notebookCache.items.forEach(function(t){e===t.name()&&(n=u.renameNotebookDialogSameNameError)}),n}),this.newNotebookName.subscribe(function(){r.newNotebookName.startValidating()}),this.validatedFields=[this.newNotebookName]}return __extends(t,e),t.prototype.enterToAccept=function(e,t){return t.keyCode===13&&n.DialogHost?(n.DialogHost.acceptActiveDialog(),!1):!0},t.prototype.dismissed=function(e){e.accepted&&(this.newNotebookName(this.newNotebookName().trim()),this.resultAccepted(!0)),this.dialogDismissed(!0),this.dispose()},t.prototype.canBeAccepted=function(){return this.validatedFields.forEach(function(e){return e.startValidating()}),this.validatedFields.every(function(e){return e.isValid()})},t}(o.Disposable);t.RenameNotebookDialogViewModel=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Model/UnsavedNotebook",["require","exports","../Constants","../Disposable","../LocalizedResources","../NotebookNameValidationUtils","../Util","../Validation"],function(e,t,n,r,i,s,o,u){var a=o.format,f=function(e){function t(t){e.call(this),this.language=u.validatableObservable(null,function(e){return e?null:a(i.notebookUploadSelectLanguage,n.NotebookName)}),this._nameChecker=new s.NotebookNameCollisionChecker(t.applicationCache.notebookCache),this.registerForDisposal(this._nameChecker),this.name=u.validatableObservable("",s.createNotebookNameValidator(this._nameChecker,t.notebookUploadsInProgress))}return __extends(t,e),t.prototype.isValid=function(){return this.name.isValid()},t.prototype.startValidating=function(){this.name.startValidating()},t}(r.Disposable);return f}),define("generated/editor/TS/ViewModel/Dialogs/UploadNotebookDialogViewModel",["require","exports","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/Notebook","../../../../DataLabClient/Model/UnsavedNotebook","../../../../DataLabClient/Model/User","../../../../DataLabClient/Util","../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o,u,a,f){var l=function(){function e(e,t){var i=this;t===void 0&&(t=null),this.uploadStartedEvent=new ko.subscribable,this._workspace=e,this.languages=a.values(n.NotebookLanguage),this.notebook=new o(e),this._author=t||u.user.name,this.fileToUpload=f.validatableObservable(null,function(e){var t=Math.pow(2,22);window.environment.maxNotebookUploadSizeInBytes!=null&&(t=window.environment.maxNotebookUploadSizeInBytes);var n=a.formatDataSize(t);return e?e.size>t?a.format(r.fileTooLarge,n):e.size===0?r.fileEmpty:null:r.selectUploadFile}),this.fileToUpload.subscribe(function(e){e&&i.notebook.name(s.simplifyName(e.name))}),this._validatedFields=[this.notebook,this.notebook.language,this.fileToUpload]}return e.prototype.dismissed=function(e){e.accepted?(i.info("Notebook upload dialog accepted"),this._upload()):i.info("Notebook upload dialog cancelled"),this.notebook.dispose()},e.prototype.canBeAccepted=function(){return this._validatedFields.forEach(function(e){return e.startValidating()}),this._validatedFields.every(function(e){return e.isValid()})},e.prototype._upload=function(){var e=this,t=this.notebook.name().trim(),n=this.notebook.language();this._addToUploadsInProgress(t);var s=function(){return e._workspace.uploadNewNotebookAsync(e._author,t,n,e.fileToUpload())},o=a.then(a.whenTrue(this._workspace.applicationCache.allPrefetched),s);o.done(function(e){i.customEvent({key:"Succeeded",type:"UploadNotebook",data:e.familyId})}),o.fail(function(r){i.customEvent({key:"Failed",type:"UploadNotebook"}),i.error("Notebook upload failed: "+String(r),null,JSON.stringify({name:t,language:n}));var s=r instanceof a.AjaxError&&r.xmlHttpRequest&&r.xmlHttpRequest.status;s===409&&e._workspace.notebookCache.loadNewItems()}),o.always(function(){e._removeFromUploadsInProgress(t)}),this.uploadStartedEvent.notifySubscribers(o),this._showProgress(o,a.format(r.uploadingNewNotebook,t),a.format(r.uploadingNotebookCompleted,t),function(t){return e._getErrorMessage(t)}),i.featureUsage({featureID:202,groupID:0,data:JSON.stringify({language:n})})},e.prototype._addToUploadsInProgress=function(e){this._workspace.notebookUploadsInProgress.valueWillMutate(),this._workspace.notebookUploadsInProgress().push(e),this._workspace.notebookUploadsInProgress.valueHasMutated()},e.prototype._removeFromUploadsInProgress=function(e){this._workspace.notebookUploadsInProgress.valueWillMutate(),this._workspace.notebookUploadsInProgress().splice(this._workspace.notebookUploadsInProgress().lastIndexOf(e,1)),this._workspace.notebookUploadsInProgress.valueHasMutated()},e.prototype._getErrorMessage=function(e){var t=e instanceof a.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status;return t===409?a.format(r.notebookUploadFailed409,this.notebook.name()):r.uploadingNotebookFailed},e.prototype._showProgress=function(e,t,n,r){var i=new Shell.UI.Notifications.Progress(a.format(t),"active",!1);Shell.UI.Notifications.add(i),e.done(function(e){i.setTitle(n),i.setStatus("success"),i.setActions([Shell.UI.Notifications.Buttons.ok()])}).fail(function(e){var t=a.getErrorDetails(e),n=r;typeof r=="function"&&(n=r(e)),i.setTitle(n),i.setDetailsText(t),i.setStatus("error"),i.setActions([Shell.UI.Notifications.Buttons.ok()])}),e.progress(function(e){e.lengthComputable&&i.setValue(e.loaded/e.total*100)}).always(function(){i.setValue(100)})},e}();t.UploadNotebookDialogViewModel=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DrawerMenu/NewNotebookMenuViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/CommunityHelpers","../../../TS/View/DialogViewFactories","../../../TS/ViewModel/ExperimentEditor/GalleryNotebooksHelpers","../../../TS/ViewModel/DrawerMenu/NewDrawerMenu","../../../TS/ViewModel/DrawerMenu/NewExperimentMenuFromCatalogViewModel","../../../TS/ViewModel/ExperimentEditor/NotebookHelpers","../../../TS/ViewModel/Dialogs/RenameNotebookDialogViewModel","../../../TS/ViewModel/Dialogs/UploadNotebookDialogViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace","../../../../DataLabClient/Logging/IfxScenarioStopWatch","../../../../DataLabClient/Model/User"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){function E(e){switch(e){case"Python3":return"/Content/Notebooks/python.tile.svg";case"Python2":return"/Content/Notebooks/python.tile.gray.svg";case"R":return"/Content/Notebooks/R.tile.svg";default:return null}}function N(){s.NewDrawerMenuDestroy();var e;if(h.plusNewNotebookUploadRedesignEnabled()&&y.user.isWorkspaceOwner){var t=p.uploadNotebookMenuDetails,n=$(".fxs-drawerdetails-details-box");n.html(Shell.Utilities.SafeMarkup.create(t)),e=A()}else e=$(".fxs-drawerdetails-details-box");if(h.jupyterNotebooksInGalleryEnabled())var r=$(ExperimentEditorTemplates._newExperimentMenuWithCommunityMarkup).prependTo(e);else var r=$(ExperimentEditorTemplates._newNotebookMenuMarkup).prependTo(e);var i=new T(y.user.isWorkspaceOwner);i.setViewMoreLabelMargin(),ko.applyBindings(i,r[0]),i.loadCards()}function C(e,t){t===void 0&&(t=null);var n=$.Deferred(),i=0;t=t||p.renameNotebookDialogDefaultNotebookNameBeginning,t+=" ";var s=l.PythonNotebookSuffix,o=RegExp("^"+t+"(\\d+)(?:"+s+")?$");m.workspace.applicationCache.notebookCache.items.forEach(function(e){if(o.test(e.name())){var t=Number(e.name().match(o)[1]);t>i&&(i=t)}});var u=t+ ++i,f=new a.RenameNotebookDialogViewModel(u);r.RenameNotebook.show(f);var h=new c.DisposableSubscription(f.dialogDismissed.subscribe(function(e){f.resultAccepted()?n.resolve(f.newNotebookName()):n.resolve(null),h.dispose(),f.dispose()}));return v.when(n.promise())}function k(e){var t=null;return e===l.NotebookLanguage.Python2?t=p.notebookLanguagePython2:e===l.NotebookLanguage.Python3&&(t=p.notebookLanguagePython3),t}function L(e){switch(e){case l.NotebookLanguage.Python2:return"/Content/Notebooks/python.tile.gray.svg";case l.NotebookLanguage.Python3:return"/Content/Notebooks/python.tile.svg";case l.NotebookLanguage.R:return"/Content/Notebooks/R.tile.svg";default:throw new Error("unknown notebook language: "+String(e))}}function A(){var e=$('\n        <vflexbox>\n            <flexstatic class="upload-command-container">\n                <div style="margin-left: -30px;"> \n                    <div class=\'fxs-drawermenu-menu fxs-menu\'></div>\n                    <div class=\'fxs-drawermenu-details fxs-drawerdetails\'>\n                        <div class=\'fxs-drawerdetails-details-box\'></div>\n                    </div>\n                </div>\n                <div class="h-divider"></div>\n            </flexstatic>\n            <flexfill>\n                <flexcontent class="drawer-details-lower">\n                </flexcontent>\n            </flexfill>\n        </vflexbox>\n    '),t=$(".fxs-drawermenu-menu.fxs-menu .fxs-menu-menu")[1],n=$(".fxs-drawermenu-details.fxs-drawerdetails .fxs-drawerdetails-details-box"),r=n.contents();return n.prepend(e),e.find(".fxs-drawermenu-menu.fxs-menu").append(t),e.find(".fxs-drawerdetails-details-box").append(r),e.find(".drawer-details-lower")}var b=l.FeatureId,w=l.NotebookType;t.getImageUrlForLanguage=E;var S=function(e){function t(t,r){e.call(this,t,r),this.templateName="gallery-notebook-card-template",this.languageImage=E(r.languages&&r.languages[0])||"",this.viewInGalleryLink=n.galleryBaseUrl+"/Notebook/"+r.id}return __extends(t,e),t.prototype.onSelect=function(){var e=this;d.featureUsage({featureID:170,groupID:119,data:this.catalogEntity.name});if(this.catalogEntity.content&&this.catalogEntity.content.package_link){Shell.UI.Spinner.show();var t=v.addSpinnerToBlankWindow();i.importGalleryNotebook(this.catalogEntity.content.package_link,this.viewInGalleryLink,this.catalogEntity.id).always(function(){Shell.UI.Spinner.hide()}).done(function(e){var n=e.NotebookId||e.ExperimentId,r=m.workspace;v.whenTrue(r.applicationCache.allPrefetched).done(function(){m.workspace.applicationCache.notebookCache.getItem(n).fail($.noop)}),u.NotebookHelpers.openNotebookById(n,t)}).fail(function(n){t&&!t.closed&&(t.close(),t=null),v.showErrorNotification({title:v.format(p.newNotebookMenuOpenCallFailed,e.viewInGalleryLink)}),d.error("Call to open gallery notebook failed. "+e.viewInGalleryLink)})}else d.error("gallery notebook is missing package link (galleryUri = "+this.viewInGalleryLink+")")},t}(o.GalleryEntityCardViewModel),x=function(){function e(e,t,n,r,i,s,o,u){var a=this;s===void 0&&(s=""),o===void 0&&(o=""),u===void 0&&(u=""),this.icon=e,this.nameLabel=t,this.language=n,this.type_=r,this.iconClass=s,this.subtitle=o,this.description=u,this.languageLabel=k(n);if(r===0)this.templateName="blank-notebook-card-template",this.isVisible=ko.computed(function(){return!i().trim()});else{if(r!==1)throw new Error("unknown notebook type");this.templateName="example-notebook-card-template",this.isVisible=ko.computed(function(){var e=new RegExp(v.escapeRegExpString(i().trim()),"ig");return e.test(a.nameLabel)})}}return e.prototype.onSelect=function(){this._openNotebook()},e.prototype._openNotebook=function(){var e=this,t=C(this.language,p.renameNotebookDialogDefaultNotebookNameBeginning);t.done(function(t){if(t){var n={Notebook:{Name:t,Language:e.language,Author:m.workspace.getUserName()},Parameters:{TemplateName:u.NotebookHelpers.getNotebookCreationTemplate(e.type_)}},r=new g.IfxScenarioStopWatch(16,{name:e.nameLabel,language:e.language});r.start(),u.NotebookHelpers.createAndOpenNotebook(n,r);var i=e.type_===0?120:121,s=JSON.stringify({name:e.nameLabel,language:e.language});d.featureUsage({featureID:119,groupID:i,data:s})}}).fail(function(e){d.error("failed prompting for new name")})},e}();t.NotebookCardViewModel=x;var T=function(e){function t(t){var n=this;e.call(this,p.newNotebookMenuSearchPlaceholder),this.isWorkspaceOwner=t,this.blankNotebooks=[],this.exampleNotebooks=[],this._gallerySamples=ko.observableArray([]),t?(this.blankNotebooks.push(new x(L(l.NotebookLanguage.Python3),p.notebookPlusNewBlankPython3NotebookLabel,l.NotebookLanguage.Python3,0,this.searchTextDelayedValue,"menu-python-icon",p.notebookPlusNewBlankExperiment)),this.blankNotebooks.push(new x(L(l.NotebookLanguage.Python2),p.notebookPlusNewBlankPython2NotebookLabel,l.NotebookLanguage.Python2,0,this.searchTextDelayedValue,"menu-python-icon",p.notebookPlusNewBlankExperiment)),h.blankRNotebookInNewMenuEnabled()&&this.blankNotebooks.push(new x(L(l.NotebookLanguage.R),p.notebookPlusNewBlankRNotebookLabel,l.NotebookLanguage.R,0,this.searchTextDelayedValue,"menu-python-icon",p.notebookPlusNewBlankExperiment)),h.jupyterNotebooksInGalleryEnabled()||this.exampleNotebooks.push(new x(L(l.NotebookLanguage.Python2),p.notebookPlusNewExamplePython2Notebook,l.NotebookLanguage.Python2,1,this.searchTextDelayedValue,"menu-python-logo",null,p.notebookPlusNewExampleDescription)),this.cards=ko.computed(function(){return[].concat(n.blankNotebooks,n.exampleNotebooks,n._gallerySamples())}),h.jupyterNotebookUploadEnabled()&&!h.plusNewNotebookUploadRedesignEnabled()&&(this.notebookUploadCommand={click:function(){Shell.UI.Drawer.close(),(new r.UploadNotebook(new f.UploadNotebookDialogViewModel(m.workspace))).show()}})):(this.cards=ko.pureComputed(function(){return[]}),this.disabled(!0),this.disabledReason(p.cannotCreateNotebooksInNonOwnerWorkspace))}return __extends(t,e),t.prototype.loadCardsImpl=function(){var e=this;if(!h.jupyterNotebooksInGalleryEnabled()||!this.isWorkspaceOwner)return $.Deferred().resolve().promise();var t=$.Deferred();return this._getGalleryNotebookCards().done(function(n){e._gallerySamples(n),t.resolve()}).fail(function(e){t.reject(e)}),t.promise()},t.prototype._getGalleryNotebookCards=function(){var e=this,n=t.queryResultPromise||i.getGalleryNotebookSamples(),r=v.then(n,function(n){return t.queryResultPromise||(t.queryResultPromise=v.when(n)),(n.value||[]).filter(function(e){return!!e}).map(function(t){return new S(e.searchTextDelayedValue,t)})}).fail(function(e){return d.error("error querying gallery notebooks for new menu"),v.when([])});return r},t}(o.NewAbstractCatalogMenuViewModel);t.NewNotebookMenuViewModel=T,t.NewNotebookMenuInitialize=N,t.moveUploadMenuItemIntoDetailsPane=A});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DrawerMenu/NewGalleryCustomModuleMenuViewModel",["require","exports","../ExperimentEditor/CommunityHelpers","./NewExperimentMenuFromCatalogViewModel","./NewModuleMenuViewModel","./NewNotebookMenuViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../Events/ModuleEvents","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace","datalabext"],function(e,t,n,r,i,s,o,u,a,f,l,c){function d(){i.NewModuleMenuInitialize();var e=s.moveUploadMenuItemIntoDetailsPane();e.append($(ExperimentEditorTemplates._newGalleryCustomModuleMenuMarkup));var t=new p;t.setViewMoreLabelMargin(),ko.applyBindings(t,e[0]),t.loadCards()}var h=function(e){function t(t,r){e.call(this,t,r),this.templateName="gallery-module-card-template",this.languageImage=s.getImageUrlForLanguage(r.languages&&r.languages[0]||"R"),this.viewInGalleryLink=n.galleryBaseUrl+"/CustomModule/"+r.id}return __extends(t,e),t.prototype.onSelect=function(){var e=this;a.featureUsage({featureID:231,groupID:225,data:this.catalogEntity.name});var t=this.catalogEntity,r=new Shell.UI.Notifications.Progress(l.format(u.galleryModuleImportingInProgress,this.catalogEntity.name),"active",!0);Shell.UI.Notifications.add(r);var i=this.catalogEntity.content&&this.catalogEntity.content.package_link;Shell.UI.Spinner.show();var s=n.importGalleryModule(c.workspace.id,i,this.viewInGalleryLink,this.catalogEntity.id,!1).always(function(){return Shell.UI.Spinner.hide()});s=l.then2(s,function(e){return e},function(t){var r=n.launchNameConflictDialog(t);return r?l.then2(r,function(t){return t?(Shell.UI.Spinner.show(),n.importGalleryModule(c.workspace.id,i,e.viewInGalleryLink,e.catalogEntity.id,!1,t).always(function(){return Shell.UI.Spinner.hide()})):null}):t}),s.done(function(e){if(e){var t=e[0];r.setTitle(l.format(u.galleryModuleImportSucceeded,t.name())),r.setStatus("success"),r.setActions([Shell.UI.Notifications.Buttons.ok()])}else Shell.UI.Notifications.remove(r)}).fail(function(t){r.setTitle(l.format(u.galleryModuleImportFailed,e.catalogEntity.name)),r.setDetailsText(t.message),r.setStatus("error"),r.setActions([Shell.UI.Notifications.Buttons.ok()]),a.error("Call to open gallery custom module failed.",null,{galleryUri:e.viewInGalleryLink,message:t&&t.message,stack:t&&t.stack})})},t}(r.GalleryEntityCardViewModel),p=function(e){function t(){var n=this;e.call(this,u.newModuleMenuSearchPlaceholder),this._gallerySamples=ko.observableArray([]),this.cards=ko.computed(function(){return n._gallerySamples()}),this.uploadCommand=null,t._reloadCardsHandler&&f.customModulePublishedToGallery.unhandle(t._reloadCardsHandler),t._reloadCardsHandler=function(){t.queryResultPromise=null,n.loadCards()},f.customModulePublishedToGallery.handle(t._reloadCardsHandler)}return __extends(t,e),t.prototype.dispose=function(){f.customModulePublishedToGallery.unhandle(t._reloadCardsHandler),t._reloadCardsHandler=null},t.prototype.loadCardsImpl=function(){var e=this,t=$.Deferred();return this._getGalleryCards().done(function(n){e._gallerySamples(n),t.resolve()}).fail(function(e){t.reject(e)}),t.promise()},t.prototype._getGalleryCards=function(){var e=this;t.queryResultPromise=t.queryResultPromise||r.NewExperimentMenuFromCatalogUtil.getSampleCustomModules();var n=l.then(t.queryResultPromise,function(t){return(t.value||[]).map(function(t){return new h(e.searchTextDelayedValue,t)})}).fail(function(e){return t.queryResultPromise=null,a.error("error querying gallery custom modules for new menu"),l.when([])});return n},t}(r.NewAbstractCatalogMenuViewModel);t.NewGalleryCustomModuleMenuViewModel=p,t.NewGalleryCustomModuleMenuInitialize=d}),define("generated/editor/TS/ViewModel/ExperimentEditor/GalleryModuleHelpers",["require","exports","./CommunityHelpers","../../../../DataLabClient/Constants","../DrawerMenu/NewGalleryCustomModuleMenuViewModel","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){function u(e){e=e.trim();if(o.has(e))return s.when(!0);var t=a(e);return t.done(function(t){t&&o.add(e)})}function a(e){var t=encodeURIComponent(e.replace(/'/g,"''"));return s.then2(n.GalleryQueryUtil.queryCatalogEntities(r.GalleryEntityTypes.Module,"$top=0&$filter=module_name eq '"+t+"'"),function(e){return e.total_count>0},function(e){return!1}).fail(function(){})}function f(e){var t=i.NewGalleryCustomModuleMenuViewModel.queryResultPromise,n=!1;return t&&t.done(function(t){n=t&&Array.isArray(t.value)&&t.value.some(function(t){return(t.module_name||t.name||"").trim()===e})}),n}var o=new s.StringSet;t.checkGalleryModuleNameExists=u,t.checkModuleNameWithGallery=a,t.checkModuleNameInNewMenu=f}),define("generated/editor/TS/View/PublishCustomModuleWizardView",["require","exports","../ViewModel/ExperimentEditor/CustomUX","./DialogViewFactories","../../DataLabViews/ExperimentView","./MarkdownEditor/MarkdownEditor","../Events/ModuleEvents","../ViewModel/ExperimentEditor/PauseUserWithSpinnerViewModel","../ViewModel/ExperimentEditor/PublishCustomModuleToGalleryWizardViewModel","../ViewModel/ExperimentEditor/PublishToCommunityOnCompleteViewModel","./WizardView","../../../DataLabClient/Logging/ClientInformationState","../../../DataLabClient/Constants","../../../DataLabClient/Features","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Util","../../../DataLabClient/Logging/IfxScenarioStopWatch"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=function(){function t(e,t){this.experimentEditorContainerViewModel=e,this.moduleViewModel=t,this.experimentViewModel=e.experimentEditorViewModel.experimentViewModel()}return t.prototype.launchPublishCustomModuleWizard=function(t){var n=this;t===void 0&&(t=null),v.featureUsage({featureID:232,groupID:0,experimentID:this.experimentEditorContainerViewModel.experiment.experimentIdForLogging,data:{galleryId:t}});if(!!c.keyVaultKeyIdentifier){m.showErrorNotification({title:d.errorCannotPublishEncryptedCustomModuleToGallery});return}e(["../ViewModel/ExperimentEditor/GalleryModuleHelpers"],function(e){e.checkModuleNameInNewMenu(n.moduleViewModel.moduleNode.name)?e.checkModuleNameWithGallery(n.moduleViewModel.moduleNode.name).done(function(e){e?m.showErrorNotification({title:m.format(d.customModuleNameExistsErrorTitle,n.moduleViewModel.moduleNode.name)}):n.configureAndDisplayWizard(t)}):n.configureAndDisplayWizard(t)})},t.prototype.configureAndDisplayWizard=function(t){var n=this;m.initializeTemplateIfNecessary("TagTextBox",ExperimentEditorTemplates._tagTextBoxMarkup);var r=new a.PublishCustomModuleToGalleryWizardViewModel(this.experimentViewModel,this.moduleViewModel),o=new $.fxs.fxsWizard.WizardStep;o.contentTemplateOptions({name:m.initializeTemplateIfNecessary("PublishCustomModuleStep1Template",ExperimentEditorTemplates._publishCustomModuleStep1Markup,p.markdownInPublishDialogEnabled()&&[s.markdownEditorRegisterInfo]),data:r}),o.title(this.moduleViewModel.moduleNode.name);var u=new $.fxs.fxsWizard.WizardStep;u.contentTemplateOptions({name:m.initializeTemplateIfNecessary("PublishToCommunityStep2Template",ExperimentEditorTemplates._publishToCommunityStep2Markup),data:r}),u.title(d.publishExperimentToCommunityWizardImageSelectionTitle);var f=new $.fxs.fxsWizard.WizardStep;f.contentTemplateOptions({name:m.initializeTemplateIfNecessary("PublishCustomModuleStep3Template",ExperimentEditorTemplates._publishCustomModuleStep3Markup),data:r}),f.title(d.publishExperimentToCommunityWizardSettingsTitle);var c=[o,u,f],h=d.publishCustomModuleToGalleryWizardTitle,v={size:[690,735],autoLock:!1,title:h},g=new l.WizardView(r,c,v);g.onWizardClosingEvent.subscribe(function(s){e(["../ViewModel/ExperimentEditor/GalleryModuleHelpers"],function(e){e.checkModuleNameWithGallery(n.moduleViewModel.moduleNode.name).done(function(e){if(e&&s.completed)m.showErrorNotification({title:m.format(d.customModuleNameExistsErrorTitle,n.moduleViewModel.moduleNode.name)});else if(s.completed){var o=r.getPublishableCustomModule();n.publishCustomModuleToCommunity(o,t).always(function(){return i.experimentView.commandsDisabled(!1)})}else i.experimentView.commandsDisabled(!1)})})}),g.show()},t.prototype.publishCustomModuleToCommunity=function(e,t){var r=this;t===void 0&&(t=null);var i=new g.IfxScenarioStopWatch(19,{galleryId:t,name:e.moduleName,expID:this.experimentEditorContainerViewModel.experiment.experimentIdForLogging});i.start();var s=new u.PauseUserWithSpinnerViewModel(d.publishExperimentToCommunityPauseOnPublishingMessage);return n.open(ExperimentEditorTemplates._pauseUserWithSpinnerMarkup,s,"400px","600px",null,null,!1),m.then(this.experimentEditorContainerViewModel.publishCustomModuleToCommunity(e,t,i).always(function(){n.close()}),function(t){return t=JSON.parse(t),i.stop({catalogModuleUrl:t}),o.customModulePublishedToGallery.trigger(),r.onPublishCustomModuleToCommunityComplete(t,e.visibility)}).fail(function(e){i.error(e,null,!0),m.showErrorNotification({title:d.publishCustomModuleToCommunityErrorTitle,details:e.message})})},t.prototype.onPublishCustomModuleToCommunityComplete=function(e,t){var n=new f.PublishToCommunityOnCompleteViewModel(e,t,!0);r.PublishToCommunityStepOnComplete.show(n)},t}();t.PublishCustomModuleWizardView=y}),define("generated/editor/TS/Common/NullCommand",["require","exports"],function(e,t){function r(e){return e?e:new n}var n=function(){function e(){this.canExecute=ko.observable(!1)}return e.prototype.execute=function(e){throw new Error("Null command; cannot be executed")},e}();t.NullCommand=n,t.optionalCommand=r}),define("generated/DataLabClient/Model/Annotation",["require","exports","../Logging/Logging","../Dirtyable"],function(e,t,n,r){function i(e){var t=null;try{t=JSON.parse(e)}catch(r){var i="Failed to deserialize Annotation Client Data as JSON";return n.error(i,"parseAnnotation",String(r)),null}return t}function s(e,t,n,r){var i={topLeftX:e,topLeftY:t,width:n,height:r};return new o("",i,"",new Date,null,!1,new Date,null)}t.parseJsonAnnotationClientData=i,t.createNewEmptyAnnotation=s;var o=function(){function e(e,t,n,i,s,o,u,a,f,l,c){var h=this;f===void 0&&(f=null),l===void 0&&(l=null),c===void 0&&(c=null),this.authorEmail=ko.observable(e),this.clientData=ko.observable(t),this.content=ko.observable(n),this.created=i,this.id=s,this.isCollapsed=ko.observable(o),this.modified=u,this.parentAnnotationId=a,this.etag=f,this.edge=l,this.nodeId=c,this.deleted=ko.observable(!1),this.dirtyAnnotationStatus=new r,this.authorEmail.subscribe(function(e){h.dirtyAnnotationStatus.isDirty()||h.dirtyAnnotationStatus.dirty()}),this.clientData.subscribe(function(e){h.dirtyAnnotationStatus.isDirty()||h.dirtyAnnotationStatus.dirty()}),this.content.subscribe(function(e){h.dirtyAnnotationStatus.isDirty()||h.dirtyAnnotationStatus.dirty()}),this.isCollapsed.subscribe(function(e){h.dirtyAnnotationStatus.isDirty()||h.dirtyAnnotationStatus.dirty()})}return e}();t.Annotation=o}),define("generated/DataLabClient/Contracts/V1/Common/Annotation",["require","exports","../../../Model/Annotation","../../../Util"],function(e,t,n,r){function i(e){var t=new n.Annotation(e.AuthorEmailId,n.parseJsonAnnotationClientData(e.ClientData),e.Content,r.parseJsonDate(e.CreatedTime),e.Id,e.IsCollapsed,r.parseJsonDate(e.ChangedTime),e.ParentAnnotationId,e.ETag,e.Edge?e.Edge:null,e.NodeId?e.NodeId:null);return t}function s(e){var t=$.Deferred(),n=null;return e?(n=e.map(function(e){return i(e)}),t.resolve(n)):t.reject(new Error("No annotations to deserialize.")),t.promise()}function o(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=e.map(function(e){var r={topLeftX:e.clientData().topLeftX-t,topLeftY:e.clientData().topLeftY-n,width:e.clientData().width,height:e.clientData().height},i={AuthorEmailId:e.authorEmail(),ClientData:JSON.stringify(r),Content:e.content(),Id:e.id,IsCollapsed:e.isCollapsed(),ParentAnnotationId:e.parentAnnotationId,ETag:e.etag?e.etag:null,Edge:e.edge?e.edge:null,NodeId:e.nodeId?e.nodeId:null};return i});return r}t.deserializeAnnotationHelper=i,t.deserializeAnnotations=s,t.serializeAnnotations=o}),define("generated/DataLabClient/Contracts/V1/DataContractInterfaces-v2",["require","exports","../../Util","../../Model/ModuleNode","../../Model/DatasetNode","../../Model/TrainedModelNode","../../Model/TransformNode","../../Model/AnnotationNode","../../Constants","./Common/Annotation","../../Model/ModuleParameterDescriptor","../../Model/WebServicePortNode"],function(e,t,n,r,i,s,o,u,a,f,l,c){function h(e){if(!n.isObjectEmpty(e.parameters))throw new Error("v2 experiments do not yet support experiment-level parameters");return{SchemaVersion:2,ExperimentId:e.experimentId(),ParentExperimentId:e.parentExperimentId,Graph:p(e.nodes),Etag:null}}function p(e){var t=[];return e.forEach(function(e){e instanceof r.ModuleNode?t.push(T(e)):e instanceof i?t.push(w(e)):e instanceof s?t.push(E(e)):e instanceof o?t.push(S(e)):e instanceof c.WebServicePortNode&&t.push(x(e))}),{Nodes:t}}function d(e,t,n){var a=[];return e.forEach(function(e){e instanceof r.ModuleNode?a.push(T(e)):e instanceof i?a.push(w(e)):e instanceof s?a.push(E(e)):e instanceof o?a.push(S(e)):e instanceof u?a.push(N(e,t,n)):e instanceof c.WebServicePortNode&&a.push(x(e))}),{Nodes:a}}function v(e){var t=Infinity,r=Infinity,i=-Infinity,s=-Infinity;e.forEach(function(e){t=Math.min(t,e.x()),r=Math.min(r,e.y()),i=Math.max(i,e.x()+e.width()),s=Math.max(s,e.y()+e.height())});var o=d(e,t,r).Nodes,u=Object.create(null),a=Object.create(null);o.forEach(function(e){u[e.Id]=e});var f=[];return o.forEach(function(e){e.X-=t,e.Y-=r}),e.forEach(function(e){n.forEach(e.outputPorts,function(e){n.forEach(e.connectedPorts(),function(t){t.parent.id in u||f.push(m(t,e))})})}),{Nodes:o,X:t,Y:r,Width:i-t,Height:s-r,SubgraphParameters:a,EgressConnections:f}}function m(e,t){return{InputNodeId:e.parent.id,InputPortName:e.name,OutputNodeId:t.parent.id,OutputPortName:t.name}}function g(e,t){return{IsInput:!0,PortName:e,ParentNodeId:t,Connection:null}}function y(e,t){return{IsInput:!1,PortName:e,ParentNodeId:t}}function b(e){var t={Id:e.id,InputPorts:[],OutputPorts:[],NodeType:6,Guid:"",X:e.x(),Y:e.y(),Comment:e.comment(),CommentCollapsed:e.commentCollapsed(),UsePreviousResults:e.usePreviousResults()};return n.forEach(e.inputPorts,function(e){var r=g(e.name,t.Id);n.forEach(e.connectedPorts(),function(t){r.Connection=m(e,t)}),t.InputPorts.push(r)}),t}function w(e){var t=b(e);return t.NodeType=1,t.Guid=e.dataset.id,t}function E(e){var t=b(e);return t.NodeType=2,t.Guid=e.trainedModel.id,t}function S(e){var t=b(e);return t.NodeType=4,t.Guid=e.transform.id,t}function x(e){var t=b(e);return t.NodeType=3,t.Guid=e.id,t.PortType=e.type,t}function T(e){var t=b(e);return t.NodeType=0,t.Guid=e.module_.id,t.Parameters=Object.create(null),C(e.parameters,t.Parameters),t}function N(e,t,n){var r=b(e);return r.Annotation=f.serializeAnnotations([e.annotation],t,n)[0],r.NodeType=5,r.Guid=e.annotation.id,r}function C(e,t){n.forEach(e,function(e){var r={};e.descriptor instanceof l.ModeModuleParameterDescriptor&&n.forEach(e.childParameters,function(e,t){var n=Object.create(null);C(e,n),r[t]=n}),t[e.name]={Name:e.name,Value:e.value(),ValueType:e.valueType,ChildParameters:Object.keys(r).length>0?r:undefined}})}t.SerializedExperiment=h,t.SerializedGraph=p,t.SerializedGraphWithAnnotations=d,t.SerializedSubgraph=v,t.SerializedConnection=m,t.SerializedDatasetNode=w,t.SerializedTrainedModelNode=E,t.SerializedTransformNode=S,t.SerializedWebServicePortNode=x,t.SerializedModuleNode=T,t.SerializedAnnotationNode=N});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Repeater",["require","exports","./Disposable"],function(e,t,n){var r=function(e){function t(t,n){e.call(this),this.action=t,this.delay=n,this.inFlight=!1,this.repeating=!1}return __extends(t,e),t.prototype.start=function(){this.repeating||(this.repeating=!0,this.doAction())},t.prototype.doActionNow=function(){return this.inFlight||(clearTimeout(this.timer),this.doAction()),this.promise},t.prototype.stop=function(){this.repeating=!1,clearTimeout(this.timer)},t.prototype.dispose=function(){this.stop(),e.prototype.dispose.call(this)},t.prototype.doAction=function(){var e=this,t=$.Deferred();this.promise=t.promise(),this.inFlight=!0,this.action().always(function(){e.inFlight=!1,e.repeating&&(e.timer=setTimeout(function(){e.doAction()},e.delay))}).done(function(){t.resolve()})},t}(n.Disposable);t.Repeater=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/MenuBuilders/ExperimentEditorMenuBuilder",["require","exports","../../TS/ViewModel/ExperimentEditor/AnnotationNodeViewModel","../../TS/Common/CallbackCommand","../../TS/ViewModel/ExperimentEditor/Dataset","../../TS/ViewModel/ExperimentEditor/Entity","../../TS/ViewModel/ExperimentEditor/ExperimentEditorViewModel","../../TS/ViewModel/ExperimentEditor/Module","../../TS/ViewModel/ExperimentEditor/PortViewModel","../../TS/ViewModel/ExperimentEditor/TrainedModel","../../TS/ViewModel/ExperimentEditor/Transform","../../TS/ViewModel/ExperimentEditor/WebServicePort","../../../DataLabClient/Contracts/V1/Constants","../../../DataLabClient/Disposable","../../../DataLabClient/Features","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=function(e){function t(t,n){e.call(this),this.experimentEditorViewModel=t,this.readOnlyMode=ko.observable(!1),this.currentTarget=ko.observable(null),this.commands=n,this.menuMap=Object.create(null),this.menuMap.inputPortMenu={name:"contextMenu",items:[]},this.menuMap.trainedModelMenu={name:"contextMenu",items:[{label:v.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:this.commands.delete_},{label:v.experimentEditorContextMenuCopy,iconClass:"menu-copy",command:this.commands.copy},{label:v.experimentEditorContextMenuCut,iconClass:"menu-cut",command:this.commands.cut},{label:v.experimentEditorContextMenuPaste,iconClass:"menu-paste",command:this.commands.paste}]},this.menuMap.transformMenu={name:"contextMenu",items:[{label:v.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:this.commands.delete_},{label:v.experimentEditorContextMenuCopy,iconClass:"menu-copy",command:this.commands.copy},{label:v.experimentEditorContextMenuCut,iconClass:"menu-cut",command:this.commands.cut},{label:v.experimentEditorContextMenuPaste,iconClass:"menu-paste",command:this.commands.paste}]},this.menuMap.annotationMenu={name:"contextMenu",items:[{label:v.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:this.commands.delete_},{label:v.experimentEditorContextMenuCopy,iconClass:"menu-copy",command:this.commands.copy},{label:v.experimentEditorContextMenuCut,iconClass:"menu-cut",command:this.commands.cut},{label:v.experimentEditorContextMenuPaste,iconClass:"menu-paste",command:this.commands.paste}]},this.menuMap.multiSelectMenu={name:"contextMenu",items:[{label:v.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:this.commands.delete_},{label:v.experimentEditorContextMenuCopy,iconClass:"menu-copy",command:this.commands.copy},{label:v.experimentEditorContextMenuCut,iconClass:"menu-cut",command:this.commands.cut},{label:v.experimentEditorContextMenuPaste,iconClass:"menu-paste",command:this.commands.paste}]}}return __extends(t,e),t.prototype.build=function(e){var t=this;this.currentTarget(e);var h=this.experimentEditorViewModel.selectionManager.selectedEntities.count(),p=null,g=null;if(h>1){var y=_.cloneDeep(this.menuMap.multiSelectMenu);for(var b=0;b<this.menuMap.multiSelectMenu.items.length;++b)y.items[b].command=this.menuMap.multiSelectMenu.items[b].command;if(d.enableExperimentPartialRun()){var w=s.Entity.hasRunnableEntity(m.values(this.experimentEditorViewModel.selectionManager.selectedEntities()));w&&Array.prototype.push.apply(y.items,[{label:null,divider:!0},{label:v.commandsRunSelected,iconClass:"menu-runselected",command:this.commands.runSelected,onMouseOver:new r.CallbackCommand(function(){t.updateSelecteNodesAsPartialRun(!0)}),onMouseOut:new r.CallbackCommand(function(){t.updateSelecteNodesAsPartialRun(!1)})}])}g=y}else{if(e instanceof a.InputPort){var E={name:this.menuMap.inputPortMenu.name,items:this.menuMap.inputPortMenu.items.slice(0)};g=E}else e instanceof u.Module?p=this.createModuleMenuItems(e):e instanceof i.Dataset?p=this.createDatasetMenuItems(e):e instanceof f.TrainedModel?g=this.menuMap.trainedModelMenu:e instanceof l.Transform?g=this.menuMap.transformMenu:e instanceof n.AnnotationNodeViewModel?g=this.menuMap.annotationMenu:e instanceof a.OutputPort?p=this.createOutputPortMenuItems(e):e instanceof o.ExperimentEditorViewModel?p=this.createCanvasMenuItems(e):e instanceof c.WebServicePort&&(p=this.createWebServicePortMenuItems(e));p&&(g={name:"contextMenu",items:p})}return g},t.prototype.createPortMenuItems=function(e){e===void 0&&(e=null);var t=d.toolTipInEEContextMenusEnabled()?v.VisualizeDisabledTooltip:"",n=[{label:v.experimentEditorContextMenuDownload,iconClass:"menu-download",command:this.experimentEditorViewModel.createViewOutputCommand(e)},{label:v.experimentEditorContextMenuSaveAsDataset,iconClass:"menu-dataset",command:this.experimentEditorViewModel.createPromoteOutputCommand(e)},{label:v.experimentEditorContextMenuSaveAsTrainedModel,iconClass:"menu-trainedmodel",command:this.experimentEditorViewModel.createPromoteTrainerOutputCommand(e)},{label:v.experimentEditorContextMenuSaveAsTransform,iconClass:"menu-transformation",command:this.experimentEditorViewModel.createPromoteTransformOutputCommand(e)}];return e.portModel.isVisualizable()&&n.push({label:v.experimentEditorContextMenuVisualize,iconClass:"menu-visualize",command:this.experimentEditorViewModel.createVisualizeDataCommand(e),disabledTooltip:t}),d.enableOutputPortApiCodeEnabled()&&Array.prototype.push.apply(n,[{label:null,divider:!0},{label:v.experimentEditorContextMenuApiCode,iconClass:"menu-copy",command:this.experimentEditorViewModel.createShowOutputPortApiCodeCommand(e)}]),n},t.prototype.createPortDatasetMenuItems=function(e){e===void 0&&(e=null);var t=d.toolTipInEEContextMenusEnabled()?v.VisualizeDisabledTooltip:"",n=[{label:v.experimentEditorContextMenuDownload,iconClass:"menu-download",command:this.commands.downloadDataset},{label:v.experimentEditorContextMenuVisualize,iconClass:"menu-visualize",command:this.experimentEditorViewModel.createVisualizeDataCommand(e),disabledTooltip:t}];return d.enableOutputPortApiCodeEnabled()&&Array.prototype.push.apply(n,[{label:null,divider:!0},{label:v.experimentEditorContextMenuApiCode,iconClass:"menu-copy",command:this.experimentEditorViewModel.createShowOutputPortApiCodeCommand(e)}]),n},t.prototype.createOutputPortMenuItems=function(e){e===void 0&&(e=null);var t=null;return e.parent instanceof u.Module?t=this.createPortMenuItems(e):e.parent instanceof i.Dataset?t=this.createPortDatasetMenuItems(e):t=null,t},t.prototype.appendOutputPortMenuItems=function(e,t){var n=this;if(t.length>0){e.push({label:null,divider:!0});var r=t.map(function(e,t){return{label:e.portModel.name,iconClass:t<10?"menu-output"+(t+1):"view",items:n.createOutputPortMenuItems(e),subMenuTargetViewModel:e}});Array.prototype.push.apply(e,r)}},t.prototype.createModuleMenuItems=function(e){var t=this;e===void 0&&(e=null);var n=[{label:v.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:this.commands.delete_},{label:v.experimentEditorContextMenuCopy,iconClass:"menu-copy",command:this.commands.copy},{label:v.experimentEditorContextMenuCut,iconClass:"menu-cut",command:this.commands.cut},{label:v.experimentEditorContextMenuPaste,iconClass:"menu-paste",command:this.commands.paste}],i=m.values(e.outputPorts);return this.appendOutputPortMenuItems(n,i),Array.prototype.push.apply(n,[{label:null,divider:!0},{label:v.experimentEditorContextMenuViewLog,iconClass:"menu-log",items:[{label:v.experimentEditorContextMenuOutputLog,iconClass:"file",command:this.commands.viewStdOut},{label:v.experimentEditorContextMenuErrorLog,iconClass:"file",command:this.commands.viewStdErr}]},{label:null,divider:!0},{label:v.experimentEditorContextMenuEditComment,iconClass:"menu-comment",command:this.commands.editComment}]),d.publishFirstClassCustomModuleToGalleryEnabled()&&e.moduleNode.module_.category==="Custom"&&Array.prototype.push.apply(n,[{label:null,divider:!0},{label:v.publishCustomModuleContextMenu,command:this.commands.publishCustomModule,disabledTooltip:v.publishCustomModuleDisabledTooltip}]),d.enableExperimentPartialRun()&&Array.prototype.push.apply(n,[{label:null,divider:!0},{label:v.commandsRunSelected,iconClass:"menu-runselected",command:this.commands.runSelected,onMouseOver:new r.CallbackCommand(function(){t.updateSelecteNodesAsPartialRun(!0)}),onMouseOut:new r.CallbackCommand(function(){t.updateSelecteNodesAsPartialRun(!1)})}]),Array.prototype.push.apply(n,[{label:null,divider:!0},{label:v.experimentEditorContextMenuHelp,iconClass:"menu-help",command:this.commands.showHelp}]),n},t.prototype.updateSelecteNodesAsPartialRun=function(e){e?this.experimentEditorViewModel.experiment.statusCode()!==h.State.Running&&this.experimentEditorViewModel.experiment.statusCode()!==h.State.NotStarted&&this.experimentEditorViewModel.setSelectedNodesIsPartOfPartialRun(!0):this.experimentEditorViewModel.setSelectedNodesIsPartOfPartialRun(!1)},t.prototype.createDatasetMenuItems=function(e){e===void 0&&(e=null);var t=[{label:v.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:this.commands.delete_},{label:v.experimentEditorContextMenuCopy,iconClass:"menu-copy",command:this.commands.copy},{label:v.experimentEditorContextMenuCut,iconClass:"menu-cut",command:this.commands.cut},{label:v.experimentEditorContextMenuPaste,iconClass:"menu-paste",command:this.commands.paste}],n=m.values(e.outputPorts);return this.appendOutputPortMenuItems(t,n),Array.prototype.push.apply(t,[{label:null,divider:!0},{label:v.experimentEditorContextMenuDownload,iconClass:"menu-download",command:this.commands.downloadDataset}]),t},t.prototype.createCanvasMenuItems=function(e){e===void 0&&(e=null);var t=[{label:v.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:this.commands.delete_},{label:v.experimentEditorContextMenuCopy,iconClass:"menu-copy",command:this.commands.copy},{label:v.experimentEditorContextMenuCut,iconClass:"menu-cut",command:this.commands.cut},{label:v.experimentEditorContextMenuPaste,iconClass:"menu-paste",command:this.commands.paste},{label:null,divider:!0}],n=[];return d.canvasAnnotationsEnabled()&&Array.prototype.push.apply(n,[{label:v.experimentEditorContextMenuAddComment,iconClass:"menu-comment",command:this.commands.addComment},{label:null,divider:!0}]),Array.prototype.push.apply(n,[{label:v.experimentEditorContextMenuRefresh,iconClass:"refresh",command:this.commands.refreshExperiment},{label:v.experimentEditorContextMenuViewPriorRun,iconClass:"file",command:this.commands.navigateToParent}]),Array.prototype.push.apply(t,n),t},t.prototype.createWebServicePortMenuItems=function(e){return e===void 0&&(e=null),[{label:v.experimentEditorContextMenuDelete,iconClass:"menu-delete",command:this.commands.delete_},{label:v.experimentEditorContextMenuCopy,iconClass:"menu-copy",command:this.commands.copy},{label:v.experimentEditorContextMenuCut,iconClass:"menu-cut",command:this.commands.cut},{label:v.experimentEditorContextMenuPaste,iconClass:"menu-paste",command:this.commands.paste}]},t}(p.Disposable);t.ExperimentEditorMenuBuilder=g});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/ExperimentEditorViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/AnnotationNodeViewModel","../../../TS/ViewModel/Dialogs/ApiCodeDialogViewModel","../../../TS/View/Balloon","../../../TS/Common/CallbackCommand","../../../TS/ViewModel/ExperimentEditor/Clipboard","../../../TS/ViewModel/ExperimentEditor/Connector","../../../TS/View/CustomBindingHandlers/ContextMenu","../../../TS/ViewModel/ExperimentEditor/Dataset","../../../TS/ViewModel/ExperimentEditor/EntityBaseV1","../../../DataLabViews/ExperimentView","../../../TS/ViewModel/ExperimentEditor/ExperimentViewModel","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/Help","../../../TS/View/PublishCustomModuleWizardView","../../../TS/ViewModel/ExperimentEditor/Module","../../../TS/ViewModel/ExperimentEditor/NotebookHelpers","../../../TS/Common/NullCommand","../../../TS/ViewModel/ExperimentEditor/Commands/PasteCommand","../../../TS/ViewModel/ExperimentEditor/PortViewModel","../../../TS/ViewModel/ExperimentEditor/SelectionManager","../../../TS/ViewModel/ExperimentEditor/Transform","../../../TS/ViewModel/ExperimentEditor/TrainedModel","../../../TS/ViewModel/Dialogs/TrialDialogs","../../../TS/ViewModel/ExperimentEditor/WebServicePort","../../../TS/ViewModel/ExperimentEditor/XEStateMachine","../../../TS/ViewModel/ExperimentEditor/EntitySelectionHelper","../../../../DataLabClient/Model/Annotation","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Contracts/V1/DataContractInterfaces-v2","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/Model/DraftStateMachine","../../../../DataLabClient/Model/Experiment","../../../../DataLabClient/Features","../../../../DataLabClient/FeaturesExtensions","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/Model/Port","../../../../DataLabClient/Repeater","../../../../DataLabClient/StateUtil","../../../../DataLabClient/Trial","../../../../DataLabClient/Util","../../../../DataLabClient/Model/WebServicePortNode","../../../../DataLabClient/Logging/IfxScenarioStopWatch"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V){var J=M.NotebookType,K;(function(e){e.GenericCSV="GenericCSV",e.GenericTSV="GenericTSV",e.PlainText="PlainText"})(K=t.DataTypeIds||(t.DataTypeIds={})),function(e){e[e.IsMultiSelecting=0]="IsMultiSelecting",e[e.IsMovingEntity=1]="IsMovingEntity",e[e.IsConnecting=2]="IsConnecting",e[e.None=3]="None"}(t.UserActionState||(t.UserActionState={}));var Q=t.UserActionState,G=function(t){function J(n,r,s,o,f,l,c,h){var p=this;l===void 0&&(l={}),c===void 0&&(c=null),h===void 0&&(h={}),t.call(this),this.paletteDragItem=null,this.currentExperimentHasBeenNonEmpty=ko.observable(!1),this.addingAnnotation=ko.observable(!1),this.xEStateMachine=C,this.isBeingResized=ko.observable(!1),this.experimentOrViewPerturbed=new ko.subscribable,this.refreshStatusLabel=ko.observable(""),this.newExperimentLoaded=new ko.subscribable,this.parentExperimentId=ko.observable(),this.experimentOrViewBoundsChanged=new ko.subscribable,this.experimentViewModel=ko.observable(),this.experimentDirty=ko.observable(),this.workspace=c,this.workspaceID=c?c.id:"",this.experimentDisposable=null,this.events=h,this.saveStatus=ko.observable({state:0,lastSave:null}),this.draftSaveLabel=ko.computed(function(){switch(p.saveStatus().state){case 0:return"";case 3:if(p.saveStatus().isRetrying)return j.DraftState_SaveFailedRetrying;return j.DraftState_SaveFailed;case 2:return j.DraftState_Saving;case 1:return W.format(j.DraftState_SavedAt,p.saveStatus().lastSave.toLocaleTimeString())}}),this.registerForDisposal(this.experiment=new P.Experiment,this.selectionManager=new E.SelectionManager(this.experimentViewModel),this.stateMachine=new C.XEInteractionStateMachine(this),this.statusRefresher=new R.Repeater(function(){return p._experiment.refresh(p.workspace).done(function(){p.refreshStatusLabel("")}).fail(function(e){e instanceof W.AjaxError&&e.xmlHttpRequest.status===404?(p.refreshStatusLabel(""),p.statusRefresher.stop()):p.refreshStatusLabel(j.RefreshStatus_FailedRetrying)})},M.PollInterval)),this.connector=new u.Connector,this.entityActivationCallback=null,this.moduleCache=n,this.datasetCache=r,this.trainedModelCache=s,this.transformModulesCache=o,this.endpointDownloader=f,this.lastMouseCoords={x:0,y:0,matrixTransform:null},this.entitySelectionHelper=new k.EntitySelectionHelper(this.experimentOrViewPerturbed,this.selectionManager,function(){return p.experimentViewModel().selectableEntities()}),this.needsAnimationToContent=new ko.subscribable,this.needsAnimationToNode=new ko.subscribable,this.experimentOrViewPerturbed.subscribe(function(){i.hide()}),this.selectionManager.selectedEntities.subscribe(function(){p.experimentOrViewPerturbed.notifySubscribers(null)}),this.experimentEditorViewModelCommands=l;var d=this.createContextMenuCommands(l);e(["../../../TS/MenuBuilders/ExperimentEditorMenuBuilder"],function(e){p.registerForDisposal(p.menuBuilder=new e.ExperimentEditorMenuBuilder(p,d)),p.setCommandAvailabilities(d),ko.computed(function(){return p.experimentViewModel().readOnlyMode()}).subscribe(function(e){p.menuBuilder.readOnlyMode(e)},p.menuBuilder,"change")}),this.animationComplete=new ko.subscribable,this.shouldShowHelpWatermark=ko.computed(function(){return!p.currentExperimentHasBeenNonEmpty()&&p._experiment.isDraft()}),this.entityMouseDown=function(e,t){t.preventDefault(),t.stopPropagation(),$(t.target).closest(".expanded .text").length===1&&e.selected()?e.editComment():p.stateMachine.handleAction(0,t,e)},this.entityMouseUp=function(e,t){t.preventDefault(),t.stopPropagation(),(e instanceof w.OutputPort||e instanceof w.InputPort)&&(p.stateMachine.dragging()!==2||p.connector.p0===e)&&a.ContextMenuEventHandler(t,e,p.menuBuilder),p.stateMachine.handleAction(1,t,e)},this.entityDoubleClick=function(e,t){if(e instanceof m.Module&&!p.experimentViewModel().readOnlyMode()){e.editComment();return}p.activate(e,t.ctrlKey||t.shiftKey)},this.commentsEventHandler=function(e,t){return t.stopPropagation(),t.keyCode===27?(t.target.blur(),!1):!0},this.panButtonClicked=function(e){e.preventDefault(),e.stopPropagation(),p.stateMachine.handleAction(3,e,null)},this.classId=ko.computed(function(){var e="xe-surface";return p.experimentViewModel().readOnlyMode()&&(e+=" readOnly"),e+=" "+p.stateMachine.classes(),e}),this.setLastPositionForExperiment=new ko.subscribable}return __extends(J,t),Object.defineProperty(J.prototype,"experiment",{get:function(){return this._experiment},set:function(e){var t=this;if(this._experiment!==e){d.setHelpContent(""),this._experiment=e,this.parentExperimentId(this._experiment.parentExperimentId),this.experimentDisposable&&this.experimentDisposable.dispose(),this.registerForDisposal(this.experimentDisposable=new _.Disposable);var n=new h.ExperimentViewModel(this._experiment,this.workspace);this.experimentViewModel(n),this.draftStateMachine=new D.DraftStateMachine(this.workspace,this._experiment),this.experimentDisposable.registerForDisposal(new _.DisposableSubscription(this.draftStateMachine.dirty.subscribe(function(e){t.experimentDirty(e)})),new _.DisposableSubscription(this.draftStateMachine.saveStatus.subscribe(function(e){t.saveStatus(e)})),n,this.draftStateMachine);if(this.isAutoRefreshing){var r=this._experiment.statusCode();r===A.State.InDraft&&this.experiment.parentExperimentId?this.workspace.getExperimentAsync(this.experiment.parentExperimentId).done(function(e){t._experiment.dirtyIfNeeded(e),U.isFailedState(e.statusCode())||U.isFinishedState(e.statusCode())?t._experiment.refresh(t.workspace):t.setRefreshConditions(e)}).fail(function(e){t.refreshStatusLabel(j.RefreshStatus_Failed)}):this.setRefreshConditions(this._experiment)}this.observeEmptinessOfNewExperiment(),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.newExperimentLoaded.notifySubscribers(null),this.dirtySubscription&&this.dirtySubscription.dispose();if(!this.experimentViewModel().readOnlyMode()||this.experimentViewModel().experiment.statusCode()===A.State.NotStarted||this.experimentViewModel().experiment.statusCode()===A.State.Running)this.dirtySubscription=this._experiment.dirtyStatus.isDirty.subscribe(function(e){e&&!t._experiment.isDraft()&&(!H.dirtyLabelsInDirtyablesEnabled()||t._experiment.dirtyStatus.hasDirtyLabel(M.DirtyType.Rerun))&&t.cloneHandler()})}},enumerable:!0,configurable:!0}),Object.defineProperty(J.prototype,"experimentOrParentId",{get:function(){return this.experiment.experimentId()?this.experiment.experimentId():this.experiment.parentExperimentId},enumerable:!0,configurable:!0}),J.prototype.stopAutoRefresh=function(){this.isAutoRefreshing&&(this.isAutoRefreshing=!1,this.statusRefresher.stop())},J.prototype.rememberExperimentPosition=function(e){this.setLastPositionForExperiment.notifySubscribers(e)},J.prototype.registerEntityActivationEvent=function(e){if(this.entityActivationCallback!==null)throw new Error("Activation callback already registered");this.entityActivationCallback=e},J.prototype.registerCloneHandler=function(e){this.cloneHandler=e},J.prototype.addComment=function(e,t){this.addNewAnnotationFromPoint(e,t)},J.prototype.removeSelected=function(){if(this.experimentViewModel().readOnlyMode())return;!this._experiment.isDraft()&&this._experiment&&this.cloneHandler(),this.experimentViewModel().removeSelected(),this.selectionManager.resetSelection(),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentOrViewPerturbed.notifySubscribers(null)},J.prototype.editSelected=function(){this.experimentViewModel().editSelected(),this.experimentOrViewPerturbed.notifySubscribers(null)},J.prototype.resetSelection=function(){this.entitySelectionHelper.resetSelection()},J.prototype.toggleEntitySelection=function(e){this.entitySelectionHelper.toggleEntitySelection(e)},J.prototype.selectAll=function(){this.entitySelectionHelper.selectAll()},J.prototype.selectSingleEntity=function(e,t){t===void 0&&(t=!1),this.entitySelectionHelper.selectSingleEntity(e,t)},J.prototype.startConnection=function(e){if(!(e instanceof w.PortViewModel))return;if(this.experimentViewModel().readOnlyMode())return;var t=e;F.customEvent({key:"Port_StartConnection",type:"Dragging",data:JSON.stringify(t.portModel.descriptor)}),this.highlightNodesAndPorts(t),this.connector.startConnection(t),this.experimentOrViewPerturbed.notifySubscribers(null)},J.prototype.moveConnection=function(e){if(this.experimentViewModel().readOnlyMode())return;var t=this.experimentViewModel().findEntityAtPoint(e.x,e.y);this.connector.onMouseMove(e.x,e.y,t)},J.prototype.cancelConnection=function(){this.connector.reset(),this.highlightNodesAndPorts(null)},J.prototype.endConnection=function(e,t){if(this.experimentViewModel().readOnlyMode())return;this.connector.endConnection(e,t.x,t.y),this.highlightNodesAndPorts(null),this.experimentOrViewPerturbed.notifySubscribers(null)},J.prototype.cancelRectSelection=function(){this.entitySelectionHelper.cancelRectSelection()},J.prototype.toggleAnnotationCollapse=function(e,t){if(!(e instanceof n.AnnotationNodeViewModel&&!this.experimentViewModel().readOnlyMode()))return;var r=e;(r.annotationNode.annotation.isCollapsed()||t)&&r.toggleIsCollapsed()},J.prototype.editAnnotation=function(e){if(!(e instanceof n.AnnotationNodeViewModel&&!this.experimentViewModel().readOnlyMode()))return;var t=e;t.toggleEditingComment()},J.prototype.activate=function(e,t){t===void 0&&(t=!1),this.entityActivationCallback&&this.entityActivationCallback(e,t)},J.prototype.onMouseMove=function(e){e.preventDefault(),this.stateMachine.handleAction(2,e)},J.prototype.beginMultiSelect=function(e){this.entitySelectionHelper.beginMultiSelect(e)},J.prototype.updateMultiSelect=function(e){this.entitySelectionHelper.updateMultiSelect(e)},J.prototype.endMultiSelect=function(e){this.entitySelectionHelper.endMultiSelect(e)},J.prototype.moveEntities=function(e,t){if(this.experimentViewModel().readOnlyMode())return;var n=this.experimentViewModel().nodes();W.forEach(n,function(n){n.selected()&&n.translate(e,t)}),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentOrViewPerturbed.notifySubscribers(null)},J.prototype.resizeNode=function(e,t,n){var r=e;if(this.experimentViewModel().readOnlyMode()||!r||!r.isResizable)return;var i=r.graphNode.width(),s=Math.min(i+t>r.minWidth?i+t:r.minWidth,r.maxWidth),o=r.graphNode.height(),u=Math.min(o+n>r.minHeight?o+n:r.minHeight,r.maxHeight);r.graphNode.width(s),r.graphNode.height(u),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentOrViewPerturbed.notifySubscribers(null)},J.prototype.addModuleById=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=this.createModule(e,t,n),i=r.graphNode.id;return this.experimentViewModel().addNode(r),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentViewModel().nodes.lookup(i)},J.prototype.addDatasetById=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=this.createDataset(e,t,n),i=r.graphNode.id;return this.experimentViewModel().addNode(r),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentViewModel().nodes.lookup(i)},J.prototype.addTrainedModelById=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=this.createTrainedModel(e,t,n),i=r.graphNode.id;return this.experimentViewModel().addNode(r),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentViewModel().nodes.lookup(i)},J.prototype.addTransformById=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=this.createTransformModule(e,t,n),i=r.graphNode.id;return this.experimentViewModel().addNode(r),this.experimentOrViewBoundsChanged.notifySubscribers(null),this.experimentViewModel().nodes.lookup(i)},J.prototype.addAnnotationNode=function(e){var t=this.experimentViewModel().createAnnotation(e);return this.experimentViewModel().nodes.lookup(e.id)},J.prototype.addNewAnnotationFromPoint=function(e,t){var n=this;this.addingAnnotation(!0);var r=L.createNewEmptyAnnotation(e.x,e.y,p.Annotation.startingWidth,p.Annotation.startingHeight);this.workspace.addExperimentAnnotationsAsync(this.experimentOrParentId,[r]).done(function(e){r=e[0];var t=n.addAnnotationNode(r);t=n.experimentViewModel().addNode(t),t.editingComment(!0),F.customEvent({key:"AddAnnotationSucceeded",type:"addNewAnnotationFromPoint",data:r.id})}).fail(function(e){F.customEvent({key:"AddAnnotationFailed",type:"addNewAnnotationFromPoint",data:e}),F.exception(e,"AddAnnotationFailed","addNewAnnotationFromPoint");var t={title:j.annotationCouldNotBeAdded,details:e.message};e instanceof W.AjaxError&&e.xmlHttpRequest&&(t.details=t.details+" "+e.xmlHttpRequest.responseText),W.showErrorNotification(t)}).always(function(){n.addingAnnotation(!1)})},J.prototype.createModule=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=this.moduleCache.getItemIfCached(e);if(!r)throw new Error("No module found with the given id.");return this.experimentViewModel().createModule(r,t,n)},J.prototype.createDataset=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=this.datasetCache.getItemIfCached(e);if(!r)throw new Error("No dataset found with the given id.");return this.experimentViewModel().createDataset(r,t,n)},J.prototype.createTrainedModel=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=this.trainedModelCache.getItemIfCached(e);if(!r)throw new Error("No trained model found with the given id.");return this.experimentViewModel().createTrainedModel(r,t,n)},J.prototype.createTransformModule=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var r=this.transformModulesCache.getItemIfCached(e);if(!r)throw new Error("No transform found with the given id.");return this.experimentViewModel().createTransformModule(r,t,n)},J.prototype.createWebServicePort=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),this.experimentViewModel().createWebServicePort(X.WebServicePortType[e],t,n)},J.prototype.createNode=function(e,t,n,r){if(e===p.EntityType.Module)return this.createModule(t,n,r);if(e===p.EntityType.Dataset)return this.createDataset(t,n,r);if(e===p.EntityType.TrainedModel)return this.createTrainedModel(t,n,r);if(e===p.EntityType.Transform)return this.createTransformModule(t,n,r);if(e===p.EntityType.WebServicePort)return this.createWebServicePort(t,n,r);throw new Error("Unknown node entity type")},J.prototype.pan=function(e,t){this.panResponder.pan(e,t)},J.prototype.paletteDragStart=function(e){this.paletteItem=e,this.experimentOrViewPerturbed.notifySubscribers(null)},J.prototype.paletteDragEnter=function(e){if(this.paletteItem){var t=e.x-p.RectWidth/2,n=e.y-p.RectHeight/2;this.paletteDragItem=this.createNode(this.paletteItem.type(),this.paletteItem.id(),t,n)}this.lastMouseCoords=e},J.prototype.paletteDragMove=function(e){if(this.paletteDragItem){var t=e.x-this.lastMouseCoords.x,n=e.y-this.lastMouseCoords.y;this.paletteDragItem.translate(t,n)}this.lastMouseCoords=e,this.experimentOrViewBoundsChanged.notifySubscribers(null)},J.prototype.paletteDragLeave=function(){this.paletteDragItem&&(this.experimentViewModel().tempNodes.remove(this.paletteDragItem.graphNode.id),this.paletteDragItem.remove(),this.paletteDragItem=null,this.experimentOrViewBoundsChanged.notifySubscribers(null))},J.prototype.paletteDragEnd=function(){var e=null;if(this.paletteDragItem){this._experiment.isDraft()||this.cloneHandler();if(this.paletteDragItem instanceof f.Dataset){var t=this.experiment.getDatasetNode(this.paletteDragItem.datasetNode.dataset.id);t&&(e=this.experimentViewModel().getViewModelForNode(t),this.experimentViewModel().tempNodes.remove(this.paletteDragItem.graphNode.id))}else if(this.paletteDragItem instanceof S.Transform){var n=this.experiment.getTransformNode(this.paletteDragItem.transformNode.transform.id);n&&(e=this.experimentViewModel().getViewModelForNode(n),this.experimentViewModel().tempNodes.remove(this.paletteDragItem.graphNode.id))}else if(this.paletteDragItem instanceof x.TrainedModel){var r=this.experiment.getTrainedModelNode(this.paletteDragItem.trainedModelNode.trainedModel.id);r&&(e=this.experimentViewModel().getViewModelForNode(r),this.experimentViewModel().tempNodes.remove(this.paletteDragItem.graphNode.id))}else if(this.paletteDragItem instanceof N.WebServicePort){var i=this.paletteDragItem;F.featureUsage({featureID:53,groupID:52,workspaceID:this.workspace&&this.workspace.id,experimentID:this._experiment&&this._experiment.experimentIdForLogging});if(i.webServicePortNode.type===0&&this.experiment.getWebServicePortNodes(i.webServicePortNode.type).length>0&&!H.multiInputSupportEnabled()){this.experimentViewModel().tempNodes.remove(this.paletteDragItem.graphNode.id),this.events.onAlert&&this.events.onAlert(j.multipleWebServicePortNotSupported);return}}if(!e){var s=!0;this.paletteDragItem instanceof m.Module?s&&F.featureUsage({featureID:36,groupID:38,experimentID:this._experiment&&this._experiment.experimentIdForLogging,moduleID:this.paletteDragItem.moduleNode.module_.id,data:this.paletteDragItem.moduleNode.module_.name()}):s&&F.featureUsage({featureID:228,groupID:38,experimentID:this._experiment&&this._experiment.experimentIdForLogging,data:{label:this.paletteDragItem.label,type:this.paletteDragItem.graphNodeType,id:this.paletteDragItem.graphNode.id}});var o=this.experimentViewModel().addNode(this.paletteDragItem);o&&(this.selectionManager.resetSelection(),this.selectionManager.selectEntity(o))}this.experimentOrViewBoundsChanged.notifySubscribers(null)}return this.paletteDragItem=null,this.experimentOrViewPerturbed.notifySubscribers(null),e},J.prototype.copy=function(){var e=this.selectedGraphNodeModels();if(e.count()>0){var t=JSON.stringify(O.SerializedSubgraph(e));o.Clipboard.write(t)}},J.prototype.cut=function(){if(this.experimentViewModel().readOnlyMode())return;this._experiment.isDraft()||this.cloneHandler();var e=this.selectedGraphNodeModels();if(e.count()>0){var t=JSON.stringify(O.SerializedSubgraph(e));o.Clipboard.write(t)}this.removeSelected()},J.prototype.paste=function(){var e=this,t=this.experimentView.getViewInfo(),n=o.Clipboard.read();if(this.experimentViewModel().readOnlyMode())return;this._experiment.isDraft()||this.cloneHandler();if(n){var r=JSON.parse(n),i;i=function(t){if(H.trialLimitationsEnabled()){var n=W.values(t.contractToNodes).filter(function(e){return e instanceof I.ModuleNode});if(!z.isNumberOfModulesUnrestricted()){var r=n.length+e._experiment.getNumberOfModules();if(r>z.getMaxNumberOfModules())return F.featureUsage({featureID:60,groupID:56,experimentID:e._experiment&&e._experiment.experimentIdForLogging}),T.showExceededNumberOfModulesLimitDialog(),!1}var i=W.first(n,function(e){return!z.isModuleEnabledById(e.module_.familyId)},null);if(i)return F.featureUsage({featureID:58,groupID:56,experimentID:e._experiment&&e._experiment.experimentIdForLogging,moduleID:i.module_.name()}),T.showDisabledModuleDialog(i.module_.familyId,i.module_.name()),!1}return!0};var s=new b.PasteCommand(r,this,t.experimentBounds,t.topLeft,this.workspace,i),u=s.itemsPasted.subscribe(function(t){t&&e.needsAnimationToContent.notifySubscribers(t),u.dispose()});s.run(),this.experimentOrViewBoundsChanged.notifySubscribers(null)}this.experimentOrViewPerturbed.notifySubscribers(null)},J.prototype.refreshExperiment=function(){var e=this;return this._experiment.canRefresh()?this.statusRefresher.doActionNow().fail(function(){e.refreshStatusLabel(j.RefreshStatus_Failed)}):$.Deferred().resolve().promise()},J.prototype.startAutoRefresh=function(){this.isAutoRefreshing=!0},J.prototype.selectedGraphNodeModels=function(){return this.selectionManager.selectedGraphNodes.transform(function(e){return e.graphNode})},J.prototype.observeEmptinessOfNewExperiment=function(){var e=this;this.currentExperimentHasBeenNonEmpty(!this._experiment.isEmpty());if(this._experiment.isEmpty()){var t=new _.DisposableSubscription(this._experiment.isEmpty.subscribe(function(n){n||e.currentExperimentHasBeenNonEmpty(!0),t.dispose()}));this.experimentDisposable.registerForDisposal(t)}},J.prototype.createContextMenuCommands=function(e){var t=this,n={promoteOutput:null,promoteTrainerOutput:null,promoteTransformOutput:null,openPython2NotebookFromPort:null,openPython3NotebookFromPort:null,editComment:null,viewOutput:null,viewStdOut:null,viewStdErr:null,downloadDataset:null,visualizeData:null,setPublishPort:null,unsetPublishPort:null,delete_:null,addComment:null,refreshExperiment:null,navigateToParent:null,copy:null,cut:null,paste:null,showHelp:null,promoteCreateWebService:null,showOutputPortApiCode:null,runSelected:null,publishCustomModule:null};n.promoteOutput=this.createPromoteOutputCommand(),n.promoteTrainerOutput=this.createPromoteTrainerOutputCommand(),n.promoteTransformOutput=this.createPromoteTransformOutputCommand(),n.promoteCreateWebService=y.optionalCommand(e.promoteCreateWebService),n.editComment=new s.CallbackCommand(function(e){e.editComment()}),n.viewOutput=this.createViewOutputCommand(),n.viewStdOut=new s.CallbackCommand(function(e){t.endpointDownloader.download(e.moduleNode.outputLog.endpoint())}),n.viewStdErr=new s.CallbackCommand(function(e){e.errorLog.onClick(e.errorLog,null)}),n.showHelp=new s.CallbackCommand(function(e){d.QuickHelpMoreInfo()}),B.canEnableNotebookContextMenu()&&(n.openPython2NotebookFromPort=this.createOpenNotebookCommand(M.NotebookLanguage.Python2),n.openPython3NotebookFromPort=this.createOpenNotebookCommand(M.NotebookLanguage.Python3)),H.enableOutputPortApiCodeEnabled()&&(n.showOutputPortApiCode=this.createShowOutputPortApiCodeCommand()),n.downloadDataset=new s.CallbackCommand(function(e){if(e instanceof w.OutputPort)t.endpointDownloader.download(e.portModel.outputEndpoint);else{if(!(e instanceof f.Dataset))throw new Error("Unknown view model type when trying to view a dataset");t.endpointDownloader.download(e.datasetNode.datasetPort.outputEndpoint)}}),n.visualizeData=this.createVisualizeDataCommand(),n.setPublishPort=new s.CallbackCommand(function(e){e instanceof w.OutputPort?t.experimentViewModel().addPublishOutputPort(e):e instanceof w.InputPort&&t.experimentViewModel().addPublishInputPort(e)}),n.unsetPublishPort=new s.CallbackCommand(function(e){e instanceof w.OutputPort?t.experimentViewModel().removePublishOutputPort(e):e instanceof w.InputPort&&t.experimentViewModel().removePublishInputPort(e)}),n.delete_=new s.CallbackCommand(function(){t.removeSelected()}),n.addComment=new s.CallbackCommand(function(e,n){n&&(F.featureUsage({featureID:195,groupID:194,experimentID:t.experiment.experimentIdForLogging}),t.addComment(t.domainCoordinatesHelper.clientToDomainCoordinates(n.clientX,n.clientY),t.domainCoordinatesHelper.getPanLimits()))}),n.refreshExperiment=y.optionalCommand(e.refreshExperiment),n.navigateToParent=y.optionalCommand(e.navigateToParent),n.copy=new s.CallbackCommand(function(){t.copy()}),n.cut=new s.CallbackCommand(function(){t.cut()}),n.paste=new s.CallbackCommand(function(){t.paste()}),n.runSelected=new s.CallbackCommand(function(){F.featureUsage({featureID:206,groupID:0,experimentID:t.experiment.experimentIdForLogging}),c.experimentView.submitSelected()});var r=ko.computed(function(){return!t.experimentViewModel().readOnlyMode()&&U.isFinishedState(t.experiment.statusCode())&&t.experiment&&!t.experiment.isPartialRun()});return n.publishCustomModule=new s.CallbackCommand(function(e){var t=new v.PublishCustomModuleWizardView(c.experimentView.xeViewModel,e);t.launchPublishCustomModuleWizard()},r),n},J.prototype.setCommandAvailabilities=function(e){var t=this,n=[e.viewOutput,e.visualizeData,e.promoteOutput,e.promoteTrainerOutput,e.promoteTransformOutput];e.showOutputPortApiCode&&n.push(e.showOutputPortApiCode),n.forEach(function(e){return e.target(t.menuBuilder.currentTarget)}),e.viewStdErr.canExecute=ko.computed(function(){var e=t.menuBuilder.currentTarget();if(e instanceof m.Module){var n=e;if(U.isFinishedState(n.moduleNode.statusCode.value())||U.isFailedState(n.moduleNode.statusCode.value()))if(n.moduleNode.errorLog.value())return!0}return!1}),e.setPublishPort.canExecute=ko.computed(function(){if(t.experimentViewModel().readOnlyMode())return!1;var e=t.menuBuilder.currentTarget();if(e instanceof w.PortViewModel){var n=e;return n.portModel.isDatasetDataType()}return!1}),e.unsetPublishPort.canExecute=ko.computed(function(){return t.experimentViewModel().readOnlyMode()?!1:!0}),e.promoteCreateWebService.canExecute=null!=e.promoteTrainerOutput.canExecute?e.promoteTrainerOutput.canExecute:e.promoteTransformOutput.canExecute,e.viewStdOut.canExecute=ko.computed(function(){var e=t.menuBuilder.currentTarget();if(e instanceof m.Module){var n=e;if(U.isFinishedState(n.moduleNode.statusCode.value())||U.isFailedState(n.moduleNode.statusCode.value()))if(n.moduleNode.outputLog.value())return!0}return!1}),e.editComment.canExecute=ko.computed(function(){return!t.experimentViewModel().readOnlyMode()}),e.delete_.canExecute=ko.computed(function(){return t.selectionManager.selectedEntities.count()>0&&!t.experimentViewModel().readOnlyMode()}),e.addComment.canExecute=ko.computed(function(){return!t.experimentViewModel().readOnlyMode()&&!t.addingAnnotation()&&t.experimentOrParentId!==null}),e.navigateToParent.canExecute=ko.computed(function(){return t.parentExperimentId()!==null}),e.copy.canExecute=ko.computed(function(){return t.selectionManager.selectedGraphNodes.count()>0}),e.cut.canExecute=ko.computed(function(){return t.selectionManager.selectedGraphNodes.count()>0&&!t.experimentViewModel().readOnlyMode()}),e.paste.canExecute=ko.computed(function(){return!t.experimentViewModel().readOnlyMode()}),e.runSelected.canExecute=ko.computed(function(){return t.selectionManager.selectedEntities.count()==0||t.experimentViewModel().readOnlyMode()?!1:l.EntityBaseV1.areEntitiesGoingToRun(W.values(t.findNodesAndTheirUpstreamNodes(W.values(t.selectionManager.selectedEntities()))))})},J.prototype.highlightNodesAndPorts=function(e){W.forEach(this.experimentViewModel().nodes(),function(t){var n=q.Constants.PortState.Default;W.forEach(t.ports,function(t){var r=e instanceof w.OutputPort&&t instanceof w.OutputPort||e instanceof w.InputPort&&t instanceof w.InputPort;e==null||e===t||r?t.portState(q.Constants.PortState.Default):t.portState(e.portModel.compatibilityWithPort(t.portModel));if(e===null||e===t)n=q.Constants.PortState.Default;else{var i=e.portModel.compatibilityWithPort(t.portModel);if(i===q.Constants.PortState.Compatible||i===q.Constants.PortState.Replaceable)n=q.Constants.PortState.Compatible}}),t.portState(n)})},J.prototype.setRefreshConditions=function(e){var t=this,n=e.statusCode();if(n===A.State.NotStarted||n===A.State.Running){this.statusRefresher.start();var r;this.experimentDisposable.registerForDisposal(r=new _.DisposableSubscription(e.statusCode.subscribe(function(){var n=e.statusCode();U.isFailedState(n)||U.isFinishedState(n)||n===A.State.Canceled?(t.statusRefresher.stop(),r.dispose(),setTimeout(function(){return t.checkForTrialRestrictions(e)},0)):n===A.State.Throttled&&H.trialLimitationsEnabled()&&z.isWorkspaceTypeFree()&&(!W.localStorage||!W.localStorage.getItem("concurrentRunLimitDialogShown"))&&setTimeout(function(){T.showExceededConcurrentRunLimitDialog(),W.localStorage.setItem("concurrentRunLimitDialogShown","true"),F.featureUsage({featureID:240,groupID:56,experimentID:t._experiment&&t._experiment.experimentIdForLogging})},0)})))}},J.prototype.checkForTrialRestrictions=function(e){if(!H.trialLimitationsEnabled())return;if(e.statusCode()===A.State.Canceled)switch(e.statusDetails()){case A.CancellationReason.ExceededRuntimeLimit:F.featureUsage({featureID:63,groupID:56,experimentID:this._experiment&&this._experiment.experimentIdForLogging}),T.showExceededRuntimeLimitDialog();break;default:}else if(H.freeRuntimeLimitUpgradeDialogEnabled()&&z.isWorkspaceTypeFree()&&e.statusCode()===A.State.Failed){var t=W.first(e.getModules(),function(e){return e.statusCode.value()===A.State.Failed&&(e.statusDetails.value()||"").match(A.moduleRuntimeExceededRegex)},null);if(t)try{var n=t.statusDetails.value().match(A.moduleRuntimeExceededRegex)[1],r=parseFloat(n)*60;r=+r.toFixed(2),r<1439&&(F.featureUsage({featureID:63,groupID:56,experimentID:this._experiment&&this._experiment.experimentIdForLogging}),T.showExceededRuntimeLimitDialog(r))}catch(i){F.error("error showing runtime limit exceeded message",null,{error:W.errorToSerializableObject(i)})}}},J.prototype.calculatePlacement=function(e){var t;do t=!0,this.experiment.nodes.forEach(function(n){e.x===n.x()&&e.y===n.y()&&(e.x+=b.Constants.PasteCascadeX,e.y+=b.Constants.PasteCascadeY,t=!1)});while(!t);return{x:e.x,y:e.y,matrixTransform:null}},J.prototype.getNumberOfModulesToBePasted=function(e){return e&&e.Nodes?W.filter(e.Nodes,function(e){return e.NodeType===0}).length:0},J.prototype.createViewOutputCommand=function(e){var t=this;e===void 0&&(e=null);var n=ko.observable(e),r=function(e){e=ko.utils.unwrapObservable(n())||e,t.endpointDownloader.download(e.portModel.outputEndpoint)},i=ko.computed(function(){var e=ko.utils.unwrapObservable(n());if(e instanceof w.OutputPort){var t=e;if(t.parent instanceof m.Module&&t.portModel.outputEndpoint&&t.portModel.outputEndpoint.Size>=0&&!t.portModel.isVisualizable()){var r=t.parent;if(t.portModel.descriptor.allowedDataTypes.some(function(e,t,n){return e.dataTypeId==="ILearnerDotNet"||e.dataTypeId==="ITransformDotNet"||e.dataTypeId==="IClusterDotNet"})===!1||H.authorizeDownloadILearnerEnabled()&&(t.portTypes==="ILearnerDotNet"||t.portTypes==="IClusterDotNet"))if(U.isFinishedState(r.moduleNode.statusCode.value()))return!0}}return!1}),o=new s.CallbackCommand(r,i,n);return o},J.prototype.createVisualizeDataCommand=function(e){var t=this;e===void 0&&(e=null);var n=ko.observable(e),r=function(e){e=ko.utils.unwrapObservable(n())||e;if(e instanceof w.OutputPort){var r=e;t.endpointDownloader.visualize(e.portModel,t.workspace,r.parent.isModule(),t.experimentView.getViewInfo())}},i=ko.computed(function(){var e=ko.utils.unwrapObservable(n());if(e instanceof w.OutputPort){var t=e;if(t.parent.isData()){var r=t.parent;if(r.datasetNode.dataset.visualizeEndPoint!=undefined)return!0}var i=t.parent;if(t.portModel.isVisualizable()&&U.isFinishedState(i.moduleNode&&i.moduleNode.statusCode.value()))return!0}return!1}),o=new s.CallbackCommand(r,i,n);return o},J.prototype.createPromoteOutputCommand=function(e){e===void 0&&(e=null);var t=ko.observable(e),n=y.optionalCommand(this.experimentEditorViewModelCommands.promoteOutput),r=function(e){return n.execute(e)},i=ko.computed(function(){var e=ko.utils.unwrapObservable(t());if(e instanceof w.OutputPort){var n=e;if(n.parent instanceof m.Module&&n.portModel.outputEndpoint&&n.portModel.outputEndpoint.Size>=0&&n.portModel.descriptor.allowedDataTypes.filter(function(e){return!e.allowPromotion}).length===0){var r=n.parent;if(U.isFinishedState(r.moduleNode.statusCode.value()))return!0}}return!1}),o=new s.CallbackCommand(r,i,t);return o},J.prototype.createPromoteTrainerOutputCommand=function(e){e===void 0&&(e=null);var t=ko.observable(e),n=y.optionalCommand(this.experimentEditorViewModelCommands.promoteTrainerOutput),r=function(e){return n.execute(e)},i=ko.computed(function(){var e=ko.utils.unwrapObservable(t());if(e instanceof w.OutputPort){var n=e;if(n.parent instanceof m.Module&&n.portModel.outputEndpoint&&n.portModel.outputEndpoint.Size>=0&&n.portModel.descriptor.allowedDataTypes.filter(function(e){return!e.allowModelPromotion}).length===0){var r=n.parent;if(U.isFinishedState(r.moduleNode.statusCode.value())&&n.portModel.descriptor.allowedDataTypes.some(function(e,t,n){return e.dataTypeId==="ILearnerDotNet"||e.dataTypeId==="IClusterDotNet"}))return!0}}return!1}),o=new s.CallbackCommand(r,i,t);return o},J.prototype.createPromoteTransformOutputCommand=function(e){e===void 0&&(e=null);var t=ko.observable(e),n=y.optionalCommand(this.experimentEditorViewModelCommands.promoteTransformOutput),r=function(e){return n.execute(e)},i=ko.computed(function(){var e=ko.utils.unwrapObservable(t());if(e instanceof w.OutputPort){var n=e;if(n.parent instanceof m.Module&&n.portModel.outputEndpoint&&n.portModel.outputEndpoint.Size>=0&&n.portModel.descriptor.allowedDataTypes.filter(function(e){return!e.allowModelPromotion}).length===0){var r=n.parent;if(U.isFinishedState(r.moduleNode.statusCode.value())&&n.portModel.descriptor.allowedDataTypes.some(function(e,t,n){return e.dataTypeId==="ITransformDotNet"}))return!0}}return!1}),o=new s.CallbackCommand(r,i,t);return o},J.prototype.openNotebookFromExperimentGraphResource=function(e,t){t===void 0&&(t=null),F.featureUsage({featureID:127,groupID:126,experimentID:this._experiment&&this._experiment.experimentIdForLogging,data:e});var n,r,i;if(t instanceof f.Dataset){var s=t,o=s.datasetNode.dataset.familyId.split(".")[1],u=this.workspace.applicationCache.notebookCache.getItemIfCached(o);H.openMultipleNotebooksFromAssetEnabled()&&(u=u&&u.language===e?u:g.NotebookHelpers.getNotebookForDataset(e,o));if(u)i=u.familyId;else{r={Name:s.datasetNode.name,FamilyId:o,Language:e,Author:this.workspace.getUserName()};if(H.openMultipleNotebooksFromAssetEnabled()){r.Name=r.Name+W.format(j.notebookNameSuffixBasedOnLanguage,e),r.FamilyId=null;var a=g.NotebookHelpers.createTagForNotebookFromDataset(o);r.Tags?r.Tags.push(a):r.Tags=[a]}var l={TemplateName:g.NotebookHelpers.getNotebookCreationTemplate(2),DatasetName:s.datasetNode.name};n=l}}else if(t instanceof w.OutputPort){var c=t;if(c.parent instanceof f.Dataset){o=c.parent.datasetNode.dataset.familyId.split(".")[1],u=this.workspace.applicationCache.notebookCache.getItemIfCached(o),H.openMultipleNotebooksFromAssetEnabled()&&(u=u&&u.language===e?u:g.NotebookHelpers.getNotebookForDataset(e,o));if(u)i=u.familyId;else{r={Name:c.parent.datasetNode.name,FamilyId:o,Language:e,Author:this.workspace.getUserName()};if(H.openMultipleNotebooksFromAssetEnabled()){r.Name=r.Name+W.format(j.notebookNameSuffixBasedOnLanguage,e),r.FamilyId=null;var a=g.NotebookHelpers.createTagForNotebookFromDataset(o);r.Tags?r.Tags.push(a):r.Tags=[a]}var h={TemplateName:g.NotebookHelpers.getNotebookCreationTemplate(2),DatasetName:c.parent.datasetNode.name};n=h}}else if(c.parent instanceof m.Module){var p=t.parent;o=g.NotebookHelpers.ModuleResultNotebookGuidGenerator(p.moduleNode.id),u=this.workspace.applicationCache.notebookCache.getItemIfCached(o),H.openMultipleNotebooksFromAssetEnabled()&&(u=u&&u.language===e?u:g.NotebookHelpers.getNotebookForModulePort(e,p.moduleNode.executedExperimentId,p.moduleNode.id,c.portModel.name));if(u)i=u.familyId;else{W.formatDate(new Date),r={Name:j.runResultNotebookNamePrefix+W.formatDate(new Date).replace(/\//g,"-"),FamilyId:o,Language:e,Author:this.workspace.getUserName()};if(H.openMultipleNotebooksFromAssetEnabled()){r.Name=r.Name+W.format(j.notebookNameSuffixBasedOnLanguage,e),r.FamilyId=null;var d=g.NotebookHelpers.createTagForNotebookFromModulePort(p.moduleNode.executedExperimentId,p.moduleNode.id,c.portModel.name);r.Tags?r.Tags.push(d):r.Tags=[d]}var v={TemplateName:g.NotebookHelpers.getNotebookCreationTemplate(3),ExperimentId:p.moduleNode.executedExperimentId,NodeId:p.moduleNode.id,PortName:c.portModel.name,DataTypeId:c.portTypes};n=v}}}if(i)g.NotebookHelpers.openNotebookById(i,W.addSpinnerToBlankWindow());else{var y={Notebook:r,Parameters:n},b=new V.IfxScenarioStopWatch(16,{name:r.Name,language:r.Language});b.start(),g.NotebookHelpers.createAndOpenNotebook(y,b)}},J.prototype.createOpenNotebookCommand=function(e,t){var n=this;t===void 0&&(t=null);var r=ko.observable(t),i=function(i){i=ko.utils.unwrapObservable(r())||i,n.openNotebookFromExperimentGraphResource(e,t)},o=ko.computed(function(){var t=ko.utils.unwrapObservable(r()),i=[K.GenericCSV,K.GenericTSV,K.GenericCSV+"NoHeader",K.GenericTSV+"NoHeader",K.PlainText];if(t instanceof f.Dataset){var s=t;if(!H.openMultipleNotebooksFromAssetEnabled()){var o=s.datasetNode.dataset.familyId.split(".")[1],u=n.workspace.applicationCache.notebookCache.getItemIfCached(o);if(u)return e===u.language}var a=s.datasetPort.portTypes;if($.inArray(a,i)!==-1)return!0}if(t instanceof w.OutputPort){var l=t;if(t.parent instanceof f.Dataset){s=l.parent;if(!H.openMultipleNotebooksFromAssetEnabled()){o=s.datasetNode.dataset.familyId.split(".")[1],u=n.workspace.applicationCache.notebookCache.getItemIfCached(o);if(u)return e===u.language}a=s.datasetPort.portTypes;if($.inArray(a,i)!==-1)return!0}else if(t.parent instanceof m.Module){a=l.portTypes;if(!H.openMultipleNotebooksFromAssetEnabled()){var c=t.parent;o=g.NotebookHelpers.ModuleResultNotebookGuidGenerator(c.moduleNode.id),u=n.workspace.applicationCache.notebookCache.getItemIfCached(o);if(u)return e===u.language}if($.inArray(a,i)!==-1){if(l.parent.isData())return!0;var h=l.parent;if(U.isFinishedState(h.moduleNode.statusCode.value()))return!0}}return!1}}),u=new s.CallbackCommand(i,o,r);return u},J.prototype.createShowOutputPortApiCodeCommand=function(e){var t=this;e===void 0&&(e=null);var n=ko.observable(e),i=function(e){e=ko.utils.unwrapObservable(n())||e;var i=e.portModel;t.workspace.getWorkspaceSettingsAsync().done(function(e){var t=new r.ApiCodeDialogViewModel(i,e.id,e.authorizationToken);t.showDialog()}).fail(function(){var e=new r.ApiCodeDialogViewModel(i,undefined,undefined);e.showDialog()})},o=ko.computed(function(){var e=ko.utils.unwrapObservable(n());if(e instanceof w.OutputPort){var t=e,r=t.portTypes,i=[K.GenericCSV,K.GenericTSV,K.GenericCSV+"NoHeader",K.GenericTSV+"NoHeader",K.PlainText];if($.inArray(r,i)!==-1){if(t.parent.isData())return!0;var s=t.parent;return U.isFinishedState(s.moduleNode.statusCode.value())?!0:!1}return!1}}),u=new s.CallbackCommand(i,o,n);return u},J.prototype.findUpstreamNodes=function(e,t){var n=this,r=!1;return e.inputPorts&&W.forEach(e.inputPorts,function(i){W.forEach(i.connections(),function(i){var s=i.outputPort.parent;t.indexOf(e)!==-1?r=!0:n.findUpstreamNodes(s,t)&&(r=!0)})}),!r&&l.EntityBaseV1.nodeWillRunAgain(e)&&(r=!0),r&&t.indexOf(e)===-1&&t.push(e),r},J.prototype.findSelectedNodesAndTheirUpstreamNodes=function(){return this.findNodesAndTheirUpstreamNodes(W.values(this.selectionManager.selectedGraphNodes()))},J.prototype.findNodesAndTheirUpstreamNodes=function(e){var t=this,n=Array();try{e.forEach(function(e){t.findUpstreamNodes(e,n)})}catch(r){}return n},J.prototype.setSelectedNodesIsPartOfPartialRun=function(e){var t=this.findSelectedNodesAndTheirUpstreamNodes();t.forEach(function(t){t.isPartOfPartialRun(e)})},J}(_.Disposable);t.ExperimentEditorViewModel=G}),define("generated/editor/TS/ViewModel/Dialogs/OutputPromotionDialogViewModel",["require","exports","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(){function e(e,t,n,s){this.resourcePromotionStartedEvent=new ko.subscribable,this.outputPort=e,this.promoteFunc=s;var o=e.portModel,u=o.parent;if(!(u instanceof r.ModuleNode))throw new Error("Only module output ports can be saved as datasets.");var a=u,f=o.name+" (saved from "+a.module_.name()+")";this.resource=t;var l=e.portModel.parent.executedExperimentId,c=e.portModel.parent.id,h=e.portModel.name,p=i.first(n.items(),function(e){return e.experimentId?e.moduleId===c&&e.outputName===h:!1},null);p?(this.resource.deprecate(!0),this.resource.resourceToDeprecate(p.name()),this.resource.hint(!0)):this.resource.name(f)}return e.prototype.canBeAccepted=function(){return this.resource.startValidating(),this.resource.isValid()},e.prototype.dismissed=function(e){e.accepted?(n.info("Output promotion dialog accepted"),this.promote()):n.info("Output promotion dialog cancelled")},e.prototype.promote=function(){var e=this.promoteFunc(this.outputPort.portModel,this.resource.name(),this.resource.familyId(),this.resource.description());this.resourcePromotionStartedEvent.notifySubscribers(e)},e}();t.OutputPromotionDialogViewModel=s}),define("generated/editor/TS/ViewModel/ExperimentEditor/ProjectViewModel",["require","exports","../../../DataLabViews/ExperimentView","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Contracts/V1/Common/Project"],function(e,t,n,r,i,s,o){var u=function(){function e(e,t,n){var r=this;this.experimentId=ko.observable(null),this.experimentId(e),this.role=t,this.roleName=ko.computed(function(){switch(r.role){case o.ExperimentRole.Training:return i.trainingExperimentTabContent;case o.ExperimentRole.Scoring:return i.scoringExperimentTabContent;default:return i.computingExperimentTabContent}}),this.active=ko.computed(function(){return n&&r.experimentId()===n.experimentId()})}return e.prototype.navigate=function(){if(!this.experimentId()){s.error("null experimentId","project navigate",JSON.stringify({role:this.roleName}));var e=new Shell.UI.Notifications.Notification(i.projectExperimentNavigationError,"error");e.setActions([Shell.UI.Notifications.Buttons.close()]),Shell.UI.Notifications.add(e);return}this.active()||(s.featureUsage({featureID:77,groupID:72,experimentID:this.experimentId(),data:this.role}),Shell.UI.Navigation.navigate({extension:n.experimentExtensionName,type:n.ExperimentType.name,name:this.experimentId()}))},e}();t.ProjectExperimentViewModel=u;var a=function(){function e(e,t){var n=this;this.experimentVMs=ko.observableArray(),this.modified=ko.observable(!1),this.loaded=ko.observable(!1);if(!e)throw new Error("ProjectViewModel:constructor workspace can't be null");this.workspace=e,this.experiment=ko.computed(t),this.experimentId=ko.computed(function(){return n.experiment().experimentId()||n.experiment().parentExperimentId}),this.hasScoringGraph=ko.computed(function(){return!!n.findExperiment(function(e){return e.role===o.ExperimentRole.Scoring})}),this.init()}return e.prototype.init=function(){var e=this;this.reset();if(!this.experimentId())return;this.workspace.listProjects(this.experimentId()).done(function(t){t&&t.length&&t[0].Experiments&&t[0].Experiments.length&&(e.experimentVMs.removeAll(),e.projectId=t[0].ProjectId,t[0].Experiments.forEach(function(t){var n=new u(t.ExperimentId,t.Role,e);e.experimentVMs.push(n)}),e.loaded(!0))})},e.prototype.reset=function(){this.loaded(!1),this.modified(!1),this.projectId=null,this.experimentVMs.removeAll()},e.prototype.addExperiment=function(e,t){var n=new u(e,t,this);return this.experimentVMs.push(n),this.modified(!0),n},e.prototype.save=function(){var e=this;if(!this.modified())return;var t=this.experimentVMs().map(function(e){return{ExperimentId:e.experimentId(),Role:e.role}});return this.projectId?this.workspace.updateProject(this.projectId,{Experiments:t}).done(function(t){e.modified(!1)}):this.workspace.createProject({Experiments:t}).done(function(t){e.projectId=t.ProjectId,e.modified(!1)})},e.prototype.findExperiment=function(e){var t=this.experimentVMs();for(var n=0;n<t.length;n++){var r=t[n];if(e(r))return r}return null},e}();t.ProjectViewModel=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/PropertyEditorControl/PropertyEditorViewModel",["require","exports","../../../TS/ViewModel/ExperimentEditor/Help","../../../../DataLabClient/Disposable"],function(e,t,n,r){var i=function(e){function t(t,r){var i=this;r===void 0&&(r=$.noop),e.call(this),this.tabs=t,this.getHelp=r,this.help=n,this.tabs.forEach(function(e){i.registerForDisposal(e),e.setContainer(i),e.bindView()}),this.drawerIsCollapsed=ko.observable(!1),this.tabs[0].selected(!0),this.animatingDrawer=ko.observable(!1),this.openCloseAnimationEnded=new ko.subscribable,this.quickHelpCollapsed=ko.observable(!1)}return __extends(t,e),t.prototype.dispose=function(){this.tabs.forEach(function(e){e instanceof r.Disposable&&e.dispose(),e=null}),e.prototype.dispose.call(this)},t.prototype.selectTab=function(e){this.tabs.forEach(function(t){t.selected(e===t.id)})},t.prototype.toggleDrawer=function(){this.animatingDrawer(!0),this.drawerIsCollapsed(!this.drawerIsCollapsed())},t}(r.Disposable);t.PropertyEditorViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/PropertyEditorControl/CompetitionPropertiesViewModel",["require","exports","../../../TS/Global","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../TS/ViewModel/SubmitCompetitionEntryWizard/SubmitCompetitionEntryWizardViewModel","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Contracts/V1/Common/Project","../../../../DataLabClient/Model/Property","../../../../DataLabClient/Trial","../../../TS/ViewModel/ExperimentEditor/CommunityHelpers","../SubmitCompetitionEntryWizard/CompetitionSubmissionUtilities"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e){function t(t){var s=this;e.call(this),this.projectExperimentLocator=t,this.experiment=ko.observable(null),this.isScoringExperimentCreated=ko.computed(function(){return s.isScoringExperimentAvailable()}),this.isWebServicePublished=ko.computed(function(){return s.isScoringExperimentAvailable()&&s.experiment().publishedWebServiceGroupId!==null}),this.isSubmittedToCompetition=ko.computed(function(){var e=s.experiment();return e?e.tags().some(function(e){return e===i.SubmitCompetitionEntryWizardViewModel.CompetitionSubmittedTag}):!1}),this.competitionUrl=ko.computed(function(){if(!o.competitionExperimentSupportEnabled())return null;var e=s.experiment();if(!e)return null;var t=e.originalExperimentDocumentation.value();if(!t){var i=e.getTag(n.CompetitionConstants.GalleryUriTagSearchRegex);t=i.length>0?i[0].substring(n.CompetitionConstants.GalleryUriTagPrefix.length):"/"}return new r.LinkPropertyViewModel(new f.LinkProperty(u.goToCompetitionText,t),function(e){window.open(t,"_blank")})}),this.showProperties=ko.computed(function(){if(!o.competitionExperimentSupportEnabled())return!1;if(l.isWorkspaceTypeAnonymous())return!1;if(o.multiGeoNavigationEnabled()&&!h.isSupportedCompetitionRegion(c.multiGeoRegion))return!1;var e=s.experiment();return!e||!e.experimentId||!e.experimentId()?!1:e.experimentId().indexOf(".f-id.")!==-1})}return __extends(t,e),t.prototype.isScoringExperimentAvailable=function(){var e=this.experiment();if(!e)return!1;var t=this.projectExperimentLocator.findExperiment(function(e){return e.role===a.ExperimentRole.Scoring});return t?e.experimentId()===t.experimentId():!1},t}(s.Disposable);t.CompetitionPropertiesViewModel=p}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!generated/editor/KoComponents/ExperimentParameter/ExperimentParameter.html",[],function(){return'<!-- ko if: !viewModel.isStaticContent()-->\r\n<div class="textAreaProperty" data-bind="template: { name: \'propertyItem\', data: viewModel }"></div>\r\n<!-- /ko -->\r\n<!-- ko if: viewModel.isStaticContent()-->\r\n<div class="textAreaProperty" data-bind="template: { name: \'staticPropertyItem\', data: viewModel }"></div>\r\n<!-- /ko -->\r\n'}),define("text!generated/editor/KoComponents/ExperimentParameter/PropertyTemplates.html",[],function(){return'<script type="text/html" id="inputParameter">\r\n    <input type="text"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="validatedInputBox: { value: property.value, disabled: (readOnlyMode() || isDisabled()) },\r\n                      hasfocus: focus,\r\n                      readonly:  readOnlyMode() || isDisabled(),\r\n                      css: { disabled: readOnlyMode() || isDisabled() },\r\n                      event: { keydown: onKeyReturn },\r\n                      autocomplete: { array: autocompleteArray, dependentObservable: property.value }" />\r\n</script>\r\n\r\n<script type="text/html" id="textAreaParameter">\r\n    <div class="monaco-parent" style="position: relative"\r\n         data-bind="resize: {\r\n                        direction: \'bottom\',\r\n                        parentContainerSelector: \'.propertyEditor-right\',\r\n                        minSize: 125,\r\n                        maxSize: 9999,\r\n                        id: property.label\r\n                    }">\r\n        <div class="monaco-container datalab-gridCellPropertyItem"\r\n             data-bind="monaco: {\r\n                            value: property.value,\r\n                            mimetype: monacoMimeType,\r\n                            insertSpaces: untabify,\r\n                            expandOnFocus: shouldExpandOnFocus\r\n                        },\r\n                        validatedInputBox: {value: property.value},\r\n                        style: { backgroundColor: (readOnlyMode() || isDisabled()) ? \'rgba(0, 0, 0, 0.05)\' : \'\' },\r\n                        css: { focused: focus},\r\n                        readonly: readOnlyMode() || isDisabled()">\r\n        </div>\r\n    </div>\r\n    <div class="characterCountMessage" style="display:none;">\r\n        <span class="maxCharacterCount"></span> <span class="characterCountText"></span>\r\n    </div>\r\n</script>\r\n\r\n<script type="text/html" id="checkboxParameter">\r\n    <input type="checkbox"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="checkboxvalue: { value: property.value, choices: property.descriptor.choices },\r\n                      hasfocus: focus,\r\n                      disable: (readOnlyMode() || isDisabled()),\r\n                      css: { disabled: (readOnlyMode() || isDisabled()) }" />\r\n</script>\r\n\r\n<script type="text/html" id="multiSelectParameter">\r\n    <div class=".datalab-gridCellTextArea"\r\n         data-bind="multiSelectMenu: enumItems">\r\n        <hflexbox class="datalab-gridCellPropertyItem multiSelectButton">\r\n            <div class="datalab-gridCellPropertyItem"\r\n                 data-bind="text: buttonLabel"></div>\r\n            <div style="float:right">&#9660</div>\r\n        </hflexbox>\r\n        <ul data-bind="foreach: enumItems" class="datalab-gridCellPropertyItem multiSelectMenu">\r\n            <li data-bind="css: classString">\r\n                <a href=" #" data-bind="text: displayValue" />\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</script>\r\n\r\n<script type="text/html" id="selectParameter">\r\n    <select class="datalab-gridCellPropertyItem"\r\n            data-bind="value: property.value,\r\n                   hasfocus: focus,\r\n                   options: property.descriptor.choices,\r\n                   optionsText: \'displayValue\',\r\n                   optionsValue: \'value\',\r\n                   valueAllowUnset: true,\r\n                   disable: (readOnlyMode() || isDisabled()),\r\n                   css: { disabled: (readOnlyMode() || isDisabled()) },\r\n                   attr: { title: toolTipText() }"></select>\r\n</script>\r\n\r\n<script type="text/html" id="dataGatewayNameParameter">\r\n    <select class="datalab-gridCellPropertyItem"\r\n            data-bind="value: property.value,\r\n                   hasfocus: focus,\r\n                   options: choices,\r\n                   optionsText: \'displayValue\',\r\n                   optionsValue: \'value\',\r\n                   disable: (readOnlyMode() || isDisabled()),\r\n                   css: { disabled: (readOnlyMode() || isDisabled()) }"></select>\r\n</script>\r\n\r\n<script type="text/html" id="staticTextProperty">\r\n    <div class="datalab-gridCellPropertyItem datalab-staticProperty"\r\n         data-bind="text: property.value, attr: { title: property.value }, style: { whiteSpace: property.name === \'Status details\' ? \'normal\' : \'nowrap\' }">\r\n    </div>\r\n</script>\r\n\r\n<script type="text/html" id="credentialParameter">\r\n    <input type="password"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="validatedInputBox: { value: property.value, disabled: (readOnlyMode() || isDisabled()) },\r\n                      disable: readOnlyMode() || isDisabled(),\r\n                      hasfocus: focus,\r\n                      css: { disabled:readOnlyMode() || isDisabled() }" />\r\n</script>\r\n\r\n<script type="text/html" id="dataGatewayCredentialParameter">\r\n    <div data-bind="css: invalidClass()">\r\n        <div class="dataGatewayCredentialsValue">\r\n            <!-- ko if: property.value() -->\r\n            <span data-bind="text: LocalizedResources.dataGatewayCredentialValuesSet" class="gatewayIconGood"></span>\r\n            <!-- /ko -->\r\n            <!-- ko if: !(property.value()) -->\r\n            <span data-bind="text: LocalizedResources.dataGatewayCredentialValuesRequired"></span>\r\n            <!-- /ko -->\r\n        </div>\r\n    </div>\r\n    <input type="button"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="disable: readOnlyMode() || isDisabled() || !canEnterValue(),\r\n                      click: enterValue,\r\n                      value: LocalizedResources.dataGatewayEnterCredentials,\r\n                      hasfocus: focus" />\r\n    <div data-bind="if: showClickOnceWarning">\r\n        <span data-bind="html: clickOnceWarning" class="gatewayIconWarn"></span>\r\n    </div>\r\n</script>\r\n\r\n<script type="text/html" id="columnPickerParameter">\r\n    <div class="datalab-gridCellPropertyItem columnPickerRules"\r\n         data-bind="columnPickerRuleDisplay: property.value,\r\n                      css: { disabled: (isDisabled()) }">\r\n    </div>\r\n    <input type="button"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="value: LocalizedResources.launchColumnSelector,\r\n                      click: openColumnPicker,\r\n                      disable: readOnlyMode() || isDisabled() || launchDisabled" />\r\n</script>\r\n\r\n<script type="text/html" id="parameterRangeParameter">\r\n    <span class="parameterRangeLabel" \r\n          data-bind="text: LocalizedResources.useRangeBuilderLabel" \r\n          style="font-size:12px;line-height: 16.25px; font-family: Segoe UI;">\r\n\r\n    </span>\r\n    <input id="UseRangeBuilderCheckbox"\r\n           type="checkbox"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="checked: useRangeBuilder,\r\n                      disable: readOnlyMode(),\r\n                      css: { disabled: readOnlyMode()}" />\r\n\r\n    <!-- ko if: !useRangeBuilder() -->\r\n    <input type="text"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="value: literalList,\r\n                      validatedInputBox: { value: literalList, disabled: readOnlyMode()},\r\n                      readonly: readOnlyMode(),\r\n                      css: { disabled: readOnlyMode()}" />\r\n    <!-- /ko -->\r\n    <!-- ko if: useRangeBuilder() -->\r\n    <div>\r\n        <span>\r\n            <span data-bind="text: LocalizedResources.ParameterRangeLabel"\r\n                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">\r\n            </span>\r\n            <span id="ParameterRangeAsString"\r\n                  data-bind="text: rangeString" \r\n                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">\r\n            </span>\r\n        </span>\r\n        <!-- ko if: isLogarithmic() -->\r\n        <div class="parameterRangeSlider"\r\n             data-bind="slider: [logMin, logMax],\r\n                        sliderOptions: {min: logMinLimit, max: logMaxLimit, range:true, step: logSliderStep, values: [logMin, logMax], disabled: readOnlyMode()}"\r\n             style="margin: 5px 10px">\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- ko if: !isLogarithmic() -->\r\n        <div class="parameterRangeSlider"\r\n             data-bind="slider: [minValue, maxValue],\r\n                        sliderOptions: {min: sliderMin, max: sliderMax, range:true, step: linSliderStep, values: [sliderMin, sliderMax], disabled: readOnlyMode()}"\r\n             style="margin: 5px 10px">\r\n        </div>\r\n        <!-- /ko -->\r\n        <div>\r\n            <span class="parameterRangeLabel" \r\n                  data-bind="text: LocalizedResources.rangeBuilderCount" \r\n                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">\r\n            </span>\r\n            <input class="parameterRangeCount"\r\n                   id="rangeBuilderCount"\r\n                   type="text"\r\n                   data-bind="value: countValidatable,\r\n                              validatedInputBox: { value: countValidatable, disabled: readOnlyMode()},\r\n                              readonly: readOnlyMode(),\r\n                              css: { disabled: readOnlyMode()}"\r\n                   style="width:40px; border: 1px solid #ccc; padding-left: 5px; padding-right: 5px; background-color: #fff;" />\r\n        </div>\r\n        <!-- ko if: logCapable -->\r\n        <div>\r\n            <span class="parameterRangeLabel" \r\n                  data-bind="text: LocalizedResources.rangeBuilderLogarithmicScaleCheckbox" \r\n                  style="font-size: 12px;line-height: 16.25px; font-family: Segoe UI;">\r\n            </span>\r\n            <input id="LogarithmicCheckbox"\r\n                   type="checkbox"\r\n                   class="datalab-gridCellPropertyItem"\r\n                   data-bind="checked: isLogarithmic,\r\n                              disable: readOnlyMode(),\r\n                              css: { disabled: readOnlyMode()}" />\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n    <!-- /ko -->\r\n</script>\r\n\r\n<script type="text/html" id="linkProperty">\r\n    <div class="propertyLink">\r\n        <a href=\'#\' data-bind="attr: { title: property.tooltip, href: (property.endpoint && property.endpoint.Size === -1) ? \'#\' : property.value},\r\n                      hasfocus: focus,\r\n                      event: { click: onClick },\r\n                      text: property.label"\r\n           target="_blank">\r\n        </a>\r\n    </div>\r\n    <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)</div>\r\n</script>\r\n\r\n<script type="text/html" id="buttonProperty">\r\n    <div class="propertyEditor-staticValueCell">\r\n        <div class="datalab-gridCellTextArea">\r\n            <div class=" propertyeditor-statictextareaitem propertyeditor-headingcellwrapper"\r\n                 data-bind="css: { isButton: templateType() === \'buttonProperty\' }, visible: property.value() === false || property.value()">\r\n                <button data-bind="attr: { title: property.tooltip, name: property.label},\r\n                           hasfocus: focus,\r\n                           event: { click: onClick },\r\n                           text: property.label,\r\n                           disable: clickDisabled"></button>\r\n            </div>\r\n            <div class="propertyLinkMetaData" data-bind="visible: (property.endpoint && property.endpoint.Size === -1)">&nbsp;(none)</div>\r\n        </div>\r\n    </div>\r\n</script>\r\n\r\n<script type="text/html" id="propertyKey">\r\n    <!-- ko if: isExperimentLevel() && !readOnlyMode() -->\r\n    <div>\r\n        <input type="text"\r\n               class="datalab-gridCellPropertyItem"\r\n               data-bind="validatedInputBox: { value: property.validatableName },\r\n                              event: { blur: property.textboxBlur, keydown: property.textboxKeydown },\r\n                              visible: property.isEditingName" />\r\n        <div class="datalab-gridCellKey"\r\n             data-bind="attr: { title: property.tooltip },\r\n                    text: property.label,\r\n                    click: property.toggleEditingName,\r\n                    visible: !property.isEditingName()">\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: isExperimentLevel() && !readOnlyMode() -->\r\n    <!-- ko if: templateType() === \'linkProperty\' -->\r\n    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'linkProperty\' }"></hflexbox>\r\n    <!-- /ko -->\r\n    <!-- ko if: templateType() === \'buttonProperty\' -->\r\n    <hflexbox class="datalab-gridCellKey" data-bind="template: { name: \'buttonProperty\' }"></hflexbox>\r\n    <!-- /ko -->\r\n    <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->\r\n    <div class="datalab-gridCellKey" data-bind="attr: { title: property.tooltip }, text: property.label"></div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</script>\r\n\r\n<script type="text/html" id="propertyItem">\r\n    <div class="propertyEditor-textAreaItem" data-bind="css:{ hiddenInWizard: property.shouldBlockRenderingInWizard }">\r\n        <div class="propertyEditor-headingCellWrapper" data-bind="css: { propertyEditorHeadingCellWrapperEditingName: property.isEditingName, isLink: templateType() === \'linkProperty\' }">\r\n            <div class="propertyEditor-headingCell">\r\n                <div class="propertyEditor-sideButtonWrapper">\r\n                    <div class="parameterIsLinked linkStatus propertyEditorButton"\r\n                         data-bind="style: { visibility: property.isLinked() && !isExperimentLevel() ? \'visible\' : \'hidden\' },\r\n                                    event: { click: focusLinkedWebServiceParameter },\r\n                                    attr: { title: Util.format(LocalizedResources.parameterIsLinkedToWebServiceParameter, linkedParameterName()) }">\r\n                    </div>\r\n                    <!-- ko if: getMenuBuilder() -->\r\n                    <div class="propertyEditorButton dropMenu"\r\n                         data-bind="dropMenu: getMenuBuilder()">\r\n                    </div>\r\n                    <!-- /ko -->\r\n                    <!-- ko if: templateType() === "textAreaParameter" -->\r\n                    <!-- ko if: showPopupIcon() -->\r\n                    <div class="propertyEditorButton"\r\n                         data-bind="event:{ mousedown: openScriptEditor}, attr: {title: LocalizedResources.experimentEditorPropertiesPaneScriptEditorPopOut}">\r\n                        <span class="icon icon-openscripteditor"></span>\r\n                    </div>\r\n                    <!-- /ko -->\r\n                    <!-- /ko -->\r\n                </div>\r\n\r\n                <!-- ko if: templateType() === \'checkboxParameter\' -->\r\n                <div data-bind="template: { name: \'checkboxParameter\' },\r\n                                visible: !isExperimentLevel() || property.hasDefaultValue()">\r\n                </div>\r\n                <!-- /ko -->\r\n                <div class="datalab-gridCellKeyWrapper"\r\n                     data-bind="template: { name: \'propertyKey\' }">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- ko if: templateType() !== \'checkboxParameter\' && templateType() !== \'linkProperty\' && templateType() !== \'buttonProperty\' -->\r\n        <!-- ko if: !isExperimentLevel() || property.hasDefaultValue() -->\r\n        <div class="propertyEditor-valueCellWrapper">\r\n            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"></div>\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- /ko -->\r\n    </div>\r\n    <!-- ko foreach: childParameters -->\r\n    <!-- ko if: property.isRelevant() -->\r\n    <div data-bind="template: { name: \'propertyItem\' }"></div>\r\n    <!-- /ko -->\r\n    <!-- /ko -->\r\n</script>\r\n\r\n<script type="text/html" id="checkboxProperty">\r\n    <input type="checkbox"\r\n           class="datalab-gridCellPropertyItem"\r\n           data-bind="checked: property.value,\r\n                        hasfocus: focus,\r\n                        disable: readOnlyMode(),\r\n                        css: { disabled: readOnlyMode() }" />\r\n    <div class="datalab-gridCellKeyWrapper"\r\n         data-bind="template: { name: \'propertyKey\' }">\r\n    </div>\r\n</script>\r\n\r\n<script type="text/html" id="staticPropertyItem">\r\n    <div class="propertyEditor-staticTextAreaItem propertyEditor-headingCellWrapper"\r\n         data-bind="css: { isLink: templateType() === \'linkProperty\', isButton: templateType() === \'buttonProperty\' }, style: { height: property.name === \'Status details\' ? \'100%\': \'22px\' }, visible: property.value() === false || property.value()">\r\n        <!-- ko if: templateType() !== \'linkProperty\' && templateType() !== \'checkboxProperty\' && templateType() !== \'buttonProperty\' -->\r\n        <div class="propertyEditor-staticHeadingCell">\r\n            <div class="datalab-gridCellKeyWrapper"\r\n                 data-bind="template: { name: \'propertyKey\' }">\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n        <div class="propertyEditor-staticValueCell">\r\n            <div class="datalab-gridCellTextArea" data-bind="template: { name: templateType }"></div>\r\n        </div>\r\n    </div>\r\n</script>'}),define("generated/editor/KoComponents/ExperimentParameter/ExperimentParameter",["require","exports","../../../DataLabClient/Util","text!./ExperimentParameter.html","text!./PropertyTemplates.html"],function(e,t,n){function r(){var t=e("text!./PropertyTemplates.html");n.initializeTemplateIfNecessary("staticPropertyItem",t)}t.template=e("text!./ExperimentParameter.html"),t.viewModel={createViewModel:function(e){return{viewModel:e.viewModel}}},t.synchronous=!0,t.onRegister=r}),define("generated/editor/KoComponents/KoComponentRegistrationInfo",["require","exports","./ExperimentParameter/ExperimentParameter"],function(e,t,n){var r;(function(e){e.ExperimentParameter={name:"experiment-parameter",config:n}})(r=t.KoComponentRegistrationInfo||(t.KoComponentRegistrationInfo={}))});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/PropertyEditorControl/PropertyEditorMenuBuilder",["require","exports","../../../TS/Common/CallbackCommand","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/Parameter","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f=function(e){function t(t){var r=this;e.call(this),this.currentTarget=ko.observable(null),this.experimentEditorViewModel=t,this.unlinkCommand=new n.CallbackCommand(function(e){e.property.ensureUnlinked(),r.featureUsage(46)}),this.unlinkCommand.canExecute=ko.computed(function(){if(r.currentTarget()&&!r.experimentEditorViewModel.experimentViewModel().readOnlyMode()){var e=r.currentTarget(),t=e.property;return t.isLinked()}return!1}),this.newLinkCommand=new n.CallbackCommand(function(e){if(!(e.property instanceof u.ModuleNodeParameter))throw new Error("Can't link parameter "+e.property.name);var t=r.experimentEditorViewModel.experimentViewModel().experiment;t.promoteModuleParameter(e.property),r.featureUsage(44)}),this.newLinkCommand.canExecute=ko.computed(function(){return!r.experimentEditorViewModel.experimentViewModel().readOnlyMode()})}return __extends(t,e),t.prototype.build=function(e){var t=this;this.currentTarget(e);var r={width:120,name:"propertyMenu",items:[]};r.items.push({label:s.setAsWebServiceParameter,command:this.newLinkCommand}),r.items.push({label:null,divider:!0,command:null});var i=e.property;return a.forEach(this.experimentEditorViewModel.experiment.parameters(),function(e){if(i.parameterType!=e.parameterType)return;var o=new n.CallbackCommand(function(n){i.ensureUnlinked(),i.linkToWebServiceParameter(e),t.featureUsage(45)});o.canExecute=ko.computed(function(){return!t.experimentEditorViewModel.experimentViewModel().readOnlyMode()});var u={label:a.format(s.setToWebServiceParameter,e.name),command:o};i.linkedWebServiceParameter()===e&&(u.iconClass="check"),r.items.push(u)}),r.items.length>2&&r.items.push({label:null,divider:!0,command:null}),r.items.push({label:s.unsetWebServiceParameter,command:this.unlinkCommand}),r},t.prototype.featureUsage=function(e){o.featureUsage({featureID:e,groupID:43,experimentID:this.experimentEditorViewModel.experiment.experimentIdForLogging})},t}(i.Disposable);t.PropertyEditorMenuBuilder=f});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/PropertyEditorControl/WebServiceParameterMenuBuilder",["require","exports","../../../TS/Common/CallbackCommand","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o,u){var a=function(e){function t(t){var r=this;e.call(this),this.currentTarget=ko.observable(null),this.experimentEditorViewModel=t,this.deleteCommand=new n.CallbackCommand(function(e){r.featureUsage(50),r.experimentEditorViewModel.experiment.removeWebServiceParameter(e.property)}),this.deleteCommand.canExecute=ko.computed(function(){return!r.experimentEditorViewModel.experimentViewModel().readOnlyMode()}),this.provideDefaultValueCommand=new n.CallbackCommand(function(e){var t=e.property;t.hasDefaultValue()?r.featureUsage(49):r.featureUsage(48),t.hasDefaultValue(!t.hasDefaultValue()),t.value(null)}),this.provideDefaultValueCommand.canExecute=ko.computed(function(){return!r.experimentEditorViewModel.experimentViewModel().readOnlyMode()})}return __extends(t,e),t.prototype.build=function(e){this.currentTarget(e);var t=e.property,n={width:120,name:"propertyMenu",items:[]};return e.type!==6&&(n.items.push({label:t.hasDefaultValue()?o.removeWebServiceParameterDefaultValue:o.provideWebServiceParameterDefaultValue,command:this.provideDefaultValueCommand,iconClass:t.hasDefaultValue()?"check":""}),n.items.push({label:null,divider:!0,command:null})),n.items.push({label:o.deleteWebServiceParameter,command:this.deleteCommand}),n},t.prototype.featureUsage=function(e){u.featureUsage({featureID:e,groupID:43,experimentID:this.experimentEditorViewModel.experiment.experimentIdForLogging})},t}(s.Disposable);t.WebServiceParameterMenuBuilder=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DataConnect/ConnectionTypeViewModel",["require","exports","../../../TS/ViewModel/DataConnect/ParameterMap","../../../../DataLabClient/Disposable","../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(e){function t(t){var n=this;e.call(this),this.dataSourceViewModel=t,this.connectionTypes=[];var r=t.property.descriptor;i.forEach(r.choices(),function(e){n.connectionTypes.push(new o(e,t.property.value()===e.value))}),this.onClick=function(e){n.dataSourceViewModel.property.value(e.choice.value),e.isSelected(!0),i.forEach(n.connectionTypes,function(t){t!=e&&t.isSelected(!1)})}}return __extends(t,e),t}(r.Disposable);t.ConnectionTypeViewModel=s;var o=function(){function e(e,t){t===void 0&&(t=!1),this.choice=e,this.imagePath="",this.isSelected=ko.observable(t),this.imagePath="/Content/wizard/images/dataIngestion/";switch(e.value){case n.DataSourceNames.AzureBlobStorage:this.imagePath+="AzureBlob.png";break;case n.DataSourceNames.AzureTable:this.imagePath+="AzureTable.png";break;case n.DataSourceNames.DataFeedProvider:this.imagePath+="DataFeed.png";break;case n.DataSourceNames.HiveQuery:this.imagePath+="Hive.png";break;case n.DataSourceNames.Http:this.imagePath+="WebURL.png";break;case n.DataSourceNames.OnPremiseSqlDatabase:this.imagePath+="SQL.png";break;case n.DataSourceNames.SqlAzure:this.imagePath+="AzureSQL.png";break;case n.DataSourceNames.DocumentDB:this.imagePath+="DocumentDB.png";break;default:throw new Error("Unsupported connection type: "+e.value)}}return e}();t.ConnectionTypeChoice=o}),define("generated/DataLabClient/Contracts/V1/Serializer",["require","exports","../../Util","../../Model/ModuleNode","../../Model/DatasetNode","../../Model/TrainedModelNode","../../Model/TransformNode","../../Model/WebServicePortNode","../../Model/AnnotationNode","../../Model/Parameter","../../Model/ModuleParameterDescriptor","./Constants","../../Features"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function p(e){var t="<?xml version='1.0' encoding='utf-16'?><DataV1 xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'><Meta /><NodePositions>";return n.forEach(e,function(e){var n="";if(e instanceof r.ModuleNode)n=e.id;else if(e instanceof i)n=e.dataset.id;else if(e instanceof s)n=e.trainedModel.id;else if(e instanceof o)n=e.transform.id;else{if(!(e instanceof u.WebServicePortNode)){if(e instanceof a)return;throw new Error("Unknown GraphNode subtype")}n=e.id}t+="<NodePosition Node='"+n+"' Position='"+e.x()+","+e.y()+",200,200'/>"}),t+="</NodePositions>",t+="<NodeGroups />",t+="</DataV1>",t}function d(e,t){t===undefined&&(t=1);var a=n.filter(n.values(e.nodes()),function(e){return!(e instanceof u.WebServicePortNode)}),f=[],l=[];n.forEach(a,function(e){if(!(e instanceof r.ModuleNode))return;var t=e,u={Id:t.id,ModuleId:t.module_.id,ModuleParameters:[],InputPortsInternal:[],OutputPortsInternal:[],UsePreviousResults:!1,IsPartOfPartialRun:!1};n.forEach(t.outputPorts,function(e){n.forEach(e.connectedNonWebServicePorts(),function(t){var n={DestinationInputPortId:t.parent.id+":"+t.name,SourceOutputPortId:e.parent.id+":"+e.name};l.push(n)})}),u.InputPortsInternal=n.map(t.inputPorts,function(e){var t=null,n=null,r=null;if(e.isConnected()){var u=e.connectedOutputPort.parent;u instanceof i&&(t=u.dataset.id),u instanceof s&&(n=u.trainedModel.id),u instanceof o&&(r=u.transform.id)}return{DataSourceId:t,TrainedModelId:n,TransformModuleId:r,Name:e.name,NodeId:e.parent.id}}),u.OutputPortsInternal=n.map(t.outputPorts,function(e){var t=null;if(e.connectedWebServicePorts().length>0)for(var n in e.descriptor.allowedDataTypes){if(e.descriptor.allowedDataTypes[n].dataTypeId==="ILearnerDotNet"){t="TrainedModel";break}if(e.descriptor.allowedDataTypes[n].dataTypeId==="ITransformDotNet"){t="Transform";break}}return{Name:e.name,NodeId:e.parent.id,OutputType:t}}),b(t.parameters,u.ModuleParameters),u.Comment=t.comment()?t.comment():"",u.CommentCollapsed=t.commentCollapsed(),u.UsePreviousResults=t.usePreviousResults(),u.IsPartOfPartialRun=t.isPartOfPartialRun,f.push(u)});var c={EdgesInternal:l,ModuleNodes:f,SerializedClientData:p(a)};return c}function v(e,t){t===undefined&&(t=1);var r=n.map(e.getPublishInputPorts(),w),i=n.map(e.getPublishOutputPorts(),w),s={};r=r.filter(function(e){return s[e.Id]?!1:s[e.Id]=!0}),s={},i=i.filter(function(e){return s[e.Id]?!1:s[e.Id]=!0});var o=n.filter(n.values(e.nodes()),function(e){return e instanceof u.WebServicePortNode});return{IsWebServiceExperiment:e.wasSetAsWebServiceExperiment(),Inputs:r,Outputs:i,Parameters:y(e.parameters()),WebServiceGroupId:e.publishedWebServiceGroupId,ModelPackageId:e.publishedModelPackageId,SerializedClientData:p(o)}}function m(e,t){var i=[],s=function(e){n.forEach(e,function(e){if(e instanceof f.CredentialParameter){var t=e;if(t.isDirty){var r=[];n.forEach(t.credentialKeyParts,function(e){r.push({Name:e.name,Value:e.value()})});var o={SecretName:t.name,SecretValue:t.value(),KeyParts:{Type:t.credentialType,Parts:r}};i.push(o)}}e.descriptor instanceof l.ModeModuleParameterDescriptor&&n.forEach(e.childParameters,function(e){s(e)})})};return e.nodes.forEach(function(e){if(e instanceof r.ModuleNode){var t=e;s(t.parameters)}}),i}function g(e){var t=[],n=[];e.InputPortsForPublish.forEach(function(e){t.push(e.parent.id+":"+e.name)}),e.OutputPortsForPublish.forEach(function(e){n.push(e.parent.id+":"+e.name)});var r={InputPortsForPublish:t,OutputPortsForPublish:n};return r}function y(e){return n.map(e,function(e){var t,n;return e.descriptor instanceof l.ScriptModuleParameterDescriptor?(t=c.ModuleParameterType.Script,n=e.descriptor.scriptName):e.descriptor instanceof l.BooleanModuleParameterDescriptor?t=c.ModuleParameterType.Boolean:e.descriptor instanceof l.ChoiceModuleParameterDescriptor?t=c.ModuleParameterType.Enumerated:e.descriptor instanceof l.CredentialModuleParameterDescriptor?t=c.ModuleParameterType.Credential:e.descriptor instanceof l.DataGatewayNameModuleParameterDescriptor?t=c.ModuleParameterType.DataGatewayName:t=e.descriptor.type,{Name:e.name,Value:e.value(),ParameterDefinition:{Name:e.name,FriendlyName:e.name,DefaultValue:t==c.ModuleParameterType.Credential?"":e.value(),ParameterType:t,HasDefaultValue:!0,IsOptional:e.descriptor.isOptional,ParameterRules:e.descriptor.rules,HasRules:e.descriptor.rules.length>0,MarkupType:0,CredentialDescriptor:null,ScriptName:n}}})}function b(e,t){n.forEach(e,function(e){if(e.isRelevant()){var r;e.valueType===c.ModuleParameterValueType.Placeholder||h.enablePasswordPlaceholdersEnabled()?r=e.valueType:r=c.ModuleParameterValueType.Literal,t.push({Name:e.name,Value:e.value(),ValueType:r,LinkedGlobalParameter:e.isLinked()?e.linkedWebServiceParameter().name:null}),e.descriptor instanceof l.ModeModuleParameterDescriptor&&n.forEach(e.childParameters,function(n,r){e.value()===r&&b(n,t)})}})}function w(e){var t,n,r;n=[e.parent.id,e.name].join(":");var i=e.connectedWebServicePorts();return i&&i.length>0&&(t=i[0].parent.id,r=i[0].parent.nameParameter.value()),{Id:t,PortId:n,Name:r}}t.serializeClientData=p,t.serialize=d,t.serializeWebServiceInfo=v,t.extractCredentials=m,t.serializeModuleParameters=b});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DataConnect/ConfigureConnectionViewModel",["require","exports","./ParameterMap","../../../../DataLabClient/Constants","../../../../DataLabClient/Model/Parameter","../../../../DataLabClient/Contracts/V1/Serializer","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Util","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e){function t(t,n,r){e.call(this),this.shouldShowExceptionDetails=ko.observable(!1),this.exceptionDetails=ko.observable(""),this.nodeParameters=ko.observableArray(),this.workspace=t,this.moduleNode=n,this.dataSourceViewModel=r,this.showTestConnection=ko.observable(!0),this.testConnectionSuccessful=ko.observable(!0),this.testConnectionMessage=ko.observable(""),this.canTestConnection=ko.observable(!1),this.nodeParameters(this.dataSourceViewModel.childParameters()),this.updateTestConnectionVisibility()}return __extends(t,e),t.prototype.updateTestConnectionVisibility=function(){if(this.dataSourceViewModel.property instanceof i.ModuleNodeParameter){var e=this.dataSourceViewModel.property.value();e===n.DataSourceNames.AzureBlobStorage||e===n.DataSourceNames.AzureTable||e===n.DataSourceNames.SqlAzure?this.showTestConnection(!0):this.showTestConnection(!1)}},t.prototype.testConnection=function(){var e=this;l.featureUsage({featureID:238,groupID:234,data:JSON.stringify({ModuleId:this.moduleNode.id,DataSource:this.dataSourceViewModel.property.value()})});var t=[];s.serializeModuleParameters(this.moduleNode.parameters,t),this.shouldShowExceptionDetails(!1),this.exceptionDetails(""),t.length>0&&(this.canTestConnection(!0),this.testConnectionMessage(""),this.workspace.getConnectionIsValid(this.moduleNode.module_.id,t).done(function(t){var n=e.getResponseMessage(t);e.testConnectionMessage(n.message),e.testConnectionSuccessful(t.Result===o.TestConnectionResult.Success);var r=n.tooltip||t.Result!==o.TestConnectionResult.Success&&t.Message;r&&(e.shouldShowExceptionDetails(!0),e.exceptionDetails(r)),l.featureUsage({featureID:239,groupID:234,data:JSON.stringify({Result:t.Result,ModuleId:e.moduleNode.id,DataSource:e.dataSourceViewModel.property.value()})})}).fail(function(t){e.testConnectionMessage(f.testConnectionError),e.testConnectionSuccessful(!1),l.error("unexpected error encountered in connection validation request",null,t)}).always(function(){e.canTestConnection(!1)}))},t.prototype.getFormattedResourceString=function(e,t,n){return e.ErrorInfo!==undefined?u.format(t,e.ErrorInfo[n]):(l.warn("Expected service to return value in OptionalErrorInfo","getFormattedResourceString"),u.format(t,"unknown"))},t.prototype.getResponseMessage=function(e){var t="",n="";return e.Result===o.TestConnectionResult.InvalidAzureContainer||e.Result===o.TestConnectionResult.InvalidBlobName||e.Result===o.TestConnectionResult.MissingBlobPath?(t=f.testConnectionInvalidPath,n=f.testConnectionInvalidPathTooltip):e.Result===o.TestConnectionResult.MissingAccountName?(t=f.testConnectionInvalidAccount,n=f.testConnectionInvalidAccountTooltip):e.Result===o.TestConnectionResult.InvalidAzureAccountKey?(t=f.testConnectionInvalidKey,n=this.getFormattedResourceString(e,f.testConnectionInvalidKeyTooltip,"AccountName")):e.Result===o.TestConnectionResult.InvalidAzureTable?(t=f.testConnectionInvalidTableName,n=this.getFormattedResourceString(e,f.testConnectionInvalidTableNameTooltip,"TableName")):e.Result===o.TestConnectionResult.SqlLoginFailed?(t=f.testConnectionIncorrectUserOrPassword,n=this.getFormattedResourceString(e,f.testConnectionIncorrectUserOrPasswordTooltip,"UserAccountName")):e.Result===o.TestConnectionResult.ServerConnectionFailed?(t=f.testConnectionIncorrectServer,n=this.getFormattedResourceString(e,f.testConnectionIncorrectServerTooltip,"DatabaseServerName")):e.Result===o.TestConnectionResult.DatabaseNotOpened?(t=f.testConnectionIncorrectDatabase,n=this.getFormattedResourceString(e,f.testConnectionIncorrectDatabaseTooltip,"DatabaseName")):e.Result===o.TestConnectionResult.Success?t=f.testConnectionSucceeded:e.Result===o.TestConnectionResult.InvalidSasUri?t=f.testConnectionInvalidSasUri:e.Result===o.TestConnectionResult.InvalidAzureAccountOrKey?t=this.getFormattedResourceString(e,f.testConnectionInvalidAzureAccountOrKey,"AccountName"):e.Result===o.TestConnectionResult.UnsupportedBlobType?t=f.testConnectionUnsupportedBlobType:t=f.testConnectionError,{message:t,tooltip:n}},t}(a.Disposable);t.ConfigureConnectionViewModel=c});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DataConnect/ConfigurePostConnectionViewModel",["require","exports","../../../TS/ViewModel/DataConnect/ParameterMap","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){var o=function(e){function t(t){var r=this;e.call(this),this.configCompleteMessage=ko.observable(""),this.nodeParameters=ko.observableArray(),this.dataSourceViewModel=t,this.nodeParameters(this.dataSourceViewModel.childParameters()),this.showConfigComplete=ko.computed(function(){return[n.DataSourceNames.DataFeedProvider,n.DataSourceNames.Http].indexOf(r.dataSourceViewModel.property.value())>=0?(r.configCompleteMessage(s.format(i.dataIngestionConfigurationCompleteBody,r.getConnectionDisplayName())),!0):!1})}return __extends(t,e),t.prototype.getConnectionDisplayName=function(){var e="",t=this.dataSourceViewModel.property,n=t.descriptor;return ko.utils.arrayForEach(n.choices(),function(n){if(n.value===t.value()){e=n.displayValue;return}}),e},t}(r.Disposable);t.ConfigurePostConnectionViewModel=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DataConnect/DataConnectWizardViewModel",["require","exports","./ParameterMap","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/Parameter","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=function(e){function t(t,n){var r=this;e.call(this),this.moduleId=n,this.onWizardCompleted=ko.observable(!1),this.draftStateMachine=t,this.currentStep=ko.observable(0),this.arePreviousStepsDisabled=ko.computed(function(){return!1}),this.isCompleteButtonEnabled=ko.computed(function(){return r.currentStep()===2}),this.areNextStepsDisabled=ko.computed(function(){return!1}),s.featureUsage({featureID:235,groupID:234,data:JSON.stringify({ModuleId:this.moduleId})})}return __extends(t,e),t.prototype.getConnectionDisplayName=function(e){e===void 0&&(e=!1);var t=this.connectionTypeViewModel.dataSourceViewModel,r="";if(t.property instanceof o.ModuleNodeParameter){var i=t.property,s=i.descriptor;ko.utils.arrayForEach(s.choices(),function(t){if(t.value===i.value()){e&&t.value in n.DataSourceCustomDisplayNames?r=n.DataSourceCustomDisplayNames[t.value]:r=t.displayValue;return}})}return r},t.prototype.initViewModels=function(e,t,n){this.connectionTypeViewModel=e,this.configureConnectionViewModel=t,this.configurePostConnectionViewModel=n},t.prototype.onWizardClosing=function(e){return e.completed?(this.onWizardCompleted(!0),s.featureUsage({featureID:237,groupID:234,data:JSON.stringify({ModuleId:this.moduleId,DataSource:this.connectionTypeViewModel.dataSourceViewModel.property.value()})})):(this.resetValuesBackToOriginal(),s.featureUsage({featureID:236,groupID:234,data:JSON.stringify({ModuleId:this.moduleId,DataSource:this.connectionTypeViewModel.dataSourceViewModel.property.value()})})),!0},t.prototype.resetValuesBackToOriginal=function(){var e=this.connectionTypeViewModel.dataSourceViewModel;e.property instanceof o.ModuleNodeParameter&&(e.property.valueType=e.originalValueType),e.property.value(e.originalPropertyValue);var t=function(e){u.forEach(e,function(e){[n.ParameterNames.BlobSubscription,n.ParameterNames.SqlSubscription,n.ParameterNames.TableSubscription].indexOf(e.property.name)<0&&(e.originalPropertyValue!==e.property.value()&&e.property.value(e.originalPropertyValue),(e.property instanceof o.ModuleNodeParameter||e.property instanceof o.CredentialParameter)&&e.property.valueType!==e.originalValueType&&(e.property.valueType=e.originalValueType)),e.childParameters()&&e.childParameters().length>0&&t(e.childParameters())})};t(e.childParameters()),this.draftStateMachine.timedSave()},t.prototype.stepActivate=function(e){if(!e||!e.currentStep)return;e.currentStep.id===e.wizard.steps()[0].id&&(s.featureUsage({featureID:241,groupID:234,data:JSON.stringify({ModuleId:this.moduleId,PageNumber0Indexed:0,PageChangeDirection:e.direction,DataSource:this.connectionTypeViewModel.dataSourceViewModel.property.value()})}),this.currentStep(0)),e.currentStep.id===e.wizard.steps()[1].id&&(s.featureUsage({featureID:241,groupID:234,data:JSON.stringify({ModuleId:this.moduleId,PageNumber0Indexed:1,DataSource:this.connectionTypeViewModel.dataSourceViewModel.property.value(),PageChangeDirection:e.direction})}),this.updateParameters(2),this.currentStep(1),this.configureConnectionViewModel.updateTestConnectionVisibility()),e.currentStep.id===e.wizard.steps()[2].id&&(s.featureUsage({featureID:241,groupID:234,data:JSON.stringify({ModuleId:this.moduleId,PageNumber0Indexed:2,DataSource:this.connectionTypeViewModel.dataSourceViewModel.property.value(),PageChangeDirection:e.direction})}),this.updateParameters(3),this.currentStep(2))},t.prototype.updateParameters=function(e){this.setVisibilityOfChildrenParameters(this.connectionTypeViewModel.dataSourceViewModel,e)},t.prototype.setVisibilityOfChildrenParameters=function(e,t){var r=this;u.forEach(e.childParameters(),function(e){if(e.property instanceof o.ModuleNodeParameter){var i=e.property,a=n.ReaderParameterMap.parameters[i.descriptor.name];e.childParameters().length>0&&r.setVisibilityOfChildrenParameters(e,t),a!=null?i.shouldBlockRenderingInWizard(a.pageIndex!==t):s.warn(u.format("Encountered unknown parameter name {0}",i.descriptor.name),"getFormattedResourceString")}})},t.traceEventType="DataConnect",t}(i.Disposable);t.DataConnectWizardViewModel=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/DataConnectDialog/DataConnectDialog",["require","exports","../../../TS/ViewModel/DataConnect/ConnectionTypeViewModel","../../../TS/ViewModel/DataConnect/ConfigureConnectionViewModel","../../../TS/ViewModel/DataConnect/ConfigurePostConnectionViewModel","../../../TS/ViewModel/DataConnect/DataConnectWizardViewModel","../../../TS/Global","../../../TS/ViewModel/PropertyEditorControl/PropertyEditorMenuBuilder","../../../TS/ViewModel/DataConnect/ParameterMap","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../TS/ViewModel/PropertyEditorControl/WebServiceParameterMenuBuilder","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Model/ModuleParameterDescriptor","../../../../DataLabClient/Model/Parameter","../../../TS/View/WizardView","../../../TS/View/MarkdownEditor/MarkdownEditor","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E=[500,500],S=function(e){function t(t,o,c){var d=this;e.call(this),this.experimentEditorViewModel=c,this.properties=[],o.armCache.mutableResourceCache.refreshCacheIfNecissary(),this.moduleId=t.id,this.viewModel=new s.DataConnectWizardViewModel(this.experimentEditorViewModel.draftStateMachine,t.id),this.registerForDisposal(this.menuBuilder=new u.PropertyEditorMenuBuilder(c),this.webServiceParameterMenuBuilder=new l.WebServiceParameterMenuBuilder(c));var v={workspace:o,dataIngestionWizard:!0,menuBuilder:this.menuBuilder,webServiceParameterMenuBuilder:this.webServiceParameterMenuBuilder,focusLinkedWebServiceParameter:function(e,t){d.focusLinkedWebServiceParameter&&d.focusLinkedWebServiceParameter(e,t)}},m=a.ReaderParameterMap.parameters,g={};b.forEach(t.parameters,function(e){if(e instanceof p.ModuleNodeParameter){var n=f.ParameterViewModel.createParameterViewModel(e,v);if(n.property.name===a.ParameterNames.SpecifyDataSource){var r=new h.ModuleParameterDescriptor(a.ParameterNames.SqlSubscription,"Subscription ID",""),i=new p.ModuleNodeParameter(r,t,undefined,e,"SqlAzure"),s=f.ParameterViewModel.createParameterViewModel(i,v);n.childParameters([s].concat(n.childParameters()))}b.forEach(n.childParameters(),function(e){if(e.property.name===a.ParameterNames.SpecifyBlobAuthentication){var n=new h.ModuleParameterDescriptor(a.ParameterNames.BlobSubscription,"Subscription ID",""),r=new p.ModuleNodeParameter(n,t,null,e.property,"Account"),i=f.ParameterViewModel.createParameterViewModel(r,v);e.childParameters([i].concat(e.childParameters()));return}if(e.property.name===a.ParameterNames.SpecifyTableAuthentication){var s=new h.ModuleParameterDescriptor(a.ParameterNames.TableSubscription,"Subscription ID",""),o=new p.ModuleNodeParameter(s,t,null,e.property,"Account"),u=f.ParameterViewModel.createParameterViewModel(o,v);e.childParameters([u].concat(e.childParameters()));return}}),d.addParameterAndChildrenToMap(g,n),d.properties.push(n)}}),b.forEach(Object.keys(g),function(e){if(e in m){var t=m[e].armCacheDependency;t&&t in m&&g[e].linkedParameter(g[t])}});if(!(this.properties.length>0))throw new Error("No top level parameter exists.");this.viewModel.initViewModels(new n.ConnectionTypeViewModel(this.properties[0]),new r.ConfigureConnectionViewModel(o,t,this.properties[0]),new i.ConfigurePostConnectionViewModel(this.properties[0]))}return __extends(t,e),t.prototype.dispose=function(){b.forEach(this.properties,function(e){e.dispose()}),this.properties=[],e.prototype.dispose.call(this)},t.prototype.addParameterAndChildrenToMap=function(e,t){var n=this;e[t.property.name]=t,b.forEach(t.childParameters(),function(t){n.addParameterAndChildrenToMap(e,t)}),this.setupEventHandlers()},t.prototype.showDialog=function(){var e=this,t=new $.fxs.fxsWizard.WizardStep;t.contentTemplateOptions({name:b.initializeTemplateIfNecessary("DataConnectionTypeTemplate",ExperimentEditorTemplates._dataConnectionTypeMarkup,[v.markdownEditorRegisterInfo]),data:this.viewModel.connectionTypeViewModel}),t.title(y.dataConnectSelectSource);var n=new $.fxs.fxsWizard.WizardStep;n.contentTemplateOptions({name:b.initializeTemplateIfNecessary("ConfigurationConnection",ExperimentEditorTemplates._configureConnectionMarkup,[v.markdownEditorRegisterInfo]),data:this.viewModel.configureConnectionViewModel}),n.title(b.format(y.dataConnectConfigureConnection,this.viewModel.getConnectionDisplayName()));var r=new $.fxs.fxsWizard.WizardStep;r.contentTemplateOptions({name:b.initializeTemplateIfNecessary("ConfigurePostConnection",ExperimentEditorTemplates._configurePostConnectionMarkup,[v.markdownEditorRegisterInfo]),data:this.viewModel.configurePostConnectionViewModel}),[a.DataSourceNames.DataFeedProvider,a.DataSourceNames.Http].indexOf(this.viewModel.connectionTypeViewModel.dataSourceViewModel.property.value())>=0?r.title(y.dataIngestionConfigurationCompleteTitle):r.title(b.format(y.dataConnectConfigureDetails,this.viewModel.getConnectionDisplayName(!0))),this.registerForDisposal(new g.DisposableSubscription(this.viewModel.connectionTypeViewModel.dataSourceViewModel.property.value.subscribe(function(t){n.title(b.format(y.dataConnectConfigureConnection,e.viewModel.getConnectionDisplayName())),[a.DataSourceNames.DataFeedProvider,a.DataSourceNames.Http].indexOf(e.viewModel.connectionTypeViewModel.dataSourceViewModel.property.value())>=0?r.title(y.dataIngestionConfigurationCompleteTitle):r.title(b.format(y.dataConnectConfigureDetails,e.viewModel.getConnectionDisplayName(!0)))})));var i=!1;b.forEach(this.properties,function(e){b.forEach(e.childParameters(),function(e){e.property.isRelevant()&&e.property.parameterType!==c.ModuleParameterType.Enumerated&&e.property.value()&&(i=!0)})}),i&&w.featureUsage({featureID:242,groupID:234,data:JSON.stringify({ModuleId:this.moduleId,DataSource:this.viewModel.connectionTypeViewModel.dataSourceViewModel.property.value()})});var s=[t,n,r],o={size:E,autoLock:!1,title:"Import Data",stepActivate:function(t){e.viewModel.stepActivate(t)},startStepIndex:i?1:0},u=new d.WizardView(this.viewModel,s,o);u.onWizardClosingEvent.subscribe(function(t){e.viewModel.onWizardCompleted(),e.dispose()}),this.viewModel.updateParameters(o.startStepIndex+1),u.show()},t.prototype.setupEventHandlers=function(){var e=this;this.removeParameterClicked=function(t,n){n.preventDefault(),n.stopPropagation(),n.button===0&&e.experimentEditorViewModel.experiment.removeWebServiceParameter(t.property)},this.focusLinkedWebServiceParameter=function(e,t){t.preventDefault(),t.stopPropagation()}},t}(g.Disposable);t.DataConnectDialog=S});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/PropertyEditorControl/ExperimentPropertyTabViewModel",["require","exports","./CompetitionPropertiesViewModel","../../../KoComponents/KoComponentRegistrationInfo","../../../TS/ViewModel/ExperimentEditor/Dataset","../../../DataLabViews/ExperimentView","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/Help","../../../TS/ViewModel/ExperimentEditor/Module","./PropertyEditorMenuBuilder","./PropertyViewModel","../../../TS/ViewModel/ExperimentEditor/TrainedModel","../../../TS/ViewModel/ExperimentEditor/Transform","../../../TS/Common/WebServiceGroupUtilities","./WebServiceParameterMenuBuilder","../../../TS/ViewModel/ExperimentEditor/WebServicePort","../../../TS/View/DataConnectDialog/DataConnectDialog","../../../../DataLabClient/Model/DatasetNode","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/Model/Parameter","../../../../DataLabClient/Model/TrainedModelNode","../../../../DataLabClient/Model/TransformNode","../../../../DataLabClient/Util","../../../../DataLabClient/Model/WebServicePortNode"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){var k=function(e){function t(t,n,r){var o=this;e.call(this),this.dataset=i,this.module=a,this.trainedModel=c,this.transform=h,this.webServicePort=v,this.importDataModuleId="506153734175476c4f62416c57734963.4e1b0fe6aded4b3fa36f39b8862b9004",this.id="ExperimentEditor.ExperimentPropertyTab",this.title=w.drawerTitle,this.selected=ko.observable(!1),this.graphNode=ko.observable(),this.nodeParameters=ko.observableArray(),this.readOnlyMode=ko.observable(!1),this.registerForDisposal(this.menuBuilder=new f.PropertyEditorMenuBuilder(t),this.webServiceParameterMenuBuilder=new d.WebServiceParameterMenuBuilder(t));var k={workspace:r,readOnlyMode:this.readOnlyMode,menuBuilder:this.menuBuilder,webServiceParameterMenuBuilder:this.webServiceParameterMenuBuilder,focusLinkedWebServiceParameter:function(e,t){o.focusLinkedWebServiceParameter&&o.focusLinkedWebServiceParameter(e,t)}};this.graphNode.subscribe(function(){o.disposeAllNodeParameters();if(o.graphNode()){var e=o.graphNode(),t=e.graphNode,r=[];if(t instanceof E.ModuleNode)N.forEach(t.parameters,function(e){if(!(e instanceof S.ModuleNodeParameter))throw new Error("Unexpected parameter type on module "+t.id);r.push(l.ParameterViewModel.createParameterViewModel(e,k))}),e.outputLog.endpointDownloader=n,N.forEach(e.outputEndpoints,function(e,t){e.endpointDownloader=n});else if(t instanceof C.WebServicePortNode)r.push(new l.WebServicePortParameter(t.nameParameter));else if(t instanceof g)e.viewDataset.endpointDownloader=n;else if(!(t instanceof x)&&!(t instanceof T))throw new Error("Unexpected node type. Node Id: "+t.id);o.nodeParameters(r)}}),this.getModuleHelp=function(){u.QuickHelpMoreInfo()},this.showImportDataWizard=ko.pureComputed(function(){var e=o.graphNode().graphNode;return e instanceof E.ModuleNode?b.experimentParameterComponentEnabled()&&b.dataConnectWizardEnabled()&&e.module_.familyId===o.importDataModuleId:!1}),this.launchImportDataWizard=function(){if(o.showImportDataWizard()){var e=o.graphNode().graphNode;if(e instanceof E.ModuleNode){var n=new m.DataConnectDialog(e,r,t);n.showDialog()}}},this.globalParamsCollapsed=ko.observable(!1),this.entityParamsCollapsed=ko.observable(!1),this.experimentPropertiesCollapsed=ko.observable(!1),this.experimentSummaryCollapsed=ko.observable(!1),this.experimentDetailsCollapsed=ko.observable(!1),this.competitionPropertiesCollapsed=ko.observable(!1),this.experimentEditorViewModel=t,this.lastVisitedParameter=null,this.experiment=ko.observable(null),this.navigateToParent=new ko.subscribable,this.navigateToWebService=new ko.subscribable,this.experimentEditorViewModel.experimentViewModel.subscribe(function(){var e=o.experimentEditorViewModel.experimentViewModel();$.each(e.experimentProperties(),function(t,n){if(n instanceof l.LinkPropertyViewModel){var i=n,u;i.property===e.experiment.publishedWebServiceLinkProperty?(u=p.calculateNavigationPathToWebService(r,i.property.value()),i.property.value(u),i.onClick=function(e,t){t.preventDefault(),o.navigateToWebServiceHandler()}):i.property===e.experiment.priorRunLinkProperty&&(u=s.calculateNavigationPathToExperiment(i.property.value()),i.property.value(u),i.onClick=function(e,t){t.preventDefault(),o.navigateToParentHandler()})}})}),this.lastX=0,this.hasParentExperiment=ko.computed(function(){var e=o.experiment()?o.experiment().parentExperimentId:null;return e!==null}),this.competitionPropertiesViewModel=null,this.showCompetitionProperties=ko.computed(function(){return b.competitionExperimentSupportEnabled()&&o.experimentEditorViewModel.experimentViewModel().experimentLoaded&&!o.graphNode()&&o.experimentEditorViewModel.experimentViewModel().isCompetitionExperiment()&&o.competitionPropertiesViewModel&&o.competitionPropertiesViewModel.showProperties()});if(b.experimentParameterComponentEnabled()){var L=function(e){o.webServiceParameters=e.experiment.parameters.transform(function(e){return l.ParameterViewModel.createParameterViewModel(e,k)})};L(this.experimentEditorViewModel.experimentViewModel());var A=this.experimentEditorViewModel.experimentViewModel.subscribe(L);this.registerForDisposal(new y.DisposableSubscription(A))}else this.openColumnPicker=function(e){e instanceof l.ColumnPickerParameterViewModel&&e.openColumnPicker()},this.openScriptEditor=function(e){e instanceof l.ScriptEditorParameterViewModel&&e.openScriptEditor()};this.setupEventHandlers()}return __extends(t,e),t.prototype.setContainer=function(e){this.tabContainer=e},t.prototype.bindView=function(){var e;b.experimentParameterComponentEnabled()?(N.initializeTemplateIfNecessary("editableTextAreaPropertyTemplate)",ExperimentEditorTemplates._editableTextAreaPropertyMarkup),N.initializeTemplateIfNecessary("usePreviousResultsParameterTemplate",ExperimentEditorTemplates._usePreviousResultsParameterMarkup),e=ExperimentEditorTemplates._experimentPropertyTabMarkup):(N.initializeTemplateIfNecessary("oldExperimentPropertyTabTemplatesTemplate",ExperimentEditorTemplates._oldExperimentPropertyTabsTemplateMarkup),e=ExperimentEditorTemplates._oldExperimentPropertyTabMarkup),ko.components.unregister("experiment-property-tab"),ko.components.register("experiment-property-tab",{viewModel:{instance:this},template:e}),b.experimentParameterComponentEnabled()&&N.registerComponent(r.KoComponentRegistrationInfo.ExperimentParameter)},t.prototype.setProjectExperimentLocator=function(e){var t=this;b.competitionExperimentSupportEnabled()&&e?(this.registerForDisposal(this.competitionPropertiesViewModel=new n.CompetitionPropertiesViewModel(e)),new y.DisposableSubscription(this.experiment.subscribe(function(){t.competitionPropertiesViewModel.experiment(t.experiment())}))):this.competitionPropertiesViewModel=null},t.prototype.disposeAllNodeParameters=function(){this.nodeParameters().forEach(function(e){e.dispose()}),this.nodeParameters.removeAll()},t.prototype.dispose=function(){this.disposeAllNodeParameters(),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"selectedGraphNodeName",{get:function(){if(this.graphNode().graphNode instanceof E.ModuleNode)return this.graphNode().graphNode.module_.name();if(this.graphNode().graphNode instanceof g)return this.graphNode().graphNode.dataset.name();if(this.graphNode().graphNode instanceof x)return this.graphNode().graphNode.trainedModel.name();if(this.graphNode().graphNode instanceof T)return this.graphNode().graphNode.transform.name();if(this.graphNode().graphNode instanceof C.WebServicePortNode)return this.graphNode().graphNode.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CompetitionProperties",{get:function(){return this.competitionPropertiesViewModel},enumerable:!0,configurable:!0}),t.prototype.setNode=function(e){this.graphNode(e)},t.prototype.onCommit=function(e,t){if(t.type==="blur"||t.type==="keyup"&&t.which===13){var n=t.currentTarget;n.value!==e.property.value()&&e.property.value(n.value)}},t.prototype.clearModuleParameters=function(){this.graphNode(null)},t.prototype.navigateToParentHandler=function(){this.navigateToParent.notifySubscribers(null)},t.prototype.navigateToWebServiceHandler=function(){this.navigateToWebService.notifySubscribers(null)},t.prototype.navigateToParameter=function(e){var t=this;if(e instanceof S.ModuleNodeParameter){var n=e.parent,r=this.experimentEditorViewModel.experimentViewModel().getViewModelForNode(n),i=this.experimentEditorViewModel.animationComplete.subscribe(function(){t.experimentEditorViewModel.selectionManager.modifySelection(function(){t.experimentEditorViewModel.selectionManager.resetSelection(),t.experimentEditorViewModel.selectionManager.selectEntity(r)});var n=t.viewModelForProperty(e);n.focus(!0),i.dispose()});if(this.tabContainer.drawerIsCollapsed()){var s=this.tabContainer.openCloseAnimationEnded.subscribe(function(){t.experimentEditorViewModel.needsAnimationToNode.notifySubscribers(r),s.dispose()});this.tabContainer.toggleDrawer()}else this.experimentEditorViewModel.needsAnimationToNode.notifySubscribers(r)}else{if(!(e instanceof S.WebServiceParameter))throw new Error("Unknown parameter type to navigate.");var o=this.viewModelForProperty(e);if(this.tabContainer.drawerIsCollapsed()){var s=this.tabContainer.openCloseAnimationEnded.subscribe(function(){o.focus(!0),s.dispose()});this.tabContainer.toggleDrawer()}else o.focus(!0)}},t.prototype.setupEventHandlers=function(){var e=this;this.removeParameterClicked=function(t,n){n.preventDefault(),n.stopPropagation(),n.button===0&&e.experimentEditorViewModel.experiment.removeWebServiceParameter(t.property)},this.focusLinkedWebServiceParameter=function(t,n){n.preventDefault(),n.stopPropagation();if(n.button===0){var r=t.property.linkedWebServiceParameter(),i=e.viewModelForProperty(r);i.focus(!0)}},b.experimentParameterComponentEnabled()||(this.nextParameterClicked=function(t,n){if(n.button===0){var r=null,i=null,s=t.property.linkedParameters;N.forEach(s,function(t){t.isRelevant()&&(i===e.lastVisitedParameter&&(r=t),i=t)}),r||(r=N.first(s,function(e){return e.isRelevant()},null)),r&&e.navigateToParameter(r)}},this.prevParameterClicked=function(t,n){if(n.button===0){var r=null,i=null,s=t.property.linkedParameters;N.forEach(s,function(t){t.isRelevant()&&(t===e.lastVisitedParameter&&(r=i),i=t)}),r||(r=i),r&&e.navigateToParameter(r)}},this.onParameterFocus=function(t,n){e.lastVisitedParameter=t.property},this.onParameterReturn=function(e,t){return t.stopPropagation(),t.keyCode===13&&e.focus(!1),!0})},t.prototype.viewModelForProperty=function(e){var t=this,n=null;e instanceof S.WebServiceParameter?b.experimentParameterComponentEnabled()?n=this.webServiceParameters.lookup(e.id):n=this.experimentEditorViewModel.experimentViewModel().webServiceParameters.lookup(e.id):this.nodeParameters().forEach(function(r){n||(r.property===e?n=r:r.childParameters().length>0&&(n=t.findModePropertyViewModel(r.childParameters(),e)))});if(!n)throw new Error("Could not find view model for property.");return n},t.prototype.findModePropertyViewModel=function(e,t){var n=this,r=null;return e.forEach(function(e){r||(e.property===t?r=e:e.childParameters().length>0&&(r=n.findModePropertyViewModel(e.childParameters(),t)))}),r},t}(y.Disposable);t.ExperimentPropertyTabViewModel=k}),define("generated/editor/TS/ViewModel/ProjectCollection/RawProjectAssetCatalog",["require","exports","../../../../DataLabClient/FeaturesExtensions","../../../../DataLabClient/PromiseQueue","../../../../DataLabClient/Util","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o){var u=function(){function e(e){this.workspace=e,this._areAssetsFetched=!1}return e.prototype.enlistAllAssetsAsync=function(){var e=this,t=$.Deferred();return this._areAssetsFetched&&t.resolve(),this.doEnlistAllAssetsAsync().done(function(){e._areAssetsFetched=!0,t.resolve()}).fail(function(){t.fail()}),t},e.prototype.doEnlistAllAssetsAsync=function(){var e=this,t=new r;return t.enqueue(function(){return e.enlistWebServiceGroupsAsync()}),n.canEnableIPythonNotebookFeature()&&t.enqueue(function(){return e.enlistNotebooksAsync()}),t.enqueue(function(){return e.enlistModulesAsync()}),t.enqueue(function(){return e.enlistDatasetsAsync()}),t.enqueue(function(){return e.enlistTrainedModelsAsync()}),t.enqueue(function(){return e.enlistTransformsAsync()}),t.enqueue(function(){return e.enlistExperimentsAsync()})},e.prototype.enlistWebServiceGroupsAsync=function(){var e=this,t=$.Deferred();return i.then(this.workspace.listWebServiceGroupsAsync(),function(n){e.webServices=n,t.resolve()}).fail(function(e){var t={title:s.networkErrorNotification,details:e.message};i.showErrorNotification(t),o.error("Failed to load web services","RawProjectAssetCatalog",e)}),t},e.prototype.enlistNotebooksAsync=function(){var e=this,t=$.Deferred();return i.whenTrue(this.workspace.applicationCache.notebooksPrefetched).done(function(){e.notebooks=i.values(e.workspace.notebookCache.items()),t.resolve()}).fail(function(e){var t={title:s.networkErrorNotification,details:e.message};i.showErrorNotification(t),o.error("Failed to load notebooks","RawProjectAssetCatalog",e)}),t},e.prototype.enlistModulesAsync=function(){var e=this,t=$.Deferred();return i.whenTrue(this.workspace.applicationCache.modulesPrefetched).done(function(){e.modules=i.values(e.workspace.moduleCache.items()),t.resolve()}),t},e.prototype.enlistDatasetsAsync=function(){var e=this,t=$.Deferred();return i.whenTrue(this.workspace.applicationCache.datasetsPrefetched).done(function(){e.datasets=i.values(e.workspace.datasetCache.items()),t.resolve()}),t},e.prototype.enlistTrainedModelsAsync=function(){var e=this,t=$.Deferred();return i.whenTrue(this.workspace.applicationCache.trainedModelsPrefetched).done(function(){e.trainedModels=i.values(e.workspace.trainedModelCache.items()),t.resolve()}),t},e.prototype.enlistTransformsAsync=function(){var e=this,t=$.Deferred();return i.whenTrue(this.workspace.applicationCache.transformModulesPrefetched).done(function(){e.transforms=i.values(e.workspace.transformModulesCache.items()),t.resolve()}),t},e.prototype.enlistExperimentsAsync=function(){var e=this,t=$.Deferred(),n={includeNonLeaf:!1,includeArchived:!1};return i.then(this.workspace.listExperimentsAsync(n),function(n){e.experiments=$.grep(n,function(t){return e.isUserWorkspaceId(t.ExperimentId.split(".")[0])},!1),t.resolve()}),t},e.prototype.isUserWorkspaceId=function(e){return e&&e===this.workspace.id},e}();t.RawProjectAssetCatalog=u}),define("generated/editor/TS/ViewModel/ProjectCollection/ProjectAssetDictionaries",["require","exports","../../../TS/ViewModel/ProjectCollection/RawProjectAssetCatalog","../../../../DataLabClient/Util"],function(e,t,n,r){var i=function(){function e(e){this.assetsCatalog=new n.RawProjectAssetCatalog(e)}return e.prototype.populateDictionaries=function(){var e=this,t=$.Deferred();return r.then(this.assetsCatalog.enlistAllAssetsAsync(),function(){e.webServices=_.indexBy(e.assetsCatalog.webServices,"Id"),e.notebooks=_.indexBy(e.assetsCatalog.notebooks,"familyId"),e.modules=_.indexBy(e.assetsCatalog.modules,function(e){return e.familyId.split(".")[1]}),e.datasets=_.indexBy(e.assetsCatalog.datasets,function(e){return e.familyId.split(".")[1]}),e.trainedModels=_.indexBy(e.assetsCatalog.trainedModels,function(e){return e.familyId.split(".")[1]}),e.transforms=_.indexBy(e.assetsCatalog.transforms,function(e){return e.familyId.split(".")[1]}),e.experiments=_.indexBy(e.assetsCatalog.experiments,"ExperimentId"),t.resolve()}),t},e}();t.ProjectAssetDictionaries=i}),define("generated/editor/TS/ViewModel/ProjectCollection/AssetTypesViewModel",["require","exports","../../../../DataLabClient/LocalizedResources"],function(e,t,n){var r=function(){function e(){var t=[{id:e.AllAssetsTypeId,displayName:n.projectAssetDisplayNameAllTypes},{id:e.Datasets,displayName:n.projectAssetDisplayNameDatasets},{id:e.Experiments,displayName:n.projectAssetDisplayNameExperiments},{id:e.Modules,displayName:n.projectAssetDisplayNameModules},{id:e.Notebooks,displayName:n.projectAssetDisplayNameNotebooks},{id:e.TrainedModels,displayName:n.projectAssetDisplayNameTrainedModels},{id:e.Transforms,displayName:n.projectAssetDisplayNameTransforms},{id:e.WebServices,displayName:n.projectAssetDisplayNameWebServices}];this.allAssetTypes=t,this.selectedAssetTypeId=ko.observable(t[0].id)}return e.AllAssetsTypeId="ALL-ASSETS",e.Datasets="DATASETS",e.Experiments="EXPERIMENTS",e.Modules="MODULES",e.Notebooks="NOTEBOOKS",e.TrainedModels="TRAINED-MODELS",e.Transforms="TRANSFORMS",e.WebServices="WEB-SERVICES",e}();t.AssetTypesViewModel=r}),define("generated/editor/TS/ViewModel/ProjectCollection/ResourceDetails",["require","exports","../../../../DataLabClient/Util"],function(e,t,n){var r=function(){function e(e){this.name=e.name,this.id=e.id,this.lastModified=n.formatDate(e.lastModified),this.detailsCollapsed=ko.observable(!0)}return e}();t.ResourceDetails=r});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/ProjectAssetViewModel",["require","exports","../../../TS/ViewModel/ProjectCollection/AssetTypesViewModel","../../../TS/ViewModel/ProjectCollection/ResourceDetails"],function(e,t,n,r){var i=function(e){function t(t){var n=this;e.call(this,t),this.isMatchingFilterText=ko.observable(!0),this.isSelected=ko.observable(!1),this.isInCategory=ko.observable(!0),this.isEnabled=ko.observable(!0),this.filterableProperties=this.getFilterableProperties(),this.isVisible=ko.computed(function(){return n.isInCategory()&&n.isMatchingFilterText()}),this.idValue=this.id}return __extends(t,e),t.prototype.assetTypeId=function(){return""},t.prototype.checkCategory=function(e){var t=this.assetTypeId()===e||e===n.AssetTypesViewModel.AllAssetsTypeId;this.isInCategory(t)},t.prototype.applyFilter=function(e){if(!e){this.isMatchingFilterText(!0);return}var n=t.normalizeFilterText(e),r=this.filterableProperties.some(function(e){var r=t.normalizeFilterText(e);return r.indexOf(n)!==-1});this.isMatchingFilterText(r)},t.prototype.getFilterableProperties=function(){return[this.name]},t.normalizeFilterText=function(e){return e?e.toLowerCase().replace(t.filterTextNormalizationRegex," "):""},t.filterTextNormalizationRegex=/[^A-Za-z0-9 ]/g,t}(r.ResourceDetails);t.ProjectAssetViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/AssetViewModels/DatasetAssetViewModel",["require","exports","../../../../TS/ViewModel/ProjectCollection/AssetTypesViewModel","../../../../TS/ViewModel/ProjectCollection/ProjectAssetViewModel"],function(e,t,n,r){var i=function(e){function t(t){this.dataset=t,e.call(this,{id:t.familyId.split(".")[1],name:t.name(),lastModified:t.created})}return __extends(t,e),t.prototype.getFilterableProperties=function(){return[this.name,this.dataset.description(),this.dataset.filename]},t.prototype.assetTypeId=function(){return n.AssetTypesViewModel.Datasets},t}(r.ProjectAssetViewModel);t.DatasetAssetViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/AssetViewModels/ExperimentAssetViewModel",["require","exports","../../../../TS/ViewModel/ProjectCollection/AssetTypesViewModel","../../../../TS/ViewModel/ProjectCollection/ProjectAssetViewModel"],function(e,t,n,r){var i=function(e){function t(t){e.call(this,{id:t.ExperimentId,name:t.Description,lastModified:new Date})}return __extends(t,e),t.prototype.assetTypeId=function(){return n.AssetTypesViewModel.Experiments},t}(r.ProjectAssetViewModel);t.ExperimentAssetViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/AssetViewModels/ModuleAssetViewModel",["require","exports","../../../../TS/ViewModel/ProjectCollection/AssetTypesViewModel","../../../../TS/ViewModel/ProjectCollection/ProjectAssetViewModel"],function(e,t,n,r){var i=function(e){function t(t){this._module=t,e.call(this,{id:t.familyId.split(".")[1],name:t.name(),lastModified:t.created})}return __extends(t,e),t.prototype.getFilterableProperties=function(){return[this.name,this._module.description()]},t.prototype.assetTypeId=function(){return n.AssetTypesViewModel.Modules},t}(r.ProjectAssetViewModel);t.ModuleAssetViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/AssetViewModels/NotebookAssetViewModel",["require","exports","../../../../TS/ViewModel/ProjectCollection/AssetTypesViewModel","../../../../TS/ViewModel/ProjectCollection/ProjectAssetViewModel"],function(e,t,n,r){var i=function(e){function t(t){this.notebook=t,e.call(this,{id:t.familyId,name:t.friendlyName,lastModified:t.modified})}return __extends(t,e),t.prototype.getFilterableProperties=function(){return[this.name,this.notebook.description()]},t.prototype.assetTypeId=function(){return n.AssetTypesViewModel.Notebooks},t}(r.ProjectAssetViewModel);t.NotebookAssetViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/AssetViewModels/TrainedModelAssetViewModel",["require","exports","../../../../TS/ViewModel/ProjectCollection/AssetTypesViewModel","../../../../TS/ViewModel/ProjectCollection/ProjectAssetViewModel"],function(e,t,n,r){var i=function(e){function t(t){this.model=t,e.call(this,{id:t.familyId.split(".")[1],name:t.name(),lastModified:t.created})}return __extends(t,e),t.prototype.getFilterableProperties=function(){return[this.name,this.model.description()]},t.prototype.assetTypeId=function(){return n.AssetTypesViewModel.TrainedModels},t}(r.ProjectAssetViewModel);t.TrainedModelAssetViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/AssetViewModels/TransformModulesAssetViewModel",["require","exports","../../../../TS/ViewModel/ProjectCollection/AssetTypesViewModel","../../../../TS/ViewModel/ProjectCollection/ProjectAssetViewModel"],function(e,t,n,r){var i=function(e){function t(t){this._module=t,e.call(this,{id:t.familyId.split(".")[1],name:t.name(),lastModified:t.created})}return __extends(t,e),t.prototype.getFilterableProperties=function(){return[this.name,this._module.description()]},t.prototype.assetTypeId=function(){return n.AssetTypesViewModel.Transforms},t}(r.ProjectAssetViewModel);t.TransformModulesAssetViewModel=i});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/AssetViewModels/WebServiceGroupAssetViewModel",["require","exports","../../../../TS/ViewModel/ProjectCollection/AssetTypesViewModel","../../../../TS/ViewModel/ProjectCollection/ProjectAssetViewModel","../../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(e){function t(t){e.call(this,{id:t.Id,name:t.Name,lastModified:i.parseJsonDate(t.CreationTime)})}return __extends(t,e),t.prototype.assetTypeId=function(){return n.AssetTypesViewModel.WebServices},t}(r.ProjectAssetViewModel);t.WebServiceGroupAssetViewModel=s}),define("generated/editor/TS/ViewModel/ProjectCollection/ProjectAssetsCatalog",["require","exports","../../../TS/ViewModel/ProjectCollection/AssetViewModels/DatasetAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/ExperimentAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/ModuleAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/NotebookAssetViewModel","../../../TS/ViewModel/ProjectCollection/RawProjectAssetCatalog","../../../TS/ViewModel/ProjectCollection/AssetViewModels/TrainedModelAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/TransformModulesAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/WebServiceGroupAssetViewModel","../../../../DataLabClient/FeaturesExtensions"],function(e,t,n,r,i,s,o,u,a,f,l){var c=function(){function e(e){this.workspace=e,this._areAssetsFetched=!1,this.allAssets=ko.observableArray([]),this.webServices=ko.observableArray([]),this.notebooks=ko.observableArray([]),this.modules=ko.observableArray([]),this.datasets=ko.observableArray([]),this.trainedModels=ko.observableArray([]),this.experiments=ko.observableArray([]),this.transforms=ko.observableArray([])}return e.getAssetsLookup=function(e){return _.indexBy(e(),"idValue")},e.prototype.enlistAllAssetsAsync=function(){var e=this,t=$.Deferred();if(this._areAssetsFetched)t.resolve();else{var n=new o.RawProjectAssetCatalog(this.workspace);n.enlistAllAssetsAsync().done(function(){e.enlistWebServiceGroups(n.webServices),l.canEnableIPythonNotebookFeature()&&e.enlistNotebooks(n.notebooks),e.enlistUserModules(n.modules),e.enlistDatasets(n.datasets),e.enlistTrainedModels(n.trainedModels),e.enlistTransforms(n.transforms),e.enlistExperiments(n.experiments);var r=e.webServices().concat(e.notebooks()).concat(e.modules()).concat(e.datasets()).concat(e.trainedModels()).concat(e.experiments()).concat(e.transforms());e.allAssets(r),t.resolve()}).fail(function(){t.reject()}),this._areAssetsFetched=!0}return t},e.prototype.enlistWebServiceGroups=function(e){var t=e.map(function(e){return new f.WebServiceGroupAssetViewModel(e)});this.webServices(t)},e.prototype.enlistNotebooks=function(e){var t=e.map(function(e){return new s.NotebookAssetViewModel(e)});this.notebooks(t)},e.prototype.enlistUserModules=function(e){var t=this,n=e.filter(function(e){return e.familyId.lastIndexOf(t.workspace.id,0)===0}),r=n.map(function(e){return new i.ModuleAssetViewModel(e)});this.modules(r)},e.prototype.enlistDatasets=function(e){var t=e.map(function(e){return new n.DatasetAssetViewModel(e)});this.datasets(t)},e.prototype.enlistTrainedModels=function(e){var t=e.map(function(e){return new u.TrainedModelAssetViewModel(e)});this.trainedModels(t)},e.prototype.enlistTransforms=function(e){var t=e.map(function(e){return new a.TransformModulesAssetViewModel(e)});this.transforms(t)},e.prototype.enlistExperiments=function(e){var t=this,n=$.grep(e,function(e){return t.isUserWorkspaceId(e.ExperimentId.split(".")[0])},!1),i=n.map(function(e){return new r.ExperimentAssetViewModel(e)});this.experiments(i)},e.prototype.isUserWorkspaceId=function(e){return e&&e===this.workspace.id},e}();t.ProjectAssetsCatalog=c});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/ProjectConfigurationDialogViewModel",["require","exports","../../../TS/ViewModel/ProjectCollection/AssetTypesViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/DatasetAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/ExperimentAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/ModuleAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/NotebookAssetViewModel","../../../TS/ViewModel/ProjectCollection/ProjectAssetsCatalog","../../../TS/Common/ProjectUtilities","../../../TS/ViewModel/ProjectCollection/AssetViewModels/TrainedModelAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/TransformModulesAssetViewModel","../../../TS/ViewModel/ProjectCollection/AssetViewModels/WebServiceGroupAssetViewModel","../../../../DataLabClient/CustomEvent","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=d.DisposableSubscription,b=function(e){function t(t,r){var i=this;e.call(this),this.project=t,this.workspace=r,this._beforeInitialize=new h.CustomEvent,this._afterInitialize=new h.CustomEvent,this._initializeFailed=new h.CustomEvent,this._beforeUpdateProjectConfig=new h.CustomEvent,this._afterUpdateProjectConfig=new h.CustomEvent,this._updateProjectConfigFailed=new h.CustomEvent,this._changesMade=!1,this._assetTypeIdToAssetCollectionLookup=Object.create(null),this._assetTypeIdToAssetsSelectionStateLookup=Object.create(null),this._addedAssetTypeIdToAssetCollectionLookup=Object.create(null),this._addedAssetTypeIdToAssetsSelectionStateLookup=Object.create(null),this.descriptionMaxLength=2e3,this.assetTypes=new n.AssetTypesViewModel,this.unaddedDatasetsCollapsed=ko.observable(!0),this.unaddedDatasetsAllSelected=ko.observable(!1),this.unaddedExperimentsCollapsed=ko.observable(!0),this.unaddedExperimentsAllSelected=ko.observable(!1),this.unaddedModulesCollapsed=ko.observable(!0),this.unaddedModulesAllSelected=ko.observable(!1),this.unaddedNotebooksCollapsed=ko.observable(!0),this.unaddedNotebooksAllSelected=ko.observable(!1),this.unaddedTrainedModelsCollapsed=ko.observable(!0),this.unaddedTrainedModelsAllSelected=ko.observable(!1),this.unaddedTransformsCollapsed=ko.observable(!0),this.unaddedTransformsAllSelected=ko.observable(!1),this.unaddedWebServicesCollapsed=ko.observable(!0),this.unaddedWebServicesAllSelected=ko.observable(!1),this.addedDatasetsCollapsed=ko.observable(!0),this.addedDatasetsAllSelected=ko.observable(!1),this.addedExperimentsCollapsed=ko.observable(!0),this.addedExperimentsAllSelected=ko.observable(!1),this.addedModulesCollapsed=ko.observable(!0),this.addedModulesAllSelected=ko.observable(!1),this.addedNotebooksCollapsed=ko.observable(!0),this.addedNotebooksAllSelected=ko.observable(!1),this.addedTrainedModelsCollapsed=ko.observable(!0),this.addedTrainedModelsAllSelected=ko.observable(!1),this.addedTransformsCollapsed=ko.observable(!0),this.addedTransformsAllSelected=ko.observable(!1),this.addedWebServicesCollapsed=ko.observable(!0),this.addedWebServicesAllSelected=ko.observable(!1),this.name=a.getProjectNameValidator(t().Name),this.description=ko.observable(t().Description),this.addedProjectAssets=ko.observableArray([]),this.unaddedProjectAssets=ko.observableArray([]),this.assetsFilterText=ko.observable(""),this._projectAssetsCatalog=new u.ProjectAssetsCatalog(r),this.canBeAccepted=ko.computed(function(){return i.name.isValid()}),this.assetsFilterText.extend({rateLimit:{timeout:400,method:"notifyWhenChangesStop"}}).subscribe(function(e){m.featureUsage({featureID:17,groupID:173,data:e}),i.applyAssetsFiltering(e)}),this.isBusy=ko.observable(!1),this.isAddAssetEnabled=ko.computed(function(){return!i.isBusy()&&_.some(i.unaddedProjectAssets(),function(e){return e.isSelected()})}),this.isRemoveAssetEnabled=ko.computed(function(){return!i.isBusy()&&_.some(i.addedProjectAssets(),function(e){return e.isSelected()})}),this.assetTypes.selectedAssetTypeId.subscribe(function(e){m.featureUsage({featureID:186,groupID:173,data:e}),i.applyAssetTypeBasedFiltering(e)}),this.registerForDisposal(new y(this.name.subscribe(function(){i._changesMade=!0}))),this.registerForDisposal(new y(this.description.subscribe(function(){i._changesMade=!0}))),this.allAssetsSelectionSummary=ko.computed(function(){var e=i.unaddedProjectAssets().filter(function(e){return e.isSelected()}).length,t=e>1?v.projectConfigAssetsSelectionSummaryPlural:v.projectConfigAssetsSelectionSummarySingular;return g.format(t,e.toString())}),this.unaddedExperiments=ko.computed(function(){return i.unaddedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Experiments})}),this.unaddedDatasets=ko.computed(function(){return i.unaddedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Datasets})}),this.unaddedModules=ko.computed(function(){return i.unaddedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Modules})}),this.unaddedNotebooks=ko.computed(function(){return i.unaddedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Notebooks})}),this.unaddedTrainedModels=ko.computed(function(){return i.unaddedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.TrainedModels})}),this.unaddedTransforms=ko.computed(function(){return i.unaddedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Transforms})}),this.unaddedWebServices=ko.computed(function(){return i.unaddedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.WebServices})}),this.addedExperiments=ko.computed(function(){return i.addedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Experiments})}),this.addedDatasets=ko.computed(function(){return i.addedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Datasets})}),this.addedModules=ko.computed(function(){return i.addedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Modules})}),this.addedNotebooks=ko.computed(function(){return i.addedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Notebooks})}),this.addedTrainedModels=ko.computed(function(){return i.addedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.TrainedModels})}),this.addedTransforms=ko.computed(function(){return i.addedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Transforms})}),this.addedWebServices=ko.computed(function(){return i.addedProjectAssets().filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.WebServices})}),this._isUnaddedAssetsFilteringApplied=ko.computed(function(){return!!i.assetsFilterText()||i.assetTypes.selectedAssetTypeId()!==n.AssetTypesViewModel.AllAssetsTypeId}),this.showUnaddedDatasetsGroup=ko.computed(function(){var e=i.unaddedDatasets();return e.length===0&&!i._isUnaddedAssetsFilteringApplied()||e.some(function(e){return e.isVisible()})}),this.showUnaddedExperimentsGroup=ko.computed(function(){var e=i.unaddedExperiments();return e.length===0&&!i._isUnaddedAssetsFilteringApplied()||e.some(function(e){return e.isVisible()})}),this.showUnaddedModulesGroup=ko.computed(function(){var e=i.unaddedModules();return e.length===0&&!i._isUnaddedAssetsFilteringApplied()||e.some(function(e){return e.isVisible()})}),this.showUnaddedNotebooksGroup=ko.computed(function(){var e=i.unaddedNotebooks();return e.length===0&&!i._isUnaddedAssetsFilteringApplied()||e.some(function(e){return e.isVisible()})}),this.showUnaddedTrainedModelsGroup=ko.computed(function(){var e=i.unaddedTrainedModels();return e.length===0&&!i._isUnaddedAssetsFilteringApplied()||e.some(function(e){return e.isVisible()})}),this.showUnaddedTransformsGroup=ko.computed(function(){var e=i.unaddedTransforms();return e.length===0&&!i._isUnaddedAssetsFilteringApplied()||e.some(function(e){return e.isVisible()})}),this.showUnaddedWebServicesGroup=ko.computed(function(){var e=i.unaddedWebServices();return e.length===0&&!i._isUnaddedAssetsFilteringApplied()||e.some(function(e){return e.isVisible()})}),this.showAddedDatasetsGroup=ko.computed(function(){return i.addedDatasets().some(function(e){return e.isVisible()})}),this.showAddedExperimentsGroup=ko.computed(function(){return i.addedExperiments().some(function(e){return e.isVisible()})}),this.showAddedModulesGroup=ko.computed(function(){return i.addedModules().some(function(e){return e.isVisible()})}),this.showAddedNotebooksGroup=ko.computed(function(){return i.addedNotebooks().some(function(e){return e.isVisible()})}),this.showAddedTrainedModelsGroup=ko.computed(function(){return i.addedTrainedModels().some(function(e){return e.isVisible()})}),this.showAddedTransformsGroup=ko.computed(function(){return i.addedTransforms().some(function(e){return e.isVisible()})}),this.showAddedWebServicesGroup=ko.computed(function(){return i.addedWebServices().some(function(e){return e.isVisible()})}),this._assetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Datasets]=this.unaddedDatasets,this._assetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Experiments]=this.unaddedExperiments,this._assetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Modules]=this.unaddedModules,this._assetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Notebooks]=this.unaddedNotebooks,this._assetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.TrainedModels]=this.unaddedTrainedModels,this._assetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Transforms]=this.unaddedTransforms,this._assetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.WebServices]=this.unaddedWebServices,this._assetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Datasets]=this.unaddedDatasetsAllSelected,this._assetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Experiments]=this.unaddedExperimentsAllSelected,this._assetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Modules]=this.unaddedModulesAllSelected,this._assetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Notebooks]=this.unaddedNotebooksAllSelected,this._assetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.TrainedModels]=this.unaddedTrainedModelsAllSelected,this._assetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Transforms]=this.unaddedTransformsAllSelected,this._assetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.WebServices]=this.unaddedWebServicesAllSelected,this._addedAssetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Datasets]=this.addedDatasets,this._addedAssetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Experiments]=this.addedExperiments,this._addedAssetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Modules]=this.addedModules,this._addedAssetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Notebooks]=this.addedNotebooks,this._addedAssetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.TrainedModels]=this.addedTrainedModels,this._addedAssetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.Transforms]=this.addedTransforms,this._addedAssetTypeIdToAssetCollectionLookup[n.AssetTypesViewModel.WebServices]=this.addedWebServices,this._addedAssetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Datasets]=this.addedDatasetsAllSelected,this._addedAssetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Experiments]=this.addedExperimentsAllSelected,this._addedAssetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Modules]=this.addedModulesAllSelected,this._addedAssetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Notebooks]=this.addedNotebooksAllSelected,this._addedAssetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.TrainedModels]=this.addedTrainedModelsAllSelected,this._addedAssetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.Transforms]=this.addedTransformsAllSelected,this._addedAssetTypeIdToAssetsSelectionStateLookup[n.AssetTypesViewModel.WebServices]=this.addedWebServicesAllSelected}return __extends(t,e),Object.defineProperty(t.prototype,"beforeInitialize",{get:function(){return this._beforeInitialize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterInitialize",{get:function(){return this._afterInitialize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initializeFailed",{get:function(){return this._initializeFailed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beforeUpdateProjectConfig",{get:function(){return this._beforeUpdateProjectConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterUpdateProjectConfig",{get:function(){return this._afterUpdateProjectConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateProjectConfigFailed",{get:function(){return this._updateProjectConfigFailed},enumerable:!0,configurable:!0}),t.prototype.dismissed=function(e){var t=this;if(!e.accepted||!this._changesMade)return;var n=this.project(),u=this.addedProjectAssets(),a={Experiment:u.filter(function(e){return e instanceof i.ExperimentAssetViewModel}).map(function(e){return e.id}),Notebook:u.filter(function(e){return e instanceof o.NotebookAssetViewModel}).map(function(e){return e.id}),WebService:u.filter(function(e){return e instanceof c.WebServiceGroupAssetViewModel}).map(function(e){return e.id}),DataSource:u.filter(function(e){return e instanceof r.DatasetAssetViewModel}).map(function(e){return e.id}),Module:u.filter(function(e){return e instanceof s.ModuleAssetViewModel}).map(function(e){return e.id}),TrainedModel:u.filter(function(e){return e instanceof f.TrainedModelAssetViewModel}).map(function(e){return e.id}),Transform:u.filter(function(e){return e instanceof l.TransformModulesAssetViewModel}).map(function(e){return e.id})},h={ContainerId:n.ContainerId,EntityTag:n.EntityTag,Name:this.name(),Description:this.description(),Creator:n.Creator,CreatedTime:n.CreatedTime,ChangedTime:n.ChangedTime,Contents:a};this._beforeUpdateProjectConfig.notify(),this.workspace.updateProjectAsync(h,!0).done(function(e){t._afterUpdateProjectConfig.notify(e)}).fail(function(e){t._updateProjectConfigFailed.notify(e)})},t.prototype.initialize=function(){var e=this;this.beforeInitialize.notify(),this._projectAssetsCatalog.enlistAllAssetsAsync().done(function(){var t=e.project().Contents,n=_.union(e.resourceDetailsToProjectAssetViewModel(e._projectAssetsCatalog.datasets,t.DataSource),e.resourceDetailsToProjectAssetViewModel(e._projectAssetsCatalog.experiments,t.Experiment),e.resourceDetailsToProjectAssetViewModel(e._projectAssetsCatalog.modules,t.Module),e.resourceDetailsToProjectAssetViewModel(e._projectAssetsCatalog.notebooks,t.Notebook),e.resourceDetailsToProjectAssetViewModel(e._projectAssetsCatalog.trainedModels,t.TrainedModel),e.resourceDetailsToProjectAssetViewModel(e._projectAssetsCatalog.transforms,t.Transform),e.resourceDetailsToProjectAssetViewModel(e._projectAssetsCatalog.webServices,t.WebService));e.bindCheckedEventHandlers(n),e.bindAddedCheckedEventHandlers(n),ko.utils.arrayPushAll(e.addedProjectAssets(),n),e.addedProjectAssets.valueHasMutated();var r=_.indexBy(e.addedProjectAssets(),"idValue"),i=_.filter(e._projectAssetsCatalog.allAssets(),function(e){return!r[e.id]});e.bindCheckedEventHandlers(i),e.bindAddedCheckedEventHandlers(i),ko.utils.arrayPushAll(e.unaddedProjectAssets(),i),e.unaddedProjectAssets.valueHasMutated(),e.unaddedExperiments().forEach(function(t){var n=e.workspace.getProjectListForAsset(t.id);t.isEnabled(n.length===0)}),e.unaddedWebServices().forEach(function(t){var n=e.workspace.getProjectListForAsset(t.id);t.isEnabled(n.length===0)})}).always(function(){e.afterInitialize.notify()}).fail(function(t){e.initializeFailed.notify(t)})},t.prototype.addAssets=function(){m.featureUsage({featureID:187,groupID:173}),this.moveAssets(this.unaddedProjectAssets,this.addedProjectAssets)},t.prototype.removeAssets=function(){m.featureUsage({featureID:188,groupID:173}),this.moveAssets(this.addedProjectAssets,this.unaddedProjectAssets)},t.prototype.toggleUnaddedAssetsGroupSelection=function(e){return this.toggleAssetGroupSelection(this._assetTypeIdToAssetsSelectionStateLookup[e](),this._assetTypeIdToAssetCollectionLookup[e]()),!0},t.prototype.toggleAddedAssetsGroupSelection=function(e){return this.toggleAssetGroupSelection(this._addedAssetTypeIdToAssetsSelectionStateLookup[e](),this._addedAssetTypeIdToAssetCollectionLookup[e]()),!0},t.prototype.toggleAssetGroupSelection=function(e,t){t.forEach(function(t){t.isSelected(e&&t.isVisible()&&t.isEnabled())})},t.prototype.bindAddedCheckedEventHandlers=function(e){var t=this;e.forEach(function(e){t.updateAssetSelection(e,t._addedAssetTypeIdToAssetsSelectionStateLookup[e.assetTypeId()],t._addedAssetTypeIdToAssetCollectionLookup[e.assetTypeId()])})},t.prototype.bindCheckedEventHandlers=function(e){var t=this;e.forEach(function(e){t.updateAssetSelection(e,t._assetTypeIdToAssetsSelectionStateLookup[e.assetTypeId()],t._assetTypeIdToAssetCollectionLookup[e.assetTypeId()])})},t.prototype.updateAssetSelection=function(e,t,n){this.registerForDisposal(new y(e.isSelected.subscribe(function(r){var i=n();if(i.indexOf(e)!==-1)if(!r)t(!1);else{var s=!i.some(function(e){return!e.isSelected()&&e.isEnabled()&&e.isVisible()});t(s)}})))},t.prototype.moveAssets=function(e,t){var n=this,r=e().filter(function(e){return e.isSelected()});this.isBusy(!0),this.resolveAssetsDependencyAsync(r,function(e,t){return n.workspace.getProjectAssetsDependenciesAsync(e,t)}).done(function(r){n.moveAssetsWithoutDependencyResolution(r,e,t),e===n.unaddedProjectAssets?n.moveAssetsWithoutDependencyResolution(r,e,t):n.resolveAssetsDependencyAsync(r,function(e,t){return n.workspace.getProjectAssetsReferencersAsync(e,t)}).done(function(r){n.moveAssetsWithoutDependencyResolution(r,e,t)}).fail(function(i){n.moveAssetsOnDependencyResolutionFailure(r,i,e,t)})}).always(function(){n.isBusy(!1)}).fail(function(i){n.moveAssetsOnDependencyResolutionFailure(r,i,e,t)})},t.prototype.moveAssetsOnDependencyResolutionFailure=function(e,t,n,r){m.error("Resolving dependency for assets moving failed.","ProjectConfigurationDialogViewModel"),this.moveAssetsWithoutDependencyResolution(e,n,r)},t.prototype.resolveAssetsDependencyAsync=function(e,t){var r=this,i={Experiment:e.filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Experiments}).map(function(e){return e.idValue}),Notebook:e.filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Notebooks}).map(function(e){return e.idValue}),WebService:e.filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.WebServices}).map(function(e){return e.idValue}),DataSource:e.filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Datasets}).map(function(e){return e.idValue}),Module:e.filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Modules}).map(function(e){return e.idValue}),TrainedModel:e.filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.TrainedModels}).map(function(e){return e.idValue}),Transform:e.filter(function(e){return e.assetTypeId()===n.AssetTypesViewModel.Transforms}).map(function(e){return e.idValue})},s=$.Deferred();return t(this.project().ContainerId,i).done(function(t){var n=_.union(r.resourceDetailsToProjectAssetViewModel(r._projectAssetsCatalog.datasets,t.DataSource),r.resourceDetailsToProjectAssetViewModel(r._projectAssetsCatalog.experiments,t.Experiment),r.resourceDetailsToProjectAssetViewModel(r._projectAssetsCatalog.modules,t.Module),r.resourceDetailsToProjectAssetViewModel(r._projectAssetsCatalog.notebooks,t.Notebook),r.resourceDetailsToProjectAssetViewModel(r._projectAssetsCatalog.trainedModels,t.TrainedModel),r.resourceDetailsToProjectAssetViewModel(r._projectAssetsCatalog.transforms,t.Transform),r.resourceDetailsToProjectAssetViewModel(r._projectAssetsCatalog.webServices,t.WebService)),i=_.union(e,n);s.resolve(i)}).fail(function(e){s.reject(e)}),s},t.prototype.moveAssetsWithoutDependencyResolution=function(e,t,n){var r=this,i=t();e=e.filter(function(e){return t().indexOf(e)!==-1}),e.forEach(function(e){e.isSelected(!1),t===r.unaddedProjectAssets?(e.isMatchingFilterText(!0),e.isInCategory(!0)):(e.checkCategory(r.assetTypes.selectedAssetTypeId()),e.applyFilter(r.assetsFilterText())),ko.utils.arrayRemoveItem(i,e)}),ko.utils.arrayPushAll(n,e),t.valueHasMutated(),n.valueHasMutated(),this._changesMade=!0},t.prototype.applyAssetsFiltering=function(e){this.unaddedProjectAssets().forEach(function(t){t.applyFilter(e)})},t.prototype.applyAssetTypeBasedFiltering=function(e){this.unaddedProjectAssets().forEach(function(t){t.checkCategory(e)})},t.prototype.resourceDetailsToProjectAssetViewModel=function(e,t){if(!t)return[];var n=u.ProjectAssetsCatalog.getAssetsLookup(e);return t.map(function(e){return n[e]}).filter(function(e){return!!e})},t}(d.Disposable);t.ProjectConfigurationDialogViewModel=b}),define("generated/editor/TS/View/ProjectCollection/ProjectConfigurationDialogView",["require","exports","../../../TS/View/DialogView","../../../TS/ViewModel/ProjectCollection/ProjectConfigurationDialogViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=i.FeatureId,f=function(){function e(){}return e.show=function(e,t,i){o.featureUsage({featureID:185,groupID:173});var a=new r.ProjectConfigurationDialogViewModel(t,e),f=new n.DialogView(ExperimentEditorTemplates._projectConfigurationDialogMarkup,a,{size:["865px","500px"]});a.beforeInitialize.attach(Shell.UI.Spinner.show),a.afterInitialize.attach(Shell.UI.Spinner.hide),a.initializeFailed.attach(function(e){f.close().done(function(){u.showErrorNotification({title:s.projectConfigDialogInitializationErrorTitle,details:e.message})}).always(function(){o.error(e.message,"ExperimentEditor.ProjectCollection.ProjectConfigurationDialog")})}),a.beforeUpdateProjectConfig.attach(Shell.UI.Spinner.show),a.afterUpdateProjectConfig.attach(function(e){i&&i(e),Shell.UI.Spinner.hide()}),a.updateProjectConfigFailed.attach(function(e){o.error(e.message,"ExperimentEditor.ProjectCollection.ProjectConfigurationDialog"),u.showErrorNotification({title:s.projectConfigDialogUpdateConfigErrorTitle,details:e.message}),Shell.UI.Spinner.hide()}),f.show(),a.initialize()},e}();t.ProjectConfigurationDialog=f});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/ProjectDetailViewModel",["require","exports","../DataLabViews/ExperimentListView","../DataLabViews/ExperimentView","../TS/ViewModel/ExperimentEditor/NotebookHelpers","../TS/ViewModel/ProjectCollection/ProjectAssetDictionaries","../TS/View/ProjectCollection/ProjectConfigurationDialogView","../TS/Common/ProjectUtilities","../TS/ViewModel/ProjectCollection/ResourceDetails","../TS/Common/WebServiceGroupUtilities","../../DataLabClient/Disposable","../../DataLabClient/Logging/Logging","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e){function t(t){var i=this;e.call(this,t),this.navigateToExperiment=function(){r.navigateToExperiment(i.id)},this.owner=t.owner,this.status=n.formatExperimentStatusCode(t.status),this.updated=h.formatDate(t.lastModified),this.experimentUrl=r.calculateNavigationPathToExperiment(this.id)}return __extends(t,e),t}(a.ResourceDetails);t.ExperimentDetails=p;var d=function(e){function t(t){var n=this;e.call(this,t),this.navigateToNotebook=function(){i.NotebookHelpers.openNotebookById(n.familyId,h.addSpinnerToBlankWindow())},this.familyId=t.familyId,this.language=t.language}return __extends(t,e),t}(a.ResourceDetails);t.NotebookDetails=d;var v=function(e){function t(t,n){var r=this;e.call(this,n),this.navigateToWebService=function(){f.navigateToWebService(r._workspace,r.id)},this._workspace=t,this.webServiceUrl=f.calculateNavigationPathToWebService(this._workspace,this.id)}return __extends(t,e),t}(a.ResourceDetails);t.WebServiceDetails=v;var m=function(e){function t(t,n,r,i){var o=this;r===void 0&&(r=!0),i===void 0&&(i=!1),e.call(this),this.project=t,this.readonly=i,this.shouldShowTitle=ko.observable(!1),this.experimentsCollapsed=ko.observable(!1),this.notebooksCollapsed=ko.observable(!1),this.webServicesCollapsed=ko.observable(!1),this.datasetsCollapsed=ko.observable(!1),this.trainedModelsCollapsed=ko.observable(!1),this.modulesCollapsed=ko.observable(!1),this.transformsCollapsed=ko.observable(!1),this.isPropertyTab=!1,this.registerForDisposal(new l.DisposableSubscription(this.project.subscribe(function(e){o.updateAssetList()}))),this.experiments=ko.observableArray([]),this.notebooks=ko.observableArray([]),this.datasets=ko.observableArray([]),this.webServices=ko.observableArray([]),this.modules=ko.observableArray([]),this.trainedModels=ko.observableArray([]),this.transforms=ko.observableArray([]),this._workspace=n,this.assetDictionaries=new s.ProjectAssetDictionaries(n),r&&this.initialize(),this.showAddAssetsLink=ko.computed(function(){return!o.readonly&&o.experiments().length===0&&o.notebooks().length===0&&o.webServices().length===0&&o.modules().length===0&&o.trainedModels().length===0&&o.datasets().length===0&&o.transforms().length===0})}return __extends(t,e),t.prototype.initialize=function(){var e=this,t=$.Deferred();return this.assetDictionaries.populateDictionaries().done(function(){e.updateAssetList(),t.resolve()}).fail(function(){t.reject()}),t},t.prototype.refreshAssetDictionaries=function(){return this.assetDictionaries=new s.ProjectAssetDictionaries(this._workspace),this.initialize()},t.prototype.filterAssets=function(e,t){return this.assetDictionaries[t]&&this.assetDictionaries[t][e]?!0:(c.warn(h.format("Could not find asset in assetDictionaries.{0}",t),"ProjectDetailViewModel",{id:e}),!1)},t.prototype.createExperimentDetails=function(e){var t=this.assetDictionaries.experiments[e];return new p({name:t.Description,id:e,lastModified:new Date(t.Status.CreationTime),lastUpdated:t.Status.CreationTime,owner:t.Creator,status:t.Status.StatusCode})},t.prototype.createNotebookDetails=function(e){var t=this.assetDictionaries.notebooks[e];return new d({name:t.friendlyName,id:e,lastModified:t.modified,language:t.language,familyId:t.familyId})},t.prototype.createWebServiceDetails=function(e){var t=this.assetDictionaries.webServices[e];return new v(this._workspace,{name:t.Name,id:e,lastModified:h.parseJsonDate(t.CreationTime)})},t.prototype.createDatasetDetails=function(e){var t=this.assetDictionaries.datasets[e];return new a.ResourceDetails({name:t.name(),id:e,lastModified:t.created})},t.prototype.createTrainedModelDetails=function(e){var t=this.assetDictionaries.trainedModels[e];return new a.ResourceDetails({name:t.name(),id:e,lastModified:t.created})},t.prototype.createModuleDetails=function(e){var t=this.assetDictionaries.modules[e];return new a.ResourceDetails({name:t.name(),id:e,lastModified:t.created})},t.prototype.createTransformDetails=function(e){var t=this.assetDictionaries.transforms[e];return new a.ResourceDetails({name:t.name(),id:e,lastModified:t.created})},t.prototype.updateAssetList=function(){var e=this,t=this.project();if(t){var n=t.Contents;n.Experiment?this.experiments(n.Experiment.filter(function(t){return e.filterAssets(t,"experiments")}).map(function(t){return e.createExperimentDetails(t)})):this.experiments([]),n.Notebook?this.notebooks(n.Notebook.filter(function(t){return e.filterAssets(t,"notebooks")}).map(function(t){return e.createNotebookDetails(t)})):this.notebooks([]),n.DataSource?this.datasets(n.DataSource.filter(function(t){return e.filterAssets(t,"datasets")}).map(function(t){return e.createDatasetDetails(t)})):this.datasets([]),n.WebService?this.webServices(n.WebService.filter(function(t){return e.filterAssets(t,"webServices")}).map(function(t){return e.createWebServiceDetails(t)})):this.webServices([]),n.Module?this.modules(n.Module.filter(function(t){return e.filterAssets(t,"modules")}).map(function(t){return e.createModuleDetails(t)})):this.modules([]),n.TrainedModel?this.trainedModels(n.TrainedModel.filter(function(t){return e.filterAssets(t,"trainedModels")}).map(function(t){return e.createTrainedModelDetails(t)})):this.trainedModels([]),n.Transform?this.transforms(n.Transform.filter(function(t){return e.filterAssets(t,"transforms")}).map(function(t){return e.createTransformDetails(t)})):this.transforms([])}},t.prototype.navigateToProject=function(){u.navigateToProject(this.project().ContainerId,this.project().Name)},t.prototype.showProjectConfigurationDialog=function(){var e=this;o.ProjectConfigurationDialog.show(this._workspace,this.project,function(t){e.project(t)})},t}(l.Disposable);t.ProjectDetailViewModel=m});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/PropertyEditorControl/ProjectDetailsTabViewModel",["require","exports","../../../DataLabViews/AddToProjectDialogView","../../../TS/ViewModel/ExperimentEditor/Help","../../../DataLabViews/ProjectDetailViewModel","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f){var l=function(e){function t(t){var n=this;e.call(this),this.experimentEditorViewModel=t,this.help=r,this.isPropertyTab=!0,this.id="ExperimentEditor.ProjectDetailsTab",this.title=o.propertyPaneProjectTabCaption,this.selected=ko.observable(!1),this.projectObservable=ko.observable(null),this.projectDetailViewModel=new i.ProjectDetailViewModel(this.projectObservable,this.experimentEditorViewModel.experimentViewModel().workspace,!1),this.projectDetailViewModel.shouldShowTitle(!0),this.workspace=t.experimentViewModel().workspace,this.projectId=null,this.canAddExperimentToProject=ko.computed(function(){var e=n.experimentEditorViewModel.experimentViewModel().experiment.experimentId();return e!==null&&e!==undefined&&!n.projectDetailViewModel.project()}),f.then(this.projectDetailViewModel.initialize(),function(){n.refreshProject();var e=n.experimentEditorViewModel.experimentViewModel.subscribe(function(){n.refreshProject()});n.registerForDisposal(new s.DisposableSubscription(e))})}return __extends(t,e),t.prototype.setContainer=function(e){this.tabContainer=e},t.prototype.bindView=function(){f.initializeTemplateIfNecessary("projectDetailsTemplate",ExperimentEditorTemplates._projectDetailsMarkup),ko.components.unregister("project-details-tab"),ko.components.register("project-details-tab",{viewModel:{instance:this},template:ExperimentEditorTemplates._projectDetailMarkup})},t.prototype.updateProjectIfChanged=function(){var e=this;if(!this.projectId)return;this.workspace.getProjectAsync(this.projectId).done(function(t){e.projectObservable().EntityTag!==t.EntityTag&&f.then(e.projectDetailViewModel.refreshAssetDictionaries(),function(){e.projectObservable(t)})})},t.prototype.refreshProject=function(){var e=this,t=this.experimentEditorViewModel.experimentViewModel();this.workspace=this.experimentEditorViewModel.experimentViewModel().workspace;var n=this.workspace.getProjectIdListForAsset(t.experiment.experimentId());if(!n||n.length===0){this.projectObservable(null);return}this.projectId=n[0],this.workspace.getProjectAsync(this.projectId).done(function(t){e.projectObservable(t)}).fail(function(t){u.error(t.message),e.projectObservable(null)})},t.prototype.addToProject=function(){var e=this;if(this.canAddExperimentToProject){var t=this.experimentEditorViewModel.experimentViewModel().experiment.experimentId();n.openAddToProjectDialog(this.workspace,{assetType:0,id:t},function(t){e.projectId=t.ContainerId,f.then(e.projectDetailViewModel.refreshAssetDictionaries(),function(){e.projectObservable(t)})})}},t}(s.Disposable);t.ProjectDetailsTabViewModel=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/ExperimentEditorContainerViewModel",["require","exports","../../../TS/Common/CallbackCommand","../../../TS/ViewModel/Dialogs/CreateWebServiceFromTrainedModelDialogViewModel","../../../TS/ViewModel/ExperimentEditor/Dataset","../../../TS/View/DialogViewFactories","../../../TS/Common/EntityDataDownloader","../../../TS/ViewModel/ExperimentEditor/ExperimentEditorViewModel","../../../TS/Global","../../../TS/ViewModel/ExperimentEditor/Module","../../../TS/ViewModel/Dialogs/OutputPromotionDialogViewModel","../../../TS/ViewModel/ExperimentEditor/PackagePollingHelpers","../../../TS/ViewModel/PaletteControl/PaletteViewModel","../../../TS/ViewModel/ExperimentEditor/PortViewModel","../../../TS/ViewModel/ExperimentEditor/ProjectViewModel","../../../TS/ViewModel/PropertyEditorControl/PropertyEditorViewModel","../../../TS/ViewModel/ExperimentEditor/TrainedModel","../../../TS/ViewModel/ExperimentEditor/Transform","../../../TS/ViewModel/ExperimentEditor/WebServicePort","../../../TS/ViewModel/PropertyEditorControl/ExperimentPropertyTabViewModel","../../../TS/ViewModel/PropertyEditorControl/ProjectDetailsTabViewModel","../../../../DataLabClient/Model/AnnotationNode","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/Model/GraphNode","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/ModuleNode","../../../../DataLabClient/ObservableMap","../../../../DataLabClient/Model/Parameter","../../../../DataLabClient/Contracts/V1/Common/Project","../../../../DataLabClient/StateUtil","../../../../DataLabClient/Model/UnsavedResource","../../../../DataLabClient/Util","../../../../DataLabClient/Model/WebServicePortNode","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B,j,F){var I=function(e){function t(t,r,s){var a=this;e.call(this),this.searchText=ko.observable(""),this.paletteIsCollapsed=ko.observable(!0),this.workspace=t,this.graphFetcher=r,this.endpointDownloader=new o.EndpointDownloader,this.registerForDisposal(this.experimentEditorViewModel=new u.ExperimentEditorViewModel(t.moduleCache,t.datasetCache,t.trainedModelCache,t.transformModulesCache,this.endpointDownloader,{promoteOutput:new n.CallbackCommand(function(e){return a.promoteOutputToDataset(e)}),promoteTrainerOutput:new n.CallbackCommand(function(e){return a.promoteOutputToModel(e)}),promoteTransformOutput:new n.CallbackCommand(function(e){return a.promoteOutputToTransform(e)}),refreshExperiment:new n.CallbackCommand(function(){a.refreshExperiment()}),navigateToParent:new n.CallbackCommand(function(){return a.navigateToParent()}),promoteCreateWebService:new n.CallbackCommand(function(e){return a.promoteCreateWebService(e)})},t,{onAlert:function(e){return a.alertHandler(e)}})),this.experimentPropertyTab=new b.ExperimentPropertyTabViewModel(this.experimentEditorViewModel,this.endpointDownloader,t);var l=[this.experimentPropertyTab];N.enableProjectBasedAssetsGroupingEnabled()?(this.projectDetailsTab=new w.ProjectDetailsTabViewModel(this.experimentEditorViewModel),l=$.merge(l,[this.projectDetailsTab])):this.projectDetailsTab=null,this.registerForDisposal(this.propertyEditorViewModel=new v.PropertyEditorViewModel(l,this.experimentPropertyTab.getModuleHelp),this.paletteViewModel=new h.PaletteViewModel,new T.DisposableSubscription(this.propertyEditorViewModel.animatingDrawer.subscribe(function(e){a.experimentEditorViewModel.isBeingResized(e)}))),this.paletteViewModel.resetCategories(this.buildPaletteCategories()),this.workspace.applicationCache.moduleCategoryRegistry.subscribeToCollectionChanges(function(e){if(e.type===0){var t=a.paletteViewModel.categories(),n=e.key,r=new h.PaletteCategory(n,x.CategoryType.Module,a.workspace.moduleCache,a.workspace.applicationCache.moduleCategoryRegistry.lookup(n));for(var i=0;i<t.length;i++){var s=t[i];if(s.type===x.CategoryType.Module&&n.localeCompare(s.name())<0||i===t.length-1){a.paletteViewModel.categories.valueWillMutate(),t.splice(i,0,r),a.paletteViewModel.categories.valueHasMutated();break}}}}),this.alertHandler=null,this.experiment.setDraftState(!s),this.experiment.experimentId(s),this.paletteIsCollapsed=ko.observable(!1),this.experimentId=ko.observable(s),s||(this.experiment.dirtyStatus.startDirtying(),this.experiment.dirtyForPublishStatus.startDirtying(),L.featureUsage({featureID:233,groupID:233,experimentID:this.experiment.experimentIdForLogging})),this.descriptionFocus=ko.observable(!0),this.userWorkspaceExperiment=ko.computed(function(){return a.experiment.experimentId()?a.experiment.experimentId().split(".")[0]===a.workspace.id:!0}),this.readOnlyMode=ko.computed(function(){return!a.experiment.isLeaf()||!a.userWorkspaceExperiment()||a.experiment.statusCode()===S.State.Running||a.experiment.statusCode()===S.State.NotStarted}),ko.computed(function(){a.experimentEditorViewModel.experimentViewModel().readOnlyMode(a.readOnlyMode()),a.experimentPropertyTab.readOnlyMode(a.readOnlyMode())}),this.experimentEditorViewModel.registerEntityActivationEvent(this.activateEntity.bind(this)),this.experimentEditorViewModel.registerCloneHandler(function(){a.clone()}),this.experimentPropertyTab.navigateToParent.subscribe(function(){a.navigateToParent()}),this.experimentPropertyTab.navigateToWebService.subscribe(function(){a.navigateToWebService()}),this.refreshExperimentHandler=null,this.searchText.extend({rateLimit:{timeout:400,method:"notifyWhenChangesStop"}}).subscribe(function(e){L.featureUsage({featureID:17,groupID:16,experimentID:a.experiment.experimentIdForLogging,data:e}),a.paletteViewModel.applyPaletteSearch(e)});var c=null;this.registerForDisposal(new T.DisposableSubscription(this.experimentEditorViewModel.selectionManager.selectedGraphNodes.subscribeToCollectionChanges(function(){var e=a.experimentEditorViewModel.selectionManager.selectedGraphNodes;c&&c instanceof f.Module&&(c.startValidating(),c.updateValidState()),e.count()===1?(c=B.first(e(),function(e){return e instanceof f.Module||e instanceof i.Dataset||e instanceof m.TrainedModel||e instanceof g.Transform||e instanceof y.WebServicePort},null),c?a.experimentPropertyTab.setNode(c):a.experimentPropertyTab.clearModuleParameters()):(a.experimentPropertyTab.clearModuleParameters(),c=null)})),new T.DisposableSubscription(this.experimentEditorViewModel.newExperimentLoaded.subscribe(function(){a.experimentPropertyTab.experiment(a.experimentEditorViewModel.experiment),a.experiment.isDraft()&&a.promptForUpgradeIfNodesAreEligible()}))),this.endpointDownloader.endpointTooBig.subscribe(function(){var e=k.viewModelDataTooLarge;a.alertHandler?a.alertHandler(e):alert(e)}),this.nodesEligibleForUpgradeHandler=function(e){L.info("Nodes are eligible for upgrade in the current experiment, but no prompt handler is installed.")},this.projectViewModel=new d.ProjectViewModel(t,function(){return a.experiment}),this.experimentPropertyTab.setProjectExperimentLocator(this.projectViewModel)}return __extends(t,e),Object.defineProperty(t.prototype,"experiment",{get:function(){return this.experimentEditorViewModel?this.experimentEditorViewModel.experimentViewModel().experiment:null},enumerable:!0,configurable:!0}),t.prototype.registerNavigateToParentHandler=function(e){this.navigateToParentHandler=e},t.prototype.registerNavigateToWebServiceHandler=function(e){this.navigateToWebServiceHandler=e},t.prototype.registerOutputPromotionProgressHandler=function(e){this.outputPromotionProgressHandler=e},t.prototype.registerNodeUpgradeEligibilityHandler=function(e){this.nodesEligibleForUpgradeHandler=e},t.prototype.registerAlertHandler=function(e){this.alertHandler=e},t.prototype.registerCannotSaveDraftHandler=function(e){this.cannotSaveDraftHandler=e},t.prototype.refreshExperiment=function(){return this.experimentEditorViewModel.refreshExperiment()},t.prototype.startAutoRefresh=function(){this.experimentEditorViewModel.startAutoRefresh()},t.prototype.loadFromService=function(e){var t=this,n=$.Deferred();if(this.graphFetcher&&this.experimentId()){var r=this.graphFetcher.loadFromService(this.experimentId(),e);r.done(function(e){t.descriptionFocus(!0),t.onRefreshFromNewExperiment&&(e.onRefreshFromNewExperiment=t.onRefreshFromNewExperiment),t.experimentEditorViewModel.experiment=e,t.experimentPropertyTab.experiment(t.experimentEditorViewModel.experiment),e.experimentParameterInUse&&(t.alertHandler(k.experimentParameterDeletedNotification),e.experimentParameterInUse=!1,L.featureUsage({featureID:51,groupID:43,experimentID:t.experiment.experimentIdForLogging})),N.canvasAnnotationsEnabled()&&t.experiment.experimentId().split(".")[0]===t.workspace.id&&t.workspace.getExperimentAnnotationsAsync(t.experimentId()).fail(function(e){var n={title:k.annotationsCouldNotBeLoaded,details:e.message};e instanceof B.AjaxError&&e.xmlHttpRequest&&(n.details=n.details+" "+e.xmlHttpRequest.responseText),B.showErrorNotification(n),L.customEvent({key:"GetAnnotationsFailed",type:"GetAnnotation",experimentID:t.experiment.experimentIdForLogging}),L.exception(e,"GetAnnotationsFailed","GetAnnotation",t.experiment.experimentId())}).done(function(n){L.customEvent({key:"GetAnnotationsSucceeded",type:"GetAnnotation",experimentID:t.experiment.experimentIdForLogging}),e.setAnnotationNodes(n)}),n.resolve()}).fail(function(e){n.reject(e)})}else n.resolve();return B.when(n)},t.prototype.navigateToParent=function(){var e=this.experimentEditorViewModel.experiment.parentExperimentId;this.experimentEditorViewModel.rememberExperimentPosition(this.experimentEditorViewModel.experiment.experimentId()),this.navigateToParentHandler(e)},t.prototype.navigateToWebService=function(){var e=this.experimentEditorViewModel.experiment.publishedWebServiceGroupId;this.navigateToWebServiceHandler(e)},t.prototype.clone=function(e){this.experiment.isDraft()||(this.experiment.dirtyStatus.stopDirtying(),this.experiment.dirtyForPublishStatus.stopDirtying(),this.experiment.parentExperimentId=this.experiment.experimentId(),this.experimentEditorViewModel.parentExperimentId(this.experiment.parentExperimentId),this.createExperimentCopy(e)),L.info("Starting editing the experiment after cloning","ExperimentEditorContainerViewModel.clone",this.experiment.experimentId())},t.prototype.copy=function(e,t){var n=this;e===void 0&&(e=""),t===void 0&&(t=!1),this.experiment.dirtyStatus.stopDirtying(),this.experiment.dirtyForPublishStatus.stopDirtying(),this.experimentEditorViewModel.stopAutoRefresh(),this.experimentEditorViewModel.experimentViewModel().experimentProperties.remove(function(e){return e.property===n.experiment.priorRunLinkProperty||e.property===n.experiment.publishedWebServiceLinkProperty}),this.experiment.nodes.forEach(function(e){e instanceof A.ModuleNode&&e.statusCode.value(S.State.NotStarted)});if(t){var r=this.experiment.tags().filter(function(e){return!x.GalleryUriTagRegExp.test(e)});this.experiment.tags(r)}if(N.competitionExperimentSupportEnabled()){var i=this.experiment.tags();i.some(function(e){return a.CompetitionConstants.CompetitionUrlTagSearchRegex.test(e)})&&(Array.prototype.push.apply(i,[a.CompetitionConstants.GalleryUriTagPrefix+this.experiment.originalExperimentDocumentation.value()]),this.experiment.tags(i))}this.experiment.parentExperimentId=null,this.createExperimentCopy(),this.experiment.publishedWebServiceGroupId=null,this.experiment.trainingExperimentId=null,this.experimentEditorViewModel.parentExperimentId(null),this.experiment.description(e),this.projectViewModel.init(),L.info("Starting editing the experiment after copying","ExperimentEditorContainerViewModel.copy",this.experiment.experimentId())},t.prototype.createExperimentCopy=function(e){this.experiment.experimentId(null),this.experimentId(null),this.experiment.setDraftState(!0),this.experiment.isLeaf(!0),this.experiment.publishedModelPackageId=null,e||this.promptForUpgradeIfNodesAreEligible(),this.experiment.dirtyStatus.startDirtying(),this.experiment.dirtyStatus.dirty(),this.experiment.dirtyForPublishStatus.startDirtying()},t.prototype.submit=function(e){var t=this;return this.experimentEditorViewModel.draftStateMachine.submitExperiment(e).done(function(){t.projectDetailsTab&&t.projectDetailsTab.updateProjectIfChanged()})},t.prototype.update=function(){var e=this;return this.experimentEditorViewModel.draftStateMachine.updateExperiment().done(function(){e.projectDetailsTab&&e.projectDetailsTab.updateProjectIfChanged()})},t.prototype.publish=function(){return this.workspace.publishExperimentAsync(this.experiment)},t.prototype.save=function(e){var t=this;e===void 0&&(e=!1);var n=this.experiment.saveError();return n?(this.cannotSaveDraftHandler(n),B.fail(new Error(n))):(!this.readOnlyMode()&&!e&&this.clone(),this.experimentEditorViewModel.draftStateMachine.saveDraft().done(function(){t.projectDetailsTab&&t.projectDetailsTab.updateProjectIfChanged();if(e){var n=t.experiment.getAnnotations();if(n.length>0){var r=n.map(function(e){return e.annotation}),i=n.map(function(e){return t.experimentEditorViewModel.experimentViewModel().getViewModelForNode(e)});t.workspace.addExperimentAnnotationsAsync(t.experiment.experimentId(),r).done(function(e){e.forEach(function(e){var n=new E(e);t.experiment.addNode(n,n.x(),n.y())})}).fail(function(e){L.customEvent({key:"AddAnnotationsFailed",type:"addNewAnnotationsOnSaveAs",data:e}),L.exception(e,"AddAnnotationsFailed","addNewAnnotationsOnSaveAs");var t={title:k.annotationsCouldNotBeAddedOnSaveAs,details:e.message};e instanceof B.AjaxError&&e.xmlHttpRequest&&(t.details=t.details+" "+e.xmlHttpRequest.responseText),B.showErrorNotification(t)}).always(function(){i.forEach(function(e){e.remove()})})}}else t.experimentEditorViewModel.draftStateMachine.updateAnnotations()}))},t.prototype.discard=function(){var e=this;return this.projectViewModel&&this.projectViewModel.findExperiment(function(t){return t.experimentId()===e.experiment.experimentId()&&t.role===D.ExperimentRole.Scoring})&&L.featureUsage({featureID:78,groupID:72,experimentID:this.experiment.experimentIdForLogging}),this.experimentEditorViewModel.draftStateMachine.discardDraft()},t.prototype.cancel=function(){return this.workspace.cancelExperimentAsync(this.experiment.experimentId())},t.prototype.firstTimePublishWebService=function(e){var t=this,n=$.Deferred(),r=function(e){return n.reject(e)},i=[];if(N.competitionExperimentSupportEnabled()&&this.experimentEditorViewModel.experimentViewModel().isCompetitionExperiment()){var s=this.experimentEditorViewModel.experimentViewModel().experiment;Array.prototype.push.apply(i,s.getTag(a.CompetitionConstants.CompetitionUrlTagSearchRegex)),Array.prototype.push.apply(i,s.getTag(a.CompetitionConstants.CompetitionTenantIdSearchRegex)),Array.prototype.push.apply(i,s.getTag(a.CompetitionConstants.GalleryUriTagSearchRegex))}return this.workspace.createWebServiceGroupAsync(e,k.webServiceGroupDefaultDescription,!1,i).done(function(e){var r=function(r){t.workspace.deleteWebServiceGroupAsync(e);var i=null;if(r.xmlHttpRequest!==null&&r.xmlHttpRequest!==undefined&&r.xmlHttpRequest.status>=400)try{var s=$.parseXML(r.xmlHttpRequest.responseText),o=s.querySelector("Error");if(o!==null){var u=o.querySelector("ErrorCode"),a=o.querySelector("MessageDetail"),f=o.querySelector("Message"),l=s.querySelector("ExceptionMessage");if(u!==null)if(u.textContent==="UnsupportedModuleType"){var c=a!==null?a.textContent:"";i=B.format(k.publishWebServiceUnsupportedModule,c)}else u.textContent==="MixedVersions"?i=k.publishWebServiceModuleVersionIsOld:i=u.textContent;else i=(f!==null?f.textContent+" ":"")+(l!==null?l.textContent:"")}}catch(h){}i!==null?(i+=B.ajaxErrorMetas(r).join(", "),n.reject(new B.AjaxError(i,r.xmlHttpRequest))):n.reject(r)},i=function(i){i.xmlHttpRequest&&i.xmlHttpRequest.status==400?(t.workspace.deleteWebServiceGroupAsync(e),n.reject(new B.AjaxError(k.publishWebServiceErrorWithTooManyColumns,i.xmlHttpRequest))):r(i)};t.workspace.createModelPackageAsync(e,t.experiment,t.workspace).done(function(i){t.workspace.registerWebServiceAsync(e,i).done(function(s){t.experiment.publishedWebServiceGroupId=e,t.experiment.publishedModelPackageId=i,t.workspace.updateDraftAsync(t.experiment).done(function(){n.resolve(e,i,s)}).fail(r)}).fail(r)}).fail(i)}).fail(r),B.when(n)},t.prototype.republishWebService=function(e,t){var n=this,r=$.Deferred(),i=function(e){return r.reject(e)};return B.then(this.workspace.createModelPackageAsync(e,this.experiment,this.workspace),function(s){return B.then(n.workspace.updateWebServiceAsync(e,t,s,null,null),function(){return n.experiment.publishedModelPackageId=s,B.then(n.workspace.updateDraftAsync(n.experiment),function(e){r.resolve(s)},i)},i)},i),B.when(r)},t.prototype.publishExperimentToCommunity=function(e,t,n){var r=this;t===void 0&&(t=null);var i=this.packageExperimentForPublishing(n),s=B.then(i,function(i){return r.workspace.createCommunityExperimentAsync(e,i.Location,t,n)});return B.then(s,function(e){return e})},t.prototype.publishCustomModuleToCommunity=function(e,t,n){var r=this;t===void 0&&(t=null);var i=this.packageExperimentForPublishing(n),s=B.then(i,function(i){return r.workspace.createCommunityCustomModuleAsync(e,i.Location,t,n)});return B.then(s,function(e){return e})},t.prototype.validate=function(){var e=this,t=this.experimentEditorViewModel.experiment.validate(),n=!1;this.experimentEditorViewModel.experimentViewModel().experimentNodes.forEach(function(e){e.updateValidState()});if(t.length>0)if(t[0].erroneousObject instanceof C.GraphNode){var r=t[0].erroneousObject,i=this.experimentEditorViewModel.experimentViewModel().getViewModelForNode(r),s=this.experimentEditorViewModel.animationComplete.subscribe(function(){i.forceBalloon.notifySubscribers(null),s.dispose()});this.experimentEditorViewModel.selectionManager.modifySelection(function(){e.experimentEditorViewModel.selectionManager.resetSelection(),e.experimentEditorViewModel.selectionManager.selectEntity(i)}),this.experimentEditorViewModel.needsAnimationToNode.notifySubscribers(r),n=!0}else if(t[0].erroneousObject instanceof M.ModuleNodeParameter){var o=t[0].erroneousObject;this.experimentPropertyTab.navigateToParameter(o),n=!0}else if(t[0].erroneousObject instanceof M.WebServiceParameter){var o=t[0].erroneousObject;this.experimentPropertyTab.navigateToParameter(o),n=!0}else t[0].erroneousObject===this.experiment.description&&(this.descriptionFocus(!0),n=!0);return{allErrors:t,unhandledErrors:n?t.slice(1):t,valid:t.length===0}},t.prototype.packageExperimentForPublishing=function(e){var t;return N.packingGeoPath()?t=B.then(F.workspace.createExperimentStoragePackageForCommunityAsync(this.experimentId(),!0,this.experiment.description(),e),function(e){return c.pollOnPack(e)}):t=B.then(F.workspace.createExperimentStoragePackageAsync(this.experimentId(),!0,this.experiment.description(),e),function(e){return c.pollOnPack(e)}),t},t.prototype.promoteOutputToDataset=function(e){var t=this,n=new H.UnsavedResource(this.workspace,this.workspace.datasetCache,this.workspace.datasetUploadsInProgress,x.DatasetName),r=new l.OutputPromotionDialogViewModel(e,n,this.workspace.datasetCache,this.workspace.promoteOutputToDatasetAsync.bind(this.workspace)),i=r.resourcePromotionStartedEvent.subscribe(function(e){t.outputPromotionProgressHandler&&t.outputPromotionProgressHandler(e),i.dispose()});s.OutputPromotion.show(r)},t.prototype.promoteOutputToModel=function(e){var t=this,n=new H.UnsavedResource(this.workspace,this.workspace.trainedModelCache,this.workspace.trainedModelUploadsInProgress,x.TrainedModelName),r=new l.OutputPromotionDialogViewModel(e,n,this.workspace.trainedModelCache,this.workspace.promoteOutputToTrainedModelAsync.bind(this.workspace)),i=r.resourcePromotionStartedEvent.subscribe(function(e){t.outputPromotionProgressHandler&&t.outputPromotionProgressHandler(e),i.dispose()});s.TrainedModelPromotion.show(r)},t.prototype.promoteOutputToTransform=function(e){var t=this,n=new H.UnsavedResource(this.workspace,this.workspace.transformModulesCache,this.workspace.transformModuleUploadsInProgress,x.TransformModuleName),r=new l.OutputPromotionDialogViewModel(e,n,this.workspace.transformModulesCache,this.workspace.promoteOutputToTransformModuleAsync.bind(this.workspace)),i=r.resourcePromotionStartedEvent.subscribe(function(e){t.outputPromotionProgressHandler&&t.outputPromotionProgressHandler(e),i.dispose()});s.TransformModulePromotion.show(r)},t.prototype.promoteCreateWebService=function(e){var t=this,n=new r.CreateWebServiceFromTrainedModelDialogViewModel(this.experiment.description()+" (Scoring)",function(n,r){t.createTrainedModelAndWebServiceGraph(n,r,e)});s.CreateWebServiceFromTrainedModel.show(n)},t.prototype.createTrainedModelAndWebServiceGraph=function(e,t,n){var r=this;Shell.UI.Spinner.show(),this.workspace.promoteOutputToTrainedModelAsync(n.portModel,e,"",t).done(function(t){r.copy(e),r.experimentEditorViewModel.selectionManager.resetSelection(),r.experimentEditorViewModel.selectionManager.selectEntity(n.parent);var i=r.experimentEditorViewModel.addTrainedModelById(t.id,50,200),s=B.first(r.experimentEditorViewModel.moduleCache.items(),function(e){return e.familyId.indexOf(x.WellKnownResource.ScoreGenericModuleFamilyId)>-1});if(s){var o=r.experimentEditorViewModel.addModuleById(s.id,50,300),u=B.first(o.inputPorts),a=B.first(i.outputPorts);u.portModel.connectTo(a.portModel)}r.save();var f=$("<div/>").fxsWizard(),l=f.fxsWizard("getViewModel"),c=new $.fxs.fxsWizard.WizardStep;c.content(ExperimentEditorTemplates._createWebServiceTutorialStep1Markup);var h=new $.fxs.fxsWizard.WizardStep;h.content(ExperimentEditorTemplates._createWebServiceTutorialStep2Markup);var p=new $.fxs.fxsWizard.WizardStep;p.content(ExperimentEditorTemplates._createWebServiceTutorialStep3Markup),l.steps.push(c),l.steps.push(h),l.steps.push(p),l.currentStep(c),f.fxsWizard("open"),Impl.UI.Dialogs.ModalPresenter.open(f)}).fail(function(e){r.alertHandler&&r.alertHandler(e.message)}).always(function(){Shell.UI.Spinner.hide()})},t.prototype.createTransformAndWebServiceGraph=function(e,t,n){var r=this;Shell.UI.Spinner.show(),this.workspace.promoteOutputToTransformModuleAsync(n.portModel,e,"",t).done(function(t){r.copy(e),r.experimentEditorViewModel.selectionManager.resetSelection(),r.experimentEditorViewModel.selectionManager.selectEntity(n.parent);var i=r.experimentEditorViewModel.addTransformById(t.id,50,200),s=B.first(r.experimentEditorViewModel.moduleCache.items(),function(e){return e.familyId.indexOf(x.WellKnownResource.TransformFamilyId)>-1});if(s){var o=r.experimentEditorViewModel.addModuleById(s.id,50,300),u=B.first(o.inputPorts),a=B.first(i.outputPorts);u.portModel.connectTo(a.portModel)}r.save();var f=$("<div/>").fxsWizard(),l=f.fxsWizard("getViewModel"),c=new $.fxs.fxsWizard.WizardStep;c.content(ExperimentEditorTemplates._createWebServiceTutorialStep1Markup);var h=new $.fxs.fxsWizard.WizardStep;h.content(ExperimentEditorTemplates._createWebServiceTutorialStep2Markup);var p=new $.fxs.fxsWizard.WizardStep;p.content(ExperimentEditorTemplates._createWebServiceTutorialStep3Markup),l.steps.push(c),l.steps.push(h),l.steps.push(p),l.currentStep(c),f.fxsWizard("open"),Impl.UI.Dialogs.ModalPresenter.open(f)}).fail(function(e){r.alertHandler&&r.alertHandler(e.message)}).always(function(){Shell.UI.Spinner.hide()})},t.prototype.activateEntity=function(e,t){var n=null;if(e instanceof p.OutputPort){var r=e.parent;if(r instanceof f.Module&&P.isFinishedState(r.moduleNode.statusCode.value())===!1)return;if(r.graphNodeType===1||r.graphNodeType===2||r.graphNodeType===4)n=e.portModel.outputEndpoint,L.featureUsage({featureID:18,groupID:0,experimentID:this.experiment.experimentIdForLogging,data:JSON.stringify({port:e.portModel.name,isModule:r.isModule(),nodeType:r.graphNodeType,nodeName:r.graphNode.name})});else if(e.portModel.isVisualizable())this.endpointDownloader.visualize(e.portModel,this.workspace,e.parent.isModule());else if(!(e.parent instanceof f.Module&&r.statusCode.property.value()===S.State.Running))if(e.portModel.descriptor.allowedDataTypes.some(function(e,t,n){return e.dataTypeId==="ILearnerDotNet"||e.dataTypeId==="IClusterDotNet"}))if(N.authorizeDownloadILearnerEnabled())n=e.portModel.outputEndpoint;else{var i=new Shell.UI.Notifications.Notification(k.cannotDownloadThisTypeOfData,"error");i.setActions([Shell.UI.Notifications.Buttons.close(function(){})]),Shell.UI.Notifications.add(i),L.customEvent({key:"TentativeToDownloadUnauthorizedDataType",type:"DownloadData"})}else if(e.portModel.descriptor.allowedDataTypes.some(function(e,t,n){return e.dataTypeId==="ITransformDotNet"}))if(N.authorizeDownloadILearnerEnabled())n=e.portModel.outputEndpoint;else{var i=new Shell.UI.Notifications.Notification(k.cannotDownloadThisTypeOfData,"error");i.setActions([Shell.UI.Notifications.Buttons.close(function(){})]),Shell.UI.Notifications.add(i),L.customEvent({key:"TentativeToDownloadUnauthorizedDataType",type:"DownloadData"})}else n=e.portModel.outputEndpoint,L.featureUsage({featureID:18,groupID:0,experimentID:this.experiment.experimentIdForLogging,moduleID:r.isModule()&&r.graphNode.module_.id,data:JSON.stringify({port:e.portModel.name,isModule:r.isModule(),nodeType:r.graphNodeType,nodeName:r.graphNode.name})})}n&&this.endpointDownloader.download(n)},t.prototype.promptForUpgradeIfNodesAreEligible=function(){if(!this.experiment.disableNodesUpdate()){var e=this.experiment.findNodesEligibleForUpgrade();if(e.length>0){var t=e.some(function(e){return e instanceof A.ModuleNode&&!e.module_.isLatestClientVersion});if(t)L.info("The current graph contains nodes eligible for upgrade. The user will be prompted to upgrade them.","ExperimentEditorContainerViewModel.promptForUpgradeIfNodesAreEligible",{eligibleNodeCount:e.length}),this.nodesEligibleForUpgradeHandler(e);else{L.info("The current graph contains nodes eligible for upgrade. The graph will be updated.","ExperimentEditorContainerViewModel.promptForUpgradeIfNodesAreEligible",{eligibleNodeCount:e.length});var n=this.workspace;this.experiment.upgradeNodes(n.moduleCache,n.datasetCache,n.trainedModelCache,n.transformModulesCache,n)}}}},t.prototype.buildPaletteCategories=function(){var e=this,t=[],n=this.workspace.applicationCache.datasetCategoryRegistry.lookup(x.ResourceCategory.Dataset);t.push(new h.PaletteCategory(x.ResourceCategory.Dataset,x.CategoryType.Dataset,this.workspace.datasetCache,n)),t.push(new h.PaletteCategory(x.ResourceCategory.TrainedModel,x.CategoryType.TrainedModel,this.workspace.trainedModelCache)),t.push(new h.PaletteCategory(x.ResourceCategory.Transform,x.CategoryType.Transform,this.workspace.transformModulesCache));var r=this.workspace.applicationCache.moduleCategoryRegistry.keys().sort(),i=x.ResourceCategory.Deprecated;r=r.filter(function(e){return e!=i}),r.forEach(function(n){t.push(new h.PaletteCategory(n,x.CategoryType.Module,e.workspace.moduleCache,e.workspace.applicationCache.moduleCategoryRegistry.lookup(n)))});var s=_.find(t,function(e){return e.name()===x.ResourceCategory.WebService});return s||(s=new h.PaletteCategory(x.ResourceCategory.WebService,x.CategoryType.Module),t.push(s)),s.items.push(new h.PaletteItem(j.WebServicePortType[0],k.webServiceInputNodeInPaletteName,k.webServiceInputNodeInPaletteDescription,a.EntityType.WebServicePort),new h.PaletteItem(j.WebServicePortType[1],k.webServiceOutputNodeInPaletteName,k.webServiceOutputNodeInPaletteDescription,a.EntityType.WebServicePort)),t.push(new h.PaletteCategory(null,x.CategoryType.Module,this.workspace.moduleCache)),t.push(new h.PaletteCategory(i,x.CategoryType.Module,this.workspace.moduleCache,this.workspace.applicationCache.moduleCategoryRegistry.lookup(i))),t},t}(T.Disposable);t.ExperimentEditorContainerViewModel=I});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/ExperimentProcessor/TrainedModelExperimentUpdateProcessor",["require","exports","../../../../TS/ViewModel/Operations/ModelHelpers","../../../../TS/ViewModel/Operations/ExperimentProcessor/TrainedModelExperimentProcessorBase","../../../../../DataLabClient/LocalizedResources","../../../../../DataLabClient/Model/ModuleNode","../../../../../DataLabClient/Model/TrainedModelNode","../../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.preProcess=function(t,n){return this.trainingExperiment=t,e.prototype.preProcess.call(this,t,n)},t.prototype.process=function(t,r){var s=n.ModelHelpers.parseExperimentFamilyId(this.trainingExperiment.experimentId()),a=n.ModelHelpers.searchTrainedModelInScoreGraph(t,s);try{if(!a)throw new Error(i.experimentProcessorErrorNoMatchingTrainedModel);var f=new o(this.trainedModel),l=u.first(a.outputPorts,undefined,null);if(!l)throw new Error(i.experimentProcessorErrorNoOutputPortsOld);var c=u.first(l.connectedPorts(),undefined,null);if(!l)throw new Error(i.experimentProcessorErrorOutputNotConnected);var h=c.parent,p=u.values(h.ports).map(function(e){return u.first(e.connectedPorts(),undefined,null)}).filter(function(e){return e!==null}),d={};a.replaceWith(f,d);if(!u.isEmpty(d)){var v=this.createCompatibleScoreModule(this.trainedModelPort);if(!v)throw new Error(i.experimentProcessorErrorNoCompatibleScorerFound);h.replaceWith(v,d);var m=u.first(f.outputPorts,undefined,null);if(!m)throw new Error(i.experimentProcessorErrorNoOutputPortsNew);this.fixConnections(v,p.concat([m]))}return e.prototype.process.call(this,t,r)}catch(g){return r.asyncOperation.reject(g)}},t.prototype.createCompatibleScoreModule=function(e){var t=n.ModelHelpers.findCompatibleModule(this.workspace,this.supportedScoreModuleFamilyId,this.trainedModelPort);if(!t)return null;var r=new s.ModuleNode(t,this.workspace);return n.ModelHelpers.setColumnSelectionParameterToAll(r),r},t.prototype.fixConnections=function(e,t){var n=u.filter(e.ports,function(e){return e.connectedPorts.count()===0});t=u.filter(t,function(e){return e.connectedPorts.count()===0}),n.forEach(function(e){var n=u.first(t,function(t){return e.isCompatible(t)},null);n&&(e.connectTo(n),t.splice(t.indexOf(n),1))})},t}(r.TrainedModelExperimentProcessorBase);t.TrainedModelExperimentUpdateProcessor=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/ExperimentProcessor/TransformModuleExperimentUpdateProcessor",["require","exports","../../../../TS/ViewModel/Operations/ModelHelpers","../../../../TS/ViewModel/Operations/ExperimentProcessor/TransformModuleExperimentProcessorBase","../../../../../DataLabClient/Model/TransformNode","../../../../../DataLabClient/Util"],function(e,t,n,r,i,s){var o=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.preProcess=function(t,n){return this.trainingExperiment=t,e.prototype.preProcess.call(this,t,n)},t.prototype.process=function(t,r){var s=n.ModelHelpers.parseExperimentFamilyId(this.trainingExperiment.experimentId());return $.each(this.transformResources,function(e,r){var o=n.ModelHelpers.searchTransformNodeInScoreGraph(t,s,r);if(o){var u=new i(r);o.replaceWith(u,{})}}),e.prototype.process.call(this,t,r)},t.prototype.postProcess=function(e,t){return s.when("")},t}(r.TransformModuleExperimentProcessorBase);t.TransformModuleExperimentUpdateProcessor=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Operations/UpdateScoringGraphOperation",["require","exports","../../../TS/ViewModel/Operations/AsyncOperation","../../../TS/ViewModel/Operations/ExperimentProcessor/Context","../../../DataLabViews/ExperimentView","../../../TS/ViewModel/Operations/ExperimentProcessor/TrainedModelExperimentUpdateProcessor","../../../TS/ViewModel/Operations/ExperimentProcessor/TransformModuleExperimentUpdateProcessor","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Contracts/V1/Common/Project","../../../../DataLabClient/Logging/IfxScenarioStopWatch"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=function(e){function t(t,n){e.call(this),t&&this.initialize(t,n)}return __extends(t,e),t.prototype.initialize=function(e,t){var n=this;this.experimentContainerViewModel=e,this.experiment=e.experiment,this.experimentEditorViewModel=e.experimentEditorViewModel,this.workspace=e.workspace,this.projectViewModel=e.projectViewModel,this.xeControlContainer=t,this.context=new r.Context,this.context.workspace=this.workspace,this.context.experimentEditorViewModel=e.experimentEditorViewModel,this.context.asyncOperation=this,this.processors=[new s.TrainedModelExperimentUpdateProcessor(this.workspace),new o.TransformModuleExperimentUpdateProcessor(this.workspace)],this.isRunning.subscribe(function(e){e?n.xeControlContainer.block():n.xeControlContainer.unblock()})},t.prototype.runAsync=function(){var t=this,n={tags:this.experiment.tags()};f.featureUsage({featureID:75,groupID:72,experimentID:this.experiment.experimentIdForLogging,data:n});var r=new c.IfxScenarioStopWatch(12,n);return r.start(),Shell.UI.Spinner.show(),e.prototype.runAsync.call(this).fail(function(e){f.featureUsage({featureID:76,groupID:72,experimentID:t.experiment.experimentIdForLogging,data:e&&e.message}),r.error(e,u.SystemError)}).done(function(){var e=(new Date).getTime();r.stop()}).always(function(){Shell.UI.Spinner.hide()})},t.prototype.runInternalAsync=function(){var e=this;this.startProgress(a.updateScoringExperimentProgressTitle),this.addStep(a.retreivingScoringExperimentStepTitle);var t=this.projectViewModel.findExperiment(function(e){return e.role===l.ExperimentRole.Scoring});if(!t)return this.reject(new Error("No scoring graph found in the project."));if(t.experimentId()===this.experiment.experimentId())return this.reject(Error("One can only update scoring graph from its training graph."));var n=[],r=[];return this.processors.forEach(function(t){n.push(t.preProcess(e.experiment,e.context))}),this.workspace.getExperimentAsync(t.experimentId()).then(function(s){return $.when.apply($,n).then(function(){return e.addStep(a.lookingForTrainModuleStepTitle),e.processors.forEach(function(t){r.push(t.process(s,e.context))}),e.addStep(a.saveTrainModuleStepTitle),$.when.apply($,r)}).then(function(){return e.addStep(a.updateTrainedModelInScoringExperimentStepTitle),s.setDraftState(!0),e.workspace.updateDraftAsync(s)}).done(function(){Shell.UI.Navigation.navigate({extension:i.experimentExtensionName,type:i.ExperimentType.name,name:t.experimentId()})})})},t.prototype.isUpdatable=function(){var e=this.projectViewModel.findExperiment(function(e){return e.role===l.ExperimentRole.Scoring});return e?e.experimentId()===this.experiment.experimentId()?!1:!0:!1},t.prototype.isEnabled=function(){return this.experimentContainerViewModel.experiment.containsTrainingModule()&&!this.isRunning()&&this.isUpdatable()},t}(n.AsyncOperation);t.UpdateScoringGraphOperation=h});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Dialogs/ExperimentSaveAsDialogViewModel",["require","exports","../../../TS/ViewModel/Dialogs/CopyExperimentDialogViewModel","../../../TS/ViewModel/ExperimentEditor/CopyExperimentHelpers","../../../TS/ViewModel/Dialogs/TrialDialogs","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Trial","../../../../DataLabClient/Model/Workspace","../../../../DataLabClient/Util","../../../../DataLabClient/Logging/ClientInformationState"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=function(e){function t(t,r,i){function f(e){e.DisplayText=o.copyExperimentCurrentWorkspacePrefix+e.FriendlyName,u.destinationWorkspace(e),u.workspaceOptions.unshift(e)}var s=this;i===void 0&&(i=!1),e.call(this,t,r),this.experimentId=this.xeViewModel.experiment.experimentId()||this.xeViewModel.experiment.parentExperimentId,this._defaultAcceptAction=this.acceptAction,this._includeCurrent=i,this._canCopyToWorkspace=this._isSavedExperiment()&&!a.isWorkspaceTypeAnonymous();var u=this;if(this._includeCurrent&&this.xeViewModel){var l=e.prototype.getSourceWorkspaceOptionViewModel.call(this);if(l()){var c=l();f(c)}else l.subscribe(function(e){e&&f(e)})}this.destinationIsCurrentWorkspace=ko.pureComputed(function(){return s._includeCurrent&&s.destinationWorkspace()&&n.isCurrentWorkspace(s.destinationWorkspace())}),this.workspaceSelectorEnabled=ko.pureComputed(function(){return s._canCopyToWorkspace&&s.workspaceOptions().length>(s._includeCurrent?1:0)})}return __extends(t,e),t.prototype.dismissed=function(t){var i=this;if(n.isCurrentWorkspace(this.destinationWorkspace()))this.acceptAction=this._saveExperiment;else{if(!!c.keyVaultKeyIdentifier){l.showErrorNotification({title:o.errorCannotCopyEncryptedExperimentToOthersWorkspaces});return}this.acceptAction=function(){var e=i.xeViewModel.experiment;r.validateForCopyAsync(e).done(function(){i._defaultAcceptAction()})}}e.prototype.dismissed.call(this,t)},t.prototype.disableUnavailableOptions=function(e,t){var n=t.WorkspaceId===f.workspace.id;ko.applyBindingsToNode(e,{disable:!this._canCopyToWorkspace&&!n},t)},t.prototype._saveExperiment=function(){this.xeViewModel?(this.xeViewModel.copy(this.experimentName(),!0),this.xeViewModel.save(!0).fail(function(e){s.trialLimitationsEnabled()&&i.tryShowDialogForTrialRestriction(e)})):u.error("xeViewModel is null when attempting to save an experiment","ExperimentSaveAs")},t.prototype._isSavedExperiment=function(){var e=this.experimentId&&this.experimentId.lastIndexOf(window.environment.globalWorkspaceId,0)!==0;return e},t}(n.CopyExperimentDialogViewModel);t.ExperimentSaveAsDialogViewModel=h});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/ExperimentView",["require","exports","../TS/ViewModel/ExperimentEditor/CommunityHelpers","../TS/ViewModel/Operations/CreateScoringGraphOperation","../TS/ViewModel/Dialogs/CustomModuleAddedWarningDialogViewModel","../TS/ViewModel/ExperimentEditor/CustomUX","../DataLabViews/DataLabView","../TS/View/DialogViewFactories","../TS/ViewModel/ExperimentEditor/Entity","../TS/ViewModel/ExperimentEditor/EntityBaseV1","../TS/View/ExperimentEditorContainer","../TS/ViewModel/ExperimentEditor/ExperimentSaveAsViewModel","../TS/ViewModel/Operations/GuideTours","../TS/ViewModel/ExperimentEditor/Help","../TS/View/MarkdownEditor/MarkdownEditor","../TS/ViewModel/ExperimentEditor/Module","../TS/ViewModel/ExperimentEditor/PauseUserWithSpinnerViewModel","../TS/ViewModel/Operations/PrepareWebServiceOperation","../TS/ViewModel/ExperimentEditor/PublishToCommunityOnCompleteViewModel","../TS/ViewModel/ExperimentEditor/PublishToCommunityWizardViewModel","../TS/ViewModel/Dialogs/SynchronizeScriptVersionDialogViewModel","../TS/ViewModel/Dialogs/TrialDialogs","../TS/Common/WebServiceGroupUtilities","../TS/View/WizardView","../../DataLabClient/Contracts/V1/Constants","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Logging/Performance","../../DataLabClient/Contracts/V1/Common/Project","../../DataLabClient/StateUtil","../../DataLabClient/Trial","../../DataLabClient/Util","../../DataLabClient/Model/Workspace","../../DataLabClient/Logging/IfxScenarioStopWatch","../../DataLabClient/Logging/ClientInformationState"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B,j,F){function R(e,n,r){n===void 0&&(n=null),r===void 0&&(r=null);if(typeof n=="string"&&n.toLowerCase()!==B.workspace.id.toLowerCase()){var i=r||"";i=i+"/Home/ViewWorkspace/"+n;var s=Shell.UI.Navigation.calculateNavigationPath({extension:t.experimentExtensionName,type:"Experiment",name:e,view:"ViewExperiment"}),o=i+s;return o}return Shell.UI.Navigation.calculateNavigationPath({extension:t.experimentExtensionName,type:t.ExperimentType.name,name:e})}function U(e,n,r){n===void 0&&(n=null),r===void 0&&(r=null);if(n||r){var i=R(e,n,r);window.location.href=i}else Shell.UI.Navigation.navigate({extension:t.experimentExtensionName,type:t.ExperimentType.name,name:e})}function z(e){Shell.UI.Navigation.navigate({extension:t.experimentExtensionName,type:t.ExperimentLineageType.name,name:e})}function W(e){Shell.UI.Navigation.navigate({extension:t.dataflowExtensionName,type:t.DataflowType.name,name:e})}function V(e,t,n){var r=new X(e,t,n);return r.experimentViewPromise}var I=H.format,q=H.formatDataSize;t.experimentExtensionName="Experiments",t.dataflowExtensionName="Dataflows",t.ExperimentType={name:"Experiment",displayName:L.experiment,dataFunction:function(e,t,n){return{data:[{name:e.Experiment,displayName:e.Experiment}]}},draftExperimentId:"Draft"},t.ExperimentLineageType={name:"ExperimentLineage",displayName:L.runHistory,dataFunction:function(e,t,n){return{data:[{name:e.ExperimentLineage,displayName:e.ExperimentLineage}]}}},t.DataflowType={name:"Dataflow",displayName:L.dataflow,dataFunction:function(e,t,n){return{data:[{name:e.Dataflow,displayName:e.Dataflow}]}}},t.calculateNavigationPathToExperiment=R,t.navigateToExperiment=U,t.navigateToExperimentLineage=z,t.navigateToDataflow=W;var X=function(o){function B(n,i,s){var u=this;o.call(this,t.experimentExtensionName),this.runCommandShown=!0,this.projectViewModelListening=!1;var a=$.Deferred();this.experimentViewPromise=a.promise(),e(["../TS/ViewModel/ExperimentEditor/ExperimentEditorContainerViewModel","../TS/ViewModel/Operations/UpdateScoringGraphOperation"],function(e,o){u.notifications=[],A.info("Opening the experiment viewer","ExperimentView",i),u._renderArea=n,u._workspace=s,u.commandsDisabled=ko.observable(!1);var f=u._renderArea.querySelector("#ExperimentEditor");u.registerForDisposal(u.xeViewModel=new e.ExperimentEditorContainerViewModel(s,{loadFromService:function(e,t){return s.getExperimentAsync(e,t)}},i===t.ExperimentType.draftExperimentId?null:i),u.xeControlContainer=new l.ExperimentEditorContainer(f,u.xeViewModel)),u.xeViewModel.registerAlertHandler(function(e){var t=new Shell.UI.Notifications.Notification(e,"error");u.addNotification(t),t.setActions([Shell.UI.Notifications.Buttons.close(function(){H.removeElementFromArray(u.notifications,t)})])}),u.xeViewModel.registerOutputPromotionProgressHandler(function(e){var t=new Shell.UI.Notifications.Progress(L.promotionSavingIntermediateOutput,"active",!0);u.addNotification(t),e.done(function(e){t.setTitle(H.format(L.outputSavedAs,e.name())),t.setStatus("success"),t.setActions([Shell.UI.Notifications.Buttons.close(function(){H.removeElementFromArray(u.notifications,t)})])}).fail(function(e){if(k.trialLimitationsEnabled()&&E.tryShowDialogForTrialRestriction(e)){H.removeElementFromArray(u.notifications,t),Shell.UI.Notifications.remove(t);return}var n=H.getErrorDetails(e);t.setTitle(L.savingIntermediateOutputFailed+n),t.setStatus("error"),t.setActions([Shell.UI.Notifications.Buttons.close(function(){H.removeElementFromArray(u.notifications,t)})])})}),u.xeViewModel.registerNavigateToParentHandler(function(e){e&&U(e)}),u.xeViewModel.registerNavigateToWebServiceHandler(function(e){e&&S.navigateToWebService(u._workspace,e)});var c=function(e){u.upgradeNotificationOpen&&e.which===8&&e.preventDefault()};u.xeViewModel.registerNodeUpgradeEligibilityHandler(function(){var e=new Shell.UI.Notifications.Confirmation(L.autoUpgradeModulesAndDatasets,"active"),t=u.xeViewModel.experiment;u.upgradeNotificationOpen=!0;var n=function(){Shell.UI.Notifications.remove(e)};e.setActions([new Shell.UI.Notifications.Buttons.ok(function(){t===u.xeViewModel.experiment&&t.upgradeNodes(s.moduleCache,s.datasetCache,s.trainedModelCache,s.transformModules,s),u.upgradeNotificationOpen=!1,H.removeElementFromArray(u.notifications,e),A.featureUsage({featureID:1,groupID:0,experimentID:u.xeViewModel.experiment.experimentIdForLogging})})]),u.addNotification(e),A.customEvent({key:"Upgrade_Popup",type:"Experiment",experimentID:u.xeViewModel.experiment.experimentIdForLogging}),$(document).on("keydown",c)}),u.xeViewModel.registerCannotSaveDraftHandler(function(e){var t=new Shell.UI.Notifications.Confirmation(e,"active");t.setActions([new Shell.UI.Notifications.Buttons.ok(function(){H.removeElementFromArray(u.notifications,t)})]),u.addNotification(t)}),u._updateSidebarTitle(u.xeViewModel.experiment.description()),u.registerForDisposal(u.descriptionSubscription=new C.DisposableSubscription(u.xeViewModel.experiment.description.subscribe(function(){u._updateSidebarTitle(u.xeViewModel.experiment.description())})),new C.DisposableSubscription(u.xeViewModel.experimentEditorViewModel.newExperimentLoaded.subscribe(function(){u._updateSidebarTitle(u.xeViewModel.experiment.description()),u.descriptionSubscription.dispose(),u.registerForDisposal(u.descriptionSubscription=new C.DisposableSubscription(u.xeViewModel.experiment.description.subscribe(function(){u._updateSidebarTitle(u.xeViewModel.experiment.description())})))}))),u.createScoreGraphOperation=new r.CreateScoringGraphOperation(u.xeViewModel,u.xeControlContainer),u.updateScoreGraphOperation=new o.UpdateScoringGraphOperation(u.xeViewModel,u.xeControlContainer),u.xeViewModel.onRefreshFromNewExperiment=function(e,t){(e.statusCode()===T.State.Running||e.statusCode()===T.State.NotStarted)&&D.isFinishedState(t.statusCode())&&!k.animatedTourEnabled()&&(u.updateScoreGraphOperation.isEnabled()?h.GuideTours.showUpdatingScoringGraphCommandTour():u.createScoreGraphOperation.isEnabled()?h.GuideTours.showCreatingScoringGraphCommandTour():u.xeViewModel.experiment.isWebServiceExperiment()&&h.GuideTours.showPublishWebServiceCommandTour())},u.prepareWebServiceOperation=new g.PrepareWebServiceOperation(u.xeViewModel,u.xeControlContainer),u.upgradeNotificationOpen=!1,$(window).on("hashchange",function(){u.removeNotifications(),$(document).unbind("keydown",c),u.upgradeNotificationOpen=!1}),cdm.setActiveItem(u),document.querySelector("#tabcontainer .itemtitle").textContent="",a.resolve(u)})}return __extends(B,o),B.prototype.addNotification=function(e){this.notifications.push(e),Shell.UI.Notifications.add(e)},B.prototype.removeNotifications=function(){this.notifications.forEach(function(e){Shell.UI.Notifications.remove(e)})},B.prototype.validateExperiment=function(){var e=this,t=this.xeViewModel.validate();if(!t.valid&&t.unhandledErrors.length!==t.allErrors.length)return!1;if(t.unhandledErrors.length>0){if(t.unhandledErrors[0].errorMessages.length>0){var n=new Shell.UI.Notifications.Confirmation(t.unhandledErrors[0].errorMessages[0],"active");A.customEvent({key:"validateExperiment",type:"ErrorNotification",data:JSON.stringify(t.unhandledErrors[0].errorMessages[0])}),n.setActions([Shell.UI.Notifications.Buttons.close(function(){H.removeElementFromArray(e.notifications,n)})]),this.addNotification(n)}else A.error("Encountered an IObjectError with no error message");return!1}return!0},B.prototype.publish=function(){var e=this;A.info("Publishing experiment","ExperimentView:publish",this.xeViewModel.experiment.experimentId()),A.featureUsage({featureID:6,groupID:15,experimentID:this.xeViewModel.experimentId()});var t=window.location.hash;if(this.validateExperiment()){this.commandsDisabled(!0);var n=this.xeViewModel.experiment.isDraft()?this.xeViewModel.save():H.when();n.done(function(){e.xeViewModel.publish().done(function(n){e.xeViewModel.experimentEditorViewModel.rememberExperimentPosition(n),A.customEvent({key:"PublishAsDataflow",type:"ShellUICommands"}),window.location.hash===t&&W(n),e.commandsDisabled(!1)}).fail(function(t){if(t!=="CredentialValidationSUO6"){var n=H.getErrorDetails(t),r=new Shell.UI.Notifications.Notification(H.format(L.publishFailed,n),"error");r.setActions([Shell.UI.Notifications.Buttons.close(function(){H.removeElementFromArray(e.notifications,r)})]),e.addNotification(r),A.customEvent({key:"PublishAsDataflow_Failed",type:"ShellUICommands"})}e.commandsDisabled(!1)})})}},B.prototype.nodeWillRunAgain=function(e){if(e instanceof v.Module){var t=e;if(D.isFinishedState(t.moduleNode.statusCode.value())){if(t.moduleNode.module_.isDeterministic)return!1;if(t.moduleNode.usePreviousResults())return!1}return!0}return!1},B.prototype.findUpstreamNodes=function(e,t){var n=this,r=!1;return H.forEach(e.inputPorts,function(i){H.forEach(i.connections(),function(i){var s=i.outputPort.parent;t.indexOf(e)!==-1?r=!0:n.findUpstreamNodes(s,t)&&(r=!0)})}),!r&&this.nodeWillRunAgain(e)&&(r=!0),r&&t.indexOf(e)===-1&&t.push(e),r},B.prototype.findSelectedNodesAndTheirUpstreamNodes=function(){var e=this,t=Array();return this.xeViewModel.experimentEditorViewModel.selectionManager.selectedGraphNodes.forEach(function(n){e.findUpstreamNodes(n,t)}),t},B.prototype.setSelectedNodesIsPartOfPartialRun=function(e){var t=this.findSelectedNodesAndTheirUpstreamNodes();t.forEach(function(t){t.isPartOfPartialRun(e)})},B.prototype.runSelectedMouseOver=function(){this.setSelectedNodesIsPartOfPartialRun(!0)},B.prototype.runSelectedMouseOut=function(){this.setSelectedNodesIsPartOfPartialRun(!1)},B.prototype.submitSelected=function(){var e=this,t=this.xeViewModel.experimentEditorViewModel.findSelectedNodesAndTheirUpstreamNodes();H.forEach(t,function(t){var n=H.first(H.values(e.xeViewModel.experiment.nodes()),function(e){return t.graphNode.id===e.id});if(!n)throw new Error("Node "+t.graphNode.id+" not found in graph");n.isPartOfPartialRun=!0}),this.xeViewModel.experiment.isPartialRun(!0),this.submit()},B.prototype.submit=function(){var e=this,t=(new Date).getTime(),n={experimentId:this.xeViewModel.experiment.experimentIdForLogging,tags:this.xeViewModel.experiment.tags(),name:this.xeViewModel.experiment.description()};j.IfxScenario(7,0,n);var r=new j.IfxScenarioStopWatch(6,n);r.start(),A.info("Submitting experiment","ExperimentView:submit",this.xeViewModel.experiment.experimentId());var i=window.location.hash;if(this.validateExperiment()){var s=null;this.xeViewModel.experiment.dirtyAnnotationStatus.isDirty()&&(s=this.xeViewModel.experimentEditorViewModel.draftStateMachine.updateAnnotations(!0)),H.when(s).fail(function(e){}).always(function(){e.xeViewModel.experiment.statusCode()!==T.State.InDraft&&e.xeViewModel.clone(!0),e.commandsDisabled(!0),A.featureUsage({featureID:4,groupID:3,experimentID:e.xeViewModel.experimentId()}),Shell.UI.Spinner.show(),e.xeViewModel.submit(r).done(function(t){e.xeViewModel.experiment.setDraftState(!1),e.xeViewModel.experimentEditorViewModel.rememberExperimentPosition(t.ExperimentId),window.location.hash===i&&U(t.ExperimentId),e.commandsDisabled(!1),r.stop()}).fail(function(t){r.error(t,N.SystemError);var n=!1;k.trialLimitationsEnabled()&&(n=E.tryShowDialogForTrialRestriction(t));if(t instanceof H.AjaxError&&t.xmlHttpRequest&&t.xmlHttpRequest.status!==412&&!n){var i=N.ExperimentSubmissionFailedRegExp,s="",o=H.getErrorDetails(t),u="";if(i.test(t.xmlHttpRequest.responseText)){var a=t.xmlHttpRequest.responseText.match(i);o=a[1],s=a[2]}s===""?u=H.format(L.experimentSubmissionFailedNoRequestId,o):u=H.format(L.experimentSubmissionFailedWithRequestId,s,o);var f=new Shell.UI.Notifications.Notification(u,"error");f.setActions([Shell.UI.Notifications.Buttons.close(function(){H.removeElementFromArray(e.notifications,f)})]),e.addNotification(f),A.customEvent({key:"ExperimentSubmission_Failed",type:"ShellUICommands"})}e.xeViewModel.experiment.setDraftState(!0),e.commandsDisabled(!1)}).always(function(){Shell.UI.Spinner.hide()})})}else r.error(new Error("Invalid experiment"),N.UserError)},B.prototype.createScoringGraphCommand=function(){var e=this;this.updateScoreGraphOperation.initialize(this.xeViewModel,this.xeControlContainer),this.updateScoreGraphOperation.isUpdatable()?(this.commandsDisabled(!0),this.updateScoreGraphOperation.runAsync().always(function(){e.commandsDisabled(!1)})):(this.commandsDisabled(!0),this.createScoreGraphOperation.initialize(this.xeViewModel,this.xeControlContainer),this.createScoreGraphOperation.runAsync().always(function(){e.commandsDisabled(!1)}))},B.prototype.prepareWebServiceCommand=function(){if(this.xeViewModel.experiment.isWebServiceExperiment()){var e=$(".fxs-command-text").text();A.error("prepareWebService was ran while experiment was already a web service experiment",null,JSON.stringify({commands:e}));return}this.prepareWebServiceOperation.initialize(this.xeViewModel,this.xeControlContainer),this.prepareWebServiceOperation.runAsync()},B.prototype.handlePublishWebServiceCommand=function(){var e=this;if(!P.isWebServicePublishEnabled()){A.featureUsage({featureID:57,groupID:56,experimentID:this.xeViewModel.experimentId()}),E.showDisabledWebServicePublishDialog();return}var t=!0,n=this.xeViewModel.experiment;if(!n.allowPublish()){var r=L.cannotPublishDirtyExperiment,i=new Shell.UI.Notifications.Notification(r,"error");i.setActions([Shell.UI.Notifications.Buttons.close()]),Shell.UI.Notifications.add(i),A.customEvent({key:"PublishWebService_Error",type:"ShellUICommands",data:r});return}k.multiInputSupportEnabled()&&n.getPublishInputPorts().length>=1?t=!1:!k.multiInputSupportEnabled()&&n.getPublishInputPorts().length===1&&(t=!1);if(t){var s=L.confirmPublishWithoutPorts,o=new Shell.UI.Notifications.Confirmation(s,"active");o.setActions([new Shell.UI.Notifications.Buttons.yes(function(){Shell.UI.Notifications.remove(o),e.commandsDisabled(!0),e.launchPublishWebServiceDialog().always(function(){return e.commandsDisabled(!1)}),A.customEvent({key:"PublishWebService_Yes",type:"ShellUICommands"})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(o),A.customEvent({key:"PublishWebService_No",type:"ShellUICommands"})})]),Shell.UI.Notifications.add(o)}else{if(!n.validatePortsForPublishAndSetSubgraph()){var r=L.cannotPublishInvalidPublishPorts,i=new Shell.UI.Notifications.Notification(r,"error");i.setActions([Shell.UI.Notifications.Buttons.close()]),Shell.UI.Notifications.add(i),A.customEvent({key:"PublishWebService_Error",type:"ShellUICommands",data:r});return}this.commandsDisabled(!0),this.launchPublishWebServiceDialog().always(function(){return e.commandsDisabled(!1)}),A.customEvent({key:"PublishWebService",type:"ShellUICommands"})}},B.prototype.launchPublishWebServiceDialog=function(){var e=this,t=$.Deferred().resolve().promise(),n=this.xeViewModel.experiment.publishedWebServiceGroupId;return n?(Shell.UI.Spinner.show(),t=H.then(this.xeViewModel.workspace.getWebServiceGroupAsync(n).always(function(){return Shell.UI.Spinner.hide()}),function(t){var r=new Shell.UI.Notifications.Confirmation(H.format(L.publishWebServiceOverwritingConfirmationTitle,t.Name),"active");r.setDetailsText(L.publishWebServiceOverwritingConfirmationDetails),r.setActions([new Shell.UI.Notifications.Buttons.yes(function(){e.republishWebService(n,t.StagingWebService.Id),H.removeElementFromArray(e.notifications,r),A.customEvent({key:"PublishWebServiceLaunchDialogOverwritingService_Yes",type:"ShellUICommands"}),A.featureUsage({featureID:7,groupID:3,experimentID:e.xeViewModel.experimentId()})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(r),H.removeElementFromArray(e.notifications,r),A.customEvent({key:"PublishWebServiceLaunchDialogOverwritingService_No",type:"ShellUICommands"})})]),e.addNotification(r)})):(t=this.firstTimePublishWebService(this.xeViewModel.experiment.description()),A.featureUsage({featureID:5,groupID:3,experimentID:this.xeViewModel.experimentId()})),t},B.prototype.firstTimePublishWebService=function(e){var t=this;return Shell.UI.Spinner.show(),this.xeViewModel.firstTimePublishWebService(e).done(function(e,n,r){S.navigateToWebService(t._workspace,e,{"new":"true"})}).fail(function(e){t.showErrorNotification(L.publishWebServiceErrorConfirmationTitle,e.message)}).always(function(){Shell.UI.Spinner.hide()})},B.prototype.republishWebService=function(e,t){var n=this;return Shell.UI.Spinner.show(),this.xeViewModel.republishWebService(e,t).done(function(t){S.navigateToWebService(n._workspace,e)}).fail(function(e){n.showErrorNotification(L.publishWebServiceErrorConfirmationTitle,e.message)}).always(function(){Shell.UI.Spinner.hide()})},B.prototype.handlePublishExperimentCommand=function(){if(this.xeViewModel.readOnlyMode()){H.showErrorNotification({title:L.publishExperimentReadOnlyError});return}if(D.isFinishedState(this.xeViewModel.experiment.statusCode())===!1||this.xeViewModel.experiment&&this.xeViewModel.experiment.isPartialRun()){H.showErrorNotification({title:L.publishExperimentUnfinishedError});return}if(!P.isPublishToCommunityEnabled()){A.featureUsage({featureID:104,groupID:56,experimentID:this.xeViewModel.experimentId()}),E.showDisabledPublishToCommunityDialog();return}if(!!F.keyVaultKeyIdentifier){H.showErrorNotification({title:L.errorCannotPublishEncryptedExperimentToGallery});return}var e=this.xeViewModel.experiment,t=null,n,r=e.storageUsedByDatasets,i=e.firstCustomModule();if(i&&!k.publishCustomModulesToGalleryEnabled()){var s=L.publishExperimentToCommunityValidationError_CustomModule_Title;n=H.format(s,i.name),t=L.publishExperimentToCommunityValidationError_CustomModule_Message,A.customEvent({key:"PublishExperimentToCommunity_ValidationError",type:"ShellUICommands",data:n+" "+t})}else p.environment.communityDatasetStorageLimit>0&&r>p.environment.communityDatasetStorageLimit?(n=I(L.publishExperimentToCommunityValidationError_LargeDataset_Title,q(p.environment.communityDatasetStorageLimit)),A.customEvent({key:"PublishExperimentToCommunity_DatasetsValidationError",type:"ShellUICommands",data:n})):e.allowPublish()?(this.launchPublishToCommunityDialog(),A.featureUsage({featureID:54,groupID:3,experimentID:this.xeViewModel.experimentId()}),A.customEvent({key:"PublishExperimentToCommunity",type:"ShellUICommands"})):(n=t=L.cannotPublishDirtyExperiment,A.customEvent({key:"PublishExperimentToCommunity_DirtyError",type:"ShellUICommands",data:t}));n&&this.showErrorNotification(n,t)},B.prototype.launchPublishToCommunityDialog=function(){var e=this;this.commandsDisabled(!0),H.initializeTemplateIfNecessary("TagTextBox",ExperimentEditorTemplates._tagTextBoxMarkup);var t=this.xeViewModel.experimentEditorViewModel.experimentViewModel(),r=null,i=null;t.experiment.tags().forEach(function(e){N.GalleryUriTagRegExp.test(e)&&(r=e.match(N.GalleryUriTagRegExp)[1])});if(k.republishToGalleryEnabled()&&r){Shell.UI.Spinner.show();var s=n.getEntityIdFromCommunityUri(r);n.GalleryQueryUtil.queryCatalogById(s).done(function(n){i={galleryExperimentDescription:n.description,galleryExperimentName:n.name,galleryExperimentSummary:n.summary,galleryExperimentImageUrl:n.image_url,galleryExperimentTags:n.tags,hidden:n.hidden,galleryExperimentOwner:n.owner,galleryExperimentAuthor:n.author},Shell.UI.Spinner.hide(),e.launchPublishDialog(t,i,r)}).fail(function(n){Shell.UI.Spinner.hide();if(n instanceof H.AjaxError&&n.xmlHttpRequest&&n.xmlHttpRequest.status===404){var r=e.xeViewModel.experiment.tags()||[];_.remove(r,function(e){return N.GalleryUriTagRegExp.test(e)}),e.xeViewModel.experiment.tags(r),e.xeViewModel.update(),e.launchPublishDialog(t)}else H.showErrorNotification({title:L.publishExperimentErrorTitle,details:n.message})})}else this.launchPublishDialog(t)},B.prototype.publishToARM=function(){var e={workspaceId:this.xeViewModel.workspace.id,experimentId:this.xeViewModel.experimentId()};k.deployToArmViaGetEnabled()?(e.subscriptionId=this.workspaceSettings.subscriptionId,this.getToUxServices(e)):this.postToUxServices(e)},B.prototype.launchPublishDialog=function(e,t,n){var r=this;t===void 0&&(t=null),n===void 0&&(n=null);var i=new b.PublishToCommunityWizardViewModel(e,t),s=new $.fxs.fxsWizard.WizardStep;s.contentTemplateOptions({name:H.initializeTemplateIfNecessary("PublishToCommunityStep1Template",ExperimentEditorTemplates._publishToCommunityStep1Markup,k.markdownInPublishDialogEnabled()&&[d.markdownEditorRegisterInfo]),data:i}),s.title(L.publishExperimentToCommunityWizardExperimentDescriptionTitle);var o=new $.fxs.fxsWizard.WizardStep;o.contentTemplateOptions({name:H.initializeTemplateIfNecessary("PublishToCommunityStep2Template",ExperimentEditorTemplates._publishToCommunityStep2Markup),data:i}),o.title(L.publishExperimentToCommunityWizardImageSelectionTitle);var u=new $.fxs.fxsWizard.WizardStep;u.contentTemplateOptions({name:H.initializeTemplateIfNecessary("PublishToCommunityStep3Template",ExperimentEditorTemplates._publishToCommunityStep3Markup),data:i}),u.title(L.publishExperimentToCommunityWizardSettingsTitle);var a=[s,o,u],f=t?L.republishExperimentToCommunityWizardTitle:L.publishExperimentToCommunityWizardTitle,l={size:[690,735],autoLock:!1,title:f},c=new x.WizardView(i,a,l);c.onWizardClosingEvent.subscribe(function(e){if(e.completed){var t=i.getPublishableExperiment();r.publishToCommunity(t,n).always(function(){return r.commandsDisabled(!1)})}else r.commandsDisabled(!1)}),c.show()},B.prototype.onPublishToCommunityComplete=function(e,t){var n=this.xeViewModel.experiment.tags()||[];H.findStringMatchingRegEx(n,N.GalleryUriTagRegExp)||(n.push(H.format(N.GalleryUriTagFormatString,e)),this.xeViewModel.experiment.tags(n),this.xeViewModel.update());var r=new y.PublishToCommunityOnCompleteViewModel(e,t);u.PublishToCommunityStepOnComplete.show(r)},B.prototype.publishToCommunity=function(e,t){var n=this;t===void 0&&(t=null);var r=new m.PauseUserWithSpinnerViewModel(L.publishExperimentToCommunityPauseOnPublishingMessage),i=new j.IfxScenarioStopWatch(20,{galleryId:t,name:e.experimentName,expID:e.sourceExperiment.experimentIdForLogging});return i.start(),s.open(ExperimentEditorTemplates._pauseUserWithSpinnerMarkup,r,"400px","600px",null,null,!1),A.featureUsage({featureID:220,groupID:0,experimentID:this.xeViewModel.experiment.experimentIdForLogging,data:{galleryId:t}}),H.then(this.xeViewModel.publishExperimentToCommunity(e,t,i).always(function(){A.featureUsage({featureID:221,groupID:0,experimentID:n.xeViewModel.experiment.experimentIdForLogging,data:{galleryId:t}}),s.close()}),function(t){return t=JSON.parse(t),i.stop({catalogExperimentUrl:t}),n.onPublishToCommunityComplete(t,e.visibility)}).fail(function(e){i.error(e,null,!0),n.showErrorNotification(L.publishExperimentToCommunityErrorTitle,e.message)})},B.prototype.save=function(){var e=this;this.commandsDisabled(!0);var t=this.xeViewModel.experiment?{experimentId:this.xeViewModel.experiment.experimentIdForLogging,tags:this.xeViewModel.experiment.tags()}:{};A.featureUsage({featureID:8,groupID:3,experimentID:this.xeViewModel.experimentId()||this.xeViewModel.experiment.parentExperimentId,data:t});var n=new j.IfxScenarioStopWatch(13,t);n.start(),this.xeViewModel.save().fail(function(e){n.error(e,N.UserError,!0),k.trialLimitationsEnabled()&&E.tryShowDialogForTrialRestriction(e)}).done(function(){n.stop()}).always(function(){e.commandsDisabled(!1)})},B.prototype.confirmDiscard=function(){var e=this,t=new Shell.UI.Notifications.Confirmation(L.discardDraftAreYouSureQuestion,"active");t.setActions([new Shell.UI.Notifications.Buttons.yes(function(){e.discard(),H.removeElementFromArray(e.notifications,t),A.featureUsage({featureID:10,groupID:3,experimentID:e.xeViewModel.experimentId()||e.xeViewModel.experiment.parentExperimentId})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(t),H.removeElementFromArray(e.notifications,t),A.featureUsage({featureID:11,groupID:3,experimentID:e.xeViewModel.experimentId()||e.xeViewModel.experiment.parentExperimentId})})]),this.addNotification(t)},B.prototype.discard=function(){var e=this;A.info("Discarding the experiment draft","ExperimentView:discard",this.xeViewModel.experiment.experimentId()),this.commandsDisabled(!0),A.customEvent({key:"Discard",type:"ShellUICommands"}),this.xeViewModel.discard().done(function(){e.xeViewModel.experiment.parentExperimentId?(Shell.UI.Spinner.show(),H.then(e.xeViewModel.workspace.getExperimentAsync(e.xeViewModel.experiment.parentExperimentId),function(t){e.xeViewModel.navigateToParent(),Shell.UI.Spinner.hide()})):Shell.UI.Navigation.navigate({extension:t.experimentExtensionName})}).always(function(){e.commandsDisabled(!1)})},B.prototype.saveAs=function(){var e=this;this.commandsDisabled(!0);var t=ko.observable(null),n=new c.ExperimentSaveAsViewModel(t,this.xeViewModel.experimentEditorViewModel.experimentViewModel().experiment.description());s.open(ExperimentEditorTemplates._experimentSaveAsMarkup,n,"206px","600px",function(){e.commandsDisabled(!1)}),t.subscribe(function(){t()&&(e.xeViewModel.copy(t(),!0),e.commandsDisabled(!0),e.xeViewModel.save().fail(function(e){k.trialLimitationsEnabled()&&E.tryShowDialogForTrialRestriction(e)}).always(function(){e.commandsDisabled(!1)}),A.featureUsage({featureID:9,groupID:3,experimentID:e.xeViewModel.experimentId()||e.xeViewModel.experiment.parentExperimentId}))})},B.prototype.cancel=function(){var e=this;this.commandsDisabled(!0),A.featureUsage({featureID:12,groupID:3,experimentID:this.xeViewModel.experimentId()||this.xeViewModel.experiment.parentExperimentId}),this.xeViewModel.cancel().done(function(){e.xeViewModel.refreshExperiment().done(function(){e.commandsDisabled(!1)})})},B.prototype.refresh=function(){var e=this,t=this.xeViewModel.refreshExperiment();this.commandsDisabled(!0),A.featureUsage({featureID:13,groupID:3,experimentID:this.xeViewModel.experimentId()||this.xeViewModel.experiment.parentExperimentId}),t.always(function(){e.isViewExtensionStillActive()&&cdm.getActiveItem()!==e&&e._renderArea&&cdm.setActiveItem(e),e.commandsDisabled(!1)})},B.prototype.open=function(e){var t=this;this.xeViewModel.startAutoRefresh();var n=this.xeViewModel.loadFromService(e);Shell.UI.Spinner.show(),this.commandsDisabled(!0),n.done(function(){if(t.isViewExtensionStillActive()&&t._renderArea){t.xeControlContainer.zoomToFitIfSample(),k.deployToArmViaGetEnabled()||Shell.UI.Spinner.hide(),t.xeViewModel.experimentEditorViewModel.experimentViewModel().experimentLoaded(!0),cdm.setActiveItem(t),window.newExperimentGeneration&&(window.newExperimentGeneration.numTimesNavigateCalled>1?window.newExperimentGeneration.numTimesNavigateCalled--:(t.xeViewModel.experimentId()===window.newExperimentGeneration.id&&window.newExperimentGeneration.createCopy(),window.newExperimentGeneration=null)),t.commandsDisabled(!1),$(document).trigger("experimentLoaded"),t.xeViewModel.experiment.customModuleAdded.subscribe(function(e){var n=k.synchronizeScriptsCustomModulesEnabled()?t.xeViewModel.experiment.getCustomModules().length:0;if(n+t.xeViewModel.experiment.getCreateRModules().length===1){var r=t.xeViewModel.experiment.getScriptVersionParametersByName([T.ModuleParameterName.PythonVersion]),s=t.xeViewModel.experiment.getScriptVersionParametersByName([T.ModuleParameterName.RVersion]);if(!e.isFromExistingExperiment&&(r.length>0&&e.module_.moduleLanguage.language==="Python"||s.length>0&&(e.module_.moduleLanguage.language==="R"||e.module_.id.split(".")[1]===T.ModuleId.CreateRModel))){var o=new i.CustomModuleAddedWarningDialogViewModel(t.xeViewModel.experiment,e,r,s);u.CustomModuleAddedWarningDialog.show(o)}}});if(k.synchronizeScriptsEnabled()&&t.xeViewModel.experiment){var n=t.xeViewModel.experiment.getScriptParameterOptionsIfNotSynchronized(T.ModuleParameterName.PythonVersion),r=t.xeViewModel.experiment.getScriptParameterOptionsIfNotSynchronized(T.ModuleParameterName.RVersion);if(n&&n.length>0||r&&r.length>0){A.featureUsage({featureID:218,groupID:213});var s=new w.SynchronizeScriptVersionDialogViewModel(t.xeViewModel.experiment,n,r);u.SynchronizeScriptVersionDialog.show(s)}}if(t.xeViewModel.experiment&&t.xeViewModel.experiment.hasMissingResources){t.validateExperiment(),t.xeViewModel.experiment.statusCode()!==T.State.InDraft&&t.xeViewModel.experiment.isLeaf()&&t.xeViewModel.clone(!0);var o=new Shell.UI.Notifications.Notification(L.experimentContainsMissingResources,"error");t.addNotification(o),o.setActions([Shell.UI.Notifications.Buttons.close(function(){H.removeElementFromArray(t.notifications,o)})]),Shell.UI.Notifications.add(o)}}O.intervalEnd(),e.stop({experimentIdFinal:t.xeViewModel.experimentId()})}).fail(function(n){if(n instanceof H.AjaxError&&n.xmlHttpRequest.status===404){t._handleMissingExperiment(n),e.error(n,N.UserError,!0);return}e.error(n,N.SystemError,!0),H.when(H.fail(n))});if(k.deployToArmViaGetEnabled()){var r=this._workspace.getWorkspaceSettingsAsync().done(function(e){t.workspaceSettings=e}).fail(function(e){A.error("Load workspace settings failed: "+e.message,"ExperimentView",e&&e.message),H.showErrorNotification({title:H.format(L.WorkspaceSettingsLoadFailure,L.productName),details:e.message})});$.when(r,n).always(function(){Shell.UI.Spinner.hide()})}},B.prototype._handleMissingExperiment=function(t){var n=H.format(L.ErrorExperimentNotFound,this.xeViewModel.experimentId()),r=new Shell.UI.Notifications.Confirmation(n,"active");e(["../DataLabViews/AllExperimentsView"],function(e){r.setActions([Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(r),e.navigateToExperimentList()})]),Shell.UI.Notifications.add(r),A.error("experiment not found","ExperimentView",t&&t.message)})},B.prototype.showSaveAsDialog=function(){var t=this.xeViewModel;e(["../TS/ViewModel/Dialogs/ExperimentSaveAsDialogViewModel"],function(e){var n=t.experiment,r=new e.ExperimentSaveAsDialogViewModel(n.description()+L.copyForNewExperimentName,t,!0);A.customEvent({key:"ExperimentSaveAsDialogOpened",type:"ExperimentView",experimentID:n.experimentIdForLogging}),u.ExperimentSaveAs.show(r)})},B.prototype.showLineage=function(){if(this.xeViewModel.experiment.experimentId())z(this.xeViewModel.experiment.experimentId());else{if(!this.xeViewModel.experimentEditorViewModel.parentExperimentId())throw new Error("Experiment ID and parent experiment ID cannot both be empty when viewing lineage");z(this.xeViewModel.experimentEditorViewModel.parentExperimentId())}},B.prototype._updateSidebarTitle=function(e){$(".fxshell-nav2-item.selected a span").text(e).attr("title",e)},B.prototype.setCommands=function(){function c(e,t){return function(){var r=cdm.currentActiveItem;if(!(r instanceof B))throw new Error("Expected an ExperimentView to handle command");A.featureUsage({featureID:t,groupID:0,experimentID:n||r.xeViewModel.experiment.experimentIdForLogging}),e.call(r)}}function v(){p!==undefined&&d!==undefined&&(h.removeSubCommands([p,d]),p=undefined,d=undefined)}function g(){v();var e=h.addSubCommands([{text:L.commandsRun,click:c(B.prototype.submit,112),disabled:m.commandsDisabled()||m.xeViewModel.readOnlyMode()||!m.xeViewModel.userWorkspaceExperiment()},{text:L.commandsRunSelected,click:c(B.prototype.submitSelected,198),disabled:m.commandsDisabled()||m.xeViewModel.readOnlyMode()||!m.xeViewModel.userWorkspaceExperiment()||!f.EntityBaseV1.areEntitiesGoingToRun(H.values(m.xeViewModel.experimentEditorViewModel.findNodesAndTheirUpstreamNodes(H.values(m.xeViewModel.experimentEditorViewModel.selectionManager.selectedEntities())))),onMouseOver:c(m.runSelectedMouseOver,198),onMouseOut:c(m.runSelectedMouseOut,198)}]);p=e[0],d=e[1]}var e=this,t=this.xeViewModel.workspace.id,n=this.xeViewModel.experiment.experimentId(),r=this.xeViewModel.projectViewModel,i=M.ExperimentRole.Training,o=ko.computed(function(){return e.commandsDisabled()||s.isOpen()}),u=ko.computed(function(){return o()||e.xeViewModel.readOnlyMode()||D.isFinishedState(e.xeViewModel.experiment.statusCode())===!1||e.xeViewModel.experiment&&e.xeViewModel.experiment.isPartialRun()});if(r.loaded()){var l=r.experimentVMs().filter(function(e){return e.experimentId()===n})[0];l&&l.role&&(i=l.role)}else this.projectViewModelListening||(this.projectViewModelListening=!0,this.registerForDisposal(new C.DisposableSubscription(r.loaded.subscribe(function(){Shell.UI.Commands.clear(),e.setCommands()}))));var h,p,d,m=this,y=T.State,b=k.copyToWorkspaceInExperimentViewEnabled()?c(B.prototype.showSaveAsDialog,122):c(B.prototype.saveAs,109),w=new Shell.UI.Commands.Command(L.commandsViewRunHistory,Shell.UI.Icons.clock,c(B.prototype.showLineage,107),null,this.commandsDisabled()||!this.xeViewModel.experimentEditorViewModel.parentExperimentId()&&this.xeViewModel.experiment.statusCode()===y.InDraft),E=new Shell.UI.Commands.Command(L.commandsSave,Shell.UI.Icons.save,c(B.prototype.save,108),null,this.commandsDisabled()||this.xeViewModel.readOnlyMode()),x=new Shell.UI.Commands.Command(L.commandsSaveAs,Shell.UI.Icons.save,b,null,this.commandsDisabled()),N=new Shell.UI.Commands.Command(L.commandsDiscardChanges,Shell.UI.Icons["delete"],c(B.prototype.confirmDiscard,110),null,this.commandsDisabled()||!this.xeViewModel.experimentEditorViewModel.parentExperimentId()||this.xeViewModel.readOnlyMode()||!this.xeViewModel.experimentEditorViewModel.experiment.isDraft()),O=new Shell.UI.Commands.Command(L.commandsPublishAsDataflow,Shell.UI.Icons.publish,c(B.prototype.publish,111),null,this.commandsDisabled()),P=new Shell.UI.Commands.Command(L.commandsRun,Shell.UI.Icons.play,c(B.prototype.submit,112),null,this.commandsDisabled()||this.xeViewModel.readOnlyMode()||this.xeViewModel.experiment.statusCode()===y.Running),j=new Shell.UI.Commands.Command(L.commandsCancel,Shell.UI.Icons.stop,c(B.prototype.cancel,113),null,this.commandsDisabled()||!this.xeViewModel.userWorkspaceExperiment()||this.xeViewModel.experiment.statusCode()!==y.Running);k.enableExperimentPartialRun()?(h=new Shell.UI.Commands.Command(L.commandsRun,Shell.UI.Icons.play,null,null,this.commandsDisabled()||this.xeViewModel.readOnlyMode()||!this.xeViewModel.userWorkspaceExperiment()),g()):h=new Shell.UI.Commands.Command(L.commandsRun,Shell.UI.Icons.play,c(B.prototype.submit,112),null,this.commandsDisabled()||this.xeViewModel.readOnlyMode()||!this.xeViewModel.userWorkspaceExperiment());var F=new Shell.UI.Commands.Command(L.setupWebServiceCommandTitle,Shell.UI.Icons.publish,null,null,!1),I=F.addSubCommands([{text:L.createScoreGraphCommandTitle,click:c(B.prototype.createScoringGraphCommand,116),disabled:this.xeViewModel.experiment.isPartialRun()},{text:L.publishWebServiceCommandTitle,click:c(B.prototype.handlePublishWebServiceCommand,114),disabled:u()},{text:L.commandsPublishExperimentToARM,click:c(B.prototype.publishToARM,219),disabled:u()||!this.xeViewModel.experiment.isWebServiceExperiment()}]),q=I[0],R=I[1],U=I[2];S.canDeployToArm(this.xeViewModel.workspace.id)||(F.removeSubCommand(U,!1),_.remove(I,function(e){return e===U}));if(!S.canDeployToArm(this.xeViewModel.workspace.id))if(i===M.ExperimentRole.Scoring)F=new Shell.UI.Commands.Command(L.publishWebServiceCommandTitle,Shell.UI.Icons.deployWebService,c(B.prototype.handlePublishWebServiceCommand,114),null,u());else{var z=F._subCommands&&F._subCommands.length;if(I.length===z){var W=!0;ko.computed(function(){try{var t=e.xeViewModel.experiment.isWebServiceExperiment(),n=e.xeViewModel.experiment.containsTrainingModule();n&&!W?(F._subCommands=I,W=!0,F.setText(L.setupWebServiceCommandTitle),F.setClick(null),F.setDisabled(e.xeViewModel.experiment.isPartialRun())):n||(W&&(F._subCommands=[],W=!1),t?(F.setIcon&&F.setIcon(Shell.UI.Icons.publish),F.setText(L.publishWebServiceCommandTitle),F.setDisabled(u()),F.setClick(c(B.prototype.handlePublishWebServiceCommand,114)),A.info("publish web service button enabled")):(F.setIcon&&F.setIcon("/Libraries/Images/prepare-web-service.png"),F.setText(L.setupWebServiceCommandTitle),F.setDisabled(o()||e.xeViewModel.readOnlyMode()||e.prepareWebServiceOperation.isRunning()||e.xeViewModel.experiment.isPartialRun()),F.setClick(c(B.prototype.prepareWebServiceCommand,118)),A.info("prepared web service button enabled")))}catch(r){throw A.error("Exception thrown during update of setup web service command",null,r),r}})}}else i===M.ExperimentRole.Scoring?(F.removeSubCommand(q,!1),F.setIcon&&F.setIcon(Shell.UI.Icons.deployWebService),F.setText(L.publishWebServiceCommandTitle)):ko.computed(function(){try{var t=e.xeViewModel.experiment.isWebServiceExperiment(),n=e.xeViewModel.experiment.containsTrainingModule();!n&&!t?(F._subCommands=[],F.setIcon&&F.setIcon("/Libraries/Images/prepare-web-service.png"),F.setText(L.setupWebServiceCommandTitle),F.setDisabled(o()||e.xeViewModel.readOnlyMode()||e.prepareWebServiceOperation.isRunning()||e.xeViewModel.experiment.isPartialRun()),F.setClick(c(B.prototype.prepareWebServiceCommand,118)),A.info("prepared web service button enabled")):(F._subCommands=[q,R,U],n?t||F.removeSubCommand(U,!1):(F.removeSubCommand(q,!1),F.setIcon&&F.setIcon(Shell.UI.Icons.publish),F.setText(L.publishWebServiceCommandTitle)),A.info("web service menu enabled"))}catch(r){throw A.error("Exception thrown during update of setup web service command",null,r),r}});var X;if(k.publishFirstClassCustomModuleToGalleryEnabled()){X=new Shell.UI.Commands.Command(L.commandsPublishExperimentToCommunity,Shell.UI.Icons.publishToCommunity,null,null,!1);var V=X.addSubCommands([{text:L.publishExperimentSubCommand,click:c(B.prototype.handlePublishExperimentCommand,115)},{text:L.publishCustomModuleSubCommand,click:c(B.prototype.handlePublishCustomModuleCommand,115)}]),$=V[1]}else X=new Shell.UI.Commands.Command(L.commandsPublishExperimentToCommunity,Shell.UI.Icons.publishToCommunity,c(B.prototype.handlePublishExperimentCommand,115),null,o());var J=new Shell.UI.Commands.Command(L.commandsRefresh,Shell.UI.Icons.sync,c(B.prototype.refresh,117),null,this.commandsDisabled()||D.isFinishedState(Q)||D.isFailedState(Q)||Q===y.InDraft&&!this.xeViewModel.experiment.parentExperimentId),K=[];k.dataflowsEnabled()&&K.push(O);var Q=this.xeViewModel.experiment.statusCode();k.collapseEditorDrawerCommandsEnabled()?K.push(w,E,x,N,h,F):K.push(w,E,x,N,J,j,P,F),k.packingServiceEnabled()&&k.communityUXInStudioEnabled()&&k.publishExperimentToGalleryEnabled()&&K.push(X),Shell.UI.Commands.add(K),ko.computed(function(){e.updateScoreGraphOperation.isUpdatable()?(q.setText(L.updateScoreGraphCommandTitle),q.setDisabled(o()||e.xeViewModel.readOnlyMode()||D.isFinishedState(e.xeViewModel.experiment.statusCode())===!1||!e.updateScoreGraphOperation.isEnabled())):(q.setText(L.createScoreGraphCommandTitle),q.setDisabled(o()||e.xeViewModel.readOnlyMode()||D.isFinishedState(e.xeViewModel.experiment.statusCode())===!1||!e.createScoreGraphOperation.isEnabled()))}),ko.computed(function(){try{e.xeViewModel.experiment.isWebServiceExperiment()?(R.setIcon&&R.setIcon(Shell.UI.Icons.publish),S.canDeployToArm(e.xeViewModel.workspace.id)?R.setText(L.publishWebServiceSubCommandTitle):R.setText(L.publishWebServiceCommandTitle),R.setDisabled(u()),R.setClick(c(B.prototype.handlePublishWebServiceCommand,114)),U.setDisabled(u()||!e.xeViewModel.experiment.isWebServiceExperiment())):(R.setIcon&&R.setIcon("/Libraries/Images/prepare-web-service.png"),R.setText(L.prepareWebServiceCommandTitle),R.setDisabled(o()||e.xeViewModel.readOnlyMode()||e.prepareWebServiceOperation.isRunning()),R.setClick(c(B.prototype.prepareWebServiceCommand,118)))}catch(t){throw A.error("Exception thrown during update of publish web service command",null,t),t}}),ko.computed(function(){N.setDisabled(o()||!e.xeViewModel.experimentEditorViewModel.parentExperimentId()||e.xeViewModel.readOnlyMode()||!e.xeViewModel.experimentEditorViewModel.experiment.isDraft()),P.setDisabled(o()||e.xeViewModel.readOnlyMode()||e.xeViewModel.experiment.statusCode()===y.Running),j.setDisabled(o()||!e.xeViewModel.userWorkspaceExperiment()||e.xeViewModel.experiment.statusCode()!==y.Running),F.setDisabled(o()||e.xeViewModel.readOnlyMode()||e.xeViewModel.experiment.isPartialRun()),w.setDisabled(o()||!e.xeViewModel.experimentEditorViewModel.parentExperimentId()&&e.xeViewModel.experiment.statusCode()===y.InDraft),X.setDisabled(o()),O.setDisabled(o()),U.setDisabled(u()||!e.xeViewModel.experiment.isWebServiceExperiment()),E.setDisabled(o()||e.xeViewModel.readOnlyMode()),x.setDisabled(o());var t=o()||!e.xeViewModel.userWorkspaceExperiment()&&!e.runCommandShown||e.xeViewModel.readOnlyMode()&&e.runCommandShown;k.enableExperimentPartialRun()?(h.setDisabled(t),p&&p.setDisabled(t),d&&d.setDisabled(t||!a.Entity.hasRunnableEntity(H.values(e.xeViewModel.experimentEditorViewModel.selectionManager.selectedEntities())))):h.setDisabled(t)}),ko.computed(function(){Q=e.xeViewModel.experiment.statusCode(),J.setDisabled(o()||D.isFinishedState(Q)||D.isFailedState(Q)||Q===y.InDraft&&!e.xeViewModel.experiment.parentExperimentId)}),ko.computed(function(){var t=e.xeViewModel.experiment.statusCode();t===T.State.NotStarted||t===T.State.Running?e.runCommandShown=!1:e.runCommandShown=!0,e.runCommandShown?(h.setText(L.commandsRun),h.setIcon(Shell.UI.Icons.play),h.setClick(c(B.prototype.submit,112)),k.enableExperimentPartialRun()&&g()):(h.setText(L.commandsCancel),h.setIcon(Shell.UI.Icons.stop),h.setClick(c(B.prototype.cancel,113)),k.enableExperimentPartialRun()&&v())},this)},B.prototype.dispose=function(){this._renderArea=null,s.isOpen()&&s.close(),o.prototype.dispose.call(this)},B.prototype.showErrorNotification=function(e,t){t===void 0&&(t=null);var n=new Shell.UI.Notifications.Notification(e,"error");return t&&n.setDetailsText(t),n.setActions([Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(n)})]),Shell.UI.Notifications.add(n),n},B.prototype.postToUxServices=function(e){var t=window.environment.webServicesUxLocation,n=$('<form target="_blank" method="POST" style="display:none;" action="'+t+'/webservices/deployExperiment"></form>').appendTo(document.body);for(var r in e)e.hasOwnProperty(r)&&$('<input type="hidden" />').attr({name:r,value:e[r]}).appendTo(n);n.submit(),n.remove()},B.prototype.handlePublishCustomModuleCommand=function(){var t=this;if(this.xeViewModel.readOnlyMode()){H.showErrorNotification({title:L.publishCustomModuleReadOnlyError});return}if(D.isFinishedState(this.xeViewModel.experiment.statusCode())===!1||this.xeViewModel.experiment&&this.xeViewModel.experiment.isPartialRun()){H.showErrorNotification({title:L.publishCustomModuleUnfinishedError});return}var n;if(this.xeViewModel.experimentEditorViewModel.selectionManager.selectedGraphNodes.count.peek()!==1){H.showErrorNotification({title:L.publishCustomModuleUnselectedError});return}n=H.first(this.xeViewModel.experimentEditorViewModel.selectionManager.selectedGraphNodes()),n&&n instanceof v.Module&&n.moduleNode.module_.category==="Custom"?e(["../TS/View/PublishCustomModuleWizardView"],function(e){var r=new e.PublishCustomModuleWizardView(t.xeViewModel,n);r.launchPublishCustomModuleWizard()}):H.showErrorNotification({title:L.publishCustomModuleUnselectedError})},B.prototype.getToUxServices=function(e){var t=window.environment.webServicesUxLocation;if(!t)return;var n=t+"/webservices/deployExperiment"+S.queryFromObject(e);window.open(n,"_blank")},B}(o.ViewBase);t.ExperimentView=X,t.createExperimentView=V});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/CommunityHelpers",["require","exports","../../View/DialogViewFactories","../Dialogs/ModuleNameConflictDialogViewModel","./PackagePollingHelpers","../../../../DataLabClient/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace","../../../../DataLabClient/Logging/IfxScenarioStopWatch","../../../../DataLabClient/Model/CommunityExperiment","../../../../DataLabClient/Model/User"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function L(e){return e?e.substr(e.lastIndexOf("/")+1):""}function A(e,t,n){return O(l.workspace,l.workspace.friendlyName,e,t,n)}function O(t,n,r,i,o,h,p,d){Shell.UI.Spinner.show();var v=new c.IfxScenarioStopWatch(9,{templateId:o,communityUri:i});v.start();var m=P(t,n,r,i,o,h,d,v);return f.then(m,function(n){if(n)e(["../../../DataLabViews/ExperimentView"],function(e){typeof t=="string"&&t.toLowerCase()!==l.workspace.id.toLowerCase()?e.navigateToExperiment(n.ExperimentId,t,p):e.navigateToExperiment(n.ExperimentId),v.stop({experimentId:n.ExperimentId})});else{var r=new Shell.UI.Notifications.Notification(f.format(u.newExperimentMenuCannotOpen,i),"error");r.setActions([Shell.UI.Notifications.Buttons.close()]),Shell.UI.Notifications.add(r),a.error("Open gallery experiment failed with return value null. "+i),Shell.UI.Spinner.hide(),v.error(new Error("null experiment returned: "+i),s.SystemError)}}).fail(function(e){var t=new Shell.UI.Notifications.Notification(f.format(u.newExperimentMenuOpenCallFailed,i),"error");t.setActions([Shell.UI.Notifications.Buttons.close()]),Shell.UI.Notifications.add(t),a.error("Call to open gallery experiment failed. "+i),Shell.UI.Spinner.hide(),e.message+=i,v.error(e,s.SystemError)}).always(Shell.UI.Spinner.hide)}function M(e){return typeof e=="string"?e:e.id}function D(e,n,r,o){r===void 0&&(r=null);var u=l.workspace,a=f.then(u.startGetCommunityNotebookIdAsync(u.id,e,n,r,o),function(e){return i.pollOnNotebookUnpack(e)});return r&&a.done(function(e){(new k(t.activityServiceUrl)).download(r,"","")}),f.then(a,function(e){return e.NotebookId},function(e){return o&&o.error(e,s.SystemError),e})}function P(e,n,r,s,o,u,l,c){var h,p,d,v=M(e),m=o?o:L(s),g=function(){if(m){var e=new k(t.activityServiceUrl);e.download(m,"","")}};if(u){a.featureUsage({featureID:146,groupID:0,data:{competitionUri:u,competitionTenantId:l}}),p=cdm.getActiveItem()._client;var y=p.startGetCompetitionExperimentIdFromCommunityAsync.bind(p);h=f.then(y(v,r,s,u,l,c),function(e){return i.pollOnUnpack(e)})}else{if(typeof e=="string")p=cdm.getActiveItem()._client,d=p.startGetCommunityExperimentIdAsync.bind(p);else{var b=e;d=b.startGetCommunityExperimentIdAsync.bind(b)}h=f.then(d(v,r,s,c),function(e){return i.pollOnUnpack(e)})}return h.done(g),h}function B(e,n,r,s,o,u){o===void 0&&(o=!1);if(!e||!n||!r||!s)return a.error("Missing metadata needed to import Gallery module",null,{destinationWorkspaceId:e,packageUri:n,communityUri:r,entityId:s}),f.fail(new Error("Missing metadata needed to import Gallery module"));var c=l.workspace.startGetCommunityModuleAsync(e,n,r,o,undefined,u),h=f.then2(c,function(e){return i.pollOnModuleUnpack(e)});h=I(h);var p=f.then2(h,function(e){return e.ModuleAndExperimentId?!e.ModuleAndExperimentId.m_Item1&&!o?f.fail(new Error("No module ID found")):!e.ModuleAndExperimentId.m_Item2&&o?f.fail(new Error("No experiment ID found")):(s=s||L(r),(new k(t.activityServiceUrl)).download(s,"",""),[e.ModuleAndExperimentId.m_Item1,e.ModuleAndExperimentId.m_Item2]):f.fail(new Error("No module/experiment IDs found"))}),d=f.whenTrue(l.workspace.applicationCache.allPrefetched),v=f.then2(f.when(p,d),function(e){var t=e[0];return t?l.workspace.applicationCache.moduleCache.getItem(t).done(function(e){var t=l.workspace.moduleCategoryRegistry;t.contains(e.category)||l.workspace.applicationCache.addCategory(e.category,t)}):f.when(null)});return f.then2(f.when(p,v),function(e,t){return[t,e[1]]})}function j(){var e=new f.StringSet;return f.forEach(l.workspace.applicationCache.moduleCache.items(),function(t){e.add(t.name())}),e}function F(e,t){var n={};return e.forEach(function(e){var r=2,i=e;while(t.has(i))i=e+" ("+r+")",r+=1;n[e]=i}),n}function I(e){return f.then2(e,function(e){if(e.Status==="Failed"){var t=e.FailureData&&e.FailureData.UnresolvedModuleNames;return t&&t.length?f.fail(new H("The name of one or more custom modules conflicted with existing modules: "+t.join(", "),t)):f.fail(new Error("Unknown error encountered while unpacking module"))}return e})}function q(e){if(e instanceof H&&e.unresolvedModuleNames.length>0){var t=j(),i=F(e.unresolvedModuleNames,t);if(o.renameDialogForModuleImportEnabled()){var s=new r.ModuleNameConflictDialogViewModel(i),u=n.ModuleNameConflictDialog.show(s);return f.then2(u,function(e){return e.accepted&&s.renameInfo||null})}return f.succeed(i)}return null}function R(e){return e!=null&&e===1?p.user.companyId:p.user.authorId}function U(e){return e!=null&&e===1?"Microsoft":p.user.name}var d=h.CommunityExperimentAuthor;t.galleryBaseUrl="",t.catalogSearchBaseUri="",t.catalogQueryBaseUri="",t.msftAuthorId="",t.notebookSamplesCollectionId="",t.canPublishOnBehalfOfCompany;var v=function(){function e(e,t){this.total_count=e,this.value=t}return e}();t.CatalogQueryByFilterResult=v;var m=function(){function e(){}return e}();t.CatalogEntityObject=m;var g=function(){function e(e,t){this.total_count=e,this.value=t}return e.convertToCatalogQueryByFilterResult=function(e){return new v(e.total_count,_.map(e.value,function(e){return e.entity}))},e}();t.CatalogQueryByCollectionResult=g;var y=function(){function e(){}return e}();t.Author=y;var b=function(){function e(){}return e}();t.Owner=b;var w=function(){function e(){}return e}();t.Content=w;var E=function(){function e(){}return e.CatalogExperimentSampleSortFunction=function(t,n){if(t.id===n.id)return 0;if(e.numberedSampleRegEx.test(t.name)&&!e.numberedSampleRegEx.test(n.name))return-1;if(!e.numberedSampleRegEx.test(t.name)&&e.numberedSampleRegEx.test(n.name))return 1;if(e.numberedSampleRegEx.test(t.name)&&e.numberedSampleRegEx.test(n.name)){var r=t.name.match(e.numberedSampleRegEx)[2],i=n.name.match(e.numberedSampleRegEx)[2];return r===i?0:r<i?-1:1}return t.name===n.name?0:t.name<n.name?-1:1},e.numberedSampleRegEx=/^(Sample|Tutorial) ([1-9][0-9]*):.*/,e}();t.CatalogEntity=E;var S=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(E);t.CatalogNotebook=S;var x=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(E);t.GalleryModule=x;var T=function(){function e(){}return e.queryCatalogByFilter=function(n){n===void 0&&(n=null);var r=this.callCatalog(this.constructCatalogQueryUrl("experiment",t.catalogQueryBaseUri,null,n));return r.done(function(r){return e.validateCatalogResult(r,{baseUri:t.catalogQueryBaseUri,filter:n})}),r},e.queryCatalogById=function(e){return e===void 0&&(e=null),this.callCatalog(this.constructCatalogQueryUrl("experiment",t.catalogQueryBaseUri,e))},e.searchCatalog=function(e,n){return n===void 0&&(n=null),this.callCatalog(this.constructCatalogQueryUrl(e,t.catalogSearchBaseUri,null,n))},e.queryCatalogEntityById=function(e,n){return this.callCatalog(this.constructCatalogQueryUrl(e,t.catalogQueryBaseUri,n))},e.queryCatalogEntities=function(n,r){r===void 0&&(r=null);var i=this.constructCatalogQueryUrl(n,t.catalogQueryBaseUri,null,r),s=this.callCatalog(i);return s.done(function(n){return e.validateCatalogResult(n,{baseUri:t.catalogQueryBaseUri,url:i})}),s},e.queryCatalogCollection=function(n,r){r===void 0&&(r=null);var i=this.constructCatalogCollectionsUrl(n,t.catalogQueryBaseUri,r),s=f.then(this.callCatalog(i),function(e){return g.convertToCatalogQueryByFilterResult(e)});return s.done(function(n){return e.validateCatalogResult(n,{baseUri:t.catalogQueryBaseUri,url:i})}),s},e.constructCatalogQueryUrl=function(e,t,n,r){n===void 0&&(n=null),r===void 0&&(r=null);var i=t+"/"+this._getPathSegement(e);return i=n?i+"/"+n:i,i=r?i+"?"+r:i,i},e.constructCatalogCollectionsUrl=function(e,n,r){r===void 0&&(r=null);var i=r,s="";if(!i)switch(e){case"experiment":throw new Error("querying catalog collections for Experiments is not yet enabled");case"notebook":i=t.notebookSamplesCollectionId,s="items";break;case"module":throw new Error("querying catalog collections for Modules is not yet enabled");default:throw new Error("catalog entity type not recognized: "+String(e))}var o=n+"/"+"Collections/"+i+"/"+s;return o},e.callCatalog=function(e){var t=jQuery.Deferred();return $.ajax({type:"get",url:e}).done(function(e){t.resolve(e)}).fail(function(e,n,r){t.reject(new f.AjaxError(r,e))}),f.when(t.promise())},e.validateCatalogResult=function(e,t){t===void 0&&(t=null),(e.total_count==null||!(e.value instanceof Array))&&a.error("invalid catalog query result received","validateCatalogResult",JSON.stringify(t))},e._getPathSegement=function(e){switch(e){case"experiment":return"experiments";case"notebook":return"notebooks";case"module":return"modules";default:throw new Error("catalog entity type not recognized: "+String(e))}},e}();t.GalleryQueryUtil=T;var N;(function(e){e[e.Unknown=0]="Unknown",e[e.View=1]="View",e[e.Publish=2]="Publish",e[e.Comment=3]="Comment",e[e.Open=4]="Open",e[e.Clone=5]="Clone",e[e.Share=6]="Share"})(N||(N={}));var C=function(){function e(){}return e}();t.activityServiceUrl="",t.multiGeoRegion="",t.multiGeoRegionsList=[],t.workspacePermissionsFoof="False";var k=function(){function e(e){this.activityServiceUrl=e}return e.prototype.view=function(e,t,n){this.postActivity(e,t,n,1)},e.prototype.download=function(e,t,n){this.postActivity(e,t,n,4)},e.prototype.publish=function(e,t,n){this.postActivity(e,t,n,2)},e.prototype.comment=function(e,t,n){this.postActivity(e,t,n,3)},e.prototype.open=function(e,t,n){this.postActivity(e,t,n,4)},e.prototype.clone=function(e,t,n){this.postActivity(e,t,n,5)},e.prototype.share=function(e,t,n){this.postActivity(e,t,n,6)},e.prototype.postActivity=function(e,t,n,r){var i=new C;i.EntityId=e,i.UserId=t,i.Context=n,i.ActivityType=r,$.ajax(this.activityServiceUrl+"/Add",{data:JSON.stringify(i),contentType:"application/json",type:"POST"})},e}();t.UserActivityClient=k,t.getEntityIdFromCommunityUri=L,t.copyCommunityExperimentToThisWorkspaceAndNavigateToExperiment=A,t.copyCommunityExperimentToWorkspaceAndNavigateToExperiment=O,t.copyGalleryNotebook=D,t.copyCommunityExperiment=P;var H=function(){function e(e,t,n){this._requestId=n,this.error=new Error(e),this.unresolvedModuleNames=t||[]}return Object.defineProperty(e.prototype,"name",{get:function(){return this.error.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.error.message},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return String(this.error)},Object.defineProperty(e.prototype,"requestId",{get:function(){return this._requestId},enumerable:!0,configurable:!0}),e}();t.ModuleUnpackError=H,t.importGalleryModule=B,t.getModuleNamesInCache=j,t.generateUniqueModuleNameMapping=F,t.launchNameConflictDialog=q,t.getAuthorId=R,t.getAuthorName=U}),define("generated/editor/DataLabViews/DataflowListView",["require","exports","../DataLabViews/ExperimentView","../../DataLabClient/LocalizedResources"],function(e,t,n,r){var i=function(){function e(e,t){this._renderArea=e,this._data=[],this._client=t;var n=[{name:r.name,field:"Description",type:"navigation",navigationField:"DataflowId"},{name:r.id,field:"DataflowId"}];this._grid=$(e).find("#grid").wazDataGrid({columns:n,data:this._data,selectable:!0,multiselect:!1,resizable:!0})}return e.prototype.refreshFromService=function(){var e=this;Shell.UI.Spinner.show(),this._client.listDataflowsAsync().done(function(t){Shell.UI.Spinner.hide(),e._populateDataflowList(t)})},e.prototype._populateDataflowList=function(e){$.observable(this._data).refresh(e.map(function(e){return{Description:e.Description,DataflowId:e.DataflowId,type:n.DataflowType.name}}))},e}();t.DataflowListView=i}),define("generated/editor/DataLabViews/DataflowView",["require","exports","../TS/View/ExperimentEditorContainer","../TS/ViewModel/ExperimentEditor/ExperimentEditorContainerViewModel","../DataLabViews/ExperimentView"],function(e,t,n,r,i){var s=function(){function e(e,t,s){this._renderArea=e;var o=document.querySelector("#ExperimentEditor"),u={loadFromService:function(e,t){return s.getDataflowAsync(e,t)}};this.xeViewModel=new r.ExperimentEditorContainerViewModel(s,u,t),this.xeControlContainer=new n.ExperimentEditorContainer(o,this.xeViewModel),this.xeViewModel.registerNavigateToParentHandler(function(e){e&&i.navigateToExperiment(e)}),cdm.setActiveItem(this),document.querySelector("#tabcontainer .itemtitle").textContent=""}return e.prototype.dispose=function(){this.xeControlContainer.dispose(),this.xeViewModel.dispose()},e.prototype.open=function(){var e=this,t=this.xeViewModel.loadFromService();Shell.UI.Spinner.show(),t.done(function(){Shell.UI.Spinner.hide(),cdm.setActiveItem(e)})},e}();t.DataflowView=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/DataGateway/DataGatewaysView",["require","exports","../../TS/ViewModel/Dialogs/DataGatewayDialogViewModels","../../TS/View/DialogViewFactories","../../../DataLabClient/Contracts/V1/DataGatewayBackend","../../../DataLabClient/Disposable","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f;(function(e){var t;(function(e){e.title=o.dataGateways})(t=e.DataGatewaysPivot||(e.DataGatewaysPivot={}))})(f=t.Constants||(t.Constants={}));var l="gatewayIconBad",c="gatewayIconWarn",h="gatewayIconGood",p=o,d=i.gatewayState,v=[];v[0]={icon:"",text:p.none},v[1]={icon:l,text:p.notRegistered},v[3]={icon:c,text:p.offline},v[2]={icon:h,text:p.online},v[5]={icon:"",text:p.other},v[4]={icon:h,text:p.online};var m=i.gatewayVersionState,g=[];g[0]={icon:"",text:""},g[4]={icon:l,text:p.updateRequired},g[3]={icon:c,text:p.updateRequired},g[2]={icon:"",text:p.updateAvailable},g[1]={icon:h,text:p.upToDate},g[5]={icon:"",text:""};var y=function(e){function t(t,n){var r=this;e.call(this),this.backend=t,this.renderArea=n,this.data=[],this.selectedItem=ko.observable(null),this.selectionEnabledCommands=[],this.resources=o,this.grid=$(this.renderArea).find("#grid").fxDataGrid({columns:[{name:this.resources.name,field:"Name",sorted:"ascending"},{name:this.resources.host,field:"Host"},{name:this.resources.status,formatter:this.formatGatewayStatus,field:"Status"}],data:this.data,selectable:!0,multiselect:!1,resizable:!0,rowSelect:function(e,t){var n=r.grid.fxDataGrid("getSelectedRows").length===0;r.selectionEnabledCommands.forEach(function(e){return e.setDisabled(n)}),t.selected?r.selectedItem(t.selected.dataItem):r.selectedItem(null)}}),this.statusClass=ko.pureComputed(function(){return r.selectedItemStatusMap().icon}),this.statusText=ko.pureComputed(function(){return r.selectedItemStatusMap().text}),this.statusMessageHtml=ko.pureComputed(function(){if(r.selectedItem())switch(r.selectedItem().Gateway.Status){case 1:return p.notRegisteredMessageHtml;case 3:if(r.selectedItem().Gateway.VersionStatus!==4)return p.gatewayOfflineMessageHtml}return null}),this.lastConnected=ko.pureComputed(function(){return r.selectedItem()&&r.selectedItem().Gateway.LastConnectTime?a.formatDate(r.selectedItem().Gateway.LastConnectTime):""}),this.created=ko.pureComputed(function(){return r.selectedItem()&&r.selectedItem().Gateway.CreateTime?a.formatDate(r.selectedItem().Gateway.CreateTime):""}),this.registered=ko.pureComputed(function(){return r.selectedItem()&&r.selectedItem().Gateway.RegisterTime?a.formatDate(r.selectedItem().Gateway.RegisterTime):""}),this.versionStatusClass=ko.pureComputed(function(){return r.selectedItemVersionStatusMap().icon}),this.versionStatusText=ko.pureComputed(function(){return r.selectedItemVersionStatusMap().text}),this.versionStatusMessageHtml=ko.pureComputed(function(){if(r.selectedItem())switch(r.selectedItem().Gateway.VersionStatus){case 2:return p.gatewayGetNewVersionHtml;case 3:return a.format(p.gatewayExpiringVersionHtml,a.formatDate(r.selectedItem().Gateway.ExpiryTime));case 4:return p.gatewayExpiredVersionHtml}return null}),u.info("applying bindings",null,JSON.stringify({viewModel:"datagateway"})),this.registerForDisposal(new s.DisposableKOApplyBindings(this,$(this.renderArea).find("#propertiesPane").get(0)))}return __extends(t,e),t.prototype.selectedItemStatusMap=function(){return this.selectedItem()&&this.selectedItem().Gateway.Status?v[this.selectedItem().Gateway.Status]:v[0]},t.prototype.selectedItemVersionStatusMap=function(){return this.selectedItem()&&this.selectedItem().Gateway.VersionStatus?g[this.selectedItem().Gateway.VersionStatus]:g[0]},t.prototype.formatGatewayStatus=function(e,t){var n=t.rowMetadata.dataItem.Gateway,r=(n.Status?"<span class='"+v[n.Status].icon+"'>"+v[n.Status].text+"</span>":"")+(n.VersionStatus?" - <span class='"+g[n.VersionStatus].icon+"'>"+g[n.VersionStatus].text+"</span>":"");return n.VersionStatus===3&&n.ExpiryTime&&(r+=" "+a.format(p.byDate,a.formatDate(n.ExpiryTime))),r},t.prototype.refreshFromService=function(){var e=this;return Shell.UI.Spinner.show(),this.backend.getGateways().then(function(t){Shell.UI.Spinner.hide();var n=e.selectedItem()?e.selectedItem().Name:null,r=t.map(function(e){return{Name:e.GatewayName,Host:e.Host?e.Host:"",Status:d[e.Status],Gateway:e}});$.observable(e.data).refresh(r),e.setSelectedGateway(n)})},t.prototype.setSelectedGateway=function(e){if(e===null)return;var t=null,n=this.grid.fxDataGrid("option","data");for(var r=0,i=n.length;r<i;r++)if(n[r].Name.toUpperCase()===e.toUpperCase()){t=n[r];break}if(t===null)return;var s=this.grid.fxDataGrid("option","rowMetadata"),o=null;for(var r=0,i=s.length;r<i;r++)if(s[r].dataItem===t){o=s[r];break}var u=this.grid.fxDataGrid("getSelectedRows");$.each(u,function(){$.observable(this).setProperty("selected",!1)}),o||(o={dataItem:t},$.observable(s).insert(s.length,o)),$.observable(o).setProperty("selected",!0),this.grid.fxDataGrid("option","rowSelect")(null,{selected:o})},t.prototype.setCommands=function(){var e=new Shell.UI.Commands.Command(o.newDataGateway,Shell.UI.Icons.add,this.addGateway.bind(this),null,!1),t=new Shell.UI.Commands.Command(o.deleteItem,Shell.UI.Icons["delete"],this.removeGateway.bind(this),null,!0),n=new Shell.UI.Commands.Command(o.editDescription,Shell.UI.Icons.edit,this.editGateway.bind(this),null,!0),r=new Shell.UI.Commands.Command(o.downloadAndRegister,Shell.UI.Icons.download,this.downloadGateway.bind(this),null,!0),i=new Shell.UI.Commands.Command(o.refresh,Shell.UI.Icons.redo,this.refreshFromService.bind(this),null,!1);Shell.UI.Commands.add([e,t,n,r,i]),this.selectionEnabledCommands=[t,n,r]},t.prototype.addGateway=function(){var e=this,t=new n.NewDataGatewayWizardViewModel(this.backend,function(t){t!==null&&e.refreshFromService().then(function(){e.setSelectedGateway(t)})});t.show()},t.prototype.removeGateway=function(){var e=this;if(!this.selectedItem())return;var t=this.selectedItem(),n=new Shell.UI.Notifications.Confirmation(a.format(o.confirmDeleteDataGateway,t.Name),"active");n.setActions([new Shell.UI.Notifications.Buttons.yes(function(){Shell.UI.Notifications.remove(n),Shell.UI.Spinner.show(),e.backend.deleteGateway(t.Name).fail(function(t){e.showError(t.message)}).always(function(){Shell.UI.Spinner.hide(),e.refreshFromService()})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(n)})]),Shell.UI.Notifications.add(n)},t.prototype.editGateway=function(){var e=this;if(!this.selectedItem())return;r.DataGatewayUpdateDescription.show(new n.DataGatewayDescriptionDialogViewModel(this.backend,this.selectedItem().Name,this.selectedItem().Gateway.Description,function(){e.refreshFromService()}))},t.prototype.downloadGateway=function(){if(!this.selectedItem())return;var e=new n.DataGatewayDownloadAndRegisterViewModel(this.backend,ko.observable(this.selectedItem().Name),this.selectedItem().Gateway.Status);e.afterDialogClose=this.refreshFromService.bind(this),r.DataGatewayDownloadAndRegister.show(e)},t.prototype.showError=function(e){var t=new Shell.UI.Notifications.Confirmation(e,"active");t.setActions([new Shell.UI.Notifications.Buttons.ok(function(){Shell.UI.Notifications.remove(t)})]),Shell.UI.Notifications.add(t)},t}(s.Disposable);t.DataGatewaysView=y});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Dialogs/NameAssetDialogViewModel",["require","exports","../../../TS/Common/DialogInterfaces","../../../TS/View/DialogView","../../../TS/Global","../../../../DataLabClient/Disposable","../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o){var u=function(e){function t(t,n,i,s){var u=this;e.call(this),this.title=n,this.label=i,this.validationMethod=s,this.dialogDismissed=ko.observable(!1),this.resultAccepted=ko.observable(!1),this.newName=o.validatableObservable(t,s),this.newName.subscribe(function(){u.newName.startValidating(),r.DialogView.enableOk(u.canBeAccepted())})}return __extends(t,e),t.prototype.enterToAccept=function(e,t){return t.keyCode===13&&n.DialogHost?(n.DialogHost.acceptActiveDialog(),!1):!0},t.prototype.dismissed=function(e){e.accepted&&this.resultAccepted(!0),this.dialogDismissed(!0)},t.prototype.canBeAccepted=function(){return this.newName.startValidating(),this.newName.isValid()},t}(s.Disposable);t.NameAssetDialogViewModel=u});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/DatasetListView",["require","exports","../DataLabViews/AddToProjectDialogView","../TS/ViewModel/Dialogs/ApiCodeDialogViewModel","../TS/View/DialogViewFactories","../TS/Common/EntityDataDownloader","../DataLabViews/ExperimentView","../DataLabViews/ListViewHelper","../TS/ViewModel/Dialogs/NameAssetDialogViewModel","../TS/ViewModel/ExperimentEditor/NotebookHelpers","../TS/Common/ProjectUtilities","../DataLabViews/WazGridAdapter","../../DataLabClient/AssetNameValidationHelper","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../DataLabClient/Util","../../DataLabClient/Logging/IfxScenarioStopWatch"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E=d.DisposableSubscription,S=Shell.UI.Notifications,x=p.NotebookType,T=p.FeatureId,N=function(e){function t(n,r,i,o){var u=this;o===void 0&&(o=null),e.call(this),this._selectedRows=ko.observableArray([]),this._renderArea=n,this._data=[],this._client=i,this._options=$.extend({},t._defaultOptions,o),this._workspace=r;var a=[{name:m.name,field:"Name"},{name:m.submittedBy,field:"Owner"},{name:m.description2,field:"Description"},{name:m.datatype,field:"DataTypeId"},{name:m.created,field:"CreatedDate",formatter:b.formatDate,sorted:"descending"},{name:m.size,field:"Size",formatter:waz.formatters.bytesFormatter,sortFormatter:function(e){return e}}];a=l.appendProjectColumn(a,"");var f={columns:a,data:this._data,selectable:!0,multiselect:!1,resizable:!0,includeMultiselectCheckbox:!0,noRows:m.datasetsNoRows,rowSelect:function(e,t){return u.onSelect(e,t)},filterQueryDelay:100};this._gridAdapter=new c.WazGridAdapter(f,$(n).find("#grid"),!0),this._downloadableTypeIds=Object.create(null),this._downloader=new s.EndpointDownloader,this._options.listSamples?this._datasetFilter=function(e){return e.isLatest()&&e.familyId.lastIndexOf(r.id,0)!==0}:this._datasetFilter=function(e){return e.isLatest()&&e.familyId.lastIndexOf(r.id,0)===0},this._isBusy=ko.observable(!1),cdm.setActiveItem(this),Shell.UI.Spinner.show(),r.applicationCache.prefetch();var h=b.whenTrue(r.applicationCache.datasetsPrefetched);v.enableProjectBasedAssetsGroupingEnabled()&&(h=b.then(h,function(){return r.projectCache.refreshCacheIfNecissary()})),h.done(function(){b.values(u._workspace.applicationCache.dataTypeRegistry.dataTypes).filter(function(e){return e.allowUpload}).forEach(function(e){return u._downloadableTypeIds[e.dataTypeId]=!0}),u._watchCacheChanges(),u.populateDatasetList();if(v.enableProjectBasedAssetsGroupingEnabled()){var e=u._workspace.projectCache.cacheUpdated.subscribe(function(){u.populateDatasetList()});u.registerForDisposal(new d.DisposableSubscription(e))}}).always(function(){Shell.UI.Spinner.hide()})}return __extends(t,e),t.prototype.dispose=function(){this._renderArea=null,this._gridAdapter.dispose(),this._gridAdapter=null,e.prototype.dispose.call(this)},t.prototype.populateDatasetList=function(){var e=this,t=b.values(this._workspace.datasetCache.items()),n=t.filter(function(t){return e._datasetFilter(t)}),r=n.map(function(t){return{Owner:t.owner,Name:t.name(),Description:t.description(),DataTypeId:t.dataType.dataTypeId,CreatedDate:t.created,Id:t.id,FamilyId:t.familyId,DownloadLocation:t.downloadLocation,Dataset:t,Size:t.downloadLocation&&t.downloadLocation.Size||0,Project:e._workspace.getProjectListForAsset(t.familyId.split(".")[1])}});$.observable(this._data).refresh(r)},t.prototype.setCommands=function(){var e=this;this._downloadCommand=new Shell.UI.Commands.Command(m.datasetListDownloadCommand,Shell.UI.Icons.download,function(){return e.downloadDataset(e._selectedRows()[0])},null,!0),Shell.UI.Commands.add(this._downloadCommand),this._options.listSamples||(this._deleteCommand=new Shell.UI.Commands.Command(m.datasetListDeleteCommand,Shell.UI.Icons["delete"],function(){return e.deleteResourceFamily(e._selectedRows()[0])},null,!0),Shell.UI.Commands.add(this._deleteCommand),v.renameAssetsInListsEnabled()&&(this._renameCommand=new Shell.UI.Commands.Command(m.rename,Shell.UI.Icons.rename,function(){return e.renameDataset(e._gridAdapter.selectedItems()[0])},null,!0),Shell.UI.Commands.add(this._renameCommand))),v.enableOutputPortApiCodeEnabled()&&(this._apicodecopy=new Shell.UI.Commands.Command(m.datasetListGenerateAccessCodeCommand,Shell.UI.Icons.copy,_.debounce(function(){return e.apicodecopy(e._selectedRows()[0])},500,{leading:!0}),null,!0),Shell.UI.Commands.add(this._apicodecopy));var t=ko.computed(function(){return e._selectedRows().length===1}),r=ko.computed(function(){return e._selectedRows().length>0&&e._selectedRows().every(function(t){return t.Id.lastIndexOf(e._client.workspaceId,0)===0})}),i=ko.computed(function(){return e._isBusy()||!t()||!e._selectedRows().every(function(t){return e._downloadableTypeIds[t.DataTypeId]})}),s=i.subscribe(function(t){return e._downloadCommand.setDisabled(t)});this.registerForDisposal(new E(s));if(v.enableOutputPortApiCodeEnabled()){var o={PlainText:!0,GenericCSV:!0,GenericCSVNoHeader:!0,GenericTSV:!0,GenericTSVNoHeader:!0},u=ko.computed(function(){return e._isBusy()||!t()||!e._selectedRows().every(function(e){return o[e.DataTypeId]})});u.subscribe(function(t){return e._apicodecopy.setDisabled(t)})}if(v.enableProjectBasedAssetsGroupingEnabled()){this._addToProjectCommand=new Shell.UI.Commands.Command(m.AddToProjectCommand,Shell.UI.Icons.addToProject,function(){var t=e._gridAdapter.selectedItems().map(function(e){return{assetType:3,id:e.FamilyId.split(".")[1]}});n.openAddToProjectDialogWithMultipleAssets(e._workspace,t)},null,!0),Shell.UI.Commands.add([this._addToProjectCommand]);var a=ko.computed(function(){return e._selectedRows().length>0}),f=ko.computed(function(){return e._isBusy()||!a()}),l=f.subscribe(function(t){return e._addToProjectCommand.setDisabled(t)});this.registerForDisposal(new E(l))}if(!this._options.listSamples){var c=ko.computed(function(){return e._isBusy()||!t()||!r()});s=c.subscribe(function(t){return e._deleteCommand.setDisabled(t)}),this.registerForDisposal(new E(s));if(v.renameAssetsInListsEnabled()){var h=c.subscribe(function(t){return e._renameCommand.setDisabled(t)});this.registerForDisposal(new E(h))}}},t.prototype.isLanguageCommandDisabled=function(e,t){if(!e)return!1;var n=e.FamilyId.split(".")[1],r=this._workspace.applicationCache.notebookCache.getItemIfCached(n);return r?r.language!==t:!1},t.prototype.createAndOpenNotebook=function(e,t,n){var r=e.FamilyId.split(".")[1],i=this._workspace.applicationCache.notebookCache.getItemIfCached(r);v.openMultipleNotebooksFromAssetEnabled()&&(i=i&&i.language===t?i:f.NotebookHelpers.getNotebookForDataset(t,r));if(i)f.NotebookHelpers.openNotebookById(i.familyId,n);else{var s={Language:t,Author:this._workspace.getUserName(),Name:e.Name,FamilyId:e.FamilyId.split(".")[1]};if(v.openMultipleNotebooksFromAssetEnabled()){s.Name=s.Name+b.format(m.notebookNameSuffixBasedOnLanguage,t),s.FamilyId=null;var o=f.NotebookHelpers.createTagForNotebookFromDataset(r);s.Tags?s.Tags.push(o):s.Tags=[o]}var u={TemplateName:f.NotebookHelpers.getNotebookCreationTemplate(2),DatasetName:e.Name},a={Notebook:s,Parameters:u},l=new w.IfxScenarioStopWatch(16,{name:s.Name,language:s.Language});l.start(),f.NotebookHelpers.createAndOpenNotebook(a,l,n)}},t.prototype.apicodecopy=function(e){var t=e.Dataset;this._workspace.getWorkspaceSettingsAsync().done(function(e){var n=new r.ApiCodeDialogViewModel(t,e.id,e.authorizationToken);n.showDialog()}).fail(function(){var e=new r.ApiCodeDialogViewModel(t,undefined,undefined);e.showDialog()})},t.prototype.downloadDataset=function(e){this._downloader.download(e.DownloadLocation)},t.prototype.deleteResourceFamily=function(e){var n=this;this.setBusy();var r=t._extractFamilyGuid(e.FamilyId),i=this._client.getResourceDependantsAsync(r);i.always(function(){return n.setBusy(!1)});var s=b.then(i,function(e){var t=e.WebServiceGroups||[];if(t.length>0)return n.showHardDependantsAsync(t),b.when(!1);if(e.Experiments&&e.Experiments.length>0){var r=e.Experiments.map(function(e){return{name:e.Description,urlHash:Shell.UI.Navigation.calculateNavigationPath({extension:o.experimentExtensionName,type:"Experiment",name:e.ExperimentId,view:"ViewExperiment"})}});return n.confirmDeletionWithSoftDependantsAsync(r)}return n.confirmDeletetionAsync()});s.fail(function(e){var t=new Shell.UI.Notifications.Notification(b.format(m.deleteOperationFailed,e.message),"error");t.setActions([Shell.UI.Notifications.Buttons.ok()]),Shell.UI.Notifications.add(t)}).done(function(t){if(t){var r=new S.Progress(m.deletingDataset,"active",!0);r.setDismissable(!0),r.setActions([S.Buttons.close()]),S.add(r);var i=n._workspace.applicationCache.datasetCache.deleteFamily(e.FamilyId);i.done(function(){r.setTitle(m.datasetDeleted),r.setStatus("success")}).fail(function(e){r.setTitle(b.format(m.deleteOperationFailed,e.message)),r.setStatus("error")})}})},t.prototype.renameDataset=function(e){var t=this,n=new a.NameAssetDialogViewModel(e.Name,m.renameDatasetTitle,m.renameDatasetLabel,h.generateNameValidator(m.datasetType,e.Name,this._workspace.applicationCache.datasetCache)),r=new E(n.dialogDismissed.subscribe(function(i){var s=n.newName();if(n.resultAccepted()&&s!==e.Name){t.setBusy();var o=JSON.stringify({id:e.FamilyId,newName:s});g.featureUsage({featureID:201,groupID:0,data:o}),b.whenTrue(t._workspace.applicationCache.allPrefetched).done(function(){t._workspace.applicationCache.datasetCache.renameFamily(e.FamilyId,s).done(function(){t.populateDatasetList()}).always(function(){t.setBusy(!1)}).fail(function(e){var n=h.getErrorMessage(e,m.renameDatasetFailed,m.datasetType);b.showErrorNotification(n),e instanceof b.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status===409&&t._workspace.applicationCache.datasetCache.loadNewItems()})})}n.dispose(),r.dispose()}));this.registerForDisposal(r),i.NameAsset.show(n);return},t.prototype.confirmDeletetionAsync=function(){var e=this,t=m.confirmDeleteDataset,n=new Shell.UI.Notifications.Confirmation(t,"active"),r=$.Deferred();return n.setActions(Shell.UI.Notifications.ButtonSets.yesNo(function(){g.customEvent({key:"DeleteSelectedDatasetYes",type:"DatasetListView",data:JSON.stringify(e._selectedRows)}),r.resolve(!0)},function(){g.customEvent({key:"DeleteSelectedDatasetNo",type:"DatasetListView"}),Shell.UI.Notifications.remove(n),r.resolve(!1)})),Shell.UI.Notifications.add(n),b.when(r.promise())},t.prototype.confirmDeletionWithSoftDependantsAsync=function(e){var t=$.Deferred(),n=$("<div />",{"class":"dependants-list"});n.append(u.createListOfDependants(e));var r=new Shell.UI.Notifications.Confirmation(m.deleteDatasetDependenciesWarning,"active");return r.setDetailsUseHtml(!0),r.setDetailsText(n.get(0).outerHTML),r.setActions(Shell.UI.Notifications.ButtonSets.yesNo(function(){t.resolve(!0)},function(){t.resolve(!1)})),Shell.UI.Notifications.add(r),b.when(t.promise())},t.prototype.showDependants=function(e){var t=$("<div />",{"class":"dependants-list"});t.append($("<p />").text(m.deleteDatasetBlockedByDependencies)),t.append(u.createListOfDependants(e,this._options.showDependantsLinks));var n=new Shell.UI.Notifications.Notification(m.deleteDatasetBlockedByDependencies,"error");n.setDetailsUseHtml(!0),n.setDetailsText(t.get(0).outerHTML),n.setActions([Shell.UI.Notifications.Buttons.ok()]),Shell.UI.Notifications.add(n)},t.prototype.showHardDependantsAsync=function(e){var t=e.map(function(e){return{name:e.Name,urlHash:Shell.UI.Navigation.calculateNavigationPath({extension:"WebServiceGroups",type:"WebServiceGroup",name:e.Id,view:"dashboard"})}});this.showDependants(t)},t.prototype.setBusy=function(e){e===void 0&&(e=!0),e?(this._isBusy(!0),cdm.getActiveItem()===this&&Shell.UI.Spinner.show()):(this._isBusy(!1),cdm.getActiveItem()===this&&Shell.UI.Spinner.hide())},t.prototype.unsetBusy=function(){this.setBusy(!1)},t.prototype._watchCacheChanges=function(){var e=this,t=(new ko.subscribable).extend({rateLimit:0}),n=this._workspace.datasetCache.resourceFamilyUpdated.subscribe(function(e){return t.notifySubscribers(e)});this.registerForDisposal(new E(n)),n=t.subscribe(function(){return e.populateDatasetList()}),this.registerForDisposal(new E(n))},t.prototype.onSelect=function(e,t){this._selectedRows(this._gridAdapter.selectedItems())},t._extractFamilyGuid=function(e){var t=e.split(".");return t.length>1?t[1]:t[0]},t._defaultOptions={listSamples:!1,showDependantsLinks:!0},t}(d.Disposable);t.DatasetListView=N});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/ModulesListView",["require","exports","../DataLabViews/AddToProjectDialogView","../TS/View/DialogViewFactories","../TS/ViewModel/Dialogs/NameAssetDialogViewModel","../TS/Common/ProjectUtilities","../DataLabViews/WazGridAdapter","../../DataLabClient/AssetNameValidationHelper","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=f.DisposableSubscription,m=a.FeatureId,g=function(e){function t(t,n,r){var i=this;e.call(this),this._renderArea=t,this._data=[],this._client=r,this._moduleCacheOnChange=null,this._workspace=n,this._isBusy=ko.observable(!1);var u=[{name:c.name,field:"Name"},{name:c.submittedBy,field:"Owner"},{name:c.version,field:"Version"},{name:c.description2,field:"Description"},{name:c.created,field:"CreatedDate",formatter:d.formatDate,sorted:"descending"}];u=s.appendProjectColumn(u,"");var a={columns:u,data:this._data,selectable:!0,selectFirstRowByDefault:!0,multiselect:!1,resizable:!0,includeMultiselectCheckbox:!0};this._gridAdapter=new o.WazGridAdapter(a,$(t).find("#grid"),!0);if(l.enableProjectBasedAssetsGroupingEnabled()){var h=this._workspace.projectCache.cacheUpdated.subscribe(function(){i.populateModuleList()});this.registerForDisposal(new f.DisposableSubscription(h))}cdm.setActiveItem(this)}return __extends(t,e),t.prototype.populateModuleList=function(){var e=this,t=d.map(this._workspace.moduleCache.items(),function(t){return t.isLatest()&&t.id.lastIndexOf(window.environment.globalWorkspaceId,0)!==0?{Owner:t.owner,Name:t.name(),Version:t.clientVersion,Description:t.description(),CreatedDate:t.created,Id:t.id,Project:e._workspace.getProjectListForAsset(t.familyId.split(".")[1]),FamilyId:t.familyId}:undefined});t=d.filter(t,function(e){return e===undefined?!1:!0}),$.observable(this._data).refresh(t),this._gridAdapter.createGrid()},t.prototype.setCommands=function(){var e=this,t=ko.computed(function(){return e._gridAdapter.selectedItems().length===1}),r=ko.computed(function(){return e._gridAdapter.selectedItems().length>0&&e._gridAdapter.selectedItems().every(function(t){return t.Id.lastIndexOf(e._client.workspaceId,0)===0})});if(l.renameCustomModuleEnabled()){this._renameCommand=new Shell.UI.Commands.Command(c.rename,Shell.UI.Icons.rename,function(){return e.renameModule(e._gridAdapter.selectedItems()[0])},null,!0),Shell.UI.Commands.add(this._renameCommand);var i=ko.computed(function(){return e._isBusy()||!t()||!r()}),s=i.subscribe(function(t){return e._renameCommand.setDisabled(t)});this.registerForDisposal(new v(s))}if(l.enableProjectBasedAssetsGroupingEnabled()){this._addToProjectCommand=new Shell.UI.Commands.Command(c.AddToProjectCommand,Shell.UI.Icons.addToProject,function(){var t=e._gridAdapter.selectedItems().map(function(e){return{assetType:4,id:e.FamilyId.split(".")[1]}});n.openAddToProjectDialogWithMultipleAssets(e._workspace,t)},null,!0),Shell.UI.Commands.add([this._addToProjectCommand]);var o=ko.computed(function(){return e._isBusy()||!r()}),u=o.subscribe(function(t){return e._addToProjectCommand.setDisabled(t)});this.registerForDisposal(new v(u))}},t.prototype.dispose=function(){this._moduleCacheOnChange&&this._moduleCacheOnChange.dispose(),this._renderArea=null,this._gridAdapter.dispose(),this._gridAdapter=null,e.prototype.dispose.call(this)},t.prototype.renameModule=function(e){var t=this,n=new i.NameAssetDialogViewModel(e.Name,c.renameModuleTitle,c.renameModuleLabel,u.generateNameValidator(c.moduleType,e.Name,this._workspace.applicationCache.moduleCache)),s=new v(n.dialogDismissed.subscribe(function(r){var i=n.newName();if(n.resultAccepted()&&i!==e.Name){t.setBusy();var o=JSON.stringify({id:e.FamilyId,newName:i});h.featureUsage({featureID:200,groupID:0,data:o}),d.whenTrue(t._workspace.applicationCache.allPrefetched).done(function(){t._workspace.applicationCache.moduleCache.renameFamily(e.FamilyId,i).always(function(){t.setBusy(!1)}).fail(function(e){var n=u.getErrorMessage(e,c.renameModuleFailed,c.moduleType);d.showErrorNotification(n),e instanceof d.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status===409&&t._workspace.applicationCache.moduleCache.loadNewItems()})})}n.dispose(),s.dispose()}));this.registerForDisposal(s),r.NameAsset.show(n);return},t.prototype.watchCacheChanges=function(){var e=this,t=(new ko.subscribable).extend({rateLimit:0}),n=this._workspace.moduleCache.resourceFamilyUpdated.subscribe(function(e){return t.notifySubscribers(e)});this.registerForDisposal(new v(n)),n=t.subscribe(function(){return e.populateModuleList()}),this.registerForDisposal(new v(n))},t.prototype.setBusy=function(e){e===void 0&&(e=!0),e?(this._isBusy(!0),cdm.getActiveItem()===this&&Shell.UI.Spinner.show()):(this._isBusy(!1),cdm.getActiveItem()===this&&Shell.UI.Spinner.hide())},t}(f.Disposable);t.ModuleListView=g});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/NotebookListView",["require","exports","../DataLabViews/AddToProjectDialogView","../TS/View/DialogViewFactories","../TS/ViewModel/ExperimentEditor/GalleryNotebooksHelpers","../TS/Global","../DataLabViews/ListViewHelper","../TS/ViewModel/ExperimentEditor/NotebookHelpers","../TS/Common/ProjectUtilities","../TS/ViewModel/Dialogs/RenameNotebookDialogViewModel","../TS/Common/SharedSpinner","../DataLabViews/WazGridAdapter","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../DataLabClient/Trial","../../DataLabClient/Util","../../DataLabClient/Model/User"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E=p.DisposableSubscription,S=h.FeatureId,x=function(e){function t(t,n,r){var i=this;e.call(this),this._commandsDisabled=ko.observable(!1),this._renderArea=t,this._data=[],this._client=r,this._workspace=n,this._sharedSpinner=l.SharedSpinner.create(this);var s=[{name:v.name,field:"Name",type:"navigationLink"},{name:v.apiCodeDialogLanguageLabel,field:"Language"},{name:v.lastModified,field:"ModifiedDate",formatter:b.formatDate,sorted:"descending"}];s=a.appendProjectColumn(s,"");var o={columns:s,data:this._data,selectable:!0,selectFirstRowByDefault:!0,multiselect:!1,resizable:!0,includeMultiselectCheckbox:!0,rowSelect:function(e,t){return i.onSelect(e,t)},noRows:w.user.isWorkspaceOwner?v.notebooksListNoRows:v.notWorkspaceOwnerNoNotebooks,extendWazGrid:function(e){e.on("click",".waz-grid-navigation-link a",function(e){var t=$(e.target).closest("tr").view().data;t.rowMetadata&&u.NotebookHelpers.openNotebookById(t.rowMetadata.dataItem.FamilyId,b.addSpinnerToBlankWindow())})}};this._gridAdapter=new c.WazGridAdapter(o,$(this._renderArea).find("#grid"),!1),cdm.setActiveItem(this),this._watchCacheChanges(),this.populateNotebookList()}return __extends(t,e),t.prototype.dispose=function(){this._renderArea=null,this._gridAdapter.dispose(),this._gridAdapter=null,e.prototype.dispose.call(this)},t.prototype.populateNotebookList=function(){var e=this,t=b.values(this._workspace.notebookCache.items()),n=t.map(function(t){return{Author:t.author,FamilyId:t.familyId,Language:t.language,ModifiedDate:t.modified,Name:t.friendlyName,Notebook:t,Project:e._workspace.getProjectListForAsset(t.familyId)}});$.observable(this._data).refresh(n),this._gridAdapter.createGrid()},t.prototype.setCommands=function(){var e=this;this._deleteCommand=new Shell.UI.Commands.Command(v.deleteItem,Shell.UI.Icons["delete"],this.deleteConfirmation.bind(this),null,!0),Shell.UI.Commands.add(this._deleteCommand),this._renameCommand=new Shell.UI.Commands.Command(v.rename,Shell.UI.Icons.rename,function(){return e.renameNotebook(e._gridAdapter.selectedItems()[0])},null,!0),Shell.UI.Commands.add(this._renameCommand),d.publishNotebooksToGalleryEnabled()&&(this._publishCommand=new Shell.UI.Commands.Command(v.commandsPublishExperimentToCommunity,Shell.UI.Icons.publishToCommunity,function(){return e.publishNotebook(e._gridAdapter.selectedItems()[0])},null,!0),Shell.UI.Commands.add(this._publishCommand)),d.enableProjectBasedAssetsGroupingEnabled()&&(this._addToProjectCommand=new Shell.UI.Commands.Command(v.AddToProjectCommand,Shell.UI.Icons.addToProject,function(){var t=e._gridAdapter.selectedItems().map(function(e){return{assetType:1,id:e.FamilyId}});n.openAddToProjectDialogWithMultipleAssets(e._workspace,t)},null,!0),Shell.UI.Commands.add([this._addToProjectCommand]))},t.prototype._watchCacheChanges=function(){var e=this,t=(new ko.subscribable).extend({rateLimit:0}),n=this._workspace.notebookCache.resourceFamilyUpdated.subscribe(function(e){return t.notifySubscribers(e)});this.registerForDisposal(new E(n)),n=t.subscribe(function(){return e.populateNotebookList()}),this.registerForDisposal(new E(n));if(d.enableProjectBasedAssetsGroupingEnabled()){var r=this._workspace.projectCache.cacheUpdated.subscribe(function(){return e.populateNotebookList()});this.registerForDisposal(new E(r))}},t.prototype.onSelect=function(e,t){var n=this._gridAdapter.selectedItems(),r=this._commandsDisabled();this._deleteCommand&&this._deleteCommand.setDisabled(n.length===0||r),this._renameCommand&&this._renameCommand.setDisabled(n.length!==1||r),this._publishCommand&&this._publishCommand.setDisabled(n.length!==1||r),this._addToProjectCommand&&this._addToProjectCommand.setDisabled(n.length===0||r)},t.prototype.renameNotebook=function(e){var t=this,n=new f.RenameNotebookDialogViewModel(e.Name,e.FamilyId),i=new E(n.dialogDismissed.subscribe(function(r){if(n.resultAccepted()&&n.newNotebookName()!==e.Name){Shell.UI.Spinner.show();var s=JSON.stringify({notebookId:e.FamilyId,newName:n.newNotebookName()});m.featureUsage({featureID:123,groupID:124,data:s}),b.whenTrue(t._workspace.applicationCache.allPrefetched).done(function(){t._workspace.applicationCache.notebookCache.renameFamily(e.FamilyId,n.newNotebookName()).always(function(){Shell.UI.Spinner.hide()}).fail(function(e){var n=u.NotebookHelpers.getErrorMessage(e,v.renameNotebookFailed);b.showErrorNotification(n),e instanceof b.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status===409&&t._workspace.applicationCache.notebookCache.loadNewItems()})})}n.dispose(),i.dispose()}));this.registerForDisposal(i),r.RenameNotebook.show(n);return},t.prototype.deleteConfirmation=function(){var e=this,t=$("<div />",{"class":"dependants-list"}),n=this._gridAdapter.selectedItems(),r=n.map(function(e){return{name:e.Name}});t.append(o.createListOfDependants(r));var i=n.length>1?b.format(v.confirmDeleteSelectedNotebooks,n.length.toString()):v.confirmDeleteSelectedNotebook,s=new Shell.UI.Notifications.Confirmation(i,"active");s.setDetailsUseHtml(!0),s.setDetailsText(t.get(0).outerHTML),s.setActions([new Shell.UI.Notifications.Buttons.yes(function(){var t=JSON.stringify(r);m.customEvent({key:"DeleteSelectedNotebooksYes",type:"NotebookListView",data:t});var r=n.map(function(e){return e.FamilyId});m.featureUsage({featureID:123,groupID:125,data:t}),e.delete(n)}),new Shell.UI.Notifications.Buttons.no(function(){m.customEvent({key:"DeleteSelectedNotebooksNo",type:"NotebookListView"}),Shell.UI.Notifications.remove(s)})]),Shell.UI.Notifications.add(s)},t.prototype.delete=function(e){var t=this,n=[],r=[];e.forEach(function(e){var i=t._workspace.applicationCache.notebookCache.deleteFamily(e.FamilyId);i.fail(function(t){r.push({item:e,error:t})}),i=b.then(i,$.noop,function(e){return b.when(null)}),n.push(i)});var i=$.when.apply($,n).done(function(){if(r.length>0){var t=e.length>1?b.format(v.failedToDeleteNotebooks,r.length.toString(),e.length.toString()):v.failedToDeleteNotebook,n=new Shell.UI.Notifications.Notification(t,"error");n.setActions([Shell.UI.Notifications.Buttons.ok()]);var i=$("<ul/>").addClass("bound-height");r.map(function(e){return o.formatListItemDeleteError(e,s.ResourceType.Notebook)}).forEach(function(e){$("<li/>").text(e).appendTo(i)}),n.setDetailsUseHtml(!0),n.setDetailsText(i.get(0).outerHTML),Shell.UI.Notifications.add(n)}});this._sharedSpinner.showFor(i)},t.prototype.publishNotebook=function(e){var t=this;m.featureUsage({featureID:123,groupID:169,data:JSON.stringify({notebookId:e.FamilyId})});if(!y.isPublishToCommunityEnabled())throw m.error("disabled feature dialog not implemented","publishNotebook"),new Error("not implemented");this._commandsDisabled(!0);var n=i.runPublishNotebookWizard(e.Notebook);n.always(function(){t._commandsDisabled(!1)})},t}(p.Disposable);t.NotebookListView=x});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/ProjectDetailView",["require","exports","../TS/View/ProjectCollection/ProjectConfigurationDialogView","../../DataLabClient/Disposable","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Util","../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u){var a=n.ProjectConfigurationDialog,f=r.DisposableSubscription,l=function(e){function t(t,n,i){var u=this;e.call(this),this.renderArea=t,this.projectDetailVM=n,this.userName=i,this.projectDetailVM.shouldShowTitle(!1),o.initializeTemplateIfNecessary("projectDetailsTemplate",ExperimentEditorTemplates._projectDetailsMarkup),this.registerForDisposal(new r.DisposableSetHTML(this.renderArea.get(0),ExperimentEditorTemplates._projectDetailMarkup)),this.registerForDisposal(this.projectDetailVM);var a=this.renderArea.get(0);o.checkForExistingKOBindings(a),s.info("applying bindings",null,JSON.stringify({viewModel:"projectdetail"})),this.registerForDisposal(new r.DisposableKOApplyBindings(this.projectDetailVM,a)),cdm.setActiveItem(this),this.setTitle(),$(".fxshell-nav2-item.selected a span").text(this.projectDetailVM.project().Name).attr("title",this.projectDetailVM.project().Name),this.registerForDisposal(new f(this.projectDetailVM.project.subscribe(function(e){u.setTitle()})))}return __extends(t,e),t.prototype.setCommands=function(){var e=this;this._editCommand||(this._editCommand=new Shell.UI.Commands.Command(i.editCommand,Shell.UI.Icons.edit,function(){a.show(u.workspace,e.projectDetailVM.project,function(t){e.projectDetailVM.project(t)})},null,!1)),Shell.UI.Commands.add(this._editCommand)},t.prototype.setTitle=function(){document.querySelector("#tabcontainer .itemtitle").textContent=this.projectDetailVM.project().Name},t}(r.Disposable);t.ProjectDetailView=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/ProjectListView",["require","exports","../TS/Common/ProjectUtilities","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/FeaturesExtensions","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f=i.DisposableSubscription,l=Shell.UI.Notifications,c=function(e){function t(n,r,s){var l=this;e.call(this),this.renderArea=n,this.projectListVM=r,this.userName=s,this.registerForDisposal(new i.DisposableSetHTML(this.renderArea.get(0),ExperimentEditorTemplates._projectListMarkup)),this._data=[];var c=[{name:o.projectListHeaderName,field:"Name",type:"navigationLink",navigationField:"ContainerId"},{name:o.projectListHeaderAuthor,field:"Creator"},{name:o.projectListHeaderContents,field:"Contents",formatter:t.formatProjectContents},{name:o.projectListHeaderLastUsed,field:"ChangedTime",formatter:a.formatDate,sorted:"descending"}];this._grid=$(n).find("#grid").wazDataGrid({columns:c,data:this._data,selectable:!0,multiselect:!1,resizable:!0,noRows:a.format('<div class="createProjectLink" onclick="NewBlankProjectDialogView.NewBlankProjectDialog.show()">{0}</div>',o.projectListCreateProjectLink),rowSelect:function(e,t){return l.onSelect(e,t)}});var h=r.projectsList.subscribe(function(e){l.populateGridData()});this.registerForDisposal(new f(h)),this.registerForDisposal(this.projectListVM);var p=this.renderArea.get(0);a.checkForExistingKOBindings(p),u.info("applying bindings",null,JSON.stringify({viewModel:"projects"})),this.registerForDisposal(new i.DisposableKOApplyBindings(this.projectListVM,p)),cdm.setActiveItem(this)}return __extends(t,e),t.formatProjectContents=function(e){var n='<span class="projectContent">',r=n;return r+=t.formatProjectAssetCount(e.Experiment,"experimentAssetIcon"),r+=t.formatProjectAssetCount(e.WebService,"webServiceAssetIcon"),s.canEnableIPythonNotebookFeature()&&(r+=t.formatProjectAssetCount(e.Notebook,"notebookAssetIcon")),r+=t.formatProjectAssetCount(e.Module,"moduleAssetIcon"),r+=t.formatProjectAssetCount(e.DataSource,"datasetAssetIcon"),r+=t.formatProjectAssetCount(e.TrainedModel,"trainedModelAssetIcon"),r+=t.formatProjectAssetCount(e.Transform,"transformAssetIcon"),r===n&&(r+=a.format('<span class="projectContentEmpty">{0}</span>',o.projectListNoContentPlaceholder)),r+="</span>",r},t.formatProjectAssetCount=function(e,t){var n="";if(e){var r=e.length;r>0&&(n=a.format('<span><span class="{0}"></span><span class="projectAssetCount">{1}</span></div>',t,r.toString()))}return n},t.prototype.dispose=function(){this.renderArea=null,e.prototype.dispose.call(this)},t.prototype.setCommands=function(){var e=this;this._deleteCommand=new Shell.UI.Commands.Command(o.deleteItem,Shell.UI.Icons["delete"],function(){e.deleteConfirmation().fail(function(e){var t=new Shell.UI.Notifications.Notification(a.format(o.deleteOperationFailed,e.message),"error");t.setActions([Shell.UI.Notifications.Buttons.ok()]),Shell.UI.Notifications.add(t)}).done(function(t){if(t){var n=new l.Progress(o.deletingProject,"active",!0);n.setDismissable(!0),n.setActions([l.Buttons.close()]),l.add(n);var r=e.projectListVM.deleteProject();r.done(function(){e.populateGridData(),n.setTitle(o.projectDeleted),n.setStatus("success")}).fail(function(e){n.setTitle(a.format(o.deleteOperationFailed,e.message)),n.setStatus("error")})}})},null,!0,o.projectDeleteTooltip),Shell.UI.Commands.add(this._deleteCommand);var t=this.projectListVM.deleteDisabled.subscribe(function(t){e._deleteCommand.setDisabled(t),e._deleteCommand.setTooltip(t?o.projectDeleteTooltip:"")});this.registerForDisposal(new f(t))},t.prototype.populateGridData=function(){$.observable(this._data).refresh(this.projectListVM.projectsList().map(function(e){return{Name:e.Name,Creator:e.Creator,Contents:e.Contents,ChangedTime:a.parseJsonDate(e.ChangedTime),type:n.ProjectType.name,ContainerId:e.ContainerId,project:e}}))},t.prototype.onSelect=function(e,t){var n=this._grid.wazDataGrid("getSelectedRows");this.projectListVM.selectProject(n.length>0?n[0].dataItem.project:null)},t.prototype.deleteConfirmation=function(){var e=this.projectListVM.selectedProject(),t=$.Deferred(),n=o.confirmDeleteSelectedProject,r=new l.Confirmation(n,"active");return r.setDetailsText(e.Name),r.setActions(l.ButtonSets.yesNo(function(){u.featureUsage({featureID:190,groupID:171,data:JSON.stringify(e)}),t.resolve(!0)},function(){u.featureUsage({featureID:191,groupID:171,data:JSON.stringify(e)}),Shell.UI.Notifications.remove(r),t.resolve(!1)})),Shell.UI.Notifications.add(r),a.when(t.promise())},t._PROPERTY_PANE_ID="#propertyPane",t}(i.Disposable);t.ProjectListView=c});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/ProjectListViewModel",["require","exports","../DataLabViews/ProjectDetailViewModel","../TS/Common/ProjectUtilities","../../DataLabClient/CustomEvent","../../DataLabClient/Disposable","../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){var a=function(e){function t(t){var s=this;e.call(this),this.workspace=t,this._beforePopulateList=new i.CustomEvent,this._afterPopulateList=new i.CustomEvent,this._listPopulationFailed=new i.CustomEvent,this.projectsList=ko.observableArray([]),this.selectedProject=ko.observable(null),u.initializeTemplateIfNecessary("projectDetailsTemplate",ExperimentEditorTemplates._projectDetailsMarkup),this.projectDetailViewModel=new n.ProjectDetailViewModel(this.selectedProject,t,!0,!0),ko.components.unregister("project-details"),ko.components.register("project-details",{viewModel:{instance:this.projectDetailViewModel},template:ExperimentEditorTemplates._projectDetailMarkup}),this.selectProject=function(e){s.selectedProject(e)},this.navigateToProject=function(e){r.navigateToProject(e.ContainerId,e.Name)},this.registerForDisposal(this.projectDetailViewModel),this.deleteDisabled=ko.pureComputed(function(){return s.selectedProject()===null||!o.ProjectCollection.IsProjectEmpty(s.selectedProject())})}return __extends(t,e),Object.defineProperty(t.prototype,"beforePopulateList",{get:function(){return this._beforePopulateList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterPopulateList",{get:function(){return this._afterPopulateList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listPopulationFailed",{get:function(){return this._listPopulationFailed},enumerable:!0,configurable:!0}),t.prototype.deleteProject=function(){var e=this;return this.workspace.deleteProjectAsync(this.selectedProject()).done(function(){e.populateList(),e.selectedProject(null)})},t.prototype.populateList=function(){var e=this;this.beforePopulateList.notify(),this.workspace.getProjectsAsync().done(function(t){e.projectsList(t),e.afterPopulateList.notify()}).fail(function(t){e.listPopulationFailed.notify(t)})},t}(s.Disposable);t.ProjectListViewModel=a});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/TrainedModelListView",["require","exports","../DataLabViews/AddToProjectDialogView","../TS/View/DialogViewFactories","../DataLabViews/ExperimentView","../DataLabViews/ListViewHelper","../TS/ViewModel/Dialogs/NameAssetDialogViewModel","../TS/Common/ProjectUtilities","../DataLabViews/WazGridAdapter","../../DataLabClient/AssetNameValidationHelper","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=c.DisposableSubscription,y=Shell.UI.Notifications,b=l.FeatureId,w=function(e){function t(n,r,i,s){var o=this;s===void 0&&(s=null),e.call(this),this._selectedRows=ko.observableArray([]),this._renderArea=n,this._data=[],this._client=i,this._options=$.extend({},t._defaultOptions,s),this._workspace=r;var f=[{name:p.name,field:"Name"},{name:p.submittedBy,field:"Owner"},{name:p.description2,field:"Description"},{name:p.datatype,field:"DataTypeId"},{name:p.created,field:"CreatedDate",formatter:m.formatDate,sorted:"descending"}];f=u.appendProjectColumn(f,"");var l={columns:f,data:this._data,selectable:!0,multiselect:!1,resizable:!0,includeMultiselectCheckbox:!0,noRows:p.trainedModelsNoRows,rowSelect:function(e,t){return o.onSelect(e,t)},filterQueryDelay:100};this._gridAdapter=new a.WazGridAdapter(l,$(n).find("#grid"),!0),this._isBusy=ko.observable(!1),cdm.setActiveItem(this),this._watchCacheChanges(),this.populateList();if(h.enableProjectBasedAssetsGroupingEnabled()){var d=this._workspace.projectCache.cacheUpdated.subscribe(function(){o.populateList()});this.registerForDisposal(new c.DisposableSubscription(d))}}return __extends(t,e),t.prototype.dispose=function(){this._renderArea=null,this._gridAdapter.dispose(),this._gridAdapter=null,e.prototype.dispose.call(this)},t.prototype.populateList=function(){var e=this,t=m.values(this._workspace.trainedModelCache.items()),n=t.map(function(t){return{Owner:t.owner,Name:t.name(),Description:t.description(),DataTypeId:t.dataType.dataTypeId,CreatedDate:t.created,Id:t.id,FamilyId:t.familyId,Project:e._workspace.getProjectListForAsset(t.familyId.split(".")[1])}});$.observable(this._data).refresh(n)},t.prototype.setCommands=function(){var e=this;this._deleteCommand=new Shell.UI.Commands.Command(p.deleteItem,Shell.UI.Icons["delete"],function(){return e.deleteResourceFamily(e._selectedRows()[0])},null,!0),Shell.UI.Commands.add(this._deleteCommand);var t=ko.computed(function(){return e._selectedRows().length===1}),r=ko.computed(function(){return e._selectedRows().length>0&&e._selectedRows().every(function(t){return t.Id.lastIndexOf(e._client.workspaceId,0)===0})}),i=ko.computed(function(){return e._isBusy()||!t()||!r()}),s=i.subscribe(function(t){return e._deleteCommand.setDisabled(t)});this.registerForDisposal(new g(s));if(h.renameAssetsInListsEnabled()){this._renameCommand=new Shell.UI.Commands.Command(p.rename,Shell.UI.Icons.rename,function(){return e.renameTrainedModel(e._gridAdapter.selectedItems()[0])},null,!0),Shell.UI.Commands.add(this._renameCommand);var o=i.subscribe(function(t){return e._renameCommand.setDisabled(t)});this.registerForDisposal(new g(o))}if(h.enableProjectBasedAssetsGroupingEnabled()){this._addToProjectCommand=new Shell.UI.Commands.Command(p.AddToProjectCommand,Shell.UI.Icons.addToProject,function(){var t=e._gridAdapter.selectedItems().map(function(e){return{assetType:5,id:e.FamilyId.split(".")[1]}});n.openAddToProjectDialogWithMultipleAssets(e._workspace,t)},null,!0),Shell.UI.Commands.add([this._addToProjectCommand]);var u=ko.computed(function(){return e._selectedRows().length>0}),a=ko.computed(function(){return e._isBusy()||!u()}),f=a.subscribe(function(t){return e._addToProjectCommand.setDisabled(t)});this.registerForDisposal(new g(f))}},t.prototype.deleteResourceFamily=function(e){var n=this;this.setBusy();var r=t._extractFamilyGuid(e.FamilyId),s=this._client.getResourceDependantsAsync(r);s.always(function(){return n.setBusy(!1)});var o=m.then(s,function(e){var t=e.WebServiceGroups||[];if(t.length>0)return n.showHardDependantsAsync(t),m.when(!1);if(e.Experiments&&e.Experiments.length>0){var r=e.Experiments.map(function(e){return{name:e.Description,urlHash:Shell.UI.Navigation.calculateNavigationPath({extension:i.experimentExtensionName,type:"Experiment",name:e.ExperimentId,view:"ViewExperiment"})}});return n.confirmDeletionWithSoftDependantsAsync(r)}return n.confirmDeletetionAsync()});o.fail(function(e){var t=new Shell.UI.Notifications.Notification(m.format(p.deleteOperationFailed,e.message),"error");t.setActions([Shell.UI.Notifications.Buttons.ok()]),Shell.UI.Notifications.add(t)}).done(function(t){if(t){var r=new y.Progress(p.deletingTrainedModel,"active",!0);r.setDismissable(!0),r.setActions([y.Buttons.close()]),y.add(r);var i=n._workspace.applicationCache.trainedModelCache.deleteFamily(e.FamilyId);i.done(function(){r.setTitle(p.trainedModelDeleted),r.setStatus("success")}).fail(function(e){r.setTitle(m.format(p.deleteOperationFailed,e.message)),r.setStatus("error")})}})},t.prototype.renameTrainedModel=function(e){var t=this,n=new o.NameAssetDialogViewModel(e.Name,p.renameTrainedModelTitle,p.renameTrainedModelLabel,f.generateNameValidator(p.trainedModelType,e.Name,this._workspace.applicationCache.trainedModelCache)),i=new g(n.dialogDismissed.subscribe(function(r){var s=n.newName();if(n.resultAccepted()&&s!==e.Name){t.setBusy();var o=JSON.stringify({id:e.FamilyId,newName:s});d.featureUsage({featureID:199,groupID:0,data:o}),m.whenTrue(t._workspace.applicationCache.allPrefetched).done(function(){t._workspace.applicationCache.trainedModelCache.renameFamily(e.FamilyId,s).always(function(){t.setBusy(!1)}).fail(function(e){var n=f.getErrorMessage(e,p.renameTrainedModelFailed,p.trainedModelType);m.showErrorNotification(n),e instanceof m.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status===409&&t._workspace.applicationCache.trainedModelCache.loadNewItems()})})}n.dispose(),i.dispose()}));this.registerForDisposal(i),r.NameAsset.show(n);return},t.prototype.confirmDeletetionAsync=function(){var e=this,t=p.confirmDeleteTrainedModel,n=new Shell.UI.Notifications.Confirmation(t,"active"),r=$.Deferred();return n.setActions(Shell.UI.Notifications.ButtonSets.yesNo(function(){d.customEvent({key:"DeleteSelectedTrainedModelYes",type:"TrainedModelListView",data:JSON.stringify(e._selectedRows)}),r.resolve(!0)},function(){d.customEvent({key:"DeleteSelectedTrainedModelNo",type:"TrainedModelListView"}),Shell.UI.Notifications.remove(n),r.resolve(!1)})),Shell.UI.Notifications.add(n),m.when(r.promise())},t.prototype.confirmDeletionWithSoftDependantsAsync=function(e){var t=$.Deferred(),n=$("<div />",{"class":"dependants-list"});n.append(s.createListOfDependants(e));var r=new Shell.UI.Notifications.Confirmation(p.deleteTrainedModelDependenciesWarning,"active");return r.setDetailsUseHtml(!0),r.setDetailsText(n.get(0).outerHTML),r.setActions(Shell.UI.Notifications.ButtonSets.yesNo(function(){t.resolve(!0)},function(){t.resolve(!1)})),Shell.UI.Notifications.add(r),m.when(t.promise())},t.prototype.showDependants=function(e){var t=$("<div />",{"class":"dependants-list"});t.append($("<p />").text(p.deleteTrainedModelBlockedByDependencies)),t.append(s.createListOfDependants(e,this._options.showDependantsLinks));var n=new Shell.UI.Notifications.Notification(p.deleteTrainedModelBlockedByDependencies,"error");n.setDetailsUseHtml(!0),n.setDetailsText(t.get(0).outerHTML),n.setActions([Shell.UI.Notifications.Buttons.ok()]),Shell.UI.Notifications.add(n)},t.prototype.showHardDependantsAsync=function(e){var t=e.map(function(e){return{name:e.Name,urlHash:Shell.UI.Navigation.calculateNavigationPath({extension:"WebServiceGroups",type:"WebServiceGroup",name:e.Id,view:"dashboard"})}});this.showDependants(t)},t.prototype.setBusy=function(e){e===void 0&&(e=!0),e?(this._isBusy(!0),cdm.getActiveItem()===this&&Shell.UI.Spinner.show()):(this._isBusy(!1),cdm.getActiveItem()===this&&Shell.UI.Spinner.hide())},t.prototype.unsetBusy=function(){this.setBusy(!1)},t.prototype._watchCacheChanges=function(){var e=this,t=this._workspace.trainedModelCache.resourceFamilyUpdated.subscribe(function(){return e.populateList()});this.registerForDisposal(new g(t))},t.prototype.onSelect=function(e,t){this._selectedRows(this._gridAdapter.selectedItems())},t._extractFamilyGuid=function(e){var t=e.split(".");return t.length>1?t[1]:t[0]},t._defaultOptions={showDependantsLinks:!0},t}(c.Disposable);t.TrainedModelListView=w}),define("generated/DataLabClient/Contracts/V1/Common/WebServiceContracts",["require","exports"],function(e,t){(function(e){e[e.InTesting=0]="InTesting",e[e.ReadyForProduction=1]="ReadyForProduction",e[e.DeployedToProduction=2]="DeployedToProduction",e[e.Retired=3]="Retired"})(t.ModelPackageStatusCode||(t.ModelPackageStatusCode={}));var n=t.ModelPackageStatusCode;(function(e){e[e.None="None"]="None",e[e.Error="Error"]="Error",e[e.All="All"]="All"})(t.DiagnosticsTraceLevel||(t.DiagnosticsTraceLevel={}));var r=t.DiagnosticsTraceLevel;(function(e){e[e.Staging="Staging"]="Staging",e[e.Production="Production"]="Production"})(t.WebServiceType||(t.WebServiceType={}));var i=t.WebServiceType});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/Step1ViewModel",["require","exports","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Validation"],function(e,t,n,r,i){var s=function(e){function t(n){var r=this;n===void 0&&(n=""),e.call(this),this.submissionName=i.validatableObservable(n,t.validateSubmissionName),this.submissionName.startValidating(),this.isValid=ko.computed(function(){return r.submissionName.isValid()})}return __extends(t,e),t.validateSubmissionName=function(e){return/\S/.test(e)?null:r.ErrorSubmissionNameMustContainAtLeastOneNonWhitespaceCharacter},t}(n.Disposable);t.Step1ViewModel=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/TermAcceptanceStepViewModel",["require","exports","../../../../DataLabClient/Disposable"],function(e,t,n){var r=function(e){function t(t){e.call(this),this.content=t,this.isTermAccepted=ko.observable(!1)}return __extends(t,e),t}(n.Disposable);t.TermAcceptanceStepViewModel=r}),define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnExperimentMissingTrainedModel",["require","exports","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Model/TrainedModelNode","../../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(){function e(){}return e.prototype.runValidation=function(e){if(!e.webServiceGroup.StagingWebService||!e.linkedExperiment)return null;var t=!1;return i.forEach(e.linkedExperiment.nodes(),function(n){var i;n instanceof r&&(i=n.trainedModel.id,e.linkedExperiment.getTrainedModelNode(i)&&(t=!0))}),t?null:{summary:n.competitionSubmissionErrorExperimentMissingTrainedModel,details:""}},e}();t.ValidationRuleOnExperimentMissingTrainedModel=s}),define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnWebServiceExistence",["require","exports","../../../../DataLabClient/LocalizedResources"],function(e,t,n){var r=function(){function e(){}return e.prototype.runValidation=function(e){return e.webServiceGroup&&e.webServiceGroup.StagingWebService?null:{summary:n.competitionSubmissionErrorWebServiceNotFound,details:""}},e}();t.ValidationRuleOnWebServiceExistence=r}),define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnWebServiceMissingInputPort",["require","exports","../../../TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionSubmissionUtilities","../../../../DataLabClient/LocalizedResources"],function(e,t,n,r){var i=function(){function e(){}return e.prototype.runValidation=function(e){if(!e.webServiceGroup.StagingWebService)return null;var t=n.getStagingWebServiceModelPackage(e.webServiceGroup);return!t.Inputs||t.Inputs.length===0?{summary:r.competitionSubmissionErrorWebServiceInputPortNotFound,details:""}:null},e}();t.ValidationRuleOnWebServiceMissingInputPort=i}),define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnWebServiceMissingOutputPort",["require","exports","../../../TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionSubmissionUtilities","../../../../DataLabClient/LocalizedResources"],function(e,t,n,r){var i=function(){function e(){}return e.prototype.runValidation=function(e){if(!e.webServiceGroup.StagingWebService)return null;var t=n.getStagingWebServiceModelPackage(e.webServiceGroup);return!t.Outputs||t.Outputs.length===0?{summary:r.competitionSubmissionErrorWebServiceOutputPortNotFound,details:""}:null},e}();t.ValidationRuleOnWebServiceMissingOutputPort=i}),define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnWebServiceSchema",["require","exports","../../../TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionSubmissionUtilities","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){var o=function(){function e(){}return e.prototype.runValidation=function(e){if(!r.competitionEntrySchemaValidationEnabled())return null;if(!e.webServiceSchema)return null;var t=n.getStagingWebServiceModelPackage(e.webServiceGroup);if(!t.Inputs||!t.Outputs)return null;var s=null;if(e.webServiceSchema.InputSchema){if(!t.Inputs||t.Inputs.length===0)return{summary:i.competitionSubmissionErrorMissingInput,details:""};if(t.Inputs.length>1)return{summary:i.competitionSubmissionErrorMultiInputPorts,details:""};s=this.validateSchema(e.webServiceSchema.InputSchema,t.Inputs[0].Schema)}var o=null;if(e.webServiceSchema.OutputSchema){if(!t.Outputs||t.Outputs.length===0)return{summary:i.competitionSubmissionErrorMissingOutput,details:""};if(t.Outputs.length>1)return{summary:i.competitionSubmissionErrorMultiOutputPorts,details:""};o=this.validateSchema(e.webServiceSchema.OutputSchema,t.Outputs[0].Schema)}return this.isValid(s)&&this.isValid(o)?null:{summary:i.competitionSubmissionErrorWrongSchema,details:this.toValidationDetails(s,o,e)}},e.prototype.validateSchema=function(e,t){var n=_.indexBy(e,"Name"),r=this.parseWebServiceSchemaString(t),i=_.filter(r,function(e){return!n[e.Name]}),s=_.filter(r,function(e){return n[e.Name]&&n[e.Name].Type.toLowerCase()!==e.Type.toLowerCase()}),o=_.indexBy(r,"Name"),u=_.filter(e,function(e){return!o[e.Name]});return{extraColumns:i,mistypedColumns:s,missingColumns:u}},e.prototype.parseWebServiceSchemaString=function(e){var t=JSON.parse(e);return _.map(t.columnAttributes,function(e){return{Name:e.name,Type:e.type}})},e.prototype.toValidationDetails=function(e,t,n){var r="",o=!this.isValid(e),u=!this.isValid(t);if(o){r+=i.competitionSubmissionErrorInvalidInputHeader+"\n",s.isEmpty(e.missingColumns)||(r+=s.format("    {0} {1}.\n",i.competitionSubmissionErrorMissingColumns,this.selectColumnNameAndTypes(e.missingColumns).join(", "))),s.isEmpty(e.extraColumns)||(r+=s.format("    {0} {1}.\n",i.competitionSubmissionErrorExtraColumns,this.selectColumnNameAndTypes(e.extraColumns).join(", ")));if(!s.isEmpty(e.mistypedColumns)){var a=_.indexBy(n.webServiceSchema.InputSchema,"Name");s.forEach(e.mistypedColumns,function(e){r+="    "+s.format(i.competitionSubmissionErrorMistypedColumns,e.Name,a[e.Name].Type,e.Type)+"\n"})}}if(u){o&&(r+="\n"),r+=i.competitionSubmissionErrorInvalidOutputHeader+"\n",s.isEmpty(t.missingColumns)||(r+=s.format("    {0} {1}.\n",i.competitionSubmissionErrorMissingColumns,this.selectColumnNameAndTypes(t.missingColumns).join(", "))),s.isEmpty(t.extraColumns)||(r+=s.format("    {0} {1}.\n",i.competitionSubmissionErrorExtraColumns,this.selectColumnNameAndTypes(t.extraColumns).join(", ")));if(!s.isEmpty(t.mistypedColumns)){var f=_.indexBy(n.webServiceSchema.OutputSchema,"Name");s.forEach(t.mistypedColumns,function(e){r+="    "+s.format(i.competitionSubmissionErrorMistypedColumns,e.Name,f[e.Name].Type,e.Type)+"\n"})}}return r},e.prototype.isValid=function(e){return!e||s.isEmpty(e.missingColumns)&&s.isEmpty(e.mistypedColumns)&&s.isEmpty(e.extraColumns)},e.prototype.selectColumnNameAndTypes=function(e){return _.map(e,function(e){return s.format("{0} ({1})",e.Name,e.Type)})},e}();t.ValidationRuleOnWebServiceSchema=o}),define("generated/editor/TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnSubmissionAllowed",["require","exports","../../../../DataLabClient/Features","../../../TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionSubmissionUtilities","../../../../DataLabClient/Contracts/V1/DataContractInterfaces-v1"],function(e,t,n,r,i){var s=function(){function e(){}return e.prototype.runValidation=function(e){return n.competitionSubmissionAllowedValidationEnabled()?e.submissionAllowedStatus&&e.submissionAllowedStatus.AllowedStatus.toString()!==i.SubmissionAllowedStatusCode[0]?{summary:r.getErrorSpecificSubmissionStatusMessage(e.submissionAllowedStatus),details:""}:null:null},e}();t.ValidationRuleOnSubmissionAllowed=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/CompetitionSubmissionDialog",["require","exports","../../TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionEntryValidationEngine","../../TS/ViewModel/SubmitCompetitionEntryWizard/Step1ViewModel","../../TS/ViewModel/SubmitCompetitionEntryWizard/Step2ViewModel","../../TS/ViewModel/SubmitCompetitionEntryWizard/SubmitCompetitionEntryWizardViewModel","../../TS/ViewModel/SubmitCompetitionEntryWizard/TermAcceptanceStepViewModel","../../TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnExperimentMissingTrainedModel","../../TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnWebServiceExistence","../../TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnWebServiceMissingInputPort","../../TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnWebServiceMissingOutputPort","../../TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnWebServiceSchema","../../TS/ViewModel/SubmitCompetitionEntryWizard/ValidationRuleOnSubmissionAllowed","../../TS/View/WizardView","../../../DataLabClient/Disposable","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Util","../../TS/View/MarkdownEditor/MarkdownEditor","../../TS/Common/WebServiceGroupUtilities","../../../DataLabClient/Logging/Logging"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){var w=function(e){function t(t,p,d,v){e.call(this),this.workspace=t,this.webServiceGroup=p,this.competitionUri=d,this.validationEngine=v,this.validationEngine||(this.validationEngine=new n.CompetitionEntryValidationEngine([new h.ValidationRuleOnSubmissionAllowed,new a.ValidationRuleOnWebServiceExistence,new f.ValidationRuleOnWebServiceMissingInputPort,new l.ValidationRuleOnWebServiceMissingOutputPort,new c.ValidationRuleOnWebServiceSchema],[new u.ValidationRuleOnExperimentMissingTrainedModel]));var m=this.getDefaultSubmissionName(),g=new o.TermAcceptanceStepViewModel(""),y=new r.Step1ViewModel(m),b=new i.Step2ViewModel(this.workspace,this.webServiceGroup,this.competitionUri,this.validationEngine);this.viewModel=new s.SubmitCompetitionEntryWizardViewModel(g,y,b)}return __extends(t,e),t.prototype.showDialog=function(e){var t=this,n=new $.fxs.fxsWizard.WizardStep;n.contentTemplateOptions({name:m.initializeTemplateIfNecessary("CompetitionSubmissionTermAcceptanceStepTemplate",ExperimentEditorTemplates._competitionSubmissionTermAcceptanceStepMarkup),data:this.viewModel.termAcceptanceViewModel}),n.title(v.competitionSubmissionWizardTermAcceptanceStepTitle);var r=new $.fxs.fxsWizard.WizardStep;r.contentTemplateOptions({name:m.initializeTemplateIfNecessary("CompetitionSubmissionStep1Template",ExperimentEditorTemplates._competitionSubmissionStep1Markup,[g.markdownEditorRegisterInfo]),data:this.viewModel.step1ViewModel}),r.title(v.competitionSubmissionWizardStep1Title);var i=new $.fxs.fxsWizard.WizardStep;i.contentTemplateOptions({name:m.initializeTemplateIfNecessary("CompetitionSubmissionStep2Template",ExperimentEditorTemplates._competitionSubmissionStep2Markup),data:this.viewModel.step2ViewModel}),i.title("");var s=[n,r,i],o={size:[500,400],autoLock:!1,title:"",stepActivate:function(e){t.viewModel.stepActivate(e)}},u=new p.WizardView(this.viewModel,s,o);u.onWizardClosingEvent.subscribe(e),this.registerForDisposal(new d.DisposableSubscription(this.viewModel.step2ViewModel.status.subscribe(function(e){e===2?i.title(v.competitionSubmissionWizardStep2TitleValidationError):e===3?t.viewModel.step2ViewModel.warnings().length>0?i.title(v.competitionSubmissionWizardStep2TitleValidationFinished):i.title(v.competitionSubmissionWizardStep2TitleValidationSuccessful):e===7&&i.title(v.competitionSubmissionWizardStep2TitleError)})),new d.DisposableSubscription(this.viewModel.step2ViewModel.status.subscribe(function(e){e===4&&i.title(v.competitionSubmissionWizardStep2TitleSubmissionSuccessful)}))),Shell.UI.Spinner.show();var a=y.getCompetitionTenantId(this.webServiceGroup);this.workspace.getCompetitionTermsAndConditionsAsync(this.competitionUri,a).done(function(e){t.viewModel.termAcceptanceViewModel.content=e,u.show()}).fail(function(e){b.error("Failed to get competition terms content","getCompetitionTermsAndService",e),m.showErrorNotification({title:v.competitionSubmissionErrorFailedToConnectToService})}).always(function(){Shell.UI.Spinner.hide()})},t.prototype.getDefaultSubmissionName=function(){var e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(e.getHours()+1)+":"+(e.getMinutes()+1)+":"+(e.getSeconds()+1);return this.webServiceGroup.Name+" @ "+t},t}(d.Disposable);t.CompetitionSubmissionDialog=w}),define("generated/editor/TS/Common/Confirm",["require","exports","../../TS/View/DialogViewFactories","../../../DataLabClient/Util"],function(e,t,n,r){function i(e,t){var i=$.Deferred(),s={title:e,text:t,dismissed:function(e){e.accepted?i.resolve():i.reject()}};return n.Confirmation.show(s),r.when(i.promise())}t.auxConfirm=i}),define("generated/editor/TS/ViewModel/Dialogs/ScoreDialogViewModel",["require","exports","../../../../DataLabClient/Contracts/V1/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){var o=function(){function e(e,t,n,r,i){this.valueType=t,this.value=ko.observable(n),this.name=e,this.friendlyName=r,this.allowedValues=i}return e}();t.InputColumnViewModel=o;var u=function(){function e(e,t){this.metadata=e,this.value=ko.observable(t)}return e}();t.WebServiceParameterViewModel=u;var a=function(){function e(e,t){this.title=e,this.message=t}return e}();t.ScoreDialogErrorInfo=a;var f=function(){function e(e,t,r,s){var a=this;this.wsgName=t.Name,this.wsgId=t.Id;if(e.Inputs&&e.Inputs.length>0&&e.Inputs[0].Schema){var f=JSON.parse(e.Inputs[0].Schema),l=e.Inputs[0].Id,c=e.InputsMetadata?e.InputsMetadata[l]:null;this.inputColumns=$.map(f.columnAttributes,function(e,t){var n=c&&c[e.name]?c[e.name]:e.name,r=[];return e.domain&&e.domain.categories&&(r=e.domain.categories),new o(e.name,e.type,a.getDefaultValue(e.type,r),n,r)})}else this.inputColumns=[];e.GlobalParametersMetadata?this.webServiceParameters=$.map(e.GlobalParametersMetadata,function(e,t){var r;if(e.DefaultValue)r=e.DefaultValue;else if(e.Type==n.ModuleParameterType.Enumerated)try{r=e.ParameterRules[0].Values[0]}catch(s){i.exception(s,"Failed to get enumeration values for Web Service Parameter")}else switch(e.Type){case n.ModuleParameterType.Boolean:r=!0;break;case n.ModuleParameterType.Double:case n.ModuleParameterType.Float:r=0;break;case n.ModuleParameterType.Int:r=0}return new u(e,r)}):this.webServiceParameters=[],this.webserviceId=r,this.workspace=s}return e.prototype.dismissed=function(e){var t=this;if(e.accepted){var n=new Shell.UI.Notifications.Progress(s.format(r.webServiceTestProgressTitle,this.wsgName),"active",!0);n.setDismissable(!0),n.setActions([Shell.UI.Notifications.Buttons.close(function(){Shell.UI.Notifications.remove(n)})]),Shell.UI.Notifications.add(n);var i={};$.each(this.inputColumns,function(e,t){i[t.name]=t.value()});var o={};$.each(this.webServiceParameters,function(e,t){o[t.metadata.Name]=t.value()}),this.workspace.invokeScoreWebServiceAsync(this.wsgId,this.webserviceId,i,o).done(function(e){var i=t.getScoringResultSummary(e);i?n.setTitle(s.format(r.webServiceTestSuccessAndResultSummary,t.wsgName,i)):n.setTitle(s.format(r.webServiceTestSuccessTitle,t.wsgName)),n.setStatus("success"),n.addStep(s.format(r.webServiceTestResultStepTitle,JSON.stringify(e)),"success")}).fail(function(e){n.setStatus("error");var r=t.getScoringErrorInfo(e);n.setTitle(r.title),n.setDetailsText(r.message)})}},e.prototype.canBeAccepted=function(){return!0},e.prototype.getScoringResultSummary=function(e){if(e&&typeof e=="object"){var t=e.Results;if(t)for(var n in t){var r=t[n];if(r&&r.type==="table"){var i=r.value;if(i){var s=i.Values;if(s&&typeof s.length=="number"&&s.length>0)return JSON.stringify(s[0])}}}}return null},e.prototype.getScoringErrorInfo=function(e){var t=[],n="",i=null;if(!(e instanceof s.AjaxError&&e.xmlHttpRequest))t.push(r.unexpectedError);else if(e.xmlHttpRequest.responseText){i=this.tryParseJson(e.xmlHttpRequest.responseText),i&&(i.error&&(i=i.error),i.message?n=i.message:i.Message&&(n=i.Message)),e.xmlHttpRequest.status===401||e.xmlHttpRequest.status===403||e.xmlHttpRequest.status===404?t.push(r.webServiceNotReady):e.xmlHttpRequest.status<500&&i&&i.details&&i.details.length>0&&$.map(i.details,function(e,n){e&&e.code&&e.message&&t.push(s.format("{0}: {1}",e.code,e.message))});if(i){var o=i.code?i.code:i.ErrorCode;o&&t.push(s.format(r.infoErrorCode,o))}t=t.concat(s.ajaxErrorMetas(e))}return new a(s.format(r.webServiceTestFailureTitle,this.wsgName,n),t.join(", "))},e.prototype.tryParseJson=function(e){var t;try{t=JSON.parse(e)}catch(n){t=null}return t},e.prototype.getDefaultValue=function(e,t){switch(e){case"Numeric":return 0;case"Binary":return!1;case"Categorical":return t.length>0?t[0]:"";default:return""}},e}();t.ScoreDialogViewModel=f}),define("generated/DataLabClient/Configuration",["require","exports"],function(e,t){t.ClientConfiguration={AzureManagementPortalUrl:""}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/WebServiceGroupDashboardView",["require","exports","../TS/View/CompetitionSubmissionDialog","../TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionSubmissionUtilities","../TS/Common/Confirm","../TS/View/DialogViewFactories","../TS/Global","../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../TS/ViewModel/Dialogs/ScoreDialogViewModel","../TS/ViewModel/SubmitCompetitionEntryWizard/SubmitCompetitionEntryWizardViewModel","../TS/Common/WebServiceGroupUtilities","../DataLabViews/WebServiceGroupView","../../DataLabClient/Configuration","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Contracts/V1/Common/Project","../../DataLabClient/Model/Property","../../DataLabClient/Trial","../../DataLabClient/Util","../../DataLabClient/Contracts/V1/Common/WebServiceContracts","../../DataLabClient/Model/WorkspaceSettings","../../DataLabClient/Logging/IfxScenarioStopWatch","../TS/ViewModel/ExperimentEditor/CommunityHelpers","../../DataLabClient/Model/User"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){var k=function(e){function t(t,n,r){var i=this;e.call(this),this.parentExperimentLatestId=null,this._renderArea=t.get(0),this._webServiceGroupId=n,this._webServiceGroup=ko.observable(null),this._workspace=r,this.parentExperimentId=ko.observable(null),this.originalExperimentDocumentation=ko.observable(null),this.isScoringExperimentCreated=ko.computed(function(){return i.parentExperimentId()!=null}),this.isSubmittedToCompetition=ko.computed(function(){return i._webServiceGroup()&&i._webServiceGroup().Tags!==null&&i._webServiceGroup().Tags.some(function(e){return e===f.SubmitCompetitionEntryWizardViewModel.CompetitionSubmittedTag})}),this.competitionUrl=ko.computed(function(){if(!i.isCompetition())return null;var e=i.originalExperimentDocumentation()||"/";return new u.LinkPropertyViewModel(new b.LinkProperty(m.goToCompetitionText,e),function(t){window.open(e,"_blank")})}),this.shouldShowRelatedWebService=ko.observable(!1),this.relatedWebServiceGroupId=ko.observable(null),this.relatedWebServiceName=ko.observable(null),this.relatedWebServiceLabel=ko.observable(null),this._hasExceededDailySubmissions=!1,this._hasExceededTotalSubmissions=!1,this.submissionEntryInformationDaily=ko.observable(""),this.submissionEntryInformationTotal=ko.observable(""),cdm.setActiveItem(this),document.querySelector("#tabcontainer .itemtitle").textContent=""}return __extends(t,e),t.prototype.open=function(){var e=this;Shell.UI.Spinner.show(),this._workspace.applicationCache.prefetch(),E.then(this._workspace.getWebServiceGroupAsync(this._webServiceGroupId),function(n){if(!(cdm.currentActiveItem instanceof t&&n!=null&&n.Id==e._webServiceGroupId)||!e._renderArea)return;e._webServiceGroup(n),e.wsgDescription=n.Description,e.webServices=[];var r=n.StagingWebService;if(r){var i=r.ModelPackageId;e._modelPackageInfo=n.ModelPackages.filter(function(e){return e.Id===i})[0],e.webServices.push(new c.WebService(r.Id,e.getApiHelpPageUrl("score"),m.webServiceGroupDashboardWsRRSType,new Date(parseInt(e._modelPackageInfo.CreationTime.substr(6))))),e.webServices.push(new c.WebService(r.Id,e.getApiHelpPageUrl("jobs"),m.webServiceGroupDashboardWsBatchType,new Date(parseInt(e._modelPackageInfo.CreationTime.substr(6))))),e.setupWebServiceGrid();var s=$("#WebServicePrimaryKey");s.is(":data(fxs-fxsCopyButton)")&&s.fxsCopyButton("destroy"),s.fxsCopyButton({text:r.PrimaryKey})}else n.ModelPackages.length>0?e._modelPackageInfo=n.ModelPackages[n.ModelPackages.length-1]:e._modelPackageInfo=null;var u=E.then(e._workspace.getWorkspaceSettingsAsync(),function(e){return e.type},function(e){return g.error("Load workspace settings failed: "+e.message),$.Deferred().resolve(w.getWorkspaceType()).promise()});E.then(u,function(r){if(!(cdm.currentActiveItem instanceof t)||!e._renderArea)return;e.shouldShowProductionElements=x.WorkspaceTypeExtensions.isProduction(r),e.showProductionStatus(),document.querySelector("#tabcontainer .itemtitle").textContent=n.Name,e.updateSidebarTitle(n.Name),e._modelPackageInfo!=null&&e._modelPackageInfo.LinkedExperimentId?(e.parentExperimentId(e._modelPackageInfo.LinkedExperimentId),e.parentExperimentLatestId=e.getLatestExperimentRunId(),E.then(e._workspace.getExperimentInfoAsync(e.parentExperimentId()),function(n){if(!(cdm.currentActiveItem instanceof t&&n!==null&&n.ExperimentId===e.parentExperimentId())||!e._renderArea)return;var r=n.OriginalExperimentDocumentationLink;if(!r&&e.isCompetition()){var i=n.Tags.filter(function(e){return o.CompetitionConstants.GalleryUriTagSearchRegex.test(e)});r=i.length>0?i[0].substring(o.CompetitionConstants.GalleryUriTagPrefix.length):"/"}e.originalExperimentDocumentation(r),e.parentExperimentDescription=n.Description,E.checkForExistingKOBindings(e._renderArea),g.info("applying bindings",null,JSON.stringify({viewModel:"webservicedashboard"})),e.registerForDisposal(new d.DisposableKOApplyBindings(e,e._renderArea)),$("#WebServiceGroupDashboardViewContent").show(),e.isCompetition()&&e.isInSupportedCompetitionRegion()?($("#competition-prop").show(),e.updateCompetitionSubmissionInformation().fail(function(){e.submissionEntryInformationDaily(m.competitionSubmissionInformationDailyCouldNotLoad),e.submissionEntryInformationTotal(m.competitionSubmissionInformationTotalCouldNotLoad)}).always(function(){Shell.UI.Spinner.hide()}),e.addPublishCompetitionCommand()):Shell.UI.Spinner.hide()}),e.setUpRelatedWebserviceLink()):($("#WebServiceGroupDashboardViewContent").show(),Shell.UI.Spinner.hide())})}).fail(function(e){g.error("getWebServiceGroupAsync failed: "+e.message,"WebServiceGroupDashboardView"),E.showErrorNotification({title:E.format(m.WebServiceGroupDashboardViewLoadFailure,m.productName),details:e.message}),Shell.UI.Navigation.navigate({extension:c.webServiceGroupExtensionName})})},t.prototype.tryBelize=function(e,t){t===void 0&&(t={});var n=window.environment.webServicesUxLocation,r=E.format("{0}{1}{2}",l.calculateNavigationPathToWebServiceUx(n,this._workspace.id,this._webServiceGroupId),e,l.queryFromObject(t));return this._workspace.createWebServicesUXApiKeyCookieAsync(n,this._workspace.id),r},t.prototype.shouldShowBelizeLinks=function(){return C.user.isWorkspaceOwner&&(v.tryBelizeEnabled()||v.belizeForSMV1Enabled())},t.prototype.shouldShowBelizeAsEndpointManagment=function(){return C.user.isWorkspaceOwner&&v.belizeForSMV1Enabled()},t.prototype.dispose=function(){this._renderArea=null,e.prototype.dispose.call(this)},t.prototype.isCompetition=function(){return v.competitionExperimentSupportEnabled()&&this._webServiceGroup()&&this._webServiceGroup().Tags.some(function(e){return o.CompetitionConstants.CompetitionUrlTagSearchRegex.test(e)})},t.prototype.isInSupportedCompetitionRegion=function(){return!v.multiGeoNavigationEnabled()||r.isSupportedCompetitionRegion(N.multiGeoRegion)},t.prototype.updateCompetitionSubmissionInformation=function(){var e=this,t=this._webServiceGroup();return this._workspace.getCompetitionSubmissionAllowedStatusAsync(l.getCompetitionUri(t),l.getCompetitionTenantId(t)).done(function(t){t.SubmissionsLeftToday<=0&&(e._hasExceededDailySubmissions=!0),t.TotalSubmissionsLeft<=0&&(e._hasExceededTotalSubmissions=!0);var n=r.getSubmissionInformationDaily(t),i=r.getSubmissionInformationTotal(t);e.submissionEntryInformationDaily(n),e.submissionEntryInformationTotal(i),e.submissionEntryInformationDaily.valueHasMutated(),e.submissionEntryInformationTotal.valueHasMutated(),(e._hasExceededDailySubmissions||e._hasExceededTotalSubmissions)&&e._submitCompetitionCommand&&(e._submitCompetitionCommand.setDisabled(!0),e._submitCompetitionCommand.setTooltip(e.updateCompetitionSubmissionCommandTooltipText()))})},t.prototype.updateCompetitionSubmissionCommandTooltipText=function(){return this._hasExceededDailySubmissions?this.submissionEntryInformationDaily():this._hasExceededTotalSubmissions?this.submissionEntryInformationTotal():""},t.prototype.addPublishCompetitionCommand=function(){var e=this,t=new Shell.UI.Commands.Command(m.submitCompetitionEntry,Shell.UI.Icons.submitCompetition,function(){return e.onPublishCompetitionEntry()},null,this._hasExceededDailySubmissions||this._hasExceededTotalSubmissions||w.isWorkspaceTypeAnonymous(),this.updateCompetitionSubmissionCommandTooltipText());this._submitCompetitionCommand=t,Shell.UI.Commands.add(t)},t.prototype.setCommands=function(){var e=this,t=new Shell.UI.Commands.Command(m.deleteItem,Shell.UI.Icons["delete"],function(){return e.onDeleteWebServiceGroup()},null,!1);Shell.UI.Commands.add(t)},t.prototype.onPublishCompetitionEntry=function(){var e=this,t=this._webServiceGroup(),i=l.getCompetitionUri(t),s=l.getCompetitionTenantId(t),o=l.getGalleryUri(t),u={competitionUri:i,galleryUri:o,competitoinTenantId:s};g.featureUsage({featureID:147,groupID:0,data:u});var a=new n.CompetitionSubmissionDialog(this._workspace,t,i);E.whenTrue(this._workspace.applicationCache.allPrefetched).done(function(){a.showDialog(function(n){var s=a.viewModel;if(s.onWizardCompleted()){var f=new T.IfxScenarioStopWatch(10,u);f.start(),r.startSubmitCompetition(e._workspace,t,s.step1ViewModel.submissionName(),i,o,function(){f.stop(),e._webServiceGroup.valueHasMutated(),e.updateCompetitionSubmissionInformation().fail(function(){e.submissionEntryInformationDaily(m.competitionSubmissionInformationDailyCouldNotLoad),e.submissionEntryInformationTotal(m.competitionSubmissionInformationTotalCouldNotLoad)})},f)}})})},t.prototype.getLatestExperimentRunId=function(){if(!this.parentExperimentId())throw new Error("Experiment id cannot be null");var e=this.parentExperimentId().split(".");if(e.length<3)throw new Error("invalid experiment id: "+this.parentExperimentId());return e[0]+".f-id."+e[2]},t.prototype.setUpRelatedWebserviceLink=function(){var e=this;this.shouldShowRelatedWebService(!1),this.parentExperimentLatestId&&this._workspace.listProjects(this.parentExperimentLatestId).done(function(t){if(t&&t.length&&t[0].Experiments){var n=E.first(t[0].Experiments,function(t){return t.ExperimentId!=e.parentExperimentLatestId&&(t.Role===y.ExperimentRole.Training||t.Role===y.ExperimentRole.Scoring)},null);n&&e._workspace.getExperimentInfoAsync(n.ExperimentId).done(function(t){var r=t.WebService&&t.WebService.WebServiceGroupId;r&&e._workspace.getWebServiceGroupAsync(r).done(function(t){e.relatedWebServiceGroupId(r),e.relatedWebServiceName(t.Name),e.relatedWebServiceLabel(n.Role===y.ExperimentRole.Training?m.trainingWebServiceLabel:m.scoringWebServiceLabel),e.shouldShowRelatedWebService(!0)})})}})},t.prototype.showProductionStatus=function(){if(!this.shouldShowProductionElements)this.productionStatusSectionTitle="",this.productionStatusDescription="",this.productionActionDescription="",this.productionActionUrl="";else if(this._modelPackageInfo!=null&&this._webServiceGroup()!=null){var e=this._workspace.friendlyName,n=E.format("{0}/#Workspaces/MachineLearningExtension/Workspace/{1}",h.ClientConfiguration.AzureManagementPortalUrl,e),r=t.getProductionStatus(this._modelPackageInfo);this.productionStatusSectionTitle=m.webServiceEndpointsSectionTitle;var i=this._webServiceGroup().Endpoints==null?0:this._webServiceGroup().Endpoints.length-1;this.productionStatusDescription=E.format(m.webServiceEndpointCount,i.toString()),this.shouldShowBelizeAsEndpointManagment()?(this.productionActionDescription=m.webServiceManageEndpointsLinkBelize,this.productionActionUrl=this.tryBelize("/endpoints",{fromStudio:!0})):(this.productionActionDescription=m.webServiceManageEndpointsLink,this.productionActionUrl=E.format("{0}/WebService/{1}/Dashboard",n,this._webServiceGroup().Id))}},t.prototype.getConfigTabUrl=function(){var e=window.location.href,t=e.lastIndexOf("/");return e.substring(t)=="/dashboard"?e.substr(0,t)+"/configuration":(g.warn("Expected the web service URL to end with /dashboard",this._webServiceGroup().Id,e),e)},t.prototype.getApiHelpPageUrl=function(e){return E.format("/apihelp/workspaces/{0}/webservices/{1}/endpoints/{2}/{3}",this._workspace.id,this._webServiceGroup().Id,this._webServiceGroup().StagingWebService.Id,e)},t.prototype.getDownloadExcelUrl=function(){return E.format("/apihelpdownload/workspaces/{0}/webservices/{1}/endpoints/{2}/excel",this._workspace.id,this._webServiceGroup().Id,this._webServiceGroup().StagingWebService.Id)},t.prototype.getDownloadLegacyExcelUrl=function(){return E.format("/apihelpdownload/workspaces/{0}/webservices/{1}/endpoints/{2}/legacyexcel",this._workspace.id,this._webServiceGroup().Id,this._webServiceGroup().StagingWebService.Id)},t.prototype.showExcelLink=function(){if(v.excelDownloadEnabled()){if(this._modelPackageInfo.Outputs&&this._modelPackageInfo.Outputs.length>0)for(var e=0;e<this._modelPackageInfo.Outputs.length;e++)if(this._modelPackageInfo.Outputs[e].OutputType&&this._modelPackageInfo.Outputs[e].OutputType!=="DataTable")return!1;return!0}return!1},t.prototype.showOldExcelLink=function(){if(v.excelDownloadEnabled()&&this._modelPackageInfo.Outputs&&this._modelPackageInfo.Outputs.length===1&&(!this._modelPackageInfo.Outputs[0].OutputType||this._modelPackageInfo.Outputs[0].OutputType==="DataTable")&&this._modelPackageInfo.Inputs&&this._modelPackageInfo.Inputs.length===1&&this._modelPackageInfo.GlobalParametersMetadata){for(var e=0;e<this._modelPackageInfo.GlobalParametersMetadata.length;e++)if(!this._modelPackageInfo.GlobalParametersMetadata[e].DefaultValue)return!1;return!0}return!1},t.prototype.setupWebServiceGrid=function(){var e=this,t={columns:[{name:m.webServiceApiHelpLabel,field:"Url",formatter:function(e,t){var n=t.dataItem;return $.fxGridFormatter.url({url:e,text:n.Type,target:"_blank"},t)}}],data:this.webServices,selectable:!1,multiselect:!1,resizable:!0};this._modelPackageInfo!=null&&(t.columns.push({name:m.webServiceGroupDashboardWsTestHeader,field:"Id",formatter:function(t,n){var r=n.dataItem,s=$("<div></div>");if(r.Type===m.webServiceGroupDashboardWsRRSType){var o=$('<a href="#" class="WebServiceTestLink">'+m.webServiceGroupDashboardWsTestButtonText+"</a>");v.multiInputSupportEnabled()&&e._modelPackageInfo.Inputs.length>1?o.click(function(e){return i.auxConfirm("",m.webServiceGroupDashboardWsTestMultiInputWarning).done(function(e){}).fail(function(e){}),!1}):o.click(function(n){return e.showInteractiveScoreDialog(t),!1}),s.append(o);if(e.shouldShowBelizeLinks()){var u=e.getTryBelizeButton("/endpoints/default/test/rrs",{fromStudio:!0});s.append(u)}return s}if(e.shouldShowBelizeLinks()){var u=e.getTryBelizeButton("/endpoints/default/test/bes",{fromStudio:!0});return s.append(u),s}}}),this.showExcelLink()&&t.columns.push({name:m.webServiceGroupDashboardWsAppsHeader,field:"Id",formatter:function(t,n){var r=n.dataItem,s=v.agaveExcelClientEnabled()?m.webServiceDownloadNewExcelLabel:m.webServiceDownloadExcelLabel;if(r.Type!==m.webServiceGroupDashboardWsRRSType&&v.agaveExcelClientEnabled()||!e.showOldExcelLink())s=s+" "+m.webServiceDownloadworkbook;var o=$('<a href="'+e.getDownloadExcelUrl()+'">'+'<img src="/Content/Images/icxlsx.png" >'+" "+s+"</a>");v.agaveExcelClientEnableSampleData()&&o.click(function(t){return i.auxConfirm(m.webServiceDownloadExcelSampleDataConfirmationTitle,m.webServiceDownloadExcelSampleDataConfirmationContent).done(function(t){e._webServiceGroup().StagingWebService.SampleDataEnabled?window.location.href=e.getDownloadExcelUrl():e._workspace.updateWebServiceAsync(e._webServiceGroupId,r.Id,e._modelPackageInfo.Id,null,!0).done(function(t){window.location.href=e.getDownloadExcelUrl()})}).fail(function(e){}),!1});var u=$("<div></div>").append(o);if(r.Type===m.webServiceGroupDashboardWsRRSType){var a=$('<a href="'+e.getDownloadLegacyExcelUrl()+'">'+'<img src="/Content/Images/icxlsx.png" >'+" "+m.webServiceDownloadLegacyExcelLabel+"</a>");v.agaveExcelClientEnabled()&&e.showOldExcelLink()&&u.append(" | ").append(a)}else if(!v.agaveExcelClientEnabled())return;return u}})),t.columns.push({name:m.webServiceGroupDashboardWsLastUpdatedHeader,field:"CreationTime",formatter:E.formatDate,sorted:"descending"}),this._grid=$(this._renderArea).find("#webServiceGrid").wazDataGrid(t)},t.prototype.onDeleteWebServiceGroup=function(){l.canDeleteWebserviceGroup(this._webServiceGroup())?this.confirmDelete():this.showError(E.format(m.cannotDeleteWebServiceGroupError,this._webServiceGroup().Name))},t.prototype.showError=function(e){var t=new Shell.UI.Notifications.Confirmation(e,"active");t.setActions([new Shell.UI.Notifications.Buttons.ok(function(){Shell.UI.Notifications.remove(t)})]),Shell.UI.Notifications.add(t)},t.prototype.confirmDelete=function(){var e=this,t=E.format(m.confirmDeleteWebServiceGroup,this._webServiceGroup().Name);this.isCompetition()&&(t+=" "+m.confirmDeleteCompetitionWebServiceGroup);var n=new Shell.UI.Notifications.Confirmation(t,"active");n.setActions([new Shell.UI.Notifications.Buttons.yes(function(){Shell.UI.Spinner.show(),e.deleteWebServiceGroup().done(function(){Shell.UI.Navigation.navigate({extension:c.webServiceGroupExtensionName})}).fail(function(t){e.showError(t.message)}).always(function(){Shell.UI.Spinner.hide()}),Shell.UI.Notifications.remove(n)}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(n)})]),Shell.UI.Notifications.add(n)},t.prototype.deleteWebServiceGroup=function(){return this._workspace.deleteWebServiceGroupAsync(this._webServiceGroupId)},t.prototype.showInteractiveScoreDialog=function(e){var t=new a.ScoreDialogViewModel(this._modelPackageInfo,this._webServiceGroup(),e,this._workspace),n=s.InteractiveScore.show(t)},t.prototype.updateSidebarTitle=function(e){$(".fxshell-nav2-item.selected a span").text(e).attr("title",e)},t.prototype.getTryBelizeButton=function(e,t){t===void 0&&(t={});var n=$('<div class="trybelize trybelize-container trybelize-side"><a class="trybelize" href="'+this.tryBelize(e,t)+'" target="_blank">'+m.webServiceGroupDashboardWsTestButtonText+'</a><span class="trybelize trybelize-preview">'+m.preview+"</span></div>");return n},t.getProductionStatus=function(e){var t=e.StatusCode,n=String(e.StatusCode),r=3;if(t==1||S.ModelPackageStatusCode[n]===1)r=1;else if(t==2||S.ModelPackageStatusCode[n]===2)r=2;else{if(t!=0&&S.ModelPackageStatusCode[n]!==0)throw new Error(E.format("Unexpected ModelPackageStatusCode: {0}",n));r=0}return r},t}(d.Disposable);t.WebServiceGroupDashboardView=k});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/WebServiceGroupConfigView",["require","exports","../../DataLabClient/Disposable","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Util","../../DataLabClient/Contracts/V1/Common/WebServiceContracts","../../DataLabClient/Model/WorkspaceSettings","../DataLabViews/WebServiceGroupDashboardView"],function(e,t,n,r,i,s,o,u,a){var f=function(){function e(e,t,n){this.columnName=e,this.columnType=t,this.columnFriendlyName=n,this.columnDisplayName=s.format(r.modelPackageConfigColumnSchemaTemplate,this.columnName,this.columnType)}return e}();t.InputOutputViewModel=f;var l=function(){function e(e){var t=this;this.name=e.Name,this.type=e.Type,this.description=e.Description,this.defaultValue=e.DefaultValue,this.parameterRules=e.ParameterRules,this.displayName=ko.computed(function(){return t.name+" ("+t.type+")"})}return e}();t.WebServiceParameterViewModel=l;var c=function(){function e(e,t){this.allowAnonymousTest=ko.observable(!1),this.diagnosticsMode=ko.observable(!1),this.sampleDataEnabled=ko.observable(!1),this.webServiceGroupId=e,this._workspace=t,this.description=ko.observable(""),this.name=ko.observable(""),this.inputs=ko.observableArray(),this.outputs=ko.observableArray(),this.globalParameters=ko.observableArray()}return e.prototype.refreshFromService=function(e){var t=this;s.then(this._workspace.getWebServiceGroupAsync(this.webServiceGroupId),function(n){if(!(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof h&&n!=null&&n.Id==t.webServiceGroupId))return;t.webServiceGroup=n;var r=n.StagingWebService;if(r){var i=r.ModelPackageId;t.modelPackageInfo=n.ModelPackages.filter(function(e){return e.Id===i})[0]}else t.modelPackageInfo=n.ModelPackages[n.ModelPackages.length-1];var s=r.DiagnosticsSettings;t._existingDiagnosticsMode=s!=null&&s.DiagnosticsTraceLevel!=o.DiagnosticsTraceLevel.None,t.name(n.Name),t.description(n.Description),t.allowAnonymousTest(n.StagingWebService.AllowAnonymousTest),t.diagnosticsMode(t._existingDiagnosticsMode),t.refreshedFromServiceHandler(e,t)})},e.prototype.loadSchema=function(){this.modelPackageStatusCode=a.WebServiceGroupDashboardView.getProductionStatus(this.modelPackageInfo),this.allowAnonymousTest(this.webServiceGroup.StagingWebService.AllowAnonymousTest),this.diagnosticsMode(this._existingDiagnosticsMode),this.sampleDataEnabled(this.webServiceGroup.StagingWebService.SampleDataEnabled);var e,t;this.modelPackageInfo.Inputs!==null&&this.modelPackageInfo.Inputs.length>0&&this.modelPackageInfo.Inputs[0]!==null&&(e=JSON.parse(this.modelPackageInfo.Inputs[0].Schema),e!=null&&(t=$.map(e.columnAttributes,function(e,t){return new f(e.name,e.type,"")})));if(this.modelPackageInfo.InputsMetadata!==null&&t!==undefined){var n=this.modelPackageInfo.InputsMetadata[this.modelPackageInfo.Inputs[0].Id];if(n!==undefined&&n!==null){var r,i;for(var s=0;s<t.length;s++)r=t[s],i=n[r.columnName],i!==undefined&&(t[s].columnFriendlyName=i)}}var o,u;this.modelPackageInfo.Outputs!=null&&this.modelPackageInfo.Outputs.length>0&&this.modelPackageInfo.Outputs[0]!==null&&(o=JSON.parse(this.modelPackageInfo.Outputs[0].Schema),o!=null&&(u=$.map(o.columnAttributes,function(e,t){return new f(e.name,e.type,"")})));if(this.modelPackageInfo.OutputsMetadata!==null&&u!=undefined){var n=this.modelPackageInfo.OutputsMetadata[this.modelPackageInfo.Outputs[0].Id];if(n!==undefined&&n!==null){var c,i;for(var s=0;s<u.length;s++)c=u[s],i=n[c.columnName],i!==undefined&&(u[s].columnFriendlyName=i)}}this.inputs(t),this.outputs(u),this.modelPackageInfo.GlobalParametersMetadata&&this.globalParameters(this.modelPackageInfo.GlobalParametersMetadata.map(function(e){return new l(e)})),this._existingFriendlyNames=this.getFriendlyNames()},e.prototype.getFriendlyNames=function(){var e=[];return this.globalParameters()&&$.each(this.globalParameters(),function(t,n){e.push(n.description)}),this.inputs()&&$.each(this.inputs(),function(t,n){e.push(n.columnFriendlyName)}),this.outputs()&&$.each(this.outputs(),function(t,n){e.push(n.columnFriendlyName)}),e.join("")},e.prototype.update=function(){var e=this,t=$.Deferred(),n={},r={},i={},u={},a=[],f=this._existingFriendlyNames!=this.getFriendlyNames();f&&(this.modelPackageInfo.GlobalParametersMetadata&&(a=this.globalParameters().map(function(e){return{Name:e.name,Type:e.type,DefaultValue:e.defaultValue,Description:e.description,ParameterRules:e.parameterRules}})),this.outputs()&&($.each(this.outputs(),function(e,t){n[t.columnName]=t.columnFriendlyName}),this.modelPackageInfo.Outputs[0]!==undefined&&(r[this.modelPackageInfo.Outputs[0].Id]=n)),this.inputs()&&($.each(this.inputs(),function(e,t){i[t.columnName]=t.columnFriendlyName}),this.modelPackageInfo.Inputs[0]!==undefined&&(u[this.modelPackageInfo.Inputs[0].Id]=i)));var l=this.webServiceGroup.Name!=this.name()||this.webServiceGroup.Description!=this.description()||this.webServiceGroup.StagingWebService.AllowAnonymousTest!=this.allowAnonymousTest(),c=this._existingDiagnosticsMode!=this.diagnosticsMode()||this.sampleDataEnabled()!=this.webServiceGroup.StagingWebService.SampleDataEnabled,p=[];f&&p.push(this._workspace.updateModelPackageAsync(this.webServiceGroup.Id,this.modelPackageInfo.Id,this.modelPackageStatusCode,u,r,a).done(function(){if(!(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof h))return;e._existingFriendlyNames=e.getFriendlyNames()}).fail(function(t){if(!(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof h))return;e.errorSchemaUpdateHandler()})),l&&p.push(this._workspace.updateWebServiceGroupAsync(this.webServiceGroup.Id,this.name(),this.description(),this.allowAnonymousTest(),this.webServiceGroup.Tags).fail(function(t){if(!(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof h))return;e.errorNameUpdateHandler()}));if(c){var d=this.diagnosticsMode()?o.DiagnosticsTraceLevel.All:o.DiagnosticsTraceLevel.None,v=this.webServiceGroup.StagingWebService.DiagnosticsSettings;v===null?v={DiagnosticsBESJobsPath:null,DiagnosticsConnectionString:null,DiagnosticsExpiryTime:null,DiagnosticsRRSInitializationsPath:null,DiagnosticsRRSRequestsPath:null,DiagnosticsTraceLevel:d}:v.DiagnosticsTraceLevel=d,p.push(this._workspace.updateWebServiceAsync(this.webServiceGroup.Id,this.webServiceGroup.StagingWebService.Id,this.modelPackageInfo.Id,v,this.sampleDataEnabled()).done(function(){if(!(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof h))return;e._existingDiagnosticsMode=e.diagnosticsMode()}).fail(function(t){if(!(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof h))return;e.errorDiagnosticsModeUpdateHandler(),e.diagnosticsMode(e._existingDiagnosticsMode)}))}var m=s.when(p);return m.always(function(){if(!(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof h))return;e.finishedUpdateHandler(),t.resolve(u,r,e.name(),e.description(),e.diagnosticsMode())}).done(function(){if(!(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof h))return;e.successUpdateHandler()}),s.when(t)},e}();t.WebServiceGroupConfigViewModel=c;var h=function(e){function t(t,n,i){e.call(this),this.hasBeenEdited=ko.observable(!1),this._renderArea=t.get(0),this._workspace=i,this.configViewModel=new c(n,i),this.configViewModel.refreshedFromServiceHandler=this.configRefreshedFromServiceEventHandler,this.configViewModel.errorSchemaUpdateHandler=function(){cdm.currentActiveItem.setErrorNotification(r.modelPackageConfigErrorSchema)},this.configViewModel.errorNameUpdateHandler=function(){cdm.currentActiveItem.setErrorNotification(r.modelPackageConfigErrorName)},this.configViewModel.errorDiagnosticsModeUpdateHandler=function(){cdm.currentActiveItem.setErrorNotification(r.modelPackageConfigErrorDiagnosticsMode)},this.configViewModel.finishedUpdateHandler=function(){Shell.UI.Spinner.hide()},this.configViewModel.successUpdateHandler=this.successfulUpdateEventHandler,cdm.setActiveItem(this),document.querySelector("#tabcontainer .itemtitle").textContent="",this._allowAnonymousTest=[{text:r.webServiceTestEnabledYes,value:!0},{text:r.webServiceTestEnabledNo,value:!1}],this._diagnosticsModeOptions=[{text:r.webServiceDiagnosticsModeAll,value:!0},{text:r.webServiceDiagnosticsModeNone,value:!1}],this._sampleDataEnabled=[{text:r.webServiceSampleDataEnabledYes,value:!0},{text:r.webServiceSampleDataEnabledNo,value:!1}]}return __extends(t,e),t.prototype.open=function(){var e=this;s.then(this._workspace.getWorkspaceSettingsAsync(),function(n){if(!(cdm.currentActiveItem==null||cdm.currentActiveItem instanceof t))return;var r=u.WorkspaceTypeExtensions.isProduction(n.type);e.shouldShowDiagnosticsButton=r,e.refreshFromService(!0)})},t.prototype.setCommands=function(){var e=this;this.saveCommand=new Shell.UI.Commands.Command(r.modelPackageConfigSave,Shell.UI.Icons.save,this.update.bind(this),null,!0),this.discardCommand=new Shell.UI.Commands.Command(r.modelPackageConfigDiscard,Shell.UI.Icons.undo,this.discard.bind(this),null,!0),Shell.UI.Commands.add([this.saveCommand,this.discardCommand]),this.hasBeenEdited.subscribe(function(){e.saveCommand.setDisabled(!e.hasBeenEdited()),e.discardCommand.setDisabled(!e.hasBeenEdited())})},t.prototype.configUpdated=function(e){var t=cdm.currentActiveItem;t.hasBeenEdited()||t.hasBeenEdited(!0)},t.prototype.refreshFromService=function(e){Shell.UI.Spinner.show(),this.configViewModel.refreshFromService(e)},t.prototype.configRefreshedFromServiceEventHandler=function(e,t){var r=cdm.currentActiveItem;(t.modelPackageInfo!==undefined||t.modelPackageInfo!=null)&&r.refreshModelPackageUI(),r.hasBeenEdited(!1),e&&(s.checkForExistingKOBindings(r._renderArea),i.info("applying bindings",null,JSON.stringify({viewModel:"webserviceconfig"})),r.registerForDisposal(new n.DisposableKOApplyBindings(r,r._renderArea))),$("#WebServiceGroupConfig").show(),Shell.UI.Spinner.hide()},t.prototype.successfulUpdateEventHandler=function(){var e=cdm.currentActiveItem;e.updateTitles(e.configViewModel.name()),e.hasBeenEdited(!1)},t.prototype.refreshModelPackageUI=function(){var e=this;this.configViewModel.loadSchema();var t=this.configViewModel.allowAnonymousTest()?this._allowAnonymousTest[0]:this._allowAnonymousTest[1];$("#radioAllowAnonymousTest").fxRadio({value:t,values:this._allowAnonymousTest,trackedit:!1,change:function(t,n){e.configViewModel.allowAnonymousTest(n.value.value),e.configUpdated(e)}});var n=this.configViewModel.sampleDataEnabled()?this._sampleDataEnabled[0]:this._sampleDataEnabled[1];$("#radioSampleDataEnabled").fxRadio({value:n,values:this._sampleDataEnabled,trackedit:!1,change:function(t,n){e.configViewModel.sampleDataEnabled(n.value.value),e.configUpdated(e)}});var r=this.configViewModel.diagnosticsMode()?this._diagnosticsModeOptions[0]:this._diagnosticsModeOptions[1];$("#radioDiagnosticsMode").fxRadio({value:r,values:this._diagnosticsModeOptions,trackedit:!1,change:function(t,n){e.configViewModel.diagnosticsMode(n.value.value),e.configUpdated(e)}}),this.updateTitles(this.configViewModel.name())},t.prototype.update=function(){Shell.UI.Spinner.show(),this.configViewModel.update()},t.prototype.discard=function(){this.refreshFromService(!1)},t.prototype.setErrorNotification=function(e){var t=new Shell.UI.Notifications.Notification(e,"error");t.setActions([Shell.UI.Notifications.Buttons.close(function(){})]),Shell.UI.Notifications.add(t)},t.prototype.updateTitles=function(e){document.querySelector("#tabcontainer .itemtitle").textContent=this.configViewModel.name(),$(".fxshell-nav2-item.selected a span").text(e).attr("title",e)},t}(n.Disposable);t.WebServiceGroupConfigContainerViewModel=h});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/DataLabViews/WebServiceGroupListView",["require","exports","../DataLabViews/AddToProjectDialogView","../TS/View/CompetitionSubmissionDialog","../TS/ViewModel/SubmitCompetitionEntryWizard/CompetitionSubmissionUtilities","../TS/Global","../TS/Common/ProjectUtilities","../DataLabViews/WazGridAdapter","../TS/Common/WebServiceGroupUtilities","../DataLabViews/WebServiceGroupView","../TS/ViewModel/ExperimentEditor/CommunityHelpers","../../DataLabClient/Constants","../../DataLabClient/Disposable","../../DataLabClient/Features","../../DataLabClient/LocalizedResources","../../DataLabClient/Logging/Logging","../../DataLabClient/Contracts/V1/Common/ProjectCollection","../../DataLabClient/Trial","../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=function(e){function t(t,n,r){var i=this;e.call(this),this._renderArea=t,this._data=[],this._workspace=n,this._client=r;var s=[{name:d.webServiceGroupNameLabel,field:"Name",cssClass:"navigationColumn"},{name:d.webServiceGroupCreationTimeLabel,field:"CreationTime",formatter:y.formatDate,sorted:"descending"}];s=o.appendProjectColumn(s,"");var f={columns:s,data:this._data,selectable:!0,selectFirstRowByDefault:!0,multiselect:!1,resizable:!0,includeMultiselectCheckbox:!0,rowSelect:function(e,t){return i.rowSelect(e,t)},extendWazGrid:function(e){e.on("click",".navigationColumn",function(e){var t=$(e.target).closest("tr").view().data;if(t.rowMetadata){var n=t.rowMetadata.dataItem.Id;i.navigateToWebServiceGroup(n)}})}};this._gridAdapter=new u.WazGridAdapter(f,$(this._renderArea).find("#grid"),!1);if(p.enableProjectBasedAssetsGroupingEnabled()){var l=this._workspace.projectCache.cacheUpdated.subscribe(function(){i.refreshFromService()});this.registerForDisposal(new h.DisposableSubscription(l))}cdm.setActiveItem(this),a.canDeployToArm(this._workspace.id)&&$(this._renderArea).prepend(this.goToBelizeLink())}return __extends(t,e),t.prototype.setCommands=function(){var e=this;this._deleteCommand=new Shell.UI.Commands.Command(d.deleteItem,Shell.UI.Icons["delete"],function(){return e.confirmDelete()},null,!0),Shell.UI.Commands.add(this._deleteCommand),p.competitionExperimentSupportEnabled()&&this.isInSupportedCompetitionRegion()&&(this._publishCompetitionCommand=new Shell.UI.Commands.Command(d.submitCompetitionEntry,Shell.UI.Icons.submitCompetition,function(){return e.onPublishCompetitionEntry()},null,!0),Shell.UI.Commands.add(this._publishCompetitionCommand)),p.enableProjectBasedAssetsGroupingEnabled()&&(this._addToProjectCommand=new Shell.UI.Commands.Command(d.AddToProjectCommand,Shell.UI.Icons.addToProject,function(){var t=e._gridAdapter.selectedItems().map(function(e){return{assetType:2,id:e.Id}});n.openAddToProjectDialogWithMultipleAssets(e._workspace,t)},null,!0),Shell.UI.Commands.add([this._addToProjectCommand]))},t.prototype.isInSupportedCompetitionRegion=function(){return!p.multiGeoNavigationEnabled()||i.isSupportedCompetitionRegion(l.multiGeoRegion)},t.prototype.canSubmitSelectedItemsToCompetition=function(){if(!this.isInSupportedCompetitionRegion())return!1;var e=this._gridAdapter.selectedItems();return e.length==1&&!g.isWorkspaceTypeAnonymous()&&e[0].Tags&&e[0].Tags.some(function(e){return s.CompetitionConstants.CompetitionUrlTagSearchRegex.test(e)})?!0:!1},t.prototype.updatePublishButton=function(){var e=this,t=this._gridAdapter.selectedItems();if(this.canSubmitSelectedItemsToCompetition()){var n=a.convertToWebServiceGroup(t[0]),r=a.getCompetitionUri(n),s=a.getCompetitionTenantId(n);this._workspace.getCompetitionSubmissionAllowedStatusAsync(r,s).done(function(t){if(t.SubmissionsLeftToday<=0||t.TotalSubmissionsLeft<=0){if(t.SubmissionsLeftToday<=0){var n=i.getSubmissionInformationDaily(t);e._publishCompetitionCommand.setTooltip(n)}if(t.TotalSubmissionsLeft<=0){var r=i.getSubmissionInformationTotal(t);e._publishCompetitionCommand.setTooltip(r)}e._publishCompetitionCommand.setDisabled(!0)}else e._publishCompetitionCommand.setDisabled(!1)})}else this._publishCompetitionCommand.setDisabled(!0)},t.prototype.onPublishCompetitionEntry=function(){var e=this;Shell.UI.Spinner.show();var t=this._gridAdapter.selectedItems()[0];y.then(this._workspace.getWebServiceGroupAsync(t.Id),function(t){Shell.UI.Spinner.hide();var n=a.getCompetitionUri(t),s=a.getGalleryUri(t),o=a.getCompetitionTenantId(t);v.featureUsage({featureID:147,groupID:0,data:{competitionUri:n,galleryUri:s,competitionTenantId:o}});var u=new r.CompetitionSubmissionDialog(e._workspace,t,n);u.showDialog(function(r){var o=u.viewModel;o.onWizardCompleted()&&i.startSubmitCompetition(e._workspace,t,o.step1ViewModel.submissionName(),n,s,function(){e.updatePublishButton()})})}).fail(function(){v.error("Failed to launch entry submission dialog for web service group: "+t.Id),Shell.UI.Spinner.hide()})},t.prototype.refreshFromService=function(){var e=this;Shell.UI.Spinner.show(),y.then(this._workspace.listWebServiceGroupsAsync(),function(n){cdm.currentActiveItem instanceof t&&e._renderArea&&$.observable(e._data).refresh(n.map(function(t){return{Id:t.Id,Name:t.Name,CreationTime:y.parseJsonDate(t.CreationTime),type:f.WebServiceGroupType.name,Tags:t.Tags,Project:e._workspace.getProjectListForAsset(t.Id)}}))}).fail(function(e){v.error("listWebServiceGroupsAsync failed: "+e.message),y.showErrorNotification({title:y.format(d.WebServiceGroupListViewLoadFailure,d.productName),details:e.message})}).always(function(){cdm.currentActiveItem instanceof t&&e._renderArea&&(e._gridAdapter.createGrid(),Shell.UI.Spinner.hide())})},t.prototype.navigateToWebServiceGroup=function(e){a.navigateToWebService(this._workspace,e)},t.prototype.dispose=function(){this._renderArea=null,this._gridAdapter.dispose(),this._gridAdapter=null,e.prototype.dispose.call(this)},t.prototype.rowSelect=function(e,t){var n=this._gridAdapter.selectedItems();this._deleteCommand&&this._deleteCommand.setDisabled(n.length!==1),this._addToProjectCommand&&this._addToProjectCommand.setDisabled(n.length===0||n.some(function(e){return e.Project.length!==0})),this._publishCompetitionCommand&&this.updatePublishButton()},t.prototype.showError=function(e){var t=new Shell.UI.Notifications.Confirmation(e,"active");t.setActions([new Shell.UI.Notifications.Buttons.ok(function(){Shell.UI.Notifications.remove(t)})]),Shell.UI.Notifications.add(t)},t.prototype.confirmDelete=function(){var e=this,t=this._gridAdapter.selectedItems(),n=t[0],r=y.format(d.confirmDeleteWebServiceGroup,n.Name);n.Tags.some(function(e){return s.CompetitionConstants.CompetitionUrlTagSearchRegex.test(e)})&&(r+=" "+d.confirmDeleteCompetitionWebServiceGroup);var i=new Shell.UI.Notifications.Confirmation(r,"active");i.setActions([new Shell.UI.Notifications.Buttons.yes(function(){Shell.UI.Notifications.remove(i),Shell.UI.Spinner.show(),t.length===1&&t[0].Id===n.Id&&e.deleteWebServiceGroup(t[0]).done(function(){Shell.UI.Navigation.navigate({extension:f.webServiceGroupExtensionName})}).fail(function(t){e.showError(t.message)}).always(function(){Shell.UI.Spinner.hide()})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(i)})]),Shell.UI.Notifications.add(i)},t.prototype.deleteWebServiceGroup=function(e){var n=this;return y.then(this._workspace.getWebServiceGroupAsync(e.Id),function(r){if(cdm.currentActiveItem instanceof t&&n._renderArea){Shell.UI.Spinner.hide();if(!!a.canDeleteWebserviceGroup(r))return n._workspace.deleteWebServiceGroupAsync(e.Id);n.showError(y.format(d.cannotDeleteWebServiceGroupError,e.Name))}})},t.prototype.goToBelizeLink=function(){var e=window.environment.webServicesUxLocation,t=$('<div class="trybelize trybelize-webservicelist pull-right"><a href="'+e+'" target="_blank">'+d.webserviceListwebserviceInArm+"</a>"+"</div>");return t},t}(h.Disposable);t.WebServiceGroupListView=b});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ExperimentEditor/FeedbackControlViewModel",["require","exports","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o){var u=function(e){function t(){var t=this;e.call(this),this.MAX_LENGTH=1e3,this.isExpanded=ko.observable(!1),this.isHappy=ko.observable(!0),this.isSending=!1,this.question=ko.observable(i.feedbackWhatDidYouLike),this.feedbackText=ko.observable(""),this.remainingLength=ko.computed(function(){var e=t.MAX_LENGTH-t.feedbackText().length;return e>0?e:0}),this.remainingLengthText=ko.computed(function(){return o.format(i.feedbackCharactersLeft||"",t.remainingLength().toString())}),this.expand=function(){t.isExpanded()===!1&&(t.isExpanded(!0),s.customEvent({key:"Open",type:"HeaderBarFeedback"}))},this.collapse=function(){t.isExpanded(!1),s.customEvent({key:"Close",type:"HeaderBarFeedback"})},this.smileyHappySelected=function(){t.isHappy(!0),t.question(i.feedbackWhatDidYouLike),s.customEvent({key:"MoodSmileyHappy",type:"HeaderBarFeedback"})},this.smileySadSelected=function(){t.isHappy(!1),t.question(i.feedbackIsThereSomethingWeCanDoBetter),s.customEvent({key:"MoodSmileySad",type:"HeaderBarFeedback"})},this.sendFeedback=function(){if(t.isSending===!0)return!1;t.isSending=!0;var e={isHappy:t.isHappy(),src:"feedbackBox",content:t.feedbackText()},n=JSON.stringify(e);Shell.Diagnostics.Telemetry.feedbackInfo(n,undefined),s.featureUsage({featureID:20,groupID:21,data:JSON.stringify({isHappy:t.isHappy()})}),t.feedbackText(""),t.collapse(),t.isSending=!1}}return __extends(t,e),t}(r.Disposable);t.FeedbackControlViewModel=u}),define("generated/editor/TS/View/FeedbackControl",["require","exports","../../TS/ViewModel/ExperimentEditor/FeedbackControlViewModel"],function(e,t,n){function r(){var e=$(ExperimentEditorTemplates._feedbackControlMarkup);Impl.UI.HeaderBar.addControl(e);var t=e.get(0),r=new n.FeedbackControlViewModel;ko.applyBindings(r,t),$("body").click(function(e){r.isExpanded()&&$(e.target).parents(".datalab-feedback").length===0&&r.collapse()})}t.initFeedbackControl=r}),define("generated/DataLabClient/Contracts/V1/Common/OnlineSearchContracts",["require","exports"],function(e,t){(function(e){e[e.NotStarted=0]="NotStarted",e[e.InDraft=1]="InDraft",e[e.Running=2]="Running",e[e.Failed=3]="Failed",e[e.Finished=4]="Finished",e[e.Canceled=5]="Canceled"})(t.TaskStatusCode||(t.TaskStatusCode={}));var n=t.TaskStatusCode}),define("generated/editor/TS/ViewModel/SSIMSearch/SaveSSIMDataDialog",["require","exports","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Contracts/V1/Common/OnlineSearchContracts","../../../../DataLabClient/Repeater","../../../../DataLabClient/Model/UnsavedResource","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f=function(){function e(e,t,r,i){this.dataset=new u.UnsavedResource(t,t.datasetCache,t.datasetUploadsInProgress,n.DatasetName),this.dataset.name(e.resultTitle),this.dataset.description(e.resultDescription),this.dataUrl=e.resultDataUrl,this.selectedItem=e,this.workspace=t,this.client=r,this.activeNotifications=i}return e.prototype.dismissed=function(e){e.accepted?this.saveData():i.info("SSIM Dataset upload dialog cancelled")},e.prototype.canBeAccepted=function(){return this.dataset.startValidating(),this.dataset.isValid()},e.prototype.saveData=function(){var e=this,t=$.Deferred();i.info("SSIM Dataset upload dialog accepted");var n={Name:this.dataset.name(),Description:this.dataset.description(),FamilyId:this.dataset.familyId()?this.dataset.familyId():"",SsimDataSourceUrl:this.selectedItem.resultDataUrl,DataSourceType:this.selectedItem.resultDataType,DataSourceProtocol:this.selectedItem.resultDataProtocol,DataSourceAuthentication:this.selectedItem.resultDataAuthentication},s=r.ssimPendingDataset,u=r.ssimUploadSuccess,f=new Shell.UI.Notifications.Progress(s,"active",!1);this.activeNotifications.push(f),f.setActions([new Shell.UI.Notifications.Buttons.ok(function(){Shell.UI.Notifications.remove(f),a.removeElementFromArray(e.activeNotifications,f)})]),Shell.UI.Notifications.add(f);var l=function(e){f.setTitle(e),f.setStatus("error"),t.reject(e)};return this.client.saveSsimData(n).done(function(i){var c=new o.Repeater(function(){return e.client.getDataImport(i).done(function(i){switch(i.ImportStatus.StatusCode){case 3:l(a.format(r.ssimUploadFailed,i.ImportStatus.StatusDetail)),c.stop();break;case 4:f.setTitle(a.format(r.ssimUpdatingCache,u)),f.setValue(100),e.client.listDatasetsAsync().done(function(r){var i=a.first(r,function(e){return e.Name===n.Name},null);e.workspace.datasetCache.getItem(i.Id).done(function(){f.setTitle(u),f.setStatus("success"),t.resolve(u)})}),c.stop();break;case 0:f.setTitle(s);break;case 2:f.setTitle(r.ssimDatasetUploading),f.setValue(50);break;default:l(r.ssimUnexpectedError),c.stop()}})},500);c.start()}),t.promise()},e}();t.SaveDatasetViewModel=f}),define("generated/editor/TS/ViewModel/SSIMSearch/SearchViewModels",["require","exports","../../../TS/Global","../../../../DataLabClient/Util"],function(e,t,n,r){var i;(function(e){e.resultsPerPage=10,e.maxLengthOfDatasetName=100,e.pageBatchSize=5,e.maxDescription=110})(i=t.Constants||(t.Constants={}));var s=function(){function e(e){this.resultTitle=e.Title,this.resultDescription=e.Description,this.resultDataUrl=e.DataSourceAddress,this.resultDataType=e.DataSourceType,this.resultDataAuthentication=e.DataSourceAuthentication,this.resultDataProtocol=e.DataSourceProtocol,this.resultPreviewUrl=e.DataPreviewAddress,this.iconUrl=e.PublisherIconUrl,this.iconVisible=!!this.iconUrl,this.hovered=ko.observable(!1),this.resultDescription&&this.resultDescription.length>i.maxDescription?this.shortDescription=this.resultDescription.substr(0,i.maxDescription)+"...":this.shortDescription=this.resultDescription}return e}();t.SearchResultViewModel=s;var o=function(){function e(e,t,n){var r=this;this.pageId=e,this.selected=ko.observable(t);var i=function(e){e&&n(r.pageId)};this.selected.subscribe(i),i(t)}return e}();t.SearchResultsPage=o,t.windowHeight=null;var u=function(){function e(e,t){var n=this;this.searchResults=ko.observableArray(),this.searchQuery=ko.observable(""),this.hoveredItem=ko.observable(null),this.noResultsFound=ko.observable(!1),this.searchResultCount=ko.observable(0),this.searchResultPages=ko.observableArray(),this.currentPage=ko.observable(0),this.pageCount=ko.observable(0),this.headerText=ko.computed(function(){return n.searchResultCount()+" results"}),this.previewTitle=ko.computed(function(){return n.hoveredItem()?n.hoveredItem().resultTitle:""}),this.previewDescription=ko.computed(function(){return n.hoveredItem()?n.hoveredItem().resultDescription:""}),this.selectedPreviewAddress=ko.computed(function(){return n.hoveredItem()?n.hoveredItem().resultPreviewUrl:""}),this.datalabPreviewUrl=ko.computed(function(){return n.selectedPreviewAddress()?"/Home/Preview?url="+n.selectedPreviewAddress():""}),this.previousEnabled=ko.computed(function(){return n.currentPage()>1}),this.nextEnabled=ko.computed(function(){return n.pageCount()>n.currentPage()}),this.searchActive=ko.observable(!1),this.previewLoadActive=ko.observable(!1),this.spinnerActive=ko.computed(function(){var e=n.searchActive()||n.previewLoadActive();return e?Shell.UI.Spinner.show():Shell.UI.Spinner.hide(),e}),this.refresh(e,t)}return e.prototype.refresh=function(e,t){this.searchBoxFocus=!0,this.parent=t,this.client=e},e.prototype.selectItem=function(e){this.parent.launchSaveDatasetDialog()},e.prototype.selectPreview=function(e){this.hoveredItem()!==e&&(r.forEach(this.searchResults(),function(e){e.hovered(!1)}),this.hoveredItem(e),e.hovered(!0),this.previewLoadActive(!0))},e.prototype.doSearch=function(e,t,n){var u=this;this.searchActive(!0),this.activeQuery=e,this.activePage=t,this.client.ssimSearch(e,t,i.resultsPerPage).done(function(a){if(e===u.activeQuery&&t===u.activePage){var f=a;u.searchResults.removeAll(),r.forEach(f.SearchResults,function(e){e.Title=e.Title.trim(),u.searchResults.push(new s(e))}),u.searchResultCount(f.TotalResults),u.noResultsFound(u.searchResults().length===0);if(n){u.pageCount(Math.floor((f.TotalResults-1)/i.resultsPerPage)+1);for(var l=0;l<Math.min(i.pageBatchSize,u.pageCount());l++)u.searchResultPages.push(new o(l+1,!1,u.currentPage));l>0&&u.searchResultPages()[0].selected(!0)}u.searchActive(!1)}})},e.prototype.search=function(){this.searchResults.removeAll(),this.searchResultPages.removeAll(),this.hoveredItem(null),this.noResultsFound(!1),this.searchResultCount(0),this.currentPage(0),this.pageCount(0);var e=encodeURIComponent(this.searchQuery().trim().replace(/</g,""));e.length>i.maxLengthOfDatasetName&&(e="",this.searchQuery("")),e&&(this.currentQuery=e,this.doSearch(e,1,!0))},e.prototype.doSwitchPage=function(e){this.hoveredItem(null),this.doSearch(this.currentQuery,e.pageId,!1),r.forEach(this.searchResultPages(),function(e){e.selected(!1)}),e.selected(!0)},e.prototype.center=function(e){var t=Math.floor(i.pageBatchSize/2);this.searchResultPages.removeAll();var n=null,r=Math.max(1,e-t),s=Math.min(r+i.pageBatchSize-1,this.pageCount());s-r<i.pageBatchSize-1&&(r=Math.max(1,this.pageCount()-i.pageBatchSize+1));for(var u=r;u<=s;u++)if(u>0&&u<=this.pageCount()){var a=new o(u,!1,this.currentPage);this.searchResultPages.push(a),u===e&&(n=a)}return n},e.prototype.switchPage=function(e){this.doSwitchPage(this.center(e.pageId))},e.prototype.prevPage=function(){var e=this.currentPage()-1;this.doSwitchPage(this.center(e))},e.prototype.nextPage=function(){var e=this.currentPage()+1;this.doSwitchPage(this.center(e))},e.prototype.handleKeypress=function(e,t){return t.keyCode===13?(this.search(),!1):!0},e.prototype.iframeLoad=function(e,t){this.previewLoadActive(!1)},e}();t.SearchTabViewModel=u}),define("generated/editor/TS/View/OnlineSearch",["require","exports","../../TS/View/DialogViewFactories","../../TS/ViewModel/SSIMSearch/SaveSSIMDataDialog","../../TS/ViewModel/SSIMSearch/SearchViewModels"],function(e,t,n,r,i){var s=null,o=function(){function e(e,t,n){var r=this;this.client=t,this.workspace=n,s?s.refresh(t,this):s=new i.SearchTabViewModel(t,this),this.viewModel=s;var o=$("#idSearchTemplate").get(0);ko.applyBindings(this.viewModel,o),this.activeNotifications=[],$(window).one("hashchange",function(){r.removeNotifications(),ko.cleanNode(o)})}return e.prototype.removeNotifications=function(){this.activeNotifications.forEach(function(e){Shell.UI.Notifications.remove(e)}),this.activeNotifications=[]},e.prototype.launchSaveDatasetDialog=function(){var e=this.viewModel.hoveredItem();if(e){var t=new r.SaveDatasetViewModel(e,this.workspace,this.client,this.activeNotifications);n.SaveSSSIMDataset.show(t)}},e}();t.SearchView=o}),define("generated/editor/TS/View/DataImportsPivot",["require","exports","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Util"],function(e,t,n,r,i){var s=function(){function e(e,t){var r=this;this.renderArea=t,this.client=e,this.data=[],this.grid=$(this.renderArea).find("#grid").addClass("usersGrid").fxDataGrid({columns:[{name:n.name,field:"name"},{name:n.description2,field:"description"},{name:n.status,field:"status"}],data:this.data,selectable:!0,multiselect:!0,resizable:!0,rowSelect:function(e,t){r.removeCommand.setDisabled(r.grid.fxDataGrid("getSelectedRows").length===0)}})}return e.prototype.setRemoveCommand=function(e){this.removeCommand=e,this.removeCommand.setDisabled(this.grid.fxDataGrid("getSelectedRows").length===0)},e.prototype.refreshFromService=function(){var e=this;Shell.UI.Spinner.show(),this.client.listDataImports().done(function(t){Shell.UI.Spinner.hide();var n=[];i.forEach(t,function(e){n.push({id:e.Id,name:e.DestinationName,description:e.DestinationDescription,status:e.ImportStatus.StatusCode+(e.ImportStatus.StatusDetail?" - "+e.ImportStatus.StatusDetail:"")+(e.ActivityId?", Service request ID: "+e.ActivityId:"")})}),$.observable(e.data).refresh(n)})},e.prototype.removeDataImports=function(){var e=this,t=this.grid.fxDataGrid("getSelectedRows").length,s=new Shell.UI.Notifications.Confirmation(i.format(n.removeDataImportsConfirmation,t.toString()),"active");s.setActions([new Shell.UI.Notifications.Buttons.yes(function(){e.doRemoveDataImports(),r.customEvent({key:"RemoveDataImport_Yes",type:"ShellUICommands"})}),new Shell.UI.Notifications.Buttons.no(function(){Shell.UI.Notifications.remove(s),r.customEvent({key:"RemoveDataImport_No",type:"ShellUICommands"})})]),Shell.UI.Notifications.add(s)},e.prototype.doRemoveDataImports=function(){var e=this,t=this.grid.fxDataGrid("getSelectedRows"),n=[];i.forEach(t,function(t){var r=t.dataItem;n.push(e.client.deleteDataImport(r.id))}),Shell.UI.Spinner.show(),$.when.apply($,n).always(function(){e.refreshFromService()})},e}();t.DataImportsPivot=s}),define("generated/editor/TS/ViewModel/Dialogs/UploadDatasetDialogViewModel",["require","exports","../../../TS/Global","../../../../DataLabClient/Constants","../../../../DataLabClient/Model/DataType","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Trial","../../../../DataLabClient/Model/UnsavedResource","../../../../DataLabClient/Util","../../../../DataLabClient/Validation","../../../../DataLabClient/Logging/IfxScenarioStopWatch"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(){function e(e){var t=this;this.datasetUploadStartedEvent=new ko.subscribable,this.workspace=e;var i=l.values(this.workspace.applicationCache.dataTypeRegistry.dataTypes);this.dataTypes=i.filter(function(e){return e.allowUpload}),this.dataset=new f.UnsavedResource(e,e.datasetCache,e.datasetUploadsInProgress,r.DatasetName),this.fileToUpload=c.validatableObservable(null,function(e){var t=s.chunkedUploadInStudioEnabled()?n.maxUploadSizeInBytesNew:n.maxUploadSizeInBytes,r=s.chunkedUploadInStudioEnabled()?n.maxUploadSizeDescriptionNew:n.maxUploadSizeDescription;return e?s.trialLimitationsEnabled()&&e.size>a.getMaxDatasetUploadSize()?l.format(o.fileTooLargeAnonymous,l.formatDataSize(a.getMaxDatasetUploadSize(),3)):e.size>t?l.format(o.fileTooLarge,r):e.size===0?o.fileEmpty:null:o.selectUploadFile}),this.fileToUpload.subscribe(function(e){if(!e)return;var n=l.first(t.workspace.datasetCache.items(),function(t){return t.filename===e.name},null);n?(t.dataset.deprecate(!0),t.dataset.resourceToDeprecate(n.name()),t.dataset.hint(!0)):(t.dataset.name(e.name),t.dataset.hint(!1)),t.selectDataTypeForFileName(e.name)}),this.validatedFields=[this.dataset,this.dataset.dataType,this.fileToUpload]}return e.prototype.getDataTypeCaption=function(e){var t=e.name;return e.fileExtension&&(t=t+" (."+e.fileExtension+")"),t},e.prototype.dismissed=function(e){this.dataset.updateAvailableResources.dispose(),e.accepted?(u.info("Dataset upload dialog accepted"),this.upload()):u.info("Dataset upload dialog cancelled")},e.prototype.canBeAccepted=function(){return this.validatedFields.forEach(function(e){return e.startValidating()}),this.validatedFields.every(function(e){return e.isValid()})},e.prototype.upload=function(){var e=this,t=new h.IfxScenarioStopWatch(14,{datatype:this.dataset.dataType(),datasetName:this.dataset.name()});t.start(),this.workspace.datasetUploadsInProgress().push(this.dataset.name());var n=function(){return e.workspace.uploadDatasetAsync(e.fileToUpload(),e.dataset.name(),e.dataset.dataType(),e.fileToUpload().name,e.dataset.description(),e.dataset.familyId(),t)},r=l.then(l.whenTrue(this.workspace.applicationCache.allPrefetched),n);this.datasetUploadStartedEvent.notifySubscribers(r)},e.prototype.selectDataTypeForFileName=function(e){var t=this.workspace.applicationCache.dataTypeRegistry.findDataTypesForFileName(e).filter(function(e){return e.allowUpload});if(t.length>0)this.dataset.dataType(t[0]);else{var n=this.workspace.applicationCache.dataTypeRegistry.tryGetDataTypeWithId(i.WellKnownDataTypeIds.Any);n&&n.allowUpload&&this.dataset.dataType(n)}},e}();t.UploadDatasetDialogViewModel=p}),define("generated/editor/TS/ViewModel/Dialogs/UploadModuleDialogViewModel",["require","exports","../../../TS/Global","../../../TS/ViewModel/PropertyEditorControl/PropertyViewModel","../../../../DataLabClient/Constants","../../../../DataLabClient/Model/DataType","../../../../DataLabClient/Model/DataTypeRegistry","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Model/Property","../../../../DataLabClient/Model/UnsavedResource","../../../../DataLabClient/Util","../../../../DataLabClient/Validation"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(){function e(e){var t=this;this.uploadDialogExamples=ko.observableArray([]),this.modulePackageUploadStartedEvent=new ko.subscribable,this.workspace=e;var r=c.values(this.workspace.applicationCache.dataTypeRegistry.dataTypes),s=new o(r),a=s.findDataTypesForFileExtension(".zip").filter(function(e){return e.allowUpload});this.zipFile=new l.UnsavedResource(e,e.datasetCache,e.customModulePackageUploadsInProgress,i.CustomModulePackageName),this.fileToUpload=h.validatableObservable(null,function(e){return e?e.size>n.maxModulePackageUploadSizeInBytes?c.format(u.fileTooLarge,n.maxModulePackageUploadSizeDescription):e.size===0?u.fileEmpty:s.findDataTypesForFileName(e.name).filter(function(e){return a.filter(function(t){return e===t}).length>0}).length===0?u.fileInvalidType:null:u.selectUploadFile}),this.fileToUpload.subscribe(function(e){if(!e)return;t.zipFile.name(e.name),t.zipFile.hint(!1),t.selectDataTypeForFileName(e.name)}),this.setDialogUploadExamplesAndText(),this.validatedFields=[this.zipFile,this.zipFile.dataType,this.fileToUpload]}return e.prototype.getDataTypeCaption=function(e){var t=e.name;return e.fileExtension&&(t=t+" (."+e.fileExtension+")"),t},e.prototype.dismissed=function(e){this.zipFile.updateAvailableResources.dispose(),e.accepted?(a.info("Module upload dialog accepted"),this.upload()):a.info("Module upload dialog cancelled")},e.prototype.canBeAccepted=function(){return this.validatedFields.forEach(function(e){return e.startValidating()}),this.validatedFields.every(function(e){return e.isValid()})},e.prototype.upload=function(){this.workspace.customModulePackageUploadsInProgress().push(this.zipFile.name());var e=this.workspace.uploadCustomModulePackageAsync(this.fileToUpload(),this.zipFile.name(),this.zipFile.dataType(),this.fileToUpload().name,this.zipFile.description(),this.zipFile.familyId());this.modulePackageUploadStartedEvent.notifySubscribers(e)},e.prototype.selectDataTypeForFileName=function(e){var t=this.workspace.applicationCache.dataTypeRegistry.findDataTypesForFileName(e).filter(function(e){return e.allowUpload});if(t.length>0)this.zipFile.dataType(t[0]);else{var n=this.workspace.applicationCache.dataTypeRegistry.tryGetDataTypeWithId(s.WellKnownDataTypeIds.Any);n&&n.allowUpload&&this.zipFile.dataType(n)}},e.prototype.setDialogUploadExamplesAndText=function(){var e=this,t=window.environment.customModuleSupportedLanguages.replace(" ","").split(","),n=[];t.forEach(function(t){switch(t){case"R":n.push(u.uploadModuleDialogSupportedLanguageR),e.uploadDialogExamples.push(new r.LinkPropertyViewModel(new f.LinkProperty(u.uploadModuleDialogExampleR,u.uploadModuleDialogExampleRLink),function(e){a.featureUsage({featureID:152,groupID:0}),window.open(u.uploadModuleDialogExampleRLink,"_blank")}));break;case"Py":n.push(u.uploadModuleDialogSupportedLanguagePy),e.uploadDialogExamples.push(new r.LinkPropertyViewModel(new f.LinkProperty(u.uploadModuleDialogExamplePy,u.uploadModuleDialogExamplePyLink),function(e){a.featureUsage({featureID:153,groupID:0}),window.open(u.uploadModuleDialogExamplePyLink,"_blank")}));break;default:}});var i;if(n.length===1)i=n[0];else{var s=n.pop();i=n.join(", ")+" "+u.uploadModuleDialogSupportedLanguagesConjunction+" "+s}this.uploadDialogText=c.format(u.uploadModuleDialogDescriptionText,i)},e}();t.UploadModuleDialogViewModel=p}),define("generated/editor/TS/View/AzureFxDialogHost",["require","exports"],function(e,t){var n=$.templates("<div class='datalab-dialog'></div>"),r=function(){function e(){this.dialogDismissedEvent=new ko.subscribable}return e.prototype.isActiveDialog=function(e){return e===this.activeDialog},e.prototype.acceptActiveDialog=function(){this.assertDialogIsActive();if(this.isActiveDialogInitialized()){var e={preventDefault:$.noop,type:"click",which:1};this.activeDialogElement.fxDialog("ok",e)}},e.prototype.closeActiveDialog=function(){this.assertDialogIsActive();if(this.isActiveDialogInitialized()){var e=document.createEvent("CustomEvent");e.initEvent("close",!0,!0),this.activeDialogElement.fxDialog("close",e)}},e.prototype.showNewDialog=function(e){var t=this;this.activeDialog&&this.closeActiveDialog(),this.activeDialog=e;var r=$("<div>").css({display:"none","class":"datalab-azurefx-dialog-content"}).appendTo(document.body),i=function(e){t.activeDialogElement=e,t.activeDialogElement.find(".datalab-dialog").append(r),r.css({display:""})},s={template:n,init:function(){i(this.element),s.postRenderDialog&&s.postRenderDialog.call(this)},ok:function(){var e=t.activeDialog.canBeAccepted();return e&&(o=!0),e},okOrClose:function(){t.onDialogDismissed(e,o)}};e.optionsOverrides&&$.extend(s,e.optionsOverrides);var o=!1;return Shell.UI.DialogPresenter.show(s),r.get(0)},e.prototype.onDialogDismissed=function(e,t){if(!this.isActiveDialog(e))throw new Error("Attempted to dismiss a dialog other than the active one");this.dialogDismissedEvent.notifySubscribers({dialog:this.activeDialog,accepted:t}),this.activeDialog=null},e.prototype.assertDialogIsActive=function(){if(!this.activeDialog)throw new Error("No dialog active")},e.prototype.isActiveDialogInitialized=function(){return this.activeDialog&&this.activeDialogElement&&this.activeDialogElement.data("fxFxDialog")},e}();t.AzureFxDialogHost=r}),define("generated/editor/TS/View/WorkspacesBar",["require","exports","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Util"],function(e,t,n,r,i){function c(e,t){o=e;var n=$("<div/>");Impl.UI.HeaderBar.addControl(n),e.listWorkspacesAsync().done(function(r){d(n,e.workspaceId,r,t)})}function h(e){return e?e:"-"}function p(e,t){return h(e)+"\r\n"+n.description+h(t)}function d(e,t,o,c){var e,d,v,m=[],g=i.first(o,function(e){return e.WorkspaceId===t},null);g||(g={WorkspaceId:t,FriendlyName:"Workspace",Description:""},o.push(g)),m.push({type:"text",text:n.workspaceBarWorkspaces,setup:function(e){e.addClass(f.WorkspacesBar.menuHeaderItemClass)}}),o.forEach(function(e){m.push({type:"text",text:h(e.FriendlyName),setup:function(t){t.addClass(f.WorkspacesBar.menuItemClass).attr("title",p(e.FriendlyName,e.Description)),e===g&&(t.addClass(f.WorkspacesBar.fxsSelectedItemClass),d=t)},click:function(){e!==g&&(Shell.UI.Spinner.show(),r.customEvent({key:"SwitchWorkspace",type:"Settings",workspaceID:e.WorkspaceId}),window.location.href="/Home/ViewWorkspace/"+e.WorkspaceId)}})}),m.push({type:"separator"}),m.push({type:"text",text:n.workspaceBarUsefulActions,setup:function(e){e.addClass(f.WorkspacesBar.menuHeaderItemClass)}}),m.push({type:"text",text:n.workspaceBarRenameWorkspace,click:function(){Shell.UI.Navigation.navigate({extension:"Settings",view:"Name"}),l.settingsNameFocusOnNameBox=!0}}),c&&m.push({type:"text",text:n.workspaceBarManageWorkspaceUsers,click:function(){Shell.UI.Navigation.navigate({extension:"Settings",view:"Users"})}}),e.fxsAvatarBar({menuItems:m,name:""}),e.addClass(f.WorkspacesBar.workspaceManagerClass);var y=e.find(".fxs-avatarbar-menu"),b=!1,w=600,E=500;v=function(t){if(t){e.removeAttr("title");var n=d.position().top;n>w&&!b&&(y.animate({scrollTop:n},E),b=!0)}else{var r=p(g.FriendlyName,g.Description);e.attr("title",r)}},e.fxsAvatarBar("getViewModel").menuOpen.subscribe(function(e){v(e)}),s=function(t,n){g.FriendlyName=h(t),g.Description=h(n),e.fxsAvatarBar("getViewModel").name(g.FriendlyName),d.attr("title",p(t,n)),d.find("a").text(g.FriendlyName),v(e.fxsAvatarBar("getViewModel").menuOpen())};if(u||a)g.FriendlyName=u,g.Description=a;s(g.FriendlyName,g.Description)}function v(e){s?s(e.friendlyName(),e.description()):(u=e.friendlyName(),a=e.description())}var s=null,o,u=null,a=null,f;(function(e){var t;(function(e){e.workspaceManagerClass="datalab-workspace-manager",e.menuHeaderItemClass="workspaces-menu-header-item",e.menuItemClass="workspaces-menu-item",e.fxsSelectedItemClass="fxs-contextmenu-languagepicker-selected",e.maxTopPosition=600,e.animationDuration=500})(t=e.WorkspacesBar||(e.WorkspacesBar={}))})(f=t.Constants||(t.Constants={}));var l;(function(e){e.settingsNameFocusOnNameBox=!1})(l=t.WorkspacesBar||(t.WorkspacesBar={})),t.createWorkspacesBar=c,t.updateBar=v}),define("generated/DataLabClient/Contracts/V1/Common/Experiment",["require","exports","../../../Constants"],function(e,t,n){function r(e){var t=(e||[]).map(function(e){switch(e){case n.NotebookLanguage.Python2:return"Python2";case n.NotebookLanguage.Python3:return"Python3";case n.NotebookLanguage.R:return"R";default:return null}}).filter(function(e){return e!=null});return t}t.convertToCatalogNotebookLanguages=r}),define("generated/DataLabClient/Contracts/V1/WorkspaceBackend",["require","exports","../../Util","../../Model/ModuleNode","../../Model/Parameter","./Serializer","./Deserializer-v1","./Common/Annotation","./Common/WebServiceContracts","../../Model/DatasetNode","../../Model/WorkspaceSettings","../../Model/CommunityExperiment","./Common/Experiment","../../Logging/Logging","../../Shell/Button","../../Shell/ButtonFactory","../../Shell/NotificationControl","../../Model/ModulePortDescriptor","../../Features"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){(function(e){e[e.None=0]="None",e[e.Primary=1]="Primary",e[e.Secondary=2]="Secondary"})(t.RegenerateTokenType||(t.RegenerateTokenType={}));var b=t.RegenerateTokenType,w=function(){function e(e){this.cachedGateways=null,this.client=e}return e.prototype.nameAvailable=function(e){return this.client.gatewayNameAvailable(e)},e.prototype.createGateway=function(e,t){return this.client.createGateway(e,t)},e.prototype.getGateways=function(){var e=this,t=this.client.getGateways();return t.then(function(t){e.cachedGateways=t,clearTimeout(e.cacheClearTimeout),e.cacheClearTimeout=setTimeout(function(){e.cachedGateways=null},6e4)}),t},e.prototype.getGatewaysCached=function(){return this.cachedGateways?$.Deferred().resolve(this.cachedGateways).promise():this.getGateways()},e.prototype.getGateway=function(e){return this.client.getGateway(e)},e.prototype.deleteGateway=function(e){return this.client.deleteGateway(e)},e.prototype.generateRegistrationKey=function(e){return this.client.generateGatewayRegistrationKey(e)},e.prototype.updateGateway=function(e,t){return this.client.updateGateway(e,t)},e.prototype.getExpressInstallLink=function(e,t){return this.client.getGatewayExpressInstallLink(e,t)},e.prototype.getCredentialEntryRequest=function(e,t,n){return this.client.getGatewayCredentialEntryRequest(e,t,n)},e.prototype.getAreCredentialsEntered=function(e){return this.client.getAreGatewayCredentialsEntered(e)},e.prototype.getEnteredCredentials=function(e){return this.client.getEnteredGatewayCredentials(e)},e}();t.DataGatewayBackend=w;var E=function(){function e(e,t){this.dataGatewayBackend=null,this.workspaceId=e.workspaceId,this.friendlyName=e.workspaceFriendlyName,this.dataGatewayBackend=new w(t),this.client=e}return e.prototype.saveCredentials=function(e,t){var r=this,i=[];return n.forEach(e,function(e){i.push(r.client.saveCredential(e,t))}),$.when.apply($,i)},e.prototype.publishExperimentAsync=function(e){var t=this,o="";e.nodes.forEach(function(e){if(e instanceof r.ModuleNode){var t=e;n.forEach(t.parameters,function(e){e instanceof i.CredentialParameter&&!e.isLinked()&&(o+="Module: "+t.name+", Parameter: "+e.name+"; ")})}});if(o){o="Some of the credential parameters in experiment are not linked to experiment level parameters. This is a restriction that will be removed in the future. "+o;var u=m.notificationControl.createNotification(o,m.NotificationStatus.Error),a=v.createButtonFactory();u.setActions([a.createButton(3,function(){m.notificationControl.remove(u)})]),setTimeout(function(){return m.notificationControl.add(u)},500);var f=$.Deferred();return f.reject("CredentialValidationSUO6")}var l={Description:e.description(),DataflowGraph:s.serialize(e),ParentId:e.experimentId()},c=n.succeed([]);if(!y.deprecateCredentialsSystemEnabled()){var h=s.extractCredentials(e);c=this.saveCredentials(h)}return n.then(c,function(){return n.then(t.client.publishExperimentAsync(l),function(e){return e.DataflowId})})},e.prototype.listExperimentsAsync=function(e,t){return this.client.listExperimentsAsync(e,t)},e.prototype.listWorkspacesAsync=function(){return this.client.listWorkspacesAsync()},e.prototype.listUserWorkspacesAsync=function(e,t){return this.client.listUserWorkspacesAsync(e,t)},e.prototype.listWorkspacesPermissionsAsync=function(e,t){return this.client.listWorkspacesPermissionsAsync(e,t)},e.prototype.deleteWorkspaceAsync=function(){return this.client.deleteWorkspaceAsync()},e.prototype.createExperimentStoragePackageAsync=function(e,t,n,r){return this.client.createExperimentStoragePackageAsync(e,t,n,r)},e.prototype.createExperimentStoragePackageForCommunityAsync=function(e,t,n,r){return this.client.createExperimentStoragePackageForCommunityAsync(e,t,n,r)},e.prototype.getExperimentStoragePackageAsync=function(e){return this.client.getExperimentStoragePackageAsync(e)},e.prototype.createExperimentFromStoragePackageAsync=function(e,t){return this.client.createExperimentFromStoragePackageAsync(e,t)},e.prototype.createNotebookStoragePackageForCommunityAsync=function(e,t){return this.client.createNotebookStoragePackageForCommunityAsync(e,t)},e.prototype.getNotebookStoragePackageAsync=function(e){return this.client.getNotebookStoragePackageAsync(e)},e.prototype.submitExperimentAsync=function(e,t){var r=this,i=this.generateSubmissionRequest(e,!1),o=n.succeed([]);if(!y.deprecateCredentialsSystemEnabled()){var u=s.extractCredentials(e);o=this.saveCredentials(u)}return n.then(o,function(){return e.isDraft()&&e.persistedOnService()?n.then(r.client.updateExperimentAsync(e.experimentId(),e.etag(),i,t),function(t){return{ExperimentId:e.experimentId(),Etag:t}}):n.then(r.client.submitExperimentAsync(i,t),function(e){return e})})},e.prototype.saveDraftAsync=function(e){var t=this,r=this.generateSubmissionRequest(e,!0),i=n.succeed([]);if(!y.deprecateCredentialsSystemEnabled()){var o=s.extractCredentials(e);i=this.saveCredentials(o)}return n.then(i,function(){return n.then(t.client.submitExperimentAsync(r),function(e){return e})})},e.prototype.updateExperimentAsync=function(e){var t=this,r=this.generateSubmissionRequest(e,e.isDraft()),i=n.succeed([]);if(!y.deprecateCredentialsSystemEnabled()){var o=s.extractCredentials(e);i=this.saveCredentials(o)}return n.then(i,function(){return n.then(t.client.updateExperimentAsync(e.experimentId(),e.etag(),r),function(t){return{ExperimentId:e.experimentId(),Etag:t}})})},e.prototype.deleteExperimentAsync=function(e,t){return this.client.deleteExperimentAsync(e,t)},e.prototype.deleteExperimentAndAncestorsAsync=function(e,t){return this.client.deleteExperimentAndAncestorsAsync(e,t)},e.prototype.cancelExperimentAsync=function(e){return this.client.cancelExperimentAsync(e)},e.prototype.promoteOutputToDatasetAsync=function(e,t,n,r){n===void 0&&(n=null),r===void 0&&(r="");var i=this.promotionHelper(e,t,n,r),s={DataSource:i,ExperimentId:e.parent.executedExperimentId,ModuleNodeId:e.parent.id,OutputName:e.name};return this.client.promoteOutputToDatasetAsync(s)},e.prototype.promoteOutputToTrainedModelAsync=function(e,t,n,r){n===void 0&&(n=null),r===void 0&&(r="");var i=this.promotionHelper(e,t,n,r),s={TrainedModel:i,ExperimentId:e.parent.executedExperimentId,ModuleNodeId:e.parent.id,OutputName:e.name};return this.client.promoteOutputToTrainedModelAsync(s)},e.prototype.promoteOutputToTransformModuleAsync=function(e,t,n,r){n===void 0&&(n=null),r===void 0&&(r="");var i=this.promotionHelper(e,t,n,r),s={Transform:i,ExperimentId:e.parent.executedExperimentId,ModuleNodeId:e.parent.id,OutputName:e.name};return this.client.promoteOutputToTransformModuleAsync(s)},e.prototype.promotionHelper=function(e,t,n,i){n===void 0&&(n=null),i===void 0&&(i="");if(e.descriptor.allowedDataTypes.length!==1)throw new Error("Can't promote output from a multi-typed output port.");if(e.parent instanceof r.ModuleNode)return{Name:t,DataTypeId:e.descriptor.allowedDataTypes[0].dataTypeId,Description:i,FamilyId:n};throw new Error("Only the output ports of a module node can be promoted.")},e.prototype.uploadDatasetAsync=function(e,t,r,i,s,o,u){var a=this;s===void 0&&(s=""),o===void 0&&(o=null);var f={Name:t,DataTypeId:r.dataTypeId,Description:s,FamilyId:o};return n.then(this.client.uploadResourceAsync(e,r.dataTypeId,u),function(e){var t={DataSource:f,UploadId:e.Id,UploadedFromFilename:i};return a.client.commitResourceAsDatasetAsync(t,u)},function(e){return u&&u.error(e),e})},e.prototype.uploadCustomModulePackageAsync=function(e,t,r,i,s,o){var u=this;s===void 0&&(s=""),o===void 0&&(o=null);var a={Name:t,DataTypeId:r.dataTypeId,Description:s,FamilyId:o};return n.then(this.client.uploadResourceAsync(e,r.dataTypeId),function(e){var t=e;return u.client.buildResourceAsCustomModulePackageAsync(t)})},e.prototype.uploadNotebookAsync=function(e,t){return this.client.uploadNotebookAsync(e,t)},e.prototype.getExperimentAsync=function(e,t,r,i,s,u,a,f){return n.then(this.client.getExperimentAsync(e,f),function(e){return o.deserializeExperiment(e,t,r,i,s,u,a)})},e.prototype.getExperimentAnnotationsAsync=function(e){return n.then(this.client.getExperimentAnnotationsAsync(e),function(e){return u.deserializeAnnotations(e)})},e.prototype.addExperimentAnnotationsAsync=function(e,t){var r=u.serializeAnnotations(t);return n.then(this.client.addExperimentAnnotationsAsync(e,r),function(e){return u.deserializeAnnotations(e)})},e.prototype.addSerializedExperimentAnnotationsAsync=function(e,t){return n.then(this.client.addExperimentAnnotationsAsync(e,t),function(e){return u.deserializeAnnotations(e)})},e.prototype.updateExperimentAnnotationsAsync=function(e,t){var r=u.serializeAnnotations(t);return n.then(this.client.updateExperimentAnnotationsAsync(e,r),function(e){return u.deserializeAnnotations(e)})},e.prototype.deleteExperimentAnnotationsAsync=function(e,t){return this.client.deleteExperimentAnnotationsAsync(e,t)},e.prototype.getExperimentLineageAsync=function(e){return this.client.getExperimentLineageAsync(e)},e.prototype.getExperimentInfoAsync=function(e){return n.then(this.client.getExperimentAsync(e),function(e){return n.replaceJsonDates(e.Status,["CreationTime","StartTime","EndTime"]),e})},e.prototype.getDataflowAsync=function(e,t,r,i,s,u,a,f){return n.then(this.client.getDataflowAsync(e,f),function(e){return o.deserializeDataflow(e,t,r,i,s,u,a)})},e.prototype.createWebServiceGroupAsync=function(e,t,n,r){var i={Name:e,Description:t,AllowAnonymousTest:n,Tags:r};return this.client.createWebServiceGroupAsync(i)},e.prototype.listWebServiceGroupsAsync=function(){return this.client.listWebServiceGroupsAsync()},e.prototype.updateWebServiceGroupAsync=function(e,t,n,r,i){var s={Name:t,Description:n,AllowAnonymousTest:r,Tags:i};return this.client.updateWebServiceGroupAsync(e,s)},e.prototype.getWebServiceGroupAsync=function(e){return this.client.getWebServiceGroupAsync(e)},e.prototype.deleteWebServiceGroupAsync=function(e){return this.client.deleteWebServiceGroupAsync(e)},e.prototype.createModelPackageAsync=function(e,t,r){function c(n){var r={StatusCode:1,Workflow:s.serialize(t),Inputs:o,LinkedExperimentId:t.experimentId(),Parameters:l?l.Parameters:null,UpdatableInputs:a};return r.Outputs=u,n.registerModelPackageAsync(e,r)}function h(e,n,i){if(n&&n.schemaEndpoint){var s;n.parent instanceof f?s=r.getDatasetSchema(n.parent.dataset.id):s=r.getModuleOutputSchema(t.experimentId(),n.parent.id,n.name),s.done(function(t){p(e,JSON.stringify(t),i)}).fail(function(t){p(e,null,i)}),m.push(s)}else p(e,null,i)}function p(e,t,n){var r=null,i=e.connectedWebServicePorts();i&&i.length&&(r=i[0].parent.nameParameter.value());var s={GraphModuleNodeId:e.parent.id,PortName:e.name,Schema:t,Name:r};if(n)o.push(s);else{if(e.descriptor&&e.descriptor.allowedDataTypes)for(var a in e.descriptor.allowedDataTypes){if(e.descriptor.allowedDataTypes[a].dataTypeId==="ILearnerDotNet"){s.OutputType="TrainedModel";break}if(e.descriptor.allowedDataTypes[a].dataTypeId==="ITransformDotNet"){s.OutputType="Transform";break}}u.push(s)}}var i=this,o=[],u=[],a=[],l=s.serializeWebServiceInfo(t);n.forEach(t.trainedModels,function(e){var t=e.trainedModelPort;if(!t.isConnected())return;n.forEach(t.connectedPorts(),function(t){a.push({GraphModuleNodeId:t.parent.id,PortName:t.name,Name:e.trainedModel.name(),Schema:null})})});var d=t.getPublishInputPorts(),v=t.getPublishOutputPorts();if(d.length>0||v.length>0){var m=[];d.forEach(function(e){h(e,e.connectedOutputPort,!0)}),v.forEach(function(e){h(e,e,!1)});var g=$.Deferred();return $.when.apply($,m).always(function(){c(i.client).done(function(e){g.resolveWith($,[e])}).fail(function(e){g.rejectWith($,[e])})}),g}return c(this.client)},e.prototype.listModelPackagesAsync=function(e){return this.client.listModelPackagesAsync(e)},e.prototype.getModelPackageAsync=function(e,t){return this.client.getModelPackageAsync(e,t)},e.prototype.updateModelPackageAsync=function(e,t,n,r,i,s){var o={StatusCode:n,InputsMetadata:r,GlobalParametersMetadata:s};return o.OutputsMetadata=i,this.client.updateModelPackageAsync(e,t,o)},e.prototype.registerWebServiceAsync=function(e,t){var r=this;return n.then(this.getWorkspaceSettingsAsync(),function(n){var i=l.WorkspaceTypeExtensions.isProduction(n.type),s={ModelPackageId:t,WebServiceType:i?a.WebServiceType.Production:a.WebServiceType.Staging,DiagnosticsSettings:null,SampleDataEnabled:!1};return r.client.registerWebServiceAsync(e,s)})},e.prototype.getWebServiceAsync=function(e,t){return this.client.getWebServiceAsync(e,t)},e.prototype.updateWebServiceAsync=function(e,t,n,r,i){var s={ModelPackageId:n,WebServiceType:a.WebServiceType.Staging,DiagnosticsSettings:r,SampleDataEnabled:i};return this.client.updateWebServiceAsync(e,t,s)},e.prototype.invokeScoreWebServiceAsync=function(e,t,n,r){return this.client.invokeScoreWebServiceAsync(e,t,n,r)},e.prototype.createNotebookAsync=function(e,t){return this.client.createNotebookAsync(e,t)},e.prototype.openNotebookAsync=function(e,t){return this.client.openNotebookAsync(e,t)},e.prototype.updateNotebookAsync=function(e,t){return this.client.updateNotebookAsync(e,t)},e.prototype.createCommunityExperimentAsync=function(e,t,n,r){n===void 0&&(n=null);var i={ExperimentId:e.sourceExperiment.experimentId(),PublishableExperiment:{name:e.experimentName,description:e.description,summary:e.summary,hidden:e.visibility==0,owner:e.owner,tags:e.tags}};return e.thumbnail?i.PublishableExperiment.upload_image_data={content:e.thumbnail.base64Text,content_type:e.thumbnail.type}:e.imageUrl&&(i.PublishableExperiment.image_url=e.imageUrl),this.client.createCommunityExperimentAsync(i,t,n,r)},e.prototype.createCommunityNotebookAsync=function(e,t,n){n===void 0&&(n=null);var r={NotebookId:e.source.id,PublishableNotebook:{name:e.name,description:e.description,summary:e.summary,hidden:e.visibility==0,owner:e.owner,tags:e.tags,hyperlinks:[],languages:h.convertToCatalogNotebookLanguages([e.source.language])}};return e.thumbnail?r.PublishableNotebook.upload_image_data={content:e.thumbnail.base64Text,content_type:e.thumbnail.type}:e.imageUrl&&(r.PublishableNotebook.image_url=e.imageUrl),this.client.createCommunityNotebookAsync(r,t,n)},e.prototype.createCommunityCustomModuleAsync=function(e,t,r,i){r===void 0&&(r=null);var s=e.sourceModule.familyId.replace(/.+\./,""),o={name:e.moduleName,module_name:e.moduleName,family_id:s,languages:[e.sourceModule.moduleLanguage.language],languages_version:[e.sourceModule.moduleLanguage.version],input_ports:[],output_ports:[],parameters:[],summary:e.summary,description:e.description,hidden:e.visibility==0,owner:e.owner,tags:e.tags},u=e.sourceModule.portDescriptors;n.forEach(u,function(e){var t={name:e.friendlyName,parameter_type:"("+e.allowedDataTypeIdList.join(", ")+")",is_optional:e.optional,description:e.description};e instanceof g.ModuleInputPortDescriptor?o.input_ports.push(t):o.output_ports.push(t)});var a=e.sourceModule.parameterDescriptors;return n.forEach(a,function(e){var t={name:e.friendlyName,parameter_type:e.parameterType(),description:e.description,is_optional:e.isOptional,default_value:e.defaultValue};o.parameters.push(t)}),e.thumbnail?o.upload_image_data={content:e.thumbnail.base64Text,content_type:e.thumbnail.type}:e.imageUrl&&(o.image_url=e.imageUrl),this.client.createCommunityCustomModuleAsync(o,t,r,i)},e.prototype.startGetCommunityExperimentIdAsync=function(e,t,n,r){return this.client.startGetCommunityExperimentIdAsync(e,t,n,r)},e.prototype.startGetCompetitionExperimentIdFromCommunityAsync=function(e,t,n,r,i){return this.client.startGetCompetitionExperimentIdFromCommunityAsync(e,t,n,r,i)},e.prototype.startGetCommunityNotebookIdAsync=function(e,t,n,r,i){return this.client.startGetCommunityNotebookIdAsync(e,t,n,r,i)},e.prototype.startGetCommunityModuleAsync=function(e,t,n,r,i,s){return this.client.startGetCommunityModuleAsync(e,t,n,r,i,s)},e.prototype.getUnpackStatusAsync=function(e){return this.client.getUnpackStatusAsync(e)},e.prototype.getNotebookUnpackStatusAsync=function(e){return this.client.getNotebookUnpackStatusAsync(e)},e.prototype.getUnpackModuleStatusAsync=function(e){return this.client.getUnpackModuleStatusAsync(e)},e.prototype.createProjectAsync=function(e,t){return this.client.createProjectAsync(e,t)},e.prototype.getProjectAsync=function(e){return this.client.getProjectAsync(e)},e.prototype.getProjectsAsync=function(){return this.client.getProjectsAsync()},e.prototype.updateProjectAsync=function(e,t){return this.client.updateProjectAsync(e,t)},e.prototype.addToProjectAsync=function(e,t,n){return n===void 0&&(n=!1),this.client.addToProjectAsync(e,t,n)},e.prototype.removeFromProjectAsync=function(e,t,n){return n===void 0&&(n=!1),this.client.removeFromProjectAsync(e,t,n)},e.prototype.deleteProjectAsync=function(e){return this.client.deleteProjectAsync(e.ContainerId)},e.prototype.getProjectAssetsDependenciesAsync=function(e,t){return this.client.getProjectAssetsDependenciesAsync(e,t)},e.prototype.getProjectAssetsReferencersAsync=function(e,t){return this.client.getProjectAssetsReferencersAsync(e,t)},e.prototype.getWorkspaceSettingsAsync=function(){return n.then(this.client.getWorkspaceSettingsAsync(),function(e){return o.deserializeWorkspaceSettings(e)})},e.prototype.updateWorkspaceSettings=function(e,t){var n={WorkspaceId:e.id,FriendlyName:e.friendlyName(),Description:e.description(),AzureStorageConnectionString:e.azureStorageConnectionString(),HDInsightClusterConnectionString:e.hdinsightClusterConnectionString.serialize(),HDInsightStorageConnectionString:e.hdinsightStorageConnectionString.serialize(),UseDefaultHDInsightSettings:e.useDefaultHDInsightSettings(),SqlAzureConnectionString:e.sqlAzureConnectionString(),AnalyticFrameworkClusterConnectionString:e.analyticFrameworkClusterConnectionString(),AuthorizationToken:{PrimaryToken:e.authorizationToken.primary(),SecondaryToken:e.authorizationToken.secondary()},Etag:e.etag};switch(t){case 0:break;case 1:n.AuthorizationToken.PrimaryToken="UpdateToken",p.customEvent({key:"Primary",type:"AuthorizationToken",data:undefined});break;case 2:n.AuthorizationToken.SecondaryToken="UpdateToken",p.customEvent({key:"Secondary",type:"AuthorizationToken",data:undefined})}return this.client.updateWorkspaceSettings(n)},e.prototype.getModuleVisualizationData=function(e,t,n){return this.client.getModuleVisualizationData(e,t,n)},e.prototype.getModuleVisualizationDataItem=function(e,t,n,r,i,s,o){return this.client.getModuleVisualizationDataItem(e,t,n,r,i,s,o)},e.prototype.getDatasetVisualizationData=function(e){return this.client.getDatasetVisualizationData(e)},e.prototype.getPaginatedModuleVisualizationData=function(e,t,n,r,i,s,o){return this.client.getPaginatedModuleVisualizationData(e,t,n,r,i,s,o)},e.prototype.getModuleOutputSchema=function(e,t,n){return this.client.getModuleOutputSchema(e,t,n)},e.prototype.getDatasetSchema=function(e){return this.client.getDatasetSchema(e)},e.prototype.getModuleOutput=function(e,t,n){return this.client.getModuleOutput(e,t,n)},e.prototype.getModuleErrorLog=function(e,t){return this.client.getModuleErrorLog(e,t)},e.prototype.signOut=function(){return this.client.signOut()},e.prototype.getStorageSpaceQuotaAsync=function(){return this.client.getStorageSpaceQuotaAsync()},e.prototype.getExperimentDetailsAsync=function(e){return this.client.getExperimentDetailsAsync(e)},e.prototype.updateExperimentDetailsAsync=function(e,t){return this.client.updateExperimentDetailsAsync(e,t)},e.prototype.generateSubmissionRequest=function(e,t){return{Description:e.description(),Summary:e.summary.value(),ExperimentGraph:s.serialize(e),IsDraft:t,IsArchived:e.isArchived,ParentExperimentId:e.parentExperimentId,WebService:s.serializeWebServiceInfo(e),DisableNodesUpdate:e.disableNodesUpdate(),Category:"user",Tags:e.tags(),TrainingExperimentId:e.trainingExperimentId,IsPartialRun:e.isPartialRun()}},e.prototype.listProjects=function(e){return e===void 0&&(e=null),this.client.listProjects(e)},e.prototype.createProject=function(e){return this.client.createProject(e)},e.prototype.updateProject=function(e,t){return this.client.updateProject(e,t)},e.prototype.startSubmitCompetitionEntryAsync=function(e,t){return this.client.startSubmitCompetitionEntryAsync(e,t)},e.prototype.getCompetitionSchemaDefinitionAsync=function(e,t){return this.client.getCompetitionSchemaDefinitionAsync(e,t)},e.prototype.getCompetitionSubmissionAllowedStatusAsync=function(e,t){return this.client.getCompetitionSubmissionAllowedStatusAsync(e,t)},e.prototype.getCompetitionTermsAndConditionsAsync=function(e,t){return this.client.getCompetitionTermsAndConditionsAsync(e,t)},e.prototype.createWebServicesUXApiKeyCookieAsync=function(e,t){var n=this;return this.getWorkspaceSettingsAsync().then(function(r){return n.client.createWebServicesUXApiKeyCookieAsync(e,t,r.authorizationToken.primary())})},e.prototype.setPromoEmailPreference=function(e,t){return this.client.setPromoEmailPreference(e,t)},e.prototype.getConnectionIsValid=function(e,t){return this.client.getConnectionIsValid(e,t)},e}();t.WorkspaceBackend=E});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/WorkspaceSettings",["require","exports","../../TS/View/WorkspacesBar","../../../DataLabClient/Model/WorkspaceSettings","../../../DataLabClient/Disposable","../../../DataLabClient/Features","../../../DataLabClient/LocalizedResources","../../../DataLabClient/Logging/Logging","../../../DataLabClient/Trial","../../../DataLabClient/Model/User","../../../DataLabClient/Util","../../../DataLabClient/Contracts/V1/WorkspaceBackend"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=[{text:"Yes",value:!0},{text:"No",value:!1}],p=function(e){function t(t,c,p,d){var v=this;d===void 0&&(d=!1),e.call(this),this.hasBeenEdited=ko.observable(!1),this.spaceQuota=ko.observable(),this.spaceQuotaNote=l.format(o.workspacePageGetMoreStorage,l.format('<a href="{1}" target="_blank">{0}</a>',o.workspacePageStorageLearnMore,o.workspacePageStorageLearnMoreUrl)),this.accountInfo=ko.observableArray([]),this.workspaceDeleteWarning2=ko.observable(""),this.client=t,this.workspace=c,this.renderArea=p,this.isReadOnly=d,this.workspaceTypeText=ko.observable(),this.workspaceSettings=ko.observable(null),$("#UseDefaultHDInsightRadio").fxRadio({values:h,trackedit:!1,change:function(e,t){v.workspaceSettings().useDefaultHDInsightSettings(t.value.value),v.settingsUpdated()}}),Shell.UI.Spinner.show();var m=this.workspace.getWorkspaceSettingsAsync().done(function(e){v.workspaceDeleteWarning2(l.format(o.workspaceDeleteWarning2,e.friendlyName())),v.workspaceSettings(e),v.workspaceTypeText(v.getTextForWorkspaceType(e.type)),n.updateBar(v.workspaceSettings()),n.WorkspacesBar.settingsNameFocusOnNameBox&&(v.renderArea.find("#FriendlyName").focus().select(),n.WorkspacesBar.settingsNameFocusOnNameBox=!1),$("#UseDefaultHDInsightRadio").fxRadio("option","value",l.first(h,function(e){return e.value===v.workspaceSettings().useDefaultHDInsightSettings()})),v.accountInfo.push({label:o.workspaceId,value:e.id}),s.showSubscriptionInfoEnabled()&&r.WorkspaceTypeExtensions.isProduction(e.type)&&(e.createdTime&&v.accountInfo.push({label:o.workspaceCreationTime,value:e.createdTime.toLocaleString()}),e.ownerEmail&&v.accountInfo.push({label:o.workspaceOwnersEmail,value:e.ownerEmail}),e.subscriptionId&&v.accountInfo.push({label:o.workspaceSubscriptionId,value:e.subscriptionId}),e.userStorage&&v.accountInfo.push({label:o.workspaceStorageAccount,value:e.userStorage})),v.hasBeenEdited(!1)}).fail(function(e){u.error("Load workspace settings failed: "+e.message,"WorkspaceSettings","WebServiceGroupListView"),l.showErrorNotification({title:l.format(o.WorkspaceSettingsLoadFailure,o.productName),details:e.message})}),g=null;s.storageUsageWidgetEnabled()&&a.isWorkspaceTypeFree()&&s.enableWorkspaceQuotasEnabled()?g=this.workspace.getStorageSpaceQuotaAsync().done(function(e){v.spaceQuota({used:e.UsedStorage/1073741824,total:e.MaximumStorage/1073741824,usedLabel:o.workspacePageUsed,totalLabel:o.workspacePageAvailable,unitLabel:o.workspacePageGB,unitLabelLong:o.workspacePageGigabytes,overCapacityLabel:o.storageOverCapacity})}).fail(function(){u.error("Storage quota request failed.")}):g=$.Deferred().resolve(),this.showEncryptionInfo=ko.computed(function(){var e=v.workspaceSettings();return s.workspaceEncryptionEnabled()&&f.user.isWorkspaceOwner&&e&&e.type!==1&&e.type!==2}),this.allowEditingWorkspaceName=ko.computed(function(){var e=v.workspaceSettings();return e&&e.type!==3}),this.showWorkspaceDeleteButton=ko.computed(function(){var e=v.workspaceSettings();return!!e&&e.type===1&&f.user.isWorkspaceOwner}),$.when(m,g).always(function(){Shell.UI.Spinner.hide()}),this.registerForDisposal(new i.DisposableKOApplyBindings(this,this.renderArea.get(0)))}return __extends(t,e),t.prototype.confirmDeleteWorkspace=function(){var e=window.prompt(o.workspaceDeleteConfirmationText);!!e&&e.toLowerCase()==="delete"&&(this.deleteWorkspace(),u.customEvent({key:"DeleteWorkspace",type:"Settings"}))},t.prototype.refreshFromService=function(){var e=this;Shell.UI.Spinner.show(),this.workspace.getWorkspaceSettingsAsync().done(function(t){e.workspaceSettings(t),e.workspaceTypeText(e.getTextForWorkspaceType(t.type)),n.updateBar(e.workspaceSettings()),$("#UseDefaultHDInsightRadio").fxRadio("option","value",l.first(h,function(t){return t.value===e.workspaceSettings().useDefaultHDInsightSettings()})),e.hasBeenEdited(!1),Shell.UI.Spinner.hide()}).fail(function(){throw new Error("Load workspace settings failed.")})},t.prototype.settingsUpdated=function(){this.hasBeenEdited()||this.hasBeenEdited(!0)},t.prototype.regeneratePrimary=function(){this.showConfirmation(!0)},t.prototype.regenerateSecondary=function(){this.showConfirmation(!1)},t.prototype.showConfirmation=function(e){var t=this,n=e?"Primary":"Secondary",r=new Shell.UI.Notifications.Confirmation(l.format(o.workspaceRegenerateAuthTokenConfirmation,n,this.workspaceSettings().friendlyName()),"active");r.setActions(Shell.UI.Notifications.ButtonSets.yesNo(function(){t.regenerateAuthorizationToken(e),u.customEvent({key:"RegenerateAuthToken",type:"Settings",data:"isPrimary = "+e.toString()})})),Shell.UI.Notifications.add(r)},t.prototype.update=function(){var e=this;if(this.isReadOnly)return;if(!this.workspaceSettings().validateAll())return;Shell.UI.Spinner.show(),u.customEvent({key:"SaveWorkspace",type:"Settings"}),this.workspace.updateWorkspaceSettings(this.workspaceSettings(),0).done(function(){n.updateBar(e.workspaceSettings()),e.refreshFromService(),Shell.UI.Spinner.hide()}).fail(function(t){if(!(t instanceof l.AjaxError&&t.xmlHttpRequest&&t.xmlHttpRequest.status===412))throw new Error("Update workspace settings failed.");var n=e.errorNotificationProgress(l.format(o.workspaceUnableToSaveYourChangesPleaseRefresh,o.productName));Shell.UI.Notifications.add(n),Shell.UI.Spinner.hide()})},t.prototype.regenerateAuthorizationToken=function(e){var t=this,n=e?1:2;Shell.UI.Spinner.show(),this.workspace.updateWorkspaceSettings(this.workspaceSettings(),n).done(function(){t.refreshFromService(),Shell.UI.Spinner.hide()}).fail(function(e){if(!(e instanceof l.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status===412))throw new Error("Regenerate authorization token failed.");var n=t.errorNotificationProgress(l.format(o.workspaceUnableToRegenAuthToken,o.productName));Shell.UI.Notifications.add(n),Shell.UI.Spinner.hide()})},t.prototype.discard=function(){this.refreshFromService()},t.prototype.errorNotificationProgress=function(e){var t=new Shell.UI.Notifications.Progress(e,"active",!0);return t.setStatus("error"),t.setActions([new Shell.UI.Notifications.Buttons.close]),t},t.prototype.getTextForWorkspaceType=function(e){switch(e){case 1:return o.workspacePageWorkspaceTypeFree;case 2:return o.workspacePageWorkspaceTypeAnonymous;default:if(r.WorkspaceTypeExtensions.isProduction(e))return o.workspacePageWorkspaceTypeProduction;return null}},t.prototype.deleteWorkspace=function(){Shell.UI.Spinner.show(),this.client.deleteWorkspaceAsync().always(function(){Shell.UI.Spinner.hide()}).done(function(){var e=new Shell.UI.Notifications.Confirmation(l.format(o.workspaceDeleteSucceeded,o.productNameMedium),"active");e.setActions([Shell.UI.Notifications.Buttons.ok(function(){Shell.UI.Navigation.removeConfirmNavigateAway(),document.location.href="/Main/signout"})]),Shell.UI.Notifications.add(e)}).fail(function(e){var t=new Shell.UI.Notifications.Notification(l.format(o.workspaceDeleteFailed,String(e)),"error");t.setActions([Shell.UI.Notifications.Buttons.ok()]),Shell.UI.Notifications.add(t)})},t}(i.Disposable);t.WorkspaceSettings=p}),define("generated/editor/TS/V2/View/ExperimentsListView",["require","exports","../../../DataLabViews/ExperimentViewV2","../../../DataLabViews/WazGridAdapter","../../../../DataLabClient/Model/V2/Interfaces","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u){function f(e){return a.hasOwnProperty(e)?a[e]:e}function l(e){return e.getFullYear()<1970?new Date:e}function c(e,t){var n=t.rowMetadata.dataItem.ExperimentId;return"<span id='"+n+"'>"+u.encodeAsHtml(e)+"</span>"}function h(e){Shell.UI.Navigation.navigate({extension:n.experimentExtensionName,type:n.ExperimentType.name,name:e})}var a={NotStarted:"Not Started",InDraft:"Draft",Running:"Running",Failed:"Failed",Finished:"Finished",Canceled:"Canceled"};t.formatExperimentStatusCode=f,t.dateTimeSortFormatter=l,t.formatExperimentName=c,t.navigateToExperiment=h;var p=function(){function e(e,t,n){var i=this;this.serviceProvider=t,this._workspaceId=n,this._selectedRows=[],this._renderArea=e,this._data=[],this.listedExperiments=[],this._experimentService=this.serviceProvider.getService(1),this.formatCheckbox=function(e,t){var n=t.rowMetadata.dataItem.ExperimentId.split(".")[0]===i._workspaceId;return n?"<input type='checkbox' class='rowCheckbox' />":"<input type='checkbox' class='rowCheckbox' disabled='true' />"};var o=[{name:s.experimentGridHeaderName,field:"Description",formatter:c,sorted:"descending",cssClass:"navigationColumn"},{name:s.experimentGridHeaderCreator,field:"Creator",cssClass:"navigationColumn"},{name:s.experimentGridHeaderStatus,field:"StatusCode",formatter:f,cssClass:"navigationColumn"},{name:s.experimentGridHeaderModificationTime,field:"CreationTime",cssClass:"navigationColumn"},{name:s.experimentGridHeaderStartTime,field:"StartTime",cssClass:"navigationColumn"},{name:s.experimentGridHeaderEndTime,field:"EndTime",cssClass:"navigationColumn"}],u={name:"",field:"Checkbox",formatter:this.formatCheckbox,cssClass:"checkboxColumn"};o=$.merge([u],o);var a={columns:o,data:this._data,selectable:!0,multiselect:!0,resizable:!0,rowSelect:function(e,t){return i.rowSelect(e,t)},extendWazGrid:function(e){e.on("click",".navigationColumn",function(e){var t=$(e.target).closest("tr").view().data;if(t.rowMetadata){var n=t.rowMetadata.dataItem.ExperimentId;h(n)}})}};this._gridAdapter=new r.WazGridAdapter(a,$(e).find("#grid"),!0),cdm.setActiveItem(this)}return e.prototype.refreshFromService=function(){var t=this;Shell.UI.Spinner.show(),u.then(this._experimentService.listExperimentsAsync(),function(e){t.listedExperiments=e,t._populateExperimentList(t.listedExperiments),Shell.UI.Spinner.hide()}).always(function(){cdm.currentActiveItem instanceof e&&t._renderArea&&(t._gridAdapter.createGrid(),Shell.UI.Spinner.hide())})},e.prototype.setCommands=function(){},e.prototype.rowSelect=function(e,t){},e.prototype.refreshFromLocal=function(e){Shell.UI.Spinner.show(),this._populateExperimentList(e),Shell.UI.Spinner.hide()},e.prototype._populateExperimentList=function(e){$.observable(this._data).refresh(e.map(function(e){return{ExperimentId:e.Id,Description:e.Name,Creator:"microsoft",CreationTime:"N/A",StartTime:"N/A",EndTime:"N/A",StatusCode:"N/A",etag:"N/A",type:"N/A"}}))},e.prototype.deleteConfirmation=function(){var e=this,t=this._grid.wazDataGrid("getSelectedRows").length>1?s.confirmDeleteSelectedExperiments:s.confirmDeleteSelectedExperiment,n=new Shell.UI.Notifications.Confirmation(t,"active");JSON.stringify(this._grid.wazDataGrid("getSelectedRows")[0].dataItem),n.setActions([new Shell.UI.Notifications.Buttons.yes(function(){o.customEvent({key:"DeleteSelectedExperimentYes",type:"ExperimentListView",data:JSON.stringify(e._selectedRows)}),e.delete()}),new Shell.UI.Notifications.Buttons.no(function(){o.customEvent({key:"DeleteSelectedExperimentNo",type:"ExperimentListView"}),Shell.UI.Notifications.remove(n)})]),Shell.UI.Notifications.add(n)},e.prototype.delete=function(){var e=this,t=[];this._selectedRows.forEach(function(n){t.push(n),u.first(e.listedExperiments,function(t,r){return e.listedExperiments[r].ExperimentId===n.dataItem.ExperimentId?(e.listedExperiments.splice(r,1),!0):!1},null)});var n=[],r=!1;t.forEach(function(e){}),$.when.apply($,n).fail(function(){r=!0}).always(function(){r?e.refreshFromService():e.refreshFromLocal(e.listedExperiments)}),this._selectedRows=[]},e}();t.ExperimentListView=p});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Logging/IfxEntry",["require","exports","./ClientInformationState","../Constants","../Features"],function(e,t,n,r,i){var s=function(){function e(e,t){e===void 0&&(e=null),t===void 0&&(t=null),this.table="",this.payload=this.generateCommonIfxData(e,t)}return e.prototype.padIsoFormat=function(e){var t=e.slice(0,-1),n=27-t.length;if(n){var r=Array(n).join("0")+"1Z";t+=r}return t},e.prototype.generateCommonIfxData=function(e,t){var s=e!==null?(new Date(e)).toISOString():(new Date).toISOString();return s=this.padIsoFormat(s),{sessionId:n.sessionId,location:window.location.hostname,workspaceId:n.workspaceId,workspaceType:n.workspaceType,subscriptionId:n.subscriptionId,tabId:n.tabId,timestamp:s,data:t,userType:i.runnerUserTypeEnabled()?r.RunnerType:""}},e}();t.IfxBaseEntry=s;var o=function(e){function t(t,n,i,s,o,u,a,f,l){l===void 0&&(l=!0),e.call(this,n,u),this.table="scenario",this.payload.featureId=t,this.payload.featureName=r.IfxScenarioId[t],this.payload.opCode=r.IfxScenarioOpCode[i],this.payload.duration=s||-1,this.payload.isSuccess=a,this.payload.scenarioId=o,this.payload.errorType=f,this.payload.isHandled=l}return __extends(t,e),t}(s);t.ScenarioEntry=o;var u=function(e){function t(t,n,r,i){e.call(this,null,i),this.table="action",this.payload.sequenceNumber=n,this.payload.scenarioId=r||"",this.payload.actionName=t}return __extends(t,e),t}(s);t.ActionEntry=u;var a=function(e){function t(t,n,i,s,o,u,a,f){e.call(this,o,f),this.table="request",this.payload.requestId=t.requestId,this.payload.requestName=t.loggedUrl,this.payload.url=t.url,this.payload.httpMethodType=t.settings.type,this.payload.opCode=r.IfxScenarioOpCode[u],this.payload.httpStatusCode=n.status,this.payload.duration=i||-1,this.payload.isSecondAttempt=t.isSecondAttempt,this.payload.scenarioId=a||""}return __extends(t,e),t}(s);t.RequestEntry=a;var f=function(e){function t(t,n,r){e.call(this,null,r),this.table="trace",this.payload.traceType=t,this.payload.message=n}return __extends(t,e),t}(s);t.TraceEntry=f;var l=function(e){function t(t,n,r,i,s,o,u,a){o===void 0&&(o=!1),e.call(this,null,s),this.table="exception",this.payload.url=window.location.href,this.payload.message=t,this.payload.trace=i,this.payload.line=r,this.payload.isHandled=o,this.payload.scenarioId=u||"",this.payload.requestId=a||""}return __extends(t,e),t}(s);t.ExceptionEntry=l}),define("generated/DataLabClient/Logging/ClientTelemetryLogger",["require","exports","../AjaxClient","./Logging","./ClientInformationState","../Constants","./IfxEntry"],function(e,t,n,r,i,s,o){function v(e,t){p.loggingDependencies=e,p.pageRequestId=t}function m(e,t,n){p.writeEntry(t,e,"information",n)}function g(e,t,n){p.writeEntry(t,e,"error",n)}function y(e,t,n){p.writeEntry(t,e,"warn",n)}function b(e,t,n){p.writeEntry(t,e,"verbose",n)}function w(e,t,n,r,i,s,u,a){var f={message:e,eventKey:"window.onerror",clientDateTime:(new Date).toISOString(),data:{line:n,url:t,trace:r,logQueue:i}},l=new o.ExceptionEntry(e,t,n,r,i,s,u,a);p.logData("exception",f,l,!0)}function E(e,t,n,r){var i={};r=c(r),$.extend(i,{key:e,time:t,message:n,clientDateTime:(new Date).toISOString()},r),typeof i.toJSON!="undefined"&&delete i.toJSON;var s=new o.TraceEntry("performance",e,$.extend({duration:t},i));p.logData("performance",i,s)}function S(e){if(typeof e!="string"||e.length===0)throw new Error("Performance marker key must be a non empty string");f[e]=new Date}function x(e,t,n){var i=new Date,s=null,o;if(typeof e!="string"||e.length===0)throw new Error("Performance marker key must be a non empty string");e in f&&(s=f[e],delete f[e]),s!==null?(o=(i.getTime()-s.getTime())/1e3,r.performance(e,o,t,n)):g(e,"ClientTelemetryLogger.timerStopAndLog() - marker name '"+e+"' cannot be found.",n)}function T(e,t){var n={},r=l(e.data);$.extend(n,{featureId:e.featureID||0,featureName:s.FeatureId[e.featureID||0],groupId:e.groupID||0,groupName:s.FeatureId[e.groupID||0],workspaceId:t||0,experimentId:e.experimentID||0,moduleId:e.moduleID||"",clientDateTime:(new Date).toISOString()},r);var i={experimentId:e.experimentID||"0",moduleId:e.moduleID||"",data:r},u=new o.ActionEntry(s.FeatureId[e.featureID||0],d++,e.scenarioID,i);p.logData("featureUsage",n,u)}function N(e){var t={},n=c(e.data);e.experimentID&&(n.experimentId=e.experimentID),$.extend(t,{customEventType:e.type,eventKey:e.key,clientDateTime:(new Date).toISOString()},n||{});var r=new o.ActionEntry(e.key+":"+e.type,d++,e.scenarioID,n);p.logData("customEvent",t,r)}function C(e,t){var n={};t=c(t),$.extend(n,{comments:e,clientDateTime:(new Date).toISOString()},t),$.extend(t,{comments:e});var r=new o.ActionEntry("feedback",d++,"",t);p.logData("feedbackInfo",n,r,!0)}function k(){p.flushPreservedLogs()}function L(e,t,n,r,i,s,u,a){var f={key:e.loggedUrl,time:n,message:t.status},l=new o.RequestEntry(e,t,n,r,i,s,u,a);p.logData("information",f,l)}function A(e,t,n,r,i,s,u,a,f){u===void 0&&(u=!0);var l={key:e,time:t,operation:n,data:s},c=new o.ScenarioEntry(e,t,n,r,i,s,u,a,f);p.logData("information",l,c)}var u={error:451,information:452,exception:453,startup:454,viewSwitch:456,clientAction:457,clientScenario:458,customEvent:459,warning:460,verbose:461,performance:462,feedbackInfo:463,featureUsage:464},a=450,f={},l=function(e){switch(typeof e){case"object":return{data:JSON.stringify(e)};case"undefined":return"";case"string":return{data:e};default:return{data:String(e)}}},c=function(e){var t,n;switch(typeof e){case"object":if(e instanceof Array){n={};for(t=0;t<e.length;t++)n["data"+t]=e[t];return n}return e;case"undefined":return{};case"string":return{data:e};default:return{data:String(e)}}},h=function(){function e(){var e=this;this.pageRequestId="",this.loggingDependencies={isLocalStorageAvailable:function(){return!1}},this._sendTimeoutMs=1e4,this._maxQueuedEvents=50,this._eventQueue=[],this._eventsBeingSentToServer=[],this._outstandingRequestToServer=null,this._throttleNextRequest=!1,this._isRequestToServerThrottleTimer=null,this._exceptionLocalStoreKey="StudioExceptionStore",window.addEventListener("beforeunload",function(t){e.saveEventsToLocalStorage(),e.sendEventsToServer()})}return e.prototype.writeEntry=function(e,t,n,r){var i="";typeof t=="object"?i="[object]":typeof t=="undefined"?i="[undefined]":typeof t=="function"?i="[function]":t!==null?i=String(t):i="[null]";var s=n==="error",u={};r=c(r),$.extend(u,{message:i,eventKey:e,clientDateTime:(new Date).toISOString()},r);var a=new o.TraceEntry(n,i,$.extend(r,{eventKey:e}));this.logData(n,u,a,s)},e.prototype.logData=function(e,t,n,r){r===void 0&&(r=!1);var i=u[e];this._eventQueue.push($.extend({dataObject:t},{eventId:i},this.getCommonLoggingData(),{ifxTable:n.table,ifxData:n.payload})),this.sendEventsToServerIfNecessary(r)},e.prototype.flushPreservedLogs=function(){if(this.loggingDependencies.isLocalStorageAvailable()&&window.localStorage[this._exceptionLocalStoreKey]){var e=window.localStorage[this._exceptionLocalStoreKey];try{this._eventQueue.push.apply(this._eventQueue,JSON.parse(e)),this._eventQueue.length&&this.sendEventsToServer()}catch(t){r.exception(t,"Preserved log entries failed to deserialize.","ClientTelemetryLogger",{entries:e})}finally{delete window.localStorage[this._exceptionLocalStoreKey]}}},e.prototype.saveEventsToLocalStorage=function(){this.loggingDependencies.isLocalStorageAvailable()&&(window.localStorage[this._exceptionLocalStoreKey]=JSON.stringify(this._eventQueue))},e.prototype.sendEventsToServerIfNecessary=function(e){var t=this;e===void 0&&(e=!1),!this._isRequestToServerThrottleTimer&&!this._outstandingRequestToServer&&this._eventQueue.length>0&&(e||this._eventQueue.length>=this._maxQueuedEvents?this.sendEventsToServer():this._sendTimer||(this._sendTimer=setTimeout(function(){t.sendEventsToServer()},this._sendTimeoutMs)))},e.prototype.sendEventsToServer=function(){var e=this;if(this.throttleIfNecessary())return;var r=this._eventsBeingSentToServer=this._eventQueue.splice(0,this._maxQueuedEvents);this._outstandingRequestToServer=n.sendRequest({url:t.postDataUrl,settings:{type:"POST",data:r,logFunction:$.noop,suppressSuccessLogging:!0},additionalHeaders:n.generateGeneralClientHeaders()}).done(function(){var e=document.cookie.match(new RegExp("(?:^|.*;)\\s*"+s.LoggingHeaders.SessionIdCookieName+"\\s*\\=\\s*([^;]*).*$"));if(e&&e.length===2){var t=decodeURIComponent(e[1]);i.sessionId!==t&&(i.sessionId=t)}}).fail(function(){e._eventQueue=r.concat(e._eventQueue),e._throttleNextRequest=!0}).always(function(){e._outstandingRequestToServer=null,e.sendEventsToServerIfNecessary()}),clearTimeout(this._sendTimer),this._sendTimer=null,this._eventsBeingSentToServer=[]},e.prototype.throttleIfNecessary=function(){var e=this,t=!1;return this._isRequestToServerThrottleTimer?t=!0:this._throttleNextRequest&&(this._isRequestToServerThrottleTimer=setTimeout(function(){e._isRequestToServerThrottleTimer=null,e.sendEventsToServer()},this._sendTimeoutMs),this._throttleNextRequest=!1,t=!0),t},e.prototype.getCommonLoggingData=function(){var e=new Date((new Date).getTime()),t=this.createGuid();return{pageRequestId:this.pageRequestId,url:location.href,clientDateTime:(new Date).toISOString(),requestId:t}},e.prototype.oct=function(e){if(!e)return Math.floor(Math.random()*16).toString(16);var t="";for(var n=0;n<e;n++)t+=this.oct(0);return t},e.prototype.createGuid=function(){var e=(128+Math.floor(Math.random()*64)).toString(16);return this.oct(8)+"-"+this.oct(4)+"-4"+this.oct(3)+"-"+e+this.oct(2)+"-"+this.oct(12)},e}(),p=new h,d=0;t.postDataUrl="/LoggingService/PostClientData",t.initialize=v,t.info=m,t.error=g,t.warn=y,t.verbose=b,t.unhandledException=w,t.performance=E,t.timerStart=S,t.timerStopAndLog=x,t.featureUsage=T,t.customEvent=N,t.feedbackInfo=C,t.flushPreservedLogs=k,t.IfxClientRequest=L,t.IfxScenario=A}),define("generated/DataLabClient/Contracts/V1/BlobUploader",["require","exports","../../Util","../../Logging/Logging"],function(e,t,n,r){var i=function(){function e(e,t,n,r){this.client=e,this.blob=t,this.dataTypeId=n,this.scenarioStopwatch=r,this.chunkSize=4194304,this.numberOfChunks=0,this.chunkId=0,this.bytesRemaining=0,this.currentPosition=0,this.maxRetries=3,this.retryAfterSeconds=20,this.numberOfRetries=0,this.started=!1;var i=this.blob.size;i>0&&(i<this.chunkSize&&(this.chunkSize=i,this.numberOfChunks=1),this.bytesRemaining=i,i%this.chunkSize==0?this.numberOfChunks=i/this.chunkSize:this.numberOfChunks=parseInt((i/this.chunkSize).toString(),10)+1)}return e.prototype.uploadBlobAsync=function(){if(!this.started)return this.started=!0,this.promise=$.Deferred(),this.startUploadAsync(),n.when(this.promise);var e=$.Deferred();return e.rejectWith(this.client,[new n.AjaxError("A BlobUploader can be used only once")]),n.when(e)},e.prototype.updateUploadProgress=function(){var e="block "+this.chunkId+" of total "+this.numberOfChunks;r.info("Upload progress: "+e,"logUploadProgress",{loaded:this.chunkId,total:this.numberOfChunks,determinateLength:!0});var t=$.extend({});t.loaded=this.chunkId,t.total=this.numberOfChunks,t.lengthComputable=!0,this.promise.notifyWith(this.client,[t])},e.prototype.startUploadAsync=function(){var e=this,t=this.client.initiateResourceUpload(this.dataTypeId);t.done(function(t){e.response=t,e.uploadInChunksAsync()}).fail(function(t){e.promise.rejectWith(e.client,[t])})},e.prototype.uploadInChunksAsync=function(){var e=this,t;if(this.blob.slice)t=this.blob.slice(this.currentPosition,this.currentPosition+this.chunkSize);else if(this.blob.webkitSlice)t=this.blob.webkitSlice(this.currentPosition,this.currentPosition+this.chunkSize);else{if(!this.blob.mozSlice){this.promise.rejectWith(this.client,[new n.AjaxError("Unsupported browser detected")]);return}t=this.blob.mozSlice(this.currentPosition,this.currentPosition+this.chunkSize)}var r=this.client.uploadBlobChunk(t,this.dataTypeId,this.response.Id,this.chunkId,this.numberOfChunks,this.scenarioStopwatch);r.done(function(t){e.bytesRemaining-=e.chunkSize,e.chunkId+=1,e.numberOfRetries=0,e.updateUploadProgress(),e.bytesRemaining<=0?(e.currentPosition=e.blob.size,e.bytesRemaining=0,e.promise.resolveWith(e.client,[e.response])):(e.currentPosition+=e.chunkSize,e.uploadInChunksAsync())}).fail(function(t){var n=e.numberOfRetries<e.maxRetries;n?(++e.numberOfRetries,setTimeout(function(){e.uploadInChunksAsync()},e.retryAfterSeconds*1e3)):e.promise.rejectWith(e.client,[t])})},e}();return i}),define("generated/DataLabClient/Contracts/V1/DataLabClient",["require","exports","../../Util","../../Constants","../../AjaxClient","./Constants","./BlobUploader","../../LocalizedResources","../../Logging/Logging","../../Features","../../Logging/IfxScenarioStopWatch"],function(e,t,n,r,i,s,o,u,a,f,l){function c(e){return e+(e.charAt(e.length-1)==="/"?"":"/")}var h=function(){function e(e,t,n,r){n===void 0&&(n=null),r===void 0&&(r=!0),this.serviceBaseUrlForNotebookCreate="",this.serviceBaseAddress="/api/",this.authToken=n,this.redirectOn401=r,this.workspaceId=e,this.workspaceFriendlyName=t}return e.prototype.generateRequestArguments=function(e,t,r,s){r===void 0&&(r={}),s===void 0&&(s={});var o=n.createGuid();return s=$.extend(s,i.generateGeneralClientHeaders(this.authToken),i.generateIFxTrackingHeaders(o)),{url:e+t,loggedUrl:t,additionalHeaders:s,settings:r,redirectOn401:this.redirectOn401,logRequest:!0,requestId:o}},e.prototype.appendWorkspaceIdToUrl=function(e){return c(e)+"workspaces/"+this.workspaceId},e.prototype.ensureStringPrependedWithSlash=function(e){return e?(e.charAt(0)==="/"?"":"/")+e:"/"},e.prototype.sendRequestWithCallback=function(e,t){var n=this;return e.scenarioId=t?t.scenarioId:"",i.sendRequest(e,function(e,t){var i=e.getResponseHeader(r.DataLabAccessTokenHeaderName);i&&(n.authToken=i)},function(e,n,i){i===void 0&&(i=new Error);if(t){i.url=n.url;var s=e.status>=500?r.SystemError+e.status+e.statusText:r.UserError;t.error(i,s,!0)}})},e.prototype.sendRequest=function(e){var t=this.appendWorkspaceIdToUrl(this.serviceBaseAddress);e.relativeUrl=this.ensureStringPrependedWithSlash(e.relativeUrl);var n=this.generateRequestArguments(t,e.relativeUrl,e.settings||{},e.headers||{});return this.sendRequestWithCallback(n,e.scenarioStopwatch)},e.prototype.signOut=function(){return this.sendRequestWithCallback(this.generateRequestArguments(this.appendWorkspaceIdToUrl("/"),this.ensureStringPrependedWithSlash(Shell.Environment.getSignOutLink()),{type:"POST"}))},e.prototype.listDatasetsAsync=function(e){return this.sendRequest({relativeUrl:"datasources",scenarioStopwatch:e})},e.prototype.getDataset=function(e){return this.sendRequest({relativeUrl:"datasources/"+e})},e.prototype.renameDatasetAsync=function(e,t){var n={ResourceNewName:t};return this.sendRequest({relativeUrl:"datasources/family/"+e,settings:{type:"PUT",data:n,responseType:i.ResponseType.None}})},e.prototype.deleteDatasetFamilyAsync=function(e){return this.sendRequest({relativeUrl:"datasources/family/"+e,settings:{type:"DELETE",responseType:i.ResponseType.None}})},e.prototype.getTrainedModel=function(e){return this.sendRequest({relativeUrl:"trainedmodels/"+e})},e.prototype.listTrainedModelsAsync=function(e){return this.sendRequest({relativeUrl:"trainedmodels/",scenarioStopwatch:e})},e.prototype.renameTrainedModelAsync=function(e,t){var n={ResourceNewName:t};return this.sendRequest({relativeUrl:"trainedmodels/family/"+e,settings:{type:"PUT",data:n,responseType:i.ResponseType.None}})},e.prototype.deleteTrainedModelFamilyAsync=function(e){return this.sendRequest({relativeUrl:"trainedmodels/family/"+e,settings:{type:"DELETE",responseType:i.ResponseType.None}})},e.prototype.getTransformModule=function(e){return this.sendRequest({relativeUrl:"transformmodules/"+e})},e.prototype.listTransformModulesAsync=function(e){return this.sendRequest({relativeUrl:"transformmodules/",scenarioStopwatch:e})},e.prototype.renameTransformModuleAsync=function(e,t){var n={ResourceNewName:t};return this.sendRequest({relativeUrl:"transformmodules/family/"+e,settings:{type:"PUT",data:n,responseType:i.ResponseType.None}})},e.prototype.listModulesAsync=function(e){return this.sendRequest({relativeUrl:"modules",scenarioStopwatch:e})},e.prototype.getModule=function(e){return this.sendRequest({relativeUrl:"modules/"+e})},e.prototype.renameModuleAsync=function(e,t){var n={ResourceNewName:t};return this.sendRequest({relativeUrl:"modules/family/"+e,settings:{type:"PUT",data:n,responseType:i.ResponseType.None}})},e.prototype.listNotebooksAsync=function(e){var t=this.generateRequestURI("notebooks",{"api-version":"2.0"});return this.sendRequest({relativeUrl:t,settings:{type:"GET"},scenarioStopwatch:e})},e.prototype.getNotebookAsync=function(e){var t=this.generateRequestURI("notebooks/family/"+e,{"api-version":"2.0"});return this.sendRequest({relativeUrl:t,settings:{type:"GET"}})},e.prototype.createNotebookAsync=function(e,t){e.Parameters&&(e.Parameters.StudioApiUrl=this.serviceBaseUrlForNotebookCreate);var n=this.generateRequestURI("notebooks",{"api-version":"2.0"});return this.sendRequest({relativeUrl:n,settings:{type:"POST",data:e},scenarioStopwatch:t})},e.prototype.uploadNotebookAsync=function(e,t){return this.sendRequest({relativeUrl:"notebooks/attachments?name="+encodeURIComponent(t)+"&attachment=Content",settings:{type:"PUT",data:e,reportUploadProgress:!0}})},e.prototype.getNotebookSessionObject=function(e,t){var n=this.generateRequestURI("notebooks/session",{"api-version":"2.0",familyId:e});return this.sendRequest({relativeUrl:n,settings:{type:"POST",data:""},headers:{"Content-Type":"text/plain"},scenarioStopwatch:t})},e.prototype.authenticateNotebookSession=function(e){return $.ajax({type:"POST",url:e,dataType:"text",contentType:"text/plain",xhrFields:{withCredentials:!0}})},e.prototype.openNotebookAsync=function(e,t){var i=this;t=t||l.NullScenarioStopWatch.instance;var s=$.Deferred();return this.getNotebookSessionObject(e,t).done(function(e){i.authenticateNotebookSession(e.AuthenticationUri).done(function(){s.resolve(e.SessionUri)}).fail(function(i){if(i instanceof n.AjaxError&&i.isSuccess){s.resolve(e.SessionUri);return}var o=n.format(u.authenticateNotebookSessionFailed,i.message);i.message=o,t.error(i,r.SystemError,!0),s.reject(i)})}).fail(function(e){var i=n.format(u.createNotebookSessionFailed,e.message);e.message=i,t.error(e,r.SystemError,!0),s.reject(e)}),s.promise()},e.prototype.deleteNotebookFamilyAsync=function(e){var t=this.generateRequestURI("notebooks/family/"+e,{"api-version":"2.0"});return this.sendRequest({relativeUrl:t,settings:{type:"DELETE"}})},e.prototype.renameNotebookAsync=function(e,t){var n=encodeURIComponent(t),r=this.generateRequestURI("notebooks/family/"+e,{"api-version":"2.0",change:n});return this.sendRequest({relativeUrl:r,settings:{type:"PATCH"}})},e.prototype.updateNotebookAsync=function(e,t){var n=this.generateRequestURI("notebooks/family/"+e,{"api-version":"2.0"});return this.sendRequest({relativeUrl:n,settings:{type:"PUT",data:t}})},e.prototype.createProjectAsync=function(e,t){return t===void 0&&(t=!1),this.sendRequest({relativeUrl:"projectcontainers?includeDependencies="+t,settings:{type:"POST",data:e}})},e.prototype.getProjectAsync=function(e,t){return this.sendRequest({relativeUrl:"projectcontainers/"+e,scenarioStopwatch:t})},e.prototype.getProjectsAsync=function(e){return this.sendRequest({relativeUrl:"projectcontainers",scenarioStopwatch:e})},e.prototype.updateProjectAsync=function(e,t){return t===void 0&&(t=!1),this.sendRequest({relativeUrl:"projectcontainers/"+e.ContainerId+"?includeDependencies="+t,settings:{type:"PUT",data:e}})},e.prototype.addToProjectAsync=function(e,t,n){return n===void 0&&(n=!1),this.sendRequest({relativeUrl:"projectcontainers/"+e+"/add?includeDependencies="+n,settings:{type:"PUT",data:t}})},e.prototype.removeFromProjectAsync=function(e,t,n){return n===void 0&&(n=!1),this.sendRequest({relativeUrl:"projectcontainers/"+e+"/remove?includeDependencies="+n,settings:{type:"PUT",data:t}})},e.prototype.getProjectAssetsDependenciesAsync=function(e,t){return this.sendRequest({relativeUrl:"projectcontainers/dependencies",settings:{type:"POST",data:t}})},e.prototype.getProjectAssetsReferencersAsync=function(e,t){return this.sendRequest({relativeUrl:"projectcontainers/"+e+"/referencers",settings:{type:"POST",data:t}})},e.prototype.deleteProjectAsync=function(e){return this.sendRequest({relativeUrl:"projectcontainers/"+e,settings:{type:"DELETE"}})},e.prototype.createWebServicesUXApiKeyCookieAsync=function(e,t,n){if(e==null||e==="")return $.Deferred().resolve();var r=this.generateRequestArguments(e,"/api/studiolink",{type:"POST",data:{WorkspaceId:t,Key:n}});return r.saveCookies=!0,this.sendRequestWithCallback(r)},e.prototype.listWorkspacesAsync=function(){return this.sendRequest({relativeUrl:"listworkspaces"})},e.prototype.listUserWorkspacesAsync=function(e,t){return t?this.sendRequestWithCallback(this.generateRequestArguments(this.serviceBaseAddress,"user/workspaces?includemru=true&region="+encodeURIComponent(e))):this.sendRequestWithCallback(this.generateRequestArguments(this.serviceBaseAddress,"user/workspaces?region="+encodeURIComponent(e)))},e.prototype.listWorkspacesPermissionsAsync=function(e,t){return this.sendRequestWithCallback(this.generateRequestArguments(this.serviceBaseAddress,"user/"+encodeURIComponent(t)+"/permissions/workspaces?region="+encodeURIComponent(e)))},e.prototype.deleteWorkspaceAsync=function(){var e=this.appendWorkspaceIdToUrl(this.serviceBaseAddress),t=this.generateRequestArguments(e,"?userId=admin&newExpiresAt=3/7/2017",{type:"DELETE",responseType:i.ResponseType.None},{});return this.sendRequestWithCallback(t)},e.prototype.createExperimentStoragePackageAsync=function(e,t,n,r){var i;return n?i=this.generateRequestURI("packages",{"api-version":"2.0",experimentId:e,clearCredentials:String(t),newExperimentName:n}):i=this.generateRequestURI("packages",{"api-version":"2.0",experimentId:e,clearCredentials:String(t)}),this.sendRequest({relativeUrl:i,settings:{type:"POST"},scenarioStopwatch:r})},e.prototype.createExperimentStoragePackageForCommunityAsync=function(e,t,n,r){var i;return n?i=this.generateRequestURI("packages",{"api-version":"2.0",experimentId:e,clearCredentials:String(t),newExperimentName:n,forCommunity:String(!0)}):i=this.generateRequestURI("packages",{"api-version":"2.0",experimentId:e,clearCredentials:String(t),forCommunity:String(!0)}),this.sendRequest({relativeUrl:i,settings:{type:"POST"},scenarioStopwatch:r})},e.prototype.getExperimentStoragePackageAsync=function(e){var t=this.generateRequestURI("packages",{packageActivityId:e});return this.sendRequest({relativeUrl:t})},e.prototype.createExperimentFromStoragePackageAsync=function(e,t){return this.sendRequest({relativeUrl:"packages?api-version=2.0&workspaceId="+encodeURIComponent(e)+"&packageUri="+encodeURIComponent(t),settings:{type:"PUT"}})},e.prototype.createNotebookStoragePackageForCommunityAsync=function(e,t){var n;return t?n=this.generateRequestURI("packages",{"api-version":"2.0",notebookId:e,newNotebookName:t,forCommunity:String(!0)}):n=this.generateRequestURI("packages",{"api-version":"2.0",notebookId:e,forCommunity:String(!0)}),this.sendRequest({relativeUrl:n,settings:{type:"POST"}})},e.prototype.getNotebookStoragePackageAsync=function(e){var t=this.generateRequestURI("packages",{packageActivityId:e});return this.sendRequest({relativeUrl:t})},e.prototype.getSingleUserAsync=function(e){return this.sendRequest({relativeUrl:"users/"+e})},e.prototype.listUsersAndInvitationsAsync=function(){return this.sendRequest({relativeUrl:"users"})},e.prototype.removeUser=function(e){return this.sendRequest({relativeUrl:"users/"+e,settings:{type:"DELETE",responseType:i.ResponseType.None}})},e.prototype.sendInvitation=function(e){return this.sendRequest({relativeUrl:"invitations",settings:{type:"POST",data:e}})},e.prototype.acceptInvitation=function(e){return this.sendRequest({relativeUrl:"invitations?token="+e,settings:{type:"PUT",responseType:i.ResponseType.None}})},e.prototype.removeInvitation=function(e){return this.sendRequest({relativeUrl:"invitations?token="+e,settings:{type:"DELETE",responseType:i.ResponseType.None}})},e.prototype.sendEmailInvitation=function(e){return this.sendRequest({relativeUrl:"invitations?emailonly=true",settings:{type:"POST",data:e}})},e.prototype.listCredentials=function(){return f.deprecateCredentialsSystemEnabled()?$.Deferred().resolve([]).promise():this.sendRequest({relativeUrl:"credentials"})},e.prototype.verifyCredential=function(e){return f.deprecateCredentialsSystemEnabled()?$.Deferred().resolve(!1).promise():this.sendRequest({relativeUrl:"credentials",settings:{type:"POST",data:e}})},e.prototype.deleteCredential=function(e){return f.deprecateCredentialsSystemEnabled()?$.Deferred().resolve(!0).promise():this.sendRequest({relativeUrl:"credentials",settings:{type:"DELETE",data:e}})},e.prototype.saveCredential=function(e,t){return this.sendRequest({relativeUrl:"credentials",settings:{type:"PUT",data:e},scenarioStopwatch:t})},e.prototype.ssimSearch=function(e,t,n){return t===void 0&&(t=1),n===void 0&&(n=10),this.sendRequest({relativeUrl:"ssimdata?searchTerm="+e+"&page="+t+"&pageSize="+n})},e.prototype.saveSsimData=function(e){return this.sendRequest({relativeUrl:"ssimdata",settings:{type:"PUT",data:e}})},e.prototype.listDataImports=function(){return this.sendRequest({relativeUrl:"dataimports"})},e.prototype.getDataImport=function(e){return this.sendRequest({relativeUrl:"dataimport/"+e})},e.prototype.deleteDataImport=function(e){return this.sendRequest({relativeUrl:"dataimport/"+e,settings:{type:"DELETE"}})},e.prototype.listExperimentsAsync=function(e,t){e===void 0&&(e={}),e.includeNonLeaf=Boolean(e.includeNonLeaf),e.includeArchived=Boolean(e.includeArchived);var r=this.generateRequestURI("experiments",{includeNonLeaf:String(e.includeNonLeaf),includeArchived:String(e.includeArchived)});return this.sendRequest({relativeUrl:r,scenarioStopwatch:t}).done(function(e){e.forEach(function(e){n.replaceJsonDates(e.Status,["CreationTime","StartTime","EndTime"])})})},e.prototype.generateRequestURI=function(e,t){var r=e,i=n.size(t);if(i!=0){r+="?";var s=n.map(t,function(e,t,n){return t+"="+encodeURIComponent(e)});r+=s.join("&")}return r},e.prototype.listDataflowsAsync=function(){return this.sendRequest({relativeUrl:"dataflows"})},e.prototype.getExperimentAsync=function(e,t){return this.sendRequest({relativeUrl:"experiments/"+e,scenarioStopwatch:t})},e.prototype.getExperimentAnnotationsAsync=function(e){return this.sendRequest({relativeUrl:"experiments/"+e+"/annotations"})},e.prototype.addExperimentAnnotationsAsync=function(e,t){return this.sendRequest({relativeUrl:"experiments/"+e+"/annotations",settings:{type:"POST",data:t}})},e.prototype.updateExperimentAnnotationsAsync=function(e,t){return this.sendRequest({relativeUrl:"experiments/"+e+"/annotations",settings:{type:"PUT",data:t}})},e.prototype.deleteExperimentAnnotationsAsync=function(e,t){return this.sendRequest({relativeUrl:"experiments/"+e+"/annotations/"+t,settings:{type:"DELETE"}})},e.prototype.getExperimentLineageAsync=function(e){return this.sendRequest({relativeUrl:"experiments/"+e+"/lineage"}).done(function(e){e.forEach(function(e){n.replaceJsonDates(e.Status,["CreationTime","StartTime","EndTime"])})})},e.prototype.getDataflowAsync=function(e,t){return this.sendRequest({relativeUrl:"dataflows/"+e,scenarioStopwatch:t})},e.prototype.createWebServiceGroupAsync=function(e){return this.sendRequest({relativeUrl:"webservicegroups/",settings:{type:"POST",data:e}})},e.prototype.getWebServiceGroupAsync=function(e){return this.sendRequest({relativeUrl:"webservicegroups/"+e})},e.prototype.deleteWebServiceGroupAsync=function(e){return this.sendRequest({relativeUrl:"webservicegroups/"+e,settings:{type:"DELETE"}})},e.prototype.updateWebServiceGroupAsync=function(e,t){if(t===undefined)throw new Error("Expected an IAddOrUpdateWebServiceGroupRequest");return this.sendRequest({relativeUrl:"webservicegroups/"+e,settings:{type:"PUT",data:t}})},e.prototype.listWebServiceGroupsAsync=function(){return this.sendRequest({relativeUrl:"webservicegroups/"})},e.prototype.registerModelPackageAsync=function(e,t){if(t===undefined)throw new Error("Expected an IAddModelPackageRequest");return this.sendRequest({relativeUrl:"webservicegroups/"+e+"/modelpackages/",settings:{type:"POST",data:t}})},e.prototype.listModelPackagesAsync=function(e){return this.sendRequest({relativeUrl:"webservicegroups/"+e+"/modelpackages/"})},e.prototype.getModelPackageAsync=function(e,t){return this.sendRequest({relativeUrl:"webservicegroups/"+e+"/modelpackages/"+t})},e.prototype.updateModelPackageAsync=function(e,t,n){if(n===undefined)throw new Error("Expected an IUpdateModelPackageRequest");return this.sendRequest({relativeUrl:"webservicegroups/"+e+"/modelpackages/"+t,settings:{type:"PUT",data:n}})},e.prototype.registerWebServiceAsync=function(e,t){if(t===undefined)throw new Error("Expected an IAddUpdateWebServiceRequest");return this.sendRequest({relativeUrl:"webservicegroups/"+e+"/webservices/",settings:{type:"POST",data:t}})},e.prototype.getWebServiceAsync=function(e,t){return this.sendRequest({relativeUrl:"webservicegroups/"+e+"/webservices/"+t})},e.prototype.updateWebServiceAsync=function(e,t,n){if(n===undefined)throw new Error("Expected an IAddUpdateWebServiceRequest");return this.sendRequest({relativeUrl:"webservicegroups/"+e+"/webservices/"+t,settings:{type:"PUT",data:n}})},e.prototype.invokeScoreWebServiceAsync=function(e,t,n,r){return this.sendRequest({relativeUrl:"webservicegroups/"+e+"/webservices/"+t+"/score",settings:{type:"POST",data:{Id:"scoring0002",Instance:{FeatureVector:n,GlobalParameters:r}}}})},e.prototype.createCommunityExperimentAsync=function(e,t,n,r){var i;return n?i=this.generateRequestURI("packages",{packageUri:t,communityUri:n}):i=this.generateRequestURI("packages",{packageUri:t}),this.sendRequest({relativeUrl:i,settings:{type:n?"PATCH":"POST",data:e.PublishableExperiment},scenarioStopwatch:r})},e.prototype.startGetCommunityExperimentIdAsync=function(e,t,n,r){return this.sendRequest({relativeUrl:"packages?api-version=2.0&workspaceId="+encodeURIComponent(e)+"&packageUri="+encodeURIComponent(t)+"&communityUri="+encodeURIComponent(n),settings:{type:"PUT"},scenarioStopwatch:r})},e.prototype.createCommunityNotebookAsync=function(e,t,n){var r;return n?r=this.generateRequestURI("packages",{"api-version":"2.0",notebookPackageUri:t,communityUri:n}):r=this.generateRequestURI("packages",{"api-version":"2.0",notebookPackageUri:t}),e.PublishableNotebook.hyperlinks.push({caption:"NotebookPreview",address:this.appendWorkspaceIdToUrl(this.serviceBaseAddress)+"/notebooks/family/"+e.NotebookId.replace(/-/g,"")+"/attachments/Content?api-version=2.0"}),this.sendRequest({relativeUrl:r,settings:{type:n?"PATCH":"POST",data:e.PublishableNotebook}})},e.prototype.startGetCommunityNotebookIdAsync=function(e,t,n,r,i){return this.sendRequest({relativeUrl:"packages?api-version=2.0&destinationWorkspaceId="+encodeURIComponent(e)+"&notebookPackageUri="+encodeURIComponent(t)+"&communityUri="+encodeURIComponent(n)+"&entityId="+encodeURIComponent(r),settings:{type:"PUT"},scenarioStopwatch:i})},e.prototype.createCommunityCustomModuleAsync=function(e,t,n,r){var i;return n?i=this.generateRequestURI("packages",{"api-version":"2.0",modulePackageUri:t,communityUri:n}):i=this.generateRequestURI("packages",{"api-version":"2.0",modulePackageUri:t}),this.sendRequest({relativeUrl:i,settings:{type:n?"PATCH":"POST",data:e},scenarioStopwatch:r})},e.prototype.getNotebookUnpackStatusAsync=function(e){return this.sendRequest({relativeUrl:"packages?api-version=2.0&unpackNotebookActivityId="+encodeURIComponent(e)})},e.prototype.getUnpackStatusAsync=function(e){return this.sendRequest({relativeUrl:"packages?unpackActivityId="+encodeURIComponent(e)})},e.prototype.startGetCompetitionExperimentIdFromCommunityAsync=function(e,t,n,r,i,s){return this.sendRequest({relativeUrl:"packages?api-version=2.0&workspaceId="+encodeURIComponent(e)+"&packageUri="+encodeURIComponent(t)+"&communityUri="+encodeURIComponent(n)+"&competitionUri="+encodeURIComponent(r)+"&competitionTenantId="+encodeURIComponent(i),settings:{type:"PUT"},scenarioStopwatch:s})},e.prototype.startSubmitCompetitionEntryAsync=function(e,t){return this.sendRequest({relativeUrl:"competitions",settings:{type:"POST",data:e},scenarioStopwatch:t})},e.prototype.getCompetitionSchemaDefinitionAsync=function(e,t){return this.sendRequest({relativeUrl:"competitions?competitionId="+encodeURIComponent(e)+"&competitionTenantId="+encodeURIComponent(t)})},e.prototype.getCompetitionSubmissionAllowedStatusAsync=function(e,t){return this.sendRequest({relativeUrl:"competitions/submissionallowed?competitionId="+encodeURIComponent(e)+"&competitionTenantId="+encodeURIComponent(t)})},e.prototype.getCompetitionTermsAndConditionsAsync=function(e,t){return this.sendRequest({relativeUrl:"competitions/termsandconditions?competitionId="+encodeURIComponent(e)+"&competitionTenantId="+encodeURIComponent(t)})},e.prototype.startGetCommunityModuleAsync=function(e,t,n,r,i,s){var o={PackageUri:t,WorkspaceId:e,CommunityUri:n,ResolvedAssetNames:s,UnpackExperiment:!!r};return this.sendRequest({relativeUrl:"packages?api-version=2.0",settings:{type:"POST",data:o},scenarioStopwatch:i})},e.prototype.getUnpackModuleStatusAsync=function(e){return this.sendRequest({relativeUrl:"packages?api-version=2.0&unpackModuleActivityId="+encodeURIComponent(e)})},e.prototype.listDataTypesAsync=function(e){return this.sendRequest({relativeUrl:"datatypes",scenarioStopwatch:e})},e.prototype.publishExperimentAsync=function(e){if(e===undefined)throw new Error("Expected an experiment publishing request");return this.sendRequest({relativeUrl:"dataflows",settings:{type:"POST",data:e}})},e.prototype.submitExperimentAsync=function(e,t){if(e===undefined)throw new Error("Expected an experiment submission request");return this.sendRequest({relativeUrl:"experiments",settings:{type:"POST",data:e},scenarioStopwatch:t})},e.prototype.updateExperimentAsync=function(e,t,n,r){if(n===undefined)throw new Error("Expected an experiment update request");return this.sendRequest({relativeUrl:"experiments/"+e,settings:{type:"POST",data:n},headers:{"If-Match":t},scenarioStopwatch:r})},e.prototype.deleteExperimentAsync=function(e,t){return this.sendRequest({relativeUrl:"experiments/"+e+"?deleteAncestors=false",settings:{type:"DELETE"},headers:{"If-Match":t}})},e.prototype.deleteExperimentAndAncestorsAsync=function(e,t){return this.sendRequest({relativeUrl:"experiments/"+e+"?deleteAncestors=true",settings:{type:"DELETE"},headers:{"If-Match":t}})},e.prototype.cancelExperimentAsync=function(e){return this.sendRequest({relativeUrl:"experiments/"+e,settings:{type:"PUT"},headers:{"x-ms-action":"cancel"}})},e.prototype.promoteOutputToDatasetAsync=function(e){if(!e)throw new Error("'promoteDatasetRequest' must be provided");return this.addDatasetAsync(e,s.DataSourceOrigin.FromOutputPromotion)},e.prototype.promoteOutputToTrainedModelAsync=function(e){if(!e)throw new Error("'promoteTrainedModelRequest' must be provided");return this.addTrainedModelAsync(e,s.DataSourceOrigin.FromOutputPromotion)},e.prototype.promoteOutputToTransformModuleAsync=function(e){if(!e)throw new Error("'promoteTransformModuleRequest' must be provided");return this.addTransformModuleAsync(e,s.DataSourceOrigin.FromOutputPromotion)},e.prototype.getModuleVisualizationData=function(e,t,r){return this.sendRequest({relativeUrl:n.format("experiments/{0}/visualizationdata/{1}/{2}",e,t,r)})},e.prototype.getModuleVisualizationDataItem=function(e,t,r,i,s,o,u){return this.sendRequest({relativeUrl:n.format("experiments/{0}/visualizationdata/{1}/{2}?item={3}&resourceType={4}&resourceSubType={5}",e,t,r,encodeURIComponent(i),encodeURIComponent(s),encodeURIComponent(o)),settings:{responseType:u}})},e.prototype.getDatasetVisualizationData=function(e){return this.sendRequest({relativeUrl:n.format("datasources/{0}/visualizationdata",e)})},e.prototype.getPaginatedModuleVisualizationData=function(e,t,r,s,o,u,a){var f=window.environment.dataAccessServiceAddress,l=n.format("/api/paginate/workspaces/{0}/experiments/{1}/{2}/{3}",this.workspaceId,e,t,r),c="?rowStart="+s+"&rowEnd="+(s+o-1)+"&columnStart="+u+"&columnEnd="+(u+a-1),h=f+l+c,p=i.generateGeneralClientHeaders(this.authToken),d={type:"GET"},v={url:h,settings:d,additionalHeaders:p};return this.sendRequestWithCallback(v)},e.prototype.getModuleOutputSchema=function(e,t,r){return this.sendRequest({relativeUrl:n.format("experiments/{0}/outputschema/{1}/{2}",e,t,r)})},e.prototype.getDatasetSchema=function(e){return this.sendRequest({relativeUrl:n.format("datasources/{0}/schema",e)})},e.prototype.getModuleOutput=function(e,t,r){return this.sendRequest({relativeUrl:n.format("experiments/{0}/outputdata/{1}/{2}",e,t,r)})},e.prototype.getModuleErrorLog=function(e,t){return this.sendRequest({relativeUrl:n.format("experiments/{0}/errorlog/{1}",e,t),settings:{responseType:"text"}})},e.prototype.commitResourceAsDatasetAsync=function(e,t){if(!e)throw new Error("'commitDatasetRequest' must be provided");return e.ClientPoll=!0,this.addDatasetAsync(e,s.DataSourceOrigin.FromResourceUpload,t)},e.prototype.getResourceDependantsAsync=function(e){return this.sendRequest({relativeUrl:n.format("assets/{0}/experiments",e)})},e.prototype.buildResourceAsCustomModulePackageAsync=function(e){var t=this;if(!e)throw new Error("'commitCustomModulePackageRequest' must be provided");return e.ClientPoll=!0,n.then(this.sendRequest({relativeUrl:"modules/custom",settings:{type:"POST",data:e}}),function(e){return t.pollCustomModuleIds(e)})},e.prototype.getCustomModuleIds=function(e){return this.sendRequest({relativeUrl:"modules/custom?activityGroupId="+e,settings:{type:"GET"}})},e.prototype.pollCustomModuleIds=function(e){var t=36e5,i=$.Deferred();return this.setupCustomModuleResponseHandler(e,this.getCustomModuleIds(e),i,r.PollInterval,0,t),n.when(i.promise())},e.prototype.setupCustomModuleResponseHandler=function(e,t,n,r,i,s){var o=this;t.done(function(t){a.info("polling activity with activityId = "+e+"."),t===null&&n.reject(new Error("Internal error"));var u=t[0];if(u==="Pending"){a.info("custom module activity with activityId = "+e+" still pending, will poll again");if(i<s){var f=Math.min(r,5e3);setTimeout(function(){o.setupCustomModuleResponseHandler(e,o.getCustomModuleIds(e),n,f,i+r,s)},f)}else n.reject(new Error("Custom module registrartion exceeded maximum timout of "+s+" ms."))}else u==="Finished"?(a.info("custom module activity with activityId = "+e+" is finished, resolving"),n.resolve(t)):u==="Failed"?(a.info("custom module activity with activityId = "+e+" failed, resolving"),n.resolve(t)):n.reject(new Error("Internal error"))})},e.prototype.addDatasetAsync=function(e,t,n){if(!e)throw new Error("'addDatasetRequest' must be provided");if(t in s.DataSourceOrigin)return e.DataSource.SourceOrigin=t,this.sendRequest({relativeUrl:"datasources",settings:{type:"POST",data:e},scenarioStopwatch:n});throw new Error("sourceOrigin must be a member of ContractConstants.DataSourceOrigin")},e.prototype.addTrainedModelAsync=function(e,t){if(!e)throw new Error("'addTrainedModelRequest' must be provided");if(t in s.DataSourceOrigin)return e.TrainedModel.SourceOrigin=t,this.sendRequest({relativeUrl:"trainedmodels",settings:{type:"POST",data:e}});throw new Error("sourceOrigin must be a member of ContractConstants.DataSourceOrigin")},e.prototype.addTransformModuleAsync=function(e,t){if(!e)throw new Error("'addTransformModuleRequest' must be provided");if(t in s.DataSourceOrigin)return e.Transform.SourceOrigin=t,this.sendRequest({relativeUrl:"transformmodules",settings:{type:"POST",data:e}});throw new Error("sourceOrigin must be a member of ContractConstants.DataSourceOrigin")},e.prototype.uploadResourceAsync=function(e,t,n){if(f.chunkedUploadInStudioEnabled()){var r=new o(this,e,t,n);return r.uploadBlobAsync()}return this.sendRequestWithCallback(this.generateRequestArguments(this.appendWorkspaceIdToUrl(this.serviceBaseAddress+"resourceuploads/"),this.ensureStringPrependedWithSlash("?userStorage=true&dataTypeId="+encodeURIComponent(t)),{type:"POST",data:e,reportUploadProgress:!0}),n)},e.prototype.getWorkspaceSettingsAsync=function(){return this.sendRequest({relativeUrl:""})},e.prototype.updateWorkspaceSettings=function(e){if(e===undefined)throw new Error("Expected a workspace settings update request");return this.sendRequest({relativeUrl:"",settings:{type:"POST",data:e,responseType:i.ResponseType.None}})},e.prototype.getJobInstance=function(e){return this.sendRequest({relativeUrl:"executions/"+e})},e.prototype.getStorageSpaceQuotaAsync=function(){return this.sendRequest({relativeUrl:"quota"})},e.prototype.getExperimentDetailsAsync=function(e){return this.sendRequest({relativeUrl:"/Experiments/"+encodeURIComponent(e)+"/details"})},e.prototype.updateExperimentDetailsAsync=function(e,t){return this.sendRequest({relativeUrl:"/Experiments/"+encodeURIComponent(e)+"/details",settings:{type:"POST",data:t}})},e.prototype.listProjects=function(e){e===void 0&&(e=null);var t;return e?t=n.format("projects?experimentId={0}",e):t="projects",this.sendRequest({relativeUrl:t})},e.prototype.createProject=function(e){if(!e)throw new Error("Expected AddOrUpdateProjectRequest has value");return this.sendRequest({relativeUrl:"projects",settings:{type:"POST",data:e}})},e.prototype.updateProject=function(e,t){if(!t)throw new Error("Expected AddOrUpdateProjectRequest has value");return this.sendRequest({relativeUrl:n.format("projects/{0}",e),settings:{type:"PUT",data:t}})},e.prototype.initiateResourceUpload=function(e){return this.sendRequestWithCallback(this.generateRequestArguments(this.appendWorkspaceIdToUrl(this.serviceBaseAddress+"resourceuploads/"),this.ensureStringPrependedWithSlash("?userStorage=true&dataTypeId="+encodeURIComponent(e)),{type:"POST",reportUploadProgress:!1}))},e.prototype.uploadBlobChunk=function(e,t,n,r,s,o){return this.sendRequestWithCallback(this.generateRequestArguments(this.appendWorkspaceIdToUrl(this.serviceBaseAddress+"blobuploads/"),this.ensureStringPrependedWithSlash("?numberOfBlocks="+s.toString()+"&blockId="+r.toString()+"&uploadId="+n+"&dataTypeId="+encodeURIComponent(t)),{type:"POST",responseType:i.ResponseType.JSON,data:e,reportUploadProgress:!1}),o)},e.prototype.gatewayNameAvailable=function(e){return this.sendRequest({relativeUrl:"gateways/"+e+"/nameAvailable"})},e.prototype.replaceGatewayDates=function(e){return e.CreateTime&&(e.CreateTime=n.parseJsonDate(e.CreateTime)),e.ExpiryTime&&(e.ExpiryTime=n.parseJsonDate(e.ExpiryTime)),e.LastConnectTime&&(e.LastConnectTime=n.parseJsonDate(e.LastConnectTime)),e.RegisterTime&&(e.RegisterTime=n.parseJsonDate(e.RegisterTime)),e},e.prototype.createGateway=function(e,t){var n=this;return this.sendRequest({relativeUrl:"gateways/"+e,settings:{type:"PUT",data:t}}).then(function(e){return n.replaceGatewayDates(e)})},e.prototype.getGateways=function(){var e=this,t=function(t){return e.replaceGatewayDates(t)};return f.dataGatewayEnabled()?this.sendRequest({relativeUrl:"gateways"}).then(function(e){return e.filter(function(e){return!e.ProvisioningState||e.ProvisioningState!=="Deleting"}).map(t)}):n.when([])},e.prototype.getGateway=function(e){var t=this;return this.sendRequest({relativeUrl:"gateways/"+e}).then(function(e){return t.replaceGatewayDates(e)})},e.prototype.deleteGateway=function(e){return this.sendRequest({relativeUrl:"gateways/"+e,settings:{type:"DELETE"}})},e.prototype.generateGatewayRegistrationKey=function(e){return this.sendRequest({relativeUrl:"gateways/"+e+"/regenerateKey",settings:{type:"POST"}})},e.prototype.updateGateway=function(e,t){return this.sendRequest({relativeUrl:"gateways/"+e,settings:{type:"PATCH",data:t}})},e.prototype.getGatewayExpressInstallLink=function(e,t){return this.sendRequest({relativeUrl:"gateways/"+e+"/installLink",settings:{type:"POST",data:t}})},e.prototype.getGatewayCredentialEntryRequest=function(e,t,n){return this.sendRequest({relativeUrl:"gateways/"+e+"/credential",settings:{type:"POST",data:{ServerName:t,DatabaseName:n}}})},e.prototype.getAreGatewayCredentialsEntered=function(e){var t=this.sendRequest({relativeUrl:"gateways/credentials/"+e+"/status"});return t.then(function(e){return e==="Ready"})},e.prototype.getEnteredGatewayCredentials=function(e){return this.sendRequest({relativeUrl:"gateways/credentials/"+e})},e.prototype.getFoofValue=function(e){var t=this.generateRequestArguments("/main/getfoofvalue?foof="+encodeURIComponent(e),"",{},{});return this.sendRequestWithCallback(t)},e.prototype.setPromoEmailPreference=function(e,t){var n=this.generateRequestArguments(this.serviceBaseAddress,"nudge/promotionpref",{type:"POST",data:{country:e,preference:t}});return this.sendRequestWithCallback(n)},e.prototype.getConnectionIsValid=function(e,t){return this.sendRequest({relativeUrl:n.format("modules/{0}/datavalidation/connection",e),settings:{data:t,type:"POST"}})},e}();t.Client=h}),define("mda",["jquery"],function(){return{init:function(){return document.write=function(){$(arguments[0]).appendTo("body")},$.ajax({dataType:"script",url:"//c.microsoft.com/ms.js",cache:!0})}}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/DataLabClient/Logging/MdaLogger",["require","exports","../Contracts/V1/DataLabClient","../Constants","./Logging","../Features"],function(e,t,n,r,i,s){var o=new n.Client(null,null);o.getFoofValue("MdaLogging").done(function(t){t!==!1&&e(["mda"],function(e){e.init()})});var u=function(e){function t(){e.call(this),this.mdaLogQueue=new Array,this.mdaBacklogOverflowLimit=15,this.shouldLog=!0,this.shouldLog=s.mdaLoggingEnabled()}return __extends(t,e),t.prototype.info=function(e,t,n){},t.prototype.error=function(e,t,n){},t.prototype.warn=function(e,t,n){},t.prototype.featureUsage=function(e,t){this.logAnalytics({eventId:r.FeatureId[e.featureID],action:r.FeatureId[e.groupID],name:t,offer:e.experimentID,targetCampaign:e.data})},t.prototype.customEvent=function(e,t){this.logAnalytics({eventId:e.key,action:e.type,name:t,targetCampaign:e.data})},t.prototype.logAnalytics=function(e){if(typeof MscomCustomEvent=="function"){if(this.mdaLogQueue.length){var t;while(t=this.mdaLogQueue.splice(0,1)[0])this.sendAnalyticsEvent(t)}this.sendAnalyticsEvent(e)}else this.mdaLogQueue.length<this.mdaBacklogOverflowLimit&&this.mdaLogQueue.push(e)},t.prototype.sendAnalyticsEvent=function(e){if(this.shouldLog)try{MscomCustomEvent("ms.InteractionType","21","ms.customEvent",e.eventId||"","ms.ea_action",e.action||"","ms.ea_name",e.name||"","ms.ea_offer",e.offer||"","ms.ea_targetcampaign",e.targetCampaign||"")}catch(t){i.warn("The call to log to MDA failed.","",t)}},t}(i.NullLogger);return u}),define("generated/DataLabClient/UserPreferenceStoreClient/UserPreferenceStore",["require","exports","../ClientCache","../Features","../LocalizedResources","../Logging/Logging"],function(e,t,n,r,i,s){var o=function(){function e(e,t,r){var i=this;this._userPreferenceClient=e,this._userPreferenceKeys=t,this._mutablePreferenceCache=new n.MutableClientCache({fetch:function(e){return i._userPreferenceClient.getUserPreferenceValueAsync(e)},list:function(){var e=$.Deferred();return i._userPreferenceClient.getUserPreferenceValuesAsync(i._userPreferenceKeys).done(function(t){var n=i._userPreferenceKeys.map(function(e){return{key:e,value:t[e]}});e.resolve(n)}).fail(function(t){s.error(t.message),e.reject(t)}),e}},r)}return e.prototype.getValue=function(e){if(r.useUserPreferenceStoreServiceEnabled())return this._mutablePreferenceCache.getItem(e);var t=$.Deferred();return Shell.Utilities.isLocalStorageAvailable()?t.resolve(localStorage.getItem(e)):t.reject(new Error(i.localStorageNotAvailableError)),t.promise()},e.prototype.setValue=function(e,t){var n=this;if(r.useUserPreferenceStoreServiceEnabled()){if(this._mutablePreferenceCache.getItemIfCached(e)!==t)return this._userPreferenceClient.setUserPreferenceValueAsync(e,t).done(function(){n._mutablePreferenceCache.setItem(e,t)}).fail(function(e){s.error(e.message)});var o=$.Deferred();return o.resolve(),o.promise()}var o=$.Deferred();return Shell.Utilities.isLocalStorageAvailable()?(localStorage.setItem(e,t),o.resolve()):o.reject(new Error(i.localStorageNotAvailableError)),o.promise()},e}();t.UserPreferenceCache=o}),define("generated/DataLabClient/UserPreferenceStoreClient/UserPreferenceStoreClient",["require","exports","../Util","../AjaxClient"],function(e,t,n,r){var i=function(){function e(e,t){t===void 0&&(t=null),this.serviceBaseAddress=e+"/api/",this.authToken=t}return e.prototype.generateRequestArguments=function(e,t,n,i){return n===void 0&&(n={}),i===void 0&&(i={}),i=$.extend(i,r.generateGeneralClientHeaders(this.authToken)),{url:e+t,loggedUrl:t,additionalHeaders:i,settings:n}},e.prototype.sendRequest=function(e,t,n){t===void 0&&(t={}),n===void 0&&(n={});var i=this.serviceBaseAddress,s=this.generateRequestArguments(i,e,t,n);return r.sendRequest(s)},e.prototype.getUserPreferenceValuesAsync=function(e){return this.sendRequest("uservalues/",{type:"POST",data:e})},e.prototype.setUserPreferenceValueAsync=function(e,t){return this.sendRequest("uservalues/key/"+e,{type:"PUT",data:t})},e.prototype.deleteAllUserPreferencesAsync=function(){return this.sendRequest("uservalues/",{type:"DELETE"})},e.prototype.getUserPreferenceValueAsync=function(e){var t;return t=n.then(this.getUserPreferenceValuesAsync([e]),function(t){return t[e]}),t},e}();t.UserPreferenceStoreClient=i}),define("generated/DataLabClient/Contracts/V2/DataLabMultiRuntimeClient",["require","exports","../../Util","../../Constants","../../AjaxClient"],function(e,t,n,r,i){var s=function(){function e(e,t,n,r){n===void 0&&(n=null),r===void 0&&(r=!0),this.workspaceId=e,this.workspaceFriendlyName=t,this.authToken=n,this.redirectOn401=r,this.esServiceBaseAddress="",this.runtimeServiceBaseUrl="",this.notificationServiceBaseUrl=""}return e.prototype.getRuntimeDefinition=function(e,t,n){var r="/palettes/definitions/"+e;t&&(r+="/major/"+t,n?r+="/minor/"+n:r+="/active");var i=this.generateRequestArguments(this.runtimeServiceBaseUrl,r);return this.sendRequest(i)},e.prototype.getRuntimeDescription=function(e,t){var n="/palettes/descriptions/"+e;t&&(n+="/version/"+t);var r=this.generateRequestArguments(this.runtimeServiceBaseUrl,n);return this.sendRequest(r)},e.prototype.getPaletteSummaries=function(){var e=this.generateRequestArguments(this.runtimeServiceBaseUrl,"/palettes");return this.sendRequest(e)},e.prototype.getRuntimeMajorVersions=function(e){var t=this.generateRequestArguments(this.runtimeServiceBaseUrl,"/palettes/definitions/"+e);return this.sendRequest(t)},e.prototype.getUserDefinedFunctionDefinitions=function(e,t,n){return $.Deferred()},e.prototype.getUserDefinedFunctionDescriptions=function(e,t,n){return $.Deferred()},e.prototype.listExperiments=function(e){var t=n.format("/workspaces/{0}/experiments",this.workspaceId),r=this.generateRequestArguments(this.esServiceBaseAddress,t);return this.sendRequest(r)},e.prototype.getDraft=function(e){var t=n.format("/workspaces/{0}/experiments/{1}/draft/latest",this.workspaceId,e),r=this.generateRequestArguments(this.esServiceBaseAddress,t);return this.sendRequest(r)},e.prototype.insertExperimentFamily=function(e){var t=n.format("/workspaces/{0}/experiments",this.workspaceId),r=this.generateRequestArguments(this.esServiceBaseAddress,t,{type:"POST",data:e,responseType:i.ResponseType.JSON});return this.sendRequest(r)},e.prototype.getExperimentFamily=function(e){var t=n.format("/workspaces/{0}/experiments/{1}",this.workspaceId,e),r=this.generateRequestArguments(this.esServiceBaseAddress,t);return this.sendRequest(r)},e.prototype.saveDraft=function(e,t){var r=n.format("/workspaces/{0}/experiments/{1}/draft/latest",this.workspaceId,e),s=this.generateRequestArguments(this.esServiceBaseAddress,r,{type:"PUT",data:t,responseType:i.ResponseType.JSON});return this.sendRequest(s)},e.prototype.executeDraft=function(e,t){t===void 0&&(t=!1);var r={ClusterId:null,Executer:"Jms",BypassCache:t},s=n.format("/workspaces/{0}/experiments/{1}/draft/latest/execute",this.workspaceId,e),o=this.generateRequestArguments(this.esServiceBaseAddress,s,{type:"POST",data:r,responseType:i.ResponseType.JSON});return this.sendRequest(o)},e.prototype.getExperimentStatus=function(e){var t=n.format("/workspaces/{0}/groups/{1}/experimentstatus",this.workspaceId,e),r=this.generateRequestArguments(this.notificationServiceBaseUrl,t);return this.sendRequest(r)},e.prototype.sendRequest=function(e){var t=this;return i.sendRequest(e,function(e){var n=e.getResponseHeader(r.DataLabAccessTokenHeaderName);n&&(t.authToken=n)})},e.prototype.generateRequestArguments=function(e,t,r,s){r===void 0&&(r={}),s===void 0&&(s={});var o=n.createGuid();return s=$.extend(s,i.generateGeneralClientHeaders(this.authToken),i.generateIFxTrackingHeaders(o)),{url:e+t,loggedUrl:t,additionalHeaders:s,settings:r,redirectOn401:this.redirectOn401,logRequest:!0}},e}();t.MultiRuntimeClient=s});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DrawerMenu/NewDatasetMenuViewModel",["require","exports","../../../TS/ViewModel/DrawerMenu/NewDrawerMenu","../../../../DataLabClient/Disposable","../../../../DataLabClient/LocalizedResources"],function(e,t,n,r,i){function o(){n.NewDrawerMenuDestroy();var e=$(ExperimentEditorTemplates._newDatasetMenuMarkup).prependTo(".fxs-drawerdetails-details-box");ko.applyBindings(new s,e[0])}var s=function(e){function t(){e.call(this),this.detailMessage=ko.observable(i.newDatasetMenuHeader)}return __extends(t,e),t}(r.Disposable);t.NewDatasetMenuViewModel=s,t.NewDatasetMenuInitialize=o});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/ProjectCollection/NewBlankProjectDialogViewModel",["require","exports","../../../TS/Common/ProjectUtilities","../../../../DataLabClient/CustomEvent","../../../../DataLabClient/Disposable","../../../../DataLabClient/Model/User","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o){var u=function(e){function t(){var t=this;e.call(this),this._beforeCreateProject=new r.CustomEvent,this._afterCreateProject=new r.CustomEvent,this._createProjectFailed=new r.CustomEvent,this.name=n.getProjectNameValidator(),this.description=ko.observable(""),this.descriptionMaxLength=ko.observable(2e3),this.canBeAccepted=ko.computed(function(){return t.name.isValid()})}return __extends(t,e),Object.defineProperty(t.prototype,"beforeCreateProject",{get:function(){return this._beforeCreateProject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterCreateProject",{get:function(){return this._afterCreateProject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"createProjectFailed",{get:function(){return this._createProjectFailed},enumerable:!0,configurable:!0}),t.prototype.dismissed=function(e){e.accepted&&this.createProject()},t.prototype.createProject=function(){var e=this,t={ContainerId:"",CreatedTime:"",Name:this.name(),Creator:s.user?s.user.name:"",Description:this.description(),ChangedTime:"",Contents:{},EntityTag:""};this.beforeCreateProject.notify(),o.workspace.createProjectAsync(t,!1).done(function(t){e.afterCreateProject.notify(t.ContainerId)}).fail(function(t){e.createProjectFailed.notify(t)})},t}(i.Disposable);t.NewBlankProjectDialogViewModel=u}),define("generated/editor/TS/View/ProjectCollection/NewBlankProjectDialogView",["require","exports","../../../TS/View/DialogView","../../../TS/ViewModel/ProjectCollection/NewBlankProjectDialogViewModel","../../../TS/Common/ProjectUtilities","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a){var f=s.FeatureId,l=function(){function e(){}return e.show=function(){u.featureUsage({featureID:189,groupID:171});var e=new r.NewBlankProjectDialogViewModel,t=new n.DialogView(ExperimentEditorTemplates._newBlankProjectDialogMarkup,e);e.beforeCreateProject.attach(Shell.UI.Spinner.show),e.afterCreateProject.attach(function(e){Shell.UI.Spinner.hide(),i.navigateToProject(e,"")}),e.createProjectFailed.attach(function(e){Shell.UI.Spinner.hide(),u.error("projectQuickCreationFailed","ExperimentEditor.NewDrawerMenu.NewBlankProjectDialog",JSON.stringify(e)),a.showErrorNotification({title:o.projectQuickCreateFailedNotificationTitle,details:e.message})}),t.show()},e}();t.NewBlankProjectDialog=l});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/DrawerMenu/NewProjectMenuViewModel",["require","exports","../../../TS/View/ProjectCollection/NewBlankProjectDialogView","../../../TS/ViewModel/DrawerMenu/NewDrawerMenu","../../../../DataLabClient/Disposable"],function(e,t,n,r,i){function o(e){r.NewDrawerMenuDestroy();var t=$(ExperimentEditorTemplates._newProjectMenuMarkup).prependTo(".fxs-drawerdetails-details-box");ko.applyBindings(new s(e),t[0])}var s=function(e){function t(t){e.call(this),this.onTileSelectionCallback=t}return __extends(t,e),t.prototype.onNewBlankProjectCardSelected=function(){this.onTileSelectionCallback(),n.NewBlankProjectDialog.show()},t}(i.Disposable);t.NewProjectMenuViewModel=s,t.NewProjectMenuInitialize=o}),define("uxfximpl",["jquery","generated/editor/TS/ViewModel/DrawerMenu/NewExperimentMenuViewModel","generated/editor/TS/ViewModel/DrawerMenu/NewDatasetMenuViewModel","generated/editor/TS/ViewModel/DrawerMenu/NewNotebookMenuViewModel","generated/editor/TS/ViewModel/DrawerMenu/NewModuleMenuViewModel","generated/editor/TS/ViewModel/DrawerMenu/NewProjectMenuViewModel","generated/editor/TS/ViewModel/DrawerMenu/NewExperimentMenuFromCatalogViewModel","generated/editor/TS/ViewModel/DrawerMenu/NewGalleryCustomModuleMenuViewModel","generated/DataLabClient/Features","generated/DataLabClient/Model/Workspace","uxfxscript"],function(e,t,n,r,i,s,o,u,a,f){var l=e.Deferred();(function(e,t,n){var r=t.Communication.Receiver.create("fx");r.register()})(this,Shell),function(e,t){e.Namespace.define("Impl")}(Shell),function(e,t,n,r){function o(){t(e).unload(function(){s.fire()})}function u(e){i.add(e)}function a(){i.fire()}function f(e){s.add(e)}var i=t.Callbacks("memory once"),s=t.Callbacks("memory once");n.Namespace.define("Host",{onDocumentUnload:f,onLoadComplete:u,loadComplete:a}),t(function(){o()})}(this,jQuery,Shell),function(e,t){var n={},r=function(e){return typeof e=="string"&&e.length>0&&e in n?n[e]:null},i=function(e,t){typeof e=="string"&&e.length>0&&(n[e]=t)};e.Namespace.define("Impl.Services",{get:r,add:i})}(Shell),function(e,t,n,r,i){var s=t.prototype,o="fxs.fxsPicker",u="<div class='fxs-picker-dropdown-container'><select data-bind='foreach: data.selectableItems, value: data.selectedItem'><option data-bind='attr: {value: $data, title: $parent.func._getToolTipFunc($data)}, text: $parent.func._getTextFunc($data)'></option></select></div><a class='fxs-picker-ok' data-bind='css: { \"fxs-picker-ok-hidden\" : data.showOk() === false }'><span class=\"sprite\"></span></a>",a=r.getStrings(o);e.widget(o,t,{options:{selectionChange:null,class_:r.getClasses("fx.fxDropdown"),showOk:!0},_clickHandler:null,_viewModel:null,_selectedItem:null,_getToolTipFunc:null,_getTextFunc:null,_select:null,_create:function(t,n){var r=this,i=this.options.showOk,o;this._getToolTipFunc=n||function(){},this._getTextFunc=t||function(){},this._setOption("showOk",i),this.element.addClass("fxs-picker").html(u),ko.applyBindings({data:this._getViewModel(),func:this},this.element[0]),this._select=this.element.find("select"),o=this.element.find(".fxs-picker-ok"),this.element.on("click",".fxs-picker-ok[href]",this._clickHandler=function(){r._applySelection()}),this._select.change(function(){var t=e(this).val();t===r._selectedItem?o.removeAttr("href"):o.attr("href","#"),r._getViewModel().showOk()||r._applySelection()}).fxDropdown({url:this.options.url}),o.find("span.sprite").attr({"class":"sprite dlwux-tick",title:a.ok}),s._create.call(this)},_destroy:function(){this.element.removeClass("fxs-picker").empty(),this._clickHandler&&(this.element.off("click",".fxs-picker-ok[href]",this._clickHandler),this._clickHandler=null),this._super()},_applySelection:function(){this._selectedItem=this._getViewModel().selectedItem(),this.options.selectionChange&&this.options.selectionChange(this._selectedItem)},_validateModel:function(e,t){if(t&&e.indexOf(t)===-1)throw"The selected item '{0}' is not a selectable item.".format(t)},_getViewModel:function(){return this._viewModel||(this._viewModel={selectedItem:ko.observable(),selectableItems:ko.observableArray(),showOk:ko.observable(!0)}),this._viewModel},_setSelectedItem:function(e){this._validateModel(this._getViewModel().selectableItems(),e),this._getViewModel().selectedItem(e),this._selectedItem?this._applySelection():this._selectedItem=e,this._select&&this._select.fxDropdown("option","value",this._selectedItem)},_setSelectableItems:function(e){e=e||[],this._validateModel(e,this._getViewModel().selectedItem()),this._getViewModel().selectableItems(e),this._select&&this._select.fxDropdown("destroy").fxDropdown({url:this.options.url})},_setOption:function(e,t){return e==="showOk"&&this._getViewModel().showOk(t),s._setOption.apply(this,arguments)}})}(jQuery,jQuery.Widget,this,this.fx.resources),function(e,t,n,r,i,s){function a(e,t,n){u[e]={nativeName:n,englishName:t}}var o=t.prototype,u={};a("af","Afrikaans","Afrikaans"),a("af-za","Afrikaans (South Africa)","Afrikaans (Suid Afrika)‎"),a("am","Amharic","አማርኛ"),a("am-et","Amharic (Ethiopia)","አማርኛ (ኢትዮጵያ)‎"),a("ar","Arabic","العربية"),a("ar-ae","Arabic (U.A.E.)","العربية (الإمارات العربية المتحدة)‏"),a("ar-bh","Arabic (Bahrain)","العربية (البحرين)‏"),a("ar-dz","Arabic (Algeria)","العربية (الجزائر)‏"),a("ar-eg","Arabic (Egypt)","العربية (مصر)‏"),a("ar-iq","Arabic (Iraq)","العربية (العراق)‏"),a("ar-jo","Arabic (Jordan)","العربية (الأردن)‏"),a("ar-kw","Arabic (Kuwait)","العربية (الكويت)‏"),a("ar-lb","Arabic (Lebanon)","العربية (لبنان)‏"),a("ar-ly","Arabic (Libya)","العربية (ليبيا)‏"),a("ar-ma","Arabic (Morocco)","العربية (المملكة المغربية)‏"),a("arn","Mapudungun","Mapudungun"),a("arn-cl","Mapudungun (Chile)","Mapudungun (Chile)‎"),a("ar-om","Arabic (Oman)","العربية (عمان)‏"),a("ar-qa","Arabic (Qatar)","العربية (قطر)‏"),a("ar-sa","Arabic (Saudi Arabia)","العربية (المملكة العربية السعودية)‏"),a("ar-sy","Arabic (Syria)","العربية (سوريا)‏"),a("ar-tn","Arabic (Tunisia)","العربية (تونس)‏"),a("ar-ye","Arabic (Yemen)","العربية (اليمن)‏"),a("as","Assamese","অসমীয়া"),a("as-in","Assamese (India)","অসমীয়া (ভাৰত)‎"),a("az","Azerbaijani","Azərbaycan­ılı"),a("az-cyrl","Azerbaijani (Cyrillic)","Азәрбајҹан дили"),a("az-cyrl-az","Azerbaijani (Cyrillic, Azerbaijan)","Азәрбајҹан (Азәрбајҹан)‎"),a("az-latn","Azerbaijani (Latin)","Azərbaycan­ılı"),a("az-latn-az","Azerbaijani (Latin, Azerbaijan)","Azərbaycan­ılı (Azərbaycan)‎"),a("ba","Bashkir","Башҡорт"),a("ba-ru","Bashkir (Russia)","Башҡорт (Россия)‎"),a("be","Belarusian","Беларускі"),a("be-by","Belarusian (Belarus)","Беларускі (Беларусь)‎"),a("bg","Bulgarian","български"),a("bg-bg","Bulgarian (Bulgaria)","български (България)‎"),a("bn","Bangla","বাংলা"),a("bn-bd","Bangla (Bangladesh)","বাংলা (বাংলাদেশ)‎"),a("bn-in","Bangla (India)","বাংলা (ভারত)‎"),a("bo","Tibetan","བོད་ཡིག"),a("bo-cn","Tibetan (PRC)","བོད་ཡིག (ཀྲུང་ཧྭ་མི་དམངས་སྤྱི་མཐུན་རྒྱལ་ཁབ།)‎"),a("br","Breton","brezhoneg"),a("br-fr","Breton (France)","brezhoneg (Frañs)‎"),a("bs","Bosnian","bosanski"),a("bs-cyrl","Bosnian (Cyrillic)","босански"),a("bs-cyrl-ba","Bosnian (Cyrillic, Bosnia and Herzegovina)","босански (Босна и Херцеговина)‎"),a("bs-latn","Bosnian (Latin)","bosanski"),a("bs-latn-ba","Bosnian (Latin, Bosnia and Herzegovina)","bosanski (Bosna i Hercegovina)‎"),a("ca","Catalan","català"),a("ca-es","Catalan (Catalan)","català (català)‎"),a("co","Corsican","Corsu"),a("co-fr","Corsican (France)","Corsu (France)‎"),a("cs","Czech","čeština"),a("cs-cz","Czech (Czech Republic)","čeština (Česká republika)‎"),a("cy","Welsh","Cymraeg"),a("cy-gb","Welsh (United Kingdom)","Cymraeg (y Deyrnas Unedig)‎"),a("da","Danish","dansk"),a("da-dk","Danish (Denmark)","dansk (Danmark)‎"),a("de","German","Deutsch"),a("de-at","German (Austria)","Deutsch (Österreich)‎"),a("de-ch","German (Switzerland)","Deutsch (Schweiz)‎"),a("de-de","German (Germany)","Deutsch (Deutschland)‎"),a("de-li","German (Liechtenstein)","Deutsch (Liechtenstein)‎"),a("de-lu","German (Luxembourg)","Deutsch (Luxemburg)‎"),a("dsb","Lower Sorbian","dolnoserbšćina"),a("dsb-de","Lower Sorbian (Germany)","dolnoserbšćina (Nimska)‎"),a("dv","Divehi","ދިވެހިބަސް"),a("dv-mv","Divehi (Maldives)","ދިވެހިބަސް (ދިވެހި ރާއްޖެ)‏"),a("el","Greek","Ελληνικά"),a("el-gr","Greek (Greece)","Ελληνικά (Ελλάδα)‎"),a("en","English","English"),a("en-029","English (Caribbean)","English (Caribbean)‎"),a("en-au","English (Australia)","English (Australia)‎"),a("en-bz","English (Belize)","English (Belize)‎"),a("en-ca","English (Canada)","English (Canada)‎"),a("en-gb","English (United Kingdom)","English (United Kingdom)‎"),a("en-ie","English (Ireland)","English (Ireland)‎"),a("en-in","English (India)","English (India)‎"),a("en-jm","English (Jamaica)","English (Jamaica)‎"),a("en-my","English (Malaysia)","English (Malaysia)‎"),a("en-nz","English (New Zealand)","English (New Zealand)‎"),a("en-ph","English (Republic of the Philippines)","English (Philippines)‎"),a("en-sg","English (Singapore)","English (Singapore)‎"),a("en-tt","English (Trinidad and Tobago)","English (Trinidad y Tobago)‎"),a("en-us","English (United States)","English (United States)‎"),a("en-za","English (South Africa)","English (South Africa)‎"),a("en-zw","English (Zimbabwe)","English (Zimbabwe)‎"),a("es","Spanish","español"),a("es-ar","Spanish (Argentina)","Español (Argentina)‎"),a("es-bo","Spanish (Bolivia)","Español (Bolivia)‎"),a("es-cl","Spanish (Chile)","Español (Chile)‎"),a("es-co","Spanish (Colombia)","Español (Colombia)‎"),a("es-cr","Spanish (Costa Rica)","Español (Costa Rica)‎"),a("es-do","Spanish (Dominican Republic)","Español (República Dominicana)‎"),a("es-ec","Spanish (Ecuador)","Español (Ecuador)‎"),a("es-es","Spanish (Spain, International Sort)","Español (España, alfabetización internacional)‎"),a("es-gt","Spanish (Guatemala)","Español (Guatemala)‎"),a("es-hn","Spanish (Honduras)","Español (Honduras)‎"),a("es-mx","Spanish (Mexico)","Español (México)‎"),a("es-ni","Spanish (Nicaragua)","Español (Nicaragua)‎"),a("es-pa","Spanish (Panama)","Español (Panamá)‎"),a("es-pe","Spanish (Peru)","Español (Perú)‎"),a("es-pr","Spanish (Puerto Rico)","Español (Puerto Rico)‎"),a("es-py","Spanish (Paraguay)","Español (Paraguay)‎"),a("es-sv","Spanish (El Salvador)","Español (El Salvador)‎"),a("es-us","Spanish (United States)","Español (Estados Unidos)‎"),a("es-uy","Spanish (Uruguay)","Español (Uruguay)‎"),a("es-ve","Spanish (Bolivarian Republic of Venezuela)","Español (Republica Bolivariana de Venezuela)‎"),a("et","Estonian","eesti"),a("et-ee","Estonian (Estonia)","eesti (Eesti)‎"),a("eu","Basque","euskara"),a("eu-es","Basque (Basque)","euskara (euskara)‎"),a("fa","Persian","فارسى"),a("fa-ir","Persian","فارسى (ایران)‏"),a("fi","Finnish","suomi"),a("fi-fi","Finnish (Finland)","suomi (Suomi)‎"),a("fil","Filipino","Filipino"),a("fil-ph","Filipino (Philippines)","Filipino (Pilipinas)‎"),a("fo","Faroese","føroyskt"),a("fo-fo","Faroese (Faroe Islands)","føroyskt (Føroyar)‎"),a("fr","French","français"),a("fr-be","French (Belgium)","français (Belgique)‎"),a("fr-ca","French (Canada)","français (Canada)‎"),a("fr-ch","French (Switzerland)","français (Suisse)‎"),a("fr-fr","French (France)","français (France)‎"),a("fr-lu","French (Luxembourg)","français (Luxembourg)‎"),a("fr-mc","French (Monaco)","français (Principauté de Monaco)‎"),a("fy","Frisian","Frysk"),a("fy-nl","Frisian (Netherlands)","Frysk (Nederlân)‎"),a("ga","Irish","Gaeilge"),a("ga-ie","Irish (Ireland)","Gaeilge (Éire)‎"),a("gd","Scottish Gaelic","Gàidhlig"),a("gd-gb","Scottish Gaelic (United Kingdom)","Gàidhlig (An Rìoghachd Aonaichte)‎"),a("gl","Galician","galego"),a("gl-es","Galician (Galician)","galego (galego)‎"),a("gsw","Alsatian","Elsässisch"),a("gsw-fr","Alsatian (France)","Elsässisch (Frànkrisch)‎"),a("gu","Gujarati","ગુજરાતી"),a("gu-in","Gujarati (India)","ગુજરાતી (ભારત)‎"),a("ha","Hausa","Hausa"),a("ha-latn","Hausa (Latin)","Hausa"),a("ha-latn-ng","Hausa (Latin, Nigeria)","Hausa (Nigeria)‎"),a("he","Hebrew","עברית"),a("he-il","Hebrew (Israel)","עברית (ישראל)‏"),a("hi","Hindi","हिंदी"),a("hi-in","Hindi (India)","हिंदी (भारत)‎"),a("hr","Croatian","hrvatski"),a("hr-ba","Croatian (Latin, Bosnia and Herzegovina)","hrvatski (Bosna i Hercegovina)‎"),a("hr-hr","Croatian (Croatia)","hrvatski (Hrvatska)‎"),a("hsb","Upper Sorbian","hornjoserbšćina"),a("hsb-de","Upper Sorbian (Germany)","hornjoserbšćina (Němska)‎"),a("hu","Hungarian","magyar"),a("hu-hu","Hungarian (Hungary)","magyar (Magyarország)‎"),a("hy","Armenian","Հայերեն"),a("hy-am","Armenian (Armenia)","Հայերեն (Հայաստան)‎"),a("id","Indonesian","Bahasa Indonesia"),a("id-id","Indonesian (Indonesia)","Bahasa Indonesia (Indonesia)‎"),a("ig","Igbo","Igbo"),a("ig-ng","Igbo (Nigeria)","Igbo (Nigeria)‎"),a("ii","Yi","ꆈꌠꁱꂷ"),a("ii-cn","Yi (PRC)","ꆈꌠꁱꂷ (ꍏꉸꏓꂱꇭꉼꇩ)‎"),a("is","Icelandic","íslenska"),a("is-is","Icelandic (Iceland)","íslenska (Ísland)‎"),a("it","Italian","italiano"),a("it-ch","Italian (Switzerland)","italiano (Svizzera)‎"),a("it-it","Italian (Italy)","italiano (Italia)‎"),a("iu","Inuktitut","Inuktitut"),a("iu-cans","Inuktitut (Syllabics)","ᐃᓄᒃᑎᑐᑦ"),a("iu-cans-ca","Inuktitut (Syllabics, Canada)","ᐃᓄᒃᑎᑐᑦ (ᑲᓇᑕᒥ)‎"),a("iu-latn","Inuktitut (Latin)","Inuktitut"),a("iu-latn-ca","Inuktitut (Latin, Canada)","Inuktitut (Kanatami)‎"),a("ja","Japanese","日本語"),a("ja-jp","Japanese (Japan)","日本語 (日本)‎"),a("ka","Georgian","ქართული"),a("ka-ge","Georgian (Georgia)","ქართული (საქართველო)‎"),a("kk","Kazakh","Қазақ"),a("kk-kz","Kazakh (Kazakhstan)","Қазақ (Қазақстан)‎"),a("kl","Greenlandic","kalaallisut"),a("kl-gl","Greenlandic (Greenland)","kalaallisut (Kalaallit Nunaat)‎"),a("km","Khmer","ខ្មែរ"),a("km-kh","Khmer (Cambodia)","ខ្មែរ (កម្ពុជា)‎"),a("kn","Kannada","ಕನ್ನಡ"),a("kn-in","Kannada (India)","ಕನ್ನಡ (ಭಾರತ)‎"),a("ko","Korean","한국어"),a("kok","Konkani","कोंकणी"),a("kok-in","Konkani (India)","कोंकणी (भारत)‎"),a("ko-kr","Korean (Korea)","한국어 (대한민국)‎"),a("ky","Kyrgyz","Кыргыз"),a("ky-kg","Kyrgyz (Kyrgyzstan)","Кыргыз (Кыргызстан)‎"),a("lb","Luxembourgish","Lëtzebuergesch"),a("lb-lu","Luxembourgish (Luxembourg)","Lëtzebuergesch (Luxembourg)‎"),a("lo","Lao","ລາວ"),a("lo-la","Lao (Lao P.D.R.)","ລາວ (ສ.ປ.ປ. ລາວ)‎"),a("lt","Lithuanian","lietuvių"),a("lt-lt","Lithuanian (Lithuania)","lietuvių (Lietuva)‎"),a("lv","Latvian","latviešu"),a("lv-lv","Latvian (Latvia)","latviešu (Latvija)‎"),a("mi","Maori","Reo Māori"),a("mi-nz","Maori (New Zealand)","Reo Māori (Aotearoa)‎"),a("mk","Macedonian (FYROM)","македонски јазик"),a("mk-mk","Macedonian","македонски јазик (Македонија)‎"),a("ml","Malayalam","മലയാളം"),a("ml-in","Malayalam (India)","മലയാളം (ഭാരതം)‎"),a("mn","Mongolian","Монгол хэл"),a("mn-cyrl","Mongolian (Cyrillic)","Монгол хэл"),a("mn-mn","Mongolian (Cyrillic, Mongolia)","Монгол хэл (Монгол улс)‎"),a("mn-mong","Mongolian (Traditional Mongolian)","ᠮᠤᠨᠭᠭᠤᠯ ᠬᠡᠯᠡ"),a("mn-mong-cn","Mongolian (Traditional Mongolian, PRC)","ᠮᠤᠨᠭᠭᠤᠯ ᠬᠡᠯᠡ (ᠪᠦᠭᠦᠳᠡ ᠨᠠᠢᠷᠠᠮᠳᠠᠬᠤ ᠳᠤᠮᠳᠠᠳᠤ ᠠᠷᠠᠳ ᠣᠯᠣᠰ)‎"),a("moh","Mohawk","Kanien'kéha"),a("moh-ca","Mohawk (Mohawk)","Kanien'kéha"),a("mr","Marathi","मराठी"),a("mr-in","Marathi (India)","मराठी (भारत)‎"),a("ms","Malay","Bahasa Melayu"),a("ms-bn","Malay (Brunei Darussalam)","Bahasa Melayu (Brunei Darussalam)‎"),a("ms-my","Malay (Malaysia)","Bahasa Melayu (Malaysia)‎"),a("mt","Maltese","Malti"),a("mt-mt","Maltese (Malta)","Malti (Malta)‎"),a("nb","Norwegian (Bokmål)","norsk (bokmål)‎"),a("nb-no","Norwegian, Bokmål (Norway)","norsk, bokmål (Norge)‎"),a("ne","Nepali","नेपाली"),a("ne-np","Nepali (Nepal)","नेपाली (नेपाल)‎"),a("nl","Dutch","Nederlands"),a("nl-be","Dutch (Belgium)","Nederlands (België)‎"),a("nl-nl","Dutch (Netherlands)","Nederlands (Nederland)‎"),a("nn","Norwegian (Nynorsk)","norsk (nynorsk)‎"),a("nn-no","Norwegian, Nynorsk (Norway)","norsk, nynorsk (Noreg)‎"),a("no","Norwegian","norsk"),a("nso","Sesotho sa Leboa","Sesotho sa Leboa"),a("nso-za","Sesotho sa Leboa (South Africa)","Sesotho sa Leboa (Afrika Borwa)‎"),a("oc","Occitan","Occitan"),a("oc-fr","Occitan (France)","Occitan (França)‎"),a("or","Odia","ଓଡ଼ିଆ"),a("or-in","Odia (India)","ଓଡ଼ିଆ (ଭାରତ)‎"),a("pa","Punjabi","ਪੰਜਾਬੀ"),a("pa-in","Punjabi (India)","ਪੰਜਾਬੀ (ਭਾਰਤ)‎"),a("pl","Polish","polski"),a("pl-pl","Polish (Poland)","polski (Polska)‎"),a("prs","Dari","درى"),a("prs-af","Dari (Afghanistan)","درى (افغانستان)‏"),a("ps","Pashto","پښتو"),a("ps-af","Pashto (Afghanistan)","پښتو (افغانستان)‏"),a("pt","Portuguese","Português"),a("pt-br","Portuguese (Brazil)","Português (Brasil)‎"),a("pt-pt","Portuguese (Portugal)","português (Portugal)‎"),a("qps-ploc","Pseudo Language (Pseudo)","[Þšéųδô Ļāⁿĝüåġė (Ρŝέũδθ) !!! !!]"),a("qut","K'iche","K'iche"),a("qut-gt","K'iche (Guatemala)","K'iche (Guatemala)‎"),a("quz","Quechua","runasimi"),a("quz-bo","Quechua (Bolivia)","runasimi (Qullasuyu)‎"),a("quz-ec","Quechua (Ecuador)","runasimi (Ecuador)‎"),a("quz-pe","Quechua (Peru)","runasimi (Piruw)‎"),a("rm","Romansh","Rumantsch"),a("rm-ch","Romansh (Switzerland)","Rumantsch (Svizra)‎"),a("ro","Romanian","română"),a("ro-ro","Romanian (Romania)","română (România)‎"),a("ru","Russian","русский"),a("ru-ru","Russian (Russia)","русский (Россия)‎"),a("rw","Kinyarwanda","Kinyarwanda"),a("rw-rw","Kinyarwanda (Rwanda)","Kinyarwanda (Rwanda)‎"),a("sa","Sanskrit","संस्कृत"),a("sah","Sakha","саха"),a("sah-ru","Yakut (Russia)","саха (Россия)‎"),a("sa-in","Sanskrit (India)","संस्कृत (भारतम्)‎"),a("se","Sami (Northern)","davvisámegiella"),a("se-fi","Sami, Northern (Finland)","davvisámegiella (Suopma)‎"),a("se-no","Sami, Northern (Norway)","davvisámegiella (Norga)‎"),a("se-se","Sami, Northern (Sweden)","davvisámegiella (Ruoŧŧa)‎"),a("si","Sinhala","සිංහල"),a("si-lk","Sinhala (Sri Lanka)","සිංහල (ශ්‍රී ලංකා)‎"),a("sk","Slovak","slovenčina"),a("sk-sk","Slovak (Slovakia)","slovenčina (Slovenská republika)‎"),a("sl","Slovenian","slovenski"),a("sl-si","Slovenian (Slovenia)","slovenski (Slovenija)‎"),a("sma","Sami (Southern)","åarjelsaemiengiele"),a("sma-no","Sami, Southern (Norway)","åarjelsaemiengiele (Nöörje)‎"),a("sma-se","Sami, Southern (Sweden)","åarjelsaemiengiele (Sveerje)‎"),a("smj","Sami (Lule)","julevusámegiella"),a("smj-no","Sami, Lule (Norway)","julevusámegiella (Vuodna)‎"),a("smj-se","Sami, Lule (Sweden)","julevusámegiella (Svierik)‎"),a("smn","Sami (Inari)","sämikielâ"),a("smn-fi","Sami, Inari (Finland)","sämikielâ (Suomâ)‎"),a("sms","Sami (Skolt)","sääm´ǩiõll"),a("sms-fi","Sami, Skolt (Finland)","sääm´ǩiõll (Lää´ddjânnam)‎"),a("sq","Albanian","shqipe"),a("sq-al","Albanian (Albania)","shqipe (Shqipëria)‎"),a("sr","Serbian","srpski"),a("sr-cyrl","Serbian (Cyrillic)","српски"),a("sr-cyrl-ba","Serbian (Cyrillic, Bosnia and Herzegovina)","српски (Босна и Херцеговина)‎"),a("sr-cyrl-cs","Serbian (Cyrillic, Serbia and Montenegro (Former))","српски (Србија и Црна Гора (Претходно))‎"),a("sr-cyrl-me","Serbian (Cyrillic, Montenegro)","српски (Црна Гора)‎"),a("sr-cyrl-rs","Serbian (Cyrillic, Serbia)","српски (Србија)‎"),a("sr-latn","Serbian (Latin)","srpski"),a("sr-latn-ba","Serbian (Latin, Bosnia and Herzegovina)","srpski (Bosna i Hercegovina)‎"),a("sr-latn-cs","Serbian (Latin, Serbia and Montenegro (Former))","srpski (Srbija i Crna Gora (Prethodno))‎"),a("sr-latn-me","Serbian (Latin, Montenegro)","srpski (Crna Gora)‎"),a("sr-latn-rs","Serbian (Latin, Serbia)","srpski (Srbija)‎"),a("sv","Swedish","svenska"),a("sv-fi","Swedish (Finland)","svenska (Finland)‎"),a("sv-se","Swedish (Sweden)","svenska (Sverige)‎"),a("sw","Kiswahili","Kiswahili"),a("sw-ke","Kiswahili (Kenya)","Kiswahili (Kenya)‎"),a("syr","Syriac","ܣܘܪܝܝܐ"),a("syr-sy","Syriac (Syria)","ܣܘܪܝܝܐ (سوريا)‏"),a("ta","Tamil","தமிழ்"),a("ta-in","Tamil (India)","தமிழ் (இந்தியா)‎"),a("te","Telugu","తెలుగు"),a("te-in","Telugu (India)","తెలుగు (భారత దేశం)‎"),a("tg","Tajik","Тоҷикӣ"),a("tg-cyrl","Tajik (Cyrillic)","Тоҷикӣ"),a("tg-cyrl-tj","Tajik (Cyrillic, Tajikistan)","Тоҷикӣ (Тоҷикистон)‎"),a("th","Thai","ไทย"),a("th-th","Thai (Thailand)","ไทย (ไทย)‎"),a("tk","Turkmen","türkmençe"),a("tk-tm","Turkmen (Turkmenistan)","türkmençe (Türkmenistan)‎"),a("tn","Setswana","Setswana"),a("tn-za","Setswana (South Africa)","Setswana (Aforika Borwa)‎"),a("tr","Turkish","Türkçe"),a("tr-tr","Turkish (Turkey)","Türkçe (Türkiye)‎"),a("tt","Tatar","Татар"),a("tt-ru","Tatar (Russia)","Татар (Россия)‎"),a("tzm","Tamazight","Tamazight"),a("tzm-latn","Tamazight (Latin)","Tamazight"),a("tzm-latn-dz","Tamazight (Latin, Algeria)","Tamazight (Djazaïr)‎"),a("ug","Uyghur","ئۇيغۇرچە"),a("ug-cn","Uyghur (PRC)","ئۇيغۇرچە (جۇڭخۇا خەلق جۇمھۇرىيىتى)‏"),a("uk","Ukrainian","українська"),a("uk-ua","Ukrainian (Ukraine)","українська (Україна)‎"),a("ur","Urdu","اُردو"),a("ur-pk","Urdu (Islamic Republic of Pakistan)","اُردو (پاکستان)‏"),a("uz","Uzbek","U'zbek"),a("uz-cyrl","Uzbek (Cyrillic)","Ўзбек"),a("uz-cyrl-uz","Uzbek (Cyrillic, Uzbekistan)","Ўзбек (Ўзбекистон)‎"),a("uz-latn","Uzbek (Latin)","U'zbek"),a("uz-latn-uz","Uzbek (Latin, Uzbekistan)","U'zbek (U'zbekiston Respublikasi)‎"),a("vi","Vietnamese","Tiếng Việt"),a("vi-vn","Vietnamese (Vietnam)","Tiếng Việt (Việt Nam)‎"),a("wo","Wolof","Wolof"),a("wo-sn","Wolof (Senegal)","Wolof (Sénégal)‎"),a("xh","isiXhosa","isiXhosa"),a("xh-za","isiXhosa (South Africa)","isiXhosa (uMzantsi Afrika)‎"),a("yo","Yoruba","Yoruba"),a("yo-ng","Yoruba (Nigeria)","Yoruba (Nigeria)‎"),a("zh","Chinese","中文"),a("zh-cn","Chinese (Simplified, PRC)","中文(中华人民共和国)‎"),a("zh-hans","Chinese (Simplified)","中文(简体)‎"),a("zh-hant","Chinese (Traditional)","中文(繁體)‎"),a("zh-hk","Chinese (Traditional, Hong Kong S.A.R.)","中文(香港特別行政區)‎"),a("zh-mo","Chinese (Traditional, Macao S.A.R.)","中文(澳門特別行政區)‎"),a("zh-sg","Chinese (Simplified, Singapore)","中文(新加坡)‎"),a("zh-tw","Chinese (Traditional, Taiwan)","中文(台灣)‎"),a("zu","isiZulu","isiZulu"),a("zu-za","isiZulu (South Africa)","isiZulu (iNingizimu Afrika)‎"),e.widget("fxs.fxsLanguagePicker",t,{options:{selectableCultures:[],selectedCulture:null},_selectableCulturesGroupedByLanguage:null,_create:function(){var e=this.options.selectableCultures,t=this.options.selectedCulture;e=e||[],r&&(r.supportedLocales&&e.length===0&&(e=r.supportedLocales),r.locale&&!t&&e&&e.indexOf(r.locale)!==-1&&(t=r.locale)),this.element.addClass("fxs-languagepicker"),this._setOption("selectableCultures",e),this._setOption("selectedCulture",t),o._create.call(this,this.getNativeName,this.getEnglishName)},_destroy:function(){this.element.removeClass("fxs-languagepicker"),this._super()},_validateOptions:function(t,n){e.each(t,function(e,t){if(!u[t])throw"The culture '{0}' is not a supported culture.".format(t)});if(n&&t.indexOf(n)===-1)throw"The selected culture '{0}' is not a selectable culture.".format(n)},_setOption:function(e,t){return e==="selectableCultures"?(this._validateOptions(t,this.options.selectedCulture),this._selectableCulturesGroupedByLanguage=null,o._setSelectableItems.call(this,t)):e==="selectedCulture"&&(this._validateOptions(this.options.selectableCultures,t),o._setSelectedItem.call(this,t)),o._setOption.apply(this,arguments)},getNativeName:function(e){var t=this._getViewModel().selectableItems(),n,r,i,s,o;if(!this._selectableCulturesGroupedByLanguage){this._selectableCulturesGroupedByLanguage={};for(n=0;n<t.length;n++)r=t[n],i=r.split("-")[0],this._selectableCulturesGroupedByLanguage[i]||(this._selectableCulturesGroupedByLanguage[i]=[]),this._selectableCulturesGroupedByLanguage[i].push(r)}if(!u[e])o=e;else{o=u[e].nativeName,i=e.split("-")[0];if(!this._selectableCulturesGroupedByLanguage[i]||this._selectableCulturesGroupedByLanguage[i].length<=1)s=o.indexOf("("),s!==-1&&(o=o.substring(0,s-1))}return o},getEnglishName:function(e){return u[e]?u[e].englishName:e}})}(jQuery,jQuery.fxs.fxsPicker,this,this.fx.environment,this.fx.utilities),function(e,t,n,r,i,s,o,u){var a=t.prototype,f="fxs.fxsContextMenu",l="fxs-contextmenu",c="fxs-contextmenu-item",h="fxs-contextmenu-item-hover",p="fxs-contextmenu-separator",d="fxs-contextmenu-shown",v="fxs-contextmenu-item-disabled",m="fxs-contextmenu-languagepicker",g="fxs-contextmenu-languagepicker-item",y="fxs-contextmenu-languagepicker-selected",b="fxs-contextmenu-hidden",w="fxs-contextmenu",E=0,S={},x=[],T={};e.widget(f,t,{options:{visible:!0,items:[],showBy:null,position:null,animateDuration:300},_viewModel:null,_create:function(){this._setViewModel(new e.fxs.fxsContextMenu.ContextMenu),this.element.addClass(l),this.options.showBy!==null?this._positionProximal(this.options.showBy):this.options.position!==null&&this._position(this.options.position.left,this.options.position.top),this._renderItems(),this.options.visible||this.element.addClass(b),o.applyBindings({data:this._viewModel,func:this},this.element[0]),a._create.call(this)},_destroy:function(){this.element.empty().removeClass(l).removeClass(b),this._super()},_positionProximal:function(e){var t=e.position(),n=e.height();this._position(t.left,t.top+(n+20))},_position:function(e,t){this.element.addClass(d).css("left",e).css("top",t)},_renderItems:function(){var e=[],t,n;for(E=0;E<this.options.items.length;E++){n=this.options.items[E];switch(n.type){case"separator":t={text:"separator"+E,value:"separator"+E},T[E]=!0;break;case"languagepicker":t={text:"languagepicker"+E,value:"languagepicker"+E},S[E]=!0;break;case"text":t={text:n.text,value:n.text};break;default:t={text:n.text,value:n.text}}e.push(t),n.disabled&&x.push(t)}this._initListControl(e,x,this)},_initListControl:function(t,n,r){var i;i=e("<div />").fxItemList({name:w,values:t,disabledValues:n}),i.find("ul > li").each(function(t){var i=e(this).addClass(c),s=e("<a />").attr("href","#").html(i.html());n[t]||i.html(s),r.options.items[t].setup&&r.options.items[t].setup(i),T[t]&&i.text("").addClass(p),i.attr("aria-disabled")==="true"?i.addClass(v).click(function(){return!1}):(i.on("click","a",function(e){var n=r.options.items[t].click;n&&n(this),e.preventDefault()}),r.options.items[t].type!=="languagepicker"&&i.hover(function(){e(this).addClass(h)},function(){e(this).removeClass(h)})),S[t]&&(r._createLanguagePicker(r.options.items[t],r,i),i.addClass(g))}),S={},T={},r.element.append(i)},_createLanguagePicker:function(t,n,r){var i=t,s=e("<div />").fxsLanguagePicker().addClass(m),o=[],u,a=e("<span />"),f=s.find("select");f.find("option").each(function(t){var n=e(this).attr("value");o.push({value:n,title:e(this).attr("title"),text:e(this).text(),selected:n===f.val()?!0:!1})}),u=e("<div />").fxItemList({name:"fx-languagelist",values:o}),u.find("li").each(function(t){var r=e(this),i=e("<a />").attr("href","#").html(r.html());r.html(i),r.attr("data-val-culture",o[t].value),r.on("click","a",function(t){n._selectLanguage(e(this).parent().attr("data-val-culture")),t.preventDefault()}),o[t].selected&&r.addClass(y)}),u.prepend(a.text(i.label)),r.html(u)},_selectLanguage:function(e){var t=s.getUrlWithQueryStringParameter(n.location.href,r.localeQueryStringParameterName,e);Shell.Diagnostics.Telemetry.customEvent("Language","HeaderBarMenu",e),n.location.hash&&(t=s.getUrlWithQueryStringParameter(t,r.fragmentQueryStringParameterName,n.location.hash.substr(1)),t=t.substr(0,t.lastIndexOf("#"))),n.location.href=t},show:function(){this.element.removeClass(b),this.options.visible=!0},showAnimate:function(){this.element.slideDown(this.options.animateDuration).removeClass(b),this.options.visible=!0},hide:function(){this.element.addClass(b),this.options.visible=!1},hideAnimate:function(){this.element.slideUp(this.options.animateDuration).addClass(b),this.options.visible=!1},toggleVisibility:function(){this.options.visible?this.hide():this.show()},position:function(e,t){this._position(e,t)},visible:function(){return this.options.visible},getViewModel:function(){return this._viewModel},getActiveLocale:function(){return this.element.find(".fxs-contextmenu-languagepicker-selected").attr("data-val-culture")},_setViewModel:function(e){this._viewModel=e}}),e.fxs.fxsContextMenu.ContextMenu=function(){this.items=o.observable([])},e.fxs.fxsContextMenu.Item=function(){this.text=o.observable(""),this.enabled=o.observable(!0),this.visible=o.observable(!0),this.click=o.observable(e.noop)}}(jQuery,jQuery.Widget,this,this.fx.environment,this.fx.resources,this.fx.utilities,ko),function(e,t,n,r,i){var s=t.prototype,o="fxs.fxsAvatarBar",u="fxs-avatarbar",a="fxs-avatarbar-large",f="fxs-avatarbar-menu",l="fxs-avatarbar-active",c="<a href='#' class='fxs-avatarbar-link'><div class='fxs-avatarbar-image'></div><span class='fxs-avatarbar-text' data-bind='text: data.name'></span></a><div class='"+f+"'></div>";e.widget(o,t,{options:{name:"",menuItems:[],large:!1},_viewModel:null,_subscriptions:null,_clickHandler:null,_globalClickHandler:null,_isOpeningMenu:!1,_create:function(){var t=this;this._setViewModel(new e.fxs.fxsAvatarBar.AvatarBar),this._setOption("name",this.options.name),this._setOption("large",this.options.large),this.element.addClass(u).html(c).on("click","a.fxs-avatarbar-link",this._clickHandler=function(e){t._viewModel.menuOpen()?(t.closeMenu(),Shell.Diagnostics.Telemetry.customEvent("Close","HeaderBarMenu")):(t.openMenu(),t._isOpeningMenu=!0,Shell.Diagnostics.Telemetry.customEvent("Open","HeaderBarMenu")),e.preventDefault()}),n.applyBindings({data:this._viewModel,func:this},this.element[0]),this._setOption("menuItems",this.options.menuItems),e("html").on("click",this._globalClickHandler=function(){t._globalClick()}),s._create.call(this)},_destroy:function(){this.element.empty().removeClass(u+" "+a+" "+l),this._clickHandler&&(this.element.off("click",this._clickHandler),this._clickHandler=null),this._globalClickHandler&&(e("html").off("click",this._globalClickHandler),this._globalClickHandler=null),this._unsubscribe(),this._super()},openMenu:function(){var e=this.element.find("."+f),t=this.element.find("a.fxs-avatarbar-link"),n=t.position(),r,i;r=n.top+t.outerHeight(),i=n.left+t.outerWidth()-e.outerWidth(),e.fxsContextMenu("position",i,r),this._viewModel.menuOpen(!0)},closeMenu:function(){this._viewModel.menuOpen(!1)},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_globalClick:function(){this._isOpeningMenu?this._isOpeningMenu=!1:this._viewModel.menuOpen(!1)},_setupMenu:function(){var e=this.element.find(".fxs-avatarbar-menu");e.is(":data(fxs-fxsContextMenu)")&&e.fxsContextMenu("destroy"),e.fxsContextMenu({items:this.options.menuItems,visible:!1})},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this;this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.large.subscribe(function(e){var n=t.element.find(".fxs-avatarbar-menu"),r=n.position(),i,s,o;t.element.toggleClass(a,e),t._viewModel.menuOpen()&&(i=t.element,s=i.position(),o=s.top+i.height(),n.fxsContextMenu("position",r.left,o))})),e.large.notifySubscribers(e.large()),this._subscriptions.push(e.menuOpen.subscribe(function(e){e?t.element.addClass(l).find(".fxs-avatarbar-menu").fxsContextMenu("showAnimate"):t.element.removeClass(l).find(".fxs-avatarbar-menu").fxsContextMenu("hideAnimate")})),e.menuOpen.notifySubscribers(e.menuOpen())},_setOption:function(e,t){var n=s._setOption.apply(this,arguments);switch(e){case"menuItems":this._setupMenu();break;case"name":case"large":this._viewModel[e](t)}return n}}),e.fxs.fxsAvatarBar.AvatarBar=function(){this.name=n.observable(""),this.large=n.observable(!1),this.menuOpen=n.observable(!1)}}(jQuery,jQuery.Widget,ko,this),function(e,t,n,r,i,s){var o=t.prototype,u="fxs.fxsHeaderBar",a="fxs-headerbar",f="fxs-headerbar-controls",l="fxs-headerbar-avatarbar",c="fxs-headerbar-expanded",h="<div class='fxs-headerbar-navigation'><div class='fxs-headerbar-navigation-wrapper'><a data-bind='attr: { href: data.logoUrl }' class='fxs-headerbar-navigation-logo'><img data-bind='attr: { src: data.logo, alt: data.logoAltText }' /></a><a href='#' class='fxs-headerbar-navigation-expander' data-bind='attr: { title: data.expanded() ? text.expanderCollapseImageAlt : text.expanderExpandImageAlt }'><img data-bind='attr: { src: data.expanded() ? url.expanderCollapseImageUrl : url.expanderExpandImageUrl, alt: data.expanded() ? text.expanderCollapseImageAlt : text.expanderExpandImageAlt }' /></a></div><nav><ul class='fxs-headerbar-navigation-menu' data-bind='foreach: data.menuItems'><li><a data-bind='attr: { href: href }, text: text'></a></li></ul></nav></div><div class='fxs-headerbar-controls-parent'><div class='"+f+"'></div>"+"<div class='"+l+"'></div>"+"</div>";e.widget(u,t,{options:{logo:"",logoAltText:"",logoUrl:"",avatarBar:null,controls:[],menuItems:[],expanded:!1,class_:n.getClasses(u),text:n.getStrings(u)},_viewModel:null,_subscriptions:null,_clickHandler:null,_globalClickHandler:null,_create:function(){var t=this;this._setViewModel(new e.fxs.fxsHeaderBar.HeaderBar),this._setOption("menuItems",this.options.menuItems),this._setOption("logo",this.options.logo),this._setOption("logoAltText",this.options.logo),this._setOption("logoUrl",this.options.logoUrl),this._setOption("expanded",this.options.expanded),this.element.addClass(a).html(h).on("click","a.fxs-headerbar-navigation-expander",this._clickHandler=function(e){t._viewModel.expanded(!t._viewModel.expanded()),e.preventDefault(),e.stopPropagation(),t._viewModel.expanded()?Shell.Diagnostics.Telemetry.customEvent("MaximizerOpen","HeaderBar"):Shell.Diagnostics.Telemetry.customEvent("MaximizerClose","HeaderBar")}),r.applyBindings({data:this._viewModel,func:this,text:this.options.text,class_:this.options.class_},this.element[0]),this._setOption("avatarBar",this.options.avatarBar)._setOption("controls",this.options.controls),e("html").on("click",this._globalClickHandler=function(e){t._globalClick(e)}),o._create.call(this)},_destroy:function(){this.element.empty().removeClass(a),this._clickHandler&&(this.element.off("click",this._clickHandler),this._clickHandler=null),this._globalClickHandler&&(e("html").off("click",this._globalClickHandler),this._globalClickHandler=null),this._super()},getViewModel:function(){return this._viewModel},addControl:function(e){this.element.find("."+f).append(e)},_setControls:function(t){var n=this.element.find("."+f);n.empty(),e.each(t,function(e,t){n.append(t)})},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_setupAvatarBar:function(e){this.element.find("."+l).empty().append(e)},_globalClick:function(t){e.contains(this.element,t.target)||this._viewModel.expanded(!1)},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this;this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.expanded.subscribe(function(e){t.element.toggleClass(c,e),t._viewModel.avatarBarModel&&t._viewModel.avatarBarModel.large(e)})),e.expanded.notifySubscribers(e.expanded())},_setOption:function(e,t){var n=o._setOption.apply(this,arguments);switch(e){case"avatarBar":this._setupAvatarBar(t),t?(this._viewModel.avatarBarModel=t.fxsAvatarBar("getViewModel"),this._viewModel.expanded.notifySubscribers(this._viewModel.expanded())):this._viewModel.avatarBarModel=null;break;case"controls":this._setControls(t);break;case"logo":case"logoAltText":case"logoUrl":case"menuItems":case"expanded":this._viewModel[e](t)}return n}}),e.fxs.fxsHeaderBar.HeaderBar=function(){this.avatarBarModel=null,this.menuItems=r.observableArray(),this.expanded=r.observable(!0),this.logo=r.observable(""),this.logoAltText=r.observable(""),this.logoUrl=r.observable("")}}(jQuery,jQuery.Widget,this.fx.resources,ko,this),function(e,t,n,r,i,s){function u(){var r=t("#fxshell-navpane");r.length===1&&(r.navigation(),e.onhashchange=function(t){var r=e.location,i;n.Diagnostics.Telemetry.traceNavigation(),a(r.hash),i=n.UI.Navigation.cdmNavigateTo(r.hash);if(typeof i=="string")return r.hash=i,!1})}function a(e){var t=null,n=e.split("/");n.length>2?(t=n[n.length-1],t!=="ViewExperiment"&&window.newExperimentGeneration&&(window.newExperimentGeneration=null)):window.newExperimentGeneration&&(window.newExperimentGeneration=null)}function f(){var e=n.Environment.getDevelopmentMode();e&&(o=t("#fxshell-diagnosticDialog").logviewer({width:"60em",height:"230",zIndex:2e3,maxHeight:"600",position:["right","bottom"],autoOpen:!1,showLogOnError:e}),t("body").on("keypress",function(e){e.which===126&&o.logviewer("open")}))}function c(){var e=t("#fxshell-wallpaper"),n=t("#fxshell-wallpaper-a"),i=t("#fxshell-wallpaper-b");e.data("background-index","0"),t("#fxshell-wallpaper").dblclick(function(){var t=["wallpaper-white.png","wallpaper-textureblue.jpg","wallpaper-texturegrey.jpg","wallpaper-bluelights.jpg","wallpaper-rainbow.jpg"],s=function(){n.css("background-image",u).css("opacity",1),i.css("background-image",null)},o=(parseInt(e.data("background-index"),10)+1)%t.length,u="url("+r.getContentUrl("Content/Images/"+t[o])+")";i.css("background-image",u),n.stop(!0,!0).animate({opacity:0},500,s),e.data("background-index",o)})}function h(){function f(){o=n.scrollLeft(),u=n.width(),a=i.width(),u<a?(i.css({position:"static",boxShadow:"0 0"}),s.css({display:"none"}),r.css({left:-o,marginLeft:0})):(i.css({position:"",boxShadow:""}),s.css({display:""}),r.css({left:"",marginLeft:""}))}var n=t(e),r=t("#headerbar-wrapper, #fxshell-navpane, #aux-foreground, #drawer, .preview-positioner"),i=t("#aux-foreground"),s=t("#fxshell-wallpaper"),o,u,a;n.scroll(f).resize(f),f()}function p(){t("#drawer").on("fxsdraweropenhelp",function(){n.Diagnostics.Telemetry.traceEvent("help")}).on("fxsdrawermenuquickcreate fxsdrawermenuactionexecute",function(e,t){n.Diagnostics.Telemetry.traceEvent("drawer",t.extension,t.path)})}function d(){u(),f(),c(),h(),p(),Impl.UI.HeaderBar.initialize();var e=i.Services.get("loggingService");e&&e.setLogViewer(o),n.Diagnostics.Log.writeEntry("webbrowserhost.LogSessionId","Page request ID is "+n.Environment.getPageRequestId(),n.Diagnostics.LogEntryLevel.information)}var o=null;l.done(function(){d()})}(this,jQuery,Shell,this.fx.resources,Impl),function(e,t,n){function o(){return r.accountUrl}function u(){return r.applicationRoot}function a(){return r.developmentMode}function f(){return r.isOnPremMode}function l(){return r.isAdminMode}function c(){return r.navigationLinks}function h(){return r.portalVersion}function p(){return r.userEmailAddress}function d(){return r.userFirstName}function v(){return r.branding}function m(){return r.enableHelpDrawer}function g(){return r.signOutLink}function y(){return r.feedbackLink}function b(){return r.isTelemetryEventDisabled}function w(){if(!i){i={};if(r.betaFeatures)for(var e=0;e<r.betaFeatures.length;e++)i[r.betaFeatures[e].extensionName]=r.betaFeatures[e].featureName}return i}function E(){return r.betaSignUpUrl}function S(){return r.productionPortalUrl}function x(){return r.pageRequestId}function T(e){return e=e||"",s+e}var r={},i,s="";e.environment&&(r=e.environment,s=r.staticContentRootUrl||""),t.Namespace.define("Impl.Environment",{getApplicationRoot:u,getDevelopmentMode:a,getIsOnPremMode:f,getIsAdminMode:l,getNavigationLinks:c,getPortalVersion:h,getUserEmailAddress:p,getUserFirstName:d,getEnableHelpDrawer:m,getBranding:v,getSignOutLink:g,getFeedbackLink:y,getIsTelemetryEventDisabled:b,getBetaFeatures:w,getBetaSignUpUrl:E,getAccountUrl:o,getProductionPortalUrl:S,getPageRequestId:x,getUrl:T})}(this,Shell),function(e,t,n,r,i,s){var o;o=n.Class.define(function(){var e=this;i.onDocumentUnload(function(){e._eventQueue.length>0&&e._sendEventsToServer()})},{_logViewer:null,_sendTimeoutMs:1e4,_maxQueuedEvents:50,_eventQueue:[],_eventsBeingSentToServer:[],_sendTimer:null,_outstandingRequestToServer:null,_throttleNextRequest:!1,_isRequestToServerThrottleTimer:null,writeEntry:function(e,n,r,i){var s=r===Shell.Diagnostics.LogEntryLevel.error,o={};this._logViewer!==null&&this._logViewer.logviewer("addEntry",n,r),i=this._getDataObject(i),t.extend(o,{message:n,eventKey:e},i),this._logData(r,o,s)},exception:function(e,n,r,i,s){var o={};s=this._getDataObject(s),t.extend(o,{isHandledException:e,type:n,stackTrace:r,stringRepresentation:i},s),this._logData("exception",o)},startup:function(e,n,r,i,s,o){var u={};o=this._getDataObject(o),t.extend(u,{secondsDuration:e,successfulDownloadCount:n,failedDownloadCount:r,failedDownloadSummary:i,downloadMetricsSummary:s},o),this._logData("startup",u)},viewSwitch:function(e,n,r,i){var s={};i=this._getDataObject(i),t.extend(s,{fromView:e,toView:n,totalSeconds:r},i),this._logData("viewSwitch",s)},clientAction:function(e,n,r,i){var s={};i=this._getDataObject(i),t.extend(s,{action:e,scenarioCorrelationId:n,selectedEntity:r},i),this._logData("clientAction",s)},customEvent:function(e,n,r){var i={};r=this._getDataObject(r),t.extend(i,{customEventType:n,eventKey:e},r),this._logData("customEvent",i)},clientScenario:function(e,n,r,i,s,o,u){var a={};u=this._getDataObject(u),t.extend(a,{scenarioCorrelationId:e,scenarioName:n,entityType:r,completionReason:i,userSeconds:s,endToEndSeconds:o},u),this._logData("clientScenario",a)},performance:function(e,n,r,i){var s={};i=this._getDataObject(i),t.extend(s,{key:e,time:n,message:r},i),this._logData("performance",s)},feedbackInfo:function(e,n){var r={};n=this._getDataObject(n),t.extend(r,{comments:e},n),this._logData("feedbackInfo",r,!0)},featureUsage:function(e,n,r,i,s,o,u,a){var f={};a=this._getDataObjectAsString(a),t.extend(f,{featureId:e,featureName:n,groupId:r,groupName:i,workspaceId:s,experimentId:o,moduleId:u},a),this._logData("featureUsage",f)},setLogViewer:function(e){this._logViewer=e},_getDataObjectAsString:function(e){switch(typeof e){case"object":return{data:JSON.stringify(e)};case"undefined":return"";case"string":return{data:e};default:return{data:e.toString()}}},_getDataObject:function(e){var t,n;switch(typeof e){case"object":if(e instanceof Array){n={};for(t=0;t<e.length;t++)n["data"+t]=e[t];return n}return e;case"undefined":return{};case"string":return{data:e};default:return{data:e.toString()}}},_logData:function(e,r,i){var s=o._methodToEventIdMap[e],u=n.Environment.getIsTelemetryEventDisabled();if(!u||!u[s-450])this._eventQueue.push(t.extend(r,{eventId:s},this._getCommonLoggingData())),this._sendEventsToServerIfNecessary(i)},_sendEventsToServerIfNecessary:function(t){var n=this;!this._isRequestToServerThrottleTimer&&!this._outstandingRequestToServer&&this._eventQueue.length>0&&(this._eventQueue.length>=this._maxQueuedEvents||t?this._sendEventsToServer():this._sendTimer||(this._sendTimer=e.setTimeout(function(){n._sendEventsToServer()},this._sendTimeoutMs)))},_throttleIfNecessary:function(){var t=!1,n=this;return n._isRequestToServerThrottleTimer?t=!0:n._throttleNextRequest&&(n._isRequestToServerThrottleTimer=e.setTimeout(function(){n._isRequestToServerThrottleTimer=null,n._sendEventsToServer()},n._sendTimeoutMs),n._throttleNextRequest=!1,t=!0),t},_sendEventsToServer:function(){if(this._throttleIfNecessary())return;var r=this,i=r._eventsBeingSentToServer=r._eventQueue.splice(0,r._maxQueuedEvents);r._outstandingRequestToServer=n.Net.ajax({type:"POST",url:o._postDataUrl,data:r._getPostString(),logFunction:t.noop,suppressSuccessLogging:!0}).fail(function(){r._eventQueue=i.concat(r._eventQueue),r._throttleNextRequest=!0}).always(function(){r._outstandingRequestToServer=null,r._sendEventsToServerIfNecessary()}),e.clearTimeout(r._sendTimer),r._sendTimer=null,r._eventsBeingSentToServer=[]},_getPostString:function(){var e="",t,n,r,i,s,u,a;for(i=0;i<this._eventsBeingSentToServer.length;i++){t=this._eventsBeingSentToServer[i],n=o._handlerArgName+"["+i+"][",s=0;for(r in t)t.hasOwnProperty(r)&&(u=this._encodeText(r),a=this._encodeText(t[r]),e+=n+s+"].Key="+u+"&",e+=n+s+"].Value="+a+"&",s++)}return e.slice(0,-1)},_encodeText:function(e){var t=e===s||e===null?"":(e+"").replace(/([&<>"])/g,this._getReplacementEntity);return encodeURIComponent(t)},_getReplacementEntity:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return t[e]},_getCommonLoggingData:function(){return{pageRequestId:n.Environment.getPageRequestId(),url:e.location.href,clientDateTime:(new Date).toUTCString()}}},{_methodToEventIdMap:{error:451,information:452,exception:453,startup:454,viewSwitch:456,clientAction:457,clientScenario:458,customEvent:459,warning:460,verbose:461,performance:462,feedbackInfo:463,featureUsage:464},_postDataUrl:"/LoggingService/PostData",_handlerArgName:"evts"}),r.Services.add("loggingService",new o)}(this,jQuery,Shell,Impl,this.Host),function(e,t,n,r,i,s,o){var u=t.prototype,a="fxs.fxsNotification",f=0,l="__fxs-notification",c=function(){return l+f++},h="<div class='fxs-notification-actions'><ul class='fxs-notification-buttons'><li data-bind='visible: func._hasDetails.call(func) && !data.detailsShowing()' class='fxs-notification-detailsbutton'><button class='fxs-notification-button' data-bind='activateWidget: \"fxButton\", fxcontrol-options: { class_: class_.details, selector: \"span.sprite\" }'><span class='sprite'></span><span class='fxs-notification-button-text' data-bind='text: text.details'></span></button></li><!-- ko foreach: data.actions --><li><button class='fxs-notification-button' data-bind='activateWidget: \"fxButton\", fxcontrol-options: jQuery.extend({}, $data, { selector: \"span.sprite\" })'><span class='sprite'></span><span class='fxs-notification-button-text' data-bind='text: text'></span></button></li><!-- /ko --></ul></div><div class='fxs-notification-summary' aria-live='polite'><div class='fxs-notification-status' data-bind='if: class_[data.status()]'><span data-bind='attr: { class: \"sprite \" + class_[data.status()] }'></span></div><div class='fxs-notification-header' data-bind='safeMarkup: data.title'></div></div><div class='fxs-notification-details'><div class='fxs-notification-title'><button class='fxs-notification-back'><span class='sprite'></span></button><div class='fxs-notification-header' data-bind='safeMarkup: text.back'></div></div><!-- ko if: data.detailsText --><!-- ko ifnot: data.detailsUseHtml --><div data-bind='safeMarkup: data.detailsText' class='fxs-notification-details-text'></div><!-- /ko --><!-- ko if: data.detailsUseHtml --><div data-bind='html: data.detailsText' class='fxs-notification-details-text'></div><!-- /ko --><!-- /ko --><!-- ko template: { 'if': data.detailsUrl, afterRender: func._iFrameRender } --><div class='fxs-notification-details-iframe'><iframe frameborder='0' data-bind='attr: { src: data.detailsUrl }'></iframe></div><!-- /ko --></div>";e.widget(a,t,{options:{title:"",status:"",detailsText:"",detailsUrl:"",actions:[],class_:r.getClasses(a),text:r.getStrings(a),detailsUseHtml:!1},_viewModel:null,_subscriptions:null,_backClickHandler:null,_detailsClickHandler:null,_create:function(){var t=this,n=c();this._setViewModel(new e.fxs.fxsNotification.Notification),this.element.attr({"aria-live":"polite","aria-describedby":n}).addClass("fxs-notification").html(h).find(".fxs-notification-summary").attr("id",n).end().find(".fxs-notification-back span.sprite").addClass(this.options.class_.back).end().on("click","button.fxs-notification-back",this._backClickHandler=function(e){t._viewModel.detailsShowing(!1),e.preventDefault()}).on("click",".fxs-notification-detailsbutton",this._detailsClickHandler=function(e){t._viewModel.detailsShowing(!0),e.preventDefault()}),this._setOption("title",this.options.title),this._setOption("status",this.options.status),this._setOption("detailsText",this.options.detailsText),this._setOption("detailsUrl",this.options.detailsUrl),this._setOption("actions",this.options.actions),this._setOption("detailsUseHtml",this.options.detailsUseHtml),i.applyBindings({data:this._viewModel,class_:this.options.class_,text:this.options.text,func:this},this.element[0]),u._create.call(this)},_destroy:function(){this.element.empty().removeClass("fxs-notification fxs-notification-hasdetails").removeAttr("role aria-live aria-describedby"),this._backClickHandler&&(this.element.off("click",this._backClickHandler),this._backClickHandler=null),this._detailsClickHandler&&(this.element.off("click",this._detailsClickHandler),this._detailsClickHandler=null),this._unsubscribe(),this._super()},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_iFrameRender:function(t){var n=e(t[0]).find("iframe");n[0].allowTransparency=!0,n.on("load",function(){e(this).addClass("fxs-notification-details-iframe-loaded")})},_hasDetails:function(){var e=this._viewModel.detailsText(),t=this._viewModel.detailsUrl();return e!==null&&e!==""||t!==null&&t!==""},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this,n=function(){var e=t._hasDetails();t.element.toggleClass("fxs-notification-hasdetails",e),e||t._viewModel.detailsShowing(!1)},r=function(e){t.element.toggleClass("fxs-notification-showingdetails",e)};this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.status.subscribe(function(e){e==="warning"||e==="error"?t.element.attr("role","alert"):t.element.attr("role","status")})),e.status.notifySubscribers(e.status()),this._subscriptions.push(e.detailsText.subscribe(n)),this._subscriptions.push(e.detailsUrl.subscribe(n)),this._subscriptions.push(e.detailsShowing.subscribe(r)),this._subscriptions.push(e.detailsUseHtml.subscribe(n)),e.detailsText.notifySubscribers(e.detailsText()),e.detailsUrl.notifySubscribers(e.detailsUrl()),e.detailsUrl.notifySubscribers(e.detailsShowing()),e.detailsUseHtml.notifySubscribers(e.detailsUseHtml()),this._subscriptions.push(e.title.subscribe(function(e){t.element.find(".fxs-notification-header").attr("title",s.getText(e))})),e.title.notifySubscribers(e.title())},_setOption:function(e,t){var n=u._setOption.apply(this,arguments);switch(e){case"title":case"status":case"detailsText":case"detailsUrl":case"actions":case"detailsUseHtml":this._viewModel[e](t)}return n}}),e.fxs.fxsNotification.NotificationStatus={information:"information",warning:"warning",error:"error"},e.fxs.fxsNotification.Notification=function(){this.title=i.observable(""),this.status=i.observable(),this.detailsText=i.observable(""),this.detailsUrl=i.observable(""),this.actions=i.observableArray(),this.detailsShowing=i.observable(!1),this.detailsUseHtml=i.observable(!1)}}(jQuery,jQuery.Widget,Shell,this.fx.resources,ko,Shell.Utilities.SafeMarkup),function(e,t,n,r){var i=t.Communication.Receiver.getReceiver(),s=function(){},o=s,u=t.Environment.getDevelopmentMode&&t.Environment.getDevelopmentMode(),a=function(){var e=n.Services.get("loggingService");if(!e)throw"logging service not found";return e},f=function(t,n,r,i,s){var o=e.dcsMultiTrack,a=e.location,f,l,c;o&&!u&&(t?(f=a.pathname+a.hash,l="0",c=a.host+f):(f=a.pathname,l="1",c=null),o("DCS.dcssip",a.host,"DCS.dcsuri",f,"WT.dl",l,"DCSext.wtEvtSrc",c,"WT.z_source",n,"WT.z_extension",r,"WT.z_action",i,"WT.z_context",s))},l=t.Namespace.define("Impl.Diagnostics.Log",{writeEntry:function(e,t,n,r){o(e,t,n,r),a().writeEntry(e,t,n,r)},exception:function(e,t,n,r,i){o(t,"Exception","error",[e,r,i]),a().exception(e,t,n,r,i)},startup:function(e,t,n,r,i,s){a().startup(e,t,n,r,i,s)},viewSwitch:function(e,t,n,r){a().viewSwitch(e,t,n,r)},clientAction:function(e,t,n,r){a().clientAction(e,t,n,r)},customEvent:function(e,t,n){a().customEvent(e,t,n)},clientScenario:function(e,t,n,r,i,s,o){a().clientScenario(e,t,n,r,i,s,o)},performance:function(e,t,n,r){a().performance(e,t,n,r)},traceEvent:function(e,t,n,r){f(!1,e,t,n,r)},traceNavigation:function(){f(!0)},feedbackInfo:function(e,t){a().feedbackInfo(e,t)},featureUsage:function(e,t,n,r,i,s,o,u){a().featureUsage(e,t,n,r,i,s,o,u)}});(function(){if(t.Environment&&t.Environment.getDevelopmentMode&&t.Environment.getDevelopmentMode()&&t.Diagnostics&&t.Diagnostics.LogEntryLevel){var n=t.Diagnostics.LogEntryLevel,r=e.console,i;e.jQuery&&e.jQuery.cookie&&(i=e.jQuery.cookie("tracePattern")),r&&r.error&&r.info&&r.log&&r.warn&&(o=function(e,t,o,u){i&&e&&e.IndexOf(i)===-1?s():o===n.error?r.error(e,{message:t,data:u}):o===n.warning?r.warn(e,{message:t,data:u}):i&&r.info(e,{message:t,data:u})})}})(),i.addMethod("Impl.Diagnostics.Log.writeEntry",l.writeEntry),i.addMethod("Impl.Diagnostics.Log.exception",l.exception),i.addMethod("Impl.Diagnostics.Log.startup",l.startup),i.addMethod("Impl.Diagnostics.Log.viewSwitch",l.viewSwitch),i.addMethod("Impl.Diagnostics.Log.clientAction",l.clientAction),i.addMethod("Impl.Diagnostics.Log.customEvent",l.customEvent),i.addMethod("Impl.Diagnostics.Log.clientScenario",l.clientScenario),i.addMethod("Impl.Diagnostics.Log.performance",l.performance),i.addMethod("Impl.Diagnostics.Log.traceEvent",l.traceEvent),i.addMethod("Impl.Diagnostics.Log.traceNavigation",l.traceNavigation),i.addMethod("Impl.Diagnostics.Log.feedbackInfo",l.feedbackInfo),i.addMethod("Impl.Diagnostics.Log.featureUsage",l.featureUsage)}(this,Shell,Impl),function(e,t,n,r,i){function x(e,t){var n=e.complete,r=e.error,i=function(){t.releaseArgument(n),t.releaseArgument(r)};t.holdArgument(e),e.complete=function(){n.apply(this,arguments),i()},e.error=function(){r.apply(this,arguments),i()}}function T(e){var t=b;return function(){b===t&&e.apply(this,arguments)}}function N(e,t,n,r,i){l[e].call(this,t,T(n),T(r),i)}function C(e){return e===null||e===i}function k(e,t){return!C(e.path)&&(!t||typeof e.name=="string"&&e.name!==""&&e.hasOwnProperty("value"))}function L(t,n,r){var i=n&&typeof n.store=="string"&&n.store!==""&&(n.type==="User"||n.type==="Subscription"&&typeof n.subscriptionId=="string"&&n.subscriptionId!=="")&&e.isArray(n.settings)&&e.grep(n.settings,function(e){return!k(e,r)}).length===0;return i||t.error("arguments must be of the format {store, type, subscriptionid, settings {[{path, name}]}}."),i}function A(t,n){var r=n&&typeof n.store=="string"&&n.store!==""&&(n.type==="User"||n.type==="Subscription"&&typeof n.subscriptionId=="string"&&n.subscriptionId!=="")&&e.isArray(n.pathPrefixes);return r&&e.each(n.pathPrefixes,function(e,t){if(typeof t!="string")return r=!1,!1}),r||t.error("arguments must be of the format {store, type, subscriptionid, pathPrefixes:[<pathPrefixString>, ...]}]."),r}function O(e,t){return t.store!==E?(e.error("use of preloaded settings is currently limited to the 'Global' store."),!1):!0}function M(){f&&f.setEntry(a)}function _(e,t,n,r,i){return i.store===e&&i.type===t&&(i.subscriptionId===n||C(i.subscriptionId)&&C(n))&&i.path===r.path&&(i.name===r.name||C(i.name)&&C(r.name))}function D(e,t){var n,r;if(!H(e))for(n=0,r=e.value.length;n<r;n++)if(e.value[n].Name===t)return!0}function P(e,t,n,r,s,o,u,a){var f=!C(s.name),l,c,h,p,d,v,m,g;f&&(h={path:s.path},p=R(u,h));for(d=0,v=e.length;d<v;d++){m=e[d],g=m.hashCode;if(g===o&&_(t,n,r,s,m)){l=d;if(a||c!==i)break}if(f&&g===p&&_(t,n,r,h,m)&&D(m,s.name)){c=d;if(a||l!==i)break}}return{settingIndex:l,pathWildcardIndex:c}}function H(e){return e.value===null||e.value===y}function B(e,t){return(e&4294967295)+(t&4294967295)}function j(e,t){return e<<t|e>>>32-t}function F(e){var t=0,n;for(n=0;n<e.length;n++)t=B(j(t,7),e.charCodeAt(n));return t}function I(e,t,n){return F(q(e,t,n))}function q(e,t,n){return[e,t,n||"undefined"].join("/")}function R(e,t){var n=B(e,j(F(t.path),11));return C(t.name)||(n=B(n,j(F(t.name),23))),n}function U(t){var n=t.store,r=t.type,i=t.subscriptionId,s=I(n,r,i),o=t.settings,u=e.map(t.settings,function(e){return R(s,e)}),a,f,l,c=o.length,h,d=[];for(a=0,f=p.length;a<f;a++){h=p[a];for(l=0;l<c;l++)h.hashCode===u[l]&&_(n,r,i,o[l],h)&&!d[l]&&(d[l]=a)}return d}function z(e,t,n,r,i,s,o){var u;return e.length>=g&&e.splice(e.length-1,e.length-g+1),u={hashCode:o,store:t,type:n,subscriptionId:r,path:i.path,value:s,name:null,refreshTime:null},C(i.name)||(u.name=i.name),e.splice(0,0,u),u}function W(t,n,r,s,o,u,a,f,l){var c=R(a,o),h=P(t,n,r,s,o,c,a),p;h.settingIndex===i?l||(p=z(t,n,r,s,o,u,c)):(p=t[h.settingIndex],p.value=u),p&&f&&(p.refreshTime=f),C(o.name)?e.each(u,function(){var e={path:this.Path,name:this.Name};W(t,n,r,s,e,this,a,f,!0)}):h.pathWildcardIndex!==i&&(p=t[h.pathWildcardIndex],H(p)||e.each(p.value,function(e,t){if(t.Name===o.name)return p.value.splice(e,1,u),!1}))}function X(t,n){var r=[],i,s,o,u,a,f,l;if(!n)for(i=0,o=t.settings.length;i<o;i++)a=t.settings[i],r.push({setting:a,value:{Path:a.path,Name:a.name,Value:a.value}});else{n=e.isArray(n)?n:[n];for(i=0,o=t.settings.length;i<o;i++){a=t.settings[i];if(!C(a.name)){f=null;for(s=0,u=n.length;s<u;s++){l=n[s];if(l.Path===a.path&&l.Name===a.name){f=l;break}}}else{f=[];for(s=0,u=n.length;s<u;s++)l=n[s],l.Path===a.path&&f.push(l)}r.push({setting:a,value:f})}}return r}function V(e,t,n,r){var i=t.store,s=t.type,o=t.subscriptionId,u=I(i,s,o),a=X(t,r),f,l,c=!!r;for(f=0,l=a.length;f<l;f++)W(e,i,s,o,a[f].setting,a[f].value,u,n,c)}function $(){return(new Date).getTime()}function J(e,t,n,r,i,s){var o=I(e,t,n),u=R(o,{path:r,name:i}),a={hashCode:u,store:e,type:t,subscriptionId:n,path:r,name:i,value:s};p.push(a)}function K(e,t){var n=X(e,t),r=U(e),s,o,u,a=!!t,f=e.store,l=e.type,c=e.subscriptionId;for(s=0;s<n.length;s++)o=n[s].setting,u=n[s].value,r[s]===i?a||J(f,l,c,o.path,o.name,u):p[r[s]].value=u;M()}function Q(t,n,r,s,o,u,a,f,l){var c=R(u,o),h=P(t,n,r,s,o,c,u,!0),p=h.settingIndex!==i?h.settingIndex:h.pathWildcardIndex,d,v,m,g;if(p===i)return a&&f&&z(t,n,r,s,o,y,c),!1;m=t[p],a&&(t.splice(p,1),t.splice(0,0,m));if(m.value===y)return!1;if(a&&f&&(!m.refreshTime||m.refreshTime<w))return!1;if(e.isArray(m.value))for(d=0,v=m.value.length;d<v;d++){g=m.value[d];if(C(o.name)||g.Name===o.name){l.push(g);if(g.Name===o.name)break}}else m.value&&typeof m.value=="object"&&l.push(m.value);return!0}function G(e,t,n,r,i){var s=t.store,o=t.type,u=t.subscriptionId,a=I(s,o,u),f=[],l,c,h;for(l=0;l<t.settings.length;l++)c=t.settings[l],!Q(e,s,o,u,c,a,n,r,f)&&r&&(h=!0,i&&i.push(c));return h?null:f}function Y(){var n=$();e.each(v,function(r,i){var s=i.args,o=i.callers;N("updateUserSettings",s,function(r){V(c,s,r,n),t.Diagnostics.Log.writeEntry("Impl.Configuration","Delayed settings update succeeded for extension '"+s.store+"'.",t.Diagnostics.LogEntryLevel.verbose),e.each(o,function(){this.promiseProxy.complete(G(c,this.args))}),M()},function(n){t.Diagnostics.Log.writeEntry("Impl.Configuration","Delayed settings update failed for extension '"+s.store+"': "+n,t.Diagnostics.LogEntryLevel.error),e.each(o,function(){this.promiseProxy.error(n)})})}),v=null}function Z(t,r){v?n.clearTimeout(m):v={},m=n.setTimeout(T(Y),d);var s=q(r.store,r.type,r.subscriptionId);v[s]?e.each(r.settings,function(e,t){var n=v[s].args.settings,r,o;for(o=0;o<n.length;o++)if(n[o].path===t.path&&n[o].name===t.name){r=o;break}r!==i?n.splice(r,1,this):n.push(this)}):v[s]={args:e.extend(!0,{},r),callers:[]},v[s].callers.push({args:r,promiseProxy:t})}function et(t,n){var r=n.store,s=n.type,o=n.subscriptionId,u=I(r,s,o);e.each(n.settings,function(n,a){var f=R(u,a),l=P(t,r,s,o,a,f,u),c,h,p;l.settingIndex!==i&&t.splice(l.settingIndex,1);if(!C(a.name))l.pathWildcardIndex!==i&&(c=t[l.pathWildcardIndex],H(c)||e.each(c.value,function(e,t){if(t.Name===a.name)return c.value.splice(e,1),!1}));else for(h=0,p=t.length;h<p;h++)c=t[h],c.path===a.path&&c.name&&t.splice(h,1)})}function tt(e,t,n,r,i){var s=0,o,u;while(s<e.length)o=e[s],u=o.store===t&&o.type===n&&(o.subscriptionId===r||C(o.subscriptionId)&&C(r))&&o.path.indexOf(i)===0,u?e.splice(s,1):s++}function nt(t,n){var r=n.store,i=n.type,s=n.subscriptionId,o=n.pathPrefixes;e.each(o,function(e,n){tt(t,r,i,s,n)})}function rt(n){var r="User",i={SettingPrefixCollection:[{Store:E,Type:r,PathPrefix:""}]};return new t.Promise(function(t,s){N("getUserSettingsByPrefix",i,function(n){p=[],e.each(n,function(t,n){var i=n.Store,s=null;e.each(n.Settings,function(e,t){J(i,r,s,t.Path,t.Name,t)})}),M(),t()},function(e){s(e)},n||u)})}function it(){a={version:o,lruSettingsCache:[],loadedSettingsCache:[]},M()}var s=t.Communication.Receiver.getReceiver(),o=2,u=1e4,a,f,l,c,h,p,d,v,m,g=500,y=1,b,w,E="Global",S;S=t.Namespace.define("Impl.Configuration",{getUserSettings:function(n,r,i,s){if(!L(n,r))return;var o,u,a=r,f;x(n,t.Communication.Receiver.getReceiver());if(i){o=G(c,r,!0,s,u=[]),M();if(o||!s){n.complete(o||[]);return}a=e.extend({},r,{settings:u})}f=$(),N("getUserSettings",a,function(e){i&&V(c,a,f,e),t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings get succeeded for extension '"+a.store+"'.",t.Diagnostics.LogEntryLevel.verbose),i&&(e=G(c,r),M()),n.complete(e)},function(e){t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings get failed for extension '"+r.store+"': "+e,t.Diagnostics.LogEntryLevel.error),n.error(e)})},updateUserSettings:function(e,n,r,i){if(!L(e,n,!0))return;var s;x(e,t.Communication.Receiver.getReceiver()),r&&(s=$(),V(c,n,s),M()),N("updateUserSettings",n,function(i){r&&(V(c,n,s,i),M()),t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings update succeeded for extension '"+n.store+"'.",t.Diagnostics.LogEntryLevel.verbose),e.complete(i||[])},function(r){t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings update failed for extension '"+n.store+"': "+r,t.Diagnostics.LogEntryLevel.error),e.error(r)})},deleteUserSettings:function(e,n){if(!L(e,n))return;x(e,t.Communication.Receiver.getReceiver()),et(c,n),M(),N("deleteUserSettings",n,function(r){t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings delete succeeded for extension '"+n.store+"'.",t.Diagnostics.LogEntryLevel.verbose),e.complete(r||[])},function(r){t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings delete failed for extension '"+n.store+"': "+r,t.Diagnostics.LogEntryLevel.error),e.error(r)})},deleteUserSettingsByPrefix:function(n,r){if(!A(n,r))return;x(n,t.Communication.Receiver.getReceiver()),nt(c,r),M();var i={SettingPrefixCollection:e.map(r.pathPrefixes,function(e){return{Store:r.store,Type:r.type,SubscriptionId:r.subscriptionId,PathPrefix:e}})};N("deleteUserSettingsByPrefix",i,function(i){t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings delete succeeded for extension '"+r.store+"'.",t.Diagnostics.LogEntryLevel.verbose);var s=e.map(i,function(e){return e.Settings});n.complete(s)},function(e){t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings delete failed for extension '"+r.store+"': "+e,t.Diagnostics.LogEntryLevel.error),n.error(e)})},getLoadedUserSettings:function(e,t){if(!L(e,t)||!O(e,t))return;var n=U(t),r,s=[];for(r=0;r<t.settings.length;r++)n[r]!==i&&s.push(p[n[r]].value);e.complete(s)},updateLoadedUserSettings:function(e,n,r){if(!L(e,n,!0)||!O(e,n))return;x(e,t.Communication.Receiver.getReceiver()),K(n),r?Z(e,n):N("updateUserSettings",n,function(r){K(n,r),t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings update succeeded for extension '"+n.store+"'.",t.Diagnostics.LogEntryLevel.verbose),e.complete(r||[])},function(r){t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings update failed for extension '"+n.store+"': "+r,t.Diagnostics.LogEntryLevel.error),e.error(r)})},deleteLoadedUserSettings:function(n,r){if(!L(n,r)||!O(n,r))return;x(n,t.Communication.Receiver.getReceiver());var i=U(r).sort(function(e,t){return e>t?-1:1});e.each(i,function(e,t){p.splice(t,1)}),M(),N("deleteUserSettings",r,function(e){t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings delete succeeded for extension '"+r.store+"'.",t.Diagnostics.LogEntryLevel.verbose),n.complete(e||[])},function(e){t.Diagnostics.Log.writeEntry("Impl.Configuration","Settings delete failed for extension '"+r.store+"': "+e,t.Diagnostics.LogEntryLevel.error),n.error(e)})},_getViewSettings:function(e){return G(h,e,!0)},_updateViewSettings:function(e){return V(h,e),G(h,e)},initialize:function(e,n,i){var s;x(e,t.Communication.Receiver.getReceiver()),d=n||5e3,l=r.Services.get("configurationService");if(!l)throw"configurationService not found";s=t.Environment.getUserEmailAddress(),s&&(s="Impl.Configuration."+s,f=t.Storage.getLocalCache(s),a=f.getEntry()),(!a||a.version!==o)&&it(),c=a.lruSettingsCache,h=[],p=a.loadedSettingsCache,v=null,b={},w=$(),rt(i).then(function(n){t.Diagnostics.Log.writeEntry("Impl.Configuration","Global settings cache has been refreshed from settings service",t.Diagnostics.LogEntryLevel.information),e.complete()},function(n){t.Diagnostics.Log.writeEntry("Impl.Configuration","Could not get user settings to refresh the cache. Will use stale data: "+n,t.Diagnostics.LogEntryLevel.error),e.error(n)})},_clearSettingsCache:function(){it(),c=a.lruSettingsCache,h=[],p=a.loadedSettingsCache}}),s.addMethod("Impl.Configuration.getUserSettings",S.getUserSettings),s.addMethod("Impl.Configuration.updateUserSettings",S.updateUserSettings),s.addMethod("Impl.Configuration.deleteUserSettings",S.deleteUserSettings),s.addMethod("Impl.Configuration.deleteUserSettingsByPrefix",S.deleteUserSettingsByPrefix),s.addMethod("Impl.Configuration.getLoadedUserSettings",S.getLoadedUserSettings),s.addMethod("Impl.Configuration.updateLoadedUserSettings",S.updateLoadedUserSettings),s.addMethod("Impl.Configuration.deleteLoadedUserSettings",S.deleteLoadedUserSettings),s.addMethod("Impl.Configuration.initialize",S.initialize)}(jQuery,Shell,this,Impl),function(e,t,n,r,i){function c(e,r){var i=e.subViewName,s;switch(r.path){case n.Configuration.ViewSettings.Path.perType:s=a;break;case n.Configuration.ViewSettings.Path.perInstance:s=f}return i&&(s=[s,"subview",i].join("/")),t.extend({},r,{path:s})}function h(e,t){var n=e.complete,r=e.error,i=function(){t.releaseArgument(n),t.releaseArgument(r)};t.holdArgument(e),e.complete=function(){n.apply(this,arguments),i()},e.error=function(){r.apply(this,arguments),i()}}function p(e,r){e=e||{};var i="Global",s=e.subscriptionId?"Subscription":"User",o=e.subscriptionId,u={perType:[],perInstance:[]};return t.each(r,function(t,r){var i=r.path;r=c(e,r);switch(i){case n.Configuration.ViewSettings.Path.perType:u.perType.push(r);break;case n.Configuration.ViewSettings.Path.perInstance:u.perInstance.push(r)}}),t.each(["perType","perInstance"],function(e,t){u[t]=u[t].length>0?n.Configuration.createFullUserSettings(i,s,o,u[t]):null}),u}function d(n){var r=n?t.isArray(n)?n:[n]:null;return r&&(r=t.map(r,function(n){return t.extend({},n,{Value:e.JSON.parse(n.Value)})})),r}function v(e,t){return t!==n.Configuration.ViewSettings.Path.perType&&t!==n.Configuration.ViewSettings.Path.perInstance?(e.error("'path' must be one of 'perType' or 'perInstance' from Shell.Configuration.ViewSettings.Path"),!1):!0}var s=n.Communication.Receiver.getReceiver(),o="perType",u,a,f,l;l=n.Namespace.define("Impl.Configuration.ViewSettings",{getViewSettings:function(e,t,i){var s,o,u=[];for(s=0;s<i.length;s++)if(!v(e,i[s].path))return;o=p(t,i),h(e,n.Communication.Receiver.getReceiver()),o.perInstance&&(u=u.concat(r.Configuration._getViewSettings(o.perInstance))),o.perType?r.Configuration.getLoadedUserSettings({complete:function(t){u=u.concat(t),e.complete(d(u))},error:function(t){e.error(t)}},o.perType):e.complete(d(u))},updateViewSetting:function(e,t,i,s,o){if(!v(e,i))return;var u=p(t,[{path:i,name:s,value:JSON.stringify(o)}]);h(e,n.Communication.Receiver.getReceiver()),u.perInstance?e.complete(d(r.Configuration._updateViewSettings(u.perInstance))):u.perType?r.Configuration.updateLoadedUserSettings({complete:function(t){e.complete(d(t))},error:function(t){e.error(t)}},u.perType,!0):e.complete([])},setCurrentExtension:function(e){u=e.settingsStore||e.name},setBuiltInPaths:function(e,t){var n=["extension",u,"type",e];a=[o].concat(n).join("/"),f=t?["perInstance"].concat(n.concat(["instance",t])).join("/"):a}}),s.addMethod("Impl.Configuration.ViewSettings.getViewSettings",l.getViewSettings),s.addMethod("Impl.Configuration.ViewSettings.updateViewSetting",l.updateViewSetting),s.addMethod("Impl.Configuration.ViewSettings.setCurrentExtension",l.setCurrentExtension),s.addMethod("Impl.Configuration.ViewSettings.setBuiltInPaths",l.setBuiltInPaths)}(this,jQuery,Shell,this.Impl),function(e,t,n,r){var i=n.prototype;e.widget("fxs.fxsModalPresenter",n,{options:{shieldOpenDurationMs:500,shieldCloseDurationMs:250},_dialogs:null,_shield:null,_presenter:null,_resizeHandler:null,_create:function(){this._dialogs=[],this.element.addClass("fxs-modalpresenter"),this._createShieldAndPresenter(),i._create.call(this)},_destroy:function(){this._resizeHandler!==null&&(e(t).off("resize",this._resizeHandler),this._resizeHandler=null),this.element.removeClass("fxs-modalpresenter").empty(),this._super()},open:function(e){var n=this,r,i,s;for(i=0;i<this._dialogs.length;i++)if(this._dialogs[i]===e)throw"dialog is already open";e.on("close",function(){n._close(e)}),this._dialogs.push(e),r=function(){n._dialogs.length>0&&n._dialogs[n._dialogs.length-1]===e&&(n._presenter.append(e).show().css("z-index",t.fx.utilities.getNextZIndex(n._presenter.css("z-index"))),n._resizeHandler(),n._callWidgetMethod(e,"open"))},this._dialogs.length===1?(this._shield.css("z-index",t.fx.utilities.getNextZIndex(this._shield.css("z-index"))).show().animate({opacity:.75},this.options.shieldOpenDurationMs),r()):(s=this._dialogs[this._dialogs.length-2],s.hide(),r())},_close:function(e){var t=this,n,r;r=this._dialogs.indexOf(e);if(r===-1)throw"could not find dialog to close";this._dialogs.splice(r,1),e.remove(),this._dialogs.length===0?(this._shield.animate({opacity:0},this.options.shieldCloseDurationMs,function(){t._shield.hide()}),this._presenter.hide()):(n=this._dialogs[this._dialogs.length-1],n.show(),this._resizeHandler())},_createShieldAndPresenter:function(){var n=this,r=e(t);this._shield=e("<div />").addClass("fxs-modalpresenter-shield").appendTo(this.element),this._presenter=e("<div />").addClass("fxs-modalpresenter-presenter").appendTo(this.element),r.on("resize",this._resizeHandler=function(){var e=n._dialogs[n._dialogs.length-1],t;e&&(t=n._callWidgetMethod(e,"getCssPositioning"),n._presenter.css(t))})},_callWidgetMethod:function(e,t){var n;return e.hasClass("fxs-wizard")?n=e.fxsWizard(t):e.hasClass("fxs-dialog")?n=e.fxsDialog(t):e.hasClass("fxs-confirmation")&&(n=e.fxsConfirmation(t)),n}})}(jQuery,this,jQuery.Widget),function(e,t,n){var r,i=500,s=250;t.Namespace.define("Impl.UI.Dialogs.ModalPresenter",{initialize:function(t){r=e("<div />").fxsModalPresenter({shieldOpenDurationMs:i,shieldCloseDurationMs:s}).appendTo(t)},open:function(e){r.fxsModalPresenter("open",e)},_setAnimationDurations:function(e,t){i=e,s=t}})}(jQuery,Shell),function(e,t,n,r){var i=n.prototype;e.widget("fxs.fxsKeyboardModal",n,{options:{escapeKeyHandler:e.noop},_keydownHandler:null,_accessibilityKeysHandler:null,_savedElementForFocus:null,_create:function(){this._setupTrapFocus(),this._setupAccessibilityKeys(),this._focusFirstElement(),i._create.call(this)},_destroy:function(){this._removeTrapFocus(),this._removeAccessibilityKeys(),this._restoreFocusElement(),this._super()},_setupAccessibilityKeys:function(){var n=this;this._removeAccessibilityKeys(),e(t).on("keydown",this._accessibilityKeysHandler=function(t){t.which===e.ui.keyCode.ESCAPE&&(n.options.escapeKeyHandler&&n.options.escapeKeyHandler(t),t.preventDefault())})},_removeAccessibilityKeys:function(){this._accessibilityKeysHandler&&(e(t).off("keydown",this._accessibilityKeysHandler),this._accessibilityKeysHandler=null)},_setupTrapFocus:function(){var t=this,n=this.widget();this._removeTrapFocus(),n.on("keydown",this._keydownHandler=function(r){var i,s,o;if(r.which!==e.ui.keyCode.TAB)return;i=e(t._getAllTabbableElements(n)),s=i.filter(":first"),o=i.filter(":last");if(r.target===o[0]&&!r.shiftKey)return s.focus(),!1;if(r.target===s[0]&&r.shiftKey)return o.focus(),!1})},_removeTrapFocus:function(){this._keydownHandler&&(this.widget().off("keydown",this._keydownHandler),this._keydownHandler=null)},_focusFirstElement:function(){this._savedElementForFocus=Shell.Utilities.getDocumentActiveElement(),this.widget().find(":tabbable").first().focus()},_restoreFocusElement:function(){var n=this.widget(),r=Shell.Utilities.getDocumentActiveElement(),i=this._savedElementForFocus;this._savedElementForFocus=null,i&&(r===null||t.document.body===r||n[0]===r||e.contains(n[0],r))&&this._delayedExecute(function(){i.focus()},200)},_delayedExecute:function(e,n){t.setTimeout(function(){e()},n)},_getAllTabbableElements:function(e){var t=e.find("iframe:visible,:tabbable").toArray();return t.stableSort?t.stableSort(function(e,t){return e.tabIndex>t.tabIndex?t.tabIndex===0?-1:1:e.tabIndex<t.tabIndex?e.tabIndex===0?1:-1:0}):t}})}(jQuery,this,jQuery.Widget),function(e,t,n,r){var i=n.prototype;e.widget("fxs.fxsModalBase",n,{options:{closing:e.noop,close:e.noop},_create:function(){this.widgetEventPrefix="",this.element.attr("role","dialog"),i._create.call(this)},_destroy:function(){this.element.removeAttr("role"),this._super()},open:function(){var e=this;this.element.fxsKeyboardModal({escapeKeyHandler:function(){e.close()}})},close:function(){return this.options.closing&&this.options.closing()===!1?!1:(this._trigger("close"),this.element.is(":data(fxs-fxsKeyboardModal)")&&this.element.fxsKeyboardModal("destroy"),!0)},getCssPositioning:function(){var n=e(t);return{left:Math.max(0,Math.round((n.width()-this.element.outerWidth())/2)),top:Math.max(0,Math.round((n.height()-this.element.outerHeight())/2))}}})}(jQuery,this,jQuery.Widget),function(e,t,n){var r=t.prototype,i=["height","marginTop","marginBottom","paddingTop","paddingBottom"];e.widgetReference("fxs.fxsToastBox",t,{options:{data:null,openDuration:200,closeDuration:100,easing:"swing",direction:"top"},_references:{data:!0},_height:0,_outerHeight:0,_isOpened:!1,_direction:"top",_create:function(){this._setOption("data",this.options.data||new e.fxs.fxsToastBox.ToastBox),this.element.addClass("fxs-toastbox").html(this.options.data.content()),this.options.direction==="bottom"?(this.element.addClass("fxs-toastbox-direction-bottom"),this._direction="bottom"):this.element.addClass("fxs-toastbox-direction-top"),this.refresh(),this.element[0].style.height="0px",r._create.call(this)},_destroy:function(){this.element.removeClass("fxs-toastbox fxs-toastbox-direction-bottom fxs-toastbox-direction-top"),this._unsubscribe(),this._super()},open:function(){var e={height:this._height},t;return e[this._direction]="-"+this._outerHeight,t=this._doAction(!0,this.options.openDuration,function(){return this.options.data.open()},e),t},close:function(){var e={height:0},t;return e[this._direction]="0",t=this._doAction(!1,this.options.closeDuration,function(){return!this.options.data.open()},e),t},refresh:function(){return this._conserveHeight(function(){this._height=this.element.height(),this._outerHeight=this.element.outerHeight()}),this._isOpened?this.open():e.Deferred().resolve().promise()},_conserveHeight:function(e){var t=this.element[0].style.height;t&&this.element.height(""),e.call(this),t&&this.element.height(t)},_genFx:function(t){var n={};return e.each(i,function(){n[this]=t}),n},_doAction:function(t,n,r,i){var s=this,o,u,a;return this.options.data.lock()?(this.options.data.open()!==this._isOpened&&this.options.data.open(this._isOpened),e.Deferred().reject().promise()):(a=this.element.is(":hidden"),t&&a?u=this._genFx("show"):!t&&!a?u=this._genFx("hide"):u={},e.extend(u,i),o=e.Deferred(),this._isOpened=t,this.element.stop(!0,!0).animate(u,n,this.options.easing,function(){s.element.height(i.height),o.resolve()}),this.options.data.open(this._isOpened),o.promise())},_unsubscribe:function(e){e=e||this.element.__fxsToastBox_subscriptions;if(e)while(e.length)e.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this,n=this.element.__fxsToastBox_subscriptions||[];this._unsubscribe(n),n.push(e.content.subscribe(function(){t.element.html(e.content()),t.refresh()})),n.push(e.open.subscribe(function(e){e&&!t._isOpened?t.open():!e&&t._isOpened&&t.close()})),this.element.__fxsToastBox_subscriptions=n},_setOption:function(e,t){var n=r._setOption.apply(this,arguments);return e==="data"&&this._subscribe(t),n}}),e.fxs.fxsToastBox.ToastBox=function(){this.content=ko.observable(""),this.lock=ko.observable(!1),this.open=ko.observable(!1)}}(jQuery,jQuery.Widget),function(e,t,n,r,i,s){var o=t.prototype,u=0,a="__fxs-confirmation",f=function(){return a+u++},l=".fxs-drawer",c="fxs-confirmation-summary",h="<div class='fxs-confirmation-toastbox'></div>",p="<div class='fxs-confirmation-actions'><ul class='fxs-confirmation-buttons' data-bind='foreach: data.actions'><li><button class='fxs-confirmation-button' data-bind='activateWidget: \"fxButton\", fxcontrol-options: jQuery.extend({}, $data, { selector: \"span.sprite\" })'><span class='sprite'></span><span class='fxs-confirmation-button-text' data-bind='text: text'></span></button></li></ul></div><div class='"+c+"' data-bind='safeMarkup: data.title' aria-live='assertive'></div>"+"<div class='fxs-confirmation-details'>"+"<!-- ko if: data.detailsText -->"+"<!-- ko ifnot: data.detailsUseHtml --><div data-bind='safeMarkup: data.detailsText' class='fxs-confirmation-details-text'></div><!-- /ko -->"+"<!-- ko if: data.detailsUseHtml --><div data-bind='html: data.detailsText' class='fxs-confirmation-details-text'></div><!-- /ko -->"+"<!-- /ko -->"+"<!-- ko template: { 'if': data.detailsUrl, afterRender: func._iFrameRender } --><div class='fxs-confirmation-details-iframe'><iframe frameborder='0' data-bind='attr: { src: data.detailsUrl }'></iframe></div><!-- /ko -->"+"</div>";e.widget("fxs.fxsConfirmation",t,{options:{title:"",detailsText:"",detailsUrl:"",actions:[],focus:-1,openingDurationMs:200,closingDurationMs:100,detailsUseHtml:!1},_viewModel:null,_subscriptions:null,_drawerElement:null,_toastBoxViewModel:null,_toastBoxWidget:null,_confirmationSummaryElement:null,_create:function(){var t=f();this._setViewModel(new e.fxs.fxsConfirmation.Confirmation(new e.fxs.fxsToastBox.ToastBox)),this._viewModel.toastBox.content(p),this.element.addClass("fxs-confirmation").html(h),this._toastBoxWidget=this.element.find(".fxs-confirmation-toastbox").fxsToastBox({direction:"top",data:this._viewModel.toastBox}),this._viewModel.toastBox.open(!1),this._confirmationSummaryElement=this._toastBoxWidget.find("."+c).attr("id",t),this._setOption("title",this.options.title),this._setOption("detailsText",this.options.detailsText),this._setOption("detailsUrl",this.options.detailsUrl),this._setOption("actions",this.options.actions),this._setOption("focus",this.options.focus),this._setOption("openingDurationMs",this.options.openingDurationMs),this._setOption("closingDurationMs",this.options.closingDurationMs),this._setOption("detailsUseHtml",this.options.detailsUseHtml),n.applyBindings({data:this._viewModel,func:this},this.element[0]),o._create.call(this),this.element.attr({role:"alertdialog","aria-live":"assertive","aria-labelledby":t,"aria-atomic":"true"})},_destroy:function(){this.element.empty().removeClass("fxs-confirmation fxs-confirmation-withdetails").removeAttr("role aria-live aria-labelledby aria-atomic"),this._unsubscribe(),this._super()},open:function(){var e,t=this._viewModel.focus(),n=t===-1?":last":":eq("+parseInt(t,10)+")";return this._toastBoxWidget.fxsToastBox("refresh"),e=this._toastBoxWidget.fxsToastBox("open"),o.open.call(this),this.element.find(".fxs-confirmation-buttons li"+n+" button").focus(),i.forceRead(this.element[0]),e},close:function(){var e=this,t=this._toastBoxWidget.fxsToastBox("close").done(function(){o.close.call(e)});return t},getCssPositioning:function(){var e=this._getDrawerElement(),t=e.position(),n=e.css("margin-top"),r=e.css("margin-left"),i=n==="auto"?0:parseInt(n,10),s=r==="auto"?0:parseInt(r,10),o={top:t.top+i,left:t.left+s};return o},getViewModel:function(){return this._viewModel},_getDrawerElement:function(){if(!this._drawerElement){this._drawerElement=e(l);if(this._drawerElement.length===0)throw"confirmation box could not find drawer"}return this._drawerElement},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_iFrameRender:function(t){var n=e(t[0]).find("iframe");n[0].allowTransparency=!0,n.on("load",function(){e(this).addClass("fxs-confirmation-details-iframe-loaded")})},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this,n=function(){t._viewModel.detailsText()||t._viewModel.detailsUrl()?t.element.addClass("fxs-confirmation-withdetails"):t.element.removeClass("fxs-confirmation-withdetails")};this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.detailsText.subscribe(n)),e.detailsText.notifySubscribers(e.detailsText()),this._subscriptions.push(e.detailsUrl.subscribe(n)),e.detailsUrl.notifySubscribers(e.detailsUrl()),this._subscriptions.push(e.detailsUseHtml.subscribe(n)),e.detailsUseHtml.notifySubscribers(e.detailsUseHtml()),this._subscriptions.push(e.title.subscribe(function(e){t.element.find("."+c).attr("title",r.getText(e))})),e.title.notifySubscribers(e.title())},_setOption:function(e,t){var n=o._setOption.apply(this,arguments);switch(e){case"detailsText":case"detailsUrl":case"detailsUseHtml":this._viewModel[e](t),this._toastBoxWidget.fxsToastBox("refresh");break;case"title":case"actions":case"focus":this._viewModel[e](t);break;case"openingDurationMs":this.element.find(".fxs-confirmation-toastbox").fxsToastBox("option","openDuration",t);break;case"closingDurationMs":this.element.find(".fxs-confirmation-toastbox").fxsToastBox("option","closeDuration",t)}return n}}),e.fxs.fxsConfirmation.Confirmation=function(e){this.toastBox=e,this.title=n.observable(""),this.detailsText=n.observable(""),this.detailsUrl=n.observable(""),this.actions=n.observableArray(),this.focus=n.observable(-1),this.detailsUseHtml=n.observable(!1)}}(jQuery,jQuery.fxs.fxsModalBase,ko,Shell.Utilities.SafeMarkup,this.fx.utilities),function(e,t,n){var r={},i=t.Communication.Receiver.getReceiver(),s=200,o=100,u=t.Namespace.define("Impl.UI.Notifications.Confirmation",{_drawerElement:null,_getDrawerWidth:function(){if(!u._drawerElement){u._drawerElement=e(".fxs-drawer");if(!u._drawerElement)throw"could not find drawer"}return u._drawerElement.width()},_addConfirmation:function(e){e.width(u._getDrawerWidth()),Impl.UI.Dialogs.ModalPresenter.open(e)},_removeConfirmation:function(e){e.fxsConfirmation("close")},_sync:function(n,i,a){var f=this,l,c,h,p;if(!n)p=e.extend({},i,{openingDurationMs:s,closingDurationMs:o}),h=e("<div />").fxsConfirmation(p),n=t.Utilities.newGuid(),r[n]={widget:h},u._holdWidgetOptions.call(this,h,i),u._addConfirmation(h),l=r[n].widget.data("fxs-fxsConfirmation"),c=l.destroy,this.receiver.holdArgument(a),l.destroy=function(){a(),f.receiver.releaseArgument(r[n].widget.fxsConfirmation("option","actions")),f.receiver.releaseArgument(a),c.apply(this,arguments),delete r[n]};else{if(!r[n])throw"confirmation handle is invalid";h=r[n].widget,u._holdWidgetOptions.call(this,h,i),h.fxsConfirmation(i)}return n},_holdWidgetOptions:function(e,t){t.actions&&(this.receiver.releaseArgument(e.fxsConfirmation("option","actions")),this.receiver.holdArgument(t.actions))},_remove:function(e){var t=r[e];t&&u._removeConfirmation(t.widget)},_clear:function(){e.each(r,function(){u._removeConfirmation(this.widget)})},_setAnimationDurations:function(e,t){s=e,o=t}});i.addMethod("Impl.UI.Notifications.Confirmation.sync",u._sync),i.addMethod("Impl.UI.Notifications.Confirmation.remove",u._remove)}(jQuery,Shell),function(e,t,n,r,i){function d(n,r){c||(c=e.setTimeout(v,0)),r&&t.inArray(n,h)<0&&h.push(n)}function v(){t.each(h,function(e,t){var n=f.getDataSetErrors(t),r=l.hasOwnProperty(t)&&a.getDataSetErrors(t);r?r===u?a.createDataLoadFailureNotification():(!n||!f.showingPartialErrorsNotification())&&a.createPartialDataLoadNotification():(!r||!a.showingPartialErrorsNotification())&&f.createPartialDataLoadNotification()}),h.splice(0,h.length),c=null,t(Impl.UI.Notifications.DataLoad).triggerHandler("dataLoadHandlingComplete")}function m(){a=new p(s.viewDataLoadWarnings,s.viewDataLoadError),f=new p(s.portalDataLoadWarnings),l={}}function g(){a.destroy(),f.destroy(),c&&(e.clearTimeout(c),c=null)}function y(e,t,n){var r=t;f.handleDataLoadSuccess(r,n,!1),e.complete()}function b(e,t,n){var r=t;a.handleDataLoadSuccess(r,n),l[r]=!0,e.complete()}function w(e,t,n){var r=t;a.handleDataLoadFailure(r,n),l[r]=!0,e.complete()}function E(){a.removeNotifications(),a.removeErrors(l),l={}}var s=r.getStrings("Impl.UI.Notifications.DataLoad"),o=n.Communication.Receiver.getReceiver(),u=42,a,f,l,c,h=[],p=n.Class.define(function(e,t){this._warningString=e,this._errorString=t,this._partialDataLoadNotification=null,this._dataLoadFailureNotification=null,this._errorsByDataSet={}},{destroy:function(){this.removeNotifications()},createPartialDataLoadNotification:function(){if(!this._partialDataLoadNotification){var e=this._partialDataLoadNotification=new n.UI.Notifications.Notification(this._warningString,n.UI.Notifications.Severity.warning),t=this;e.setActions([new n.UI.Notifications.Buttons.ok(function(){t._removePartialDataLoadNotification()})]),this._updatePartialDataLoadNotificationDetails(),n.UI.Notifications.add(e)}else this._updatePartialDataLoadNotificationDetails()},createDataLoadFailureNotification:function(){if(!this._dataLoadFailureNotification){var e=this._dataLoadFailureNotification=new n.UI.Notifications.Notification(this._errorString,n.UI.Notifications.Severity.error),t=this;e.setActions([new n.UI.Notifications.Buttons.ok(function(){t._removeDataLoadFailureNotification()})]),n.UI.Notifications.add(e)}},handleDataLoadSuccess:function(e,n){var r=this._errorsByDataSet[e],i,s,o,u;t.isArray(n)&&n.length>0?(i=t.map(n,function(e){return e.errorString}).sort(),r&&(s=r.length===i.length&&t.grep(i,function(e,n){return t.inArray(e,r)<0}).length===0),s||(this._errorsByDataSet[e]=i,this._partialDataLoadNotification?this._updatePartialDataLoadNotificationDetails():(o=!r||t.grep(i,function(e){return t.inArray(e,r)<0}).length>0,o&&(u=!0)))):r&&(delete this._errorsByDataSet[e],this._updateOrRemovePartialDataLoadNotification()),this._updateOrRemoveDataLoadFailureNotification(),d(e,u)},handleDataLoadFailure:function(e,t){var n;t&&(this._errorsByDataSet[e]!==u&&(n=!0),this._errorsByDataSet[e]=u,this._updateOrRemovePartialDataLoadNotification()),d(e,n)},removeNotifications:function(){this._partialDataLoadNotification&&this._removePartialDataLoadNotification(),this._dataLoadFailureNotification&&this._removeDataLoadFailureNotification()},removeErrors:function(e){var n,r=this;t.each(e,function(e){delete r._errorsByDataSet[e],n=!0}),n&&(this._updateOrRemovePartialDataLoadNotification(),this._updateOrRemoveDataLoadFailureNotification())},_updateOrRemovePartialDataLoadNotification:function(){var e;this._partialDataLoadNotification&&(t.each(this._errorsByDataSet,function(t,n){if(n!==u)return e=!0,!1}),e?this._updatePartialDataLoadNotificationDetails():this._removePartialDataLoadNotification())},_updateOrRemoveDataLoadFailureNotification:function(){var e;this._dataLoadFailureNotification&&(t.each(this._errorsByDataSet,function(t,n){if(n===u)return e=!0,!1}),e||this._removeDataLoadFailureNotification())},getDataSetErrors:function(e){return this._errorsByDataSet[e]},showingPartialErrorsNotification:function(){return!!this._partialDataLoadNotification},_updatePartialDataLoadNotificationDetails:function(){var e;t.each(this._errorsByDataSet,function(t,n){n!==u&&(e=(e?[e]:[]).concat(n).join("%%%"))}),this._partialDataLoadNotification.setDetailsText(e||"")},_removePartialDataLoadNotification:function(){n.UI.Notifications.remove(this._partialDataLoadNotification),this._partialDataLoadNotification=null},_removeDataLoadFailureNotification:function(){n.UI.Notifications.remove(this._dataLoadFailureNotification),this._dataLoadFailureNotification=null}});n.Namespace.define("Impl.UI.Notifications.DataLoad",{initialize:m,destroy:g,onNavigateAway:E}),o.addMethod("Impl.UI.Notifications.DataLoad.handleExtensionDataLoadSuccess",y),o.addMethod("Impl.UI.Notifications.DataLoad.handleViewDataLoadSuccess",b),o.addMethod("Impl.UI.Notifications.DataLoad.handleViewDataLoadFailure",w),m()}(this,jQuery,Shell,this.fx.resources),function(e,t,n){var r={},i=e.Callbacks(),s=t.Communication.Receiver.getReceiver(),o=t.Namespace.define("Impl.UI.Notifications.Notification",{addListener:function(e){i.add(e)},removeListener:function(e){i.remove(e)},_sync:function(n,s,u){var a=n===null,f=this,l,c;return n=n||t.Utilities.newGuid(),r[n]=r[n]||{widget:e("<div />").fxsNotification(),status:s.status},a&&i.fire("ADD",r[n].widget,r[n].status),o._setWidgetOptions.call(this,r[n].widget,s),a&&(l=r[n].widget.data("fxs-fxsNotification"),c=l.destroy,this.receiver.holdArgument(u),l.destroy=function(){u(),f.receiver.releaseArgument(r[n].widget.fxsNotification("option","actions")),f.receiver.releaseArgument(u),c.apply(this,arguments),delete r[n]}),n},_setWidgetOptions:function(e,t){t.actions&&(this.receiver.releaseArgument(e.fxsNotification("option","actions")),this.receiver.holdArgument(t.actions)),e.fxsNotification(t)},_remove:function(e){var t=r[e];t&&i.fire("REMOVE",t.widget,t.status)}});s.addMethod("Impl.UI.Notifications.Notification.sync",o._sync),s.addMethod("Impl.UI.Notifications.Notification.remove",o._remove)}(jQuery,Shell),function(e,t,n,r){e.widget("fxs.fxsMarkupLinkInjector",{options:{text:"",click:e.noop},_originalHtml:null,_create:function(){var e=n.Utilities.SafeMarkup.create(this.options.text);this._originalHtml=this.element.html(),this.element.html(e),this._attachLinkHandler()},_destroy:function(){this.element.html(this._originalHtml).off(".linkinjector","a"),this._super()},_attachLinkHandler:function(){var t=this;this.element.on("click.linkinjector","a",function(r){var i=e(this),s=i.attr("id").substring(n.Utilities.SafeMarkup.getLinkIdPrefix().length),o=i.attr("href"),u={id:s,href:o};r.preventDefault(),t._trigger("click",r,u)})},_setOption:function(e,r){var i=t._setOption.apply(this,arguments),s;return e==="text"&&(s=n.Utilities.SafeMarkup.create(r),this.element.html(s)),i}})}(jQuery,jQuery.Widget.prototype,Shell),function(e,t,n,r,i,s){var o=t.prototype,u="fxs.fxsProgressBox",a=0,f="__fxs-progressbox",l=function(){return f+a++},c="<div class='fxs-progressbox-details fxs-progressbox-drilldetails'><div class='fxs-progressbox-title'><button class='fxs-progressbox-back'><span data-bind='attr: { class: \"sprite \" + class_.back }'></span></button><div class='fxs-progressbox-header' data-bind='text: data.drillDetailsTitle'></div></div><!-- ko if: data.drillDetailsText --><div data-bind='safeMarkup: data.drillDetailsText' class='fxs-progressbox-details-text'></div><!-- /ko --><!-- ko template: { 'if': data.drillDetailsUrl, afterRender: func._iFrameRender } --><div class='fxs-progressbox-details-iframe'><iframe frameborder='0' data-bind='attr: { src: data.drillDetailsUrl }'></iframe></div><!-- /ko --></div>",h="<div class='fxs-progressbox-indicator'><div class='fxs-progressbox-indicator-status' data-bind='style: { width: data.valuePercentage }'></div></div><div class='fxs-progressbox-content'><div class='fxs-progressbox-actions'><div class='fxs-progressbox-actions-title'></div><ul class='fxs-progressbox-buttons'><li data-bind='visible: (func._hasDetails.call(func, data)) || (data.steps().length > 0 && !data.stepDetailsShowing() && !data.drillDetailsShowing())' class='fxs-progressbox-detailsbutton'><button class='fxs-progressbox-button' data-bind='activateWidget: \"fxButton\", fxcontrol-options: { class_: class_.details, selector: \"span.sprite\" }'><span class='sprite'></span><span class='fxs-progressbox-button-text' data-bind='text: text.details'></span></button></li><!-- ko foreach: data.actions --><li class='fxs-progressbox-actionbutton'><button class='fxs-progressbox-button' data-bind='activateWidget: \"fxButton\", fxcontrol-options: jQuery.extend({}, $data, { selector: \"span.sprite\" })'><span class='sprite'></span><span class='fxs-progressbox-button-text' data-bind='text: text'></span></button></li><!-- /ko --></ul></div><div class='fxs-progressbox-summary' aria-live='polite'><div class='fxs-progressbox-status' data-bind='if: class_[data.status()]'><span data-bind='attr: { class: \"sprite \" + class_[data.status()] }'></span></div><div class='fxs-progressbox-header'></div></div><div class='fxs-progressbox-details fxs-progressbox-stepdetails'><div class='fxs-progressbox-title'><button class='fxs-progressbox-back'><span class='sprite'></span></button><div class='fxs-progressbox-header'></div></div><ul class='fxs-progressbox-steps' aria-live='polite' data-bind='foreach: data.steps'><li data-bind='attr: { \"class\": \"fxs-progressbox-status-\" + status() }'><a class='fxs-progressbox-step' data-bind='attr: { href: $root.func._hasDetails.call($root.func, $data) ? \"#\" : false }'><div class='fxs-progressbox-status' data-bind='if: $root.class_[\"step\" + $root.func._pascalCase(status())]'><span data-bind='attr: { class: \"sprite \" + $root.class_[\"step\" + $root.func._pascalCase(status())] }'></span></div><span class='fxs-progressbox-steptitle' data-bind='safeMarkup: title, safeMarkup-options: { disableLinks: true }'></span><span class='fxs-progressbox-stepdetails'><span data-bind='attr: { class: \"sprite \" + $root.class_.stepDetails }'></span></span></a></li></ul></div>"+c+"</div>";e.widget(u,t,{options:{title:"",status:"",value:0,actions:[],indeterminate:!1,detailsText:"",detailsUrl:"",class_:n.getClasses(u),text:n.getStrings(u),click:null,dismiss:null,dismissable:!1},_viewModel:null,_backClickHandler:null,_detailsClickHandler:null,_stepDetailsClickHandler:null,_subscriptions:null,_create:function(){var t=this,n=l(),i=l();this._setViewModel(new e.fxs.fxsProgressBox.Progress),this._setOption("title",this.options.title),this._setOption("status",this.options.status),this._setOption("steps",this.options.steps),this._setOption("actions",this.options.actions),this._setOption("indeterminate",this.options.indeterminate),this._setOption("detailsText",this.options.detailsText),this._setOption("detailsUrl",this.options.detailsUrl),this._setOption("dismissable",this.options.dismissable),this.element.attr({role:"progressbar","aria-atomic":!0,"aria-valuemin":0,"aria-valuemax":100,"aria-labelledby":n,"aria-describedby":i}).addClass("fxs-progressbox").html(h).find(".fxs-progressbox-summary").attr("id",n).end().find(".fxs-progressbox-details.fxs-progressbox-stepdetails").attr("id",i).end().find(".fxs-progressbox-back span.sprite").addClass(this.options.class_.back).end().find(".fxs-progressbox-actions-title").text(this.options.text.actions).end().on("click","button.fxs-progressbox-back",this._backClickHandler=function(e){t._viewModel.drillDetailsShowing()?t._viewModel.drillDetailsShowing(!1):t._viewModel.stepDetailsShowing(!1),e.preventDefault()}).on("click",".fxs-progressbox-detailsbutton button",this._detailsClickHandler=function(){var e=t._viewModel.detailsText(),n=t._viewModel.detailsUrl();e||n?t._showDrillDetails(t.options.text.backToOperations,e,n):t._viewModel.stepDetailsShowing(!0)}).on("click","a.fxs-progressbox-step[href=#]",this._stepDetailsClickHandler=function(e){var n=r.contextFor(this).$data;t._showDrillDetails(t.options.text.backToSteps,n.detailsText(),n.detailsUrl()),e.preventDefault()}),r.applyBindings({data:this._viewModel,class_:this.options.class_,text:this.options.text,func:this},this.element[0]),this._applyLinksToTitle(!0),o._create.call(this)},_destroy:function(){this.element.empty().removeClass("fxs-progressbox fxs-progressbox-indeterminate fxs-progressbox-hasdetails fxs-progressbox-showstepdetails fxs-progressbox-withactions fxs-progressbox-showdrilldetails").removeAttr("role aria-atomic aria-valuemin aria-valuemax aria-labelledby aria-describedby aria-valuenow"),this._removeStatusClassName(),this._backClickHandler&&(this.element.off("click",this._backClickHandler),this._backClickHandler=null),this._detailsClickHandler&&(this.element.off("click",this._detailsClickHandler),this._detailsClickHandler=null),this._stepDetailsClickHandler&&(this.element.off("click",this._stepDetailsClickHandler),this._stepDetailsClickHandler=null),this._unsubscribe(),this._super()},addStep:function(t,n){var i=new e.fxs.fxsProgressBox.ProgressStep,s=l();return typeof n!="number"&&(n=this._viewModel.steps().length),i.id=s,r.mapping.fromJS(t,null,i),this._viewModel.steps.splice(n,0,i),s},removeStep:function(e){this._viewModel.steps.remove(function(t){return t.id===e})},removeAllSteps:function(){this._viewModel.steps([])},updateStep:function(e,t){var n=r.utils.arrayFirst(this._viewModel.steps(),function(t){return t.id===e});n&&r.mapping.fromJS(t,null,n)},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_iFrameRender:function(t){var n=e(t[0]).find("iframe");n[0].allowTransparency=!0,n.on("load",function(){e(this).addClass("fxs-progressbox-details-iframe-loaded")})},_hasDetails:function(e){var t=e.detailsText(),n=e.detailsUrl();return t!==null&&t!==""||n!==null&&n!==""},_showDrillDetails:function(e,t,n){this._viewModel.drillDetailsTitle(e),this._viewModel.drillDetailsText(t),this._viewModel.drillDetailsUrl(n),this._viewModel.drillDetailsShowing(!0)},_removeStatusClassName:function(){this.element.removeClass("fxs-progressbox-status-unknown fxs-progressbox-status-active fxs-progressbox-status-error fxs-progressbox-status-success fxs-progressbox-status-warning")},_pascalCase:function(e){return e=e||"",e.substr(0,1).toUpperCase()+e.substr(1)},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this,n=function(){var e=t._viewModel.stepDetailsShowing(),n=t._viewModel.drillDetailsShowing(),r=t._viewModel.steps().length;t.element.toggleClass("fxs-progressbox-withactions",!!(t._hasDetails(t._viewModel)||t._viewModel.actions().length||r&&!e)),t.element.toggleClass("fxs-progressbox-showstepdetails",!!e&&!!r),r||t._viewModel.stepDetailsShowing(!1),t.element.toggleClass("fxs-progressbox-showdrilldetails",n),t.element.toggleClass("fxs-progressbox-hasdetails",!!r)};this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.value.subscribe(function(e){e!==null?t.element.attr("aria-valuenow",e):t.element.removeAttr("aria-valuenow")})),e.value.notifySubscribers(e.value()),this._subscriptions.push(e.status.subscribe(function(e){var n=t.element.find(".fxs-progressbox-summary, .fxs-progressbox-steps");n.attr("aria-live","polite"),(e==="warning"||e==="error")&&n.attr("aria-live","assertive"),(e==="warning"||e==="error"||e==="success")&&t._viewModel.value()===null&&t._viewModel.value(100),t._removeStatusClassName(),t.element.addClass("fxs-progressbox-status-"+e)})),e.status.notifySubscribers(e.status()),this._subscriptions.push(e.steps.subscribe(n)),this._subscriptions.push(e.actions.subscribe(n)),this._subscriptions.push(e.detailsText.subscribe(n)),this._subscriptions.push(e.detailsUrl.subscribe(n)),this._subscriptions.push(e.stepDetailsShowing.subscribe(n)),this._subscriptions.push(e.drillDetailsShowing.subscribe(n)),this._subscriptions.push(e.title.subscribe(function(){t._applyLinksToTitle(!1)})),e.steps.notifySubscribers(e.steps()),e.actions.notifySubscribers(e.actions()),e.actions.notifySubscribers(e.detailsText()),e.actions.notifySubscribers(e.detailsUrl())},_setOption:function(e,t){var n=o._setOption.apply(this,arguments);switch(e){case"title":case"status":case"value":case"actions":case"detailsText":case"detailsUrl":case"dismissable":this._viewModel[e](t);break;case"indeterminate":this._viewModel.value(t?null:this._viewModel.value())}return n},_applyLinksToTitle:function(t){var n=this,r,s=this.element.find(".fxs-progressbox-details.fxs-progressbox-stepdetails .fxs-progressbox-header, .fxs-progressbox-summary .fxs-progressbox-header"),o,u=this._viewModel.title();t&&(r=function(e,t){n._trigger("click",e,t)}),s.attr("title",i.getText(u));for(o=0;o<s.length;o++)t?e(s[o]).fxsMarkupLinkInjector({text:this._viewModel.title(),click:r}):e(s[o]).fxsMarkupLinkInjector("option","text",u)}}),e.fxs.fxsProgressBox.ProgressStatus={unknown:"unknown",active:"active",error:"error",warning:"warning",success:"success"},e.fxs.fxsProgressBox.ProgressStep=function(){this.id=null,this.title=r.observable(""),this.status=r.observable(e.fxs.fxsProgressBox.ProgressStatus.unknown).extend({validateEnum:e.fxs.fxsProgressBox.ProgressStatus}),this.detailsText=r.observable(""),this.detailsUrl=r.observable("")},e.fxs.fxsProgressBox.Progress=function(){this.title=r.observable(""),this.status=r.observable(e.fxs.fxsProgressBox.ProgressStatus.unknown).extend({validateEnum:e.fxs.fxsProgressBox.ProgressStatus}),this.value=r.observable(0),this.steps=r.observableArray(),this.actions=r.observableArray(),this.detailsText=r.observable(""),this.detailsUrl=r.observable(""),this.stepDetailsShowing=r.observable(!1),this.drillDetailsShowing=r.observable(!1),this.drillDetailsTitle=r.observable(),this.drillDetailsText=r.observable(),this.drillDetailsUrl=r.observable(),this.dismissable=r.observable(!1),this.valuePercentage=r.computed(function(){var e=this.value();return e===null?null:e+"%"},this)}}(jQuery,jQuery.Widget,this.fx.resources,ko,Shell.Utilities.SafeMarkup),function(e,t,n){var r={},i=e.Callbacks(),s=t.Communication.Receiver.getReceiver(),o=t.Namespace.define("Impl.UI.Notifications.Progress",{addListener:function(e){i.add(e)},removeListener:function(e){i.remove(e)},_sync:function(n,s,u){var a=n===null,f=this,l,c;return n=n||t.Utilities.newGuid(),r[n]=r[n]||{widget:e("<div />").fxsProgressBox(),widgetOptions:s.widgetOptions,steps:s.steps},a&&i.fire("ADD",r[n].widget),o._setWidgetOptions.call(this,r[n].widget,s.widgetOptions),o._setSteps.call(this,r[n].widget,s.steps),a&&(l=r[n].widget.data("fxs-fxsProgressBox"),c=l.destroy,this.receiver.holdArgument(u),l.destroy=function(){var e=r[n].widget;u(),f.receiver.releaseArgument(e.fxsProgressBox("option","actions")),f.receiver.releaseArgument(e.fxsProgressBox("option","click")),f.receiver.releaseArgument(e.fxsProgressBox("option","dismiss")),f.receiver.releaseArgument(u),c.apply(this,arguments),delete r[n]}),n},_setWidgetOptions:function(e,t){t.actions&&(this.receiver.releaseArgument(e.fxsProgressBox("option","actions")),this.receiver.holdArgument(t.actions)),t.click&&(this.receiver.releaseArgument(e.fxsProgressBox("option","click")),this.receiver.holdArgument(t.click)),t.dismiss&&(this.receiver.releaseArgument(e.fxsProgressBox("option","dismiss")),this.receiver.holdArgument(t.dismiss)),e.fxsProgressBox(t)},_setSteps:function(e,t){var n=e.data("steps")||[],r=[];t=t||[],t.forEach(function(t){var i,s=n.length;while(s--)if(t.code===n[s].code){i=n[s].handle,n.splice(s,1);break}i?(e.fxsProgressBox("updateStep",i,t),r.push({code:t.code,handle:i})):r.push({code:t.code,handle:e.fxsProgressBox("addStep",t)})}),n.forEach(function(t){e.fxsProgressBox("removeStep",t.handle)}),e.data("steps",r)},_remove:function(e){var t=r[e];t&&i.fire("REMOVE",t.widget)},_removeAllSteps:function(e){var t=r[e],n;t&&(n=t.widget,t._setSteps(n,null))}});s.addMethod("Impl.UI.Notifications.Progress.sync",o._sync),s.addMethod("Impl.UI.Notifications.Progress.remove",o._remove)}(jQuery,Shell),function(e,t,n,r){var i=t.prototype,s=0,o="__fxs-command",u=function(){return o+s++},a="<div class='fxs-command-iconwrapper' data-bind='attr: { title: data.tooltip }'><div class='fxs-command-icon'><img data-bind='attr: { src: data.url }' alt='' /></div></div><div class='fxs-command-text' data-bind='text: data.text'></div><!-- ko if: data.subCommands().length --><ul class='fxs-command-flyout' data-bind='foreach: data.subCommands '><li><a data-bind='attr: { \"href\": disabled() ? false : \"#\" }, text: text, event: {mouseover: onMouseOver, mouseout: onMouseOut}'></a></li></ul><!-- /ko -->";e.widget("fxs.fxsCommand",t,{options:{action:"",click:null,url:"",text:"",tooltip:""},_viewModel:null,_subscriptions:null,_flyoutClickHandler:null,_buttonEnterHandler:null,_buttonLeaveHandler:null,_create:function(){var t=this;this._setViewModel(new e.fxs.fxsCommand.Command),this._setOption("action",this.options.action),this._setOption("url",this.options.url),this._setOption("text",this.options.text),this._setOption("tooltip",this.options.tooltip),this.element.addClass("fxs-command").html(a).fxButton({click:this.options.click}).on("click",".fxs-command-flyout a",this._flyoutClickHandler=function(r){var i=e(this),s;r.preventDefault(),r.stopPropagation(),i.attr("href")&&(s=n.contextFor(this).$data.click,s&&s()),t.element.removeClass("fxs-command-subcommandsvisible")}).on("mouseenter focusin",this._buttonEnterHandler=function(){if(!t.options.disabled){var e=t.element.offset(),n=t.element.find(".fxs-command-flyout");t.element.addClass("fxs-command-subcommandsvisible"),e.left-=parseInt((n.outerWidth()-t.element.outerWidth())/2,10),e.top-=n.height(),n.offset(e)}}).on("mouseleave focusout",this._buttonLeaveHandler=function(){t.element.removeClass("fxs-command-subcommandsvisible")}),n.applyBindings({data:this._viewModel,func:this},this.element[0]),i._create.call(this)},_destroy:function(){this.element.removeClass("fxs-command fxs-command-subcommandsvisible").empty().fxButton("destroy"),this._flyoutClickHandler&&(this.element.off("click",this._flyoutClickHandler),this._flyoutClickHandler=null),this._buttonEnterHandler&&(this.element.off("mouseenter focusin",this._buttonEnterHandler),this._buttonEnterHandler=null),this._buttonLeaveHandler&&(this.element.off("mouseleave focusout",this._buttonLeaveHandler),this._buttonLeaveHandler=null),this._viewModel.action(""),this._unsubscribe(),this._super()},addSubCommands:function(t,r){var i=[],s=[];return t.forEach(function(t){var r=new e.fxs.fxsCommand.SubCommand,o=u();r.id=o,n.mapping.fromJS(t,null,r),i.push(r),s.push(o)},this),typeof r!="number"&&(r=this._viewModel.subCommands().length),this._viewModel.subCommands.splice.apply(this._viewModel.subCommands,[r,0].concat(i)),s},removeSubCommands:function(e){e.forEach(function(e){this._viewModel.subCommands.remove(function(t){return t.id===e})},this)},removeAllSubCommands:function(){this._viewModel.subCommands([])},updateSubCommand:function(e,t){var r=n.utils.arrayFirst(this._viewModel.subCommands(),function(t){return t.id===e});r&&n.mapping.fromJS(t,null,r)},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this;this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.action.subscribe(function(e){var n=t.element.data("currentAction");n&&t.element.removeClass("fxs-command-action-"+n).removeData("currentAction"),e&&t.element.addClass("fxs-command-action-"+e).data("currentAction",e)})),e.action.notifySubscribers(e.action())},_setOption:function(e,t){var n;e==="action"?(t=(t||"").replace(/[^a-z0-9]*/gi,""),n=i._setOption.call(this,e,t)):n=i._setOption.apply(this,arguments);switch(e){case"action":case"url":case"text":case"tooltip":this._viewModel[e](t);break;case"click":this.element.fxButton({click:t})}return e==="disabled"&&this.element.fxButton("option","disabled",t),n}}),e.fxs.fxsCommand.SubCommand=function(){this.id=null,this.text=n.observable(),this.click=null,this.disabled=n.observable(!1),this.onMouseOver=null,this.onMouseOut=null},e.fxs.fxsCommand.Command=function(){this.action=n.observable(),this.url=n.observable(),this.text=n.observable(),this.tooltip=n.observable(),this.subCommands=n.observableArray()}}(jQuery,jQuery.Widget,ko),function(e,t,n,r){var i={},s=e.Callbacks(),o=t.Communication.Receiver.getReceiver(),u=t.Namespace.define("Impl.UI.Commands",{addListener:function(e){s.add(e)},removeListener:function(e){s.remove(e)},_sync:function(r,s,o){var a=r===null,f=this,l,c;return r=r||t.Utilities.newGuid(),s.widgetOptions.action&&(s.widgetOptions.url=n.getContentUrl("Content/Images/icons-action-32-sprites.png")),i[r]=i[r]||{widget:e("<div />").fxsCommand(),group:s.widgetOptions.group,widgetOptions:s.widgetOptions,subCommands:s.subCommands},this.receiver.holdArgument(s),a?(l=i[r].widget.data("fxs-fxsCommand"),c=l.destroy,this.receiver.holdArgument(o),l.destroy=function(){o(),u._releaseSubCommands.call(f,i[r].widget),f.receiver.releaseArgument(i[r].widget.fxsCommand("option","click")),f.receiver.releaseArgument(o),c.apply(this,arguments),delete i[r]}):(u._setWidgetOptions.call(this,i[r].widget,s.widgetOptions),u._setSubCommands.call(this,i[r].widget,s.subCommands)),r},_setWidgetOptions:function(e,t){t.click&&(this.receiver.releaseArgument(e.fxsCommand("option","click")),this.receiver.holdArgument(t.click)),e.fxsCommand(t)},_releaseSubCommands:function(e){var t=e.fxsCommand("getViewModel").subCommands(),n=t.length;while(n--)this.receiver.releaseArgument(t[n].click)},_setSubCommands:function(e,t){u._releaseSubCommands.call(this,e),e.fxsCommand("removeAllSubCommands"),t&&(t.forEach(function(e){e.click&&this.receiver.holdArgument(e.click)},this),e.fxsCommand("addSubCommands",t))},_remove:function(e){var t=[].slice.call(arguments),n=[];t.forEach(function(e){var t=i[e];t&&n.push(t)}),s.fire("REMOVE",n)},_clear:function(e){for(var t in i)i.hasOwnProperty(t)&&(e===null||i[t].group===e)&&u._remove(t)},_add:function(){var e=[].slice.call(arguments),t=[];e.forEach(function(e){var n=i[e];n&&t.push(n)}),s.fire("ADD",t),e.forEach(function(e){var t=i[e];t&&(u._setWidgetOptions.call(this,t.widget,t.widgetOptions),u._setSubCommands.call(this,t.widget,t.subCommands),t.widgetOptions=null,t.subCommands=null)},this)}});o.addMethod("Impl.UI.Commands.sync",u._sync),o.addMethod("Impl.UI.Commands.remove",u._remove),o.addMethod("Impl.UI.Commands.clear",u._clear),o.addMethod("Impl.UI.Commands.add",u._add)}(jQuery,Shell,this.fx.resources),function(e,t,n,r){var i=t.prototype,s;n.Resources&&n.Resources.getResources&&(s=n.Resources.getResources("fx.regions")),e.widget("fxs.fxsRegionPicker",t,{options:{selectableRegions:[],selectedRegion:null},_create:function(){var e=this.options.selectableRegions,t=this.options.selectedRegion;e=e||[],this.element.addClass("fxs-regionpicker"),this._setOption("selectableRegions",e),this._setOption("selectedRegion",t),i._create.call(this,this._getName)},_destroy:function(){this.element.removeClass("fxs-regionpicker"),this._super()},_validateOptions:function(t,n){e.each(t,function(e,t){if(!s[t])throw"The region '{0}' is not a supported region.".format(t)});if(n&&t.indexOf(n)===-1)throw"The selected region '{0}' is not a selectable region.".format(n)},_setOption:function(e,t){return e==="selectableRegions"?(this._validateOptions(t,this.options.selectedRegion),t.sort(function(e,t){var n=s[e],r=s[t];return n<r?-1:n>r?1:0}),i._setSelectableItems.call(this,t)):e==="selectedRegion"&&(this._validateOptions(this.options.selectableRegions,t),i._setSelectedItem.call(this,t)),i._setOption.apply(this,arguments)},_getName:function(e){return s[e]?s[e]:e}})}(jQuery,jQuery.fxs.fxsPicker,this),function(e,t,n,r,i,s,o){var u=t.prototype,a="fxs.fxsCustomerSupport",f=0,l="__fxs-customersupport",c={failedToRetrieveSku:1,rdfeMintMisMatch:2},h={billing:"billing",technical:"technical"},p={name:"free",code:0,supportTypeKeys:[h.billing]},d={name:"proDirect",code:3,languages:["en-us"]},v=s.getClasses("fx.fxDialog"),m=function(){return l+f++},g=function(){var e=s.getStrings("fxs.fxsCustomerSupport");return e.loading=e.validating,e},y="<div class='fxs-customersupport-title'><h2><span data-bind='text: options.text.title'></span></h2></div><div class='fxs-customersupport-body'><div class='fxs-customersupport-manage-section'><div class='fxs-customersupport-subtitle' data-bind='text: options.text.otherOptionsTitle'></div><ul><li><a class='fxs-customersupport-premier' data-bind='text: options.text.premierLinkText, attr: { href: options.url.premierSupport }' target='_blank'></a></li><li><a href='#' class='fxs-customersupport-msdn' data-bind='text: options.text.msdnLinkText'></a></li></ul><div class='fxs-customersupport-subtitle fxs-customersupport-viewincidents' data-bind='text: options.text.viewIncidentsTitle'></div><input type='button' class='fxs-customersupport-manage' data-bind='value: options.text.manageButton' /></div><div class='fxs-customersupport-create-section'><div class='fxs-customersupport-subtitle' data-bind='text: options.text.createIncidentTitle'></div><div class='fxs-customersupport-form-item'><label class='fxs-customersupport-subscriptions-label' data-bind='text: options.text.subscription'></label><select class='fxs-customersupport-subscriptions fxs-customersupport-options' data-bind='options: model.subscriptions, optionsText: \"subscriptionName\", value: model.subscription'></select></div><div class='fxs-customersupport-form-item' data-bind='css: { \"fxs-customersupport-first-option-disabled\": model.supportTypes().length > 1, \"fxs-customersupport-option-required\": model.supportTypeRequired, \"fxs-customersupport-selected-option-dimmed\": !model.supportType() }'><label class='fxs-customersupport-types-label' data-bind='text: options.text.supportType'></label><select class='fxs-customersupport-types' data-bind='foreach: model.supportTypes, value: model.supportType'><option data-bind='value: $data.supportTypeValue, text: $data.supportTypeText, enable: $data.supportTypeValue'></option></select></div><div class='fxs-customersupport-form-item'><label class='fxs-customersupport-regions-label' data-bind='text: options.text.region'></label><div class='fxs-customersupport-regions'></div></div><div class='fxs-customersupport-form-item'><label class='fxs-customersupport-languages-label' data-bind='text: options.text.language'></label><div class='fxs-customersupport-languages'></div></div></div><div class='fxs-customersupport-message-container'></div><div class='fxs-customersupport-create-container'><a data-bind='css: { \"fxs-customersupport-disabled\": model.enableCreate() === false }'><span data-bind='attr: { \"class\": 'sprite ' + options.class_.createIconImage }'></span><span data-bind='text: options.text.createButton'></span></a></div></div>",b=e.templates("<img class='fxs-customersupport-message-icon' alt='' src='{{attr:iconUrl}}' /><div class='fxs-customersupport-message-text'>{{>message}}{{if linkUrl}} <a href='{{attr:linkUrl}}' target='_blank'>{{>linkText}}</a>{{/if}}</div>"),w=e.templates("<img class='fxs-customersupport-message-icon' alt='' src='{{attr:iconUrl}}' /><div class='fxs-customersupport-message-text'><strong>{{>supportPlanLabel}}:</strong> {{>supportPlanName}}<div class='fxs-customersupport-message-details'>{{:details}}</div></div>"),E=["AE","AR","AT","AU","AZ","BE","BG","BH","BR","BY","CA","CH","CL","CO","CR","CY","CZ","DE","DK","DO","DZ","EC","EE","EG","ES","FI","FR","GB","GR","GT","HK","HR","HU","ID","IE","IL","IN","IS","IT","JO","JP","KE","KR","KW","KZ","LI","LT","LK","LU","LV","MA","ME","MK","MT","MX","MY","NG","NL","NO","NZ","OM","PA","PE","PH","PK","PL","PR","PT","PY","QA","RO","RS","RU","SA","SE","SG","SI","SK","SV","TH","TN","TR","TT","TW","UA","US","UY","VE","ZA"];e.widget(a,t,{options:{languages:["en-us"],supportTypeKeys:[h.billing,h.technical],defaultLanguage:"en-us",regions:E,defaultRegion:"US",supportSkuSettings:[d,p],enableMessageAnimation:!1,windowOpenHandler:function(e){n.open(e)},subscriptionListProvider:null,supportEntitlementProvider:null,url:{createIncident:"/Support/Create",viewIncidents:"/Support/List",loadingIcon:null,errorIcon:null,informationIcon:null},class_:{createIconImage:v.ok,createIconHoverImage:v.okHover},text:g()},_viewModel:null,_clickHandler:null,_defaultSupportTypes:null,_create:function(){var t=this;this.element.text(this.options.text.title).attr("title",this.options.text.iconAlternate).addClass("fxs-customersupport").on("click",this._clickHandler=function(e){e.stopPropagation(),e.preventDefault(),t.show()}),this._defaultSupportTypes=e.map(this.options.supportTypeKeys,function(e){return{supportTypeValue:e,supportTypeText:t.options.text[e]}}),this._defaultSupportTypes.length>1&&this._defaultSupportTypes.splice(0,0,{supportTypeValue:"",supportTypeText:this.options.text.chooseSupportType}),u._create.call(this)},_destroy:function(){this.element.removeClass("fxs-customersupport").empty(),this._clickHandler&&(this.element.off("click",this._clickHandler),this._clickHandler=null),this._super()},show:function(){var t=this;r.UI.DialogPresenter.show({extension:"NotAnExtension",name:"Support",closeOnEscape:!0,template:e.templates(y),showOk:!1,init:function(){var n=m(),s=m(),o=m(),u=m(),a=this.element.find(".fxs-customersupport-languages"),f=this.element.find(".fxs-customersupport-types"),l=this.element.find(".fxs-customersupport-create-container").find("a"),c=this.element.find(".fxs-customersupport-message-container");t._viewModel=new e.fxs.fxsCustomerSupport.ViewModel,t._viewModel.region=t.options.defaultRegion,t._viewModel.language=t.options.defaultLanguage,t._viewModel.supportTypes(t._defaultSupportTypes),t._viewModel.supportType(t._defaultSupportTypes[0].supportTypeValue),t._viewModel.enableMessageAnimation(t.options.enableMessageAnimation),t._populateSubscriptions(),i.applyBindings({model:t._viewModel,options:t.options},this.element[0]),this.element.addClass("fxs-customersupport-dialog").find(".fxs-customersupport-manage").on("click",function(e){var n=t.options.url.viewIncidents,i=new r.Utilities.QueryStringBuilder;e.stopPropagation(),e.preventDefault(),i.set({language:t._viewModel.language}),t.options.windowOpenHandler(n+i.toString(!0))}).end().find(".fxs-customersupport-msdn").on("click",function(e){var n=t._viewModel,i=t.options.url.createIncident,s=new r.Utilities.QueryStringBuilder;s.set({lang:n.language,c:n.region,st:h.technical,si:n.subscription().subscriptionId,msdn:!0}),e.stopPropagation(),e.preventDefault(),t.options.windowOpenHandler(i+s.toString(!0))}).end().find(".fx-dialog-ok").hide().end().find(".fxs-customersupport-message-container").hide().end().find(".fxs-customersupport-subscriptions-label").attr("for",n).end().find(".fxs-customersupport-subscriptions").attr("id",n).on("change",function(){t._beginLoadSubscription(t._viewModel.subscription())}).end().find(".fxs-customersupport-types-label").attr("for",s).end().find(".fxs-customersupport-options").fxDropdown().end().find(".fxs-customersupport-regions").fxsRegionPicker({selectableRegions:t.options.regions,selectedRegion:t.options.defaultRegion,showOk:!1,selectionChange:function(e){t._viewModel.region=e}}).end().find(".fxs-customersupport-regions-label").attr("for",o).end().find(".fxs-customersupport-regions").find("select").attr("id",o).end().end().find(".fxs-customersupport-languages-label").attr("for",u),t._setupCreateIncidentHandler(l),t._setupMessageChangeHandler(c),t._setupSupportTypesChangeHandler(f,s),t._setupLanguagesChangeHandler(a,u),t._beginLoadSubscription(t._viewModel.subscription()),t._trigger("open")}})},_getMessageWithPlanHtml:function(e,t){return w.render({iconUrl:this.options.url.informationIcon,supportPlanLabel:this.options.text.supportPlan,supportPlanName:e,details:t})},_setupSupportTypesChangeHandler:function(e,t){e.attr("id",t).fxDropdown(),this._viewModel.supportTypes.subscribe(function(){e.fxDropdown()})},_setupLanguagesChangeHandler:function(t,n){var r=this;t.find("select").attr("id",n).end().fxsLanguagePicker({selectableCultures:r.options.languages,selectedCulture:r.options.defaultLanguage,showOk:!1,selectionChange:function(e){r._viewModel.language=e}}),r._viewModel.languages.subscribe(function(n){e.inArray(r._viewModel.language,n)===-1&&(t.fxsLanguagePicker("option","selectableCultures",r.options.languages),t.fxsLanguagePicker("option","selectedCulture",n[0])),t.fxsLanguagePicker("option","selectableCultures",n)})},_setupCreateIncidentHandler:function(t){var n=this,r=t.find("span.sprite");n._viewModel.enableCreate.subscribe(function(i){i?t.attr("href","#").on("click",e.proxy(n._createIncidentHandler,n)).on("mouseenter",function(){r.removeClass(n.options.url.createIconImage).addClass(n.options.url.createIconHoverImage)}).on("mouseleave",function(){r.removeClass(n.options.url.createIconHoverImage).addClass(n.options.url.createIconImage)}):t.removeAttr("href").off("click mouseenter mouseleave")})},_setupMessageChangeHandler:function(e){var t=this;t._viewModel.messageHtml.subscribe(function(n){t._viewModel.enableMessageAnimation()?e.slideUp(function(){e.html(n),e.slideDown()}):(e.html(n),e.show())})},_populateSubscriptions:function(){var t=this;if(!this.options.subscriptionListProvider)return;e.each(this.options.subscriptionListProvider(),function(e,n){t._viewModel.subscriptions.push({subscriptionId:n.SubscriptionID,subscriptionName:n.UnambiguousSubscriptionName,languages:null,supportTypeKeys:null,validationToken:null,message:null,enableCreate:!1})})},_beginLoadSubscription:function(e){var t=this;this._viewModel.messageHtml(b.render({iconUrl:this.options.url.loadingIcon,message:this.options.text.loading})),this._viewModel.enableCreate(!1),this._trigger("entitlementLoading",null,e),e.validationToken?(this._endLoadSubscription(e),this._trigger("entitlementLoaded",null,e)):this.options.supportEntitlementProvider&&this.options.supportEntitlementProvider(e.subscriptionId).done(function(n){t._getSupportEntitlementSuccess(e,n)}).fail(function(){t._getSupportEntitlementFailure(e)}).always(function(){t._endLoadSubscription(e),t._trigger("entitlementLoaded",null,e)})},_endLoadSubscription:function(t){this._viewModel.messageHtml(t.messageHtml),this._viewModel.enableCreate(t.enableCreate),t.languages?this._viewModel.languages(t.languages):this._viewModel.languages(this.options.languages),t.supportTypeKeys?this._viewModel.supportTypes(e.grep(this._defaultSupportTypes,function(n){return e.inArray(n.supportTypeValue,t.supportTypeKeys)>=0})):this._viewModel.supportTypes(this._defaultSupportTypes)},_getSupportEntitlementSuccess:function(t,n){var i=this.options,s="[customerSupportMessage|{0}|{1}|_blank]",o=e.grep(i.supportSkuSettings,function(e){return e.code===n.supportPlanSku});o.length>0&&(t.languages=o[0].languages,t.supportTypeKeys=o[0].supportTypeKeys),t.validationToken=n.validationToken,n.supportPlanErrorCode===c.rdfeMintMisMatch?(t.enableCreate=!1,t.messageHtml=b.render({iconUrl:i.url.errorIcon,message:i.text.errorRdfeMintMissmatch,linkUrl:i.url.customerService,linkText:i.text.customerService})):n.supportPlanErrorCode===c.failedToRetrieveSku?(t.enableCreate=!0,t.messageHtml=b.render({iconUrl:i.url.informationIcon,message:i.text.errorRetrievingPlan.format(n.supportPlanName)})):n.supportPlanSku===0?(t.enableCreate=!0,t.messageHtml=this._getMessageWithPlanHtml(i.text.supportPlanFree,r.Utilities.SafeMarkup.create(i.text.purchasePlanMessageFormat.format(s.format(r.Utilities.SafeMarkup.getText(i.text.purchasePlanLinkText),r.Utilities.SafeMarkup.getText(i.url.purchaseSupport)))))):(t.enableCreate=!0,t.messageHtml=this._getMessageWithPlanHtml(n.supportPlanName))},_getSupportEntitlementFailure:function(e){var t=this.options;t.text.error&&t.text.error[t.text.error.length-1]!=="."&&(t.text.error+="."),e.enableCreate=!1,e.messageHtml=b.render({iconUrl:t.url.errorIcon,message:t.text.error,linkUrl:t.url.customerService,linkText:t.text.customerService})},_createIncidentHandler:function(e){var t=this._viewModel,n=t.subscription(),i=new r.Utilities.QueryStringBuilder,s=this.options.url.createIncident;t.enableValidation(!0),t.supportType()&&(i.set({lang:t.language,c:t.region,si:n.subscriptionId,st:t.supportType(),val:n.validationToken}),this.options.windowOpenHandler(s+i.toString(!0))),e.preventDefault()}}),e.fxs.fxsCustomerSupport.ViewModel=function(){this.supportTypes=i.observableArray([]),this.subscriptions=i.observableArray([]),this.languages=i.observableArray([]),this.region=null,this.language=null,this.supportType=i.observable(),this.subscription=i.observable(),this.messageHtml=i.observable(),this.enableCreate=i.observable(!1),this.enableMessageAnimation=i.observable(!1),this.enableValidation=i.observable(!1),this.supportTypeRequired=i.computed(function(){return this.enableValidation()&&!this.supportType()},this)}}(jQuery,jQuery.Widget,this,Shell,ko,this.fx.resources),function(e,t,n,r){function o(r,o){var u=new n.Utilities.QueryStringBuilder(e.location.search),a=u.containsKey("getSupport"),f=t(".fxs-avatarbar-customersupport"),l=f.find("a");i.holdArgument(o),n.Environment.getCustomerSupportEnabled()&&f.show(),l.fxsCustomerSupport({enableMessageAnimation:!0,url:r.url,text:r.text,languages:n.Environment.getCustomerSupportLanguages(),subscriptionListProvider:function(){return r.subscriptions},open:function(){s=s.slice(-10)},supportEntitlementProvider:function(e){return n.Net.ajaxPost({url:r.url.entitlementService,data:{si:e}}).then(function(e){return s.push(e),o(s),{supportPlanErrorCode:e.SupportPlanErrorCode,supportPlanName:e.SupportPlanName,supportPlanSku:e.SupportPlanSku,validationToken:e.ValidationToken}})}}),a&&l.fxsCustomerSupport("show")}var i=n.Communication.Receiver.getReceiver(),s=[];n.Namespace.define("Impl.UI.CustomerSupport",{initialize:o}),i.addMethod("Impl.UI.CustomerSupport.initialize",o)}(this,jQuery,Shell),function(e,t,n,r,i,s){var o="fxs.fxsDialog",u=0,a="__fxs-dialog",f=t.prototype,l=70,c="<div class='fxs-dialog-content'><h1 class='fxs-dialog-title' data-bind='text: data.title'></h1><div class='fxs-dialog-mainpanel'><div class='fxs-dialog-datacontent' data-bind='html: data.content'></div><iframe class='fxs-dialog-dataurl' data-bind='attr: { src: $root.func._getUrlWithQueryStringParameter(data.dataUrl(), \"dialogId\", data.id) }'></iframe></div><div class='fxs-dialog-navigation'><div class='fxs-dialog-navigation-complete'><a data-bind='attr: { href: data.completeButtonEnabled() ? \"#\" : null }'><span class='sprite'></span></a></div></div><div class='fxs-dialog-close'><a href='#'><span class='sprite'></span></a></div></div>",h=function(){return a+u++};e.widget(o,t,{options:{closing:e.noop,close:e.noop,activate:e.noop,deactivate:e.noop,completeButtonEnabled:!0,title:"",dataUrl:"",showProgress:!1,useUrl:!1,size:[800,640],class_:r.getClasses(o),text:r.getStrings(o)},_viewModel:null,_bindingsApplied:!1,_completeHandler:null,_closeHandler:null,_contentSize:null,_subscriptions:null,_create:function(){var t=this,n;this._setViewModel(new e.fxs.fxsDialog.Dialog),n=this._viewModel.id+"_title",this.element.addClass("fxs-dialog").attr("aria-labelledby",n).html(c).find(".fxs-dialog-navigation-complete a").attr("title",this.options.text.complete).find("span.sprite").addClass(this.options.class_.complete).end().end().find(".fxs-dialog-close a").attr("title",this.options.text.close).find("span.sprite").addClass(this.options.class_.close).end().end().find(".fxs-dialog-title").attr("id",n).end().on("click",".fxs-dialog-navigation-complete a[href]",this._completeHandler=function(){return t._completeClicked.apply(t,arguments)}).on("click",".fxs-dialog-close a[href]",this._closeHandler=function(){return t._closeClicked.apply(t,arguments)}),this._setOption("title",this.options.title),this._setOption("dataUrl",this.options.dataUrl),this._setOption("completeButtonEnabled",this.options.completeButtonEnabled),this._setOption("showProgress",this.options.showProgress),this._setOption("useUrl",this.options.useUrl),this._setOption("size",this.options.size),f._create.call(this),this.element.addClass("fxs-dialog").html(this.options.content),f._create.call(this)},_destroy:function(){this.element.removeClass("fxs-dialog").removeAttr("aria-labelledby").empty(),this._completeHandler&&(this.element.off("click",this._completeHandler),this._completeHandler=null),this._closeHandler&&(this.element.off("click",this._closeHandler),this._closeHandler=null),this._unsubscribe(),this._super()},open:function(){f.open.call(this),this._bindingsApplied||(i.applyBindings({data:this._viewModel,func:this},this.element[0]),this._bindingsApplied=!0,this.options.activate&&this.options.activate({dialog:this._viewModel,element:this.element.find(".fxs-dialog-mainpanel")[0]}),this._setSize())},close:function(e){if(this.options.deactivate&&this.options.deactivate({dialog:this._viewModel,element:this.element.find(".fxs-dialog-mainpanel")[0]})===!1)return!1;if(this.options.closing&&this.options.closing({completed:!!e,dialog:this._viewModel})===!1)return!1;this._trigger("close"),this.element.is(":data(fxs-fxsKeyboardModal)")&&this.element.fxsKeyboardModal("destroy")},getContentSize:function(){return this._contentSize},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_completeClicked:function(e){e.preventDefault(),this.close(!0)},_closeClicked:function(e){e.preventDefault(),this.close(!1)},_setSize:function(){var e=this.element.find(".fxs-dialog-datacontent, .fxs-dialog-dataurl"),t=parseInt(e.css("top"),10);this.element.find(".fxs-dialog-content").css({width:this.options.size[0],height:this.options.size[1]}),this._contentSize=[this.options.size[0],this.options.size[1]-t-l],e.css({width:this._contentSize[0],height:this._contentSize[1]})},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){this._subscriptions=this._subscriptions||[],this._unsubscribe()},_getUrlWithQueryStringParameter:function(){return n.getUrlWithQueryStringParameter.apply(null,arguments)},_setOption:function(e,t){var n=f._setOption.apply(this,arguments);switch(e){case"title":case"dataUrl":case"completeButtonEnabled":case"showProgress":this._viewModel[e](t);break;case"useUrl":t?this.element.addClass("fxs-dialog-usingiframe"):this.element.removeClass("fxs-dialog-usingiframe");break;case"size":this._setSize()}return n}}),e.fxs.fxsDialog.Dialog=function(){this.id=h(),this.title=i.observable(),this.completeButtonEnabled=i.observable(!0),this.showProgress=i.observable(!1),this.content=i.observable(),this.dataUrl=i.observable()}}(jQuery,jQuery.fxs.fxsModalBase,this.fx.utilities,this.fx.resources,ko),function(e,t,n,r,i,s){var o={},u=n.Communication.Receiver.getReceiver(),a=function(){return o},f=function(e,t,n,r,i){e?e(t).done(function(e){if(n&&e===!1)return;i&&i()}).fail(r):i&&i()},l=function(e){e&&u.releaseArgument(e)},c=function(e){e&&u.holdArgument(e)},h=function(e){e.closing=function(e){var t=a()[e.dialog.id],n,r;return t.internalClosingOperation?(t.internalClosingOperation=!1,!0):(r={completed:e.completed,dialog:e.dialog.id,data:t.data},n={dialog:e.dialog.id},f(e.dialog.deactivate,n,!0,t.viewModel.error,function(){f(e.dialog.closing,r,!0,t.viewModel.error,function(){t.internalClosingOperation=!0,t.dialog.fxsDialog("close")})}),!1)}},p=function(e){var n=t.extend({},e);return h(n),n},d=function(e,n,r){e.viewModel.contentLoadingDeferred=t.Deferred(),e.viewModel.contentLoadingDeferred.done(function(){f(e.viewModel.activate,n,!1,e.viewModel.error,r)}).always(function(){e.viewModel.contentLoadingDeferred=null})},v=function(e,r){var i,s,o=t("<div />"),f=new Impl.UI.Dialogs.DialogInfo,l,c,h;return i=p(e),i.useUrl=!0,l=o.fxsDialog(i),s=o.fxsDialog("getViewModel"),s.id=n.Utilities.newGuid(),c=l.data("fxs-fxsDialog"),h=c.destroy,u.holdArgument(r),c.destroy=function(){r(),u.releaseArgument(s),u.releaseArgument(r),h.apply(this,arguments),delete a()[s.id]},f.dialog=o,f.viewModel=s,f.data={},a()[s.id]=f,s.id},m=function(e){var t=a()[e],n;if(!t)throw"The dialog cannot be found.";try{r.UI.Dialogs.ModalPresenter.open(t.dialog)}catch(i){t.viewModel.error&&t.viewModel.error(i)}n={dialog:e,data:t.data},d(t,n)},g=function(e,t,n){var r=a()[e];if(!r)throw"The dialog cannot be found.";r.dialog.fxsDialog("option",t,n)},y=function(e,t){var n=a()[e];if(!n)throw"The dialog cannot be found.";l(n.viewModel.closing),c(t),n.viewModel.closing=t},b=function(e,t){var n=a()[e];if(!n)throw"The dialog cannot be found.";l(n.viewModel.error),c(t),n.viewModel.error=t},w=function(e){var t=a()[e];if(!t)throw"The dialog cannot be found.";t.viewModel.isLoaded=!0,t.viewModel.contentLoadingDeferred&&t.viewModel.contentLoadingDeferred.resolve()},E=function(e,t){var n=a()[e];if(!n)throw"The dialog cannot be found.";l(n.viewModel.activate),c(t),n.viewModel.activate=t},S=function(e,t){var n=a()[e];if(!n)throw"The dialog cannot be found.";l(n.viewModel.deactivate),c(t),n.viewModel.deactivate=t},x=function(e,t){var n=a()[e];if(!n)throw"The dialog cannot be found.";n.data=t};n.Namespace.define("Impl.UI.Dialogs.Dialogs",{create:v,open:m,update:g,setClosing:y,ready:w,setActivate:E,setDeactivate:S,setDialogData:x}),r.UI.Dialogs.DialogInfo=function(){this.dialogOptions=null,this.dialog=null,this.viewModel=null,this.internalClosingOperation=!1},u.addMethod("Impl.UI.Dialogs.Dialog.create",v),u.addMethod("Impl.UI.Dialogs.Dialog.open",m),u.addMethod("Impl.UI.Dialogs.Dialog.update",g),u.addMethod("Impl.UI.Dialogs.Dialog.setClosing",y),u.addMethod("Impl.UI.Dialogs.Dialog.setError",b),u.addMethod("Impl.UI.Dialogs.Dialog.ready",w),u.addMethod("Impl.UI.Dialogs.Dialog.setActivate",E),u.addMethod("Impl.UI.Dialogs.Dialog.setDeactivate",S),u.addMethod("Impl.UI.Dialogs.Dialog.setDialogData",x)}(this,jQuery,Shell,Impl,ko),function(e,t,n,r,i,s){var o="fxs.fxsWizard",u=0,a="__fxs-wizard",f=0,l="__fxs-wizard-step",c=75,h=t.prototype,p="<div class='fxs-wizard-content'><div class='fxs-wizard-alert' data-bind='activateWidget: \"fxsToastBox\", fxcontrol-options: { data: data.alert }'></div><h1 class='fxs-wizard-title' data-bind='text: data.title'></h1><ol class='fxs-wizard-aroundsteps fxs-wizard-previoussteps' data-bind='foreach: { data: data.steps }'><li data-bind='attr: { \"aria-hidden\": $root.func._isBladeHidden.call($root.func, \"backward\", $data) }'><a class='fxs-wizard-stepnumber' data-bind='attr: { href: $root.func._isBladeHidden.call($root.func, \"backward\", $data) || locked() ? null : \"#\" }, style: { background: $root.func._getColor($root.func._getStepIndex($data, $parent.data.steps()), $parent.data.steps().length) }'><span data-bind='text: $parent.func._getStepIndex($data, $parent.data.steps()) + 1'></span></a></li></ol><ol class='fxs-wizard-mainpanel' data-bind='foreach: {data: data.steps, afterRender: function(element, step) { func._afterRender.call(func, element, step); },beforeRemove: function(element, index, step) { func._beforeRemove.call(func, element, index, step); }}'><li data-bind='attr: { \"aria-hidden\": $parent.data.currentStep() !== $data }, css: { \"fxs-wizard-currentstep\": $parent.data.currentStep() === $data }'><div class='fxs-wizard-stepcontainer'><h2 class='fxs-wizard-steptitle' data-bind='text: title, attr: { title: title }'></h2><div class='fxs-wizard-stepcontent' data-bind='template: contentTemplateOptions'></div><iframe class='fxs-wizard-stepurl' data-bind='attr: { src: $root.func._getUrlWithQueryStringParameter($root.func._getUrlWithQueryStringParameter(url(), \"wizardId\", $parent.data.id), \"stepId\", id) }'></iframe></div></li></ol><ul class='fxs-wizard-navigation'><li data-bind='attr: { \"aria-hidden\": data.currentStepIndex() <= 0 }' class='fxs-wizard-navigation-previous'><a data-bind='attr: { href: func._isPreviousStepLocked() ? null : \"#\", title: data.currentStepIndex() < 0 ? \"\" : data.steps()[data.currentStepIndex()].previousLabel }'><div><span class='sprite'></span></div><span data-bind='text: data.currentStepIndex() < 0 ? \"\" : data.steps()[data.currentStepIndex()].previousLabel, css: {\"fxs-wizard-navigation-invisible\": (data.currentStepIndex() >= 0 && !data.steps()[data.currentStepIndex()].previousLabel()) } '></span></a></li><li data-bind='attr: { \"aria-hidden\": data.currentStepIndex() >= data.steps().length - 1 }' class='fxs-wizard-navigation-next'><a data-bind='attr: { href: func._isNextStepLocked() ? null : \"#\", title: data.currentStepIndex() < 0 ? \"\" : data.steps()[data.currentStepIndex()].nextLabel }'><div><span class='sprite'></span></div><span data-bind='text: data.currentStepIndex() < 0 ? \"\" : data.steps()[data.currentStepIndex()].nextLabel, css: {\"fxs-wizard-navigation-invisible\": (data.currentStepIndex() >= 0 && !data.steps()[data.currentStepIndex()].nextLabel()) }'></span></a></li><li data-bind='attr: { \"aria-hidden\": data.currentStepIndex() !== data.steps().length - 1 || !data.completeButtonDisplayed }' class='fxs-wizard-navigation-complete'><a data-bind='attr: { href: data.completeButtonEnabled() ? \"#\" : null, title: data.currentStepIndex() < 0 ? \"\" : data.steps()[data.currentStepIndex()].completeLabel }'><div><span class='sprite'></span></div><span data-bind='text: data.currentStepIndex() < 0 ? \"\" : data.steps()[data.currentStepIndex()].completeLabel, css: {\"fxs-wizard-navigation-invisible\": (data.currentStepIndex() >= 0 && !data.steps()[data.currentStepIndex()].completeLabel()) } '></span></a></li></ul><ol class='fxs-wizard-aroundsteps fxs-wizard-nextsteps' data-bind='foreach: { data: data.steps, afterRender: function() { func._animateBlades.apply(func, arguments); } }, attr: { start: data.currentStepIndex() + 2 }'><li data-bind='attr: { \"aria-hidden\": $root.func._isBladeHidden.call($root.func, \"forward\", $data) }'><a class='fxs-wizard-stepnumber' data-bind='attr: { href: $root.func._isBladeHidden.call($root.func, \"forward\", $data) || locked() ? null : \"#\" }, style: { background: $root.func._getColor($root.func._getStepIndex($data, $parent.data.steps()), $parent.data.steps().length) }'><span data-bind='text: $parent.func._getStepIndex($data, $parent.data.steps()) + 1'></span></a></li></ol><div class='fxs-wizard-close'><a href='#'><span class='sprite'></span></a></div><div class='fxs-wizard-progress'></div></div>",d=30,v=function(){return l+f++},m=function(){return a+u++};e.widget(o,t,{options:{closing:e.noop,close:e.noop,stepActivate:e.noop,stepDeactivate:e.noop,stepMovePrevious:e.noop,stepMoveNext:e.noop,stepAfterAdd:e.noop,stepBeforeRemove:e.noop,autoLock:!0,completeButtonEnabled:!1,completeButtonDisplayed:!0,title:"",showProgress:!1,useUrl:!1,size:[800,640],class_:r.getClasses(o),text:r.getStrings(o)},_viewModel:null,_bindingsApplied:!1,_previousHandler:null,_nextHandler:null,_completeHandler:null,_closeHandler:null,_stepHandler:null,_animationDuration:350,_animationMovement:15,_contentSize:null,_subscriptions:null,_bladeStartingColor:[83,184,225],_bladeEndingColor:[30,131,174],_create:function(){var t=this,n;this._setViewModel(new e.fxs.fxsWizard.Wizard),n=this._viewModel.id+"_title",this.element.addClass("fxs-wizard").attr("aria-labelledby",n).html(p).find(".fxs-wizard-navigation-previous span.sprite").addClass(this.options.class_.previous).end().find(".fxs-wizard-navigation-next span.sprite").addClass(this.options.class_.next).end().find(".fxs-wizard-navigation-complete span.sprite").addClass(this.options.class_.complete).end().find(".fxs-wizard-close a").attr("title",this.options.text.close).find("span.sprite").addClass(this.options.class_.close).end().end().find(".fxs-wizard-title").attr("id",n).end().on("click",".fxs-wizard-navigation-previous a[href]",this._previousHandler=function(){return t._previousClicked.apply(t,arguments)}).on("click",".fxs-wizard-navigation-next a[href]",this._nextHandler=function(){return t._nextClicked.apply(t,arguments)}).on("click",".fxs-wizard-navigation-complete a[href]",this._completeHandler=function(){return t._completeClicked.apply(t,arguments)}).on("click",".fxs-wizard-close a[href]",this._closeHandler=function(){return t._closeClicked.apply(t,arguments)}).on("click","a.fxs-wizard-stepnumber[href]",this._stepHandler=function(){return t._stepClicked.apply(t,arguments)}),this._findBladeColors(),this._setOption("title",this.options.title),this._setOption("completeButtonEnabled",this.options.completeButtonEnabled),this._setOption("completeButtonDisplayed",this.options.completeButtonDisplayed),this._setOption("showProgress",this.options.showProgress),this._setOption("useUrl",this.options.useUrl),this._setOption("size",this.options.size),h._create.call(this)},_destroy:function(){this.element.removeClass("fxs-wizard fxs-wizard-usingiframe").removeAttr("aria-labelledby aria-busy").removeAttr("").empty(),this._previousHandler&&(this.element.off("click",this._previousHandler),this._previousHandler=null),this._nextHandler&&(this.element.off("click",this._nextHandler),this._nextHandler=null),this._completeHandler&&(this.element.off("click",this._completeHandler),this._completeHandler=null),this._closeHandler&&(this.element.off("click",this._closeHandler),this._closeHandler=null),this._stepHandler&&(this.element.off("click",this._stepHandler),this._stepHandler=null),this._unsubscribe(),this._super()},open:function(){var e=this._viewModel.steps();h.open.call(this),this._bindingsApplied||(i.applyBindings({data:this._viewModel,func:this},this.element[0]),this._bindingsApplied=!0,this._setSize()),e&&e.length>0&&this._goToStep(this._viewModel.currentStep()&&this._viewModel.currentStep()>=0?this._viewModel.currentStep():e[0])},close:function(e){var t,n,r,i;if(this._viewModel.currentStep())if(e){if(!this._checkGoToStep(null))return!1}else if(this.options.stepDeactivate){t=this._getStepChangingEventArgs(null);if(this.options.stepDeactivate(t)===!1)return!1}if(this.options.closing&&this.options.closing({completed:!!e,wizard:this._viewModel})===!1)return!1;this._trigger("close"),n=this._viewModel.steps(),r=n.length;for(i=0;i<r;i++)this._callBeforeRemove(n[i],this._getStepHtml(n[i],n));this.element.is(":data(fxs-fxsKeyboardModal)")&&this.element.fxsKeyboardModal("destroy")},setAlertMessage:function(e){this._viewModel.alert.content(e)},setShowAlert:function(e){this._viewModel.alert.open(e)},getCurrentStep:function(){return this._viewModel.currentStep()},getCurrentStepIndex:function(){return this._viewModel.currentStepIndex()},setCurrentStep:function(e){e.locked(!1),this._checkGoToStep(e)},addStep:function(t,n){var r=new e.fxs.fxsWizard.WizardStep;return i.mapping.fromJS(t,null,r),typeof n!="number"?this._viewModel.steps.push(r):this._viewModel.steps.splice(n,0,r),r},updateStep:function(e,t){e&&i.mapping.fromJS(t,null,e)},removeStep:function(e){e&&this._viewModel.steps.remove(e)},getContentSize:function(){return this._contentSize},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_findBladeColors:function(){var t=e("<div />").addClass("fxs-wizard-bladescolor").appendTo("body");this._bladeStartingColor=this._rgbToArray(t.css("color")),this._bladeEndingColor=this._rgbToArray(t.css("background-color")),t.remove()},_previousClicked:function(e){e.preventDefault(),this._checkGoToStep(this._viewModel.previousStep())},_nextClicked:function(e){e.preventDefault(),this._checkGoToStep(this._viewModel.nextStep())},_completeClicked:function(e){e.preventDefault(),this.close(!0)},_closeClicked:function(e){e.preventDefault(),this.close(!1)},_stepClicked:function(e){e.preventDefault(),this._checkGoToStep(i.contextFor(e.target).$data)},_getStepChangingEventArgs:function(e){var t=this._viewModel,n=t.currentStep(),r=t.steps(),i=t.currentStepIndex(),s=this._getStepIndex(e,r),o=this._getDirection(s,i),u=this._getStepHtml(n,r),a={wizard:this._viewModel,element:u,currentStep:n,newStep:e,direction:o};return a},_checkGoToStep:function(e){var t=this._getStepChangingEventArgs(e);if(e&&e.locked())return!1;switch(t.direction){case"backward":if(this.options.stepMovePrevious&&this.options.stepMovePrevious(t)===!1)return!1;break;case"forward":if(this.options.stepMoveNext&&this.options.stepMoveNext(t)===!1)return!1}return this.options.stepDeactivate&&this.options.stepDeactivate(t)===!1?!1:(this._goToStep(e),!0)},_getStepHtml:function(e,t){var n=this._getStepIndex(e,t);return this.element.find("ol.fxs-wizard-mainpanel > li").eq(n)[0]},_goToStep:function(t){var n=this._viewModel,r=n.steps(),i=n.currentStep(),s=this._getDirection(this._getStepIndex(t,r),this._getStepIndex(i,r)),o=s==="forward"?"backward":"forward",u={forward:{left:this._animationMovement,opacity:0},backward:{left:-this._animationMovement,opacity:0}},a;t&&(t!==i&&(n.showProgress()&&n.showProgress(!1),a=this.element.find(".fxs-wizard-mainpanel li.fxs-wizard-currentstep").addClass("fxs-wizard-willanimate"),n.currentStep(t),a.animate(u[o],this._animationDuration/2,function(){e(this).removeClass("fxs-wizard-willanimate")}),this.element.find(".fxs-wizard-mainpanel li.fxs-wizard-currentstep").css(u[s]).delay(175).animate({left:0,opacity:1},this._animationDuration/2)),this._animateBlades(),this.options.stepActivate&&this.options.stepActivate({wizard:this._viewModel,element:this._getStepHtml(t,r),oldStep:i,currentStep:t,direction:s}),this.element.find(".fxs-wizard-navigation-previous span").text(t.previousLabel()))},_animateBlades:function(){var e=this._viewModel,t=e.steps();this.element.find(".fxs-wizard-previoussteps").animate({left:-e.currentStepIndex()*d},this._animationDuration),this.element.find(".fxs-wizard-nextsteps").animate({right:-(t.length-1-e.currentStepIndex())*d},this._animationDuration)},_autoLockSteps:function(){var e,t,n,r,i=this._viewModel;if(this.options.autoLock){e=i.steps(),t=e.length,n=i.currentStepIndex(),r=n+1,e[r]&&e[r].locked(!1),r+=1;for(;r<t;r++)e[r].locked(!0);n===t-1?i.completeButtonEnabled(!0):i.completeButtonEnabled(!1)}},_getDirection:function(e,t){return e===t?"initial":e>t||e===-1?"forward":"backward"},_isPreviousStepLocked:function(){var e=this._viewModel.previousStep();return e&&e.locked()},_isNextStepLocked:function(){var e=this._viewModel.nextStep();return e&&e.locked()},_isBladeHidden:function(e,t){var n=this._viewModel,r=n.currentStepIndex(),i=this._getStepIndex(t,n.steps());return this._getDirection(i,r)!==e},_getHex:function(e,t,n){var r=e<<16|t<<8|n,i=r.toString(16);return"#"+Array(6-i.length+1).join("0")+i},_getColor:function(e,t){var n;return e>=0&t>1?(n=e/(t-1),this._getHex(this._bladeStartingColor[0]+(this._bladeEndingColor[0]-this._bladeStartingColor[0])*n,this._bladeStartingColor[1]+(this._bladeEndingColor[1]-this._bladeStartingColor[1])*n,this._bladeStartingColor[2]+(this._bladeEndingColor[2]-this._bladeStartingColor[2])*n)):this._getHex.apply(this,this._bladeStartingColor)},_rgbToArray:function(e){var t=0,n,r=[0,0,0];if(e&&e.length>1)if(e[0]==="#")e.length===4?(n=e.substring(1,2),n+=n,r[0]=parseInt(n,16),n=e.substring(2,3),n+=n,r[1]=parseInt(n,16),n=e.substring(3,4),n+=n,r[2]=parseInt(n,16)):(r[0]=parseInt(e.substring(1,3),16),r[1]=parseInt(e.substring(3,5),16),r[2]=parseInt(e.substring(5,7),16));else{e=e.match(/\d+(\.\d+)?%?/g);while(t<3)n=e[t],n.indexOf("%")!==-1&&(n=Math.round(parseFloat(n)*2.55)),r[t]=parseInt(n,10),t++}return r},_getStepIndex:function(e,t){return i.utils.arrayIndexOf(t,e)},_afterRender:function(e,t){this.options.stepAfterAdd&&this.options.stepAfterAdd({wizard:this._viewModel,step:t,element:e[0]})},_beforeRemove:function(e,t,n){this._callBeforeRemove(n,e),i.removeNode(e),this._goToStep(this._viewModel.currentStep())},_callBeforeRemove:function(e,t){this.options.stepBeforeRemove&&this.options.stepBeforeRemove({wizard:this._viewModel,step:e,element:t})},_setSize:function(){var e=this.element.find(".fxs-wizard-stepcontainer"),t=parseInt(e.css("marginTop"),10)+parseInt(e.css("marginBottom"),10);this.element.find(".fxs-wizard-content").css({width:this.options.size[0],height:this.options.size[1]}),this.element.find(".fxs-wizard-aroundsteps li a").css("height",this.options.size[1]),isNaN(t)||(this._contentSize=[this.options.size[0],this.options.size[1]-t-c],e.css({width:this.options.size[0],height:this.options.size[1]-t}),this.element.find(".fxs-wizard-stepcontent, .fxs-wizard-stepurl").css({width:this._contentSize[0],height:this._contentSize[1]-5}))},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this;this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.steps.subscribe(function(){t._setSize(),t._viewModel.showProgress()&&t._disableNavigationForNewStepIfExists()})),e.steps.notifySubscribers(e.steps()),this._subscriptions.push(e.currentStep.subscribe(function(){t._autoLockSteps()})),e.currentStep.notifySubscribers(e.currentStep()),this._subscriptions.push(e.showProgress.subscribe(function(e){t._showProgress(e)})),e.showProgress.notifySubscribers(e.showProgress())},_showProgress:function(e){var t=this.element.find(".fxs-wizard-progress"),n=this.element.find(".fxs-wizard-currentstep");e?(n.length>0&&n.addClass("fxs-wizard-hidden"),this.element.attr("aria-busy","true"),t.addClass("fxs-wizard-progress-active"),this._disableNavigationForProgress()):(n.length>0&&n.removeClass("fxs-wizard-hidden"),this.element.removeAttr("aria-busy"),t.removeClass("fxs-wizard-progress-active"),this._restoreNavigationStateAfterShowingProgress())},_disableNavigationForProgress:function(){var e=this._viewModel.steps(),t,n;for(n=0;n<e.length;n++)t=e[n],t.savedLockedState=t.locked(),t!==this._viewModel.currentStep()&&t.locked(!0);this._viewModel.savedCompleteButtonState=this._viewModel.completeButtonEnabled(),this._viewModel.completeButtonEnabled(!1)},_restoreNavigationStateAfterShowingProgress:function(){var e=this._viewModel.steps(),t,n;for(n=0;n<e.length;n++)t=e[n],t!==this._viewModel.currentStep()&&t.locked(t.savedLockedState),t.savedLockedState=s;this._viewModel.completeButtonEnabled(this._viewModel.savedCompleteButtonState),this._viewModel.savedCompleteButtonState=s},_disableNavigationForNewStepIfExists:function(){var e=this._viewModel.steps(),t,n;for(n=0;n<e.length;n++)t=e[n],t.savedLockedState===s&&(t.savedLockedState=t.locked(),t.locked(!0))},_getUrlWithQueryStringParameter:function(){return n.getUrlWithQueryStringParameter.apply(null,arguments)},_setOption:function(e,t){var n=h._setOption.apply(this,arguments);switch(e){case"title":case"completeButtonEnabled":case"completeButtonDisplayed":case"showProgress":this._viewModel[e](t);break;case"useUrl":t?this.element.addClass("fxs-wizard-usingiframe"):this.element.removeClass("fxs-wizard-usingiframe");break;case"size":this._setSize()}return n}}),e.fxs.fxsWizard.WizardStep=function(){this.id=v(),this.title=i.observable(),this.locked=i.observable(!0),this.contentTemplateOptions=i.observable(),this.content=i.observable(),this.url=i.observable(),this.previousLabel=i.observable(),this.nextLabel=i.observable(),this.completeLabel=i.observable(),this.locked=i.observable(!0)},e.fxs.fxsWizard.Wizard=function(){this.id=m();var t=i.observable();this.title=i.observable(),this.steps=i.observableArray(),this.completeButtonEnabled=i.observable(!0),this.completeButtonDisplayed=i.observable(!0),this.currentStep=i.computed({read:function(){return t()},write:function(e){e&&(t(e),e.locked(!1))},owner:this,deferEvaluation:!0}),this.currentStepIndex=i.computed(function(){return i.utils.arrayIndexOf(this.steps(),this.currentStep())},this),this.previousStep=i.computed(function(){return this.steps()[this.currentStepIndex()-1]||null},this),this.nextStep=i.computed(function(){return this.steps()[this.currentStepIndex()+1]||null},this),this.showProgress=i.observable(!1),this.lockOrUnlockNextSteps=function(e,t){var n,r,i,s=!1;if(!t){this.currentStep()&&this.lockOrUnlockNextSteps(e,this.currentStep());return}for(n=0,r=this.steps(),i=r.length;n<i;n++)s?r[n].locked(e):r[n]===t&&(s=!0)},this.lockOrUnlockPreviousSteps=function(e){var t,n,r;for(t=0,n=this.steps(),r=this.currentStepIndex();t<r;t++)n[t].locked(e)},this.alert=new e.fxs.fxsToastBox.ToastBox}}(jQuery,jQuery.fxs.fxsModalBase,this.fx.utilities,this.fx.resources,ko),function(e,t,n,r,i,s){var o={},u=n.Communication.Receiver.getReceiver(),a=function(){return o},f=function(e,t){return i.utils.arrayFirst(e.steps(),function(e){return e.id===t})},l=function(e,t,n,r,i){e?e(t).done(function(e){if(n&&e===!1)return;i&&i()}).fail(r):i&&i()},c=function(e){e&&u.releaseArgument(e)},h=function(e){e&&u.holdArgument(e)},p=function(e){e.closing=function(e){var t=a()[e.wizard.id],n,r,i;return e.completed?!0:t.internalClosingOperation?(t.internalClosingOperation=!1,!0):(r={completed:e.completed,wizard:e.wizard.id,data:t.data},i=function(){l(e.wizard.closing,r,!0,t.viewModel.error,function(){t.internalClosingOperation=!0,t.wizard.fxsWizard("close")})},e.wizard.currentStep()?(n={wizard:e.wizard.id,newStep:null,currentStep:e.wizard.currentStep().id},l(e.wizard.currentStep().deactivate,n,!0,t.viewModel.error,i)):i(),!1)}},d=function(e){e.stepMoveNext=function(e){var t=a()[e.wizard.id],n,r,i=e.currentStep;return t.internalSetStepOperation?(t.internalSetStepOperation=!1,!0):(n={wizard:e.wizard.id,currentStep:e.currentStep.id,direction:e.direction},n.newStep=e.newStep?e.newStep.id:null,l(i.moveNext,n,!0,t.viewModel.error,function(){l(i.deactivate,n,!0,t.viewModel.error,function(){var n;e.newStep?(r={wizard:e.wizard.id,currentStep:e.newStep.id,oldStep:e.currentStep.id,direction:e.direction,data:t.data},g(t,e.newStep,r,function(){t.internalSetStepOperation=!0,t.wizard.fxsWizard("setCurrentStep",e.newStep)})):(n={completed:!0,wizard:e.wizard.id,data:t.data},l(e.wizard.closing,n,!0,t.viewModel.error,function(){t.internalSetStepOperation=!0,t.wizard.fxsWizard("close",!0)}))})}),!1)}},v=function(e){e.stepMovePrevious=function(e){var t=a()[e.wizard.id],n,r;return t.internalSetStepOperation?(t.internalSetStepOperation=!1,!0):(n={wizard:e.wizard.id,currentStep:e.currentStep.id,newStep:e.newStep.id,direction:e.direction},r={wizard:e.wizard.id,currentStep:e.newStep.id,oldStep:e.currentStep.id,direction:e.direction,data:t.data},l(e.currentStep.movePrevious,n,!0,t.viewModel.error,function(){l(e.currentStep.deactivate,n,!0,t.viewModel.error,function(){g(t,e.newStep,r,function(){t.internalSetStepOperation=!0,t.wizard.fxsWizard("setCurrentStep",e.newStep)})})}),!1)}},m=function(e){var n=t.extend({},e);return p(n),d(n),v(n),n.stepActivate=null,n.stepDeactivate=null,n.close=null,n},g=function(e,n,r,i){n.isLoaded?l(n.activate,r,!1,e.viewModel.error,i):(n.contentLoadingDeferred=t.Deferred(),n.contentLoadingDeferred.done(function(){l(n.activate,r,!1,e.viewModel.error,i)}).always(function(){n.contentLoadingDeferred=null,e.viewModel.showProgress(!1)}),e.viewModel.showProgress(!0))},y=function(e,r){var i,s,o=t("<div />"),f=new Impl.UI.Dialogs.WizardInfo,l,c,h;return i=m(e),i.useUrl=!0,l=o.fxsWizard(i),s=o.fxsWizard("getViewModel"),s.id=n.Utilities.newGuid(),c=l.data("fxs-fxsWizard"),h=c.destroy,u.holdArgument(r),c.destroy=function(){r(),u.releaseArgument(s),u.releaseArgument(s.steps()),u.releaseArgument(r),h.apply(this,arguments),delete a()[s.id]},f.wizard=o,f.viewModel=s,f.data={},a()[s.id]=f,s.id},b=function(e){var t=a()[e],n,i;if(!t)throw"The wizard cannot be found.";try{r.UI.Dialogs.ModalPresenter.open(t.wizard)}catch(s){t.viewModel.error&&t.viewModel.error(s)}n=t.viewModel.steps(),n&&n.length>0&&(i={wizard:e,currentStep:n[0].id,oldStep:null,direction:"initial",data:t.data},g(t,n[0],i))},w=function(e,t,n){var r=a()[e];if(!r)throw"The wizard cannot be found.";r.wizard.fxsWizard("option",t,n)},E=function(e,t,n){var r=a()[e],i;if(!r)throw"The wizard cannot be found.";return n===null&&(n=s),i=r.wizard.fxsWizard("addStep",t,n),i.id},S=function(e,t,n,r){var i=a()[e],s,o={};if(!i)throw"The wizard cannot be found.";s=f(i.viewModel,t),s&&(o[n]=r,i.wizard.fxsWizard("updateStep",s,o))},x=function(e,t){var n=a()[e],r;if(!n)throw"The wizard cannot be found.";r=f(n.viewModel,t);if(r){u.releaseArgument(r),n.wizard.fxsWizard("removeStep",r);return}},T=function(e){var n=a()[e],r=[];if(!n)throw"The wizard cannot be found.";return t.each(n.viewModel.steps(),function(e,t){r.push(t.id)}),r},N=function(e){var t=a()[e],n;if(!t)throw"The wizard cannot be found.";n=t.viewModel.nextStep(),n?n.locked(!0):t.viewModel.completeButtonEnabled(!1)},C=function(e){var t=a()[e],n;if(!t)throw"The wizard cannot be found.";n=t.viewModel.nextStep(),n?n.locked(!1):t.viewModel.completeButtonEnabled(!0)},k=function(e,t){var n=a()[e];if(!n)throw"The wizard cannot be found.";c(n.viewModel.closing),h(t),n.viewModel.closing=t},L=function(e,t){var n=a()[e];if(!n)throw"The wizard cannot be found.";c(n.viewModel.error),h(t),n.viewModel.error=t},A=function(e,t){var n=a()[e],r;if(!n)throw"The wizard cannot be found.";r=f(n.viewModel,t),r.isLoaded=!0,r.contentLoadingDeferred&&r.contentLoadingDeferred.resolve()},O=function(e,t,n){var r=a()[e],i;if(!r)throw"The wizard cannot be found.";i=f(r.viewModel,t),i&&(c(i.activate),h(n),i.activate=n)},M=function(e,t,n){var r=a()[e],i;if(!r)throw"The wizard cannot be found.";i=f(r.viewModel,t),i&&(c(i.deactivate),h(n),i.deactivate=n)},_=function(e,t,n){var r=a()[e],i;if(!r)throw"The wizard cannot be found.";i=f(r.viewModel,t),i&&(c(i.moveNext),h(n),i.moveNext=n)},D=function(e,t,n){var r=a()[e],i;if(!r)throw"The wizard cannot be found.";i=f(r.viewModel,t),i&&(c(i.movePrevious),h(n),i.movePrevious=n)},P=function(e,t){var n=a()[e];if(!n)throw"The wizard cannot be found.";n.data=t};n.Namespace.define("Impl.UI.Dialogs.Wizard",{create:y,open:b,update:w,addStep:E,updateStep:S,removeStep:x,getSteps:T,disableNextButton:N,enableNextButton:C,setClosing:k,stepReady:A,setStepActivate:O,setStepDeactivate:M,setStepMoveNext:_,setStepMovePrevious:D,setWizardData:P}),r.UI.Dialogs.WizardInfo=function(){this.wizardOptions=null,this.wizard=null,this.viewModel=null,this.internalClosingOperation=!1,this.internalSetStepOperation=!1},u.addMethod("Impl.UI.Dialogs.Wizard.create",y),u.addMethod("Impl.UI.Dialogs.Wizard.open",b),u.addMethod("Impl.UI.Dialogs.Wizard.update",w),u.addMethod("Impl.UI.Dialogs.Wizard.addStep",E),u.addMethod("Impl.UI.Dialogs.Wizard.updateStep",S),u.addMethod("Impl.UI.Dialogs.Wizard.removeStep",x),u.addMethod("Impl.UI.Dialogs.Wizard.getSteps",T),u.addMethod("Impl.UI.Dialogs.Wizard.disableNextButton",N),u.addMethod("Impl.UI.Dialogs.Wizard.enableNextButton",C),u.addMethod("Impl.UI.Dialogs.Wizard.setClosing",k),u.addMethod("Impl.UI.Dialogs.Wizard.setError",L),u.addMethod("Impl.UI.Dialogs.Wizard.stepReady",A),u.addMethod("Impl.UI.Dialogs.Wizard.setStepActivate",O),u.addMethod("Impl.UI.Dialogs.Wizard.setStepDeactivate",M),u.addMethod("Impl.UI.Dialogs.Wizard.setStepMoveNext",_),u.addMethod("Impl.UI.Dialogs.Wizard.setStepMovePrevious",D),u.addMethod("Impl.UI.Dialogs.Wizard.setWizardData",P)}(this,jQuery,Shell,Impl,ko),function(e,t,n){var r=t.prototype,i="<ul class='fxs-drawercommands-commands-global' data-bind='foreach: { data: data.globalCommands, afterRender: func._attachElements }'><li></li></ul><ul class='fxs-drawercommands-commands-contextual' data-bind='foreach: { data: data.contextualCommands, afterRender: func._attachElements }'><li></li></ul>";e.widget("fxs.fxsDrawerCommands",t,{options:{globalCommands:null,contextualCommands:null},_viewModel:null,_create:function(){this._setViewModel(new e.fxs.fxsDrawerCommands.DrawerCommands),this._setOption("globalCommands",this.options.commands),this._setOption("contextualCommands",this.options.commands),this.element.addClass("fxs-drawercommands").html(i),ko.applyBindings({data:this._viewModel,func:this},this.element[0]),r._create.call(this)},_destroy:function(){this.element.removeClass("fxs-drawercommands"),this._super()},addCommands:function(e,t){var n={},r,i,s=[];for(r=0;r<e.length;r++)i=n[e[r].group]=n[e[r].group]||[],i.push(e[r].widget),s.push(e[r]);for(r in n)if(n.hasOwnProperty(r)){if(!this._isValidGroup(r))continue;typeof t!="number"&&(t=this._viewModel[r+"Commands"]().length),this._viewModel[r+"Commands"].splice.apply(this._viewModel[r+"Commands"],[t,0].concat(n[r]))}return s},removeCommands:function(e){e.forEach(function(e){if(!this._isValidGroup(e.group))return;this._viewModel[e.group+"Commands"].remove(e.widget)},this)},removeAllCommands:function(e){e?this._isValidGroup(e)&&this._viewModel[e+"Commands"]([]):(this._viewModel.globalCommands([]),this._viewModel.contextualCommands([]))},getViewModel:function(){return this._viewModel},_isValidGroup:function(e){return/^(global|contextual)$/.test(e)},_setViewModel:function(e){this._viewModel=e},_attachElements:function(t,n){e(t).hide().append(n).fadeIn()},_setOption:function(e,t){var n=r._setOption.apply(this,arguments);switch(e){case"globalCommands":this._viewModel.globalCommands(t||[]);break;case"contextualCommands":this._viewModel.contextualCommands(t||[])}return n}}),e.fxs.fxsDrawerCommands.DrawerCommands=function(){this.globalCommands=ko.observableArray(),this.contextualCommands=ko.observableArray()}}(jQuery,jQuery.Widget);var c=e.Widget,h=c.prototype,p="<div class='fxs-drawerdetails-details-box'></div>";e.widget("fxs.fxsDrawerDetails",c,{_viewModel:null,_subscriptions:null,_detailsDiv:null,_newExperimentDetails:null,_newDatasetDetails:null,_create:function(){this._detailsDiv=this.element.addClass("fxs-drawerdetails").html(p).find(".fxs-drawerdetails-details-box"),this._setViewModel(new e.fxs.fxsDrawerDetails.DrawerDetails),a.newExperimentFlowEnabled()&&(a.galleryInPlusNewInterimEnabled()?t.NewExperimentTemplateList.initializeTutorialTemplate(f.workspace):t.NewExperimentTemplateList.initialize(f.workspace)),h._create.call(this)},_destroy:function(){this._unsubscribe(),this.element.removeClass("fxs-drawerdetails").empty(),this._super()},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel),ko.applyBindings(this._viewModel,this.element[0])},_subscribe:function(e){var f=this;this._unsubscribe(),this._subscriptions=[],a.newExperimentFlowEnabled()?this._subscriptions.push(e.selectedItemId.subscribe(function(e){e==="NewExperimentMenuItem"?a.galleryInPlusNewInterimEnabled()?o.NewExperimentCatalogMenuInitialize():t.NewExperimentMenuInitialize():e==="Dataset"?n.NewDatasetMenuInitialize():e==="NewNotebookMenuItem"?a.iPythonNotebookEnabled()&&a.notebookPlusNewEnabled()&&r.NewNotebookMenuInitialize():e==="Module"?a.newCustomModuleUploadEnabled()&&(a.galleryModulesInPlusNewEnabled()?u.NewGalleryCustomModuleMenuInitialize():i.NewModuleMenuInitialize()):e==="NewProjectMenuItem"&&a.enableProjectBasedAssetsGroupingEnabled()&&s.NewProjectMenuInitialize(Exp.Drawer.close)})):this._subscriptions.push(e.text.subscribe(function(e){e&&f._detailsDiv.html(shell.Utilities.SafeMarkup.create(e))}))},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()}}),e.fxs.fxsDrawerDetails.DrawerDetails=function(){this.text=ko.observable(),this.selectedItemId=ko.observable()},function(e,t,n,r,i,s){var o=0,u="__fxs-menu-menu",f="fxs-menu-collapsed",l=n.prototype,c="<div class='fxs-menu-menu'><ul data-bind='foreach: { data: data.menuItems, beforeRemove: beforeRemoveFunction }'><li data-bind='attr: { \"aria-selected\": selected() ? \"true\" : \"false\",\"aria-disabled\": disabled() ? \"true\" : \"false\"}'><div class='fxs-menu-tablediv'><a href='#' data-bind='click: function() { if (!disabled()) { selected(true); }}' tabindex='-1'><div data-bind='attr: { \"class\": \"icon \" + id }'><img data-bind='attr: { src: image, alt: text }' /></div><div class='fxs-menu-text' data-bind='css: { \"fxs-menu-has-popout-icon\": showPopOutIcon() }'><div class='fxs-menu-itemtext' data-bind='text: text'></div><!-- ko if: isPreviewFeature() --><div class='fxs-menu-previewbadge'></div><!-- /ko --></div><!-- ko if: showPopOutIcon() --><span class='fxs-menu-popout-img sprite'></span><!-- /ko --></a></div></li></ul></div>",h=function(){return u+o++};e.widget("fxs.fxsMenu",n,{options:{maxWidth:-1,menuWidth:-1,openCloseDurationMs:400,select:e.noop,class_:i.getClasses("fxs.fxsMenu"),text:i.getStrings("fxs.fxsMenu")},_viewModel:null,_menuStack:null,_itemWithTabIndex:null,_focusCount:0,_hoverHandler:null,_focusHandler:null,_keyDownHandler:null,_collapsedMenuItemWidth:-1,_collapsedMenuItemOuterWidth:-1,_expandedMenuItemWidth:-1,_expandedMenuItemOuterWidth:-1,_originalExpandedMenuWidth:-1,_expandedMenuItemOuterWidthDiff:-1,_create:function(){this.element.addClass("fxs-menu"),this._menuStack=[],this._focusCount=0,this._calculateMenuItemSizes(),this.options.menuWidth!==-1&&this._setMenuWidth(this.options.menuWidth),this._setOption("text",this.options.text),this._setViewModel(new e.fxs.fxsMenu.Menu),this._setupHandlers(),l._create.call(this)},_destroy:function(){this.element.removeClass("fxs-menu").empty(),this._destroyMenus(),this._hoverHandler&&(this.element.off("mousemove mouseleave","a",this._hoverHandler),this._hoverHandler=null),this._focusHandler&&(this.element.off("focus blur","a",this._focusHandler),this._focusHandler=null),this._keyDownHandler&&(this.element.off("keydown",this._keyDownHandler),this._keyDownHandler=null),this._super()},getViewModel:function(){return this._viewModel},collapseAndExpandMenus:function(){var e=0,t=!1,n,r;if(this.options.maxWidth>0){for(r=0;r<this._menuStack.length;r++)n=this._menuStack[r].div,n.hasClass(f)?(t=!0,e+=this._collapsedMenuItemOuterWidth):e+=this._expandedMenuItemOuterWidth;e>this.options.maxWidth?this._collapseMenus(e,0):t&&this._expandMenus(e,this._menuStack.length-1)}},refresh:function(){var e;for(e=0;e<this._menuStack.length;e++)this._menuStack[e].div.find("ul").fxScrollbar("refresh")},reset:function(){var e,t;for(e=this._menuStack.length-1;e>0;e--)this._destroyMenu(this._menuStack[e],!0)},_keyDown:function(t){var n=!0,r=t.target,i;switch(t.which){case e.ui.keyCode.UP:i=this._getPreviousItemJqueryAnchorElement(r),i&&i.focus(),n=!1;break;case e.ui.keyCode.DOWN:i=this._getNextItemJqueryAnchorElement(r),i&&i.focus(),n=!1;break;case e.ui.keyCode.LEFT:this._handleKeyboardLeft(r),n=!1;break;case e.ui.keyCode.RIGHT:this._handleKeyboardRight(r),n=!1}return n},_handleKeyboardRight:function(t){var n=ko.dataFor(t),r,i,s,o;if(n.menuItems)if(!n.selected())n.selected(!0);else for(o=0;o<this._menuStack.length;o++)if(this._menuStack[o].viewModel===n){i=this._menuStack[o].div.data("focuselement");if(i)e(i).focus();else{r=this._menuStack[o].div.find("a");if(r.length>0)for(o=0;o<r.length;o++){i=r[o],s=ko.dataFor(i);if(!s.disabled()){e(i).focus();break}}}break}},_handleKeyboardLeft:function(e){var t=ko.dataFor(e)._parent,n;t&&(n=this._findJqueryAnchorElementForMenuItem(t),n&&n.focus())},_findJqueryAnchorElementForMenuItem:function(t){var n=null,r=null,i;for(i=0;i<this._menuStack.length;i++)if(this._menuStack[i].viewModel===t._parent){r=this._menuStack[i].div.find("li");break}if(r)for(i=0;i<r.length;i++)ko.dataFor(r[i])===t&&(n=r[i]);return n?e(n).find("a"):null},_getNextItemJqueryAnchorElement:function(t){var n=e(t).closest("li"),r;if(n.length===0)throw"Could not find list item from anchor tag";return r=n.next("li"),r.length>0?r.find("a"):null},_getPreviousItemJqueryAnchorElement:function(t){var n=e(t).closest("li"),r;if(n.length===0)throw"Could not find list item from anchor tag";return r=n.prev("li"),r.length>0?r.find("a"):null},_getParentListItemFromListItem:function(e){var t=ko.dataFor(e);return t.parent?ko.contextFor(t.parent):null},_setupHandlers:function(){this._setupHoverEvents(),this._setupKeyDownHandler(),this._setupFocusHandlers()},_setupFocusHandlers:function(){var t=this;this._focusHandler=function(n){var r=n.target,i=ko.dataFor(r),s;n.type==="focusout"?(t._focusCount--,t._focusCount===0&&t._viewModel.hoveredItem(null),s=e(r).closest("div.fxs-menu-menu"),e(s).data("focuselement",r)):n.type==="focusin"&&(t._itemWithTabIndex&&t._itemWithTabIndex.attr("tabindex",-1),t._itemWithTabIndex=e(r).attr("tabindex",0),t._viewModel.hoveredItem(i),t._focusCount++)},this.element.on("focus blur","a",this._focusHandler)},_setupHoverEvents:function(){var e=this;this._hoverHandler=function(t){var n;t.type==="mouseleave"?e._viewModel.hoveredItem(null):t.type==="mousemove"&&(n=ko.contextFor(t.target).$data,e._viewModel.hoveredItem(n))},this.element.on("mousemove mouseleave","a",this._hoverHandler)},_setupKeyDownHandler:function(){var e=this;this._keyDownHandler=function(){return e._keyDown.apply(e,arguments)},this.element.on("keydown",this._keyDownHandler)},_calculateMenuItemSizes:function(){var t=e(c);t.css({position:"absolute",top:-9e3,left:-9e3}),this.element.append(t),this._expandedMenuItemWidth=t.width(),this._expandedMenuItemOuterWidth=t.outerWidth(),this._originalExpandedMenuWidth=this._expandedMenuItemWidth,this._expandedMenuItemOuterWidthDiff=this._expandedMenuItemOuterWidth-this._expandedMenuItemWidth,t.addClass(f),this._collapsedMenuItemWidth=t.width(),this._collapsedMenuItemOuterWidth=t.outerWidth(),t.remove()},_setViewModel:function(e){this._viewModel=e,this._addNewMenuLevel(this._viewModel,!1)},_subscribeToMenuViewModel:function(e){var t=this,n=[];return n.push(e.selectedItem.subscribe(function(n){t._selectionChanged(e,n)})),n.push(e.menuItems.subscribe(function(n){t._menuItemsChanged(e)})),n},_unsubscribeToMenuViewModel:function(e){if(e)while(e.length)e.splice(0,1)[0].dispose()},_menuItemsChanged:function(e){var t,n,r;for(n=0;n<this._menuStack.length;n++){r=this._menuStack[n];if(r.viewModel===e){t=r.div.find("ul"),t.fxScrollbar("refresh");break}}this._itemWithTabIndex||this._moveTabIndexToValidMenuItem()},_beforeItemRemoved:function(t){e.contains(t,this._itemWithTabIndex[0])&&this._moveTabIndexToValidMenuItem(),e(t).remove()},_moveTabIndexToValidMenuItem:function(){var t=!1,n,r,i,s;for(i=this._menuStack.length-1;i>=0;i--){n=this._menuStack[i].div.find("a");for(s=0;s<n.length;s++){r=ko.dataFor(n[s]);if(r.disabled&&!r.disabled()){this._itemWithTabIndex=e(n[s]).attr("tabindex",0),t=!0;break}}if(t)break}},_addNewMenuLevel:function(t,n){var r=this,i=e(c),s,o=h(),u=this._subscribeToMenuViewModel(t),a=function(){s.is(":data(fx-fxScrollbar)")&&s.fxScrollbar("refresh")};i.attr("id",o),i.find(".fxs-menu-previewbadge").text(this.options.text.preview),this._menuStack.length===0?this.element.append(i):this._menuStack[this._menuStack.length-1].div.after(i),ko.applyBindings({data:t,class_:this.options.class_,beforeRemoveFunction:function(){r._beforeItemRemoved.apply(r,arguments)}},i[0]),s=i.find("ul").fxScrollbar({overlay:!0}),n?i.css({width:0}).animate({width:this._expandedMenuItemWidth},this.options.openCloseDurationMs,a):(i.css({width:this._expandedMenuItemWidth}),a()),this._menuStack.push({div:i,viewModel:t,subscriptions:u})},_collapseMenus:function(e,t){var n;t<this._menuStack.length&&(n=this._menuStack[t].div,n.hasClass(f)?this._collapseMenus(e,t+1):(e=e-n.outerWidth()+this._collapsedMenuItemWidth,n.animate({width:this._collapsedMenuItemWidth},this.options.openCloseDurationMs).addClass(f),e>this.options.maxWidth&&this._collapseMenus(e,t+1)))},_expandMenus:function(e,t){var n=e-this._collapsedMenuItemOuterWidth+this._expandedMenuItemOuterWidth,r;t>=0&&n<=this.options.maxWidth&&(r=this._menuStack[t].div,r.hasClass(f)?(e=e-r.outerWidth()+this._expandedMenuItemWidth,r.animate({width:this._expandedMenuItemWidth},this.options.openCloseDurationMs,function(){r.removeClass(f).find("ul").fxScrollbar("refresh")}),this._expandMenus(e,t-1)):this._expandMenus(e,t-1))},_selectionChanged:function(e,t){var n,r,i=null,s=[];this._trigger("select",null,{parent:e,selected:t});for(n=this._menuStack.length-1;n>=0&&this._menuStack[n].viewModel!==e;n--)s.push(this._menuStack[n]);t!==null&&t.menuItems&&s.length>0&&(i=s.pop());for(r=0;r<s.length;r++)this._destroyMenu(s[r],!0);i!==null?(this._destroyMenu(i,!1),this._addNewMenuLevel(t,!1)):t&&t.menuItems&&this._addNewMenuLevel(t,!0),a.newExperimentFlowEnabled()||this.collapseAndExpandMenus()},_setMenuWidth:function(t){t===-1&&(t=this._originalExpandedMenuWidth),e.each(this._menuStack,function(){this.div.hasClass(f)||this.div.css({width:t}).find("ul").fxScrollbar("refresh")}),this._expandedMenuItemWidth=t,this._expandedMenuItemOuterWidth=t+this._expandedMenuItemOuterWidthDiff},_setOption:function(e,t){var n=l._setOption.apply(this,arguments);switch(e){case"menuWidth":this._setMenuWidth(t),this.collapseAndExpandMenus();break;case"text":this.element.find(".fxs-menu-previewbadge").text(t.preview)}return n},_destroyMenus:function(){var e;for(e=0;e<this._menuStack.length;e++)this._destroyMenu(this._menuStack[e],!1)},_destroyMenu:function(t,n){var r=function(){var e=t.div.find("ul");e.is(":data(fx-fxScrollbar)")&&t.div.find("ul").fxScrollbar("destroy"),t.div.remove()},i=!1,s;this._unsubscribeToMenuViewModel(t.subscriptions),i=e.contains(t.div,this._itemWithTabIndex),n?t.div.animate({width:0},this.options.openCloseDurationMs,function(){r()}):r();for(s=0;s<this._menuStack.length;s++)if(this._menuStack[s]===t){this._menuStack.splice(s,1);break}i&&this._moveTabIndexToValidMenuItem()}}),e.fxs.fxsMenu.MenuItem=r.Class.define(function(e,t,n,r){var i=this;this._selected=ko.observable(!1),this.id=e,this.text=ko.observable(t),this.image=ko.observable(n),this.disabled=ko.observable(!1),this.description=ko.observable(r),this.isPreviewFeature=ko.observable(!1),this.showPopOutIcon=ko.observable(!1),this.selected=ko.computed({read:function(){return i._selected()},write:function(e){var t;if(e&&i.disabled())return;e&&!i._selected()&&(i._parent._selected&&i._parent.selected(!0),t=i._parent.selectedItem(),t===i&&(t=null)),i._selected(e),t&&t.selected(!1)}})},{_parent:null,_selected:null,id:null,image:null,text:null,disabled:null,getPath:function(){var e="";return this._parent&&this._parent.getPath&&(e+=this._parent.getPath()+"/"),e+=this.id,e}}),e.fxs.fxsMenu.ActionMenuItem=r.Class.derive(e.fxs.fxsMenu.MenuItem,function(t,n,r,i,s){var o=this,u;e.fxs.fxsMenu.MenuItem.call(this,t,n,r,i),u=this.selected,this.showPopOutIcon(!0),this.selected=ko.computed({read:function(){return u()},write:function(e){e&&o._execute&&o._execute(o),u.call(o,e)}}),this._execute=s},{_execute:null}),e.fxs.fxsMenu.ContainerMenuItem=r.Class.derive(e.fxs.fxsMenu.MenuItem,function(t,n,r,i){var s=this,o;e.fxs.fxsMenu.MenuItem.call(this,t,n,r,i),o=this.selected,this.menuItems=ko.observableArray(),this.menuItems.subscribe(function(t){e.each(t,function(e,t){t._parent=s})}),this.selected=ko.computed({read:function(){return o()},write:function(e){var t;!e&&s._selected()&&(t=s.selectedItem(),t&&t.selected(!1)),o.call(s,e)}}),this.selectedItem=ko.computed({read:function(){var e=s.menuItems(),t;for(t=0;t<e.length;t++)if(e[t].selected())return e[t];return null}})},{_id:null,menuItems:null,selectedItem:null}),e.fxs.fxsMenu.Menu=r.Class.define(function(){var t=this;this.menuItems=ko.observableArray(),this.menuItems.subscribe(function(n){e.each(n,function(e,n){n._parent=t}),t.menuItems().length>0&&t.menuItems()[t.menuItems().length-1].selected(!0)}),this.selectedItem=ko.computed({read:function(){var e=t.menuItems(),n;for(n=0;n<e.length;n++)if(e[n].selected())return e[n];return e.length>0?(e[n-1].selected(!0),e[n-1]):null}}),this.deepestSelectedItem=ko.computed({read:function(){var e=t;while(e.selectedItem&&e.selectedItem())e=e.selectedItem();return e===t&&(e=null),e}}),this.hoveredItem=ko.observable()},{_id:null,menuItems:null,selectedItem:null,hoveredItem:null})}(jQuery,this,jQuery.Widget,Shell,this.fx.resources),function(e,t,n,r,i,s,o){var u="fxs-details-small",f=960,l=244,c=t.prototype,h="fxs-drawermenu-inactive",p="fxs-drawermenu-small",d="<div class='fxs-drawermenu-title'></div><div class='fxs-drawermenu-closebutton'><div><span class='sprite'></span></div></div><div class='fxs-drawermenu-menuandbutton'><div class='fxs-drawermenu-menuarea'><div class='fxs-drawermenu-menu'></div><div class='fxs-drawermenu-details'></div><div class='fxs-drawermenu-template'></div></div><div class='fxs-drawermenu-ok'><span class='fxs-drawermenu-oktext' data-bind='text: okLabel'></span><div><span class='sprite'></span></div></div></div>";e.widget("fxs.fxsDrawerMenu",t,{options:{close:e.noop,class_:i.getClasses("fxs.fxsDrawerMenu"),text:i.getStrings("fxs.fxsDrawerMenu")},_menuWidget:null,_detailsWidget:null,_quickAddDiv:null,_quickAddItem:null,_closeButtonWidget:null,_okButtonWidget:null,_resizeHandler:null,_viewModel:null,_subscriptions:[],_lastReservedWidth:0,_create:function(){var t=this;this.element.addClass("fxs-drawermenu").html(d).attr({role:"dialog","aria-atomic":"true"}),this._activateWidgets(),this._setViewModel(new e.fxs.fxsDrawerMenu.DrawerMenu(this._menuWidget.fxsMenu("getViewModel"),this._detailsWidget.fxsDrawerDetails("getViewModel"))),this._setOption("text",this.options.text),e(r).on("resize",this._resizeHandler=function(){t._resize()}),c._create.call(this)},_destroy:function(){this._destroyWidgets(),this.element.empty().removeClass("fxs-drawermenu").removeAttr("role aria-live aria-atomic"),this._resizeHandler&&(e(r).off("resize",this._resizeHandler),this._resizeHandler=null),this._unsubscribe(),this._super()},getViewModel:function(){return this._viewModel},refresh:function(){this._menuWidget.fxsMenu("refresh"),this._resize()},reset:function(){this.element.is(":data(fxs-fxsKeyboardModal)")&&this.element.fxsKeyboardModal("destroy"),this._clearQuickAdd()},setToModal:function(){var e=this;this.element.fxsKeyboardModal({escapeKeyHandler:function(){e.element.find(".fxs-drawermenu-closebutton").click()}})},_activateWidgets:function(){var e=this;this._detailsWidget=this.element.find(".fxs-drawermenu-details").fxsDrawerDetails(),this._quickAddDiv=this.element.find(".fxs-drawermenu-template").addClass("fxs-quickadd").addClass(h),this._okButtonWidget=this.element.find(".fxs-drawermenu-ok").fxButton().find("span.sprite").addClass(this.options.class_.okButton).end(),this._okButtonWidget.addClass(h),this._closeButtonWidget=this.element.find(".fxs-drawermenu-closebutton").attr({title:this.options.text.close}).fxButton({click:function(){e._close.call(e)}}).find("span.sprite").addClass(this.options.class_.closeButton).end(),this._menuWidget=this.element.find(".fxs-drawermenu-menu").fxsMenu({select:function(){e._selectItem.apply(e,arguments)}}),this._setMaxWidth(this._detailsWidget.outerWidth())},_destroyWidgets:function(){this._detailsWidget.fxsDrawerDetails("destroy"),this._closeButtonWidget.fxButton("destroy"),this._menuWidget.fxsMenu("destroy"),this._okButtonWidget.fxButton("destroy")},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel),ko.applyBindings(this._viewModel,this._okButtonWidget[0])},_subscribe:function(e){this._unsubscribe(),a.newExperimentFlowEnabled()?this._subscriptions.push(e.menu.selectedItem.subscribe(function(t){t&&t.id&&e.details.selectedItemId(t.id)})):this._subscriptions.push(e.menu.hoveredItem.subscribe(function(t){t&&t.description&&t.description()&&e.details.text(t.description())}))},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_isInSmallMode:function(){return this.element.width()===f},_resize:function(){var e=this._menuWidget.fxsMenu("option","menuWidth"),t;this._isInSmallMode()?(t=l,this.element.addClass(p)):(t=-1,this.element.removeClass(p)),e!==t&&(this._setMaxWidth(),this._menuWidget.fxsMenu("option","menuWidth",t))},_renderQuickAddTemplate:function(e){var t=this,n=e.extension,r=n?Shell.extensionIndex[n]:{},i;this._quickAddItem=e,this._quickAddDiv.removeClass(h),this._detailsWidget.addClass(h),e.opening&&e.opening({data:e.data});try{r.templates[e.template].link(this._quickAddDiv,e.data,r.templateHelpers)}catch(s){i=Shell.Utilities.htmlEncodeVariable(s.message||s.Message||s),Shell.Diagnostics.Log.writeEntry("cdm.ErrorRenderingTemplate",i,Shell.Diagnostics.LogEntryLevel.error)}this._setMaxWidth(this._quickAddDiv.outerWidth()),e.open&&e.open({root:this._quickAddDiv,data:e.data}),e.ok&&this._okButtonWidget.fxButton("option","click",function(r){var i=e.ok({fields:t.gatherFields(t._quickAddDiv),data:e.data});i!==!1&&(t._trigger("quickCreate",r,{extension:n,path:e.getPath()}),t._close.call(t))}),e.label&&this._viewModel.okLabel(e.label),this._okButtonWidget.removeClass(h)},gatherFields:function(t){var n={};return t.find("input").each(function(){n[this.name||this.id]=e(this).val()||e(this).text()}),t.find("select").each(function(){n[this.name||this.id]=e(this).val()}),n},_clearQuickAdd:function(){this._quickAddItem&&(this._quickAddItem.close&&this._quickAddItem.close(),this._quickAddDiv.empty(),this._okButtonWidget.addClass(h))},_close:function(){this._clearQuickAdd(),this.options.close&&this.options.close()},_selectItem:function(t,n){n.selected&&n.selected instanceof e.fxs.fxsMenu.QuickAddMenuItem?this._renderQuickAddTemplate(n.selected):n.selected&&n.selected instanceof e.fxs.fxsMenu.ActionMenuItem?(this._trigger("actionExecute",t,{extension:n.selected.extension,path:n.selected.getPath()}),a.newExperimentFlowEnabled()||this._close()):(this._setDetailsWidgetWidth(n),this._clearQuickAdd(),this._detailsWidget.removeClass(h),this._quickAddDiv.addClass(h),this._setMaxWidth(this._detailsWidget.outerWidth()),this._okButtonWidget.addClass(h))},_setDetailsWidgetWidth:function(e){e.selected&&(e.selected._parent===this._viewModel.menu?(this._detailsWidget.removeClass(u),this._setMaxWidth(this._detailsWidget.outerWidth())):(this._detailsWidget.addClass(u),this._setMaxWidth(this._detailsWidget.outerWidth())))},_setMaxWidth:function(e){var t=e||this._lastReservedWidth;this.element.is(":visible")&&(this._lastReservedWidth=t,this._menuWidget.fxsMenu("option","maxWidth",this.element.width()-this._lastReservedWidth))},_setOption:function(e,t){var n=c._setOption.apply(this,arguments);return e==="text"&&(this.element.find(".fxs-drawermenu-title").text(t.title),this._viewModel.okLabel(t.okLabel)),n}}),e.fxs.fxsDrawerMenu.DrawerMenu=function(e,t){this.menu=e,this.details=t,this.okLabel=ko.observable("")},e.fxs.fxsMenu.QuickAddMenuItem=n.Class.derive(e.fxs.fxsMenu.ActionMenuItem,function(t,n,r,i,s,o,u,a,f,l,c){var h=this,p;e.fxs.fxsMenu.MenuItem.call(this,t,n,r,i),this.template=s,this.label=o,this.data=u,this.opening=a,this.open=f,this.ok=l,this.close=c,p=this.selected,this.selected=ko.computed({read:function(){return p()},write:function(e){p.call(h,e)}})},{_execute:null,extension:null,template:null,label:null,data:null,opened:null,ok:null,close:null}),e.fxs.fxsMenu.MenuItem.prototype.extension=""}(jQuery,jQuery.Widget,Shell,this,this.fx.resources,this.fx.utilities),function(e,t,n,r,i,s){var o=t.prototype,u="<div class='fxs-drawerhelp-title' data-bind='text: data.title'></div><div class='fxs-drawerhelp-closebutton'><div><span class='sprite'></span></div></div><div class='fxs-drawerhelp-content'><iframe frameborder='0' data-bind='attr: { src: data.helpUrl }'></iframe></div>";e.widget("fxs.fxsDrawerHelp",t,{options:{close:e.noop,ok:e.noop,helpUrl:"",class_:r.getClasses("fxs.fxsDrawerHelp"),text:r.getStrings("fxs.fxsDrawerHelp")},_viewModel:null,_subscriptions:[],_create:function(){this._setViewModel(new e.fxs.fxsDrawerHelp.Help),this._setOption("helpUrl",this.options.helpUrl),this._setOption("text",this.options.text),this.element.addClass("fxs-drawerhelp").html(u).find(".fxs-drawerhelp-closebutton").attr({title:this.options.text.close}).fxButton({click:this.options.close}).find("span.sprite").addClass(this.options.class_.closeButton).end().end().find(".fxs-drawerhelp-content iframe").one("load",function(){e(this).addClass("fxs-drawerhelp-iframe-loaded")}).end().attr({role:"dialog","aria-atomic":"true"}),ko.applyBindings({data:this._viewModel,func:this},this.element[0]),this.element.find(".fxs-drawerhelp-content").height(this.element.outerHeight()-this.element.find(".fxs-drawerhelp-title").outerHeight()),o._create.call(this)},_destroy:function(){this.element.empty().removeClass("fxs-drawerhelp").removeAttr("role aria-live aria-atomic"),this._super()},reset:function(){this.element.is(":data(fxs-fxsKeyboardModal)")&&this.element.fxsKeyboardModal("destroy")},setToModal:function(){var e=this;this.element.fxsKeyboardModal({escapeKeyHandler:function(){e.element.find(".fxs-drawerhelp-closebutton").click()}})},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e},_setOption:function(e,t){var n=o._setOption.apply(this,arguments);return e==="helpUrl"?this._viewModel.helpUrl(t):e==="text"&&this._viewModel.title(t.title),n}}),e.fxs.fxsDrawerHelp.Help=function(){this.title=ko.observable(),this.helpUrl=ko.observable()}}(jQuery,jQuery.Widget,this,this.fx.resources,this.fx.utilities),function(e,t,n,r){var i=t.prototype,s="fxs.fxsDrawerNotifications",o="<div class='fxs-drawernotifications-listcontainer'><ul class='fxs-drawernotifications-list' data-bind='foreach: { data: data.notifications, afterRender: func._attachElements }'><li></li></ul></div>";e.widget(s,t,{options:{notifications:null},_viewModel:null,_subscriptions:null,_create:function(){this._setViewModel(new e.fxs.fxsDrawerNotifications.DrawerNotifications),this._setOption("notifications",this.options.notifications),this.element.addClass("fxs-drawernotifications").html(o),ko.applyBindings({data:this._viewModel,func:this},this.element[0]),this.element.find(".fxs-drawernotifications-listcontainer").fxScrollbar({overlay:!0}),i._create.call(this)},_destroy:function(){this.element.empty().removeClass("fxs-drawernotifications fxs-drawernotifications-hasmultiple fxs-drawernotifications-noptificationdetails"),this._unsubscribe(),this._super()},refresh:function(){this.element.find(".fxs-drawernotifications-listcontainer").fxScrollbar("refresh")},addNotification:function(e,t){return typeof t!="number"&&(t=this._viewModel.notifications().length),this._viewModel.notifications.splice(t,0,e),e},removeNotification:function(e){this._viewModel.notifications.remove(e)},removeAllNotifications:function(){this._viewModel.notifications([])},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_attachElements:function(t,n){e(t).append(n).closest(".fxs-drawernotifications-listcontainer").fxScrollbar("refresh")},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this,n=function(e){t.element.removeClass("fxs-drawernotifications-notificationdetails"),e.forEach(function(e){var n=e.fxsNotification("getViewModel");n.detailsShowing()&&t.element.addClass("fxs-drawernotifications-notificationdetails")})},r=function(e){return function(n){var r=e.closest("li");n?(r.addClass("fxs-drawernotifications-showingdetails"),t.element.addClass("fxs-drawernotifications-notificationdetails").find(".fxs-drawernotifications-listcontainer").fxScrollbar("destroy").contents().unwrap()):(r.removeClass("fxs-drawernotifications-showingdetails"),t.element.removeClass("fxs-drawernotifications-notificationdetails").find(".fxs-drawernotifications-list").wrap("<div class='fxs-drawernotifications-listcontainer'></div>").end(),t.element.find(".fxs-drawernotifications-listcontainer").fxScrollbar({overlay:!0}))}};this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.notifications.subscribe(function(e){t.element.toggleClass("fxs-drawernotifications-hasmultiple",e.length>1),e.forEach(function(e){var t=e.fxsNotification("getViewModel");t.drawernotificationsSubscribed||(t.detailsShowing.subscribe(r(e)),t.drawernotificationsSubscribed=!0)}),n(e)})),e.notifications.notifySubscribers(e.notifications())},_setOption:function(e,t){var n=i._setOption.apply(this,arguments);return e==="notifications"&&this._viewModel.notifications(t||[]),n}}),e.fxs.fxsDrawerNotifications.DrawerNotifications=function(){this.notifications=ko.observableArray()}}(jQuery,jQuery.Widget,this.fx.resources),function(e,t,n,r){var i=t.prototype,s="fxs.fxsDrawerProgress",o="<div class='fxs-drawerprogress-summary'><div class='fxs-drawerprogress-buttonsets'><button class='fxs-drawerprogress-dismiss'><span data-bind='text: text.dismiss'></span><span data-bind='attr: { \"class\": \"sprite \" + class_.dismiss }'></span></button><button class='fxs-drawerprogress-collapse'><span data-bind='attr: { \"class\": \"sprite \" + class_.collapse }'></span></button></div><div class='fxs-drawerprogress-overall' data-bind='text: data.summary'></div></div><div class='fxs-drawerprogress-listcontainer'><ul class='fxs-drawerprogress-list' data-bind='foreach: { data: data.progress, afterRender: func._attachElements }'><li></li></ul></div>";e.widget(s,t,{options:{progress:null,collapse:e.noop,class_:n.getClasses(s),text:n.getStrings(s)},_viewModel:null,_subscriptions:null,_create:function(){var t=this;this._setViewModel(new e.fxs.fxsDrawerProgress.DrawerProgress),this._setOption("progress",this.options.progress),this.element.addClass("fxs-drawerprogress").html(o).find(".fxs-drawerprogress-summary .fxs-drawerprogress-buttonsets").find(".fxs-drawerprogress-collapse").on("click",function(e){t._trigger("collapse",e)}).end().find(".fxs-drawerprogress-dismiss").on("click",function(e){var n=t._viewModel.progress(),r=n.length,i;while(r--)n[r].fxsProgressBox("option","dismissable")&&(i=n[r].fxsProgressBox("option","dismiss"),i&&i())}).end(),ko.applyBindings({data:this._viewModel,func:this,text:this.options.text,class_:this.options.class_},this.element[0]),this.element.find(".fxs-drawerprogress-listcontainer").fxScrollbar({overlay:!0}),i._create.call(this)},_destroy:function(){this.element.empty().removeClass("fxs-drawerprogress fxs-drawerprogress-hasmultiple fxs-drawerprogress-progressdetails fxs-drawerprogress-dismissable"),this._unsubscribe(),this._super()},refresh:function(){this.element.find(".fxs-drawerprogress-listcontainer").fxScrollbar("refresh")},addProgress:function(e,t){return typeof t!="number"&&(t=this._viewModel.progress().length),this._viewModel.progress.splice(t,0,e),e},removeProgress:function(e){this._viewModel.progress.remove(e)},removeAllProgress:function(){this._viewModel.progress([])},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_attachElements:function(t,n){e(t).append(n).closest(".fxs-drawerprogress-listcontainer").fxScrollbar("refresh")},_getSummary:function(){var t=this,n=["active","success","error","warning"],r="",i=[],s="",o={};return e.each(this._viewModel.progress(),function(){var t=e(this).fxsProgressBox("getViewModel").status();o[t]=(o[t]||0)+1}),e.each(n,function(e,n){o[n]>0&&(i.push(t.options.text[n+r+(o[n]===1?"Single":"Multiple")].replace("{0}",o[n])),r="Short")}),s=i.splice(0,1)+"",e.each(i,function(e,n){s=t.options.text.join.replace("{0}",s).replace("{1}",n)}),s},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this,n=function(e){t.element.removeClass("fxs-drawerprogress-progressdetails"),e.forEach(function(e){var n=e.fxsProgressBox("getViewModel");(n.stepDetailsShowing()||n.drillDetailsShowing())&&t.element.addClass("fxs-drawerprogress-progressdetails")})},r=function(e){return function(n){var r=e.closest("li"),i=e.fxsProgressBox("getViewModel");i.stepDetailsShowing()||i.drillDetailsShowing()?(r.addClass("fxs-drawerprogress-showingdetails"),t.element.addClass("fxs-drawerprogress-progressdetails").find(".fxs-drawerprogress-listcontainer").fxScrollbar("destroy").contents().unwrap()):(r.removeClass("fxs-drawerprogress-showingdetails"),t.element.removeClass("fxs-drawerprogress-progressdetails").find(".fxs-drawerprogress-list").wrap("<div class='fxs-drawerprogress-listcontainer'></div>").end(),t.element.find(".fxs-drawerprogress-listcontainer").fxScrollbar({overlay:!0}))}},i=function(e){var n=0;t.element.removeClass("fxs-drawerprogress-dismissable"),e.forEach(function(e){var t=e.fxsProgressBox("getViewModel");t.dismissable()&&n++}),n&&t.element.addClass("fxs-drawerprogress-dismissable")};this._subscriptions=this._subscriptions||[],this._unsubscribe(),e.summary=ko.computed(function(){return this._getSummary()},this),this._subscriptions.push(e.progress.subscribe(function(e){t.element.toggleClass("fxs-drawerprogress-hasmultiple",e.length>1),e.forEach(function(t){var n=t.fxsProgressBox("getViewModel");n.drawerprogressSubscribed||(n.stepDetailsShowing.subscribe(r(t)),n.drillDetailsShowing.subscribe(r(t)),n.dismissable.subscribe(function(){i(e)}),n.drawerprogressSubscribed=!0)}),n(e),i(e)})),e.progress.notifySubscribers(e.progress())},_setOption:function(e,t){var n=i._setOption.apply(this,arguments);return e==="progress"&&this._viewModel.progress(t||[]),n}}),e.fxs.fxsDrawerProgress.DrawerProgress=function(){this.progress=ko.observableArray()}}(jQuery,jQuery.Widget,this.fx.resources),function(e,t,n,r,i){var s=t.prototype,o="<li><div class='fxs-drawertray-button' data-bind='attr: { \"data-code\": $root.func._getFinalCode(code), title: $root.func._getText(code) }'><span class='fxs-drawertray-count' data-bind='text: count'></span><span data-bind='attr: { class: \"sprite \" + $root.func._getClass(code) }'></span></div></li>",u="ko foreach: { data: data.notifications, afterRender: function() { func._createButton.apply(func, arguments); } }",a="<ul><!-- "+u+" -->"+o+"<!-- /ko -->"+"<!-- ko if: data.progressCount() -->"+"<!-- ko template: { data: { code: 'progress_' + data.progressStatus(), count: data.progressCount() }, afterRender: function() { func._createButton.apply(func, arguments); } } -->"+o+"<!-- /ko -->"+"<!-- /ko -->"+"</ul>";e.widget("fxs.fxsDrawerTray",t,{options:{click:null,class_:r.getClasses("fxs.fxsDrawerTray"),text:r.getStrings("fxs.fxsDrawerTray")},_viewModel:null,_subscriptions:null,_create:function(){this._setViewModel(new e.fxs.fxsDrawerTray.DrawerTray),this.element.addClass("fxs-drawertray").html(a),this._fixIE8Comment(),ko.applyBindings({data:this._viewModel,func:this},this.element[0]),s._create.call(this)},_destroy:function(){this.element.removeClass("fxs-drawertray"),this._unsubscribe(),this._super()},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_fixIE8Comment:function(){var e=this.element[0].firstChild.firstChild;e&&e.nodeName&&e.nodeName.toLowerCase()==="li"&&e.parentNode.insertBefore(n.document.createComment(u),e)},_getClass:function(e){return this.options.class_[e]},_getText:function(e){var t=this.options.text,n,r,i,s;if(typeof e=="string"){r=e.split("_"),s=r.length;for(i=0;i<s;i++){t=t[r[i]];if(!t||typeof t=="string"){n=t;break}}}return n},_createButton:function(t,n){var r=this,i=r._getFinalCode(n.code);e(t[0]).find(".fxs-drawertray-button").fxButton({toggle:!0,click:function(t){var n=e(this),s=n.fxButton("option","pressed");r._viewModel.pressedButton(s?i:""),r.options.click&&r.options.click(t,{code:i,pressed:s})},pressed:this._viewModel.pressedButton()===i})},_unselectButtons:function(){this.element.find(".fxs-drawertray-button").fxButton("option","pressed",!1)},_getFinalCode:function(e){var t=e.indexOf("_");return t===-1?e:e.substr(0,t)},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this;this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.pressedButton.subscribe(function(e){var n;t._unselectButtons(),e&&(n=t.element.find("[data-code="+e+"]"),n.length&&n.fxButton("option","pressed",!0))}))}}),e.fxs.fxsDrawerTray.ProgressStatus={active:"active",error:"error",completed:"completed",activeWithError:"activeWithError"},e.fxs.fxsDrawerTray.DrawerTray=function(){var t=[],n=function(e,n){var r,i=!1;for(r=0;r<t.length;r++)if(t[r].code===e){i=!0,n?t[r].count(n):t.splice(r,1);break}!i&&n&&t.unshift({code:e,count:ko.observable(n)})};this.errorCount=ko.observable(0),this.warningCount=ko.observable(0),this.informationCount=ko.observable(0),this.progressCount=ko.observable(0),this.progressStatus=ko.observable(e.fxs.fxsDrawerTray.ProgressStatus.active).extend({validateEnum:e.fxs.fxsDrawerTray.ProgressStatus}),this.pressedButton=ko.observable(""),this.notifications=ko.computed(function(){return n("error",this.errorCount()),n("warning",this.warningCount()),n("information",this.informationCount()),t},this)}}(jQuery,jQuery.Widget,this,this.fx.resources),function(e,t,n,r){var i=t.prototype,s="<div class='fxs-drawertaskbar-newbutton'><div class='fxs-drawertaskbar-newbutton-img'><span class='sprite'></span></div><span class='fxs-drawertaskbar-newbutton-text'></span></div><div class='fxs-drawertaskbar-commands'></div><div class='fxs-drawertaskbar-notifications'><div class='fxs-drawertaskbar-tray'></div><div class='fxs-drawertaskbar-help'><a href='#'><span class='sprite'></span></a></div></div>";e.widget("fxs.fxsDrawerTaskbar",t,{options:{newButtonClick:null,trayClick:null,helpClick:null,class_:n.getClasses("fxs.fxsDrawerTaskbar"),text:n.getStrings("fxs.fxsDrawerTaskbar")},_viewModel:null,_create:function(){var t=this;this._setViewModel(new e.fxs.fxsDrawerTaskbar.DrawerTaskbar),this.element.addClass("fxs-drawertaskbar").html(s).find(".fxs-drawertaskbar-newbutton").fxButton({click:this.options.newButtonClick}).end().find(".fxs-drawertaskbar-newbutton-text").text(this.options.text.newButton).end().find(".fxs-drawertaskbar-commands").fxsDrawerCommands().end().find(".fxs-drawertaskbar-tray").fxsDrawerTray({click:this.options.trayClick,class_:this.options.class_.tray,text:this.options.text.tray}).end().find(".fxs-drawertaskbar-help").find("a").attr({title:this.options.text.help}).on("click",function(e){e.preventDefault(),t.options.helpClick&&t.options.helpClick()}).end().find("span.sprite").addClass(this.options.class_.help).end().end(),this._viewModel.drawerCommands=this.element.find(".fxs-drawertaskbar-commands").fxsDrawerCommands("getViewModel"),this._viewModel.drawerTray=this.element.find(".fxs-drawertaskbar-tray").fxsDrawerTray("getViewModel"),i._create.call(this)},getViewModel:function(){return this._viewModel},_setViewModel:function(e){this._viewModel=e},_destroy:function(){this.element.removeClass("fxs-drawertaskbar"),this._super()},_setOption:function(e,t){var n=i._setOption.apply(this,arguments);switch(e){case"newButtonClick":this.element.find(".fxs-drawertaskbar-newbutton").fxButton("option","click",t);break;case"trayClick":this.element.find(".fxs-drawertaskbar-tray").fxsDrawerTray("option","click",t)}return n}}),e.fxs.fxsDrawerTaskbar.DrawerTaskbar=function(){this.drawerCommands=null,this.drawerTray=null}}(jQuery,jQuery.Widget,this.fx.resources),function(e,t,n,r,i){var s=t.prototype,o="<div class='fxs-drawer-toastbox'></div><div class='fxs-drawer-inner'><div class='fxs-drawer-slip'><div class='fxs-drawer-drawertaskbar'></div><div class='fxs-drawer-drawermenu'></div><div class='fxs-drawer-drawerhelp'></div></div></div>",u="<div><div class='fxs-drawer-drawerinformation'></div><div class='fxs-drawer-drawerwarning'></div><div class='fxs-drawer-drawererror'></div><div class='fxs-drawer-drawerprogress'></div></div>",f="information",l="warning",c="error",h="progress";e.widget("fxs.fxsDrawer",t,{options:{menuAnimationTaskbarOffset:200,menuAnimationLength:300,notificationOpeningDuringMs:200,notificationClosingDurationMs:100,autoHideNotificationMs:-1,menuOpen:null,helpOpen:null,close:null,class_:r.getClasses("fxs.fxsDrawer"),text:r.getStrings("fxs.fxsDrawer")},_viewModel:null,_subscriptions:null,_drawerMenuWidget:null,_drawerHelpWidget:null,_taskBarWidget:null,_toastBoxWidget:null,_notificationContainer:null,_progressWidget:null,_infoWidget:null,_warningWidget:null,_errorWidget:null,_helpUrl:"",_innerDiv:null,_modalOverlay:null,_taskBarHeight:-1,_drawerMenuHeight:-1,_drawerHelpHeight:-1,_savedToastBoxOpenedState:!1,_autoHideTimerHandle:null,_autoHideMouseMoveHandler:null,_autoHideMouseLeaveHandler:null,_autoHideMouseClickHandler:null,_autoHideMouseTrayClickHandler:null,_create:function(){var t=this,n=new e.fxs.fxsToastBox.ToastBox;this.element.addClass("fxs-drawer").html(o),this._initialize(n),this._setViewModel(new e.fxs.fxsDrawer.Drawer(this._drawerMenuWidget.fxsDrawerMenu("getViewModel"),this._taskBarWidget.fxsDrawerTaskbar("getViewModel"),this._infoWidget.fxsDrawerNotifications("getViewModel"),this._warningWidget.fxsDrawerNotifications("getViewModel"),this._errorWidget.fxsDrawerNotifications("getViewModel"),this._progressWidget.fxsDrawerProgress("getViewModel"),n)),this._modalOverlay=e("<div/>").addClass("fxs-drawer-modal-overlay").on("click",function(){t.close()}).appendTo("body"),s._create.call(this)},_destroy:function(){this._innerDiv.stop(!0),this._drawerSlip.stop(!0),this._modalOverlay.remove(),this.element.removeClass("fxs-drawer fxs-drawer-open fxs-drawer-showmenu fxs-drawer-showhelp"),this._destroyWidgets(),this._unsubscribe(),this._super()},openMenu:function(){var t=this;if(this.element.hasClass("fxs-drawer-open"))return;this.element.addClass("fxs-drawer-open fxs-drawer-showmenu"),this._drawerMenuWidget.removeClass("fxs-drawer-inactive").fxsDrawerMenu("refresh");var n=a.enableFrictionFreeUserExperienceEnabled()?e(".navbar-wrapper").height():e(".fxs-headerbar").height(),r=.9;this._open((e(window).height()-n-10)*r,function(){t.options.menuOpen&&t.options.menuOpen(),t._drawerMenuWidget.fxsDrawerMenu("setToModal")})},openHelp:function(e){var t=this;if(this.element.hasClass("fxs-drawer-open"))return;this.element.addClass("fxs-drawer-open fxs-drawer-showhelp"),this._drawerHelpWidget.removeClass("fxs-drawer-inactive").fxsDrawerHelp("option","helpUrl",this._helpUrl),this._open(this._drawerHelpHeight,function(){t.options.helpOpen&&t.options.helpOpen(),t._drawerHelpWidget.fxsDrawerHelp("setToModal")}),this._trigger("openHelp")},close:function(){if(!this.element.hasClass("fxs-drawer-open"))return;this.element.removeClass("fxs-drawer-open"),this.element.hasClass("fxs-drawer-showmenu")?this._closeMenu():this.element.hasClass("fxs-drawer-showhelp")&&this._closeHelp(),this._modalOverlay.hide()},selectMenuPath:function(e){var t=this._viewModel.drawerMenu.menu,n,r=e.split("/"),i;for(i=0;i<r.length&&t!==null;i++){n=this._findMenuItem(t,r[i]);if(n.disabled())break;t=n}t&&t.selected&&t.selected(!0)},setHelpUrl:function(e){this._helpUrl=e,this.element.hasClass("fxs-drawer-showhelp")&&this._drawerHelpWidget.fxsDrawerHelp("option","helpUrl",this._helpUrl)},getViewModel:function(){return this._viewModel},_open:function(e,t){var n=this;this._modalOverlay.show(),this._savedToastBoxOpenedState=this._viewModel._toastBox.open(),this._viewModel._toastBox.open(!1),this._innerDiv.stop(!0).animate({height:e},this.options.menuAnimationLength),this._drawerSlip.stop(!0).delay(this.options.menuAnimationTaskbarOffset).animate({top:-1*this._taskBarHeight},this.options.menuAnimationLength,function(){n._taskBarWidget.addClass("fxs-drawer-inactive"),n._drawerSlip.css("top",0),t()})},_close:function(e){var t=this;this._drawerSlip.css("top",-1*this._taskBarHeight),this._taskBarWidget.removeClass("fxs-drawer-inactive"),this._innerDiv.stop(!0).animate({height:this._taskBarHeight},this.options.menuAnimationLength),this._viewModel._toastBox.open(this._savedToastBoxOpenedState),this._drawerSlip.stop(!0).delay(this.options.menuAnimationTaskbarOffset).animate({top:"0"},this.options.menuAnimationLength,function(){e(),t.options.close&&t.options.close()})},_closeMenu:function(){var e=this;this._close(function(){e._drawerMenuWidget.addClass("fxs-drawer-inactive").fxsDrawerMenu("reset"),e.element.removeClass("fxs-drawer-showmenu")})},_closeHelp:function(){var e=this;this._close(function(){e._drawerHelpWidget.addClass("fxs-drawer-inactive").fxsDrawerHelp("reset"),e.element.removeClass("fxs-drawer-showhelp")})},_initialize:function(e){this._activateWidgets(e),this._taskBarHeight=this.element.find(".fxs-drawer-drawertaskbar").height(),this._drawerSlip=this.element.find(".fxs-drawer-slip"),this._innerDiv=this.element.find(".fxs-drawer-inner"),this._innerDiv.height(this._taskBarHeight)},_activateWidgets:function(t){var n=this;this._notificationContainer=e(u),this._taskBarWidget=this.element.find(".fxs-drawer-drawertaskbar").fxsDrawerTaskbar({newButtonClick:function(){n._newButtonClicked.apply(n,arguments)},trayClick:function(){n._trayButtonClicked.apply(n,arguments)},helpClick:function(){n._helpButtonClicked.apply(n,arguments)},class_:this.options.class_.taskBar,text:this.options.text.taskBar}),this._drawerMenuWidget=this.element.find(".fxs-drawer-drawermenu").fxsDrawerMenu({close:function(){n._closeButtonClicked.apply(n,arguments)},class_:this.options.class_.menu,text:this.options.text.menu}),this._drawerMenuHeight=this._drawerMenuWidget.height(),this._drawerMenuWidget.addClass("fxs-drawer-inactive"),this._drawerHelpWidget=this.element.find(".fxs-drawer-drawerhelp").fxsDrawerHelp({close:function(){n._closeButtonClicked.apply(n,arguments)},class_:this.options.class_.drawerHelp,text:{title:this.options.text.help}}),this._drawerHelpHeight=this._drawerHelpWidget.height(),this._drawerHelpWidget.addClass("fxs-drawer-inactive"),this._infoWidget=this._notificationContainer.find(".fxs-drawer-drawerinformation").fxsDrawerNotifications(),this._warningWidget=this._notificationContainer.find(".fxs-drawer-drawerwarning").fxsDrawerNotifications(),this._errorWidget=this._notificationContainer.find(".fxs-drawer-drawererror").fxsDrawerNotifications(),this._progressWidget=this._notificationContainer.find(".fxs-drawer-drawerprogress").fxsDrawerProgress({collapse:function(){n._progressCollapseButtonClicked.apply(n,arguments)},class_:this.options.class_.progress,text:this.options.text.progress}),this._toastBoxWidget=this.element.find(".fxs-drawer-toastbox").fxsToastBox({direction:"top",openDuration:this.options.notificationOpeningDuringMs,closeDuration:this.options.notificationClosingDurationMs,data:t}),t.content(this._notificationContainer)},_destroyWidgets:function(){this._taskBarWidget.fxsDrawerTaskbar("destroy"),this._drawerMenuWidget.fxsDrawerMenu("destroy"),this._drawerHelpWidget.fxsDrawerHelp("destroy"),this._infoWidget.fxsDrawerNotifications("destroy"),this._warningWidget.fxsDrawerNotifications("destroy"),this._errorWidget.fxsDrawerNotifications("destroy"),this._progressWidget.fxsDrawerProgress("destroy"),this._toastBoxWidget.fxsToastBox("destroy")},_findMenuItem:function(e,t){var n=e.menuItems(),r,i;for(i=0;i<n.length;i++){r=n[i];if(r.id===t)return r}return null},_newButtonClicked:function(){this.openMenu()},_helpButtonClicked:function(){this.openHelp()},_closeButtonClicked:function(){this.close()},_trayButtonClicked:function(e,t){var n=this,r=function(e){var t;n._viewModel._toastBox.open()?(t=n._toastBoxWidget.fxsToastBox("close"),e.hasClass("fxs-drawer-inactive")&&t.done(function(){n._showNotificationWidget(e)})):n._showNotificationWidget(e)},i=function(e){e.forEach(function(e){var t=e.fxsNotification("getViewModel");t.detailsShowing(!1)})};switch(t.code){case f:r(this._infoWidget),i(this._viewModel.informationNotifications());break;case l:r(this._warningWidget),i(this._viewModel.warningNotifications());break;case c:r(this._errorWidget),i(this._viewModel.errorNotifications());break;case h:r(this._progressWidget),this._viewModel.progress().forEach(function(e){var t=e.fxsProgressBox("getViewModel");t.stepDetailsShowing(!1),t.drillDetailsShowing(!1)})}},_progressCollapseButtonClicked:function(){this._viewModel._drawerTaskBar.drawerTray.pressedButton(""),this._viewModel._toastBox.open(!1)},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel)},_unsubscribe:function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_subscribe:function(e){var t=this;this._subscriptions=this._subscriptions||[],this._unsubscribe(),this._subscriptions.push(e.informationNotifications.subscribe(function(){t._informationNotificationsChanged.apply(t,arguments)})),this._subscriptions.push(e.warningNotifications.subscribe(function(){t._warningNotificationsChanged.apply(t,arguments)})),this._subscriptions.push(e.errorNotifications.subscribe(function(){t._errorNotificationsChanged.apply(t,arguments)})),this._subscriptions.push(e.progress.subscribe(function(){t._progressNotificationsChanged.apply(t,arguments)}))},_notificationsChanged:function(e){var t=this,n=function(){t._toastBoxWidget.fxsToastBox("refresh")};e.forEach(function(e){var t=e.fxsNotification("getViewModel");t.drawerSubscribed||(t.detailsShowing.subscribe(n),t.drawerSubscribed=!0)})},_informationNotificationsChanged:function(e){this._viewModel._drawerTaskBar.drawerTray.informationCount(e.length),this._notificationsChanged(e),this._viewModel._drawerTaskBar.drawerTray.pressedButton()===f&&(e.length?(this._infoWidget.fxsDrawerNotifications("refresh"),this._toastBoxWidget.fxsToastBox("refresh")):(this._toastBoxWidget.fxsToastBox("close"),this._viewModel._drawerTaskBar.drawerTray.pressedButton("")))},_warningNotificationsChanged:function(e){this._viewModel._drawerTaskBar.drawerTray.warningCount(e.length),this._notificationsChanged(e),this._viewModel._drawerTaskBar.drawerTray.pressedButton()===l&&(e.length?(this._warningWidget.fxsDrawerNotifications("refresh"),this._toastBoxWidget.fxsToastBox("refresh")):(this._toastBoxWidget.fxsToastBox("close"),this._viewModel._drawerTaskBar.drawerTray.pressedButton("")))},_errorNotificationsChanged:function(e){var t=this,n=this._viewModel._drawerTaskBar.drawerTray.pressedButton(),r,i=function(){t._viewModel._drawerTaskBar.drawerTray.pressedButton(c),t._showNotificationWidget(t._errorWidget),t._errorWidget.fxsDrawerNotifications("refresh"),t._toastBoxWidget.fxsToastBox("refresh")};this._viewModel._drawerTaskBar.drawerTray.errorCount(e.length),this._notificationsChanged(e),n===""?i():n!==c?(r=this._toastBoxWidget.fxsToastBox("close"),r.done(i)):e.length?(this._errorWidget.fxsDrawerNotifications("refresh"),this._toastBoxWidget.fxsToastBox("refresh")):(this._toastBoxWidget.fxsToastBox("close"),this._viewModel._drawerTaskBar.drawerTray.pressedButton("")),t._setupAutoHide()},_progressNotificationsChanged:function(e){var t=this,n=this._viewModel._drawerTaskBar.drawerTray.pressedButton(),r,i=function(){t._viewModel._drawerTaskBar.drawerTray.progressStatus(t._findProgressOverallStatus(t._viewModel._drawerProgress.progress()))},s=function(){t._toastBoxWidget.fxsToastBox("refresh")},o=function(){t._viewModel._drawerTaskBar.drawerTray.pressedButton(h),t._showNotificationWidget(t._progressWidget),t._progressWidget.fxsDrawerProgress("refresh"),t._toastBoxWidget.fxsToastBox("refresh")};this._viewModel._drawerTaskBar.drawerTray.progressCount(e.length),e.forEach(function(e){var t=e.fxsProgressBox("getViewModel");t.drawerSubscribed||(t.status.subscribe(i),t.stepDetailsShowing.subscribe(s),t.drillDetailsShowing.subscribe(s),t.actions.subscribe(s),t.steps.subscribe(s),t.drawerSubscribed=!0)}),i(e),n===""?o():this._viewModel._drawerTaskBar.drawerTray.pressedButton()!==h?(r=this._toastBoxWidget.fxsToastBox("close"),r.done(o)):e.length?(this._progressWidget.fxsDrawerProgress("refresh"),this._toastBoxWidget.fxsToastBox("refresh")):(this._toastBoxWidget.fxsToastBox("close"),this._viewModel._drawerTaskBar.drawerTray.pressedButton("")),t._setupAutoHide()},_findProgressOverallStatus:function(t){var n={active:!1,error:!1,warning:!1};return t.forEach(function(e){n[e.fxsProgressBox("getViewModel").status()]=!0}),n.active?n.error?e.fxs.fxsDrawerTray.ProgressStatus.activeWithError:e.fxs.fxsDrawerTray.ProgressStatus.active:n.error?e.fxs.fxsDrawerTray.ProgressStatus.error:e.fxs.fxsDrawerTray.ProgressStatus.completed},_showNotificationWidget:function(e){var t=this,n=function(t,n){t===e?t.removeClass("fxs-drawer-inactive"):t.addClass("fxs-drawer-inactive")};n(this._infoWidget),n(this._warningWidget),n(this._errorWidget),n(this._progressWidget),this._toastBoxWidget.fxsToastBox("refresh"),this._toastBoxWidget.fxsToastBox("open").done(function(){e.is(":data(fxs-fxsDrawerNotifications)")&&e.fxsDrawerNotifications("refresh"),e.is(":data(fxs-fxsFxsDrawerProgress)")&&e.fxsDrawerProgress("refresh"),t._toastBoxWidget.fxsToastBox("refresh")})},_setupAutoHide:function(){var e=this,t=function(){e.options.autoHideNotificationMs>0&&(e._autoHideTimerHandle=n.setTimeout(s,e.options.autoHideNotificationMs))},r=function(){e._autoHideTimerHandle&&(n.clearTimeout(e._autoHideTimerHandle),e._autoHideTimerHandle=null)},i=function(){e._autoHideTimerHandle&&(n.clearTimeout(e._autoHideTimerHandle),e._autoHideTimerHandle=null),e._toastBoxWidget.off("mousemove",e._autoHideMouseMoveHandle).off("mouseleave",e._autoHideMouseLeaveHandler).off("click",e._autoHideMouseClickHandler),e._taskBarWidget.find(".fxs-drawertray").off("click",e._autoHideMouseTrayClickHandler),e._autoHideMouseMoveHandle=null,e._autoHideMouseLeaveHandler=null,e._autoHideMouseClickHandler=null,e._autoHideMouseTrayClickHandler=null},s=function(){i(),e._toastBoxWidget.fxsToastBox("close"),e._viewModel._drawerTaskBar.drawerTray.pressedButton("")};i(),t(),this._toastBoxWidget.on("mousemove",this._autoHideMouseMoveHandler=function(){r()}).on("mouseleave",this._autoHideMouseLeaveHandler=function(){t()}).on("click",this._autoHideMouseClickHandler=function(){i()}),this._taskBarWidget.find(".fxs-drawertray").on("click",this._autoHideMouseTrayClickHandler=function(){i()})}}),e.fxs.fxsDrawer.Drawer=function(e,t,n,r,i,s,o){this._drawerMenu=e,this._drawerTaskBar=t,this._infoNotifications=n,this._warningNotifications=r,this._errorNotifications=i,this._drawerProgress=s,this._toastBox=o,this.drawerMenu=this._drawerMenu,this.globalCommands=this._drawerTaskBar.drawerCommands.globalCommands,this.contextualCommands=this._drawerTaskBar.drawerCommands.contextualCommands,this.informationNotifications=this._infoNotifications.notifications,this.warningNotifications=this._warningNotifications.notifications,this.errorNotifications=this._errorNotifications.notifications,this.progress=this._drawerProgress.progress}}(jQuery,jQuery.Widget,this,this.fx.resources),function(e,t,n){function c(t,n){var r=e.extend({},n,{menuOpen:C});i=e(t).fxsDrawer(r),s=i.fxsDrawer("getViewModel"),Impl.UI.Commands.addListener(a=function(e,t){e==="ADD"?t.forEach(function(e){s[e.group+"Commands"].splice(s[e.group+"Commands"]().length,0,e.widget)}):e==="REMOVE"&&t.forEach(function(e){s[e.group+"Commands"].remove(e.widget)})}),Impl.UI.Notifications.Notification.addListener(f=function(e,t,n){e==="ADD"?s[n+"Notifications"].push(t):e==="REMOVE"&&s[n+"Notifications"].remove(t)}),Impl.UI.Notifications.Progress.addListener(l=function(e,t){e==="ADD"?s.progress.push(t):e==="REMOVE"&&s.progress.remove(t)})}function h(){a&&(Impl.UI.Commands.removeListener(a),a=null),f&&(Impl.UI.Notifications.Notification.removeListener(f),f=null),l&&(Impl.UI.Notifications.Progress.removeListener(l),l=null)}function p(){return s.drawerMenu}function d(t,n,i){var s,o;switch(n._type){case"container":s=new e.fxs.fxsMenu.ContainerMenuItem(n._id,n._text,n._image,n._description),s.destroy=function(){for(o=0;o<s.menuItems().length;o++)s.menuItems()[o].destroy&&s.menuItems()[o].destroy();i(),delete r[t]};break;case"quickAdd":s=new e.fxs.fxsMenu.QuickAddMenuItem(n._id,n._text,n._image,n._description,n._template,n._label,n._data,n._opening,n._open,n._ok,n._close),s.destroy=function(){i(),delete r[t]};break;case"action":s=new e.fxs.fxsMenu.ActionMenuItem(n._id,n._text,n._image,n._description,n._execute),s.destroy=function(){i(),delete r[t]};break;default:throw"invalid menu item type"}return s&&(s.extension=n._extension,s.displayOrder=n._displayOrder,s.disabled(n._disabled),s.isPreviewFeature(n._isPreviewFeature)),s}function v(e,t){e.text()!==t._text&&e.text(t._text),e.image()!==t._image&&e.image(t._image),e.description()!==t._description&&e.description(t._description),e.disabled()!==t._disabled&&e.disabled(t._disabled),e.isPreviewFeature()!==t._isPreviewFeature&&e.isPreviewFeature(t._isPreviewFeature);switch(t._type){case"container":break;case"quickAdd":e.extension=t._extension,e.template=t._template,e.label=t._label,e.data=t._data;break;case"action":break;default:throw"invalid menu item type"}}function m(e){var t,n=p().menu,r,i,s;if(e){t=e.split("/");for(i=0;i<t.length;i++){r=!1;for(s=0;s<n.menuItems().length;s++)if(n.menuItems()[s].id===t[i]){r=!0,n=n.menuItems()[s];break}if(!r){n=null;break}}}return n}function g(n,i,s){var o=n===null,u;n=n||t.Utilities.newGuid();if(o){if(i._parentPath&&i._parentPath!==""){u=m(i._parentPath);if(!u)throw"could not find parent menu item"}r[n]=e.extend(d(n,i,s),{handle:n}),u?w(u,r[n]):w(p().menu,r[n])}else{if(!r[n])throw"could not find menu item handle";v(r[n],i)}return n}function y(e){var t=r[e];t&&(t._parent.menuItems.remove(t),t.destroy())}function b(e,t){t.destroy=function(){var e=t.menuItems(),n,r;for(r=0;r<e.length;r++)n=e[r],n.destroy&&n.destroy()},w(e,t)}function w(e,t){e&&e.menuItems&&(e.menuItems.push(t),e.menuItems.sort(function(e,t){return e.displayOrder-t.displayOrder}))}function E(e){var n=t.Utilities.newGuid();return o.holdArgument(e),u.add(e),r[n]=e,n}function S(e){var t=r[e];if(!t)throw"could not find callback";u.remove(t),o.releaseArgument(t)}function x(){i.fxsDrawer("openMenu")}function T(e){e&&L(e),i.fxsDrawer("openHelp")}function N(){i.fxsDrawer("close")}function C(){u.fire()}function k(e){i.fxsDrawer("selectMenuPath",e)}function L(e){i.fxsDrawer("setHelpUrl",e)}function A(t){var n=m(t),r,i=[];if(!n)throw"could not find menu item with path: "+t;return n.menuItems&&(r=n.menuItems(),e.each(r,function(){i.push(this.id)})),i}function O(e){return m(e)!==null}var r={},i=null,s=null,o=t.Communication.Receiver.getReceiver(),u=e.Callbacks(),a,f,l;t.Namespace.define("Impl.UI.Drawer",{initialize:c,destroy:h,getMenuViewModel:p,addMenuItem:b,syncMenuItem:g}),o.addMethod("Impl.UI.Drawer.addDrawerOpenedCallback",E),o.addMethod("Impl.UI.Drawer.open",x),o.addMethod("Impl.UI.Drawer.openHelp",T),o.addMethod("Impl.UI.Drawer.close",N),o.addMethod("Impl.UI.Drawer.removeDrawerOpenedCallback",S),o.addMethod("Impl.UI.Drawer.removeMenuItem",y),o.addMethod("Impl.UI.Drawer.selectMenuPath",k),o.addMethod("Impl.UI.Drawer.setHelpUrl",L),o.addMethod("Impl.UI.Drawer.Menu.getChildren",A),o.addMethod("Impl.UI.Drawer.Menu.exists",O)}(jQuery,Shell),function(e,t,n,r,i){function s(e){t("#headerbar").fxsHeaderBar(e)}function o(e){t("#headerbar").fxsHeaderBar("addControl",e)}n.Namespace.define("Impl.UI.HeaderBar",{initialize:s,addControl:o})}(this,jQuery,Shell,this.fx.resources),function(e,t,n){function r(e){var t=e;return t&&(t=t.replace(/[\/#]+$/g,"")),t}t.Namespace.define("Impl.UI",{Navigation:{normalizePath:r}})}(this,Shell),function(e,t,n){function i(e,i){var s=!1,u,a;if(r===n||r===null)return e.error("Need to give Shell.Extensions.add some extension(s) to activate.");t.Utilities.isArray(i)||(i=[i],s=!0);for(a=0,u=i.length;a<u;a++)i[a].id=t.Utilities.newGuid(),i[a].isActivated=!1,o(i[a]),r[i[a].id]=i[a];return e.complete(s?i[0]:i)}function s(e){e!==n&&e.id!==n&&r[e.id]!==n&&(r[e.id].isActivated=!0)}function o(e){return e.templates={},e.templateUris={},e.dataIsLoaded=!1,e.navigationalViewModelPath===n&&(e.navigationalViewModelPath=""),e.viewModels===n&&(e.viewModels=[]),e.displayOrderHint===n&&(e.displayOrderHint=9999),e.loadOrderHint===n&&(e.loadOrderHint=9999),e.includeInAllView===n&&(e.includeInAllView=!0),e.excludeFromNavigation===n&&(e.excludeFromNavigation=!1),e}function u(t,n){e.cdm.extensionShowCategory(t,n)}var r={};t.extensionIndex||(t.extensionIndex={}),t.extensions||(t.extensions=[]),t.Namespace.define("Impl.Extensions",{add:i,activate:s,Current:{showCategory:u}})}(this,Shell),function(t,n,r){function h(e,t){return{value:e.id,text:e.displayName,id:e.id,navFilter:e.navFilter,extensionId:t,image:e.image}}function p(e){return i[e]||(i[e]=[]),i[e]}function d(e){var t=e.id,n;return u[e.id]===r&&(u[e.id]=!0,e.initializePivots&&e.initializePivots(),n=o[t],!n||(n.invokeCallback(),delete o[t])),u[e.id]}function v(){return s}function m(e){v().push(e)}function g(e,t){o[t]===r&&(o[t]=e)}function y(n,i){var s=p(n),o,u;s.splice(0,s.length),e.each(i,function(e,t){(t.visible===r||t.visible)&&s.push(h(t,n))}),u=e.grep(t.extensions,function(e,t){return e.id===n})[0],a&&u.id===a.id&&(S(u,f),e.isNumeric(l)&&(o=s[l],T(n,o.id,o.navFilter,c)))}function b(t,n){return e.grep(p(t),function(e){return e.navFilter===n||(e.navFilter===null||e.navFilter===r)&&(n===null||n===r)})}function w(e,t){var n=null,r;return e&&(r=b(e,t),r.length>0&&(n=r[0].id)),n}function E(e,t,n){var r=!1,i,s,o;if(e){o=b(e,t);for(i=0,s=o.length;i<s;i++)if(n===o[i].id){r=!0;break}}return r}function S(t,n){var r,i,s;a=t,f=n,d(t),i=e("#tabcontainer .fxshell-tabcontainer"),s=b(t.id,n),i.is(":data(fxshell-fxshellPivotList)")&&i.fxshellPivotList("destroy"),s.length>0&&(i.fxshellPivotList({panel:e("#tabcontainer .tabcontent"),values:s,click:N,change:C}),r=e(".aux-tabcontent"),r.hide(),x(s.length!==1),r.show())}function x(t){var n=e(".fxshell-tabcontainer"),r=e(".aux-tabcontent");r.css("top",""),r.css("height",""),t?n.removeClass("fxshell-tabcontainer-collapsed"):n.addClass("fxshell-tabcontainer-collapsed")}function T(t,n,r,i){var s=e.grep(b(t,r),function(e){return n===e.id}),o;s.length===1&&(o=s[0],i&&e.extend(o,{renderData:i,navFilter:r}),e("#tabcontainer .fxshell-tabcontainer").fxshellPivotList("option","value",o))}function N(e,t){var r=n.location.hash.substring(1).split("/"),i=r.splice(0,r.length-1).join("/");n.location.hash="#"+(i?i+"/":"")+t.value.id}function C(e,t){k(t.value.extensionId,t.value,t.value.navFilter,t.value.renderData)}function k(t,n,r,i){l=e.inArray(n,b(t,r)),c=i,e.each(v(),function(){this.invokeCallback({extensionId:t,pivotId:n.id,navFilter:r,renderData:i})})}var i={},s=[],o=[],u=[],a,f,l,c;t.Namespace.define("Impl.UI.Pivots",{ensureExtensionPivotsInitialized:d,setCurrentExtension:S,updatePivotList:y,selectPivot:T,setupPivotActivatedListener:m,setupPivotInitializedListener:g,setVisibility:x,getFirstPivotId:w,pivotExists:E})}(Shell,this),function(e,t,n){function i(e,t,n,r,i){n([])}function s(e,t,n,r){i("/SettingService/Get",e,t,n,r)}function o(e,t,n,r){i("/SettingService/GetByPrefix",e,t,n,r)}function u(e,t,n,r){i("/SettingService/Update",e,t,n,r)}function a(e,t,n,r){i("/SettingService/Delete",e,t,n,r)}function f(e,t,n,r){i("/SettingService/DeleteByPrefix",e,t,n,r)}var r;r={getUserSettings:s,getUserSettingsByPrefix:o,updateUserSettings:u,deleteUserSettings:a,deleteUserSettingsByPrefix:f},t.Services.add("configurationService",r)}(Shell,Impl),function(e,t,n,r,i,s){var o=n.prototype,u="fxs-subscriptionpicker-inactive",a="fxs-subscriptionpicker-expanded",f="fxs-subscriptionpicker-searchactive",l="fxs-subscriptionpicker-checked",c="fxs-subscriptionpicker-dirty",h="fxs-subscriptionpicker-no-selection",p="fxs-subscriptionpicker-pressed",d="__fxs-subscriptionpicker-sub-",v="<a class='fxs-subscriptionpicker-tray' href='#'><span class='fxs-subscriptionpicker-text' data-bind='text: text.subscriptionFilter'></span><img class='fxs-subscriptionpicker-icon' src='' alt='' /></a><div class='fxs-subscriptionpicker-dropdown' data-bind='css: { \""+c+"\": data.isDirty() }'>"+"<div class='fxs-subscriptionpicker-searchbox'><input type='text' /><img class='fxs-subscriptionpicker-search-icon' data-bind='attr: { src: url.search_off }' alt='' /></div>"+"<div class='fxs-subscriptionpicker-header fxs-subscription-picker-filtertext' data-bind='text: text.filter'></div>"+"<div class='fxs-subscriptionpicker-list'>"+"<ul>"+"<li class='fxs-subscriptionpicker-selectall'>"+"<label>"+"<div class='fxs-subscriptionpicker-checkbox' data-bind='activateWidget: \"fxTristateCheckBox\", fxcontrol-options: $.extend({}, { url: $root.url.checkbox })'></div>"+"<div class='fxs-subscriptionpicker-item-text' data-bind='text: text.selectAll'></div>"+"</label>"+"</li>"+"<li class='fxs-subscriptionpicker-noresults'>"+"<div class='fxs-subscriptionpicker-item-text' data-bind='text: text.noResults'></div>"+"</li>"+"<!-- ko foreach: data.subscriptions -->"+'<li data-bind=\'attr: { "class": $root.ctx._getListItemId(id) }, css: { "fxs-subscriptionpicker-inactive": !visible(), "'+l+"\": selected() }'>"+"<label>"+"<div class='fxs-subscriptionpicker-checkbox' data-bind='activateWidget: \"fxCheckBox\", fxcontrol-options: $.extend({}, { value: selected(), change: $root.ctx._checkBoxChanged, url: $root.url.checkbox })'></div>"+"<div class='fxs-subscriptionpicker-item-text' data-bind='text: text()'></div>"+"</label>"+"</li>"+"<!-- /ko -->"+"</ul>"+"</div>"+"<div class='fxs-subscriptionpicker-applybutton'><span class='fxs-subscriptionpicker-apply-text' data-bind='text: text.apply'></span><img class='"+u+" fxs-subscriptionpicker-apply-spinner' data-bind='attr: { src: url.applySpinner }' alt=''></div>"+"<div class='fxs-subscriptionpicker-actions'>"+"<div class='fxs-subscriptionpicker-header fxs-subscriptionpicker-actionsheader' data-bind='text: text.usefulActions'></div>"+"<div class='fxs-subscriptionpicker-actions-container'>"+"<ul data-bind='foreach: data.actions'>"+"<li><a class='fxs-subscriptionpicker-action' href='#' data-bind='text: text'></a></li>"+"</ul>"+"</div>"+"</div>"+"</div>";e.widget("fxs.fxsSubscriptionPicker",n,{options:{update:e.noop,subscriptions:null,animationDurationMs:300,class_:i.getClasses("fxs.fxsSubscriptionPicker"),text:i.getStrings("fxs.fxsSubscriptionPicker")},_viewModel:null,_subscriptions:null,_originalSubscriptionState:null,_subscriptionItemSubscriptions:null,_selectedSubscriptionExists:!1,_isDropDownOpening:!1,_dropDownElement:null,_subscriptionListElement:null,_searchBoxElement:null,_selectAllListItemElement:null,_selectAllCheckBoxElement:null,_selectAllTextElement:null,_noResultsListItemElement:null,_searchBoxInputElement:null,_applyButtonElement:null,_globalClickHandler:null,_create:function(){this.element.addClass("fxs-subscriptionpicker").html(v),this._setViewModel(new e.fxs.fxsSubscriptionPicker.SubscriptionPicker),this._initializeControlsAndEventHandlers(),this._setOption("subscriptions",this.options.subscriptions),this._setOption("actions",this.options.actions),o._create.call(this)},_destroy:function(){this.element.removeClass("fxs-subscriptionpicker").empty(),this._unsubscribe(),this._destroyGlobalClickHandler(),this._super()},_initializeControlsAndEventHandlers:function(){var e=this;this.element.find(".fxs-subscriptionpicker-tray").on("click",function(){e._trayClicked.apply(e,arguments)}),this._dropDownElement=this.element.find(".fxs-subscriptionpicker-dropdown").addClass(u).on("click",function(){e._onDropDownClick.apply(e,arguments)}),this._dropDownElement.find(".fxs-subscriptionpicker-list ul").on("click","li",function(){e._onSubscriptionListItemClick.apply(e,arguments)}),this._subscriptionListElement=this.element.find(".fxs-subscriptionpicker-list").fxScrollbar({overlay:!0}),this._selectAllListItemElement=this.element.find(".fxs-subscriptionpicker-selectall"),this._selectAllCheckBoxElement=this._selectAllListItemElement.find(".fxs-subscriptionpicker-checkbox").on("change.fxcontrol",function(){e._selectAllCheckBoxChanged.apply(e,arguments)}),this._selectAllTextElement=this._selectAllListItemElement.find(".fxs-subscriptionpicker-item-text"),this._noResultsListItemElement=this.element.find(".fxs-subscriptionpicker-noresults").addClass(u),this._applyButtonElement=this.element.find(".fxs-subscriptionpicker-applybutton").fxButton({click:function(){e._triggerUpdate.apply(e,arguments)}}),this._searchBoxElement=this.element.find(".fxs-subscriptionpicker-searchbox").on("focusin",function(){e._searchBoxElement.addClass(f)}).on("focusout",function(){e._searchBoxInputElement.val()===""&&e._searchBoxElement.removeClass(f)}),this._searchBoxInputElement=this._searchBoxElement.find("input").fxTextBox({change:function(){e._onFilter.apply(e,arguments)}})},_onFilter:function(t,n){var r=n.value.split(" "),i=[],s=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},o=!1;e.each(r,function(e,t){t&&(i.push(new RegExp(s(t),"i")),o=!0)}),e.each(this._viewModel.subscriptions(),function(t,n){var s=!0,o=n.text(),u=n.id;e.each(i,function(e,t){if(r[e]!==u&&!t.test(o))return s=!1,!1}),n.visible(s)}),this._setSelectAllBoxState(o),this._subscriptionListElement.fxScrollbar("refresh")},_onDropDownClick:function(e,t){var n=ko.dataFor(e.target),r;n&&n.callback&&(r=n.callback(),r&&typeof r=="function"&&(r(),this._closeDropDownMenu())),e.preventDefault(),e.stopPropagation()},_setViewModel:function(e){this._viewModel=e,this._subscribe(this._viewModel),ko.applyBindings({data:this._viewModel,class_:this.options.class_,text:this.options.text,ctx:this},this.element[0])},_getListItemId:function(e){return d+e},_setOption:function(e,t){var n=o._setOption.apply(this,arguments);switch(e){case"subscriptions":this._setSubscriptions(t);break;case"actions":this._setActions(t)}return n},_clearDirty:function(){this._viewModel._isDirty(!1),this._applyButtonElement.removeClass(p),this._setSelectAllBoxState(!1)},_setSubscriptions:function(t){var n=this,r=[],i=!1;this._originalSubscriptionState={},t&&(e.each(t,function(t,s){var o=s;typeof s!="fxs.fxsSubscriptionPicker.Subscription"&&(o=new e.fxs.fxsSubscriptionPicker.Subscription(s.id,s.text,s.selected)),n._originalSubscriptionState[o.id]=o.selected(),o.selected()||(i=!0),r.push(o)}),this._viewModel.subscriptions.splice(0,this._viewModel.subscriptions().length),ko.utils.arrayPushAll(this._viewModel.subscriptions,r),i?this.element.find(".fxs-subscriptionpicker-icon").attr({src:this.options.url.filter_on}):this.element.find(".fxs-subscriptionpicker-icon").attr({src:this.options.url.filter_off}),this._clearDirty())},_restoreOriginalState:function(){var t=this;e.each(this._viewModel.subscriptions(),function(e,n){var r=t._originalSubscriptionState[n.id];r!==s&&n.selected(r)}),this._clearDirty()},_setActions:function(t){var n=[];t&&(e.each(t,function(t,r){var i=r;typeof r!="fxs.fxsSubscriptionPicker.Action"&&(i=new e.fxs.fxsSubscriptionPicker.Action(r.text,r.callback)),n.push(i)}),this._viewModel.actions.splice(0,this._viewModel.actions.length),ko.utils.arrayPushAll(this._viewModel.actions,n))},_setSelectAllBoxState:function(t){var n=this,r=this._viewModel.subscriptions(),i=!1,s=!0,o=!0,a,f;this._selectedSubscriptionExists=!1,e.each(r,function(e,t){t.visible()?(i=!0,t.selected()?(o=!1,n._selectedSubscriptionExists=!0):s=!1):t.selected()&&(n._selectedSubscriptionExists=!0)}),t?a=this.options.text.selectAllSearchResults:t===!1&&(a=this.options.text.selectAll),s?(f=e.fx.fxTristateCheckBox.Values.checked,this._selectAllListItemElement.addClass(l)):o?(f=e.fx.fxTristateCheckBox.Values.unchecked,this._selectAllListItemElement.removeClass(l)):(f=e.fx.fxTristateCheckBox.Values.indeterminate,this._selectAllListItemElement.addClass(l)),i?(this._noResultsListItemElement.addClass(u),this._selectAllListItemElement.removeClass(u),this._selectAllCheckBoxElement.fxTristateCheckBox("option","value",f),this._selectAllTextElement.text(a)):(this._selectAllListItemElement.addClass(u),this._noResultsListItemElement.removeClass(u)),this._dropDownElement.toggleClass(h,!this._selectedSubscriptionExists)},_subscribe:function(e){var t=this;this._unsubscribe(),this._subscriptions=[],this._subscriptions.push(e.subscriptions.subscribe(function(e){t._subscriptionListChanged.call(t,e)}))},_subscriptionListChanged:function(t){var n=this;this._unsubscribeFromSubscriptionItems(),this._subscriptionItemSubscriptions=[],e.each(t,function(){var t=this,r=n._originalSubscriptionState[t.id];r===s&&(n._originalSubscriptionState[t.id]=t.selected()),n._subscriptionItemSubscriptions.push(t.selected.subscribe(function(r){var i=n.element.find("."+d+t.id+" .fx-checkbox"),o=!1;if(i.length!==1)throw"subscription id is invalid";i.fxCheckBox("value")!==r&&i.fxCheckBox("option","value",r),n._setSelectAllBoxState(),e.each(n._viewModel.subscriptions(),function(e,t){var r=n._originalSubscriptionState[t.id];if(r===s)throw"missing original state of subscription "+t.id;if(r!==t.selected())return o=!0,!1}),n._viewModel._isDirty(o)}))})},_unsubscribe:function(){this._unsubscribeFromSubscriptionItems();if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},_unsubscribeFromSubscriptionItems:function(){if(this._subscriptionItemSubscriptions)while(this._subscriptionItemSubscriptions.length)this._subscriptionItemSubscriptions.splice(0,1)[0].dispose()},_onSubscriptionListItemClick:function(t,n){var r=ko.dataFor(t.target),i;r&&r.selected?(i=e(t.target).parents("li").eq(0).find(".fx-checkbox"),i.length===1&&i[0]!==t.target&&!e.contains(i[0],t.target)&&r.selected(!r.selected())):(i=e(t.target).parents("li").eq(0).find(".fx-tristatecheckbox"),i.length===1&&i[0]!==t.target&&!e.contains(i[0],t.target)&&i.fxTristateCheckBox("toggle"))},_checkBoxChanged:function(t,n){var r=ko.dataFor(t.target),i=e(t.target).parent("li");i.toggleClass(l,r.selected()),r.selected()!==n.value&&r.selected(n.value)},_selectAllCheckBoxChanged:function(t,n){var r=null;n.value===e.fx.fxTristateCheckBox.Values.checked?r=!0:n.value===e.fx.fxTristateCheckBox.Values.unchecked&&(r=!1),r!==null&&e.each(this._viewModel.subscriptions(),function(e,t){t.visible()&&t.selected()!==r&&t.selected(r)})},_triggerUpdate:function(){var e;this._selectedSubscriptionExists&&this._viewModel.isDirty()&&(e=this._getSubscriptionObjects(),this._applyButtonElement.addClass(p),this._trigger("update",null,{subscriptions:e}))},_getSubscriptionObjects:function(){var t=[];return e.each(this._viewModel.subscriptions(),function(e,n){t.push({id:n.id,text:n.text(),selected:n.selected()})}),t},_trayClicked:function(t){var n=this;this.element.hasClass(a)||(this.element.addClass(a),this._dropDownElement.slideDown(this.options.animationDurationMs).removeClass(u),this._isDropDownOpening=!0,this._destroyGlobalClickHandler(),e("body").on("click",this._globalClickHandler=function(){n._closeDropDownMenu.apply(n,arguments)}),this._subscriptionListElement.fxScrollbar("refresh")),t.preventDefault()},_closeDropDownMenu:function(){var e=this;this._isDropDownOpening?this._isDropDownOpening=!1:(this.element.removeClass(a),this._dropDownElement.slideUp(this.options.animationDurationMs,function(){e._restoreOriginalState()}).addClass(u),this._destroyGlobalClickHandler())},_destroyGlobalClickHandler:function(){this._globalClickHandler&&(e("body").off("click",this._globalClickHandler),this._globalClickHandler=null)}}),e.fxs.fxsSubscriptionPicker.SubscriptionPicker=r.Class.define(function(){var e=this;this._isDirty=ko.observable(!1),this.subscriptions=ko.observableArray(),this.actions=ko.observableArray(),this.isDirty=ko.computed({read:function(){return e._isDirty()}})}),e.fxs.fxsSubscriptionPicker.Subscription=r.Class.define(function(e,t,n){var r=!0;typeof n=="boolean"&&(r=n),this.id=e||"",this.selected=ko.observable(r),this.text=ko.observable(t||""),this.visible=ko.observable(!0)}),e.fxs.fxsSubscriptionPicker.Action=r.Class.define(function(e,t){this.text=e||"",this.callback=ko.observable(t||null)})}(jQuery,this,jQuery.Widget,Shell,this.fx.resources),e(function(){l.resolve()})}),define("extensioncore/exp.resources",["uxfximpl"],function(){window.Shell.Namespace.define("ExtensionCore",{Resources:window.Resources.getResources("Microsoft.MetaAnalytics.Web.ClientResources")})}),define("extensioncore/exp.data",["jquery","extensioncore/exp.resources"],function(e){function o(){return{collection:{},add:function(e){var t=window.Exp.Data.makeKey(e.typeName,e.itemName);this.collection[t]=e},clearETag:function(e,t){var n=window.Exp.Data.makeKey(e,t),r=this.collection[n];r!==undefined&&(r.value.eTag="")},expire:function(e,t){var n=window.Exp.Data.makeKey(e,t),r=this.collection[n];r!==undefined&&(r.expiry=(new Date).getTime()-1,this.collection[n]=r)},clear:function(e,t){var n=window.Exp.Data.makeKey(e,t),r=this.collection[n];r!==undefined&&(r.isDisposed=!0,r.pollingTask&&window.Exp.Scheduler.deleteTask(r.pollingTask),delete this.collection[n])},localGet:function(e,t,n){var r=window.Exp.Data.makeKey(e,t),i=this.collection[r];if(i===undefined){if(!n)return null;i={typeName:e,itemName:t},this.collection[r]=i}return i},get:function(t,n,i){var s,o=i.url,u=i.ajaxData,a=i.ajaxHeaders,l=null,c=null,h=this.localGet(t,n);if(h)if(h.value&&o===h.sourceUrl&&e.param(u||{})===e.param(h.ajaxData||{})){if(i.allowExpired||!h.expiry||h.expiry>(new Date).getTime())return i.forceCacheRefresh&&(window.Exp.Scheduler.deleteTask(h.pollingTask),v.apply(h.pollingTask,h.pollingTask.args.concat([!0]))),e.Deferred().resolve(n,h.value).promise();if(h.currentFetchDeferred&&!i.forceCacheRefresh)return h.currentFetchDeferred.promise();Shell.Diagnostics.Log.writeEntry("Exp.Data.ItemExpired","Cached "+t.toLowerCase()+" expired: '"+n+"'",Shell.Diagnostics.LogEntryLevel.verbose),l=h.value.eTag,c=h.value.tag}else h.debouncedFetch&&(window.clearTimeout(h.debouncedFetch.timeoutId),h.debouncedFetch(),h.debouncedFetch=null),h.sourceUrl=o,h.ajaxData=u,h.ajaxHeaders=a,h.preserveNewRowsOrdering=i.preserveNewRowsOrdering,h.value&&(c=h.value.tag);else h={typeName:"Data",itemName:n,sourceUrl:o,ajaxData:u,ajaxHeaders:a,preserveNewRowsOrdering:i.preserveNewRowsOrdering},r.add(h);return i.fetchStartListener&&e(h).on("fetchStart",i.fetchStartListener),h.debouncedFetch?s=h.currentFetchedDeferred:(h.currentFetchDeferred=s=e.Deferred(),h.pollingTask&&window.Exp.Scheduler.deleteTask(h.pollingTask),h.debouncedFetch=function(){h.debouncedFetch=null,e(h).triggerHandler("fetchStart",{dataSetName:n,promise:s.promise(),isClientInitiated:!0}),I(n,l,o,c,u,a,function(t){if(m(h))return;y(h,s),h.value?E(h,t):(e.extend(h,t),f(h)),g(h),s.resolve(n,h.value)},function(e,t,r){if(m(h))return;y(h,s),s.reject(n,e,t,r)})},h.debouncedFetch.timeoutId=window.setTimeout(h.debouncedFetch,0)),s.promise()}}}function u(e){var t,n;return typeof e=="string"?n=window.Exp.Data.getLocalDataSet(e):e.uri?n=window.Exp.Data.getLocalDataSet(e.uri):n=e,t=n[n.collectionPropertyName||"data"]||n,t}function a(e){var t,n,r,i,s,o;for(s=0,o=e.length;s<o;s++){t=e[s];for(n in t)t.hasOwnProperty(n)&&(r=t[n],typeof r=="string"&&(i=/^\/Date\(([0-9]+)\)\/$/.exec(r),i&&i[1]&&(t[n]=new Date(parseInt(i[1],10)))))}}function f(e){var t=e.value,n=e.pollingTask={name:"poll data set: "+e.itemName,scheduledTask:v,recurring:!1,isAsync:!0,delayInMs:t.fastPollingInterval,args:[e],silent:!0,pollCount:0};e.currentFetchDeferred||window.Exp.Scheduler.scheduleTask(n)}function l(e,t){return function(){t.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.count,e.length)}}function c(t){var n,r,i,s,o,u,a,f,c;for(f=0,c=Shell.extensions.length;f<c;f++){n=Shell.extensions[f];if(n.dataIsLoaded)continue;p(n,t)&&d(n)&&(n.dataIsLoaded=!0,global.Exp.Drawer.refreshExtensionMenuItemStatus(n.name),n.name==="SqlAzureExtension"&&window.Exp.Drawer.refreshExtensionMenuItemStatus("MobileServicesExtension"),n.onDataLoadComplete&&(Shell.Diagnostics.Telemetry.timerStart("cdm.onDataLoadComplete"),Shell.Internal.callPartnerScript(n,n.onDataLoadComplete,n),Shell.Diagnostics.Telemetry.timerStopAndLog("cdm.onDataLoadComplete",n.name+".onDataLoadComplete returned after")),n.includeInAllView&&(a=Shell.extensionIndex.All,a&&a.updateViewData&&a.updateViewData(n)),n.virtualNavigationalViewModelDataSetInfo?W(n,n.virtualNavigationalViewModelDataSetInfo):(u=Shell.UI.Navigation.getObservableExtensionBadge(n.name),u===null?Shell.Diagnostics.Log.writeEntry("Exp.Data.NoNavigationItem","No navigation item found for extension '"+n.name+"'",Shell.Diagnostics.LogEntryLevel.error):u.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.showSpinner,!1),i=n.navigationalViewModel&&n.navigationalViewModel.uri,r=i&&window.Exp.Data.getLocalDataSet(i),u&&r&&r.data&&(e(window.Exp.Data).triggerHandler("navigationalViewModelDataSetLoad",{extension:n,dataSetName:i}),s=window.Exp.Utilities.getChildProperty(r.data,n.navigationalViewModelPath),o=s.length,o!==undefined&&(o>0&&Shell.Extensions.Current.showCategory(!0,n.name),e([s]).bind("arrayChange.aux-navCount",l(s,u)),u.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.count,o)))),n===window.cdm.currentExtension&&window.Shell.UI.Navigation.navigate(window.location.hash))}}function h(e){var t,r,i,s,o;for(s=0,o=Shell.extensions.length;s<o;s++)t=Shell.extensions[s],p(t,e)&&(r=e,Shell.Diagnostics.Log.writeEntry("Exp.Data.ExtensionCouldNotBeLoaded","Extension '"+t.name+"' cannot be loaded due to an error loading data set from '"+r+"'.",Shell.Diagnostics.LogEntryLevel.error),i=Shell.UI.Navigation.getObservableExtensionBadge(t),i&&i.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.displayError,n.extensionDataLoadError))}function p(e,t){if(!e)return!1;if(e.extensionUsesDataSet&&e.extensionUsesDataSet(t))return!0;if(e.navigationalViewModel&&e.navigationalViewModel.uri===t)return!0;if(e.viewModels)for(var n=0,r=e.viewModels.length;n<r;n++)if(e.viewModels[n].uri===t)return!0;return!1}function d(e){if(e.navigationalViewModel&&!r.localGet("Data",e.navigationalViewModel.uri).fetchComplete)return!1;for(var t=0,n=e.viewModels.length;t<n;t++)if(!r.localGet("Data",e.viewModels[t].uri).fetchComplete)return!1;return!0}function v(n,r){var i=n.itemName,s=n.value,o,u,a,f,l;r?(o=!0,f="Extension forced an immediate poll, likely when transitioning to a new view against cached data"):!n.currentFetchDeferred&&!t&&(this.pollCount++,F(n)?(o=!0,f="Client side locking or mutation flags detected",u=s.fastPollingInterval):p(window.cdm.currentExtension,n.itemName)?(o=!0,f="Normal polling",u=s.pollingInterval):window.cdm.currentExtension&&window.cdm.currentExtension.name==="All"&&(o=!0,f="All view polling",u=s.slowPollingInterval),o&&(a=Math.ceil(u/s.fastPollingInterval),o=this.pollCount%a===0)),o?(Shell.Diagnostics.Log.writeEntry("Exp.Data.PollingDataSet","Polling data set '{0}'. Reason: {1}".format(i,f),Shell.Diagnostics.LogEntryLevel.verbose),l=n.currentFetchDeferred=e.Deferred(),e(n).triggerHandler("fetchStart",{dataSetName:i,promise:l.promise()}),I(i,n.value.eTag,n.sourceUrl,n.value.tag,n.ajaxData,n.ajaxHeaders,function(e){if(m(n))return;try{t<=0&&(E(n,e),g(n))}catch(r){Shell.Diagnostics.Log.writeEntry("Exp.Data.DataMergeFailed","Data merge failed for data set '"+i+"'. The error message was: "+(r.message||r.Message||r),Shell.Diagnostics.LogEntryLevel.error)}finally{y(n,l),l.resolve(n.itemName,n.value)}},function(e,t,r){if(m(n))return;y(n,l),l.reject(n.itemName,e,t,r)})):b(n)}function m(e){return e.isDisposed}function g(t){e.isArray(t.value.partialErrors)&&t.value.partialErrors.length>0&&e.each(t.value.partialErrors,function(e,n){Shell.Diagnostics.Log.writeEntry("Exp.Data.PartialDataLoadErrors","Load of data set '"+t.itemName+"' returned partial error: '"+n.errorString+"'.  Error details: "+(n.exceptionDetails||"None"),Shell.Diagnostics.LogEntryLevel.error)})}function y(e,t){t===e.currentFetchDeferred&&(e.currentFetchDeferred=null,e.pollingTask&&(e.pollingTask.pollCount=0),b(e))}function b(e){!e.isDisposed&&e.pollingTask&&window.Exp.Scheduler.scheduleTask(e.pollingTask)}function w(e){function t(){var e="Merge: "+this.targetName;this.mergeDataClassicDuration>=0&&(e+=", mergeDataClassic: "+this.mergeDataClassicDuration+"ms"),this.mergeDataCascadeDuration>=0&&(e+=", mergeDataCascade: "+this.mergeDataCascadeDuration+"ms"),this.fieldCount>0&&(e+=", fields: "+this.fieldCount),this.rowCount>0&&(e+=", rows: "+this.rowCount),this.arrayCount&&(e+=", arrays: "+this.arrayCount),e+=", observable: {setProperty: "+this.observable.setPropertyCount,this.observable.setPropertyCount>0&&(e+=" ("+this.observable.setPropertyHandlersDuration+"ms)"),e+=", insert: "+this.observable.insertCount,this.observable.insertCount>0&&(e+=" ("+this.observable.insertHandlersDuration+"ms)"),e+=", remove: "+this.observable.removeCount,this.observable.removeCount>0&&(e+=" ("+this.observable.removeHandlersDuration+"ms)"),e+=", refresh: "+this.observable.refreshCount,this.observable.refreshCount>null&&(e+=" ("+this.observable.refreshHandlersDuration+"ms)"),e+="}",this.mergeCompleteDuration!==null&&(e+=", mergeCompleteHandler: "+this.mergeCompleteDuration+"ms"),Shell.Diagnostics.Log.writeEntry("Exp.data.mergePerf",e,Shell.Diagnostics.LogEntryLevel.verbose)}return{targetName:e,rowCount:0,arrayCount:0,objectCount:0,fieldCount:0,observable:{setPropertyCount:0,refreshCount:0,insertCount:0,removeCount:0,setPropertyHandlersDuration:null,refreshHandlersDuration:null,insertHandlersDuration:null,removeHandlersDuration:null},mergeDataClassicDuration:-1,mergeDataCascadeDuration:-1,mergeCompleteDuration:null,dump:t}}function E(t,n){t.expiry=(new Date).getTime()+t.value.slowPollingInterval*3;var r=n.value.mergeMethod,i=new w(t.itemName),s=new Date;r&&r.toLowerCase()==="cascade"?(x(t,n,i),i.mergeDataCascadeDuration=new Date-s):(S(t,n,i),i.mergeDataClassicDuration=new Date-s),s=new Date,e(t.value).triggerHandler("mergeComplete"),i.mergeCompleteDuration=new Date-s,i.dump()}function S(t,n,r){Shell.Diagnostics.Telemetry.timerStart("cdm.classicMergeData");var i=t.value.eTag,s=n.value.eTag,o=i&&i===s,u=0,a=[],f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;t.value.partialErrors=n.value.partialErrors?n.value.partialErrors.slice(0):null;if(o&&window.Exp.Data.getRowIndex(t.value.data,"aux-wasLocked",!0)===null)return;t.value.eTag=s,f=t.itemName,l=n.collectionPropertyName||"data",y=t.collectionPropertyName||"data";if(l!==y){Shell.Diagnostics.Log.writeEntry("Exp.Data.NamePropertyChanged","Name Property has changed for data set '"+f+"'. Data cannot be merged and will be bulk replaced.",Shell.Diagnostics.LogEntryLevel.information),t.value=n.value,t.namePropertyName=n.namePropertyName,t.displayNamePropertyName=n.displayNamePropertyName,t.collectionNamePropertyName=n.collectionNamePropertyName;return}v=n.value[l],S=t.value[y],b=e.isArray(S),c=e.isArray(v);if(b!==c){Shell.Diagnostics.Log.writeEntry("Exp.Data.CollectionPropertyChanged","Collection property has changed for data set '"+f+"'. Data cannot be merged and will be replaced.",Shell.Diagnostics.LogEntryLevel.information),t.value=n.value,t.namePropertyName=n.namePropertyName,t.displayNamePropertyName=n.displayNamePropertyName,t.collectionNamePropertyName=n.collectionNamePropertyName;return}if(!b){e.observable(t.value).setProperty(n.value);return}x=t.value.namePropertyName||"name",d=N(v,x),g=[];for(E=S.length-1;E>=0;E--)r.rowCount++,w=S[E],h=d[w[x]],h?(B(w,n.fetchStart)&&(M(w,h,r),delete w["aux-locked"],delete w["aux-wasLocked"]),h.auxRowMatched=!0,u++):B(w,n.fetchStart)&&D(S,E,1,r);if(u!==v.length){for(p=0,m=v.length;p<m;p++)h=v[p],h.auxRowMatched||a.push(h);_(S,S.length,a,r)}Shell.Diagnostics.Telemetry.timerStopAndLog("cdm.classicMergeData","long form mergeData("+f+") inc JsViews callbacks:")}function x(t,n,r){var i=t.itemName,s=n.value.data,o=t.value.data,u=t.value.eTag,a=n.value.eTag,f,l,c={preserveNewRowsOrdering:t.preserveNewRowsOrdering};Shell.Diagnostics.Telemetry.timerStart("cdm.mergeData"),t.value.tag=n.value.tag,t.value.partialErrors=n.value.partialErrors?n.value.partialErrors.slice(0):null;if(u&&u===a&&!j(t))return;t.value.eTag=a,l=e.isArray(o),f=e.isArray(s);if(l!==f){Shell.Diagnostics.Log.writeEntry("Collection type has changed for data set '"+i+"'. Data cannot be merged and will be replaced.",Shell.Diagnostics.LogEntryLevel.verbose),t.value=n.value;return}l?T(n.fetchStart,o,s,c,r):H(n.fetchStart,t.value,n.value,c,r),Shell.Diagnostics.Telemetry.timerStopAndLog("cdm.mergeData","long form mergeData("+i+") inc JsViews callbacks:")}function T(e,t,n,r,i){i.arrayCount++,r&&r.preserveNewRowsOrdering?C(e,t,n,r,i):A(e,t,n,r,i)}function N(e,t){var n={},r,i,s;t=t||"id";if(e)for(r=0,i=e.length;r<i;r++)s=e[r][t],typeof s!="undefined"&&(n[s]=e[r]);return n}function C(t,n,r,i,s){var o,u=n.length,a,f,l=r.length,c,h=i&&i.preventItemRemoval,p,d=[],v;i=e.extend({},i,{preserveNewRowsOrdering:!0});for(o=0;o<u;o++){a=n[o],p=!1;for(f=0;f<l;f++)s.rowCount++,c=r[f],k(t,a,c,i,s)&&(p=!0,r.splice(f,1,a));!p&&(h||!B(a,t,"delete"))&&d.push(o)}for(v=0;v<d.length;v++)o=d[v],a=n[o],f=L(n,r,o),r.splice(f,0,a);P(n,r,s)}function k(e,t,n,r,i){return typeof n.id!="undefined"&&t.id===n.id?(H(e,t,n,r,i),!0):!1}function L(t,n,r){var i,s,o,u,a,f;for(i=r-1;i>=0;i--){s=e.inArray(t[i],n);if(s>=0){o=s+1,u=r-i;break}}for(i=r+1;i<t.length;i++){s=e.inArray(t[i],n);if(s>=0){a=s,f=i-r;break}}return u===undefined&&f===undefined?s=n.length:s=(u||1e5)<(f||1e5)?o:a,s}function A(t,n,r,i,s){var o,u,a,f,l,c,h=i&&i.preventItemRemoval,p=[],d=0;i=e.extend({},i,{preserveNewRowsOrdering:!1}),l=N(r);for(o=n.length-1;o>=0;o--)u=n[o],f=l[u.id],s.rowCount++,typeof f!="undefined"?(s.rowCount++,H(t,u,f,i,s),f.auxRowMatched=!0,d++):!h&&B(u,t,"delete")&&D(n,o,1,s);if(d!==r.length){for(a=0,c=r.length;a<c;a++)f=r[a],f.auxRowMatched||p.push(f);_(n,n.length,p,s)}}function O(t,n,r,i){var s=new Date;i.observable.setPropertyCount++,e.observable(t).setProperty(n,r),i.observable.setPropertyHandlersDuration+=new Date-s}function M(t,n,r){var i=new Date;r.observable.setPropertyCount++,e.observable(t).setProperty(n),r.observable.setPropertyHandlersDuration+=new Date-i}function _(t,n,r,i){var s=new Date;i.observable.insertCount++,e.observable(t).insert(n,r),i.observable.insertHandlersDuration+=new Date-s}function D(t,n,r,i){var s=new Date;i.observable.removeCount++,e.observable(t).remove(n,r),i.observable.removeHandlersDuration+=new Date-s}function P(t,n,r){var i=new Date;r.observable.refreshCount++,e.observable(t).refresh(n),r.observable.refreshHandlersDuration+=new Date-i}function H(t,n,r,i,s){var o,u,a,f,l;s.objectCount++;if(!B(n,t,"merge"))return;delete n["aux-locked"],delete n["aux-wasLocked"],delete n["aux-lockOptions"];for(o in r)if(r.hasOwnProperty(o)){s.fieldCount++,u=r[o],f=n[o];if(u===f)continue;a=typeof u,l=typeof f;if(u===null)f!==null&&O(n,o,u,s);else if(e.isArray(u))l==="undefined"||f===null||!e.isArray(f)?(s.arrayCount++,O(n,o,u,s)):T(t,f,u,i,s);else if(a==="object")l==="undefined"||f===null?(s.objectCount++,O(n,o,u,s)):f instanceof Date?(f>u||f<u)&&O(n,o,u,s):H(t,f,u,i,s);else{if(a==="function")continue;O(n,o,u,s)}}}function B(e,t,n){var r=e["aux-locked"];return r===undefined?!0:n==="merge"&&e["aux-lockOptions"]==="lockForDeleteOnly"?!0:t>=r}function j(e){return window.Exp.Utilities.visitor(e.value.data,function(e){return!!e["aux-wasLocked"]})}function F(e){return e.isFastPolling||window.Exp.Utilities.visitor(e.value.data,function(e){return!!e["aux-wasLocked"]||!!e.locked||e.isMutating})}function I(t,n,r,i,s,o,u,a){var f=e.Deferred(),l=new Date,c=null;return q(f,l,c,t,n,r,i,s,o,u,a),f.promise()}function q(t,n,r,i,s,o,u,a,f,l,c){var h={"x-ms-tag":u||undefined,ETag:s||""};h=e.extend({},f,h),Shell.Net.ajaxPost({url:o+"?ts="+(new Date).getTime(),data:a,headers:h,suppressSuccessLogging:!0,success:function(u,h,p){var d,v=R(u),m,g,y=p.getResponseHeader("x-ms-tag");if(!v||r)r?(r.partCount++,r.eTag+=u.eTag,e.isArray(u.data)?r.data.push(u.data):(m=new w(i+" part #"+r.partCount),g=new Date,H(n,r,u,{preventItemRemoval:!0,preserveNewRowsOrdering:!1},m),m.mergeDataCascadeDuration=new Date-g,m.dump())):(r=u,r.partCount=1),Shell.Diagnostics.Log.writeEntry("Exp.Data.DatasetFetchComplete","Fetch complete for part "+r.partCount+" of '"+i+"' ("+o+")",Shell.Diagnostics.LogEntryLevel.verbose);v?(Shell.Diagnostics.Log.writeEntry("Exp.Data.DatasetFetchComplete","Fetch complete for '"+i+"' ("+o+")",Shell.Diagnostics.LogEntryLevel.verbose),d=U(r||u,n,i,o,y),typeof l=="function"&&l(d),t.resolve(d)):q(t,n,r,i,s,o,y,a,f,l,c)},error:function(e,n,r){typeof c=="function"&&c(e,n,r),t.reject()}})}function R(e){return e.isComplete||e.isComplete===undefined}function U(t,n,r,i,s){e.isArray(t.data)&&a(t.data);if(isNaN(t.pollingInterval)||t.pollingInterval<5e3)t.pollingInterval=5e3;if(isNaN(t.fastPollingInterval)||t.fastPollingInterval<5e3)t.fastPollingInterval=5e3;if(isNaN(t.slowPollingInterval)||t.slowPollingInterval<5e3)t.slowPollingInterval=5e3;t.fastPollingInterval>t.pollingInterval&&(t.pollingInterval=t.fastPollingInterval),t.pollingInterval>t.slowPollingInterval&&(t.slowPollingInterval=t.pollingInterval),t.tag=s;var o={value:t,fetchStart:n,fetchComplete:new Date,expiry:(new Date).getTime()+t.slowPollingInterval*3};return o}function z(t){function b(){o--,o<=0&&(Shell.Diagnostics.Telemetry.timerStopAndLog("cdm.initialDataLoad","Initial data fetch:"),e.observable(window.Exp.Data.internal).setProperty("isInitialDataLoadComplete",!0))}var n=[],r=[],i,o,u,a,f,l,p,d,v,m,g,y;f=Shell.extensions.slice(0).sort(function(e,t){return l=e.loadOrderHint-t.loadOrderHint,l===0&&(l=Shell.Utilities.stringCompare(e.displayName,t.displayName)),l});for(v=0,y=f.length;v<y;v++){u=f[v],a=!1,i=window.Exp.Rdfe.getFeatureInAccount(Shell.Environment.getBetaFeatures()[u.name]),!i||(i.Status.toLowerCase()==="active"?Shell.Extensions.Current.showCategory(!0,u.name):Shell.Extensions.Current.showCategory(!1,u.name)),u.navigationalViewModel&&(u.navigationalViewModel.path&&(u.navigationalViewModelPath=u.navigationalViewModel.path),p=u.navigationalViewModel,s&&s(u,p),d=p.uri,a=!0,e.inArray(d,r)===-1&&(r.push(d),n.push(window.Exp.Data.getData({url:d,ajaxData:e.isFunction(p.ajaxData)?p.ajaxData():p.ajaxData}).then(c,h))));if(u.viewModels)for(m=0,g=u.viewModels.length;m<g;m++)p=u.viewModels[m],s&&s(u,p),d=p.uri,e.inArray(d,r)===-1&&(a=!0,r.push(d),n.push(window.Exp.Data.getData({url:d,ajaxData:e.isFunction(p.ajaxData)?p.ajaxData():p.ajaxData}).then(c,h)));a||(u.dataIsLoaded=!0,window.Exp.Drawer.refreshExtensionMenuItemStatus(u.name),u.virtualNavigationalViewModelDataSetInfo&&W(u,u.virtualNavigationalViewModelDataSetInfo))}Shell.Diagnostics.Telemetry.timerStart("cdm.initialDataLoad"),o=n.length;for(v=0;v<o;v++)n[v].then(b,b)}function W(t,n){var r=!0,i=t.name,s=Shell.UI.Navigation.getObservableExtensionBadge(i),o=n.dataSetName||n.url,u=function(o,u){var a=u.promise;a.then(function(o,u){r&&(Shell.Extensions.Current.showCategory(!0,i),s&&s.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.showSpinner,!1),e(window.Exp.Data).triggerHandler("navigationalViewModelDataSetLoad",{extension:t,dataSetName:o}),r=!1);var a=n.getTotalCountResult,f=e.isFunction(a)?a(u.data):u.data.totalCount;s&&s.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.count,f)},function(){r&&(Shell.Diagnostics.Log.writeEntry("Exp.Data.ExtensionCouldNotBeLoaded","Extension '"+i+"' cannot be loaded due to an error loading data set from '"+n.url+"'.",Shell.Diagnostics.LogEntryLevel.error),s&&s.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.displayError,"Unable to load "+t.displayName+"."),r=!1)})},a=e.extend({},n,{fetchStartListener:u});a.ajaxData=e.extend(a.ajaxData||{},n.totalCountQuery||{skip:0,take:0}),s?s.setProperty(Shell.UI.Navigation.WellKnownPropertyNames.showSpinner,!0):Shell.Diagnostics.Log.writeEntry("Exp.Data.NoNavigationItem","No navigation item found for extension '"+i+"'",Shell.Diagnostics.LogEntryLevel.error),window.Exp.Data.getData(o,a)}var t=0,n=window.ExtensionCore.Resources,r,i,s;r=new o,i={expireData:function(e){r.expire("Data",e)},forceRefresh:function(e){if(!e)return null;var t=typeof e=="string"?e:e.uri,n=r.localGet("Data",t);return window.Exp.Data.expireData(t),window.Exp.Data.getData({url:n.sourceUrl,ajaxData:n.ajaxData,allowExpired:!1})},forceNextDataMerge:function(e){r.clearETag("Data",e)},getData:function(e,t){return typeof e=="object"&&(t=e,e=t.url||t.uri),r.get("Data",e,t)},disposeDataSet:function(e){r.clear("Data",e)},setFastPolling:function(e,t){var n=r.localGet("Data",e);n&&(n.isFastPolling=!!t)},addFetchStartListener:function(t,n,i){var s=typeof t=="string"?t:t.uri,o=r.localGet("Data",s),u;o&&(u="fetchStart",i&&(u+="."+i),e(o).on(u,n))},removeFetchStartListener:function(t,n){var i=typeof t=="string"?t:t.uri,s=r.localGet("Data",i);s&&(e.isFunction(n)?e(s).off("fetchStart",n):e(s).off("fetchStart."+n))},getLocalDataSet:function(e,t){var n,i;return e?(n=typeof e=="string"?e:e.uri,i=r.localGet("Data",n,t),i?i.value:null):null},getRowIndex:function(e,t,n){var r,i,s;for(i=0,s=e.length;i<s;i++){r=e[i];if(r[t]===n)return i}return null},getRow:function(e,t,n){var r=this.getRowIndex(e,t,n);return r===null?null:e[r]},addRow:function(t,n,r){var i=u(t),s=i.length;return typeof r=="undefined"&&(r=!0),r&&window.Exp.Data.lockItem(n),e.observable(i).insert(s,n),s},removeRow:function(t,n,r){var i=u(t),s=this.getRowIndex(i,n,r);return s!==null?(e.observable(i).remove(s,1),!0):!1},lockItem:function(t){t&&e.observable(t).setProperty("aux-locked",(new Date).setFullYear(2999,12,31))},unlockItem:function(t){t&&t["aux-locked"]&&e.observable(t).setProperty({"aux-locked":new Date,"aux-wasLocked":!0})},lockRow:function(e,t,n){var r=u(e),i=this.getRowIndex(r,t,n);i>=0&&window.Exp.Data.lockItem(r[i])},unlockRow:function(e,t,n){var r=u(e),i=this.getRowIndex(r,t,n);i>=0&&window.Exp.Data.unlockItem(r[i])},isLocked:function(e){return e["aux-locked"]?e["aux-locked"]>new Date:!1},merge:function(t,n,r,i){var s=e.type(t),o=e.type(n),u=i&&i.perfName||"Exp.Data.merge",a=new w(u);if(s!==o)throw"Type Error: Merge parameters must be of the same type.";r=r||new Date;switch(s){case"array":T(r,t,n,i||{},a);break;case"object":H(r,t,n,i||{},a);break;default:throw"Type Error: Merge parameters must either both be arrays or both be objects."}a.mergeDataCascade=new Date-r,a.dump()},makeKey:function(){var e="",t,n;for(t=0,n=arguments.length;t<n;t++)e+="|"+arguments[t];return e.substring(1)},pausePolling:function(){t++},resumePolling:function(){t--},registerViewModelSettingsHandler:function(e){s=e},internal:{mergeData:E,dataFetch:I,requestAllDataSets:z,isInitialDataLoadComplete:!1}},Shell.Namespace.define("Exp.Data",i)}),define("extensioncore/exp.data.datasource",["jquery","uxfximpl","extensioncore/exp.data"],function(e){var t={disposeDataSet:!0},n=Shell.Data.DataSource,r=function(e){this._options=e,this._fetchStartListener=null,n.prototype.constructor.apply(this,arguments),this.dataSetName=this._getDataSetName()},i={_dispose:function(){var e=this._getDataSetName(),n=this._options.disposeDataSet;if(n===undefined||n===null)n=t.disposeDataSet;n?Exp.Data.getLocalDataSet(e)&&Exp.Data.disposeDataSet(e):this._fetchStartListener&&Exp.Data.removeFetchStartListener(e,this._fetchStartListener)},_shapeRefreshResult:function(e){throw"Not reachable"},_bindFetchStart:function(){if(this._fetchStartListener)return;var t=this,n=this._fetchStartListener=function(n,r){if(t._isDisposed())return;if(r.isClientInitiated)return;var i=r.promise,s=t._startRefresh();i.then(e.proxy(t._processFetchSuccess,t,s),e.proxy(t._processFetchFailure,t,s))};Exp.Data.addFetchStartListener(this._getDataSetName(),n)},_processFetchSuccess:function(e,t,n){if(this._isDisposed())return;var r=this._shapeRefreshResult(n);e.resolve(r.items,r.filteredTotalCount,r.totalCount,r.partialErrors)},_processFetchFailure:function(e,t,n,r,i){if(this._isDisposed())return;e.reject(n,r,i)},_getDataSetName:function(){return this._options.dataSetName||this._options.url}};Shell.Namespace.define("Exp.Data",{DataSource:Shell.Class.derive(n,r,i)})}),define("extensioncore/exp.data.localdatasetdatasource",["jquery","extensioncore/exp.data.datasource"],function(e){var t=Exp.Data.DataSource,n=function(n){t.prototype.constructor.apply(this,arguments),this.isQueryable=!1;var r=this._shapeRefreshResult(Exp.Data.getLocalDataSet(this._options.dataSetName)),i=this;e([r.items]).on("arrayChange."+this._id,function(e,t){var n=i._startRefresh();i._refreshItems(),n.resolve()}),this._refreshItems(),this._bindFetchStart()},r={_dispose:function(){var n=this._shapeRefreshResult(Exp.Data.getLocalDataSet(this._options.dataSetName));e([n.items]).off("arrayChange."+this._id),t.prototype._dispose.apply(this,arguments)},_refresh:function(){var t=e.Deferred();return this._refreshItems(),t.resolve(),t.promise()},_refreshItems:function(){var e=this._shapeRefreshResult(Exp.Data.getLocalDataSet(this._options.dataSetName));this._establishNewSuccessState(e.items,e.filteredTotalCount,e.totalCount,e.partialErrors)},_shapeRefreshResult:function(t){var n=t.data,r=t.partialErrors;return this._options.dataPath&&e.each(this._options.dataPath.split("."),function(){n=n[this]}),{items:n,filteredTotalCount:n.length,totalCount:n.length,partialErrors:r}}};Shell.Namespace.define("Exp.Data",{LocalDataSetDataSource:Shell.Class.derive(t,n,r)})}),define("extensioncore/exp.data.remotedatasource",["jquery","extensioncore/exp.data.datasource"],function(e){function t(t){var n=t.data,r=t.partialErrors,i,s,o;return e.isArray(n)?i=n:(i=n.items,s=n.filteredTotalCount,o=n.totalCount),{items:i,filteredTotalCount:s,totalCount:o,partialErrors:r}}var n={shapeRefreshResult:t},r=Exp.Data.DataSource,i=function(e){this._initiatedInitialFetch=!1,r.prototype.constructor.apply(this,arguments)},s={_refresh:function(t){var n=this.isQueryable?this._getNormalizedQuery():null,r=e.Deferred(),i=e.extend({forceServerFetch:!this._initiatedInitialFetch},t);return this._loadData(n,i).then(e.proxy(r.resolve,r),e.proxy(r.reject,r)),this._initiatedInitialFetch=!0,r},_getNormalizedQuery:function(){var t={},n,r;return typeof this._paging.skip=="number"&&(t.skip=this._paging.skip),typeof this._paging.take=="number"&&(t.take=this._paging.take),e.isArray(this._sort)&&(t.sortProperty=this._sort[0].property,t.sortDirection=this._sort[0].descending?"descending":"ascending"),e.isArray(this._filter)&&(n=this._filter&&this._filter.length&&this._filter[0],n&&n.value&&n.value.length&&(r=n.value[0],t.filter=r.value)),t},_loadData:function(t,n){var r=e.Deferred(),i=this,s=this._getDataSetName(),o={dataSetName:s,url:this._options.url,ajaxData:e.extend({},this._options.ajaxData,t),preserveNewRowsOrdering:!0};return n&&n.forceServerFetch&&Exp.Data.expireData(s),Exp.Data.getData(s,o).always(function(){i._bindFetchStart()}).then(e.proxy(this._processFetchSuccess,this,r),e.proxy(this._processFetchFailure,this,r)),r},_shapeRefreshResult:function(e){var t=this._options.shapeRefreshResult||n.shapeRefreshResult;return t(e)}};Shell.Namespace.define("Exp.Data",{RemoteDataSource:Shell.Class.derive(r,i,s)})}),define("extensioncore/exp.drawer",["jquery","generated/editor/TS/ViewModel/DrawerMenu/NewDrawerMenu","generated/DataLabClient/Features","generated/DataLabClient/LocalizedResources","extensioncore/exp.resources"],function(e,t,n,r){function c(){u=new Shell.UI.Drawer.Menu.ContainerMenuItem("","","Dataset",r.dataset,window.fx.resources.getContentUrl("/Content/Images/drawer-icons.1.png"),i.datasetCategoryDescription.format(i.productName)),Shell.UI.Drawer.Menu.add(u),n.newCustomModuleUploadEnabled()&&(a=new Shell.UI.Drawer.Menu.ContainerMenuItem("","","Module",r.module,window.fx.resources.getContentUrl("/Content/Images/drawer-icons.1.png"),i.moduleCategoryDescription.format(i.productName)),Shell.UI.Drawer.Menu.add(a))}function h(){c();var t={},n=e.map(Shell.extensionIndex,function(e){return{order:e.displayOrderHint||0,name:e.displayName,extension:e}}).sort(function(e,t){var n=e.order-t.order;return n===0&&(n=Shell.Utilities.stringCompare(e.name,t.name)),n});Shell.UI.Drawer.Menu.getChildren().done(function(r){e.each(r,function(){t[this]=this}),e.each(n,function(){var n=this.extension.name,r=this.order,i=this.extension.menuItems,s,o,u,a;i&&(f[n]=f[n]||f[n]===undefined?!0:!1,e.each(i,function(){s=!1;if(this.categories){o=this.categories.split(",");for(a=0;a<o.length;a++)u=o[a],t[u]?(p(t[u],[this],n,!0,r),s=!0):Shell.Diagnostics.Log.warning("fxshell.drawer.MissingCategory","Could not find category '"+u+"' for menu item '"+this.name)}s||p("",[this],n,!0,r)}))})})}function p(t,n,r,i,s){var u,a;e.each(n,function(){this.template?(a=this.extension?this.extension:r,u=new Shell.UI.Drawer.Menu.QuickAddMenuItem(r,t,this.name,this.displayName,window.fx.resources.getContentUrl("/Content/Images/drawer-icons.1.png"),this.description,this.template,this.label,this.data,this.opening,this.open,this.ok,this.close)):this.execute?u=new Shell.UI.Drawer.Menu.ActionMenuItem(r,t,this.name,this.displayName,window.fx.resources.getContentUrl("Content/Images/drawer-icons.1.png"),this.description,this.execute):u=new Shell.UI.Drawer.Menu.ContainerMenuItem(r,t,this.name,this.displayName,window.fx.resources.getContentUrl("Content/Images/drawer-icons.1.png"),this.description),u.setDisplayOrder(s),this.isPreviewFeature&&u.setIsPreviewFeature(!0),Shell.UI.Drawer.Menu.add(u),this.subMenu&&p(u.path,this.subMenu,r,!1,0),i&&o.push(u),this.isEnabled&&(u.isEnabled=this.isEnabled)})}function d(e){Shell.UI.Drawer.Menu.add(e),o.push(e)}function v(e){Impl.UI.Drawer.initialize(e),m()}function m(){Shell.UI.Drawer.addDrawerOpenedCallback(w)}function g(t){e.each(o,function(){t===this._extension&&b(this)})}function y(t){e.each(t,function(){b(this)})}function b(e){var t;e.isEnabled&&(t=e.isEnabled(),t&&((t.enabled===!0||t.enabled===!1)&&e.setDisabled(!t.enabled),t.description&&e.setDescription(t.description))),e.menuItems&&y(e.menuItems())}function w(){var e;y(o),s?(Shell.UI.Drawer.Menu.selectPath(s),s=null):(e=x(S()),e&&Shell.UI.Drawer.Menu.selectPath(e)),t.NewDrawerMenuRecalculateSize()}function E(e,t){return typeof e=="string"&&e===t?!0:e&&e.name&&e.name===t?!0:!1}function S(){return window.cdm&&window.cdm.currentExtension&&window.cdm.currentExtension.name}function x(e){var t,n;if(e&&f[e])for(n=0;n<o.length;n++){t=o[n];if(t._extension&&E(t._extension,e))return t.path&&t.path.split("/")[0]}return l}function T(){Shell.UI.Drawer.close()}function N(e){s=e,Shell.UI.Drawer.open()}function C(e){l=e}var i=window.ExtensionCore.Resources,s,o=[],u=null,a=null,f={All:!0,AdminTasks:!0,StoreExtension:!0,ServiceBusExtension:!1},l=null;Shell.Namespace.define("Exp.Drawer",{initialize:v,addExtensionMenuItems:h,close:T,openMenu:N,refreshExtensionMenuItemStatus:g,addMenuItem:d,setDefaultMenuPath:C,getMenuPathBasedOnExtension:x})}),define("extensioncore/exp.navigation",["jquery","uxfximpl","extensioncore/exp.resources"],function(e){function r(t,n){var r=t.destination.hash.replace(/\/$/,""),i=t.destination.view,s=t.destination.viewName;i==="tab"&&!s&&(e.isFunction(n)&&(n=n(t)),typeof n=="string"&&t.redirect(r+"/"+n))}function i(t){return e.map(t.tabs,function(e){return new Shell.UI.Pivot(e.id,e.displayName,e.template,e.activated,e.icon,e.visible,t.name)})}function s(e,t){var n;t?n=o(t):e.tabs?n=e.tabs:e.navigation&&(n=o(e.navigation)),Shell.UI.Pivots.set(e.id,n||[])}function o(t){var n=[],r;if(t){t.tabs&&(n=e.map(t.tabs,function(e){return new Shell.UI.Pivot(e.id,e.displayName,e.template,e.activated,e.icon,e.visible)}));if(t.types)for(r=0;r<t.types.length;r++)t.types[r].tabs&&e.merge(n,i(t.types[r]))}return n}var t=window.fx,n=new Shell.UI.PivotImageDescriptor(t.resources.getContentUrl("Content/Images/QuickStart_Cloud.png"),t.resources.getContentUrl("Content/Images/QuickStart_Cloud_HOVER.png"),window.ExtensionCore.Resources.quickStart);Shell.Namespace.define("Exp.Navigation",{redirectDefaultPath:r,quickStartImageDescriptor:n,convertNavigationTabsToPivots:o,initializePivots:s})}),define("extensioncore/exp.utilities",["jquery"],function(e){var t={areEqual:function(e,t,n){var r,i,s,o;typeof n=="undefined"&&(n=!0);if(e===null)return t===null;if(t===null)return!1;for(o in e)if(e.hasOwnProperty(o)){r=e[o],s=typeof r;if(typeof t[o]!==s)return!1;i=t[o];switch(s){case"object":if(n&&!window.Exp.Utilities.areEqual(r,i))return!1;break;case"function":break;default:if(r!==i)return!1}}for(o in t)if(t.hasOwnProperty(o)&&typeof e[o]=="undefined"&&typeof t[o]!="undefined")return!1;return!0},diffArray:function(e,t,n,r,i,s,o){o=o||{};var u=e.length,a=t.length,f=0,l=0,c,h,p;while(f<u||l<a)f>=u?(r&&r(t[l]),l++):l>=a?(i&&i(e[f]),f++):(c=e[f],h=t[l],p=n(c,h,o),p>0?(r&&r(h),l++):p<0?(i&&i(c),f++):(s&&!window.Exp.Utilities.areEqual(c,h,o.recursive)&&s(c,h),f++,l++))},visitor:function(t,n,r){var i=typeof t,s=!1,o,u,a;if(i==="undefined"||t===null)return;s=!1,r=r||0,r++;if(e.isArray(t))for(o=0,u=t.length;o<u;o++){s=n(t[o]),s||window.Exp.Utilities.visitor(t[o],n,r);if(s)break}else if(i==="object"){r===1&&(s=n(t));if(!s)for(a in t)if(t.hasOwnProperty(a)){if(a.match(/^jQuery\d+$/))break;s=window.Exp.Utilities.visitor(t[a],n,r);if(s)break}}return s},getChildProperty:function(e,t){if(!t)return e;var n=e,r=t.split("."),i;for(;;){i=r.shift();if(!i)break;n=n[i]}return n},assert:function(e,t){if(!e)throw t},requires:function(e,t){if(e!==undefined&&e!==null)return e;throw t},optional:function(e,t){return e!==undefined&&e!==null?e:t},isNullOrUndefined:function(e){return e===null||e===undefined},deleteIfNull:function(e,t){e&&e[t]===null&&delete e[t]},deleteIfNullOrEmpty:function(n,r){t.deleteIfNull(n,r),n&&e.isArray(n[r])&&!n[r].length&&delete n[r]},find:function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.call(e[n],e[n]))return e[n];return null},hasDifferences:function(e,t){try{return JSON.stringify(e)!==JSON.stringify(t)}catch(n){return!0}},getXhrError:function(e){try{return JSON.parse(e.responseText).message}catch(t){return null}},waitForDeferreds:function(t){var n=e.Deferred(),r=0;return e.isArray(t)||(t=[]),t.length||n.resolve(),e.each(t,function(e,i){i.always(function(){r+=1,r>=t.length&&n.resolve()})}),n.promise()},download:function(t){var n,r,i,s,o=e.Deferred();return r=function(){var t;try{t=JSON.parse(e(this).contents().find("body").text())}catch(n){t=null,window.Shell.Diagnostics.Log.error("Exp.Utilities.download","Response could not be parsed from iFrame content: {0}".format(n))}t&&t.ErrorMessage&&(o.reject(t),s())},i=function(){s()},s=function(){n.off("load",r).off("remove",i)},window.Shell.Utilities.download(t),n=e("iframe[src='"+t+"']"),n[0]&&n.on("load",r).on("remove",i),o.promise()},failProgressOperation:function(e,t,n){var r=Shell.UI.InteractionSeverity.error,i=Shell.UI.InteractionBehavior.ok,s=n?{detailData:n}:null;e.complete(t,r,i,s)},failProgressOperationStep:function(e,t,n){var r=Shell.UI.InteractionSeverity.error,i=Shell.UI.InteractionBehavior.ok,s=n?{detailData:n}:null;e.completePreviousStep(t,r,i,s)},completeProgressOperation:function(e,t,n){var r=Shell.UI.InteractionSeverity.information,i=Shell.UI.InteractionBehavior.ok,s=n?{detailData:n}:null;e.complete(t,r,i,s)},completeProgressOperationWithWarning:function(e,t,n){var r=Shell.UI.InteractionSeverity.warning,i=Shell.UI.InteractionBehavior.ok,s=n?{detailData:n}:null;e.complete(t,r,i,s)},completeProgressOperationStep:function(e,t,n){var r=Shell.UI.InteractionSeverity.information,i=Shell.UI.InteractionBehavior.ok,s=n?{detailData:n}:null;e.completePreviousStep(t,r,i,s)},NotificationOperation:function(e){var n=e.initialText,r=e.failureText,i=e.successText,s=new Shell.UI.ProgressOperation(n);this.progressOperation=s,this.create=function(){Shell.UI.ProgressOperations.add(s)},this.complete=function(e){t.completeProgressOperation(s,i,e)},this.fail=function(e){t.failProgressOperation(s,r,e)}},NotificationStep:function(e){var n=e.initialText,r=e.failureText,i=e.successText,s=e.operationFailureText,o=e.operationSuccessText,u=e.progressOperation;this.progressOperation=u,this.create=function(){u.hasBeenAdded()||Shell.UI.ProgressOperations.add(u),u.addStep(n)},this.complete=function(e){t.completeProgressOperationStep(u,i,e)},this.fail=function(e){t.failProgressOperationStep(u,r,e)},this.completeParentOperation=function(){t.completeProgressOperation(u,o)},this.failParentOperation=function(){t.failProgressOperation(u,s)}}};e.extend(!0,window,{Exp:{Utilities:t}})}),define("extensioncore/exp.rdfe",["jquery","uxfximpl","extensioncore/exp.utilities","extensioncore/exp.resources"],function(e){function y(){window.Exp.Scheduler.scheduleTask({name:"poll-rdfe",delayInMs:45e3,scheduledTask:b,silent:!0,args:[function(e,t,n,r){C(e,r),k()},y]})}function b(e,t){Shell.Diagnostics.Telemetry.timerStart("cdmRdfe.refreshTask");var n=new Date;Shell.Net.ajaxPost({url:l,data:{subscriptionFilterOverride:g.getSubscriptionIds().join(",")}}).done(function(t,r,i){Shell.Diagnostics.Telemetry.timerStopAndLog("cdmRdfe.refreshTask","Success - ListSubscriptions:"),e&&e(t,r,i,n)}).fail(function(){Shell.Diagnostics.Telemetry.timerStopAndLog("cdmRdfe.refreshTask","Failed - ListSubscriptions:"),t()})}function w(e,t){return e?t?e.SubscriptionID<t.SubscriptionID?-1:e.SubscriptionID>t.SubscriptionID?1:0:1:t===e?0:-1}function E(e,t){return e?t?e.OperationId<t.OperationId?-1:e.OperationId>t.OperationId?1:0:1:t===e?0:-1}function S(e){var t=typeof e,n,r,i;if(t==="string")return x(e);if(t!=="object")return null;for(n in e)if(e.hasOwnProperty(n)){r=n.toLowerCase();if(r==="trackingid"||r==="operationid"||r==="id"||r==="operationtrackingid"){i=e[n];if(typeof i=="string")return x(i)}}return null}function x(e){return e?e.replace(/-/g,"").toLowerCase():e}function T(t,n){for(var i=0,s=n.length;i<s;i++)try{e(r).trigger(t,n[i])}catch(o){Shell.Diagnostics.Log.writeEntry("Exp.Rdfe.ErrorTriggerEvent","Error triggering "+t+" event. Check handlers. The error message was: "+(o.message||o.Message||o),Shell.Diagnostics.LogEntryLevel.error)}}function N(){return window.Exp.UserSettings.updateGlobalUserSetting(window.Exp.Constants.userSettingKeys.subscriptionFilter,null)}function C(e,t){var r=e.data,o=[],u=[],a=r.subscriptions.slice(0),l,g,y;window.Exp.Data.merge(n,r.affinityGroups,t,{perfName:"Subscriptions"}),window.Exp.Data.merge(s,r.locations,t,{perfName:"Locations"}),i=r.environmentSettings,d.sort(w),a.sort(w),window.Exp.Utilities.diffArray(d,a,w,function(e){o.push({changeType:"add",subscription:e})},function(e){o.push({changeType:"remove",subscription:e})},function(e,t){o.push({changeType:"change",oldSubscription:e,newSubscription:t})}),d=r.subscriptions;if(h===null){c=!r.userSettings.subscriptionFilter,h=c?[]:r.userSettings.subscriptionFilter.split(","),p={};if(!c)for(g=0,y=h.length;g<y;g++)p[h[g]]=!0}m={},v=[];for(g=0,y=d.length;g<y;g++)l=d[g].SubscriptionID,m[l]=d[g],(c||p[l])&&v.push(d[g]);if(!c&&v.length===d.length)c=!0,N();else{for(g=0,y=h.length;g<y;g++)l=h[g],m[l]&&u.push(l);h.length>u.length&&(h=u,window.Exp.UserSettings.updateGlobalUserSetting(window.Exp.Constants.userSettingKeys.subscriptionFilter,h.join(","))),!c&&v.length===0&&(Shell.UI.Notifications.add(f.subscriptionFilterReset,Shell.UI.InteractionSeverity.warning,Shell.UI.InteractionBehavior.ok,null),v=d.slice(0),c=!0,N())}T("subscriptionChange",o)}function k(){function i(e){return function(n){for(var r=0,i=n.length;r<i;r++)n[r].subscriptionId=e,n[r].trackingId=x(n[r].OperationId),t.push(n[r])}}if(Shell.Environment.getIsOnPremMode())return;var e=[],t=[],n,r;for(r=d.length-1;r>=0;r--){if(d[r].SubscriptionStatus==="0")continue;n=d[r].SubscriptionID,e.push(Shell.Net.getJSON(l+"/OperationTracking?subscriptionId="+n,i(n)))}window.Exp.Utilities.waitForDeferreds(e).done(function(){L(t)})}function L(e){var t=[],n;e.sort(E),window.Exp.Utilities.diffArray(o,e,E,function(e){t.push({changeType:"add",operation:e}),n=e.OperationStatus.Status,(n==="Succeeded"||n==="Failed")&&t.push({changeType:"statusChange",oldStatus:n,newStatus:n,oldOperation:e,newOperation:e})},function(e){t.push({changeType:"remove",operation:e})},function(e,n){t.push({changeType:"change",oldOperation:e,newOperation:n}),e.OperationStatus.Status!==n.OperationStatus.Status&&t.push({changeType:"statusChange",oldStatus:e.OperationStatus.Status,newStatus:n.OperationStatus.Status,oldOperation:e,newOperation:n})}),o=e,T("operationChange",t),y()}function A(e){try{return e.OperationStatus.Error.Message}catch(t){return null}}function O(e,t,n){if(!e)return null;if(typeof t=="undefined")return null;var r=e[t];return typeof r=="function"?r(n):r}function M(e){return e&&e.progressOperation}function _(e,t){if(!e)return null;var n=O(e,"initialText",t),r;return n&&(r=M(e)?e.progressOperation:new Shell.UI.ProgressOperation(n,null,!1),r.hasBeenAdded()?r.addStep(n):Shell.UI.ProgressOperations.add(r)),r}function D(e,t,n){a(e,"Missing required parameter: progressOperation");var r=O(t,"successText",n)||f.defaultOperationSuccessText,i=Shell.UI.InteractionSeverity.information,s=Shell.UI.InteractionBehavior.ok;M(t)?e.completePreviousStep(r,i,s):e.complete(r,i,s)}function P(e,t,n){a(e,"Missing required parameter: progressOperation");var r=O(t,"failureText",n)||"Operation failed.",i=O(t,"failureDetailText",n)||A(n.operation)||n.errorMessage,s=Shell.UI.InteractionSeverity.error,o=Shell.UI.InteractionBehavior.ok,u;n.trackingId&&(i+=" "+f.appendTrackingId.format(n.trackingId)),u={detailData:i},M(t)?e.completePreviousStep(r,s,o,u):e.complete(r,s,o,u)}function H(e,t,n,r,i){var s={trackingId:e,lockItem:t,statusChange:i,notificationOptions:r,shellProgressOperation:n};u.push(s)}function B(e,t){if(t.changeType!=="statusChange")return;var n=t.newOperation.trackingId,r=window.Exp.Data.getRowIndex(u,"trackingId",n),i,s,o,a,f,l,c,h;if(r===null)return;h=u[r],h&&(s=h.lockItem,l=t.newOperation,a=l.OperationStatus.Status,s&&window.Exp.Data.unlockItem(s),(a==="Succeeded"||a==="Failed")&&u.splice(r,1),a==="Failed"&&(o={clickUrl:l.OperationObjectId,eventName:l.OperationName,componentName:h.lockItem&&(h.lockItem.DisplayName||h.lockItem.displayName),objectType:h.lockItem&&(h.lockItem.Type||h.lockItem.type),objectId:h.lockItem&&h.lockItem.id},Shell.Diagnostics.Log.error("Exp.Rdfe.longRunningOperation.finalError",l.OperationName+" action failed with "+l.OperationStatus.Error.Message,o)),h.shellProgressOperation&&(c=h.shellProgressOperation,f=h.notificationOptions,i={trackingId:n,lockItem:s,operation:l},a==="Failed"?P(c,f,i):D(c,f,i)),h.statusChange&&h.statusChange(n,t.oldStatus,a,s,l,h.shellProgressOperation))}var t=!1,n=[],r={},i={},s=[],o=[],u=[],a=window.Exp.Utilities.requires,f=window.ExtensionCore.Resources,l=Shell.Environment.getApplicationRoot()+"/Service",c=!1,h=null,p={},d=[],v=[],m={},g;e.extend(!0,window,{Exp:{internal:{rdfe:{initialize:function(e,n){if(Shell.Environment.getIsOnPremMode()&&Shell.Environment.getIsAdminMode()){t=!0,n();return}t?n&&n():(window.Exp.Rdfe.addOperationChangeHandler("aux",B),t=!0,e?(C(e,new Date),n(),k()):b(function(e,t,r,i){C(e,i),n&&n(),k()},n))},setServiceBase:function(e){l=e}}}}}),g={getSubscription:function(e){return m[e]||null},getSubscriptionList:function(){return v},getUnfilteredSubscriptionList:function(){return d},getSubscriptionIds:function(){return e.map(v,function(e){return e.SubscriptionID})},getUnfilteredSubscriptionIds:function(){return e.map(d,function(e){return e.SubscriptionID})},isFilteredSubscription:function(e){return c?!0:!!p[e]},isResourceRegisteredForSubscription:function(t,n){var r=g.getSubscription(t),i=!1;return!r||!r.Services?!1:(e.each(r.Services,function(e,t){if(t.Type&&t.Type.toLowerCase()===n.toLowerCase())return i=t.State&&t.State.toLowerCase()==="registered"?!0:!1,!1}),i)},getAffinityGroupsList:function(){return n},getLocationsList:function(){return s},getEnvironmentSettings:function(){return i},augmentSubscriptionInfo:function(t){if(!t.__infoAugmented)return Shell.Net.getJSON(l+"/GetSubscriptionInfo",{subscriptionId:t.id}).done(function(n){n&&n.data&&(e.extend(t,n.data),t.__infoAugmented=1)});var n=e.Deferred();return n.resolve(),n.promise()},isSubscriptionEnabled:function(e){var t=typeof e=="string"?window.Exp.Data.getRow(d,"SubscriptionID",e):e;return t?t.SubscriptionStatus===window.Exp.Constants.subscriptionState.active||t.SubscriptionStatus===window.Exp.Constants.subscriptionState.warned:!1},filterToSubscriptionsRegisteredToService:function(t,n){var r=e.grep(t,function(e,t){var r,i,s=e.RegisteredServices.split(",");for(r=0,i=s.length;r<i;r++)if(s[r]===n)return!0;return!1});return r},filterToEnabledSubscriptions:function(t){var n=e.grep(t,function(e,t){var n=e.subscriptionId||e.SubscriptionId||e.SubscriptionID;return n?window.Exp.Rdfe.isSubscriptionEnabled(n):!1});return n},addSubscriptionChangeHandler:function(t,n,i){e(r).bind("subscriptionChange"+(t?"."+t:""),i,n)},longRunningOperationPost:function(e){return window.Exp.Rdfe.longRunningOperation(e,!0)},longRunningOperation:function(t,n){var r=t.lockItem,i=e.extend({},t),s=_(t.notificationOptions,{lockItem:r}),o={trackingId:null,lockItem:r,operation:null};return i.success=function(e,n,i){var u=S(e),a;u===null?(e&&e.ErrorMessage?(a=Shell.Diagnostics.LogEntryLevel.error,s&&(o.errorMessage=e.ErrorMessage,P(s,t.notificationOptions,o))):(a=Shell.Diagnostics.LogEntryLevel.warning,s&&D(s,t.notificationOptions,o)),Shell.Diagnostics.Log.writeEntry("Exp.Rdfe.NoTrackingId","No tracking ID found in response from "+t.url,a)):H(u,r,s,t.notificationOptions,t.statusChange),t.success&&t.success(e,n,i)},i.error=function(e,n,i){window.Exp.Data.unlockItem(r);var u=window.Exp.Utilities.getXhrError(e)||e.statusText,a={clickUrl:t.url,eventName:t.url,componentName:t.lockItem&&(t.lockItem.DisplayName||t.lockItem.displayName),objectType:t.lockItem&&(t.lockItem.Type||t.lockItem.type),objectId:t.lockItem&&t.lockItem.id};window.Shell.Diagnostics.Log.error("Exp.Rdfe.longRunningOperation.error",t.url+" action failed with "+u,a),s&&(o.errorMessage=u,P(s,t.notificationOptions,o)),t.error&&t.error(e,n,i)},window.Exp.Data.lockItem(r),n?Shell.Net.ajaxPost(i):Shell.Net.ajax(i)},addAndFailProgressOperation:function(e,t){var n=_(e,t);P(n,e,t)},registerTrackingOperation:function(e,t,n){e=S(e);var r={trackingId:e,lockItem:null,operation:null},i=_(n,r);H(e,null,i,n,t)},addOperationChangeHandler:function(t,n,i){e(r).bind("operationChange"+(t?"."+t:""),i,n)},getFeatureInAccount:function(t){function u(e,t){return e.Name.toLowerCase()===i}var n,r,i=t?t.toLowerCase():null,s,o=g.getSubscriptionList();for(s=0;s<o.length;s++){n=e.grep(o[s].Features,u);if(n.length>0){if(n[0].Status.toLowerCase()==="active")return n[0];if(!r||n[0].Status.toLowerCase()==="pending")r=n[0]}}return r},isFeatureActiveOnSubscription:function(t,n){var r,i=e.grep(d,function(e,n){return e.id===t}),s=n?n.toLowerCase():null;return i.length>0&&(r=e.grep(i[0].Features,function(e,t){return e.Name.toLowerCase()===s})[0]),r?r.Status.toLowerCase()==="active":!0},getOperationTrackingId:function(e){return e?e.OperationTrackingId||e.OperationTrackingID||null:null}},window.Shell.Environment.getIsOnPremMode()&&(g.getSubscriptionIdsRegisteredToService=function(t){var n=g.getSubscriptionList();return n?{subscriptionIds:e.map(g.filterToSubscriptionsRegisteredToService(n,t),function(e){return e.id})}:[]},g.getSubscriptionsRegisteredToService=function(e){var t=g.getSubscriptionList();return t?g.filterToSubscriptionsRegisteredToService(t,e):[]},g.hasSubsciptionsToService=function(e){return g.getSubscriptionsRegisteredToService(e).length>0},g.forceRefreshOnPremSubscriptions=function(){var e=new Date;return Shell.Diagnostics.Telemetry.timerStart("cdmRdfe.forceRefreshTask"),Shell.Net.getJSON(l).done(function(t,n,r){Shell.Diagnostics.Telemetry.timerStopAndLog("cdmRdfe.forceRefreshTask","Success - ListSubscriptions:"),C(t,n,r,e)}).fail(function(){Shell.Diagnostics.Telemetry.timerStopAndLog("cdmRdfe.forceRefreshTask","Failed - ListSubscriptions:")})}),e.extend(!0,window,{Exp:{Rdfe:g}})}),define("extensioncore/exp.scheduler",["jquery"],function(e){function i(){n=null;var e=t.shift();if(!e)return;e.silent||Shell.Diagnostics.Log.writeEntry("Exp.Scheduler.ExecutingScheduledTask","Executing sheduled task '"+e.name+"' that was scheduled for "+(new Date(e.scheduledExecutionTime)).toLocaleTimeString(),Shell.Diagnostics.LogEntryLevel.verbose);try{e.scheduledTask.apply(e,e.args||[])}catch(r){Shell.Diagnostics.Log.writeEntry("Exp.Scheduler.ErrorExecutingTask","Error executing task '"+e.name+"': "+r.message,Shell.Diagnostics.LogEntryLevel.error)}finally{e.recurring&&window.Exp.Scheduler.scheduleTask(e),!n&&t.length>0&&(n=window.setTimeout(i,Math.max(0,t[0].scheduledExecutionTime-(new Date).getTime())))}}var t=[],n,r;r={scheduleTask:function(e){var r,s,o,u;if(e.recurring){if(e.absoluteTime)throw"Tasks scheduled for an absolute time cannot be recurring";if(e.isAsync)throw"Asynchronous tasks cannot be marked as auto recurring. Instead call sheduleTask again at the end on completition of the aynchronous event"}e.name||(e.name="Anonymous "+Shell.Utilities.newGuid()),s=(new Date).getTime();if(e.absoluteTime)e.scheduledExecutionTime=e.absoluteTime.valueOf();else{if(isNaN(e.delayInMs)||e.delayInMs<=0)throw"Tasks that are not scheduled for an absolute time require a positive integer value in task.delayInMs";e.scheduledExecutionTime=s+e.delayInMs}r=-1;for(o=0,u=t.length;o<u;o++)if(t[o].scheduledExecutionTime>e.scheduledExecutionTime){t.splice(o,0,e),r=o;break}r===-1&&t.push(e),e.silent||Shell.Diagnostics.Log.writeEntry("Exp.Scheduler.ScheduledTaskToExecute","Scheduled task '"+e.name+"' to execute at "+(new Date(e.scheduledExecutionTime)).toLocaleTimeString(),Shell.Diagnostics.LogEntryLevel.verbose);if(t.length===1||r===0)n&&window.clearTimeout(n),n=window.setTimeout(i,Math.max(0,e.scheduledExecutionTime-s))},deleteTask:function(r){var i=e.inArray(r,t);i>=0&&(t.splice(i,1),t.length===0&&n&&(window.clearTimeout(n),n=null))}},e.extend(!0,window,{Exp:{Scheduler:r}})}),define("extensioncore/exp.typeregistry",["jquery"],function(e){function n(e,n){t[e]=n}function r(e,n){var r=t[e],i,s=null;if(r)for(i=0;i<r.length;i++)if(r[i].name===n){s=r[i];break}return s}function i(e,t){var n=r(e,t),i=null;return n&&(i=n.navigationDependencies),i}function s(e,t){var n=r(e,t),i=null;return n&&(i=n.dataFunction),i}function o(e,t){var n=r(e,t);return n&&typeof n.canNavigate=="function"?n.canNavigate:null}var t={};e.extend(!0,window,{Exp:{TypeRegistry:{add:n,getDataFunction:s,getDependencies:i,getCanNavigate:o}}})}),define("extensioncore/exp.ui.commands.obsolete",["jquery","uxfximpl"],function(e){function m(e,t){var n=E(e,t);n>-1&&e.splice(n,1)}function g(e,t,n){e.splice(n,0,t)}function y(e,t){e.splice(t,1)}function b(e){e.splice(0,e.length)}function w(t,n){b(t),e.each(n,function(){t.push(this)})}function E(t,n){return e.inArray(n,t)}var t={},n=[],r=function(t,n,r){if(!t||!n)return;var i=Shell&&Shell.extensionIndex&&Shell.extensionIndex[t]||null,s,o=window.cdm.currentActiveItem,u=window.cdm.currentContext,a,f=Shell.exists("Diagnostics.Telemetry.traceEvent",e.noop);if(!i)return;o&&(a=o.type);if(i.executeCommand)i.executeCommand(n,r,o,u),f("commandBar",t,n,a);else if(i.commands){e.each(i.commands,function(){if(this.name===n)return s=this,!1});if(!s)return;if(s.execute)try{Shell.Internal.callPartnerScript(i,s.execute,s,o,u),f("commandBar",t,n,a)}catch(l){throw Shell.Diagnostics.Log.writeEntry("Shell.UI.commandBar.CallbackError","Additional context: Method was bound to command button '"+s.name+"' on extension '"+i.name+"'",Shell.Diagnostics.LogEntryLevel.error),l}}},i=function(t,r,i){return function(){e.each(n,function(e,n){n(t,r,i)})}},s=function(){var e,t;return window.cdm&&(e=window.cdm.currentActiveItem,e&&e["aux-extension-name"]?t=e["aux-extension-name"]:window.cdm&&window.cdm.currentExtension&&(t=window.cdm.currentExtension.name)),t||"All"},o=function(){var e=s();return t[e]===undefined&&(t[e]={contextualCommands:[],globalCommands:[]}),t[e]},u=function(e){return function(t){o()[e+"Commands"].push(t)}},a=function(e){return function(t){m(o()[e+"Commands"],t)}},f=function(e){return function(t,n){g(o()[e+"Commands"],t,n)}},l=function(e){return function(t){y(o()[e+"Commands"],t)}},c=function(e){return function(){b(o()[e+"Commands"])}},h=function(e){return function(t){w(o()[e+"Commands"],t)}},p=function(e){return function(t){return E(o()[e+"Commands"],t)}},d=function(e,t){e==="click"&&n.push(t)},v=function(){};Shell.Namespace.define("Exp.UI",{SubCommand:Shell.Class.define(function(e,t){this.id=e,this.label=t},{id:null,label:null}),CommandHelp:function(){},Command:Shell.Class.define(function(e,t,n,r,i,s){this.id=e,this.label=t,n===null?this.icon=Exp.UI.CommandIconDescriptor.getWellKnown(e.toLowerCase()):this.icon=n,this.click=s,this.isEnabled=r===null||r===undefined?!0:r,this.subCommands=i}),CommandIconDescriptor:{getWellKnown:function(e){switch(e){case"create":e="add";break;case"back":e="previous";break;case"scmDismiss":case"cancel":e="close";break;case"deploy":e="forward";break;case"exportnetworkconfig":case"cscfg":case"csdef":e="download";break;case"information":case"viewinfo":e="info";break;case"attachdisk":e="link";break;case"shutdown":case"reboot":e="power";break;case"scmRetry":e="redo";break;case"browse":case"scmRedeploy":e="reimage";break;case"remotedesktop":case"remoteaccess":e="connect";break;case"refresh":case"restart":case"reset":e="undo";break;case"sendtextmessage":e="message";break;case"start":e="play";break;case"submit":e="confirm";break;case"swapvip":e="swap";break;case"detachdisk":e="unlink";break;case"webworker":e="downloadpackage";break;case"captureimage":case"capturevm":e="capture";break;case"scmWebMatrix":e="webmatrix";break;case"scmVS":e="visualstudio";break;case"managedomains":e="domains";break;case"manage":e="manageexternal"}return{sprite:e}}},Commands:{Global:{add:u("global"),remove:a("global"),insertAt:f("global"),removeAt:l("global"),clear:c("global"),set:h("global"),indexOf:p("global")},Contextual:{add:u("contextual"),remove:a("contextual"),insertAt:f("contextual"),removeAt:l("contextual"),clear:c("contextual"),set:h("contextual"),indexOf:p("contextual")},update:function(){Shell.UI.Commands.clear();var e=o(),t=s(),n=[],r=function(e,n){var r=[];return n.forEach(function(n){var s=new Shell.UI.Commands.Command(n.label,n.icon,!n.click&&n.subCommands&&n.subCommands.length?null:i(t,n.id),e,!n.isEnabled);n.click&&s.setClick(n.click),(n.subCommands||[]).forEach(function(e){s.addSubCommand(e.label,i(t,n.id,e.id))}),r.push(s)}),r};n=n.concat(r("global",e.globalCommands)),n=n.concat(r("contextual",e.contextualCommands)),Shell.UI.Commands.add(n)},addEventListener:d,removeEventListener:v}}),d("click",r)}),define("extensioncore/exp.ui",["jquery","extensioncore/exp.utilities"],function(e){var t=window.Exp.Utilities.optional,n={linkAndApplyBindings:function(t,n,r){t.link(r,n),e.observable.applyBindings(n,r),e(r).on("remove",function(){e(n).trigger("destroy")})},selectText:function(t){var n=window.document,r=e(t)[0],i,s;if(!r)return;try{window.document.body.createTextRange?(s=n.body.createTextRange(r),s.moveToElementText(r),s.select()):window.getSelection&&(s=n.createRange(),s.selectNodeContents(r),i=window.getSelection(),i.removeAllRanges(),i.addRange(s))}catch(o){window.Shell.Diagnostics.Log.error("Exp.UI.highlightText","Unexpected rendering exception: {0}".format(o))}},showStatusBar:function(n,r,i,s){r=t(r,""),i=t(i,""),s=t(s,"Info");var o=e(n),u=!!o.data("wazStatusBar"),a=u?o.wazStatusBar("option","currentStatusDisplay"):null,f=u?o.wazStatusBar("option","currentStatusDisplayMessage"):null;if(a!==r||f!==i)u&&o.wazStatusBar("destroy"),o.wazStatusBar({statuses:[{name:"static",displayName:r,display:s}],currentStatus:"static",currentStatusDisplayMessage:i});return o},hideStatusBar:function(t){e(t).wazStatusBar("destroy")},validate:function(t){var n=!0,r=!1,i=window.Shell.UI.Validation.parse(t);return i.each(function(){var t=e(this).fxEditableControl("triggerMethod","validate")||"";e.inArray(t,["valid",""])<0&&(n=!1,t==="invalid"&&(r=!0))}),r&&i.filter(".fx-validation-invalid").first().focus(),n},gridRenderCopyButton:function(t,n){var r=e("<div />").fxsCopyButton({labelElement:e("<div />").html(t.html()),getClipboardText:function(){return e("<div />").html(n).text()}});t.empty().append(r)}};e.extend(!0,window,{Exp:{UI:n}})}),define("extensioncore/exp.utilities.beta",["jquery","uxfximpl"],function(e){function t(){(!e.views.helpers||!e.views.helpers.getBetaSignUpUrl)&&e.views.helpers({getBetaSignUpUrl:window.Shell.Environment.getBetaSignUpUrl})}Shell.Namespace.define("Exp.Utilities.Beta",{isBetaEnabled:function(e,n,r,i,s){t();var o=Shell.Environment.getBetaFeatures()[e],u=Exp.Rdfe.getFeatureInAccount(o),a,f=Shell.extensionIndex[e],l,c;return u?(a=u.Status.toLowerCase(),a==="active"?(l=f&&f.dataIsLoaded,c=l?n:r):a==="pending"?(l=!1,c=s):a==="available"&&(l=!1,c=i)):(l=f&&f.dataIsLoaded,c=l?n:r),{enabled:l,description:c}}})}),define("extensioncore/Exp.Main",["extensioncore/exp.data.localdatasetdatasource","extensioncore/exp.data.remotedatasource","extensioncore/exp.drawer","extensioncore/exp.navigation","extensioncore/exp.rdfe","extensioncore/exp.scheduler","extensioncore/exp.typeregistry","extensioncore/exp.ui.commands.obsolete","extensioncore/exp.ui","extensioncore/exp.utilities.beta"],function(){}),define("datalabext",["require","exports","generated/editor/TS/ViewModel/ExperimentEditor/CommunityHelpers","generated/editor/TS/ViewModel/ExperimentEditor/CommunityStockImages","generated/editor/DataLabViews/AllExperimentsView","generated/editor/DataLabViews/DataflowListView","generated/editor/DataLabViews/DataflowView","generated/editor/DataLabViews/DataGateway/DataGatewaysView","generated/editor/DataLabViews/DatasetListView","generated/editor/DataLabViews/ExperimentListView","generated/editor/DataLabViews/ExperimentLineageView","generated/editor/DataLabViews/ExperimentView","generated/editor/DataLabViews/ExperimentViewV2","generated/editor/DataLabViews/ModulesListView","generated/editor/DataLabViews/NotebookListView","generated/editor/DataLabViews/ProjectDetailView","generated/editor/DataLabViews/ProjectDetailViewModel","generated/editor/DataLabViews/ProjectListView","generated/editor/DataLabViews/ProjectListViewModel","generated/editor/DataLabViews/TrainedModelListView","generated/editor/DataLabViews/WebServiceGroupConfigView","generated/editor/DataLabViews/WebServiceGroupDashboardView","generated/editor/DataLabViews/WebServiceGroupListView","generated/editor/DataLabViews/WebServiceGroupView","generated/editor/TS/View/DialogViewFactories","generated/editor/TS/View/ChatControl","generated/editor/TS/View/FeedbackControl","generated/editor/TS/View/OnlineSearch","generated/editor/TS/View/DataImportsPivot","generated/editor/TS/View/UsersPivot","generated/editor/TS/View/SharingPivot","generated/editor/TS/View/CredentialsPivot","generated/editor/TS/ViewModel/Dialogs/TrialDialogs","generated/editor/TS/ViewModel/Dialogs/UploadDatasetDialogViewModel","generated/editor/TS/ViewModel/Dialogs/UploadModuleDialogViewModel","generated/editor/TS/ViewModel/Dialogs/UploadNotebookDialogViewModel","generated/editor/TS/ViewModel/ExperimentEditor/Help","generated/editor/TS/Common/ProjectUtilities","generated/editor/TS/Common/DialogInterfaces","generated/editor/TS/View/AzureFxDialogHost","generated/editor/TS/View/WorkspaceSettings","generated/editor/TS/V2/View/ExperimentsListView","generated/DataLabClient/ClientCache","generated/DataLabClient/Logging/ClientInformationState","generated/DataLabClient/Logging/ClientTelemetryLogger","generated/DataLabClient/Configuration","generated/DataLabClient/Model/CredentialStore","generated/DataLabClient/Constants","generated/DataLabClient/Contracts/V1/DataLabClient","generated/DataLabClient/Disposable","generated/DataLabClient/Features","generated/DataLabClient/LocalizedResources","generated/DataLabClient/Logging/Logging","generated/DataLabClient/Logging/IfxScenarioStopWatch","generated/DataLabClient/Logging/MdaLogger","generated/DataLabClient/Logging/Performance","generated/DataLabClient/Trial","generated/DataLabClient/Model/User","generated/DataLabClient/UserPreferenceStoreClient/UserPreferenceStore","generated/DataLabClient/UserPreferenceStoreClient/UserPreferenceStoreClient","generated/DataLabClient/Util","generated/DataLabClient/Model/Workspace","generated/DataLabClient/Contracts/V1/WorkspaceBackend","generated/DataLabClient/Contracts/V2/DataLabMultiRuntimeClient","generated/DataLabClient/Model/V2/WorkspaceServiceProvider","generated/DataLabClient/Model/V2/WorkspaceContext","extensioncore/Exp.Main","uxfxscript"],function(require,exports,CommunityHelpers,CommunityStockImages,AllExperimentsView,DataflowListView,DataflowView,DataGatewaysView,DatasetListView,ExperimentListView,ExperimentLineageView,ExperimentView,ExperimentViewV2,ModulesListView,NotebookListView,ProjectDetailView,ProjectDetailViewModel,ProjectListView,ProjectListViewModel,TrainedModelListView,WebServiceGroupConfigView,WebServiceGroupDashboardView,WebServiceGroupListView,WebServiceGroupView,DialogViewFactories,ChatControl,FeedbackControl,OnlineSearch,DataImportsPivot,UsersPivot,SharingPivot,CredentialsPivot,TrialDialogs,UploadDatasetDialogViewModel,UploadModuleDialogViewModel,UploadNotebookDialogViewModel,Help,ProjectUtilities,DialogInterfaces,AzureFxDialogHost,WorkspaceSettings,V2ExperimentsListView,ClientCache,ClientInformation,ClientTelemetryLogger,Configuration,CredentialStore,DataLabConstants,DataLabClientContract,Disposable,Features,LocalizedResources,Log,IfxScenarioStopWatch,MdaLogger,Performance,Trial,User,UserPreferenceStore,UserPreferenceStoreClient,Util,Workspace,WorkspaceBackend,DataLabMultiRuntimeClient,WorkspaceServiceProvider,WorkspaceContext){function applyLocalizationToHTMLTemplates(){ExperimentEditorTemplates.typescriptResourceVariables.forEach(function(resource){var replacement=DataLab.ApplyLocalizationToHTMLResource(eval(resource));eval(resource+" = "+JSON.stringify(replacement))})}function initializeMultiRuntimeStudioContext(e,t,n,r){var i=new DataLabMultiRuntimeClient.MultiRuntimeClient(e,t,r);i.esServiceBaseAddress=window.environment.esServiceBaseUrl+"/api/v2.0/",i.runtimeServiceBaseUrl=window.environment.runtimeServiceBaseUrl,i.notificationServiceBaseUrl=window.environment.notificationServiceBaseUrl+"/v1.0/",serviceProvider=WorkspaceServiceProvider.getWorkspaceServiceProvider(i);var s=WorkspaceContext.getWorkspaceContext();s.contextChangedEvent.handle(function(e,t){serviceProvider.setRuntimeType(t)});var o=i.getPaletteSummaries();o.done(function(e){var t;e.forEach(function(e){e.Name==="PySpark"&&(t=e),s.allRuntimes[e.Name]=e});if(!t){alert("The ES has changed the runtimes on us");return}s.setCurrentContext(t.Name,t.MajorVersion)})}function refreshProjectCacheBeforeCallback(e,t){Features.enableProjectBasedAssetsGroupingEnabled()?workspace.projectCache.refreshCacheIfNecissary().done(e).always(t):Util.succeed().done(e).always(t)}function experimentOpened(e,t,n){var r=isCurrentPivotActive=ko.observable(!0);Performance.intervalStart("openxperiment");var i=new IfxScenarioStopWatch.IfxScenarioStopWatch(DataLabConstants.IfxScenarioId.openExperiment,{experimentId:n.name});i.start();var s=t.get(0);document.querySelector("#tabcontainer .itemtitle").textContent="",Shell.UI.Spinner.show(),workspace.applicationCache.allPrefetched()?refreshProjectCacheBeforeCallback(function(){if(!r())return;ExperimentView.createExperimentView(s,n.name,workspace).done(function(e){ExperimentView.experimentView=e,ExperimentView.experimentView.open(i)})},function(){Shell.UI.Spinner.hide()}):(workspace.applicationCache.prefetch(),experimentViewCacheSubscription=workspace.applicationCache.allPrefetched.subscribe(function(e){e&&refreshProjectCacheBeforeCallback(function(){if(!r())return;ExperimentView.createExperimentView(s,n.name,workspace).done(function(e){ExperimentView.experimentView=e,ExperimentView.experimentView.open(i)})},function(){Shell.UI.Spinner.hide()})}))}function v2ExperimentOpened(e,t,n){var r=n.name;Performance.intervalStart("openv2experiment");var i=new IfxScenarioStopWatch.IfxScenarioStopWatch(DataLabConstants.IfxScenarioId.openExperiment,{experimentId:n.name}),s=t.get(0);document.querySelector("#tabcontainer .itemtitle").textContent="";var o=WorkspaceServiceProvider.getWorkspaceServiceProvider(),u=o.getService(2);u.populateDictionaryAsync().done(function(){ExperimentViewV2.experimentView=new ExperimentViewV2.ExperimentView(s,r,o),ExperimentViewV2.experimentView.open(i)})}function experimentLineageOpened(e,t,n){document.querySelector("#tabcontainer .itemtitle").textContent="";var r=new ExperimentLineageView.ExperimentLineageView(t,workspace,n.name);r.refreshFromService()}function dataflowOpened(e,t,n){var r=t.get(0),i=new DataflowView.DataflowView(t,n.name,workspace);i.open()}function webServiceGroupConfigOpened(e,t,n){var r=new WebServiceGroupConfigView.WebServiceGroupConfigContainerViewModel(t,n.name,workspace);r.open()}function webServiceGroupDashboardOpened(e,t,n){var r=new WebServiceGroupDashboardView.WebServiceGroupDashboardView(t,n.name,workspace);r.open()}function quickStartExperimentsOpened(e,t,n){experimentListPivotOpened(e,t,"quickstarts","quickStart")}function tutorialExperimentsOpened(e,t,n){experimentListPivotOpened(e,t,"tutorials","tutorial")}function templateExperimentsOpened(e,t,n){experimentListPivotOpened(e,t,"templates","template")}function sampleExperimentsOpened(e,t,n){Performance.intervalStart("sampleexperiments");var r=new ExperimentListView.ExperimentListView(t,workspace,client,userName,null);r.refreshFromService()}function allExperimentsOpened(e,t,n){var r=isCurrentPivotActive=ko.observable(!0),i=new IfxScenarioStopWatch.IfxScenarioStopWatch(DataLabConstants.IfxScenarioId.listExperiments,{experimentId:n.name});i.start(),Shell.UI.Spinner.show(),refreshProjectCacheBeforeCallback(function(){if(!r())return;Performance.intervalStart("allexperiments");var e=new AllExperimentsView.AllExperimentsView(t,workspace,client,userName);e.refreshFromService(i)},function(){Shell.UI.Spinner.hide()})}function v2ExperimentListViewOpened(e,t,n){var r=isCurrentPivotActive=ko.observable(!0);Shell.UI.Spinner.show(),refreshProjectCacheBeforeCallback(function(){if(!r())return;var e=new V2ExperimentsListView.ExperimentListView(t,WorkspaceServiceProvider.getWorkspaceServiceProvider(),workspace.id);e.refreshFromService()},function(){Shell.UI.Spinner.hide()})}function experimentListOpened(e,t,n){Performance.intervalStart("allexperiments");var r=new ExperimentListView.ExperimentListView(t,workspace,client,userName,"user");r.refreshFromService()}function experimentListPivotOpened(e,t,n,r){Performance.intervalStart(n);var i=new ExperimentListView.ExperimentListView(t,workspace,client,userName,r);i.refreshFromService()}function dataflowListOpened(e,t,n){var r=new DataflowListView.DataflowListView(t,client);r.refreshFromService()}function webServiceGroupListOpened(e,t,n){var r=isCurrentPivotActive=ko.observable(!0);Shell.UI.Spinner.show(),refreshProjectCacheBeforeCallback(function(){if(!r())return;var e=new WebServiceGroupListView.WebServiceGroupListView(t,workspace,client);e.refreshFromService()},function(){Shell.UI.Spinner.hide()})}function datasetListOpened(e,t,n){var r=new DatasetListView.DatasetListView(t,workspace,client)}function sampleDatasetListOpened(e,t,n){var r=new DatasetListView.DatasetListView(t,workspace,client,{listSamples:!0})}function notebookListOpened(e,t,n){if(User.user.isWorkspaceOwner){var r=isCurrentPivotActive=ko.observable(!0);Shell.UI.Spinner.show(),workspace.applicationCache.prefetch(),Util.whenTrue(workspace.applicationCache.notebooksPrefetched).done(function(){refreshProjectCacheBeforeCallback(function(){if(!r())return;var e=new NotebookListView.NotebookListView(t,workspace,client);e.populateNotebookList()},function(){Shell.UI.Spinner.hide()})})}else var i=new NotebookListView.NotebookListView(t,workspace,client)}function projectListOpened(e,t,n){var r=isCurrentPivotActive=ko.observable(!0);Shell.UI.Spinner.show(),workspace.applicationCache.prefetch(),Util.whenTrue(workspace.applicationCache.allPrefetched).done(function(){if(!r())return;var e=new ProjectListViewModel.ProjectListViewModel(workspace);e.beforePopulateList.attach(function(){Shell.UI.Spinner.show()}),e.afterPopulateList.attach(function(){Shell.UI.Spinner.hide()}),e.listPopulationFailed.attach(function(e){Shell.UI.Spinner.hide()});var n=new ProjectListView.ProjectListView(t,e);e.populateList()})}function projectDetailsOpened(e,t,n){document.querySelector("#tabcontainer .itemtitle").textContent="";var r=isCurrentPivotActive=ko.observable(!0);Shell.UI.Spinner.show(),workspace.applicationCache.prefetch(),Util.whenTrue(workspace.applicationCache.allPrefetched).done(function(){workspace.getProjectAsync([n.name]).done(function(e){if(!r())return;var n=new ProjectDetailViewModel.ProjectDetailViewModel(ko.observable(e),workspace),i=new ProjectDetailView.ProjectDetailView(t,n);Shell.UI.Spinner.hide()})})}function trainedModelListOpened(e,t,n){var r=isCurrentPivotActive=ko.observable(!0);Shell.UI.Spinner.show(),workspace.applicationCache.prefetch(),Util.whenTrue(workspace.applicationCache.trainedModelsPrefetched).done(function(){refreshProjectCacheBeforeCallback(function(){if(!r())return;var e=new TrainedModelListView.TrainedModelListView(t,workspace,client)},function(){Shell.UI.Spinner.hide()})})}function searchTabOpened(e,t,n){var r=new OnlineSearch.SearchView(t,client,workspace);cdm.setActiveItem(r)}function dataImportStatusOpened(e,t,n){var r=new DataImportsPivot.DataImportsPivot(client,t);cdm.setActiveItem(r),r.refreshFromService()}function moduleListOpened(e,t,n){Shell.UI.Spinner.show(),workspace.applicationCache.modulesPrefetched()?refreshProjectCacheBeforeCallback(function(){var e=new ModulesListView.ModuleListView(t,workspace,client);e.populateModuleList(),e.watchCacheChanges()},function(){Shell.UI.Spinner.hide()}):(workspace.applicationCache.prefetch(),modulesViewCacheSubscription=workspace.applicationCache.modulesPrefetched.subscribe(function(e){e&&refreshProjectCacheBeforeCallback(function(){var e=new ModulesListView.ModuleListView(t,workspace,client);e.populateModuleList(),e.watchCacheChanges()},function(){Shell.UI.Spinner.hide()})}))}function settingsOpened(e,t,n){var r=new WorkspaceSettings.WorkspaceSettings(client,workspace,t,!hasOwnerAccess);cdm.setActiveItem(r)}function usersTabOpened(e,t,n){var r=new UsersPivot.UsersPivot(client,t);cdm.setActiveItem(r),r.refreshFromService()}function sharingTabOpened(e,t,n){var r=new SharingPivot.SharingPivot(client,workspace,t);cdm.setActiveItem(r),r.refreshFromService()}function dataGatewaysOpened(e,t,n){var r=new DataGatewaysView.DataGatewaysView(workspace.getDataGatewayBackend(),t);cdm.setActiveItem(r),r.refreshFromService()}function credentialsTabOpened(e,t,n){var r=new CredentialsPivot.CredentialsPivot(client,t);cdm.setActiveItem(r),r.refreshFromService()}function recentWorkOpened(e,t,n){Performance.intervalStart("recentexperiments");var r=new RecentWorkView.RecentWorkView(t,workspace);cdm.setActiveItem(r),r.refreshFromService()}function confirmNavAwayDuringUpload(){return"Navigating away will cancel any existing uploads."}function getModulesMenuItems(){return Features.newCustomModuleUploadEnabled()&&(!ClientInformation.keyVaultKeyIdentifier||Features.newCustomModuleUploadEncryptedEnabled())?[{name:"UploadCustomModulePackageMenuItem",displayName:LocalizedResources.uploadModuleFromZip,description:resources.uploadModuleMenuDescription,execute:function(){Exp.Drawer.close(),DataLab.showUploadCustomModulePackageDialog()},categories:"Module"}]:[]}function getNotebooksMenuItems(){var e=[];return e}function getProjectsMenuItems(){var e="NewProjectMenuItem";return[{name:e,displayName:resources.projectsPlusNewTitle,description:resources.projectsPlusNewDescription,execute:function(){Log.info("Create new project menu",e)},isPreviewFeature:!0}]}function shellExtensionOnNavigateToDefaultHandler(e,t){Log.featureUsage({featureID:e,groupID:DataLabConstants.FeatureId.TabNavigation}),e===DataLabConstants.FeatureId.NotebooksTab&&$("#deprecate-notification").length==0&&$("#secondary-container").prepend("<div id='deprecate-notification' style='background: #FED9CC; margin-left: -30px; padding: 16px 16px 16px 30px'>The notebooks(preview) feature will be shut down at <strong>4/13/2020</strong>. After shut down the notebooks tab will disappear and the notebooks data can not be restored. Please download your notebooks data before <strong>4/13/2020</strong>. <a href='https://aka.ms/studio-download-notebooks'>Click here</a> to check how to download your data. If you have further question, <a href='https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/overview'>contact us</a></div>"),t.setCommands(cdm.currentActiveItem,cdm.currentContext)}function shellExtensionOnNavigateAwayDefaultHandler(){isCurrentPivotActive&&isCurrentPivotActive(!1),cdm.currentActiveItem&&cdm.currentActiveItem.dispose&&cdm.currentActiveItem.dispose(),$("#deprecate-notification").remove()}function installUnloadWarningForUploads(e){var t=ko.computed(function(){return e.notebookUploadsInProgress().length>0}),n=null;t.subscribe(function(e){e&&!n?n=new Disposable.DisposableEventListener(window,"beforeunload",function(e){return e.returnValue=LocalizedResources.navigatingAwayWhileUploadingWarning}):!e&&n&&(n.dispose(),n=null)})}var DataLab={};DataLab.applicationReady=!1;var resources=window.Resources.getResources("Microsoft.MetaAnalytics.Web.ClientResources"),nextPanelIndex=0,HomePanelIndex=nextPanelIndex++,ProjectsPanelIndex=nextPanelIndex++,ExperimentsPanelIndex=nextPanelIndex++,WebServiceGroupsPanelIndex=nextPanelIndex++,NotebooksPanelIndex=nextPanelIndex++,DataflowsPanelIndex=nextPanelIndex++,ModulesPanelIndex=nextPanelIndex++,DatasetsPanelIndex=nextPanelIndex++,TrainedModelsPanelIndex=nextPanelIndex++,SettingsPanelIndex=nextPanelIndex++,V2ExperimentsPanelIndex=nextPanelIndex++,workspace=null,client=null,userPreferenceClient=null,userPreferenceCache=null,isWorkspaceOwner=window.environment.workspaceOwnershipLevel==="Owner",isAdmin=window.environment.workspaceOwnershipLevel==="Admin",hasOwnerAccess=isWorkspaceOwner||isAdmin,userName,_user,_isFirstTimeVisit=null,experimentViewCacheSubscription=null,modulesViewCacheSubscription=null,isCurrentPivotActive=null,serviceProvider=null;Features.setIntegrationPoints(window.environment.integrationPoints),Configuration.ClientConfiguration=window.environment.clientConfiguration,CommunityHelpers.galleryBaseUrl=window.environment.galleryBaseUrl,CommunityHelpers.catalogSearchBaseUri=window.environment.catalogSearchBaseUri,CommunityHelpers.catalogQueryBaseUri=window.environment.catalogQueryBaseUri,CommunityHelpers.activityServiceUrl=window.environment.activityServiceUrl,CommunityHelpers.multiGeoRegion=window.environment.multiGeoRegion,CommunityHelpers.multiGeoRegionsList=window.environment.multiGeoRegionsList,CommunityHelpers.msftAuthorId=window.environment.msftAuthorId,CommunityHelpers.notebookSamplesCollectionId=window.environment.notebookSamplesCollectionId,CommunityHelpers.canPublishOnBehalfOfCompany=window.environment.canPublishOnBehalfOfCompany,CommunityStockImages.CommunityStockImages.init(window.environment.galleryStockImagesUrl),AllExperimentsView.azureMLDomainSuffix=window.environment.azureMLDomainSuffix,Help.environment=window.environment,DataLab.ApplyLocalizationToHTMLResource=function(t){var n=t.replace(/%([a-zA-Z0-9_]+)%/g,function(e,t){var n=LocalizedResources[t];return n||alert("Couldn't find localized resource: "+t+", perhaps there is syntax error in HTML template"),n});return n},DataLab.setWorkspaceContext=function(t,n,r,i){client=new DataLabClientContract.Client(t,n,i),client.serviceBaseAddress=window.environment.esServiceBaseUrl+"/api/",client.serviceBaseUrlForNotebookCreate=window.environment.esServiceBaseUrl;var s=new ClientCache.ApplicationCache(client,client);CredentialStore.initialize(client),applyLocalizationToHTMLTemplates(),DialogViewFactories.createViews();var o=new WorkspaceBackend.WorkspaceBackend(client,client);User.user=new User.User(r),isWorkspaceOwner=User.user.isWorkspaceOwner,userName=r.Name,FeedbackControl.initFeedbackControl(),DataLab.getExperimentHash=function(e){return Util.format("#Workspaces/Experiments/Experiment/{0}.{1}/ViewExperiment",t,e)},ClientInformation.workspaceId=t,ClientInformation.tabId=Shell.Utilities.newGuid(),ClientInformation.workspaceType=window.environment.workspaceTypeInt,ClientInformation.subscriptionId=window.environment.subscriptionId||null;var u=document.cookie.match(new RegExp("(?:^|.*;)\\s*"+DataLabConstants.LoggingHeaders.SessionIdCookieName+"\\s*\\=\\s*([^;]*).*$"));u&&u.length===2?ClientInformation.sessionId=decodeURIComponent(u[1]):ClientInformation.sessionId=DataLabConstants.EmptyGuid,workspace=new Workspace.Workspace(o,s),workspace.setUserName(userName),Workspace.workspace=workspace,installUnloadWarningForUploads(workspace),ClientInformation.armSharing=Features.enableArmWorkspaceSharingEnabled(),workspace.getWorkspaceSettingsAsync().done(function(e){ClientInformation.keyVaultKeyIdentifier=e.keyVaultKeyIdentifier,ClientInformation.armSharing=ClientInformation.armSharing&&e.armSharing}),userPreferenceClient=new UserPreferenceStoreClient.UserPreferenceStoreClient(window.environment.esServiceBaseUrl,i),userPreferenceCache=new UserPreferenceStore.UserPreferenceCache(userPreferenceClient,DataLabConstants.UserPreference.UserPreferenceKeys,DataLabConstants.UserPreference.CacheRefreshInterval),Workspace.UserSettingsStoreClient=userPreferenceClient,Workspace.UserSettingsCache=userPreferenceCache,Features.mLStudioV2Enabled()&&initializeMultiRuntimeStudioContext(t,n,r,i)};if(Features.enableFrictionFreeUserExperienceEnabled()){var isLocalStorageAvailable=Shell.Utilities.isLocalStorageAvailable();DataLab.setUser=function(t){_user=t},DataLab.isUserSettingsAvailable=function(){return!!_user&&isLocalStorageAvailable},DataLab.setUserSetting=function(t,n){var r=_user.UserId+"/"+t;isLocalStorageAvailable&&window.localStorage.setItem(r,n)},DataLab.getUserSetting=function(t){var n=_user.UserId+"/"+t,r=null;return isLocalStorageAvailable&&(r=window.localStorage.getItem(n)),r},DataLab.setVisited=function(t){DataLab.isUserSettingsAvailable()&&DataLab.setUserSetting("visited",t?"true":"false")},DataLab.checkIsFirstTimeVisit=function(){DataLab.isUserSettingsAvailable()&&(_isFirstTimeVisit=!1,window.environment&&window.environment.hasNoExperiments&&(_isFirstTimeVisit=DataLab.getUserSetting("visited")!=="true"))},DataLab.isFirstTimeVisit=function(){return DataLab.isUserSettingsAvailable()?_isFirstTimeVisit:!1}}var uploadsInProgress=0;DataLab.showUploadDatasetDialog=function(){if(!Trial.isDatasetUploadEnabled()){Log.featureUsage({featureID:DataLabConstants.FeatureId.DisabledDatasetUpload,groupID:DataLabConstants.FeatureId.TrialFeature}),TrialDialogs.showDisabledDatasetUploadDialog();return}var t=new UploadDatasetDialogViewModel.UploadDatasetDialogViewModel(workspace);t.datasetUploadStartedEvent.subscribe(function(e){var n=t.dataset.name(),r=new Shell.UI.Notifications.Progress(Util.format(LocalizedResources.uploadingNewDataset,n),"active",!1);Shell.UI.Notifications.add(r),Log.featureUsage({featureID:DataLabConstants.FeatureId.UploadDataset,groupID:0,data:t.dataset.dataType().dataTypeId}),uploadsInProgress++===0&&window.addEventListener("beforeunload",confirmNavAwayDuringUpload),e.done(function(e){r.setTitle(Util.format(LocalizedResources.uploadingCompleted,e.name())),r.setStatus("success"),r.setActions([Shell.UI.Notifications.Buttons.ok()])}).fail(function(e){if(Features.trialLimitationsEnabled()&&TrialDialogs.tryShowDialogForTrialRestriction(e)){Shell.UI.Notifications.remove(r);return}var i=Util.getErrorDetails(e),s=e instanceof Util.AjaxError&&e.xmlHttpRequest&&e.xmlHttpRequest.status,o=Util.format(LocalizedResources.uploadingFailed,i);s===409&&(o=Util.format(LocalizedResources.uploadingFailedDuplicateName,n)),r.setTitle(o),r.setStatus("error"),r.setActions([Shell.UI.Notifications.Buttons.ok()]),Log.error("dataset upload failure","",JSON.stringify({error:i,xhrStatus:s,datasetName:t.dataset.name(),datasetIsValid:t.dataset.isValid(),dataTypeId:t.dataset.dataType()&&t.dataset.dataType().dataTypeId,deprecate:t.dataset.deprecate(),familyId:t.dataset.familyId()})),s===409&&Features.refreshTheDatasetCacheWhenDatasetUploadFailsEnabled()&&Workspace.workspace.applicationCache.datasetCache.loadNewItems()}).progress(function(e){e.lengthComputable&&r.setValue(e.loaded/e.total*100)}).always(function(){r.setValue(100),workspace.datasetUploadsInProgress().splice(workspace.datasetUploadsInProgress().lastIndexOf(n,1)),workspace.datasetUploadsInProgress.valueHasMutated(),--uploadsInProgress===0&&window.removeEventListener("beforeunload",confirmNavAwayDuringUpload)})}),Util.whenTrue(workspace.applicationCache.datasetsPrefetched).done(function(){Shell.UI.Spinner.hide(),DialogViewFactories.UploadDataset.show(t)})},DataLab.showUploadCustomModulePackageDialog=function(){if(!Trial.isModuleUploadEnabled()){Log.featureUsage({featureID:DataLabConstants.FeatureId.DisabledModuleUpload,groupID:DataLabConstants.FeatureId.TrialFeature}),TrialDialogs.showDisabledModuleUploadDialog();return}var t=new UploadModuleDialogViewModel.UploadModuleDialogViewModel(workspace);t.modulePackageUploadStartedEvent.subscribe(function(e){var n=t.zipFile.name(),r=new Shell.UI.Notifications.Progress(Util.format(LocalizedResources.uploadingNewCustomModulePackage,n),"active",!1);Shell.UI.Notifications.add(r),uploadsInProgress++===0&&window.addEventListener("beforeunload",confirmNavAwayDuringUpload),e.done(function(e){e.splice(0,1)[0]==="Finished"?(r.setTitle(Util.format(LocalizedResources.customModuleZipPackageCompleted,n,e.join(", "))),r.setStatus("success")):(r.setTitle(Util.format(LocalizedResources.customModuleZipPackageFailed,n)),r.setDetailsText(e[1]),r.setStatus("error")),r.setActions([Shell.UI.Notifications.Buttons.ok()])}).fail(function(e){if(Features.trialLimitationsEnabled()&&TrialDialogs.tryShowDialogForTrialRestriction(e)){Shell.UI.Notifications.remove(r);return}var t=Util.getErrorDetails(e);r.setTitle(Util.format(LocalizedResources.customModuleZipPackageFailed,t)),r.setStatus("error"),r.setActions([Shell.UI.Notifications.Buttons.ok()])}).progress(function(e){e.lengthComputable&&r.setValue(e.loaded/e.total*100)}).always(function(){r.setValue(100),workspace.customModulePackageUploadsInProgress().splice(workspace.customModulePackageUploadsInProgress().lastIndexOf(n,1)),workspace.customModulePackageUploadsInProgress.valueHasMutated(),--uploadsInProgress===0&&window.removeEventListener("beforeunload",confirmNavAwayDuringUpload)})}),workspace.applicationCache.datatypesPrefetched()?DialogViewFactories.UploadCustomModulePackage.show(t):(Shell.UI.Spinner.show(),workspace.applicationCache.datatypesPrefetched.subscribe(function(e){e&&(Shell.UI.Spinner.hide(),DialogViewFactories.UploadCustomModulePackage.show(t))}))},DataLab.showNotificationForPendingUpload=function(t){var n=new Shell.UI.Notifications.Progress(Util.format(LocalizedResources.uploadingNewDataset,t.name),"active",!1);n.setValue(100),Shell.UI.Notifications.add(n),t.promise.done(function(e){n.setTitle(Util.format(LocalizedResources.uploadingCompleted,e.name())),n.setStatus("success"),n.setActions([Shell.UI.Notifications.Buttons.ok()])}).fail(function(e){n.setTitle(Util.format(LocalizedResources.uploadingFailed,e.toString())),n.setStatus("error"),n.setActions([Shell.UI.Notifications.Buttons.ok()])})},DataLab.showNotificationsForPendingUploadsWhenReady=function(){var t=!1,n=ko.computed(function(){workspace.applicationCache.datasetsPrefetched()&&(workspace.applicationCache.localPendingDatasets().forEach(function(e){DataLab.showNotificationForPendingUpload(e)}),t=!0,n&&(n.dispose(),n=null))});t&&n&&(n.dispose(),n=null)},Features.modulesListEnabled()&&Shell.extension({name:"Modules",displayName:LocalizedResources.modules,displayOrderHint:ModulesPanelIndex,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],menuItems:getModulesMenuItems(),onNavigateTo:function(){shellExtensionOnNavigateToDefaultHandler(DataLabConstants.FeatureId.ModulesTab,this)},onNavigateAway:function(){shellExtensionOnNavigateAwayDefaultHandler(),modulesViewCacheSubscription&&modulesViewCacheSubscription.dispose()},initializePivots:function(){var e=[{id:"ListModules",displayName:LocalizedResources.modules,template:"Grid",activated:moduleListOpened}];Shell.UI.Pivots.add(this.id,e),Shell.UI.Pivots.update(this.id)},setCommands:function(e,t){Shell.UI.Commands.clear(),e&&e.setCommands&&t.viewPath==="ListModules"&&e.setCommands()}}),Features.enableAssetDeletionEnabled()&&Features.assetDeletionUiEnabled()&&Shell.extension({name:"Datasets",displayName:LocalizedResources.datasets,displayOrderHint:DatasetsPanelIndex,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],menuItems:[],onNavigateTo:function(){shellExtensionOnNavigateToDefaultHandler(DataLabConstants.FeatureId.DatasetsTab,this)},onNavigateAway:shellExtensionOnNavigateAwayDefaultHandler,initializePivots:function(){var e=[{id:"ListDatasets",displayName:LocalizedResources.myDatasets,template:"Grid",activated:datasetListOpened},{id:"ListSampleDatasets",displayName:LocalizedResources.samples,template:"Grid",activated:sampleDatasetListOpened},{id:"SSIMSearch",displayName:LocalizedResources.onlineSearch,template:"Search",activated:searchTabOpened,visible:Features.ssimSearchEnabled()},{id:"DataImports",displayName:LocalizedResources.dataImportStatus,template:"Grid",activated:dataImportStatusOpened,visible:!1}];Shell.UI.Pivots.add(this.id,e),Shell.UI.Pivots.update(this.id)},setCommands:function(e,t){Shell.UI.Commands.clear(),e&&e.setCommands&&(t.viewPath==="ListDatasets"||t.viewPath==="ListSampleDatasets")&&e.setCommands(),Features.ssimSearchEnabled()&&this.menuItems.push({name:"SearchDatasetMenuItem",displayName:LocalizedResources.onlineSearch,description:resources.onlineSearchMenuDescription,isEnabled:function(){return!0},execute:function(){Shell.UI.Navigation.navigate({extension:"Datasets",view:"SSIMSearch"})},categories:"Dataset"});if(e&&t.viewPath==="DataImports"){var n=new Shell.UI.Commands.Command(LocalizedResources.deleteDataImports,Shell.UI.Icons.delete,e.removeDataImports.bind(e)),r=new Shell.UI.Commands.Command(LocalizedResources.refresh,Shell.UI.Icons.sync,e.refreshFromService.bind(e));Shell.UI.Commands.add([n,r]),e.setRemoveCommand(n)}}}),Features.enableProjectBasedAssetsGroupingEnabled()&&Shell.extension({name:ProjectUtilities.projectsExtensionName,displayName:resources.projectsExtensionTitle,displayOrderHint:ProjectsPanelIndex,includeInAllView:!1,navigationalViewModelUri:"",viewModeUris:[],menuItems:getProjectsMenuItems(),isBeta:!0,onNavigateTo:function(){shellExtensionOnNavigateToDefaultHandler(DataLabConstants.FeatureId.ProjectsTab,this)},onNavigateAway:shellExtensionOnNavigateAwayDefaultHandler,initializePivots:function(){var e=[{id:"ListProjects",displayName:"My Projects",activated:projectListOpened},{id:"ProjectDetails",displayName:"Project Detail",navFilter:ProjectUtilities.ProjectType.name,activated:projectDetailsOpened}];Shell.UI.Pivots.add(this.id,e),Shell.UI.Pivots.update(this.id)},setCommands:function(e,t){Shell.UI.Commands.clear(),e&&e.setCommands&&(t.viewPath==="ListProjects"||t.viewPath==="ProjectDetails")&&e.setCommands()}}),Exp.TypeRegistry.add(ProjectUtilities.projectsExtensionName,[ProjectUtilities.ProjectType]),Features.mLStudioV2Enabled()&&Shell.extension({name:"ExperimentV2",displayName:"PySpark Experiments",displayOrderHint:V2ExperimentsPanelIndex,includeInAllView:!1,navigationalViewModelUri:"",viewModeUris:[],menuItems:[],isBeta:!0,onNavigateTo:function(){shellExtensionOnNavigateToDefaultHandler(DataLabConstants.FeatureId.V2ExperimentList,this)},onNavigateAway:shellExtensionOnNavigateAwayDefaultHandler,initializePivots:function(){var e=[{id:"ListV2s",displayName:LocalizedResources.allExperimentsPivotDisplayName,template:"Grid",activated:v2ExperimentListViewOpened},{id:"ExperimentV2",displayName:"View Experiment V2",template:"ExperimentEditor",navFilter:ExperimentViewV2.ExperimentType.name,activated:v2ExperimentOpened}];Shell.UI.Pivots.add(this.id,e),Shell.UI.Pivots.update(this.id)},setCommands:function(e,t){Shell.UI.Commands.clear(),e&&e.setCommands&&e.setCommands()}}),Exp.TypeRegistry.add("ExperimentV2",[ExperimentViewV2.ExperimentType]),Features.enableAssetDeletionEnabled()&&Features.trainedModelDeletionUiEnabled()&&Shell.extension({name:"TrainedModels",displayName:LocalizedResources.trainedModels,displayOrderHint:TrainedModelsPanelIndex,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],menuItems:[],onNavigateTo:function(){shellExtensionOnNavigateToDefaultHandler(DataLabConstants.FeatureId.TrainedModelsTab,this)},onNavigateAway:shellExtensionOnNavigateAwayDefaultHandler,initializePivots:function(){var e=[{id:"ListTrainedModels",displayName:LocalizedResources.trainedModels,template:"Grid",activated:trainedModelListOpened}];Shell.UI.Pivots.add(this.id,e),Shell.UI.Pivots.update(this.id)},setCommands:function(e,t){Shell.UI.Commands.clear(),e&&e.setCommands&&e.setCommands()}}),Trial.isWorkspaceTypeAnonymous()||Shell.extension({name:"Settings",displayName:LocalizedResources.settings,displayOrderHint:SettingsPanelIndex,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],onNavigateTo:function(){shellExtensionOnNavigateToDefaultHandler(DataLabConstants.FeatureId.SettingsTab,this)},onNavigateAway:shellExtensionOnNavigateAwayDefaultHandler,initializePivots:function(){var e=Features.enableArmWorkspaceSharingEnabled()&&ClientInformation.armSharing,t=[{id:"Name",displayName:LocalizedResources.name,template:"NameTab",activated:settingsOpened},{id:"AuthTokens",displayName:LocalizedResources.authTokens,template:"AuthTokensTab",activated:settingsOpened,visible:hasOwnerAccess},{id:"Users",displayName:LocalizedResources.users,template:"Grid",activated:usersTabOpened,visible:hasOwnerAccess&&!e},{id:"Sharing",displayName:LocalizedResources.sharing,template:"SharingTab",activated:sharingTabOpened,visible:hasOwnerAccess&&e},{id:"Resources",displayName:LocalizedResources.resources,template:"ResourcesTab",activated:settingsOpened,visible:Features.configureYourOwnHdInsightEnabled()}];Features.dataGatewayEnabled()&&t.push({id:"dataGateways",displayName:LocalizedResources.dataGateways,template:"DataGatewaysTab",activated:dataGatewaysOpened}),Shell.UI.Pivots.add(this.id,t),Shell.UI.Pivots.update(this.id)},setCommands:function(t,n){Shell.UI.Commands.clear();if(t&&hasOwnerAccess&&(n.viewPath==="Name"||n.viewPath==="Resources")){var r=new Shell.UI.Commands.Command(LocalizedResources.commandsSave,Shell.UI.Icons.save,function(){return t.update()},null,!0),i=new Shell.UI.Commands.Command(LocalizedResources.discard2,Shell.UI.Icons.undo,function(){return t.discard()},null,!0);Shell.UI.Commands.add([r,i]),t.hasBeenEdited.subscribe(function(){r.setDisabled(!t.hasBeenEdited()),i.setDisabled(!t.hasBeenEdited())})}if(t&&n.viewPath==="Users"){var s=new Shell.UI.Commands.Command(LocalizedResources.inviteMoreUsers,Shell.UI.Icons.message,function(){return t.launchInvitationDialog.call(t,"")}),o=new Shell.UI.Commands.Command(LocalizedResources.remove,Shell.UI.Icons.delete,t.removeUsers.bind(t));Shell.UI.Commands.add([s,o]),t.setRemoveCommand(o)}var u=Features.enableArmWorkspaceSharingEnabled()&&ClientInformation.armSharing;if(u&&t&&n.viewPath==="Sharing"){var s=new Shell.UI.Commands.Command(LocalizedResources.inviteMoreUsers,Shell.UI.Icons.message,function(){return t.launchInvitationDialog.call(t,"")});Shell.UI.Commands.add([s])}if(t&&n.viewPath==="Credentials"){var a=new Shell.UI.Commands.Command(LocalizedResources.deleteCredentials,Shell.UI.Icons.delete,t.removeCredentials.bind(t));Shell.UI.Commands.add([a]),t.setRemoveCommand(a)}t&&n.viewPath==="dataGateways"&&t.setCommands()}}),Shell.extension({name:ExperimentView.experimentExtensionName,displayName:LocalizedResources.experiments,displayOrderHint:ExperimentsPanelIndex,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],menuItems:[{name:"NewExperimentMenuItem",displayName:LocalizedResources.experiment,description:resources.newExperimentMenuDescription,execute:function(){Features.newExperimentFlowEnabled()||(ExperimentView.navigateToExperiment(ExperimentView.ExperimentType.draftExperimentId),Log.info("Creating new experiment draft","NewExperimentMenuItem"))}}],onNavigateTo:function(){shellExtensionOnNavigateToDefaultHandler(DataLabConstants.FeatureId.ExperimentsTab,this)},onNavigateAway:function(){shellExtensionOnNavigateAwayDefaultHandler(),experimentViewCacheSubscription&&experimentViewCacheSubscription.dispose()},onNavigating:Features.enableFrictionFreeUserExperienceEnabled()?function(e){var t=e.destination.hash,n=t.split("?",2);if(n.length===2){e.redirect(n[0]);var r=decodeURIComponent(n[1]);r==="newExperiment=true"&&!DataLab.isFirstTimeVisit()&&Shell.UI.Drawer.open()}}:null,initializePivots:function(){var e={id:"RecentWork",displayName:LocalizedResources.recentWorkPivotDisplayName,activated:recentWorkOpened},t={id:"ListExperiments",displayName:LocalizedResources.allExperimentsPivotDisplayName,activated:allExperimentsOpened},n={id:"SampleExperiments",displayName:LocalizedResources.sampleExperimentsPivotDisplayName,activated:sampleExperimentsOpened,template:"Grid"},r={id:"ListExperiments",displayName:LocalizedResources.listExperimentsPivotDisplayName,activated:experimentListOpened,template:"Grid"},i={id:"QuickStartExperiments",displayName:LocalizedResources.experimentListPivotQuickStarts,activated:quickStartExperimentsOpened,template:"Grid"},s={id:"TutorialExperiments",displayName:LocalizedResources.experimentListPivotTutorials,activated:tutorialExperimentsOpened,template:"Grid"},o={id:"TemplateExperiments",displayName:LocalizedResources.experimentListPivotTemplates,activated:templateExperimentsOpened,template:"Grid"},u=[];Features.experimentListCategoriesEnabled()?u.push(t,i,s,o):Features.experimentalExperimentListEnabled()?u.push(t,n):u.push(e,n,r),u.push({id:"ViewExperiment",displayName:LocalizedResources.viewExperiment,template:"ExperimentEditor",navFilter:ExperimentView.ExperimentType.name,activated:experimentOpened},{id:"ViewExperimentLineage",displayName:LocalizedResources.viewExperimentLineage,template:"Grid",navFilter:ExperimentView.ExperimentLineageType.name,activated:experimentLineageOpened}),Features.mLStudioV2Enabled()&&u.push({id:"ViewExperimentV2",displayName:"View Experiment V2",template:"ExperimentEditor",navFilter:ExperimentViewV2.ExperimentType.name,activated:v2ExperimentOpened}),Shell.UI.Pivots.add(this.id,u),Shell.UI.Pivots.update(this.id)},setCommands:function(t,n){Shell.UI.Commands.clear();if(t&&t.setCommands)if(t instanceof ExperimentView.ExperimentView||t instanceof ExperimentLineageView.ExperimentLineageView||t instanceof ExperimentViewV2.ExperimentView)t.setCommands();else if(t instanceof ExperimentListView.ExperimentListView||t instanceof AllExperimentsView.AllExperimentsView)t.setCommands(n.viewPath);else{var r=Util.findDataLabViewName(t);Log.error("Attempted to set commands for unknown view",null,JSON.stringify({viewModelName:r,extension:this.name}))}}}),Exp.TypeRegistry.add(ExperimentView.experimentExtensionName,[ExperimentView.ExperimentType,ExperimentViewV2.ExperimentType,ExperimentView.ExperimentLineageType]),Features.dataflowsEnabled()&&Shell.extension({name:ExperimentView.dataflowExtensionName,displayName:LocalizedResources.dataflows,displayOrderHint:DataflowsPanelIndex,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],onNavigateTo:function(){shellExtensionOnNavigateToDefaultHandler(DataLabConstants.FeatureId.DataflowsTab,this)},onNavigateAway:shellExtensionOnNavigateAwayDefaultHandler,initializePivots:function(){var e=[{id:"listDataflows",displayName:LocalizedResources.dataflows,template:"Grid",activated:dataflowListOpened},{id:"viewDataflow",displayName:LocalizedResources.viewDataflow,template:"DataflowViewer",navFilter:ExperimentView.DataflowType.name,activated:dataflowOpened}];Shell.UI.Pivots.add(this.id,e),Shell.UI.Pivots.update(this.id)},setCommands:function(t,n){Shell.UI.Commands.clear()}}),Exp.TypeRegistry.add(ExperimentView.dataflowExtensionName,[ExperimentView.DataflowType]),Trial.isWebServicePublishEnabled()&&Shell.extension({name:WebServiceGroupView.webServiceGroupExtensionName,displayName:LocalizedResources.webServiceGroupsTabTitle,displayOrderHint:WebServiceGroupsPanelIndex,includeInAllView:!1,navigationalViewModelUri:"",viewModelUris:[],onNavigateTo:function(){shellExtensionOnNavigateToDefaultHandler(DataLabConstants.FeatureId.WebServicesTab,this)},onNavigateAway:shellExtensionOnNavigateAwayDefaultHandler,initializePivots:function(){var e=[{id:"listWebServiceGroups",displayName:LocalizedResources.webServiceGroupsTabTitle,template:"Grid",activated:webServiceGroupListOpened},{id:"dashboard",displayName:LocalizedResources.webServiceGroupViewCommandTitle,template:"DashboardTab",navFilter:WebServiceGroupView.WebServiceGroupType.name,activated:webServiceGroupDashboardOpened},{id:"configuration",displayName:LocalizedResources.webServiceGroupConfigurationTabTitle,template:"ConfigurationTab",navFilter:WebServiceGroupView.WebServiceGroupType.name,activated:webServiceGroupConfigOpened}];Shell.UI.Pivots.add(this.id,e),Shell.UI.Pivots.update(this.id)},setCommands:function(t,n){Shell.UI.Commands.clear();if(t&&t.setCommands)if(t instanceof WebServiceGroupListView.WebServiceGroupListView||t instanceof WebServiceGroupDashboardView.WebServiceGroupDashboardView||t instanceof WebServiceGroupConfigView.WebServiceGroupConfigContainerViewModel)t.setCommands();else{var r=Util.findDataLabViewName(t);Log.error("Attempted to set commands for unknown view",null,JSON.stringify({viewModelName:r,extension:this.name}))}}}),Exp.TypeRegistry.add(WebServiceGroupView.webServiceGroupExtensionName,[WebServiceGroupView.WebServiceGroupType]),Log.unhandledExceptionEvent.subscribe(function(){var e=(new Date).getTimezoneOffset()*6e4,t=new Date((new Date).getTime()+e);Shell.UI.Spinner.hide();var n=document.querySelector("#error-dialog-template").textContent,r=function(){var e=$(".datalab-errorDialogFeedback-textarea").val();if(e!==""){var t=$("#supportID").val(),n={isHappy:!1,src:"errorDialog",content:e+" - ActivityID = "+t},r=JSON.stringify(n);Log.feedbackInfo(r,undefined)}};Shell.UI.DialogPresenter.show({template:$.templates(n),data:{supportId:Shell.Environment.getPageRequestId()+" "+t.toString("u")},ok:function(){Shell.UI.Spinner.show(),window.location.reload()},okOrClose:function(){r()},init:function(){var e=this.element.find(".datalab-errorDialogFeedback-textarea"),t=this.element.find(".datalab-errorActivityId"),n=this.element.find(".text-area-toggle");n.click(function(){e.toggleClass("hidden"),t.toggleClass("hidden"),n.toggleClass("down-arrow"),n.toggleClass("up-arrow")})},zIndex:9e3})});if(Features.useClientTelemetryLoggingEnabled()){var loggingDependencies={isLocalStorageAvailable:Shell.Utilities.isLocalStorageAvailable};ClientTelemetryLogger.initialize(loggingDependencies,Shell.Environment.getPageRequestId()),Log.setLogger({info:ClientTelemetryLogger.info,error:ClientTelemetryLogger.error,warn:ClientTelemetryLogger.warn,verbose:ClientTelemetryLogger.verbose,featureUsage:ClientTelemetryLogger.featureUsage,customEvent:ClientTelemetryLogger.customEvent,performance:ClientTelemetryLogger.performance,timerStart:ClientTelemetryLogger.timerStart,timerStopAndLog:ClientTelemetryLogger.timerStopAndLog,feedbackInfo:ClientTelemetryLogger.feedbackInfo,exception:ClientTelemetryLogger.unhandledException,IfxClientRequest:ClientTelemetryLogger.IfxClientRequest,IfxScenario:ClientTelemetryLogger.IfxScenario},"uxLogger")}else Log.setLogger({info:function(e,t,n){Shell.Diagnostics.Log.info(t,e,n)},error:function(e,t,n){Shell.Diagnostics.Log.error(t,e,n)},warn:function(e,t,n){Shell.Diagnostics.Log.warning(t,e,n)},verbose:function(e,t,n){Shell.Diagnostics.Log.verbose(t,e,n)},featureUsage:function(e,t){Shell.Diagnostics.Telemetry.featureUsage(e.featureID,e.groupID,t,e.experimentID,e.moduleID,e.data)},customEvent:function(e){Shell.Diagnostics.Telemetry.customEvent(e.key,e.type,e.data)},performance:function(e,t,n,r){Shell.Diagnostics.Telemetry.performance(e,t,n,r)},timerStart:function(e){Shell.Diagnostics.Telemetry.timerStart(e)},timerStopAndLog:function(e,t,n){Shell.Diagnostics.Telemetry.timerStopAndLog(e,t,n)},feedbackInfo:function(e,t){Shell.Diagnostics.Telemetry.feedbackInfo(e,t)},IfxClientRequest:function(e,t,n,r,i,s){},IfxScenario:function(e,t,n,r,i){}},"legacyUxLogger");return Log.setLogger(new MdaLogger,"mdaLogger"),Log.readLogSettingsFromConfig(),ClientTelemetryLogger.flushPreservedLogs(),Log.traceUnhandledExceptions=!0,DialogInterfaces.setDialogHost(new AzureFxDialogHost.AzureFxDialogHost),exports=DataLab,DataLab}),define("generated/editor/TS/ViewModel/GuidedTour/GuidedTour",["require","exports","../../../TS/View/Bubble/Bubble","../../../DataLabViews/ExperimentView","../../../TS/ViewModel/GuidedTour/GuidedTourUtil","../../../TS/ViewModel/GuidedTour/GuidedExperiment","../../../../DataLabClient/Constants","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s,o,u,a,f,l){var c=function(){function e(){}return e.getOption=function(){var e=this,t=new n.Options("GuidedTour");t.dismissOnScroll=!1,t.dismissOnResize=!1,t.dismissOnClick=!1,t.alwaysShow=!0;var s=t.addStepByJquerySelector(".fxs-drawertaskbar-newbutton",a.guidedTourNewButtonTitle,a.guidedTourNewButtonContent,415,150);s.beforeLoadHandlerAsync=function(t){return e.logGuidedTourStep(1),i.GuidedTourUtil.closeDrawer()};var o=t.addStepByJquerySelector(i.GuidedTourUtil.getBlankExperimentSelector(),a.guidedTourDrawerTitle,a.guidedTourDrawerContent,400,150);o.beforeLoadHandlerAsync=function(t){return e.logGuidedTourStep(2),i.GuidedTourUtil.blankExperimentCardVisible()};var f=t.addStepByJquerySelector("#fxshell-navpane",a.guidedTourMainNavTitle,a.guidedTourMainNavContent,400,150);f.beforeLoadHandlerAsync=function(t){e.logGuidedTourStep(3);var n=$.Deferred();return Shell.UI.Drawer.close(),cdm.currentContext.viewPath==="ViewExperiment"?n.resolve():(r.navigateToExperiment("Draft"),$(document).one("experimentLoaded",function(){var e=!1;i.GuidedTourUtil.waitFor(function(){return e=$(".fxshell-navpane-collapsed").length!==0,e&&n.resolve(),e},function(e){n.resolve()},1e3)})),l.when(n.promise())};var c=t.addStepByJquerySelector(".xe-utilityPanelRoot",a.guidedTourModulesPaneTitle,a.guidedTourModulesPaneContent,400,150);this.addLoggingLoadHandlerToStep(c,4);var h=t.addStepByJquerySelector(".experimentEditorRoot",a.guidedTourCanvasTitle,a.guidedTourCanvasContent,400,150);this.addLoggingLoadHandlerToStep(h,5);var p=t.addStepByJquerySelector(".propertyEditorContainer",a.guidedTourPropertiesPaneTitle,a.guidedTourPropertiesPaneContent,400,150);this.addLoggingLoadHandlerToStep(p,6);if($(".chat-support").is(":visible")){var d=t.addStepByJquerySelector(".chat-support",a.guidedTourChatWindowTitle,a.guidedTourChatWindowContent,400,150);this.addLoggingLoadHandlerToStep(d,7)}var v=a.guidedTourCommandsContent;u.guidedExperimentEnabled()&&(v+=["<br/>","<span class='bubble-content-small'>",a.guidedTourNavigateToExperimentContent,"<a class='start-guided-experiment'>",a.guidedTourClickHere,"</a>","</span>"].join(""));var m=t.addStepByJquerySelector(".fxs-drawercommands-commands-global",a.guidedTourCommandsTitle,v,400,150);return this.addLoggingLoadHandlerToStep(m,8),t},e.logGuidedTourStep=function(e){f.featureUsage({featureID:o.FeatureId["GuidedTourStep"+e],groupID:83})},e.addLoggingLoadHandlerToStep=function(e,t){var n=this;e.beforeLoadHandlerAsync=function(e){return n.logGuidedTourStep(t),l.when(null)}},e.launchGuidedExperiment=function(){n.dismiss(),f.featureUsage({featureID:93,groupID:83}),s.GuidedExperiment.launch()},e.launch=function(){window.__guidedTourActive=!0;var t=$(".fx-dialog");t.get(0)&&t.is(":data(fx-fxDialog)")&&(t.fxDialog("close",document.createEvent("CustomEvent")),delete window.__guidedTourActive);var r=cdm.currentContext.viewPath==="ViewExperiment";window.setTimeout(function(){l.then(n.showAsync(e.getOption()),function(e){if(!r)var t=e.overlayVisible.subscribe(function(){Shell.UI.Drawer.open(),t.dispose()})})});if(u.guidedExperimentEnabled()){var i="#bubble-container .start-guided-experiment";$("body").off("click",i,e.launchGuidedExperiment).on("click",i,e.launchGuidedExperiment)}},e}();t.GuidedTour=c});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/ViewModel/Dialogs/WelcomeBannerViewModel",["require","exports","../../view/StrippedDialog","../../../../DataLabClient/Constants","../../../../DataLabClient/Disposable","../../../../DataLabClient/Features","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u,a,f){function c(){var e=$.Deferred(),t=new n.StrippedDialog,r=new l;t.show(r,ExperimentEditorTemplates._welcomeBannerMarkup,["320px",null]);var s=new i.DisposableSubscription(r.dialogDismissed.subscribe(function(n){t.close(),e.resolve(null),s.dispose(),r.dispose()}));return a.when(e.promise())}var l=function(e){function t(){e.call(this),this.buttonText=o.welcomeBannerButton,this.subTitle=o.welcomeBannerSubtitle,this.selectTooltip=o.welcomeCountryTooltip,this.selectLabel=o.welcomeCountryLabel,this.countryArray=r.CountryList,this.selectedCountry=ko.observable("United States"),this.dialogDismissed=ko.observable(!1),this.setting={key:r.UserPreference.ReceiveEmails,value:ko.observable(!0),description:o.welcomeBannerEmails},s.welcomeBannerShowCountryListEnabled()&&this.selectedCountry("United States")}return __extends(t,e),t.prototype.dismissed=function(){var e=this;u.featureUsage({featureID:208,groupID:0}),this.saveNewSettings().always(function(){e.dialogDismissed(!0)}).fail(function(e){u.error("error saving initial user settings: "+String(e)),a.showErrorNotification({title:o.userSettingsErrorSaving})})},t.prototype.saveNewSettings=function(){var e=[],t=s.welcomeBannerShowCountryListEnabled()?this.selectedCountry():"";return e.push(f.workspace.setPromoEmailPreference(t,this.setting.value())),e.push(f.UserSettingsCache.setValue(r.UserPreference.WelcomeDialogViewed,"true")),a.when.apply(null,e)},t}(i.Disposable);t.drawWelcomeBanner=c}),define("scripts/NavbarRefresher",["jquery","utils","generated/DataLabClient/Features","generated/DataLabClient/Trial"],function(e,t,n,r){function i(e,n,r){var i={requestId:e,url:"/main/navigationbar",authorizationToken:n||"",data:r,dataType:"html"};return t.sendRequest(i)}function s(t){var s={showTimer:n.integrationPoints.AnonymousWorkspace.Enabled&&n.integrationPoints.TrialLimitations.Enabled&&t.TrialTimeLeft>=0,showGuidedTourLink:n.integrationPoints.EnableGuidedTour.Enabled,showChatButton:!0,selectedWorkspaceName:t.Workspace.FriendlyName,selectedRegion:t.SelectedRegion,isMultiGeo:n.integrationPoints.MultiGeoNavigation.Enabled,keyVaultKeyIdentifier:t.Workspace.KeyVaultKeyIdentifier,renderFullNavbar:!0,showUserSettings:n.integrationPoints.UserSettingsDialog.Enabled&&!r.isWorkspaceTypeAnonymous()};return i(t.RequestId,t.AuthorizationToken,s).then(function(n){e(".navbar-wrapper").html(n),e(".nav-workspace-name").html(t.Workspace.FriendlyName)},e.noop)}return{refreshNavbar:s}}),function(e){e.azureMl=e.azureMl||{},e.azureMl.jQueryPluginHelper=function(t,n,r){var i=[];this.each(function(){var s=e(this),o=t.name,u=s.data(o);if(n&&typeof n=="string"){var a=n;if(!u)throw"This is not a valid plugin: "+o;var f=u[a].call(u,r);i.push(f)}else u||(n=n||{},n.element=e(this),u=new t.constructor(n),s.data(o,u)),i.push(u);return i})}}(jQuery),define("jquerypluginhelper",["jquery","jqueryui","bootstrap"],function(){}),function(e){e.azureMl=e.azureMl||{},e.azureMl.HelpSearch=function(t){var n={ENTER:13,UP:38,DOWN:40};t=e.extend({},e.azureMl.HelpSearch.defaultOptions,t);var r=this;this.element=t.element;var i=this.element.find(".search-input"),s=this.element.find(".results"),o=this.element.find("a.mobile-search"),u=this.element.find(".help-search-container .close"),a=this.element.find(".help-search-container");o.on("click",function(e){e.stopPropagation(),a.addClass("open")}),u.on("click",function(){a.removeClass("open")});var f=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:8,remote:{url:t.dataSource,wildcard:"%QUERY",filter:function(n){return e.map(n.QueryResults.slice(0,t.maxResults),function(e){return{provider:e.ProviderInformation,guid:e.GUID,value:e.ModuleName,label:e.ModuleName}})}}});f.initialize(),i.typeahead({highlight:!0},{source:f.ttAdapter(),displayKey:"value",name:"helpSearches",templates:{suggestion:function(e){return'<p><a title="'+e.value+'">'+e.value+"</a></p>"},empty:'<div class="no-results"><p>'+e.azureMl.HelpSearch.defaultOptions.noResultsFoundString+"</p></div>"}}),i.bind("typeahead:selected",function(e,n){var r=t.constructHelpUrl(n,t);window.open(r,"_blank")}),i.on("keypress",function(){t.logSearchTerm(e(this).val())}),this.element.find(".launch-Guided-Tour").click(function(e){e.preventDefault(),t.launchGuidedTour()})},e.azureMl.HelpSearch.defaultOptions={serchResultsString:"Search results for: ",noResultsFoundString:"No Results found.",templates:{header:function(e,t){return[t.serchResultsString,"<span class='searchTerm'>",e,"</span>"].join("")},suggestion:function(e,t){return["<a class='search-link'>",e.label,"</a>"].join("")},empty:function(e){return"<p> "+e.noResultsFoundString+"</p>"}},maxResults:8,referenceHelpContentUrl:"http://msdn.microsoft.com/library/",azureContentUrl:"http://azure.microsoft.com/en-us/documentation/articles/",constructHelpUrl:function(e,t){return t.azureContentUrl&&e.guid.match(/^machine/)?t.azureContentUrl+e.guid:t.referenceHelpContentUrl+e.guid},launchGuidedTour:function(){return!1},logSearchTerm:function(e){return!1}},e.fn.helpSearch=function(t,n){return e.azureMl.jQueryPluginHelper.call(this,{name:"helpSearch",constructor:e.azureMl.HelpSearch},t,n)}}(jQuery),define("helpsearchcontrol",["jquery","jquerypluginhelper","typeahead"],function(){}),function(e){e.azureMl=e.azureMl||{},e.azureMl.FeedbackControl=function(t){function i(){var e=n.textInput.val().length;n.characterCount.text(t.maxCharacters-e);var i=e>0?"removeClass":"addClass";r.find(".submit")[i]("disabled")}var n=this;t=e.extend({},e.azureMl.FeedbackControl.defaultOptions,t);var r=t.element;this.textInput=r.find(".text-input"),this.characterCount=r.find(".count"),this.textInput.attr("maxlength",t.maxCharacters),this.textInput.on({"keyup change":function(){i()},paste:function(){window.setTimeout(function(){i()},1)}}),r.find(".prompt").html(t.strings.whatDidYouLike),r.find("input").on({change:function(){var n=e(this).data("feedback-type"),i=n==="smile"?t.strings.whatDidYouLike:t.strings.whatCanWeImprove;r.find(".prompt").html(i)}}),r.find(".submit").on({click:function(){if(n._submitInProgress)return;n._submitInProgress=!0;var r=n.textInput.val(),s=e(".feedback-type-controls [type=radio]:checked");if(!r&&!s.length)return;var o=e("<div/>").text(r).html(),u={feedback:o,src:"feedbackBox",isHappy:s.data("feedback-type")==="smile"};n.textInput.val(""),u.isHappy||(s.prop("checked",!1),s.parent().removeClass("active"),e(".smile").addClass("active"),e(".smile input").attr("checked","checked")),i(),t.sendFeedbackHandler&&typeof t.sendFeedbackHandler=="function"&&t.sendFeedbackHandler(u),delete n._submitInProgress}})},e.azureMl.FeedbackControl.defaultOptions={maxCharacters:1e3},e.fn.feedbackControl=function(t,n){return e.azureMl.jQueryPluginHelper.call(this,{name:"feedbackControl",constructor:e.azureMl.FeedbackControl},t,n)}}(jQuery),define("feedbackcontrol",["jquery","jquerypluginhelper"],function(){}),function(e){e.azureMl=e.azureMl||{},e.azureMl.WorkspaceControl=function(t){function i(){var e=n.$locationSelect.val(),r=[];t.getWorkspacesInRegion&&typeof (t.getWorkspacesInRegion==="function")&&(n.$resultsList.html('<li class="loading-li"><div class="loading-img"><img src="../../Content/Images/NavigationBar/icon-status-status-dots-anim-16.gif" /></div><div class="loading-message"><span>'+t.strings.loading+"</span></div></li>"),t.getWorkspacesInRegion(e,function(t){r=t.map(function(t){return{Text:t.FriendlyName,Url:n.regionToUri[e]+"/Home/ViewWorkspace/"+t.WorkspaceId,Class:t.WorkspaceId,KeyVaultKeyIdentifier:t.KeyVaultKeyIdentifier,Type:t.Type}}).sort(function(e,t){return e.Text>t.Text?1:e.Text<t.Text?-1:0}),s(r)}))}function s(r){var i=[];e.each(r,function(e,n){var r=t.selectedWorkspaceId===n.Class||t.selectedWorkspaceName===n.Text?" active":"",s='<div class="encrypt-status-icon">'+(n.KeyVaultKeyIdentifier?'<img src="../../Content/Images/NavigationBar/icon-workspace-status-encrypted.svg" />':"")+"</div>";i.push('<li class="workspace-'+n.Class+" link"+r+'">'+'<a href="'+n.Url+'">'+'<div class="centering-div" title="'+a(n.Text)+'">'+s+'<div class="workspace-name">'+a(n.Text)+"</div>"+'<div class="workspace-type"> '+a(u(n.Type))+"</div>"+"</div></a></li>")});var s=i.length?i.join(" "):'<li class="loading-li"><div class="empty-message">'+t.strings.emptyMessageLine1+'</div><br/><br/><div class="empty-message">'+t.strings.emptyMessageLine2+"</div></li>";n.$resultsList.html(s)}function o(){var r=[];t.getRegions&&typeof (t.getRegions==="function")&&t.getRegions(function(i){e.each(i,function(e,i){n.regionToUri[i.Region]=i.uri;var s=t.selectedRegion===i.Region?"selected":"";r.push('<option value="'+i.Region+'" '+s+">"+i.Region+"</option>")})}),n.$locationSelect.html(r.join(" "))}function u(e){switch(e){case"Anonymous":return"Guest";case"Free":return e;case"PaidStandard":case"PaidPremium":case"Production":return"Standard";default:return e}}function a(e){return e.replace(/'/g,"&#39;").replace(/\"/g,"&quot;")}var n=this;t=e.extend({},e.azureMl.WorkspaceControl.defaultOptions,t);var r=t.element;this.$locationSelect=r.find(".location-select"),this.$resultsList=r.find(".results-list"),r.find(".location-select-label").html(t.strings.filterByRegion),r.find(".results-list-label").html(t.strings.availableWorkspaces),this.regionToUri={},this.$locationSelect.on("change",function(){i()}),o(),i()},e.azureMl.WorkspaceControl.defaultOptions={strings:{filterByRegion:"REGION:",availableWorkspaces:"WORKSPACE:",emptyMessageLine1:"No workspaces found.",emptyMessageLine2:"Select another region.",loading:"Loading"}},e.fn.workspaceControl=function(t,n){return e.azureMl.jQueryPluginHelper.call(this,{name:"workspaceControl",constructor:e.azureMl.WorkspaceControl},t,n)}}(jQuery),define("workspacecontrol",["jquery","jquerypluginhelper"],function(){}),function(e){e.azureMl=e.azureMl||{},e.azureMl.TimerControl=function(t){function i(){var e=parseInt((r-new Date)/1e3);return Math.max(e,0)}function s(e){t.roundUp&&(e+=59);var n=parseInt(e/3600);e%=3600;var r=parseInt(e/60);return("0"+n).slice(-2)+":"+("0"+r).slice(-2)}function l(){var e=i();e<=a&&(t.reminderCallback.call(n,e),a=u<t.reminderIntervals.length?t.reminderIntervals[++u]:Math.max),o.html(s(e)),e<=0&&(window.clearInterval(f),f=undefined,t.timerExpiredCallback.call(n))}function c(){u=0,a=t.reminderIntervals[u],f=window.setInterval(l,1e4)}var n=this;t=e.extend({},e.azureMl.TimerControl.defaultOptions,t);var r=new Date;r.setSeconds(r.getSeconds()+t.timeLeftInSeconds);var o=t.element.find(".count-down"),u=0,a,f;this.extendTrial=function(e){if(e>t.maxExtendIntervalInSeconds)throw"Anonymous trial can't be extended for more thant "+t.maxExtendIntervalInSeconds+" seconds";r.setSeconds(r.getSeconds()+e),c()},o.html(s(i())),c()},e.azureMl.TimerControl.defaultOptions={timeLeftInSeconds:120,reminderIntervals:[75,60,30],reminderCallback:function(e){},timerExpiredCallback:function(){},maxExtendIntervalInSeconds:7200,roundUp:!1},e.fn.timerControl=function(t,n){return e.azureMl.jQueryPluginHelper.call(this,{name:"timerControl",constructor:e.azureMl.TimerControl},t,n)}}(jQuery),define("timercontrol",["jquery","jquerypluginhelper"],function(){}),function(e){e.azureMl=e.azureMl||{},e.azureMl.NavigationBarControl=function(t){function l(){return f?!1:(f=!0,setTimeout(function(){f=!1}),!0)}var n=t.element,r=n.find(".site-link-"+(t.site||"home"));r.addClass("active"),r.find("a").on("click",function(e){e.preventDefault(),e.stopPropagation()});var i=n.find(".waffle-btn");n.find(".search-bar-toggle").click(function(){i.removeClass("open"),n.toggleClass("in-search")}),n.find(".search-bar-close").click(function(){n.removeClass("in-search")});var s=n.find(".top-nav-search-input");n.find(".top-nav-search-submit").click(function(){searchText=s.val().trim(),window.location.href="/browse"+(searchText?"?s="+encodeURIComponent(searchText):"")}),n.find(".feedback").feedbackControl(t.feedbackControlOptions),n.find(".help-search").helpSearch(t.helpSearchControlOptions),n.find(".timer").timerControl(t.timerControlOptions),n.find(".workspace-locations").length!==0?n.find(".workspace-switcher").workspaceControl(t.workspaceControlOptions):t.workspaceControl&&t.workspaceControl.selectedWorkspaceId&&e(".workspace-"+t.workspaceControl.selectedWorkspaceId).addClass("active");if(t.userControl&&t.userControl.cid){var o=["//cid-",t.userControl.cid,".users.storage.live.com/users/0x",t.userControl.cid,"/myprofile/expressionprofile/profilephoto:UserTileStatic,UserTileMedium,Win8Static"].join(""),u=new Image;u.onload=function(){e(".user-info .profile-pic").attr("src",o)},u.src=o}var a=!0,f=!1;n.find(".form-element,.no-dropdown-close").on({click:function(){l()&&(a=!1)}}),n.find(".no-dropdown-close a:not([data-toggle]),.closeButton").on({click:function(){l()&&(a=!0)}}),i.find("a[data-toggle]").click(function(e){l()&&(a=!1)}),i.on({"hide.bs.dropdown":function(e){var t=a;return a=!0,t}}),n.on({"hide.bs.dropdown":function(e){var t=a;return a=!0,t}}),n.find(".navbar-nav.non-collapsing-navbar > .dropdown > a[data-toggle=dropdown]").on({click:function(){n.find("button.navbar-toggle").is(":visible")&&n.find(".navbar-collapse.in").collapse("hide")}})},e.azureMl.NavigationBarControl.DefaultOptions={},e.fn.navigationBarControl=function(t,n){return e.azureMl.jQueryPluginHelper.call(this,{name:"navigationBarControl",constructor:e.azureMl.NavigationBarControl},t,n)}}(jQuery),define("navigationbarcontrol",["helpsearchcontrol","feedbackcontrol","workspacecontrol","timercontrol"],function(){}),define("generated/editor/TS/ViewModel/Dialogs/UserSettingsDialogViewModel",["require","exports","../../View/DialogViewFactories","../../../../DataLabClient/Constants","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util","../../../../DataLabClient/Model/Workspace"],function(e,t,n,r,i,s,o,u){function l(){s.info("User settings dialog opened");var e=new f,t=new n.UserSettings(e);t.show(),Shell.UI.Spinner.show(),e.loadSettings().always(function(){Shell.UI.Spinner.hide()}).fail(function(e){s.error("error loading user settings: "+String(e)),o.showErrorNotification({title:i.userSettingsErrorLoading}),t.close()}),s.featureUsage({featureID:203,groupID:0})}var a={receiveEmails:r.UserPreference.ReceiveEmails,showTourAtStart:r.UserPreference.ShowTourAtStart},f=function(){function e(){this.settings=[{key:a.showTourAtStart,value:ko.observable(!1),description:i.userSettingsShowTour}]}return e.prototype.dismissed=function(e){e.accepted?(s.info("User settings dialog accepted"),s.featureUsage({featureID:204,groupID:0}),Shell.UI.Spinner.show(),this.saveNewSettings().always(function(){Shell.UI.Spinner.hide()}).fail(function(e){s.error("error saving user settings: "+String(e)),o.showErrorNotification({title:i.userSettingsErrorSaving})})):(s.info("User settings dialog cancelled"),s.featureUsage({featureID:205,groupID:0}))},e.prototype.loadSettings=function(){var e=[];return this.settings.forEach(function(t){var n=u.UserSettingsCache.getValue(t.key);n.done(function(e){t.value(e==="true")}),e.push(n)}),o.when.apply(null,e)},e.prototype.saveNewSettings=function(){var e=[];return this.settings.forEach(function(t){e.push(u.UserSettingsCache.setValue(t.key,String(t.value())))}),o.when.apply(null,e)},e}();t.UserSettingsDialogViewModel=f,t.openUserSettingsDialog=l}),define("scripts/app",["jquery","datalabext","generated/DataLabClient/Constants","generated/DataLabClient/Features","generated/DataLabClient/LocalizedResources","generated/DataLabClient/Logging/Logging","generated/DataLabClient/Logging/Performance","generated/DataLabClient/Trial","generated/DataLabClient/Util","generated/DataLabClient/Model/Workspace","generated/editor/TS/View/ChatControl","generated/editor/TS/View/Bubble/UserSettings","generated/editor/TS/ViewModel/GuidedTour/AnimatedExperiment","generated/editor/TS/ViewModel/GuidedTour/GuidedTour","generated/editor/TS/ViewModel/Dialogs/TrialDialogs","generated/editor/TS/ViewModel/Dialogs/WelcomeBannerViewModel","scripts/NavbarRefresher","utils","uxfximpl","navigationbarcontrol","auth-mgr"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){function w(t){if(t===undefined||t===null)return"";var n=e("<div />");return n.text(t).html()}function E(t){var o={site:"studio",userControl:{cid:window.accessControlCid},workspaceControlOptions:{selectedWorkspaceId:t.UserWorkspace.Workspace.WorkspaceId,selectedWorkspaceName:t.UserWorkspace.Workspace.FriendlyName,selectedRegion:t.MultiGeoRegion,getRegions:function(e){var n=[],r=t.MultiGeoRegionsList;for(var i=0;i<r.length;i++){var s=r[i].split(";");n.push({Region:s[0],uri:s[1]})}e&&e(n)},getWorkspacesInRegion:function(e,r){if(r){s.featureUsage({featureID:n.FeatureId.MultiGeoListWorkspaces,groupID:n.FeatureId.MultiGeo,data:e});var i=t.FeatureSwitches.EnableArmWorkspaceSharing.Enabled,o=null,u=f.workspace.listUserWorkspacesAsync(e,i);i==1?o="Failed call to listUserWorkspacesIncludingMRU":o="Failed call to listUserWorkspaces",u.done(function(e,t,n){e.forEach(function(e){e.FriendlyName=w(e.FriendlyName)}),r(e)}),u.fail(function(e,t,n){r([]),s.exception(e.error.message,o)})}},getWorkspaceInRegionErrorHandler:function(e){},strings:{filterByRegion:i.workspaceSelectorRegionSelectorLabel,availableWorkspaces:i.workspaceSelectorAvailableWorkspaces,emptyMessageLine1:i.workspaceSelectorEmptyResult1,emptyMessageLine2:i.workspaceSelectorEmptyResult2,loading:i.workspaceSelectorLoadingMessage}},feedbackControlOptions:{strings:{whatDidYouLike:i.whatDidYouLike,whatCanWeImprove:i.whatCanWeImprove},sendFeedbackHandler:function(e){s.feedbackInfo(JSON.stringify(e),undefined),s.featureUsage({featureID:n.FeatureId.SendFeedback,groupID:n.FeatureId.Feedback,data:JSON.stringify({isHappy:e.isHappy})})}},helpSearchControlOptions:{searchResutlsString:i.navbarHelpSearchResultsLabel,noResultsFoundString:i.navbarHelpSearchNoResults,dataSource:window.environment.esServiceBaseUrl+"/api/helpsearch/search?query=%QUERY",referenceHelpContentUrl:t.ReferenceDocsBaseUrl,launchGuidedTour:function(){r.animatedTourEnabled()?(s.featureUsage({featureID:n.FeatureId.AnimatedExperimentOpenFromNavigationBar,groupID:n.FeatureId.AnimatedExperiment}),h.AnimatedExperiment.launch()):(s.featureUsage({featureID:n.FeatureId.GuidedTourOpenFromNavigationBar,groupID:n.FeatureId.GuidedTour}),p.GuidedTour.launch())},logSearchTerm:function(e){b&&clearTimeout(b),b=setTimeout(function(){s.featureUsage({featureID:n.FeatureId.HelpSearched,groupID:n.FeatureId.Help,data:e})},400)}}};t.TrialTimeLeft>=0&&(o.timerControlOptions={timeLeftInSeconds:t.TrialTimeLeft/1e3,reminderIntervals:[],reminderCallBack:e.noop,timerExpiredCallback:function(){d&&d.showExpiredTrialDialog&&d.showExpiredTrialDialog()},maxExtendIntervalSeconds:0,roundUp:!0}),e(".navbar").navigationBarControl(o),r.chatSupportEnabled()&&l.initChatControl(),e("#navbar-user-settings").click(function(e){e.preventDefault(),require(["generated/editor/TS/ViewModel/Dialogs/UserSettingsDialogViewModel"],function(e){e.openUserSettingsDialog()})})}function S(){if(r.animatedTourEnabled()){var t=new c.LocalStorageUserSettings;(t.shouldShowBubble("AnimatedExperiment")||t.shouldShowBubble("RetirementNotification"))&&!window.__unpacking&&(s.featureUsage({featureID:n.FeatureId.AnimatedExperimentOpenFromIntro,groupID:n.FeatureId.AnimatedExperiment}),h.AnimatedExperiment.launch(!1)),t.shouldShowBubble("RetirementNotification")||e("#retirement-messagebar").css("display","flex")}else{var i={extension:DataLabViews.experimentExtensionName,template:"IntroVideo",data:{source1:"//go.microsoft.com/fwlink/?LinkID=518038",source2:"//go.microsoft.com/fwlink/?LinkID=518099",width:960,height:540,guidedTourLinkVisibility:r.guidedTourEnabled()?"block":"none"},size:["auto","auto"],okOrClose:function(){window.__guidedTourActive||Shell.UI.Drawer.open()}};Shell.UI.DialogPresenter.show(i)}}function x(){var e=!!(window.location.search&&window.location.search.indexOf("unpackConfirmation=true")>=0);r.animatedTourEnabled()?!e&&window.location.hash.indexOf("ViewExperiment")===-1&&S():t.isFirstTimeVisit()&&!e&&S(),f.workspace.initialIntroMessageComplete.resolve()}function T(){sessionLogger.logSessionInfo(),y.UserWorkspace.Workspace.FriendlyName=w(y.UserWorkspace.Workspace.FriendlyName);var l=t.setWorkspaceContext(y.UserWorkspace.Workspace.WorkspaceId,y.UserWorkspace.Workspace.FriendlyName,y.UserWorkspace.User,y.SecurityToken);r.enableFrictionFreeUserExperienceEnabled()&&(t.setUser(y.UserWorkspace.User),t.checkIsFirstTimeVisit(),t.setVisited(!0)),r.trialLimitationsEnabled()&&u.setUsageLimits({maxModuleCount:y.MaximumModuleCount,restrictedModules:y.RestrictedModules,timeLimit:y.TrialTimeLimit,moduleRunTimeLimit:y.ModuleRunTimeLimit,storageLimit:y.StorageLimit,maxDatasetUploadSize:y.MaxDatasetUploadSize}),Shell.Diagnostics.Telemetry.customEvent("Initialize","UserIdentified"),Exp.Drawer.initialize("#drawer"),a.setSessionId(Shell.Environment.getPageRequestId()),o.logNavigationTiming();var c=e.Deferred();Shell.Internal.initialize({extensionProviders:[]}).then(function(){c.resolve()},function(){c.reject()});var h=a.when(c);h.then(function(){function l(){var e=Shell.UI.Navigation.currentLocation(),t=e&&e.extension;t&&t!==a&&(a=t,Shell.UI.Drawer.Menu.selectPath(Exp.Drawer.getMenuPathBasedOnExtension(t)))}Shell.Internal.start(function(){s.timerStart("cdm.initialize.requestAllDataSets"),Exp.Data.internal.requestAllDataSets(function(){s.timerStopAndLog("cdm.initialize.requestAllDataSets","Initial data fetch:")}),Shell.UI.Navigation.navigate(window.location.hash),t.applicationReady=!0}),Exp.Drawer.addExtensionMenuItems();var o=new Shell.UI.Drawer.Menu.ActionMenuItem("Datasets",i.dataset,"UploadDatasetMenuItem",i.uploadDatasetFromLocalFile,fx.resources.oneTransparentPixel,i.uploadDatasetMenuDescription,function(){Exp.Drawer.close(),t.showUploadDatasetDialog()});Exp.Drawer.addMenuItem(o);if(!r.modulesListEnabled()&&r.newCustomModuleUploadEnabled()){var u=new Shell.UI.Drawer.Menu.ActionMenuItem("Modules","Module","UploadCustomModulePackageMenuItem",i.uploadModuleFromZip,fx.resources.getContentUrl("/Content/Modules/Modules.png"),i.uploadModuleMenuDescription,function(){Exp.Drawer.close(),t.showUploadCustomModulePackageDialog()});Exp.Drawer.addMenuItem(u)}Shell.UI.Drawer.Menu.selectPath("NewExperimentMenuItem"),Exp.Drawer.setDefaultMenuPath("NewExperimentMenuItem");var a=null;window.addEventListener("hashchange",l,!1),Impl.UI.Dialogs.ModalPresenter.initialize("body");var c=e(".fxs-headerbar-avatarbar .fxs-avatarbar-image"),h=window.userLiveCid;if(c.length>0&&h){var p="//cid-"+h+".users.storage.live.com/users/0x"+h+"/myprofile/expressionprofile/profilephoto:UserTileStatic,UserTileMedium,Win8Static",d=new Image;d.onload=function(){c.css({"background-image":'url("'+p+'")',"background-size":"contain"})},d.src=p}r.enableFrictionFreeUserExperienceEnabled()?y.UserWorkspaceType!=="Anonymous"&&r.welcomeBannerForEmailEnabled()?f.UserSettingsCache.getValue(n.UserPreference.WelcomeDialogViewed).done(function(e){e!=="true"?v.drawWelcomeBanner().done(function(){x()}):x()}):x():f.workspace.initialIntroMessageComplete.resolve(),t.showNotificationsForPendingUploadsWhenReady()}).fail(function(e){throw t.applicationReady=!0,s.exception(e,"Application initialization failed"),e});if(!window.getRefreshedWorkspaceModel)E(y);else{var p=window.getRefreshedWorkspaceModel(),d={RequestId:window.environment.pageRequestId,AuthorizationToken:p.AuthorizationToken,TrialTimeLeft:y.TrialTimeLeft,Workspace:y.UserWorkspace.Workspace,SelectedRegion:y.UserWorkspace.Workspace.Region};m.refreshNavbar(d).then(function(){E(y)},function(){throw new Error("navbar refreshing failed")})}Shell.Diagnostics.Telemetry.featureUsageEx("5012","studioloaded","5001","studio",y.UserWorkspace.Workspace.WorkspaceId)}var y=null,b=null;return e("#workspaceModelData").length!==0&&(y=JSON.parse(e("#workspaceModelData").text())),g.refreshWorkspaceModel(y),Shell.UI.Spinner.show(),{initialize:T}}),ko.bindingHandlers.attrWithNamespace={init:function(e,t){},update:function(e,t){var n=ko.utils.unwrapObservable(t());for(var r in n){var i=n[r],s=r.split(":");if(s.length===2){var o=e.lookupNamespaceURI(s[0]);e.setAttributeNS(o,s[1],ko.utils.unwrapObservable(i))}else{if(!(s.length<2))throw new Error("Found key has multiple ':' and thus is not a valid fully qualified XML attribute ");e.setAttribute(s[0],ko.utils.unwrapObservable(i))}}}},define("generated/editor/TS/View/CustomBindingHandlers/AttrWithNamespace",function(){}),define("generated/editor/TS/View/CustomBindingHandlers/AutocompleteHandler",["require","exports","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util","../../../../DataLabClient/UtilString"],function(e,t,n,r,i){var s=1e3,o=function(e){return $(e).data("ui-autocomplete")},u=function(e,t){var i=function(){$.contains(document.documentElement,e)&&$(e).blur()},u=function(){return o(e)},a=ko.utils.unwrapObservable(t)().array,f,l=!1;u()&&$(e).autocomplete("destroy");var c=!1,h,p=ko.utils.unwrapObservable(t)(),d="allowAnyEntry"in p?p.allowAnyEntry():!1,v=$(e).autocomplete({columnSelectorSelectionMade:!1,search:function(){if(e!==Shell.Utilities.getDocumentActiveElement())return!1},source:function(e,t){var i=$.ui.autocomplete.filter(a,e.term);c=!e.term;if(i.length>s){var o=i.length-s;i.length=s,f=r.formatWithPluralOption(o,n.autocompleteTruncatedWarningLabelSingular,n.autocompleteTruncatedWarningLabelPlural);if(typeof i[0]=="string")i.push(f);else{var u={label:f,value:f};i.push(u)}}t(i)},minLength:0,allowAnyEntry:d,select:function(n,r){if(f&&r.item.value===f)return l=!0,n.preventDefault(),!1;var i=ko.utils.unwrapObservable(t)().dependentObservable;i&&i(r.item.value);if(n.target.classList[0]==="itemTextBoxInput"){var s=r.item.value;r.item.value="",setTimeout(function(){r.item.value=s},0),$(e).val(""),this.columnSelectorSelectionMade=!0,$(this).focus()}},open:function(){var t=$(e).autocomplete("widget");t.css("bottom","");var n=t.offset().top+t.outerHeight(!1),r=$(".experiment-container").first();if(r.length>0){var s=r.offset().top+r.outerHeight(!1);if(n>s){var o=$(window).height()-s;t.css("bottom",o)}}$(window).unbind("resize",i),$(window).one("resize",i)},close:function(e,t){this.columnSelectorSelectionMade&&(this.columnSelectorSelectionMade=!1,$(this).focus()),$(window).unbind("resize",i)}}),m=u(),g=m.close;m.close=function(e){l?(l=!1,e.preventDefault(),e.stopImmediatePropagation()):g.apply(this,arguments)};var y=m._suggest,b=!1;m._suggest=function(e){var t=c&&b;b=c;if(t){var n=this.menu.element;this.isNewMenu=!0,this.menu.refresh(),n.show(),n.position($.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()}else y.apply(this,arguments)},m._renderMenu=function(e,t){var n=this;c?(h||(h=document.createDocumentFragment(),$.each(t,function(e,t){n._renderItemData($(h),t)})),$(h).clone(!0).appendTo(e)):$.each(t,function(t,r){n._renderItemData(e,r)}),c=!1}};ko.bindingHandlers.autocomplete={init:function(e,t){u(e,t)}},ko.bindingHandlers.columnPickerAutocomplete={init:function(e,t){function r(){$(e).autocomplete("search")}function s(t){if(t.which===13){var r=i.getArrayFromCommaSeparatedString($(e).val());r.forEach(function(e){n.option().source({term:e},function(t){if(n.option().allowAnyEntry)n._trigger("select","autocompleteselect",{item:{value:e}});else if(r.length===1&&t.length>0){var i=t[0].label||t[0].value||t[0];n._trigger("select","autocompleteselect",{item:{value:i}})}else{var s=null,o=null,u=e.toLowerCase();t.some(function(t){return t=t.label||t.value||t,!o&&u===t.toLowerCase()&&(o=t),e===t?(s=t,!0):!1}),s=s||o,s&&n._trigger("select","autocompleteselect",{item:{value:s}})}})})}}u(e,t),$(e).autocomplete("widget").addClass("columnPickerAutocomplete");var n=o(e);n._renderItem=function(e,t){var n=document.createTextNode(t.label),r=document.createElement("a"),i=document.createElement("li"),s=n;return t.isInaccurate&&(s=document.createElement("i"),s.appendChild(n)),r.appendChild(s),i.appendChild(r),e.get(0).appendChild(i),$(i).data("item.autocomplete",t)},$(e).autocomplete().on("focus",r).on("keydown",s),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){e&&o(e)&&($(e).off("focus",r),$(e).off("keydown",s),$(e).autocomplete("destroy"),e=null,n=null)})}}}),define("generated/editor/TS/View/CustomBindingHandlers/Balloon",["require","exports","../../../TS/View/Balloon"],function(e,t,n){ko.bindingHandlers.hoverBalloon={init:function(e,t){function i(e){n.hide(this)}function s(e){var r=t(),i=ko.utils.unwrapObservable(r.message);i&&n.show(i,this)}$(e).off("mouseover focus",s),$(e).off("mouseout blur",i),$(e).on("mouseover focus",s),$(e).on("mouseout blur",i);var r=t();if(r.forceBalloon)var o=r.forceBalloon.subscribe(function(){var t=ko.utils.unwrapObservable(r.message);n.show(t,e)});ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).off("mouseover focus",s),$(e).off("mouseout blur",i),o&&o.dispose(),n.hide(e),e=null})}},ko.bindingHandlers.balloon={init:function(e,t){},update:function(e,t){var r=t(),i=ko.utils.unwrapObservable(r.message);i?n.show(i,e):n.hide(e)}}}),define("generated/editor/TS/View/CustomBindingHandlers/CheckboxValue",["require","exports"],function(e,t){ko.bindingHandlers.checkboxvalue={init:function(e,t){var n=t().value,r=t().choices;e.checked=n()===r()[0].value,e.addEventListener("change",function(t){n(e.checked?r()[0].value:r()[1].value)})},update:function(e,t){var n=ko.utils.unwrapObservable(t().value),r=ko.utils.unwrapObservable(t().choices);e.checked=n===r[0].value}}});var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("generated/editor/TS/View/CustomBindingHandlers/CollapseResizeManager",["require","exports","../../../TS/Common/MouseCapture","../../../../DataLabClient/Disposable","../../../../DataLabClient/TestMessaging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){var o;(function(e){e.Minimized="minimized",e.Maximized="maximized",e.Minimizing="minimizing",e.Maximizing="maximizing"})(o||(o={}));var u=function(e){function t(t,n,r){e.call(this),this.containerElement=t,this.resizeIsInitialized=!1,this.collapseIsInitialized=!1,this.jQueryCollapseIsInitialized=!1;if(!r)throw new Error("Must define an id for collapse and resize bindings.");this.id=r;switch(n){case"top":case"left":this.resizeDirection=-1;break;case"bottom":case"right":this.resizeDirection=1;break;default:throw new Error("location must be 'top,' 'bottom,' 'left,' or 'right.'")}switch(n){case"top":case"bottom":this.resizeDimension="height",this.mouseDimension="clientY";break;case"left":case"right":this.resizeDimension="width",this.mouseDimension="clientX";break;default:throw new Error("location must be 'top,' 'bottom,' 'left,' or 'right.'")}this.expandedSize=$(t)[this.resizeDimension](),this.direction=n}return __extends(t,e),t.prototype.initForResize=function(e,t){var r=this;if(this.resizeIsInitialized)throw new Error("Resize is already initialized on this element.");this.minSize=e,this.maxSize=t;var i=null,s=null,o=document.createElement("div"),u="resize "+this.direction;o.setAttribute("class",u),this.containerElement.appendChild(o);var a=function(e){e.stopPropagation(),e.preventDefault(),s=e[r.mouseDimension],i=$(r.containerElement)[r.resizeDimension]()},f=function(e){e.stopPropagation(),e.preventDefault();var t=e[r.mouseDimension],n=r.resizeDirection*(t-s);n=Math.min(r.maxSize,Math.max(r.minSize,i+n));var o=null;o||(o=requestAnimationFrame(function(){r.resize(n),o=null}))},l=function(e){e.stopPropagation(),e.preventDefault()};o.addEventListener("mousedown",a),this.registerForDisposal(new n.MouseCapture(o,f,l)),this.resizeIsInitialized=!0;var c=this.resizeState?this.resizeState:e;this.resize(c)},t.prototype.initForCollapse=function(e,t,n){var r=this;if(this.jQueryCollapseIsInitialized)throw new Error("Already using jQueryCollapse. Can't use collapse.");if(this.collapseIsInitialized)throw new Error("Collapse is already initialized for this element.");this.collapsed=e,this.collapsedSize=t,this.openCloseAnimationEnded=n,this.updateCollapsedState(),this.resizeDimension==="height"?$(this.containerElement).addClass("transitionHeight"):$(this.containerElement).addClass("transitionWidth"),$(this.containerElement).addClass(e()?"minimized":"maximized");var s=function(e){var t;e.stopPropagation();if(e.target!==e.currentTarget)return;if($(r.containerElement).hasClass(o.Minimizing))t=o.Minimized;else{if(!$(r.containerElement).hasClass(o.Maximizing))throw new Error("Drawer is in an unexpected state");t=o.Maximized}r.setDrawerClass(t),n&&n.notifySubscribers(t),i.postMessage({type:i.Constants.AnimationComplete})};this.containerElement.addEventListener("webkitTransitionEnd",s),this.containerElement.addEventListener("transitionend",s),this.containerElement.addEventListener("MSTransitionEnd",s),this.collapseIsInitialized=!0,this.collapseState!==null&&this.collapsed(this.collapseState)},t.prototype.initForJQueryCollapse=function(e,t,n){if(this.collapseIsInitialized)throw new Error("Already using collapse. Can't use jQueryCollapse.");if(this.jQueryCollapseIsInitialized)throw new Error("JQueryCollapse is already initialized for this element.");this.collapsed=e,this.openCloseAnimationEnded=n,this.collapseElement=t?this.containerElement.querySelector(t):this.containerElement,this.jQueryCollapseIsInitialized=!0,this.collapseIsInitialized=!0,this.collapseState!==null&&this.collapsed(this.collapseState),this.lastExpandStateWasCollapsed=e(),this.collapsed()&&(this.collapseElement.style.display="none"),$(this.containerElement).addClass(e()?"minimized":"maximized")},t.prototype.resize=function(e){if(!this.resizeIsInitialized)throw new Error("Tried to resize an uninitialized CollapseResizeManager");(!this.collapseIsInitialized||this.collapseIsInitialized&&!this.collapsed())&&e>=this.minSize&&e<=this.maxSize&&(this.expandedSize=e,this.containerElement.style[this.resizeDimension]=e+"px"),this.resizeState=e},t.prototype.updateJQueryCollapsedState=function(){var e=this;if(this.lastExpandStateWasCollapsed!==this.collapsed()){this.setDrawerClass(this.collapsed()?o.Minimizing:o.Maximizing);var t=this.collapsed();$(this.collapseElement).slideToggle(400,function(){e.setDrawerClass(t?o.Minimized:o.Maximized),e.openCloseAnimationEnded&&e.openCloseAnimationEnded.notifySubscribers(t?o.Minimized:o.Maximized),i.postMessage({type:i.Constants.AnimationComplete})}),this.lastExpandStateWasCollapsed=t,this.collapseState=t}},t.prototype.updateCollapsedState=function(){this.lastExpandStateWasCollapsed!==this.collapsed()&&(this.collapsed()?(this.setDrawerClass(o.Minimizing),this.containerElement.style[this.resizeDimension]=this.collapsedSize+"px"):(this.setDrawerClass(o.Maximizing),this.containerElement.style[this.resizeDimension]=this.expandedSize+"px"),this.lastExpandStateWasCollapsed=this.collapsed(),this.collapseState=this.collapsed())},Object.defineProperty(t.prototype,"resizeState",{get:function(){return JSON.parse(t.sessionStorage.getItem("Resize_"+this.id))},set:function(e){t.sessionStorage["Resize_"+this.id]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collapseState",{get:function(){return JSON.parse(t.sessionStorage.getItem("Collapse_"+this.id))},set:function(e){t.sessionStorage["Collapse_"+this.id]=e},enumerable:!0,configurable:!0}),t.prototype.setDrawerClass=function(e){$(this.containerElement).removeClass("minimized maximized minimizing maximizing"),$(this.containerElement).addClass(e)},t.sessionStorage=Shell.Utilities.isLocalStorageAvailable()?sessionStorage:s.sessionStorage,t}(r.Disposable);t.CollapseResizeManager=u}),define("generated/editor/TS/View/CustomBindingHandlers/Collapse",["require","exports","../../../TS/View/CustomBindingHandlers/CollapseResizeManager","../../../../DataLabClient/Disposable"],function(e,t,n,r){ko.bindingHandlers.collapse={init:function(e,t){var i=e.querySelector(t().collapseButtonSelector);if(!i)throw new Error("Could not find collapse button with selector '"+t().collapseButtonSelector+".'");i.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t().collapsed(!t().collapsed())});if(typeof t().collapsed!="function")throw new Error("Required binding parameter 'collapsed' is undefined or not an observable.");if(t().collapsedSize===undefined||t().collapsedSize===null)throw new Error("Required binding parameter 'collapsedSize' is undefined.");if(!e.collapseResizeManager)e.collapseResizeManager=new n.CollapseResizeManager(e,t().collapseFrom,t().id),r.Disposable.exemptFromDiposablesInContextAssertion(e.collapseResizeManager),e.collapseResizeManager.initForCollapse(t().collapsed,t().collapsedSize,t().animationEnded),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){e.collapseResizeManager.dispose()});else{var s=e.collapseResizeManager;if(t().id!==s.id)throw new Error("When using collapse with other bindings, the 'id' fields must match");if(s.direction!==t().collapseFrom)throw new Error("When using resize and collapse together, 'collapseFrom' must equal resize's 'location'");s.initForCollapse(t().collapsed,t().collapsedSize,t().animationEnded)}},update:function(e,t){var n=e.collapseResizeManager;n.updateCollapsedState()}}}),define("generated/editor/TS/View/CustomBindingHandlers/ColumnPickerRuleDisplay",["require","exports","../../../TS/ViewModel/ExperimentEditor/ColumnPickerViewModel","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Logging/Logging","../../../../DataLabClient/Util"],function(e,t,n,r,i,s){function o(e){var t=n.RuleType.findRule(e.ruleType,e.exclude),r=t.name;t.exclude&&t.id!=="AllColumns"?r="Exclude "+r:r=r.charAt(0).toUpperCase()+r.substr(1);var i='<span class="columnPickerRuleDisplayRuleName">'+r+"</span>";return t.id==="AllColumns"||t.id==="Features"||t.id==="Labels"||t.id==="Scores"?i:t.id==="ColumnTypes"?i+": "+e.columnTypes.join()+", "+e.columnKinds.join():i+": "+s.encodeAsHtml(e.columns.join())}ko.bindingHandlers.columnPickerRuleDisplay={init:function(e,t){},update:function(e,t){var s=ko.utils.unwrapObservable(t()),u='<span class="columnPickerRuleDisplayHeader">'+r.selectToolRulesDisplayLabel+"</span>";$(e).html(u);var a=[];if(s&&s.length!==0)try{var f=n.ColumnPickerViewModel.parseRules(s,function(e,t){a.push(o(e))})}catch(l){i.exception(l,"Failed to parse column picker rules JSON when attempting rule display.")}a.length>0?$(e).html(u+"<br>"+a.join("<br>")):$(e).html(u+"<br>"+r.launchSelectionToolToMakeSelection+"<br>")}}}),define("generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Boxplot",["require","exports","../../../../TS/View/CustomBindingHandlers/D3Graphing/D3Common"],function(e,t,n){function r(e,t,r,i,s,o,u,a,f){var l=r.index,c=i.func,h,p=t.records;if(a){h=a.records[l][1];if(!h)return}else{var d=p.map(function(e){return c(parseFloat(e[l]))}),v=function(e,t,n){return isFinite(n[t])},m=d.filter(v);h=n.D3Graph.BoxplotLayout(m)}var g=h.outliers.concat([h.whiskerBottom,h.whiskerTop]),y=d3.min(g),b=d3.max(g),w=u/2,E=u,S=d3.scale.linear().domain([y,b]).range([o-E,w]);if(!f){var x=d3.svg.axis().scale(S).orient("left").tickFormat(n.D3Graph.NumericAxisFormatter);n.D3Graph.AddAxes(e,null,x,o,E);var T=n.D3Graph.GenerateAxisLabel(r,i);n.D3Graph.AddAxisLabels(e,T,"",o,s,E,w)}var N=E+(s-E-w)/2,C=(s-E-w)/(f?4:6),k=C*.8;n.D3Graph.CreateBoxplotElements(e,h,S,N,C,k,f)}t.createBoxplot=r}),define("generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Crosstab",["require","exports","../../../../TS/View/CustomBindingHandlers/D3Graphing/D3Common"],function(e,t,n){function r(e,t,r,i,s,o,u,a,f){var l=f/2,c=f+50,h=45,p=new n.D3Graph.CrosstabLayout(t.records,r,i),d=h*(p.numberOfXCategories+1)+l+c,v=h*(p.numberOfYCategories+1)+l+c;d>u&&(u=d,e.attr("width",d)),v>a&&(a=v,e.attr("height",v));var m=d3.scale.ordinal().domain(["  "].concat(p.xCategories).concat(["   "])).rangePoints([c,u-l]),g=d3.scale.ordinal().domain(["  "].concat(p.yCategories).concat(["   "])).rangePoints([a-c,l]),y=d3.svg.axis().scale(m).orient("bottom").tickFormat(n.D3Graph.CategoricalAxisFormatter),b=d3.svg.axis().scale(g).orient("left").tickFormat(n.D3Graph.CategoricalAxisFormatter);n.D3Graph.AddAxes(e,y,b,a,c);var w=function(e){d3.select(e).selectAll("g").selectAll("text").append("title").text(function(e){return e})};w("#xAxis"),w("#yAxis");var E=n.D3Graph.GenerateAxisLabel(r,s),S=n.D3Graph.GenerateAxisLabel(i,o);n.D3Graph.AddAxisLabels(e,E,S,a,u,c,l);var x=function(e){return function(t){return m(t.xValueName)-(e?0:h/2)}},T=function(e){return function(t){return g(t.yValueName)-(e?0:h/2)}},N=d3.max(p.instances,function(e){return e.percentOfTotal}),C=e.append("g").selectAll("rect").data(p.instances).enter().append("rect").attr("class","crosstabRect").attr("width",h).attr("height",h).attr("fill-opacity",0).attr("x",x(!1)).attr("y",T(!1)),k=e.append("g").selectAll("text").data(p.instances).enter().append("text").attr("class","crosstabLabel").text(function(e){return e.count}).attr("x",x(!0)).attr("y",T(!0));C.transition().attr("fill-opacity",function(e){return e.percentOfTotal/N}).duration(500)}t.createCrosstab=r}),define("generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Histogram",["require","exports","../../../../TS/View/CustomBindingHandlers/D3Graphing/D3Common","../../../../../DataLabClient/LocalizedResources","../../../../../DataLabClient/Contracts/V1/Common/VisualizationContracts"],function(e,t,n,r,i){function s(e,t,r,s,o){var u=i.isNumericFeature(t.featureType),a;u?a=function(e){return r(parseFloat(e[t.index]))}:a=function(e){return e[t.index]};var f,l;if(u){var c=function(e,t,n){return isFinite(n[t])},h=e.map(a),p=h.filter(c);f=p.length,l=d3.layout.histogram().bins(o)(p)}else{var d=!1;f=e.length,l=n.D3Graph.CategoricalHistogramBins(e,t,o,d)}return l.NumberOfRecords=f,l}function o(e,t,n,r,i,s,o,u,a,f,l){var c=e.append("g"),h=i.NumberOfRecords,p=d3.scale.linear().domain([0,1]).range([t-n,r]),d=function(e){return function(t){return t.endpoint?o(t.x):o(t.x)+e}},v=d3.svg.line().x(d(s/2)).y(function(e){return p(e.numElements/h)}).interpolate("basis"),m=d3.svg.area().x(d(s)).y0(p(0)).y1(function(e){return p(e.cy)}).interpolate("basis"),g={};g.x=u,g.y=0,g.numElements=0,g.endpoint=!0;var y={};y.x=a,y.y=0,y.numElements=0,y.endpoint=!0;var b=[g].concat(i).concat([y]);for(var w=0;w<b.length;w++){var E=b[w],S=E.numElements/h;w===0?E.cy=S:E.cy=b[w-1].cy+S}var x=d3.svg.area().x(d(s)).y0(p(0)).y1(p(0)).interpolate("basis"),T=x(b),N=m(b);c.append("path").attr("d",T).attr("class","dfCurve cdf").attr("id","cdfCurve").attr("data-startPoints",T).attr("data-endPoints",N).style("visibility",l?"visible":"hidden").transition().attr("d",N).delay(150).duration(300);var C=d3.svg.line().x(d(s/2)).y(p(0)).interpolate("basis"),k=C(b),L=v(b);c.append("path").attr("d",C(b)).attr("class","dfCurve pdf").attr("id","pdfCurve").attr("data-startPoints",k).attr("data-endPoints",L).style("visibility",f?"visible":"hidden").transition().attr("d",v(b)).delay(150).duration(300)}function u(e,t,u,a,f,l,c,h,p,d,v,m,g){var y=parseInt(l),b=v/2,w=v,E=a.func,S=f.func,x=u.index,T=i.isNumericFeature(u.featureType),N;if(m){var C=m.records?m.records[x][0]:m;N=C.Bins,N.NumberOfRecords=C.NumberOfRecords}else N=s(t.records,u,E,S,y);var k=N.NumberOfRecords;N=N.map(function(e){e.numElements=e.y;var t=S(e.y);return e.y=isFinite(t)?t:0,e}),N.NumberOfRecords=k;var L=N.length-n.Constants.defaultBinCount;L>0&&(p+=L*20,e.attr("width",p));var A=function(e){return e.x},O=function(e){return e.x+e.dx},M=function(e){return e.y},_=d3.min(N,A),D=d3.max(N,O),P;T?P=d3.scale.linear().domain([_,D]).range([w,p-b]):P=d3.scale.ordinal().domain(["  "].concat(N.map(function(e){return e.x})).concat(["   "])).rangePoints([w,p-b]);var H=d3.scale.linear().domain([0,d3.max(N,M)]).range([d-w,b]);if(!g){var B=new Array;N.length>0&&T&&B.push(N[0].x);for(var j=0;j<N.length;j++)B.push(N[j].x+N[j].dx);var F=d3.svg.axis().scale(P).tickValues(B).orient("bottom"),I=d3.svg.axis().scale(H).orient("left").tickFormat(n.D3Graph.NumericAxisFormatter);T?F.tickFormat(n.D3Graph.NumericAxisFormatter):F.tickFormat(n.D3Graph.CategoricalAxisFormatter),n.D3Graph.AddAxes(e,F,I,d,w),d3.select("#xAxis").selectAll("g").selectAll("text").append("title").text(function(e){return e});var q=n.D3Graph.GenerateAxisLabel(u,a),R=n.D3Graph.GenerateAxisLabel({name:r.frequency},f);n.D3Graph.AddAxisLabels(e,q,R,d,p,w,b)}var U=g?1:6,z=T?N.length:N.length+2,W=(p-w-b)/z-U,X=e.selectAll("rect").data(N).enter().append("rect").attr("class","histogramBar").attr("y",d-w).attr("width",W).attr("height",0);T?X.attr("x",function(e){return P(e.x)+(g?U:U/2)}):X.attr("x",function(e){return P(e.x)-W/2}),X.transition().attr("height",function(e){return d-w-H(e.y)}).attr("y",function(e){return H(e.y)}).duration(g?0:500),g||(X.append("title").text(function(e){return e.numElements+" element"+(e.numElements===1?"":"s")+"\n"+n.D3Graph.NumericAxisFormatter(e.numElements/N.NumberOfRecords*100)+"%"}),T&&o(e,d,w,b,N,W,P,_,D,c,h))}t.createHistogram=u}),define("generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Multiboxplot",["require","exports","../../../../TS/View/CustomBindingHandlers/D3Graphing/D3Common"],function(e,t,n){function r(e,t,r,i,s,o,u,a,f){var l=parseInt(o),c=t.records,h=f/2,p=f,d=!1,v=n.D3Graph.CategoricalHistogramBins(c,r,l,d),m=i.index;v.map(function(e){var t=e.data.map(function(e){return s.func(parseFloat(e[m]))});return e.data=t.filter(function(e,t,n){return isFinite(n[t])}),e.min=d3.min(e.data),e.max=d3.max(e.data),e});var g=v.length-n.Constants.defaultCategoryCount;g>0&&(u+=g*40,e.attr("width",u));var y=d3.min(v.map(function(e){return e.min})),b=d3.max(v.map(function(e){return e.max})),w=d3.scale.ordinal().domain(["  "].concat(v.map(function(e){return e.name})).concat(["   "])).rangePoints([p,u-h]),E=d3.scale.linear().domain([y,b]).range([a-p,h]),S=d3.svg.axis().scale(w).orient("bottom").tickFormat(n.D3Graph.CategoricalAxisFormatter),x=d3.svg.axis().scale(E).orient("left").tickFormat(n.D3Graph.NumericAxisFormatter);n.D3Graph.AddAxes(e,S,x,a,p),d3.select("#xAxis").selectAll("g").selectAll("text").append("title").text(function(e){return e});var T=r.name,N=n.D3Graph.GenerateAxisLabel(i,s);n.D3Graph.AddAxisLabels(e,T,N,a,u,p,h);var C=4,k=(u-p-h-(v.length+2)*C)/(v.length+2),L=k*.8;for(var A=0;A<v.length;A++){var O=v[A],M=e.append("g");O.data.length>0&&n.D3Graph.CreateBoxplotElements(M,n.D3Graph.BoxplotLayout(O.data),E,w(O.x),k,L,!1)}}t.createMultiboxplot=r}),define("generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Scatterplot",["require","exports","../../../../TS/View/CustomBindingHandlers/D3Graphing/D3Common"],function(e,t,n){function r(e,t,r,i,s,o,u,a,f){var l=t.records,c=s.func,h=o.func,p=f/2,d=f,v=function(e){return c(parseFloat(e[r.index]))},m=function(e){return h(parseFloat(e[i.index]))},g=function(e,t,n){return isFinite(v(n[t]))&&isFinite(m(n[t]))},y=l.filter(g),b=d3.scale.linear().domain([d3.min(y,v),d3.max(y,v)]).range([d,u-p]),w=d3.scale.linear().domain([d3.min(y,m),d3.max(y,m)]).range([a-d,p]),E=d3.svg.axis().scale(b).orient("bottom").tickFormat(n.D3Graph.NumericAxisFormatter),S=d3.svg.axis().scale(w).orient("left").tickFormat(n.D3Graph.NumericAxisFormatter);n.D3Graph.AddAxes(e,E,S,a,d);var x=n.D3Graph.GenerateAxisLabel(r,s),T=n.D3Graph.GenerateAxisLabel(i,o);n.D3Graph.AddAxisLabels(e,x,T,a,u,d,p);var N=e.selectAll("circle").data(y).enter().append("circle").attr("class","scatterplotPoint").attr("r",0).attr("cx",function(e){return b(v(e))}).attr("cy",function(e){return w(m(e))});N.transition().attr("r",3).duration(500)}t.createScatterplot=r}),define("generated/editor/TS/View/CustomBindingHandlers/d3graph",["require","exports","../../../TS/View/CustomBindingHandlers/D3Graphing/Boxplot","../../../TS/View/CustomBindingHandlers/D3Graphing/Crosstab","../../../TS/View/CustomBindingHandlers/D3Graphing/D3Common","../../../TS/Global","../../../TS/View/CustomBindingHandlers/D3Graphing/Histogram","../../../TS/View/CustomBindingHandlers/D3Graphing/Multiboxplot","../../../TS/View/CustomBindingHandlers/D3Graphing/Scatterplot","../../../../DataLabClient/Contracts/V1/Common/VisualizationContracts"],function(e,t,n,r,i,s,o,u,a,f){var l;(function(e){function t(e,t){var n=d3.select(e);n.style("visibility",t?"visible":"hidden"),t&&n.attr("d",n.attr("data-startPoints")).transition().attr("d",n.attr("data-endPoints"))}function s(s,l,c){var h=l(),p=h.data;if(!p)return;var d=d3.select(s);d.select("*").remove();var v=h.minWidth,m=h.height,g=h.padding,y=h.minimized,b=h.name,w=d.append("svg").attr("width",v).attr("height",m).attr("class","activeSvg");b&&(e.svgMap[b]=$(s).find("svg")[0]);var E=p.xlog()?i.D3Graph.Scales[1]:i.D3Graph.Scales[0],S=p.ylog()?i.D3Graph.Scales[1]:i.D3Graph.Scales[0];switch(p.graphType()){case 0:o.createHistogram(w,p.datatable,p.feature,E,S,p.binCount(),p.probabilityDensity.peek(),p.cumulativeDistibution.peek(),v,m,g,p.layout,y);break;case 1:n.createBoxplot(w,p.datatable,p.feature,E,v,m,g,p.layout,y);break;case 2:a.createScatterplot(w,p.datatable,p.feature,p.crossCompareFeature(),E,S,v,m,g);break;case 3:var x,T,N;f.isNumericFeature(p.feature.featureType)?(x=p.feature,T=p.crossCompareFeature(),N=S):(x=p.crossCompareFeature(),T=p.feature,N=E),u.createMultiboxplot(w,p.datatable,T,x,N,p.categoryCount(),v,m,g);break;case 4:r.createCrosstab(w,p.datatable,p.feature,p.crossCompareFeature(),E,S,v,m,g);break;default:}p.subscribed||(p.probabilityDensity.subscribe(function(e){t("#pdfCurve",e)}),p.cumulativeDistibution.subscribe(function(e){t("#cdfCurve",e)}),p.subscribed=!0)}e.svgMap=Object.create(null),e.CreateGraph=s})(l=t.D3Graph||(t.D3Graph={}));var c;(function(e){ko.bindingHandlers.d3graph={init:function(e,t,n,r){ko.utils.domNodeDisposal.addDisposeCallback(e,function(){delete l.svgMap[t().name]})},update:function(e,t,n,r){l.CreateGraph(e,t,r)}}})(c||(c={}))}),define("generated/editor/TS/View/CustomBindingHandlers/d3graphCopy",["require","exports","./d3graph","../../ViewModel/Visualization/VisualizationViewModel"],function(e,t,n,r){var i;(function(e){ko.bindingHandlers.d3graphcopy={init:function(e,t,r,i){var s=$(n.D3Graph.svgMap[t().name]),o=parseInt(t().animationDuration),u=s.clone(),a=s.offset().left,f=s.parent().offset().top,l=s.outerWidth(),c=$(e).offset().left,h=$(e).offset().top;$(e).css("width",s.width()+"px");var p=$(e).parent().parent();p.css({width:"0px",visibility:"hidden"}),u.appendTo($("body")).css({position:"fixed",top:f+"px",left:a+"px"}),requestAnimationFrame(function(){u.css("transition-duration",o+"ms").css("transition-property","left").css("visibility","hidden"),p.css({"transition-property":"width","transition-duration":o+"ms"}),requestAnimationFrame(function(){u.css("left",c+"px"),p.css("width",l+"px"),setTimeout(function(){u.appendTo($(e)).css({position:"static","transition-duration":0}),u.css("visibility",""),p.css({height:"",visibility:"visible"}),$(e).css("padding-top",f-h+"px")},o)})})}}})(i||(i={}))}),define("generated/editor/TS/View/CustomBindingHandlers/DropMenu",["require","exports","../../../TS/Global","../../../TS/View/MenuControl","../../../TS/ViewModel/ContextMenuControl/MenuViewModel"],function(e,t,n,r,i){ko.bindingHandlers.dropMenu={init:function(e,t,n,s){e.addEventListener("mousedown",function(e){function a(e){e.type==="hashchange"||e.type==="keydown"&&e.keyCode===27||e.type==="mousedown"&&$(e.target).closest(".datalab-contextMenu").length===0?(e.type==="mousedown"&&e.target===n&&e.stopPropagation(),n=null,r.MenuControl.removeContextMenu(),u()):e.type==="mouseup"&&$(e.target).closest(".datalab-contextMenu .enabled").length>0&&$(e.target).closest(".datalab-contextMenu .hasSubmenu").length===0?(n=null,u()):e.type==="mouseup"&&!o?o=!0:e.type==="mouseup"&&$(e.target).closest(".datalab-contextMenu").length===0&&(n=null,r.MenuControl.removeContextMenu(),u())}e.preventDefault(),e.stopPropagation();var n=e.target,o=!1,u=function(){document.removeEventListener("mousedown",a,!0),document.removeEventListener("mouseup",a,!0),document.querySelector("html").removeEventListener("keydown",a),window.removeEventListener("hashchange",a,!0)};if(e.button===0){document.addEventListener("mousedown",a,!0),document.addEventListener("mouseup",a,!0),document.querySelector("html").addEventListener("keydown",a),window.addEventListener("hashchange",a,!0),o=!1;var f=t(),l=f.build(s);if(l){var c=new i.MenuViewModel(l,s,e);r.MenuControl.spawnMenu(c,e.target)}}})}}}),define("generated/editor/TS/View/CustomBindingHandlers/EditableTextArea",["require","exports"],function(e,t){function n(e,t){function u(){var e=n.val().length,t=r-e;t<40?(s.text(""+t),o||(o=!0,i.show())):o&&(i.hide(),o=!1)}var n=e.find("textArea"),r=t.maxCharacters,i=e.find(".characterLimitReachedWarning"),s=i.find(".charactersLeftCount"),o=!1;n.on({"keyup change":u,paste:function(){window.setTimeout(u,1)}})}ko.bindingHandlers.editableTextArea={init:function(e,t,r,i,s){var o=ko.utils.unwrapObservable(t());Object.getOwnPropertyNames(o).length>0&&(i=o);var u=$(e).find("textarea");if(!u.get(0))throw new Error("Couldn't find text area in editableTextArea binding.");$(e).addClass("editableTextAreaWrapper"),u.addClass("editableTextArea"),i.maxCharacters&&u.attr("maxlength",i.maxCharacters),i.placeholderText&&u.attr("placeholder",i.placeholderText),i.isReadOnly&&u.attr("readonly","true"),i.showMaxCharacterWarning&&n($(e),i)},update:function(e,t){}}});var textLargerThanDiv=function(e,t){return $(e).text(t),e.clientHeight<e.scrollHeight?!0:!1};ko.bindingHandlers.ellipsisDiv={init:function(e,t,n,r,i){},update:function(e,t,n,r,i){var s=ko.utils.unwrapObservable(t);if($(e).height()===0||!$(e).is(":visible")){$(e).text(s());return}var o=s();if(!textLargerThanDiv(e,o))return;var u="…",a=0,f=o.length,l=Math.floor(f/2),c=o.slice(0,l),h=textLargerThanDiv(e,c+u),p=h?!1:textLargerThanDiv(e,c+o[l]+u);while(h||!p){h?(f=l,l=Math.floor(a+(f-a)/2)):p||(a=l,l=Math.floor(a+(f-a)/2)),c=o.slice(0,l),h=textLargerThanDiv(e,c+u),p=h?!1:textLargerThanDiv(e,c+o[l]+u);if(l===0)break}$(e).text(c+u)}},define("generated/editor/TS/View/CustomBindingHandlers/EllipsisDiv",function(){}),ko.bindingHandlers.fadeVisible={init:function(e,t){var n=t();$(e).toggle(ko.utils.unwrapObservable(n))},update:function(e,t){var n=t();ko.utils.unwrapObservable(n)?$(e).fadeIn():$(e).fadeOut()}},define("generated/editor/TS/View/CustomBindingHandlers/FadeVisible",function(){}),ko.bindingHandlers.file={init:function(e,t){function n(){var n=t();if(!ko.isObservable(n))throw new Error("The parameter to the 'file' binding must be an observable");if(e.files&&e.files.length>0&&e.value){if(e.files.length>1)throw new Error("The 'file' binding does not support multi-select file input elements");n(e.files[0])}else n(null)}if(!(e instanceof HTMLInputElement))throw new Error("The 'file' binding must be applied to an <input> element");e.addEventListener("change",function(){n()}),n()},update:function(e,t){}},define("generated/editor/TS/View/CustomBindingHandlers/File",function(){}),define("generated/editor/TS/View/CustomBindingHandlers/fxRadio",["require","exports"],function(e,t){function n(e,t){var n=e.filter(function(e){return e.value===t});if(n.length===1)return n[0];return}ko.bindingHandlers.fxRadio={init:function(e,t,r,i){var s=t();if("change"in s)throw new Error("This custom binding handles change tracking automatically. Just specify an observable with the 'value' option and it will get set to the selected value.");if(!ko.isObservable(s.value))throw new Error("'value' custom binding option must be a Knockout observable. Oobservable can contain initial value.");var o=s.value;typeof o()=="undefined"&&o(s.values[0].value);var u={value:n(s.values,o()),values:s.values,trackedit:s.trackedit,change:function(e,t){var n=t.value.value;o(n)}};if(typeof u.value=="undefined")throw new Error("The observable has a value not found in the values array.");$(e).fxRadio(u);var a=o.subscribe(function(t){var r=n(s.values,t);$(e).fxRadio("option","value",r)});ko.utils.domNodeDisposal.addDisposeCallback(e,function(){a.dispose()})}}}),ko.bindingHandlers.fxsCopyButton={init:handleInitOrUpdate,update:handleInitOrUpdate},define("generated/editor/TS/View/CustomBindingHandlers/fxsCopyButton",function(){}),ko.bindingHandlers.fxUpload={init:function(e,t,n,r){var i=t();$(e).fxUpload(i)}},define("generated/editor/TS/View/CustomBindingHandlers/fxUpload",function(){}),ko.bindingHandlers.hoverStatus={init:function(e,t,n,r,i){$(e).mouseenter(function(){t()(!0)}),$(e).mouseleave(function(){t()(!1)})}},define("generated/editor/TS/View/CustomBindingHandlers/HoverStatus",function(){}),define("generated/editor/TS/View/CustomBindingHandlers/ItemTextBox",["require","exports"],function(e,t){ko.bindingHandlers.itemTextBox={init:function(e,t,n,r,i){function s(n){$(".textWidthSpan").text($(e).val());var r=$(".textWidthSpan").width(),i=e.selectionStart;if(n.which===8&&i===0){var s=ko.utils.unwrapObservable(t),o=s().invalidColumnNames,u=s().validColumnNames;o().length>0?(o().pop(),o.valueHasMutated()):(u().pop(),u.valueHasMutated()),$(e).focus()}n.which===13&&($(e).blur(),$(e).focus())}function o(){var e;if(n().value)e=n().value;else{if(!n().columnPickerAutocomplete||!n().columnPickerAutocomplete.dependentObservable)return;e=n().columnPickerAutocomplete.dependentObservable}e.startValidating(),e.validate()}$(e).on("keydown",s),$(e).on("blur",o),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){e&&($(e).off("keydown",s),$(e).off("blur",o),e=null)})}}}),define("generated/editor/TS/View/CustomBindingHandlers/JQueryCollapse",["require","exports","../../../TS/View/CustomBindingHandlers/CollapseResizeManager"],function(e,t,n){ko.bindingHandlers.jQueryCollapse={init:function(e,t){var r=e.querySelector(t().collapseButtonSelector);if(!r)throw new Error("Could not find collapse button with selector '"+t().collapseButtonSelector+".'");r.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t().collapsed(!t().collapsed())});if(typeof t().collapsed!="function")throw new Error("Required binding parameter 'collapsed' is undefined or not an observable.");if(!e.collapseResizeManager)e.collapseResizeManager=new n.CollapseResizeManager(e,t().collapseFrom,t().id),e.collapseResizeManager.initForJQueryCollapse(t().collapsed,t().contentSelector,t().animationEnded);else{var i=e.collapseResizeManager;if(t().id!==i.id)throw new Error("When using jQueryCollapse with resize, ids must match.");if(i.direction!==t().collapseFrom)throw new Error("When using resize and collapse together, 'collapseFrom' must equal resize's 'location'");e.collapseResizeManager.initForJQueryCollapse(t().collapsed,t().animationEnded)}},update:function(e,t){var n=e.collapseResizeManager;n.updateJQueryCollapsedState()}}}),ko.bindingHandlers.multiSelectMenu={init:function(e,t,n){var r=n().menuOptions||{},i=t(),s=$(e).find("ul"),o=$(e.children[0]);s.hide(),s[0].style.marginTop=o[0].offsetHeight.toString()+"px",o.click(function(){s.toggle()});var u=function(e){!$(e.target).closest(s).length&&!$(e.target).closest(o).length&&s.hide()};r.select=function(e,t){$.each(s.find("li"),function(e,n){if(n===t.item[0]){var r=i()[e].isSelected();i()[e].isSelected(!r)}}),i.valueHasMutated(),e.preventDefault()},$(document).on("click",u),s.menu(r),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){s.menu("destroy"),$(document).off("click",u)})}},define("generated/editor/TS/View/CustomBindingHandlers/MultiSelectMenu",function(){}),ko.bindingHandlers.oninit={init:function(e,t,n,r){t()(e)}},define("generated/editor/TS/View/CustomBindingHandlers/OnInit",function(){}),ko.bindingHandlers.placeholder={init:function(e,t,n,r,i){var s=t();ko.applyBindingsToNode(e,{attr:{placeholder:s}},r)}},define("generated/editor/TS/View/CustomBindingHandlers/Placeholder",function(){}),ko.bindingHandlers.readonly={init:function(e,t){},update:function(e,t){var n=ko.utils.unwrapObservable(t()),r=e.getAttribute("readonly")!==null;n&&!r?e.setAttribute("readonly","readonly"):!n&&r&&e.removeAttribute("readonly")}},define("generated/editor/TS/View/CustomBindingHandlers/ReadOnly",function(){}),define("generated/editor/TS/View/CustomBindingHandlers/Resize",["require","exports","../../../TS/View/CustomBindingHandlers/CollapseResizeManager","../../../../DataLabClient/Disposable"],function(e,t,n,r){ko.bindingHandlers.resize={init:function(e,t){var i=t();if(!i.maxSize&&$(e).closest(i.parentContainerSelector).length===0)throw new Error("Could not find the parent container with selector '"+i.parentContainerSelector+".'");var s;if(i.direction==="top"||i.direction==="bottom")s="height";else{if(i.direction!=="left"&&i.direction!=="right")throw new Error("location must be either 'top,' 'left,' 'bottom,' or 'right.'");s="width"}i.minSize=i.minSize?i.minSize:0,i.maxSize=i.maxSize?i.maxSize:$(e).closest(i.parentContainerSelector)[s]();if(!e.collapseResizeManager)e.collapseResizeManager=new n.CollapseResizeManager(e,i.direction,i.id),r.Disposable.exemptFromDiposablesInContextAssertion(e.collapseResizeManager),e.collapseResizeManager.initForResize(i.minSize,i.maxSize),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){e.collapseResizeManager.dispose()});else{var o=e.collapseResizeManager;if(i.id!==o.id)throw new Error("When using resize binding with collapse or JQueryCollapse, ids must match.");if(o.direction!==i.direction)throw new Error("When using collapse and resize bindings together, 'location' must equal collapse's 'collapseFrom.'");o.initForResize(i.minSize,i.maxSize)}},update:function(e,t){}}}),ko.bindingHandlers.slider={init:function(e,t,n){var r=n().sliderOptions||{},i=ko.utils.unwrapObservable(t());r.slide=function(e,t){i[0](t.values[0]),i[1](t.values[1])},$(e).slider(r),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).slider("destroy")})},update:function(e,t){var n=ko.utils.unwrapObservable(t()),r=parseFloat(ko.utils.unwrapObservable(n[0])),i=parseFloat(ko.utils.unwrapObservable(n[1])),s=[r,i];isNaN(s[0])&&(s=[0,1]),$(e).slider("values",s)}},define("generated/editor/TS/View/CustomBindingHandlers/Slider",function(){}),ko.bindingHandlers.slideVisible={init:function(e,t,n){var r=n().animating,i=ko.utils.unwrapObservable(t());r(!1),i?$(e).show():$(e).hide()},update:function(e,t,n){var r=n().animating,i=ko.utils.unwrapObservable(t()),s=$(e).css("display")!=="none";s!==i&&(r(!0),i==1?$(e).show("slide",{direction:"down",complete:function(){r(!1)}}):$(e).hide("slide",{direction:"down",complete:function(){r(!1)}}))}},define("generated/editor/TS/View/CustomBindingHandlers/SlideVisible",function(){}),ko.bindingHandlers.stopBinding={init:function(e,t){return{controlsDescendantBindings:!0}}},define("generated/editor/TS/View/CustomBindingHandlers/StopBinding",function(){});var StringTemplateSource=function(){function e(e){this.template=e}return e.prototype.text=function(){return this.template},e}(),stringTemplateEngine=new ko.nativeTemplateEngine;stringTemplateEngine.makeTemplateSource=function(e){return new StringTemplateSource(e)},ko.bindingHandlers.templateWithHtml={init:function(){return ko.bindingHandlers.template.init.apply(this,arguments)},update:function(e,t,n,r,i){var s=t();if(typeof s=="string")s={name:s};else{if(!("html"in s))throw new Error("The 'html' option is required");if("name"in s)throw new Error("The 'templateWithHtml' binding only takes the 'html' option");s.name=ko.utils.unwrapObservable(s.html)}s.templateEngine=stringTemplateEngine,ko.bindingHandlers.template.update(e,function(){return s},n,r,i)}},ko.virtualElements.allowedBindings.templateWithHtml=ko.virtualElements.allowedBindings.template,define("generated/editor/TS/View/CustomBindingHandlers/TemplateWithHtml",function(){}),define("generated/editor/TS/View/CustomBindingHandlers/TwitterButton",["require","exports","../../../../DataLabClient/LocalizedResources","../../../../DataLabClient/Util"],function(e,t,n,r){function s(e){return function(){var n="scrollbars=yes,resizable=yes,toolbar=no,location=yes",r=550,i=420,s=screen.height,o=screen.width,u=Math.round(o/2-r/2),a=0;s>i&&(a=Math.round(s/2-i/2));var f=n+",width="+r+",height="+i+",left="+u+",top="+a;return window.open(e,"twitter",f),!1}}var i={count:"none",hashtags:"AzureML"};ko.bindingHandlers.twitterButton={init:function(e,t,o,u){var a=t(),f=$.extend({},i,a),l="https://twitter.com/intent/tweet?"+r.param(f);$(e).addClass("twitter-share-button"),$(e).attr("href",l),$(e).click(s(l));var c=$("<img />").attr({src:"/Content/Images/sharing-twitter.svg",title:n.twitterButtonTitle});$(e).append(c)}}}),define("generated/editor/TS/View/CustomBindingHandlers/UsageBar",["require","exports"],function(e,t){ko.bindingHandlers.usageBar={update:function(e,t,n,r,i){var s=ko.utils.unwrapObservable(t());$(e).hasClass("fx-usagebars")&&$(e).fxUsageBars("destroy"),s&&$(e).fxUsageBars({thisEntityName:s.usedLabel,totalEntityName:s.totalLabel,overCapacityName:s.overCapacityLabel,quotas:[{usedByThis:s.used,totalQuota:s.total,unitLabel:s.unitLabel,unitLabelLong:s.unitLabelLong,roundingDecimals:2}]})}}}),define("generated/editor/TS/View/CustomBindingHandlers/Validate",["require","exports"],function(e,t){ko.bindingHandlers.validate={init:function(e,t){ko.bindingHandlers.hoverBalloon.init(e,function(){var e=ko.utils.unwrapObservable(t()),n=e.value;return{message:n.errorMessage,forceBalloon:e.forceBalloon}},null,null,null)},update:function(e,t){var n=ko.utils.unwrapObservable(t());ko.utils.unwrapObservable(n.value),$(e).removeClass("fx-validation-invalid"),n.value.errorMessage()&&$(e).addClass("fx-validation-invalid")}}}),define("generated/editor/TS/View/CustomBindingHandlers/ValidatedInputBox",["require","exports"],function(e,t){ko.bindingHandlers.validatedInputBox={init:function(e,t,n,r,i){if(!t().value)throw Error("The fxTextBox binding must have a value parameter");if(!t().value.validate)throw Error("The fxTextBox binding must accept an IValidatableObservable for its binding argument");var s=ko.utils.unwrapObservable(t()),o=s.value;$(e).on("input keyup",function(){var n=ko.utils.unwrapObservable(t());n.value(e.value)}),e.addEventListener("blur",function(){var n=ko.utils.unwrapObservable(t());n.value(e.value),n.value.startValidating()}),e.value=s.value(),ko.bindingHandlers.validate.init(e,t,n,r,i)},update:function(e,t,n,r,i){var s=!1;t().disabled!==undefined&&(s=ko.utils.unwrapObservable(t().disabled));var o=ko.utils.unwrapObservable(t());e.value!==o.value()&&(e.value=o.value()),ko.bindingHandlers.validate.update(e,t,n,r,i)}}}),define("scripts/init",["generated/DataLabClient/LocalizedResources","generated/DataLabClient/Model/Workspace","uxfximpl","generated/editor/TS/View/CustomBindingHandlers/AttrWithNamespace","generated/editor/TS/View/CustomBindingHandlers/AutocompleteHandler","generated/editor/TS/View/CustomBindingHandlers/Balloon","generated/editor/TS/View/CustomBindingHandlers/CheckboxValue","generated/editor/TS/View/CustomBindingHandlers/Collapse","generated/editor/TS/View/CustomBindingHandlers/CollapseResizeManager","generated/editor/TS/View/CustomBindingHandlers/ColumnPickerRuleDisplay","generated/editor/TS/View/CustomBindingHandlers/ContextMenu","generated/editor/TS/View/CustomBindingHandlers/d3graph","generated/editor/TS/View/CustomBindingHandlers/d3graphCopy","generated/editor/TS/View/CustomBindingHandlers/DropMenu","generated/editor/TS/View/CustomBindingHandlers/EditableTextArea","generated/editor/TS/View/CustomBindingHandlers/EllipsisDiv","generated/editor/TS/View/CustomBindingHandlers/FadeVisible","generated/editor/TS/View/CustomBindingHandlers/File","generated/editor/TS/View/CustomBindingHandlers/fxRadio","generated/editor/TS/View/CustomBindingHandlers/fxsCopyButton","generated/editor/TS/View/CustomBindingHandlers/fxUpload","generated/editor/TS/View/CustomBindingHandlers/HoverStatus","generated/editor/TS/View/CustomBindingHandlers/ItemTextBox","generated/editor/TS/View/CustomBindingHandlers/JQueryCollapse","generated/editor/TS/View/CustomBindingHandlers/JQueryTabs","generated/editor/TS/View/CustomBindingHandlers/Monaco","generated/editor/TS/View/CustomBindingHandlers/MultiSelectMenu","generated/editor/TS/View/CustomBindingHandlers/OnInit","generated/editor/TS/View/CustomBindingHandlers/Placeholder","generated/editor/TS/View/CustomBindingHandlers/ReadOnly","generated/editor/TS/View/CustomBindingHandlers/Resize","generated/editor/TS/View/CustomBindingHandlers/Slider","generated/editor/TS/View/CustomBindingHandlers/SlideVisible","generated/editor/TS/View/CustomBindingHandlers/StopBinding","generated/editor/TS/View/CustomBindingHandlers/TemplateWithHtml","generated/editor/TS/View/CustomBindingHandlers/TwitterButton","generated/editor/TS/View/CustomBindingHandlers/UsageBar","generated/editor/TS/View/CustomBindingHandlers/Validate","generated/editor/TS/View/CustomBindingHandlers/ValidatedInputBox","generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Boxplot","generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Crosstab","generated/editor/TS/View/CustomBindingHandlers/D3Graphing/D3Common","generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Histogram","generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Multiboxplot","generated/editor/TS/View/CustomBindingHandlers/D3Graphing/Scatterplot","generated/editor/TS/ViewModel/CustomUX/ClusteringViewModel","generated/editor/TS/ViewModel/CustomUX/PlotContainerViewModel","generated/editor/TS/ViewModel/ExperimentEditor/Entity"],function(e,t){function r(){var r=[],i;return r.push({type:"text",text:n.avatarBar_signOutLabel,click:function(){t.workspace.signOut().done(function(e){window.location.href=e}).fail(function(t){var n=new Shell.UI.Notifications.Notification(e.signoutErrorMessage,Shell.UI.Notifications.Severity.warning);n.setActions([new Shell.UI.Notifications.Buttons.ok(function(){Shell.UI.Notifications.remove(n)})]),Shell.UI.Notifications.add(n)}),Shell.Diagnostics.Telemetry.customEvent("LogOut","HeaderBarMenu")}}),r.push({type:"separator"}),r.push({type:"languagepicker",label:n.avatarBar_languagePickerLabel}),r.push({type:"separator"}),r.push({type:"text",text:n.avatarBar_privacyLabel,click:function(){window.open(environment.privacyNoticeUrl,"PrivacyAndCookies"),Shell.Diagnostics.Telemetry.customEvent("WindowsAzurePrivacyStatement","HeaderBarMenu")}}),r.push({type:"text",text:n.avatarBar_legalLabel,click:function(){window.open(environment.legalNoticeUrl,"Legal"),Shell.Diagnostics.Telemetry.customEvent("Legal","HeaderBarMenu")}}),i=$("<div />").fxsAvatarBar({name:n.avatarBar_menuLabel,menuItems:r}),i}function i(){$("#headerbar").fxsHeaderBar({avatarBar:r(),logoAltText:n.productNameLong,logo:window.fx.resources.getContentUrl("Content/Images/layout-brand-MSAzureML.png"),logoUrl:"/",expanded:!1})}function s(){i()}var n=window.Resources.getResources("Microsoft.MetaAnalytics.Web.ClientResources");return{initialize:s}}),define("extensioncore/exp.main",["extensioncore/exp.data.localdatasetdatasource","extensioncore/exp.data.remotedatasource","extensioncore/exp.drawer","extensioncore/exp.navigation","extensioncore/exp.rdfe","extensioncore/exp.scheduler","extensioncore/exp.typeregistry","extensioncore/exp.ui.commands.obsolete","extensioncore/exp.ui","extensioncore/exp.utilities.beta"],function(){}),define("scripts/waz/waz.resources",["uxfximpl"],function(){window.Shell.Namespace.define("waz",{Resources:window.Resources.getResources("Microsoft.MetaAnalytics.Web.Scripts.waz.ClientResources")})}),define("scripts/waz/waz.imageresources",["uxfximpl"],function(){var e=window.fx.resources,t={complete:e.getContentUrl("Content/Images/icon-status-complete-16-idl.png"),stopped:e.getContentUrl("Content/Images/icon-status-stopped-16-idl.png"),paused:e.getContentUrl("Content/Images/icon-status-paused-16-idl.png"),running:e.getContentUrl("Content/Images/icon-status-running-16-idl.png"),warning:e.getContentUrl("Content/Images/icon-status-warning-16-idl.png"),bang:e.getContentUrl("Content/Images/icon-status-bang-16-idl.png"),spinner:e.getContentUrl("Content/Images/icon-status-status-dots-anim-16.gif"),question:e.getContentUrl("Content/Images/icon-status-question-16-idl.png"),expanded:e.getContentUrl("Content/Images/icon-chevron-expanded.png"),collapsed:e.getContentUrl("Content/Images/icon-chevron-collapsed.png"),directory:e.getContentUrl("Content/Images/Directory.png"),file:e.getContentUrl("Content/Images/File.png"),statusInfo:e.getContentUrl("Content/Images/statusbar-info.gif"),statusWarning:e.getContentUrl("Content/Images/statusbar-warning.gif"),statusError:e.getContentUrl("Content/Images/statusbar-error.gif"),statusAlert:e.getContentUrl("Content/Images/statusbar-info-alert.png"),fullSprite:e.getContentUrl("Content/Images/icons-gridview-status.png")};Shell.Namespace.define("waz",{ImageResources:t})}),define("scripts/waz/waz.formatters",["jquery","scripts/waz/waz.resources","scripts/waz/waz.imageresources"],function(e){function o(n,r){var i=[{name:"B",localizedName:t.bytes,localizedLongName:t.bytesLong},{name:"KB",localizedName:t.kiloBytes,localizedLongName:t.kiloBytesLong},{name:"MB",localizedName:t.megaBytes,localizedLongName:t.megaBytesLong},{name:"GB",localizedName:t.gigaBytes,localizedLongName:t.gigaBytesLong},{name:"TB",localizedName:t.teraBytes,localizedLongName:t.teraBytesLong},{name:"PT",localizedName:t.petaBytes,localizedLongName:t.petaBytesLong},{name:"EB",localizedName:t.exaBytes,localizedLongName:t.exaBytesLong},{name:"ZB",localizedName:t.zettaBytes,localizedLongName:t.zettaBytesLong},{name:"YB",localizedName:t.yottaBytes,localizedLongName:t.yottaBytesLong}],s=r&&e.map(i,function(e){return e.name}).indexOf(r)||0,o=s,u=n||0;return n&&n>0&&!window.isNaN(n)&&parseInt(n,10)!==0&&(o=Math.floor(Math.log(n)/Math.log(1024)),u=parseFloat((n/Math.pow(1024,o)).toFixed(2)),o=s+o,o=o<i.length?o:i.length-1),{value:u,unit:i[o].localizedName,unitLong:i[o].localizedLongName}}function u(t){return e.fxGridFormatter.defaultAll(function(e,n,r){var i=o(e,t);return"{0} {1}".format(i.value,i.unit)})}function a(e,t,n){var r=t.dataItem,i=r["aux-extension-name"]?Shell.extensionIndex[r["aux-extension-name"]]:window.cdm.currentExtension,s;if(i&&i.gridView&&i.gridView.formatters){s=i.gridView.formatters[n];if(s)return s.formatter(r[s.field]||e,t)}return null}function f(e,t){var n=t.dataItem;return n.SubscriptionId||n.subscriptionId||n.SubscriptionID||e}function l(e,t){var n=f(e,t),r=window.Exp.Rdfe.getSubscription(n);return(r?r.SubscriptionName+n:e)||"-"}function c(t,n){var r=n.dataItem,i=r["aux-extension-name"]?Shell.extensionIndex[r["aux-extension-name"]]:window.cdm.currentExtension,s=n.column.displayStatus,o=e.isFunction(s)?s:null;return o||(o=e.isFunction(i.displayStatus)?i.displayStatus:null),o(r)}function h(e,t){var n=c(e,t);return n&&n.text}var t=window.waz.Resources,n,r,i,s;n={subscription:l,status:h},r={subscription:l,status:h},i={link:function(t,n){var r=n.dataItem,i=n.column,s=i.isLinkEnabled;return e.isFunction(s)&&!s(r)?e.fxGridFormatter.text(r[i.field],n):e.fxGridFormatter.url({url:r[i.field],text:t,target:i.target},n)},image:function(t,n){return e.fxGridFormatter.icon.apply(this,arguments)},date:function(e,t){return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},navigation:function(t,n){var r=n.dataItem,i=n.column,s=i.canNavigate,o=!0,u=r.subscriptionId||r.SubscriptionId||r.SubscriptionID,a,f,l,c,h,p;a=r["aux-extension-name"]?Shell.extensionIndex[r["aux-extension-name"]]:window.cdm.currentExtension,f=r.type||r.Type,p=window.Exp.TypeRegistry.getCanNavigate(a.name,f),u&&!window.Exp.Rdfe.isSubscriptionEnabled(u)?o=!1:typeof r.canNavigate=="boolean"?o=r.canNavigate:typeof s=="function"?o=s.apply(this,arguments):typeof p=="function"&&(o=p(r));if(!o)return"<span>"+e.fxGridFormatter.text(t,n)+"</span>";l=i.navigationField,c=l?r[l]:r.name||r.Name,h=Shell.UI.Navigation.calculateNavigationPath({extension:a,name:c,type:f,dataContext:r,expandPath:!0});if(n.column.type==="navigationLink"){var d=e.fxGridFormatter.text(t,n);return"<span><a href='"+e.fxGridFormatter.code(h,n)+"' title='"+Shell.Utilities.attributeEncodeProperlyQuotedAttribute(d)+"'>"+d+"</a></span>"}return"<a href='"+e.fxGridFormatter.code(h,n)+"'><span>"+e.fxGridFormatter.text(t,n)+"</span></a>"},subscription:function(t,n){var r=a(t,n,"subscription"),i=f(t,n),s=window.Exp.Rdfe.getSubscription(i);return r?r:(s=window.Exp.Rdfe.getSubscription(i),s?!Shell.Environment.getIsOnPremMode()&&!window.Exp.Rdfe.isSubscriptionEnabled(s)?"{0}<a href='{1}?id={2}' target='_blank'>{3}</a?".format(e.fxGridFormatter.icon(window.waz.ImageResources.warning),window.Shell.Environment.getAccountUrl(),s.SubscriptionID,Shell.Utilities.htmlEncode(s.SubscriptionName)):Shell.Utilities.htmlEncode(s.SubscriptionName):t||"-")},location:e.fxGridFormatter.defaultAll(function(e,n){var r=n.dataItem,i=r.affinityGroup||r.AffinityGroup,s=e||r.location||r.Location,o=r.subscriptionId||r.SubscriptionId,u="",a=s||" - ",f,l,c,h,p=!1;return r.locationDisplayText?Shell.Utilities.htmlEncode(r.locationDisplayText||" - "):((i||s)&&o&&(f=window.Exp.Rdfe.getSubscription(o),f&&(i&&(l=window.Exp.Utilities.find(f.affinityGroups,function(e){return e.Name&&e.Name.toLowerCase()===i.toLowerCase()}),l&&(u=l.Label,s=l.Location)),s&&(c=window.Exp.Utilities.find(f.locations,function(e){return e.Name&&e.Name.toLowerCase()===s.toLowerCase()}),c&&(a=c.DisplayName,p=!0)))),!p&&s&&(a=t[s.toLowerCase()]||a),u&&a?h="{0} ({1})".format(u,a):h=a,Shell.Utilities.htmlEncode(h||" - "))}),status:function(e,t){var n=Array.prototype.slice.call(arguments,1),r=c(e,t);return window.waz.formatters.statusIcon.apply(this,[r].concat(n))},statusIcon:function(t,n){var r=Array.prototype.slice.call(arguments,1);return t.url?"<div class='fx-grid-sprite'><img src='"+Shell.Utilities.attributeEncode(t.url)+"' alt='' /></div>"+e.fxGridFormatter.text.apply(this,[t.text].concat(r)):t.iconName!=="spinner"?"<div class='fx-grid-sprite "+Shell.Utilities.attributeEncode(t.iconName)+"'><img src='"+Shell.Utilities.attributeEncode(window.waz.ImageResources.fullSprite)+"' alt='"+t.iconName+"' /></div>"+e.fxGridFormatter.text.apply(this,[t.text].concat(r)):window.waz.formatters.icon.apply(this,[t].concat(r))},icon:function(t,n){var r=Array.prototype.slice.call(arguments,1);return t&&t.iconName&&!t.url&&(t.url=window.waz.ImageResources[t.iconName]),e.fxGridFormatter.icon.apply(this,[t].concat(r))},bytesFormatter:u("B"),megaBytesFormatter:u("MB")},s={getFileSizeFormat:o},e.each(i,function(t,s){var o=n[t],u=r[t];if(o||u)i[t]=e.fxGridFormatter.bundle(s,o,u)}),window.Shell.Namespace.define("waz",{formatters:i}),window.Shell.Namespace.define("waz.formatters",{utilities:s})}),define("scripts/waz/waz.datagrid",["jquery","scripts/waz/waz.formatters"],function(e){var t=e.shell.shellDataGrid,n=window.waz.formatters,r={name:{cssClass:"name"},text:{cssClass:"text"},link:{cssClass:"link",formatter:n.link},image:{cssClass:"image",formatter:n.image},date:{cssClass:"date",formatter:e.fxGridFormatter.date("G")},navigation:{cssClass:"waz-grid-navigation",formatter:n.navigation},subscription:{cssClass:"subscription",formatter:n.subscription},location:{cssClass:"location",formatter:n.location},status:{cssClass:"status",formatter:n.status},navigationLink:{cssClass:"waz-grid-navigation-link",formatter:n.navigation}},i=t.prototype;e.widgetReference("waz.wazDataGrid",t,{options:{pagerOptions:{pageSize:25},resizable:!0,selectFirstRowByDefault:!1,id:"id"},_dataChangeHandler:null,_doneInitialRender:!1,_create:function(){var e=i._create.apply(this,arguments);return this.element.addClass("waz-grid"),e},_destroy:function(){this.element.removeClass("waz-grid"),this._dataChangeHandler&&(e([this.getDataSource().items]).off("arrayChange",this._dataChangeHandler),this._dataChangeHandler=null),this._super()},_selectAndExpandRow:function(t,n){var r=this.options.rowMetadata,i=null;t&&(i=e.grep(this.getAllRowMetadata(),function(e){return e.dataItem===t})[0],i||(i=this._getRowMetadata(t)),e.observable(i).setProperty("selected",!0),n&&(e.observable(i).setProperty("expanded",!0),this._triggerRowExpand(i))),this._trigger("rowSelect",null,{selected:i})},_selectFirstRowIfNoSelection:function(){var t=this.getSelectedRows().length>0,n=this.getDataSource().items,r;t||(n[0]?(r=this.options.expandFirstRowByDefault&&e.grep(this.getAllRowMetadata(),function(e){return e.expanded}).length===0,this._selectAndExpandRow(n[0],r)):this._selectAndExpandRow(null))},_onRowMetadataConfiguredAfterDataChange:function(){this.options.selectFirstRowByDefault&&this._doneInitialRender&&this._selectFirstRowIfNoSelection()},_normalizeColumns:function(t){return e.each(t,function(t,n){var i=r[n.type],s,o;i&&(s=i.cssClass,o=(s||"")+(s?" ":"")+(n.cssClass||""),o&&(n.cssClass=o),e.each(i,function(e,t){n[e]===undefined&&(n[e]=t)}))}),i._normalizeColumns.apply(this,arguments)},_onInitialRender:function(){var e=i._onInitialRender.apply(this,arguments);return this._doneInitialRender=!0,this.options.selectFirstRowByDefault&&this._selectFirstRowIfNoSelection(),e}})}),require(["jquery","lodash","d3","scripts/environment","uxfxscript"],function(){require(["scripts/app","scripts/init","generated/DataLabClient/Features","generated/DataLabClient/LocalizedResources","generated/DataLabClient/Util","generated/editor/TS/Global","generated/editor/TS/View/ProjectCollection/NewBlankProjectDialogView","extensioncore/exp.main","scripts/waz/waz.datagrid","markdown-converter","markdown-sanitizer","markdown-editor","vs/editor/editor.main"],function(e,t,n,r,i,s,o){window.Features=n,window.LocalizedResources=r,window.Util=i,window.NewBlankProjectDialogView=o,window.Global=s,Shell.Configuration.initialize().then(function(t){e.initialize()},function(t){e.initialize()}),t.initialize()})}),define("scripts/main",function(){});